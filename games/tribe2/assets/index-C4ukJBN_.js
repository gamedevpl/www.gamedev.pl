var AA=Object.defineProperty;var TA=(e,t,r)=>t in e?AA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Me=(e,t,r)=>TA(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function r(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(l){if(l.ep)return;l.ep=!0;const s=r(l);fetch(l.href,s)}})();function D0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hd={exports:{}},ws={},pd={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function IA(){if(Jg)return Be;Jg=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),S=Symbol.iterator;function y(R){return R===null||typeof R!="object"?null:(R=S&&R[S]||R["@@iterator"],typeof R=="function"?R:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,T={};function C(R,L,K){this.props=R,this.context=L,this.refs=T,this.updater=K||w}C.prototype.isReactComponent={},C.prototype.setState=function(R,L){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,L,"setState")},C.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function F(){}F.prototype=C.prototype;function B(R,L,K){this.props=R,this.context=L,this.refs=T,this.updater=K||w}var D=B.prototype=new F;D.constructor=B,E(D,C.prototype),D.isPureReactComponent=!0;var H=Array.isArray,x=Object.prototype.hasOwnProperty,U={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function ee(R,L,K){var ie,Se={},ae=null,Ee=null;if(L!=null)for(ie in L.ref!==void 0&&(Ee=L.ref),L.key!==void 0&&(ae=""+L.key),L)x.call(L,ie)&&!$.hasOwnProperty(ie)&&(Se[ie]=L[ie]);var Te=arguments.length-2;if(Te===1)Se.children=K;else if(1<Te){for(var Z=Array(Te),re=0;re<Te;re++)Z[re]=arguments[re+2];Se.children=Z}if(R&&R.defaultProps)for(ie in Te=R.defaultProps,Te)Se[ie]===void 0&&(Se[ie]=Te[ie]);return{$$typeof:e,type:R,key:ae,ref:Ee,props:Se,_owner:U.current}}function Ce(R,L){return{$$typeof:e,type:R.type,key:L,ref:R.ref,props:R.props,_owner:R._owner}}function _e(R){return typeof R=="object"&&R!==null&&R.$$typeof===e}function Ge(R){var L={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(K){return L[K]})}var Ne=/\/+/g;function Pe(R,L){return typeof R=="object"&&R!==null&&R.key!=null?Ge(""+R.key):L.toString(36)}function de(R,L,K,ie,Se){var ae=typeof R;(ae==="undefined"||ae==="boolean")&&(R=null);var Ee=!1;if(R===null)Ee=!0;else switch(ae){case"string":case"number":Ee=!0;break;case"object":switch(R.$$typeof){case e:case t:Ee=!0}}if(Ee)return Ee=R,Se=Se(Ee),R=ie===""?"."+Pe(Ee,0):ie,H(Se)?(K="",R!=null&&(K=R.replace(Ne,"$&/")+"/"),de(Se,L,K,"",function(re){return re})):Se!=null&&(_e(Se)&&(Se=Ce(Se,K+(!Se.key||Ee&&Ee.key===Se.key?"":(""+Se.key).replace(Ne,"$&/")+"/")+R)),L.push(Se)),1;if(Ee=0,ie=ie===""?".":ie+":",H(R))for(var Te=0;Te<R.length;Te++){ae=R[Te];var Z=ie+Pe(ae,Te);Ee+=de(ae,L,K,Z,Se)}else if(Z=y(R),typeof Z=="function")for(R=Z.call(R),Te=0;!(ae=R.next()).done;)ae=ae.value,Z=ie+Pe(ae,Te++),Ee+=de(ae,L,K,Z,Se);else if(ae==="object")throw L=String(R),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return Ee}function Ue(R,L,K){if(R==null)return R;var ie=[],Se=0;return de(R,ie,"","",function(ae){return L.call(K,ae,Se++)}),ie}function Ae(R){if(R._status===-1){var L=R._result;L=L(),L.then(function(K){(R._status===0||R._status===-1)&&(R._status=1,R._result=K)},function(K){(R._status===0||R._status===-1)&&(R._status=2,R._result=K)}),R._status===-1&&(R._status=0,R._result=L)}if(R._status===1)return R._result.default;throw R._result}var ne={current:null},W={transition:null},X={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:W,ReactCurrentOwner:U};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Be.Children={map:Ue,forEach:function(R,L,K){Ue(R,function(){L.apply(this,arguments)},K)},count:function(R){var L=0;return Ue(R,function(){L++}),L},toArray:function(R){return Ue(R,function(L){return L})||[]},only:function(R){if(!_e(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Be.Component=C,Be.Fragment=r,Be.Profiler=l,Be.PureComponent=B,Be.StrictMode=o,Be.Suspense=f,Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Be.act=Y,Be.cloneElement=function(R,L,K){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var ie=E({},R.props),Se=R.key,ae=R.ref,Ee=R._owner;if(L!=null){if(L.ref!==void 0&&(ae=L.ref,Ee=U.current),L.key!==void 0&&(Se=""+L.key),R.type&&R.type.defaultProps)var Te=R.type.defaultProps;for(Z in L)x.call(L,Z)&&!$.hasOwnProperty(Z)&&(ie[Z]=L[Z]===void 0&&Te!==void 0?Te[Z]:L[Z])}var Z=arguments.length-2;if(Z===1)ie.children=K;else if(1<Z){Te=Array(Z);for(var re=0;re<Z;re++)Te[re]=arguments[re+2];ie.children=Te}return{$$typeof:e,type:R.type,key:Se,ref:ae,props:ie,_owner:Ee}},Be.createContext=function(R){return R={$$typeof:u,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:s,_context:R},R.Consumer=R},Be.createElement=ee,Be.createFactory=function(R){var L=ee.bind(null,R);return L.type=R,L},Be.createRef=function(){return{current:null}},Be.forwardRef=function(R){return{$$typeof:d,render:R}},Be.isValidElement=_e,Be.lazy=function(R){return{$$typeof:m,_payload:{_status:-1,_result:R},_init:Ae}},Be.memo=function(R,L){return{$$typeof:p,type:R,compare:L===void 0?null:L}},Be.startTransition=function(R){var L=W.transition;W.transition={};try{R()}finally{W.transition=L}},Be.unstable_act=Y,Be.useCallback=function(R,L){return ne.current.useCallback(R,L)},Be.useContext=function(R){return ne.current.useContext(R)},Be.useDebugValue=function(){},Be.useDeferredValue=function(R){return ne.current.useDeferredValue(R)},Be.useEffect=function(R,L){return ne.current.useEffect(R,L)},Be.useId=function(){return ne.current.useId()},Be.useImperativeHandle=function(R,L,K){return ne.current.useImperativeHandle(R,L,K)},Be.useInsertionEffect=function(R,L){return ne.current.useInsertionEffect(R,L)},Be.useLayoutEffect=function(R,L){return ne.current.useLayoutEffect(R,L)},Be.useMemo=function(R,L){return ne.current.useMemo(R,L)},Be.useReducer=function(R,L,K){return ne.current.useReducer(R,L,K)},Be.useRef=function(R){return ne.current.useRef(R)},Be.useState=function(R){return ne.current.useState(R)},Be.useSyncExternalStore=function(R,L,K){return ne.current.useSyncExternalStore(R,L,K)},Be.useTransition=function(){return ne.current.useTransition()},Be.version="18.3.1",Be}var em;function wf(){return em||(em=1,pd.exports=IA()),pd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm;function EA(){if(tm)return ws;tm=1;var e=wf(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,p){var m,S={},y=null,w=null;p!==void 0&&(y=""+p),f.key!==void 0&&(y=""+f.key),f.ref!==void 0&&(w=f.ref);for(m in f)o.call(f,m)&&!s.hasOwnProperty(m)&&(S[m]=f[m]);if(d&&d.defaultProps)for(m in f=d.defaultProps,f)S[m]===void 0&&(S[m]=f[m]);return{$$typeof:t,type:d,key:y,ref:w,props:S,_owner:l.current}}return ws.Fragment=r,ws.jsx=u,ws.jsxs=u,ws}var nm;function wA(){return nm||(nm=1,hd.exports=EA()),hd.exports}var Fe=wA(),Re=wf();const Zn=D0(Re);var Tl={},gd={exports:{}},Zt={},md={exports:{}},vd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var im;function CA(){return im||(im=1,function(e){function t(W,X){var Y=W.length;W.push(X);e:for(;0<Y;){var R=Y-1>>>1,L=W[R];if(0<l(L,X))W[R]=X,W[Y]=L,Y=R;else break e}}function r(W){return W.length===0?null:W[0]}function o(W){if(W.length===0)return null;var X=W[0],Y=W.pop();if(Y!==X){W[0]=Y;e:for(var R=0,L=W.length,K=L>>>1;R<K;){var ie=2*(R+1)-1,Se=W[ie],ae=ie+1,Ee=W[ae];if(0>l(Se,Y))ae<L&&0>l(Ee,Se)?(W[R]=Ee,W[ae]=Y,R=ae):(W[R]=Se,W[ie]=Y,R=ie);else if(ae<L&&0>l(Ee,Y))W[R]=Ee,W[ae]=Y,R=ae;else break e}}return X}function l(W,X){var Y=W.sortIndex-X.sortIndex;return Y!==0?Y:W.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var f=[],p=[],m=1,S=null,y=3,w=!1,E=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(W){for(var X=r(p);X!==null;){if(X.callback===null)o(p);else if(X.startTime<=W)o(p),X.sortIndex=X.expirationTime,t(f,X);else break;X=r(p)}}function H(W){if(T=!1,D(W),!E)if(r(f)!==null)E=!0,Ae(x);else{var X=r(p);X!==null&&ne(H,X.startTime-W)}}function x(W,X){E=!1,T&&(T=!1,F(ee),ee=-1),w=!0;var Y=y;try{for(D(X),S=r(f);S!==null&&(!(S.expirationTime>X)||W&&!Ge());){var R=S.callback;if(typeof R=="function"){S.callback=null,y=S.priorityLevel;var L=R(S.expirationTime<=X);X=e.unstable_now(),typeof L=="function"?S.callback=L:S===r(f)&&o(f),D(X)}else o(f);S=r(f)}if(S!==null)var K=!0;else{var ie=r(p);ie!==null&&ne(H,ie.startTime-X),K=!1}return K}finally{S=null,y=Y,w=!1}}var U=!1,$=null,ee=-1,Ce=5,_e=-1;function Ge(){return!(e.unstable_now()-_e<Ce)}function Ne(){if($!==null){var W=e.unstable_now();_e=W;var X=!0;try{X=$(!0,W)}finally{X?Pe():(U=!1,$=null)}}else U=!1}var Pe;if(typeof B=="function")Pe=function(){B(Ne)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Ue=de.port2;de.port1.onmessage=Ne,Pe=function(){Ue.postMessage(null)}}else Pe=function(){C(Ne,0)};function Ae(W){$=W,U||(U=!0,Pe())}function ne(W,X){ee=C(function(){W(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){E||w||(E=!0,Ae(x))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ce=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(f)},e.unstable_next=function(W){switch(y){case 1:case 2:case 3:var X=3;break;default:X=y}var Y=y;y=X;try{return W()}finally{y=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,X){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Y=y;y=W;try{return X()}finally{y=Y}},e.unstable_scheduleCallback=function(W,X,Y){var R=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?R+Y:R):Y=R,W){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=Y+L,W={id:m++,callback:X,priorityLevel:W,startTime:Y,expirationTime:L,sortIndex:-1},Y>R?(W.sortIndex=Y,t(p,W),r(f)===null&&W===r(p)&&(T?(F(ee),ee=-1):T=!0,ne(H,Y-R))):(W.sortIndex=L,t(f,W),E||w||(E=!0,Ae(x))),W},e.unstable_shouldYield=Ge,e.unstable_wrapCallback=function(W){var X=y;return function(){var Y=y;y=X;try{return W.apply(this,arguments)}finally{y=Y}}}}(vd)),vd}var rm;function _A(){return rm||(rm=1,md.exports=CA()),md.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om;function RA(){if(om)return Zt;om=1;var e=wf(),t=_A();function r(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function s(n,i){u(n,i),u(n+"Capture",i)}function u(n,i){for(l[n]=i,n=0;n<i.length;n++)o.add(i[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},S={};function y(n){return f.call(S,n)?!0:f.call(m,n)?!1:p.test(n)?S[n]=!0:(m[n]=!0,!1)}function w(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function E(n,i,a,c){if(i===null||typeof i>"u"||w(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function T(n,i,a,c,h,g,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=v}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){C[n]=new T(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];C[i]=new T(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){C[n]=new T(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){C[n]=new T(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){C[n]=new T(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){C[n]=new T(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){C[n]=new T(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){C[n]=new T(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){C[n]=new T(n,5,!1,n.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function B(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(F,B);C[i]=new T(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(F,B);C[i]=new T(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(F,B);C[i]=new T(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){C[n]=new T(n,1,!1,n.toLowerCase(),null,!1,!1)}),C.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){C[n]=new T(n,1,!1,n.toLowerCase(),null,!0,!0)});function D(n,i,a,c){var h=C.hasOwnProperty(i)?C[i]:null;(h!==null?h.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(E(i,a,h,c)&&(a=null),c||h===null?y(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):h.mustUseProperty?n[h.propertyName]=a===null?h.type===3?!1:"":a:(i=h.attributeName,c=h.attributeNamespace,a===null?n.removeAttribute(i):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var H=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),U=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),Ce=Symbol.for("react.profiler"),_e=Symbol.for("react.provider"),Ge=Symbol.for("react.context"),Ne=Symbol.for("react.forward_ref"),Pe=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),Ue=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),W=Symbol.iterator;function X(n){return n===null||typeof n!="object"?null:(n=W&&n[W]||n["@@iterator"],typeof n=="function"?n:null)}var Y=Object.assign,R;function L(n){if(R===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);R=i&&i[1]||""}return`
`+R+n}var K=!1;function ie(n,i){if(!n||K)return"";K=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(k){var c=k}Reflect.construct(n,[],i)}else{try{i.call()}catch(k){c=k}n.call(i.prototype)}else{try{throw Error()}catch(k){c=k}n()}}catch(k){if(k&&c&&typeof k.stack=="string"){for(var h=k.stack.split(`
`),g=c.stack.split(`
`),v=h.length-1,A=g.length-1;1<=v&&0<=A&&h[v]!==g[A];)A--;for(;1<=v&&0<=A;v--,A--)if(h[v]!==g[A]){if(v!==1||A!==1)do if(v--,A--,0>A||h[v]!==g[A]){var _=`
`+h[v].replace(" at new "," at ");return n.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",n.displayName)),_}while(1<=v&&0<=A);break}}}finally{K=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?L(n):""}function Se(n){switch(n.tag){case 5:return L(n.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return n=ie(n.type,!1),n;case 11:return n=ie(n.type.render,!1),n;case 1:return n=ie(n.type,!0),n;default:return""}}function ae(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $:return"Fragment";case U:return"Portal";case Ce:return"Profiler";case ee:return"StrictMode";case Pe:return"Suspense";case de:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ge:return(n.displayName||"Context")+".Consumer";case _e:return(n._context.displayName||"Context")+".Provider";case Ne:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ue:return i=n.displayName||null,i!==null?i:ae(n.type)||"Memo";case Ae:i=n._payload,n=n._init;try{return ae(n(i))}catch{}}return null}function Ee(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(i);case 8:return i===ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Te(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Z(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function re(n){var i=Z(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){c=""+v,g.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Le(n){n._valueTracker||(n._valueTracker=re(n))}function he(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Z(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Ln(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function qe(n,i){var a=i.checked;return Y({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function je(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Te(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Bn(n,i){i=i.checked,i!=null&&D(n,"checked",i,!1)}function Wt(n,i){Bn(n,i);var a=Te(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Hn(n,i.type,a):i.hasOwnProperty("defaultValue")&&Hn(n,i.type,Te(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function an(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Hn(n,i,a){(i!=="number"||Ln(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var bn=Array.isArray;function vi(n,i,a,c){if(n=n.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=i.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Te(a),i=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}i!==null||n[h].disabled||(i=n[h])}i!==null&&(i.selected=!0)}}function nr(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return Y({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function uh(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(r(92));if(bn(a)){if(1<a.length)throw Error(r(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Te(a)}}function ch(n,i){var a=Te(i.value),c=Te(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function dh(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function fh(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wu(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?fh(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ha,hh=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,h){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,h)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(ha=ha||document.createElement("div"),ha.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=ha.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Go(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wS=["Webkit","ms","Moz","O"];Object.keys(xo).forEach(function(n){wS.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),xo[i]=xo[n]})});function ph(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||xo.hasOwnProperty(n)&&xo[n]?(""+i).trim():i+"px"}function gh(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,h=ph(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,h):n[a]=h}}var CS=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cu(n,i){if(i){if(CS[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function _u(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ru=null;function Pu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Nu=null,Br=null,Hr=null;function mh(n){if(n=us(n)){if(typeof Nu!="function")throw Error(r(280));var i=n.stateNode;i&&(i=La(i),Nu(n.stateNode,n.type,i))}}function vh(n){Br?Hr?Hr.push(n):Hr=[n]:Br=n}function Sh(){if(Br){var n=Br,i=Hr;if(Hr=Br=null,mh(n),i)for(n=0;n<i.length;n++)mh(i[n])}}function yh(n,i){return n(i)}function Ah(){}var Du=!1;function Th(n,i,a){if(Du)return n(i,a);Du=!0;try{return yh(n,i,a)}finally{Du=!1,(Br!==null||Hr!==null)&&(Ah(),Sh())}}function $o(n,i){var a=n.stateNode;if(a===null)return null;var c=La(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Ou=!1;if(d)try{var zo={};Object.defineProperty(zo,"passive",{get:function(){Ou=!0}}),window.addEventListener("test",zo,zo),window.removeEventListener("test",zo,zo)}catch{Ou=!1}function _S(n,i,a,c,h,g,v,A,_){var k=Array.prototype.slice.call(arguments,3);try{i.apply(a,k)}catch(G){this.onError(G)}}var Wo=!1,pa=null,ga=!1,Mu=null,RS={onError:function(n){Wo=!0,pa=n}};function PS(n,i,a,c,h,g,v,A,_){Wo=!1,pa=null,_S.apply(RS,arguments)}function NS(n,i,a,c,h,g,v,A,_){if(PS.apply(this,arguments),Wo){if(Wo){var k=pa;Wo=!1,pa=null}else throw Error(r(198));ga||(ga=!0,Mu=k)}}function ir(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Ih(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Eh(n){if(ir(n)!==n)throw Error(r(188))}function DS(n){var i=n.alternate;if(!i){if(i=ir(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,c=i;;){var h=a.return;if(h===null)break;var g=h.alternate;if(g===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===a)return Eh(h),n;if(g===c)return Eh(h),i;g=g.sibling}throw Error(r(188))}if(a.return!==c.return)a=h,c=g;else{for(var v=!1,A=h.child;A;){if(A===a){v=!0,a=h,c=g;break}if(A===c){v=!0,c=h,a=g;break}A=A.sibling}if(!v){for(A=g.child;A;){if(A===a){v=!0,a=g,c=h;break}if(A===c){v=!0,c=g,a=h;break}A=A.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==c)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function wh(n){return n=DS(n),n!==null?Ch(n):null}function Ch(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Ch(n);if(i!==null)return i;n=n.sibling}return null}var _h=t.unstable_scheduleCallback,Rh=t.unstable_cancelCallback,OS=t.unstable_shouldYield,MS=t.unstable_requestPaint,st=t.unstable_now,kS=t.unstable_getCurrentPriorityLevel,ku=t.unstable_ImmediatePriority,Ph=t.unstable_UserBlockingPriority,ma=t.unstable_NormalPriority,FS=t.unstable_LowPriority,Nh=t.unstable_IdlePriority,va=null,Gn=null;function US(n){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(va,n,void 0,(n.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:HS,LS=Math.log,BS=Math.LN2;function HS(n){return n>>>=0,n===0?32:31-(LS(n)/BS|0)|0}var Sa=64,ya=4194304;function Yo(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Aa(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,h=n.suspendedLanes,g=n.pingedLanes,v=a&268435455;if(v!==0){var A=v&~h;A!==0?c=Yo(A):(g&=v,g!==0&&(c=Yo(g)))}else v=a&~h,v!==0?c=Yo(v):g!==0&&(c=Yo(g));if(c===0)return 0;if(i!==0&&i!==c&&(i&h)===0&&(h=c&-c,g=i&-i,h>=g||h===16&&(g&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-Tn(i),h=1<<a,c|=n[a],i&=~h;return c}function bS(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GS(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,g=n.pendingLanes;0<g;){var v=31-Tn(g),A=1<<v,_=h[v];_===-1?((A&a)===0||(A&c)!==0)&&(h[v]=bS(A,i)):_<=i&&(n.expiredLanes|=A),g&=~A}}function Fu(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Dh(){var n=Sa;return Sa<<=1,(Sa&4194240)===0&&(Sa=64),n}function Uu(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function jo(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Tn(i),n[i]=a}function xS(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var h=31-Tn(a),g=1<<h;i[h]=0,c[h]=-1,n[h]=-1,a&=~g}}function Lu(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-Tn(a),h=1<<c;h&i|n[c]&i&&(n[c]|=i),a&=~h}}var We=0;function Oh(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Mh,Bu,kh,Fh,Uh,Hu=!1,Ta=[],Si=null,yi=null,Ai=null,Vo=new Map,Xo=new Map,Ti=[],$S="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lh(n,i){switch(n){case"focusin":case"focusout":Si=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":Ai=null;break;case"pointerover":case"pointerout":Vo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(i.pointerId)}}function Ko(n,i,a,c,h,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[h]},i!==null&&(i=us(i),i!==null&&Bu(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),n)}function zS(n,i,a,c,h){switch(i){case"focusin":return Si=Ko(Si,n,i,a,c,h),!0;case"dragenter":return yi=Ko(yi,n,i,a,c,h),!0;case"mouseover":return Ai=Ko(Ai,n,i,a,c,h),!0;case"pointerover":var g=h.pointerId;return Vo.set(g,Ko(Vo.get(g)||null,n,i,a,c,h)),!0;case"gotpointercapture":return g=h.pointerId,Xo.set(g,Ko(Xo.get(g)||null,n,i,a,c,h)),!0}return!1}function Bh(n){var i=rr(n.target);if(i!==null){var a=ir(i);if(a!==null){if(i=a.tag,i===13){if(i=Ih(a),i!==null){n.blockedOn=i,Uh(n.priority,function(){kh(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ia(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Gu(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Ru=c,a.target.dispatchEvent(c),Ru=null}else return i=us(a),i!==null&&Bu(i),n.blockedOn=a,!1;i.shift()}return!0}function Hh(n,i,a){Ia(n)&&a.delete(i)}function WS(){Hu=!1,Si!==null&&Ia(Si)&&(Si=null),yi!==null&&Ia(yi)&&(yi=null),Ai!==null&&Ia(Ai)&&(Ai=null),Vo.forEach(Hh),Xo.forEach(Hh)}function Zo(n,i){n.blockedOn===i&&(n.blockedOn=null,Hu||(Hu=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,WS)))}function qo(n){function i(h){return Zo(h,n)}if(0<Ta.length){Zo(Ta[0],n);for(var a=1;a<Ta.length;a++){var c=Ta[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Si!==null&&Zo(Si,n),yi!==null&&Zo(yi,n),Ai!==null&&Zo(Ai,n),Vo.forEach(i),Xo.forEach(i),a=0;a<Ti.length;a++)c=Ti[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Ti.length&&(a=Ti[0],a.blockedOn===null);)Bh(a),a.blockedOn===null&&Ti.shift()}var br=H.ReactCurrentBatchConfig,Ea=!0;function YS(n,i,a,c){var h=We,g=br.transition;br.transition=null;try{We=1,bu(n,i,a,c)}finally{We=h,br.transition=g}}function jS(n,i,a,c){var h=We,g=br.transition;br.transition=null;try{We=4,bu(n,i,a,c)}finally{We=h,br.transition=g}}function bu(n,i,a,c){if(Ea){var h=Gu(n,i,a,c);if(h===null)ic(n,i,c,wa,a),Lh(n,c);else if(zS(h,n,i,a,c))c.stopPropagation();else if(Lh(n,c),i&4&&-1<$S.indexOf(n)){for(;h!==null;){var g=us(h);if(g!==null&&Mh(g),g=Gu(n,i,a,c),g===null&&ic(n,i,c,wa,a),g===h)break;h=g}h!==null&&c.stopPropagation()}else ic(n,i,c,null,a)}}var wa=null;function Gu(n,i,a,c){if(wa=null,n=Pu(c),n=rr(n),n!==null)if(i=ir(n),i===null)n=null;else if(a=i.tag,a===13){if(n=Ih(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return wa=n,null}function bh(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kS()){case ku:return 1;case Ph:return 4;case ma:case FS:return 16;case Nh:return 536870912;default:return 16}default:return 16}}var Ii=null,xu=null,Ca=null;function Gh(){if(Ca)return Ca;var n,i=xu,a=i.length,c,h="value"in Ii?Ii.value:Ii.textContent,g=h.length;for(n=0;n<a&&i[n]===h[n];n++);var v=a-n;for(c=1;c<=v&&i[a-c]===h[g-c];c++);return Ca=h.slice(n,1<c?1-c:void 0)}function _a(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Ra(){return!0}function xh(){return!1}function Qt(n){function i(a,c,h,g,v){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ra:xh,this.isPropagationStopped=xh,this}return Y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ra)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ra)},persist:function(){},isPersistent:Ra}),i}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$u=Qt(Gr),Qo=Y({},Gr,{view:0,detail:0}),VS=Qt(Qo),zu,Wu,Jo,Pa=Y({},Qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ju,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Jo&&(Jo&&n.type==="mousemove"?(zu=n.screenX-Jo.screenX,Wu=n.screenY-Jo.screenY):Wu=zu=0,Jo=n),zu)},movementY:function(n){return"movementY"in n?n.movementY:Wu}}),$h=Qt(Pa),XS=Y({},Pa,{dataTransfer:0}),KS=Qt(XS),ZS=Y({},Qo,{relatedTarget:0}),Yu=Qt(ZS),qS=Y({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),QS=Qt(qS),JS=Y({},Gr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ey=Qt(JS),ty=Y({},Gr,{data:0}),zh=Qt(ty),ny={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ry={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oy(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=ry[n])?!!i[n]:!1}function ju(){return oy}var sy=Y({},Qo,{key:function(n){if(n.key){var i=ny[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=_a(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?iy[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ju,charCode:function(n){return n.type==="keypress"?_a(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?_a(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ay=Qt(sy),ly=Y({},Pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wh=Qt(ly),uy=Y({},Qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ju}),cy=Qt(uy),dy=Y({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),fy=Qt(dy),hy=Y({},Pa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),py=Qt(hy),gy=[9,13,27,32],Vu=d&&"CompositionEvent"in window,es=null;d&&"documentMode"in document&&(es=document.documentMode);var my=d&&"TextEvent"in window&&!es,Yh=d&&(!Vu||es&&8<es&&11>=es),jh=" ",Vh=!1;function Xh(n,i){switch(n){case"keyup":return gy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var xr=!1;function vy(n,i){switch(n){case"compositionend":return Kh(i);case"keypress":return i.which!==32?null:(Vh=!0,jh);case"textInput":return n=i.data,n===jh&&Vh?null:n;default:return null}}function Sy(n,i){if(xr)return n==="compositionend"||!Vu&&Xh(n,i)?(n=Gh(),Ca=xu=Ii=null,xr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Yh&&i.locale!=="ko"?null:i.data;default:return null}}var yy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!yy[n.type]:i==="textarea"}function qh(n,i,a,c){vh(c),i=ka(i,"onChange"),0<i.length&&(a=new $u("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var ts=null,ns=null;function Ay(n){gp(n,0)}function Na(n){var i=jr(n);if(he(i))return n}function Ty(n,i){if(n==="change")return i}var Qh=!1;if(d){var Xu;if(d){var Ku="oninput"in document;if(!Ku){var Jh=document.createElement("div");Jh.setAttribute("oninput","return;"),Ku=typeof Jh.oninput=="function"}Xu=Ku}else Xu=!1;Qh=Xu&&(!document.documentMode||9<document.documentMode)}function ep(){ts&&(ts.detachEvent("onpropertychange",tp),ns=ts=null)}function tp(n){if(n.propertyName==="value"&&Na(ns)){var i=[];qh(i,ns,n,Pu(n)),Th(Ay,i)}}function Iy(n,i,a){n==="focusin"?(ep(),ts=i,ns=a,ts.attachEvent("onpropertychange",tp)):n==="focusout"&&ep()}function Ey(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Na(ns)}function wy(n,i){if(n==="click")return Na(i)}function Cy(n,i){if(n==="input"||n==="change")return Na(i)}function _y(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var In=typeof Object.is=="function"?Object.is:_y;function is(n,i){if(In(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!f.call(i,h)||!In(n[h],i[h]))return!1}return!0}function np(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ip(n,i){var a=np(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=np(a)}}function rp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?rp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function op(){for(var n=window,i=Ln();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Ln(n.document)}return i}function Zu(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Ry(n){var i=op(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&rp(a.ownerDocument.documentElement,a)){if(c!==null&&Zu(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var h=a.textContent.length,g=Math.min(c.start,h);c=c.end===void 0?g:Math.min(c.end,h),!n.extend&&g>c&&(h=c,c=g,g=h),h=ip(a,g);var v=ip(a,c);h&&v&&(n.rangeCount!==1||n.anchorNode!==h.node||n.anchorOffset!==h.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(h.node,h.offset),n.removeAllRanges(),g>c?(n.addRange(i),n.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Py=d&&"documentMode"in document&&11>=document.documentMode,$r=null,qu=null,rs=null,Qu=!1;function sp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Qu||$r==null||$r!==Ln(c)||(c=$r,"selectionStart"in c&&Zu(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),rs&&is(rs,c)||(rs=c,c=ka(qu,"onSelect"),0<c.length&&(i=new $u("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=$r)))}function Da(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var zr={animationend:Da("Animation","AnimationEnd"),animationiteration:Da("Animation","AnimationIteration"),animationstart:Da("Animation","AnimationStart"),transitionend:Da("Transition","TransitionEnd")},Ju={},ap={};d&&(ap=document.createElement("div").style,"AnimationEvent"in window||(delete zr.animationend.animation,delete zr.animationiteration.animation,delete zr.animationstart.animation),"TransitionEvent"in window||delete zr.transitionend.transition);function Oa(n){if(Ju[n])return Ju[n];if(!zr[n])return n;var i=zr[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in ap)return Ju[n]=i[a];return n}var lp=Oa("animationend"),up=Oa("animationiteration"),cp=Oa("animationstart"),dp=Oa("transitionend"),fp=new Map,hp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(n,i){fp.set(n,i),s(i,[n])}for(var ec=0;ec<hp.length;ec++){var tc=hp[ec],Ny=tc.toLowerCase(),Dy=tc[0].toUpperCase()+tc.slice(1);Ei(Ny,"on"+Dy)}Ei(lp,"onAnimationEnd"),Ei(up,"onAnimationIteration"),Ei(cp,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(dp,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oy=new Set("cancel close invalid load scroll toggle".split(" ").concat(os));function pp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,NS(c,i,void 0,n),n.currentTarget=null}function gp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],h=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var v=c.length-1;0<=v;v--){var A=c[v],_=A.instance,k=A.currentTarget;if(A=A.listener,_!==g&&h.isPropagationStopped())break e;pp(h,A,k),g=_}else for(v=0;v<c.length;v++){if(A=c[v],_=A.instance,k=A.currentTarget,A=A.listener,_!==g&&h.isPropagationStopped())break e;pp(h,A,k),g=_}}}if(ga)throw n=Mu,ga=!1,Mu=null,n}function Ve(n,i){var a=i[uc];a===void 0&&(a=i[uc]=new Set);var c=n+"__bubble";a.has(c)||(mp(i,n,2,!1),a.add(c))}function nc(n,i,a){var c=0;i&&(c|=4),mp(a,n,c,i)}var Ma="_reactListening"+Math.random().toString(36).slice(2);function ss(n){if(!n[Ma]){n[Ma]=!0,o.forEach(function(a){a!=="selectionchange"&&(Oy.has(a)||nc(a,!1,n),nc(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ma]||(i[Ma]=!0,nc("selectionchange",!1,i))}}function mp(n,i,a,c){switch(bh(i)){case 1:var h=YS;break;case 4:h=jS;break;default:h=bu}a=h.bind(null,i,a,n),h=void 0,!Ou||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(i,a,{capture:!0,passive:h}):n.addEventListener(i,a,!0):h!==void 0?n.addEventListener(i,a,{passive:h}):n.addEventListener(i,a,!1)}function ic(n,i,a,c,h){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var A=c.stateNode.containerInfo;if(A===h||A.nodeType===8&&A.parentNode===h)break;if(v===4)for(v=c.return;v!==null;){var _=v.tag;if((_===3||_===4)&&(_=v.stateNode.containerInfo,_===h||_.nodeType===8&&_.parentNode===h))return;v=v.return}for(;A!==null;){if(v=rr(A),v===null)return;if(_=v.tag,_===5||_===6){c=g=v;continue e}A=A.parentNode}}c=c.return}Th(function(){var k=g,G=Pu(a),z=[];e:{var b=fp.get(n);if(b!==void 0){var q=$u,te=n;switch(n){case"keypress":if(_a(a)===0)break e;case"keydown":case"keyup":q=ay;break;case"focusin":te="focus",q=Yu;break;case"focusout":te="blur",q=Yu;break;case"beforeblur":case"afterblur":q=Yu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=$h;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=KS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=cy;break;case lp:case up:case cp:q=QS;break;case dp:q=fy;break;case"scroll":q=VS;break;case"wheel":q=py;break;case"copy":case"cut":case"paste":q=ey;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Wh}var oe=(i&4)!==0,at=!oe&&n==="scroll",O=oe?b!==null?b+"Capture":null:b;oe=[];for(var N=k,M;N!==null;){M=N;var j=M.stateNode;if(M.tag===5&&j!==null&&(M=j,O!==null&&(j=$o(N,O),j!=null&&oe.push(as(N,j,M)))),at)break;N=N.return}0<oe.length&&(b=new q(b,te,null,a,G),z.push({event:b,listeners:oe}))}}if((i&7)===0){e:{if(b=n==="mouseover"||n==="pointerover",q=n==="mouseout"||n==="pointerout",b&&a!==Ru&&(te=a.relatedTarget||a.fromElement)&&(rr(te)||te[Jn]))break e;if((q||b)&&(b=G.window===G?G:(b=G.ownerDocument)?b.defaultView||b.parentWindow:window,q?(te=a.relatedTarget||a.toElement,q=k,te=te?rr(te):null,te!==null&&(at=ir(te),te!==at||te.tag!==5&&te.tag!==6)&&(te=null)):(q=null,te=k),q!==te)){if(oe=$h,j="onMouseLeave",O="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(oe=Wh,j="onPointerLeave",O="onPointerEnter",N="pointer"),at=q==null?b:jr(q),M=te==null?b:jr(te),b=new oe(j,N+"leave",q,a,G),b.target=at,b.relatedTarget=M,j=null,rr(G)===k&&(oe=new oe(O,N+"enter",te,a,G),oe.target=M,oe.relatedTarget=at,j=oe),at=j,q&&te)t:{for(oe=q,O=te,N=0,M=oe;M;M=Wr(M))N++;for(M=0,j=O;j;j=Wr(j))M++;for(;0<N-M;)oe=Wr(oe),N--;for(;0<M-N;)O=Wr(O),M--;for(;N--;){if(oe===O||O!==null&&oe===O.alternate)break t;oe=Wr(oe),O=Wr(O)}oe=null}else oe=null;q!==null&&vp(z,b,q,oe,!1),te!==null&&at!==null&&vp(z,at,te,oe,!0)}}e:{if(b=k?jr(k):window,q=b.nodeName&&b.nodeName.toLowerCase(),q==="select"||q==="input"&&b.type==="file")var le=Ty;else if(Zh(b))if(Qh)le=Cy;else{le=Ey;var me=Iy}else(q=b.nodeName)&&q.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(le=wy);if(le&&(le=le(n,k))){qh(z,le,a,G);break e}me&&me(n,b,k),n==="focusout"&&(me=b._wrapperState)&&me.controlled&&b.type==="number"&&Hn(b,"number",b.value)}switch(me=k?jr(k):window,n){case"focusin":(Zh(me)||me.contentEditable==="true")&&($r=me,qu=k,rs=null);break;case"focusout":rs=qu=$r=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,sp(z,a,G);break;case"selectionchange":if(Py)break;case"keydown":case"keyup":sp(z,a,G)}var ve;if(Vu)e:{switch(n){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else xr?Xh(n,a)&&(we="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(Yh&&a.locale!=="ko"&&(xr||we!=="onCompositionStart"?we==="onCompositionEnd"&&xr&&(ve=Gh()):(Ii=G,xu="value"in Ii?Ii.value:Ii.textContent,xr=!0)),me=ka(k,we),0<me.length&&(we=new zh(we,n,null,a,G),z.push({event:we,listeners:me}),ve?we.data=ve:(ve=Kh(a),ve!==null&&(we.data=ve)))),(ve=my?vy(n,a):Sy(n,a))&&(k=ka(k,"onBeforeInput"),0<k.length&&(G=new zh("onBeforeInput","beforeinput",null,a,G),z.push({event:G,listeners:k}),G.data=ve))}gp(z,i)})}function as(n,i,a){return{instance:n,listener:i,currentTarget:a}}function ka(n,i){for(var a=i+"Capture",c=[];n!==null;){var h=n,g=h.stateNode;h.tag===5&&g!==null&&(h=g,g=$o(n,a),g!=null&&c.unshift(as(n,g,h)),g=$o(n,i),g!=null&&c.push(as(n,g,h))),n=n.return}return c}function Wr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function vp(n,i,a,c,h){for(var g=i._reactName,v=[];a!==null&&a!==c;){var A=a,_=A.alternate,k=A.stateNode;if(_!==null&&_===c)break;A.tag===5&&k!==null&&(A=k,h?(_=$o(a,g),_!=null&&v.unshift(as(a,_,A))):h||(_=$o(a,g),_!=null&&v.push(as(a,_,A)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var My=/\r\n?/g,ky=/\u0000|\uFFFD/g;function Sp(n){return(typeof n=="string"?n:""+n).replace(My,`
`).replace(ky,"")}function Fa(n,i,a){if(i=Sp(i),Sp(n)!==i&&a)throw Error(r(425))}function Ua(){}var rc=null,oc=null;function sc(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ac=typeof setTimeout=="function"?setTimeout:void 0,Fy=typeof clearTimeout=="function"?clearTimeout:void 0,yp=typeof Promise=="function"?Promise:void 0,Uy=typeof queueMicrotask=="function"?queueMicrotask:typeof yp<"u"?function(n){return yp.resolve(null).then(n).catch(Ly)}:ac;function Ly(n){setTimeout(function(){throw n})}function lc(n,i){var a=i,c=0;do{var h=a.nextSibling;if(n.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(c===0){n.removeChild(h),qo(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=h}while(a);qo(i)}function wi(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Ap(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Yr=Math.random().toString(36).slice(2),xn="__reactFiber$"+Yr,ls="__reactProps$"+Yr,Jn="__reactContainer$"+Yr,uc="__reactEvents$"+Yr,By="__reactListeners$"+Yr,Hy="__reactHandles$"+Yr;function rr(n){var i=n[xn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Jn]||a[xn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Ap(n);n!==null;){if(a=n[xn])return a;n=Ap(n)}return i}n=a,a=n.parentNode}return null}function us(n){return n=n[xn]||n[Jn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function jr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(r(33))}function La(n){return n[ls]||null}var cc=[],Vr=-1;function Ci(n){return{current:n}}function Xe(n){0>Vr||(n.current=cc[Vr],cc[Vr]=null,Vr--)}function Ye(n,i){Vr++,cc[Vr]=n.current,n.current=i}var _i={},Nt=Ci(_i),Yt=Ci(!1),or=_i;function Xr(n,i){var a=n.type.contextTypes;if(!a)return _i;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var h={},g;for(g in a)h[g]=i[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=h),h}function jt(n){return n=n.childContextTypes,n!=null}function Ba(){Xe(Yt),Xe(Nt)}function Tp(n,i,a){if(Nt.current!==_i)throw Error(r(168));Ye(Nt,i),Ye(Yt,a)}function Ip(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var h in c)if(!(h in i))throw Error(r(108,Ee(n)||"Unknown",h));return Y({},a,c)}function Ha(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||_i,or=Nt.current,Ye(Nt,n),Ye(Yt,Yt.current),!0}function Ep(n,i,a){var c=n.stateNode;if(!c)throw Error(r(169));a?(n=Ip(n,i,or),c.__reactInternalMemoizedMergedChildContext=n,Xe(Yt),Xe(Nt),Ye(Nt,n)):Xe(Yt),Ye(Yt,a)}var ei=null,ba=!1,dc=!1;function wp(n){ei===null?ei=[n]:ei.push(n)}function by(n){ba=!0,wp(n)}function Ri(){if(!dc&&ei!==null){dc=!0;var n=0,i=We;try{var a=ei;for(We=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}ei=null,ba=!1}catch(h){throw ei!==null&&(ei=ei.slice(n+1)),_h(ku,Ri),h}finally{We=i,dc=!1}}return null}var Kr=[],Zr=0,Ga=null,xa=0,ln=[],un=0,sr=null,ti=1,ni="";function ar(n,i){Kr[Zr++]=xa,Kr[Zr++]=Ga,Ga=n,xa=i}function Cp(n,i,a){ln[un++]=ti,ln[un++]=ni,ln[un++]=sr,sr=n;var c=ti;n=ni;var h=32-Tn(c)-1;c&=~(1<<h),a+=1;var g=32-Tn(i)+h;if(30<g){var v=h-h%5;g=(c&(1<<v)-1).toString(32),c>>=v,h-=v,ti=1<<32-Tn(i)+h|a<<h|c,ni=g+n}else ti=1<<g|a<<h|c,ni=n}function fc(n){n.return!==null&&(ar(n,1),Cp(n,1,0))}function hc(n){for(;n===Ga;)Ga=Kr[--Zr],Kr[Zr]=null,xa=Kr[--Zr],Kr[Zr]=null;for(;n===sr;)sr=ln[--un],ln[un]=null,ni=ln[--un],ln[un]=null,ti=ln[--un],ln[un]=null}var Jt=null,en=null,Qe=!1,En=null;function _p(n,i){var a=hn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Rp(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Jt=n,en=wi(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Jt=n,en=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=sr!==null?{id:ti,overflow:ni}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=hn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,Jt=n,en=null,!0):!1;default:return!1}}function pc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function gc(n){if(Qe){var i=en;if(i){var a=i;if(!Rp(n,i)){if(pc(n))throw Error(r(418));i=wi(a.nextSibling);var c=Jt;i&&Rp(n,i)?_p(c,a):(n.flags=n.flags&-4097|2,Qe=!1,Jt=n)}}else{if(pc(n))throw Error(r(418));n.flags=n.flags&-4097|2,Qe=!1,Jt=n}}}function Pp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Jt=n}function $a(n){if(n!==Jt)return!1;if(!Qe)return Pp(n),Qe=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!sc(n.type,n.memoizedProps)),i&&(i=en)){if(pc(n))throw Np(),Error(r(418));for(;i;)_p(n,i),i=wi(i.nextSibling)}if(Pp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){en=wi(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}en=null}}else en=Jt?wi(n.stateNode.nextSibling):null;return!0}function Np(){for(var n=en;n;)n=wi(n.nextSibling)}function qr(){en=Jt=null,Qe=!1}function mc(n){En===null?En=[n]:En.push(n)}var Gy=H.ReactCurrentBatchConfig;function cs(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(r(309));var c=a.stateNode}if(!c)throw Error(r(147,n));var h=c,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(v){var A=h.refs;v===null?delete A[g]:A[g]=v},i._stringRef=g,i)}if(typeof n!="string")throw Error(r(284));if(!a._owner)throw Error(r(290,n))}return n}function za(n,i){throw n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Dp(n){var i=n._init;return i(n._payload)}function Op(n){function i(O,N){if(n){var M=O.deletions;M===null?(O.deletions=[N],O.flags|=16):M.push(N)}}function a(O,N){if(!n)return null;for(;N!==null;)i(O,N),N=N.sibling;return null}function c(O,N){for(O=new Map;N!==null;)N.key!==null?O.set(N.key,N):O.set(N.index,N),N=N.sibling;return O}function h(O,N){return O=Ui(O,N),O.index=0,O.sibling=null,O}function g(O,N,M){return O.index=M,n?(M=O.alternate,M!==null?(M=M.index,M<N?(O.flags|=2,N):M):(O.flags|=2,N)):(O.flags|=1048576,N)}function v(O){return n&&O.alternate===null&&(O.flags|=2),O}function A(O,N,M,j){return N===null||N.tag!==6?(N=ad(M,O.mode,j),N.return=O,N):(N=h(N,M),N.return=O,N)}function _(O,N,M,j){var le=M.type;return le===$?G(O,N,M.props.children,j,M.key):N!==null&&(N.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===Ae&&Dp(le)===N.type)?(j=h(N,M.props),j.ref=cs(O,N,M),j.return=O,j):(j=hl(M.type,M.key,M.props,null,O.mode,j),j.ref=cs(O,N,M),j.return=O,j)}function k(O,N,M,j){return N===null||N.tag!==4||N.stateNode.containerInfo!==M.containerInfo||N.stateNode.implementation!==M.implementation?(N=ld(M,O.mode,j),N.return=O,N):(N=h(N,M.children||[]),N.return=O,N)}function G(O,N,M,j,le){return N===null||N.tag!==7?(N=gr(M,O.mode,j,le),N.return=O,N):(N=h(N,M),N.return=O,N)}function z(O,N,M){if(typeof N=="string"&&N!==""||typeof N=="number")return N=ad(""+N,O.mode,M),N.return=O,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case x:return M=hl(N.type,N.key,N.props,null,O.mode,M),M.ref=cs(O,null,N),M.return=O,M;case U:return N=ld(N,O.mode,M),N.return=O,N;case Ae:var j=N._init;return z(O,j(N._payload),M)}if(bn(N)||X(N))return N=gr(N,O.mode,M,null),N.return=O,N;za(O,N)}return null}function b(O,N,M,j){var le=N!==null?N.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return le!==null?null:A(O,N,""+M,j);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case x:return M.key===le?_(O,N,M,j):null;case U:return M.key===le?k(O,N,M,j):null;case Ae:return le=M._init,b(O,N,le(M._payload),j)}if(bn(M)||X(M))return le!==null?null:G(O,N,M,j,null);za(O,M)}return null}function q(O,N,M,j,le){if(typeof j=="string"&&j!==""||typeof j=="number")return O=O.get(M)||null,A(N,O,""+j,le);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case x:return O=O.get(j.key===null?M:j.key)||null,_(N,O,j,le);case U:return O=O.get(j.key===null?M:j.key)||null,k(N,O,j,le);case Ae:var me=j._init;return q(O,N,M,me(j._payload),le)}if(bn(j)||X(j))return O=O.get(M)||null,G(N,O,j,le,null);za(N,j)}return null}function te(O,N,M,j){for(var le=null,me=null,ve=N,we=N=0,St=null;ve!==null&&we<M.length;we++){ve.index>we?(St=ve,ve=null):St=ve.sibling;var xe=b(O,ve,M[we],j);if(xe===null){ve===null&&(ve=St);break}n&&ve&&xe.alternate===null&&i(O,ve),N=g(xe,N,we),me===null?le=xe:me.sibling=xe,me=xe,ve=St}if(we===M.length)return a(O,ve),Qe&&ar(O,we),le;if(ve===null){for(;we<M.length;we++)ve=z(O,M[we],j),ve!==null&&(N=g(ve,N,we),me===null?le=ve:me.sibling=ve,me=ve);return Qe&&ar(O,we),le}for(ve=c(O,ve);we<M.length;we++)St=q(ve,O,we,M[we],j),St!==null&&(n&&St.alternate!==null&&ve.delete(St.key===null?we:St.key),N=g(St,N,we),me===null?le=St:me.sibling=St,me=St);return n&&ve.forEach(function(Li){return i(O,Li)}),Qe&&ar(O,we),le}function oe(O,N,M,j){var le=X(M);if(typeof le!="function")throw Error(r(150));if(M=le.call(M),M==null)throw Error(r(151));for(var me=le=null,ve=N,we=N=0,St=null,xe=M.next();ve!==null&&!xe.done;we++,xe=M.next()){ve.index>we?(St=ve,ve=null):St=ve.sibling;var Li=b(O,ve,xe.value,j);if(Li===null){ve===null&&(ve=St);break}n&&ve&&Li.alternate===null&&i(O,ve),N=g(Li,N,we),me===null?le=Li:me.sibling=Li,me=Li,ve=St}if(xe.done)return a(O,ve),Qe&&ar(O,we),le;if(ve===null){for(;!xe.done;we++,xe=M.next())xe=z(O,xe.value,j),xe!==null&&(N=g(xe,N,we),me===null?le=xe:me.sibling=xe,me=xe);return Qe&&ar(O,we),le}for(ve=c(O,ve);!xe.done;we++,xe=M.next())xe=q(ve,O,we,xe.value,j),xe!==null&&(n&&xe.alternate!==null&&ve.delete(xe.key===null?we:xe.key),N=g(xe,N,we),me===null?le=xe:me.sibling=xe,me=xe);return n&&ve.forEach(function(yA){return i(O,yA)}),Qe&&ar(O,we),le}function at(O,N,M,j){if(typeof M=="object"&&M!==null&&M.type===$&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case x:e:{for(var le=M.key,me=N;me!==null;){if(me.key===le){if(le=M.type,le===$){if(me.tag===7){a(O,me.sibling),N=h(me,M.props.children),N.return=O,O=N;break e}}else if(me.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===Ae&&Dp(le)===me.type){a(O,me.sibling),N=h(me,M.props),N.ref=cs(O,me,M),N.return=O,O=N;break e}a(O,me);break}else i(O,me);me=me.sibling}M.type===$?(N=gr(M.props.children,O.mode,j,M.key),N.return=O,O=N):(j=hl(M.type,M.key,M.props,null,O.mode,j),j.ref=cs(O,N,M),j.return=O,O=j)}return v(O);case U:e:{for(me=M.key;N!==null;){if(N.key===me)if(N.tag===4&&N.stateNode.containerInfo===M.containerInfo&&N.stateNode.implementation===M.implementation){a(O,N.sibling),N=h(N,M.children||[]),N.return=O,O=N;break e}else{a(O,N);break}else i(O,N);N=N.sibling}N=ld(M,O.mode,j),N.return=O,O=N}return v(O);case Ae:return me=M._init,at(O,N,me(M._payload),j)}if(bn(M))return te(O,N,M,j);if(X(M))return oe(O,N,M,j);za(O,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,N!==null&&N.tag===6?(a(O,N.sibling),N=h(N,M),N.return=O,O=N):(a(O,N),N=ad(M,O.mode,j),N.return=O,O=N),v(O)):a(O,N)}return at}var Qr=Op(!0),Mp=Op(!1),Wa=Ci(null),Ya=null,Jr=null,vc=null;function Sc(){vc=Jr=Ya=null}function yc(n){var i=Wa.current;Xe(Wa),n._currentValue=i}function Ac(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function eo(n,i){Ya=n,vc=Jr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Vt=!0),n.firstContext=null)}function cn(n){var i=n._currentValue;if(vc!==n)if(n={context:n,memoizedValue:i,next:null},Jr===null){if(Ya===null)throw Error(r(308));Jr=n,Ya.dependencies={lanes:0,firstContext:n}}else Jr=Jr.next=n;return i}var lr=null;function Tc(n){lr===null?lr=[n]:lr.push(n)}function kp(n,i,a,c){var h=i.interleaved;return h===null?(a.next=a,Tc(i)):(a.next=h.next,h.next=a),i.interleaved=a,ii(n,c)}function ii(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Pi=!1;function Ic(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ri(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Ni(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(He&2)!==0){var h=c.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),c.pending=i,ii(n,a)}return h=c.interleaved,h===null?(i.next=i,Tc(c)):(i.next=h.next,h.next=i),c.interleaved=i,ii(n,a)}function ja(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Lu(n,a)}}function Up(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?h=g=v:g=g.next=v,a=a.next}while(a!==null);g===null?h=g=i:g=g.next=i}else h=g=i;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Va(n,i,a,c){var h=n.updateQueue;Pi=!1;var g=h.firstBaseUpdate,v=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var _=A,k=_.next;_.next=null,v===null?g=k:v.next=k,v=_;var G=n.alternate;G!==null&&(G=G.updateQueue,A=G.lastBaseUpdate,A!==v&&(A===null?G.firstBaseUpdate=k:A.next=k,G.lastBaseUpdate=_))}if(g!==null){var z=h.baseState;v=0,G=k=_=null,A=g;do{var b=A.lane,q=A.eventTime;if((c&b)===b){G!==null&&(G=G.next={eventTime:q,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var te=n,oe=A;switch(b=i,q=a,oe.tag){case 1:if(te=oe.payload,typeof te=="function"){z=te.call(q,z,b);break e}z=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=oe.payload,b=typeof te=="function"?te.call(q,z,b):te,b==null)break e;z=Y({},z,b);break e;case 2:Pi=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,b=h.effects,b===null?h.effects=[A]:b.push(A))}else q={eventTime:q,lane:b,tag:A.tag,payload:A.payload,callback:A.callback,next:null},G===null?(k=G=q,_=z):G=G.next=q,v|=b;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;b=A,A=b.next,b.next=null,h.lastBaseUpdate=b,h.shared.pending=null}}while(!0);if(G===null&&(_=z),h.baseState=_,h.firstBaseUpdate=k,h.lastBaseUpdate=G,i=h.shared.interleaved,i!==null){h=i;do v|=h.lane,h=h.next;while(h!==i)}else g===null&&(h.shared.lanes=0);dr|=v,n.lanes=v,n.memoizedState=z}}function Lp(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],h=c.callback;if(h!==null){if(c.callback=null,c=a,typeof h!="function")throw Error(r(191,h));h.call(c)}}}var ds={},$n=Ci(ds),fs=Ci(ds),hs=Ci(ds);function ur(n){if(n===ds)throw Error(r(174));return n}function Ec(n,i){switch(Ye(hs,i),Ye(fs,n),Ye($n,ds),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:wu(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=wu(i,n)}Xe($n),Ye($n,i)}function to(){Xe($n),Xe(fs),Xe(hs)}function Bp(n){ur(hs.current);var i=ur($n.current),a=wu(i,n.type);i!==a&&(Ye(fs,n),Ye($n,a))}function wc(n){fs.current===n&&(Xe($n),Xe(fs))}var it=Ci(0);function Xa(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Cc=[];function _c(){for(var n=0;n<Cc.length;n++)Cc[n]._workInProgressVersionPrimary=null;Cc.length=0}var Ka=H.ReactCurrentDispatcher,Rc=H.ReactCurrentBatchConfig,cr=0,rt=null,ht=null,mt=null,Za=!1,ps=!1,gs=0,xy=0;function Dt(){throw Error(r(321))}function Pc(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!In(n[a],i[a]))return!1;return!0}function Nc(n,i,a,c,h,g){if(cr=g,rt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Ka.current=n===null||n.memoizedState===null?Yy:jy,n=a(c,h),ps){g=0;do{if(ps=!1,gs=0,25<=g)throw Error(r(301));g+=1,mt=ht=null,i.updateQueue=null,Ka.current=Vy,n=a(c,h)}while(ps)}if(Ka.current=Ja,i=ht!==null&&ht.next!==null,cr=0,mt=ht=rt=null,Za=!1,i)throw Error(r(300));return n}function Dc(){var n=gs!==0;return gs=0,n}function zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?rt.memoizedState=mt=n:mt=mt.next=n,mt}function dn(){if(ht===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=ht.next;var i=mt===null?rt.memoizedState:mt.next;if(i!==null)mt=i,ht=n;else{if(n===null)throw Error(r(310));ht=n,n={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},mt===null?rt.memoizedState=mt=n:mt=mt.next=n}return mt}function ms(n,i){return typeof i=="function"?i(n):i}function Oc(n){var i=dn(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var c=ht,h=c.baseQueue,g=a.pending;if(g!==null){if(h!==null){var v=h.next;h.next=g.next,g.next=v}c.baseQueue=h=g,a.pending=null}if(h!==null){g=h.next,c=c.baseState;var A=v=null,_=null,k=g;do{var G=k.lane;if((cr&G)===G)_!==null&&(_=_.next={lane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),c=k.hasEagerState?k.eagerState:n(c,k.action);else{var z={lane:G,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null};_===null?(A=_=z,v=c):_=_.next=z,rt.lanes|=G,dr|=G}k=k.next}while(k!==null&&k!==g);_===null?v=c:_.next=A,In(c,i.memoizedState)||(Vt=!0),i.memoizedState=c,i.baseState=v,i.baseQueue=_,a.lastRenderedState=c}if(n=a.interleaved,n!==null){h=n;do g=h.lane,rt.lanes|=g,dr|=g,h=h.next;while(h!==n)}else h===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Mc(n){var i=dn(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var c=a.dispatch,h=a.pending,g=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do g=n(g,v.action),v=v.next;while(v!==h);In(g,i.memoizedState)||(Vt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,c]}function Hp(){}function bp(n,i){var a=rt,c=dn(),h=i(),g=!In(c.memoizedState,h);if(g&&(c.memoizedState=h,Vt=!0),c=c.queue,kc($p.bind(null,a,c,n),[n]),c.getSnapshot!==i||g||mt!==null&&mt.memoizedState.tag&1){if(a.flags|=2048,vs(9,xp.bind(null,a,c,h,i),void 0,null),vt===null)throw Error(r(349));(cr&30)!==0||Gp(a,i,h)}return h}function Gp(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=rt.updateQueue,i===null?(i={lastEffect:null,stores:null},rt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function xp(n,i,a,c){i.value=a,i.getSnapshot=c,zp(i)&&Wp(n)}function $p(n,i,a){return a(function(){zp(i)&&Wp(n)})}function zp(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!In(n,a)}catch{return!0}}function Wp(n){var i=ii(n,1);i!==null&&Rn(i,n,1,-1)}function Yp(n){var i=zn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:n},i.queue=n,n=n.dispatch=Wy.bind(null,rt,n),[i.memoizedState,n]}function vs(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=rt.updateQueue,i===null?(i={lastEffect:null,stores:null},rt.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function jp(){return dn().memoizedState}function qa(n,i,a,c){var h=zn();rt.flags|=n,h.memoizedState=vs(1|i,a,void 0,c===void 0?null:c)}function Qa(n,i,a,c){var h=dn();c=c===void 0?null:c;var g=void 0;if(ht!==null){var v=ht.memoizedState;if(g=v.destroy,c!==null&&Pc(c,v.deps)){h.memoizedState=vs(i,a,g,c);return}}rt.flags|=n,h.memoizedState=vs(1|i,a,g,c)}function Vp(n,i){return qa(8390656,8,n,i)}function kc(n,i){return Qa(2048,8,n,i)}function Xp(n,i){return Qa(4,2,n,i)}function Kp(n,i){return Qa(4,4,n,i)}function Zp(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function qp(n,i,a){return a=a!=null?a.concat([n]):null,Qa(4,4,Zp.bind(null,i,n),a)}function Fc(){}function Qp(n,i){var a=dn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Pc(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Jp(n,i){var a=dn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Pc(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function eg(n,i,a){return(cr&21)===0?(n.baseState&&(n.baseState=!1,Vt=!0),n.memoizedState=a):(In(a,i)||(a=Dh(),rt.lanes|=a,dr|=a,n.baseState=!0),i)}function $y(n,i){var a=We;We=a!==0&&4>a?a:4,n(!0);var c=Rc.transition;Rc.transition={};try{n(!1),i()}finally{We=a,Rc.transition=c}}function tg(){return dn().memoizedState}function zy(n,i,a){var c=ki(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},ng(n))ig(i,a);else if(a=kp(n,i,a,c),a!==null){var h=Ht();Rn(a,n,c,h),rg(a,i,c)}}function Wy(n,i,a){var c=ki(n),h={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(ng(n))ig(i,h);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var v=i.lastRenderedState,A=g(v,a);if(h.hasEagerState=!0,h.eagerState=A,In(A,v)){var _=i.interleaved;_===null?(h.next=h,Tc(i)):(h.next=_.next,_.next=h),i.interleaved=h;return}}catch{}finally{}a=kp(n,i,h,c),a!==null&&(h=Ht(),Rn(a,n,c,h),rg(a,i,c))}}function ng(n){var i=n.alternate;return n===rt||i!==null&&i===rt}function ig(n,i){ps=Za=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function rg(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Lu(n,a)}}var Ja={readContext:cn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},Yy={readContext:cn,useCallback:function(n,i){return zn().memoizedState=[n,i===void 0?null:i],n},useContext:cn,useEffect:Vp,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,qa(4194308,4,Zp.bind(null,i,n),a)},useLayoutEffect:function(n,i){return qa(4194308,4,n,i)},useInsertionEffect:function(n,i){return qa(4,2,n,i)},useMemo:function(n,i){var a=zn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=zn();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=zy.bind(null,rt,n),[c.memoizedState,n]},useRef:function(n){var i=zn();return n={current:n},i.memoizedState=n},useState:Yp,useDebugValue:Fc,useDeferredValue:function(n){return zn().memoizedState=n},useTransition:function(){var n=Yp(!1),i=n[0];return n=$y.bind(null,n[1]),zn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=rt,h=zn();if(Qe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),vt===null)throw Error(r(349));(cr&30)!==0||Gp(c,i,a)}h.memoizedState=a;var g={value:a,getSnapshot:i};return h.queue=g,Vp($p.bind(null,c,g,n),[n]),c.flags|=2048,vs(9,xp.bind(null,c,g,a,i),void 0,null),a},useId:function(){var n=zn(),i=vt.identifierPrefix;if(Qe){var a=ni,c=ti;a=(c&~(1<<32-Tn(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=gs++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=xy++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},jy={readContext:cn,useCallback:Qp,useContext:cn,useEffect:kc,useImperativeHandle:qp,useInsertionEffect:Xp,useLayoutEffect:Kp,useMemo:Jp,useReducer:Oc,useRef:jp,useState:function(){return Oc(ms)},useDebugValue:Fc,useDeferredValue:function(n){var i=dn();return eg(i,ht.memoizedState,n)},useTransition:function(){var n=Oc(ms)[0],i=dn().memoizedState;return[n,i]},useMutableSource:Hp,useSyncExternalStore:bp,useId:tg,unstable_isNewReconciler:!1},Vy={readContext:cn,useCallback:Qp,useContext:cn,useEffect:kc,useImperativeHandle:qp,useInsertionEffect:Xp,useLayoutEffect:Kp,useMemo:Jp,useReducer:Mc,useRef:jp,useState:function(){return Mc(ms)},useDebugValue:Fc,useDeferredValue:function(n){var i=dn();return ht===null?i.memoizedState=n:eg(i,ht.memoizedState,n)},useTransition:function(){var n=Mc(ms)[0],i=dn().memoizedState;return[n,i]},useMutableSource:Hp,useSyncExternalStore:bp,useId:tg,unstable_isNewReconciler:!1};function wn(n,i){if(n&&n.defaultProps){i=Y({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Uc(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:Y({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var el={isMounted:function(n){return(n=n._reactInternals)?ir(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Ht(),h=ki(n),g=ri(c,h);g.payload=i,a!=null&&(g.callback=a),i=Ni(n,g,h),i!==null&&(Rn(i,n,h,c),ja(i,n,h))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Ht(),h=ki(n),g=ri(c,h);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=Ni(n,g,h),i!==null&&(Rn(i,n,h,c),ja(i,n,h))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Ht(),c=ki(n),h=ri(a,c);h.tag=2,i!=null&&(h.callback=i),i=Ni(n,h,c),i!==null&&(Rn(i,n,c,a),ja(i,n,c))}};function og(n,i,a,c,h,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,v):i.prototype&&i.prototype.isPureReactComponent?!is(a,c)||!is(h,g):!0}function sg(n,i,a){var c=!1,h=_i,g=i.contextType;return typeof g=="object"&&g!==null?g=cn(g):(h=jt(i)?or:Nt.current,c=i.contextTypes,g=(c=c!=null)?Xr(n,h):_i),i=new i(a,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=el,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=h,n.__reactInternalMemoizedMaskedChildContext=g),i}function ag(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&el.enqueueReplaceState(i,i.state,null)}function Lc(n,i,a,c){var h=n.stateNode;h.props=a,h.state=n.memoizedState,h.refs={},Ic(n);var g=i.contextType;typeof g=="object"&&g!==null?h.context=cn(g):(g=jt(i)?or:Nt.current,h.context=Xr(n,g)),h.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(Uc(n,i,g,a),h.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(i=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),i!==h.state&&el.enqueueReplaceState(h,h.state,null),Va(n,a,h,c),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308)}function no(n,i){try{var a="",c=i;do a+=Se(c),c=c.return;while(c);var h=a}catch(g){h=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:h,digest:null}}function Bc(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Hc(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var Xy=typeof WeakMap=="function"?WeakMap:Map;function lg(n,i,a){a=ri(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){al||(al=!0,Jc=c),Hc(n,i)},a}function ug(n,i,a){a=ri(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var h=i.value;a.payload=function(){return c(h)},a.callback=function(){Hc(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Hc(n,i),typeof c!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),a}function cg(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Xy;var h=new Set;c.set(i,h)}else h=c.get(i),h===void 0&&(h=new Set,c.set(i,h));h.has(a)||(h.add(a),n=lA.bind(null,n,i,a),i.then(n,n))}function dg(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function fg(n,i,a,c,h){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=ri(-1,1),i.tag=2,Ni(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=h,n)}var Ky=H.ReactCurrentOwner,Vt=!1;function Bt(n,i,a,c){i.child=n===null?Mp(i,null,a,c):Qr(i,n.child,a,c)}function hg(n,i,a,c,h){a=a.render;var g=i.ref;return eo(i,h),c=Nc(n,i,a,c,g,h),a=Dc(),n!==null&&!Vt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~h,oi(n,i,h)):(Qe&&a&&fc(i),i.flags|=1,Bt(n,i,c,h),i.child)}function pg(n,i,a,c,h){if(n===null){var g=a.type;return typeof g=="function"&&!sd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,gg(n,i,g,c,h)):(n=hl(a.type,null,c,i,i.mode,h),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,(n.lanes&h)===0){var v=g.memoizedProps;if(a=a.compare,a=a!==null?a:is,a(v,c)&&n.ref===i.ref)return oi(n,i,h)}return i.flags|=1,n=Ui(g,c),n.ref=i.ref,n.return=i,i.child=n}function gg(n,i,a,c,h){if(n!==null){var g=n.memoizedProps;if(is(g,c)&&n.ref===i.ref)if(Vt=!1,i.pendingProps=c=g,(n.lanes&h)!==0)(n.flags&131072)!==0&&(Vt=!0);else return i.lanes=n.lanes,oi(n,i,h)}return bc(n,i,a,c,h)}function mg(n,i,a){var c=i.pendingProps,h=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(ro,tn),tn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ye(ro,tn),tn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,Ye(ro,tn),tn|=c}else g!==null?(c=g.baseLanes|a,i.memoizedState=null):c=a,Ye(ro,tn),tn|=c;return Bt(n,i,h,a),i.child}function vg(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function bc(n,i,a,c,h){var g=jt(a)?or:Nt.current;return g=Xr(i,g),eo(i,h),a=Nc(n,i,a,c,g,h),c=Dc(),n!==null&&!Vt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~h,oi(n,i,h)):(Qe&&c&&fc(i),i.flags|=1,Bt(n,i,a,h),i.child)}function Sg(n,i,a,c,h){if(jt(a)){var g=!0;Ha(i)}else g=!1;if(eo(i,h),i.stateNode===null)nl(n,i),sg(i,a,c),Lc(i,a,c,h),c=!0;else if(n===null){var v=i.stateNode,A=i.memoizedProps;v.props=A;var _=v.context,k=a.contextType;typeof k=="object"&&k!==null?k=cn(k):(k=jt(a)?or:Nt.current,k=Xr(i,k));var G=a.getDerivedStateFromProps,z=typeof G=="function"||typeof v.getSnapshotBeforeUpdate=="function";z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==c||_!==k)&&ag(i,v,c,k),Pi=!1;var b=i.memoizedState;v.state=b,Va(i,c,v,h),_=i.memoizedState,A!==c||b!==_||Yt.current||Pi?(typeof G=="function"&&(Uc(i,a,G,c),_=i.memoizedState),(A=Pi||og(i,a,A,c,b,_,k))?(z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=_),v.props=c,v.state=_,v.context=k,c=A):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{v=i.stateNode,Fp(n,i),A=i.memoizedProps,k=i.type===i.elementType?A:wn(i.type,A),v.props=k,z=i.pendingProps,b=v.context,_=a.contextType,typeof _=="object"&&_!==null?_=cn(_):(_=jt(a)?or:Nt.current,_=Xr(i,_));var q=a.getDerivedStateFromProps;(G=typeof q=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==z||b!==_)&&ag(i,v,c,_),Pi=!1,b=i.memoizedState,v.state=b,Va(i,c,v,h);var te=i.memoizedState;A!==z||b!==te||Yt.current||Pi?(typeof q=="function"&&(Uc(i,a,q,c),te=i.memoizedState),(k=Pi||og(i,a,k,c,b,te,_)||!1)?(G||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,te,_),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,te,_)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===n.memoizedProps&&b===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&b===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=te),v.props=c,v.state=te,v.context=_,c=k):(typeof v.componentDidUpdate!="function"||A===n.memoizedProps&&b===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&b===n.memoizedState||(i.flags|=1024),c=!1)}return Gc(n,i,a,c,g,h)}function Gc(n,i,a,c,h,g){vg(n,i);var v=(i.flags&128)!==0;if(!c&&!v)return h&&Ep(i,a,!1),oi(n,i,g);c=i.stateNode,Ky.current=i;var A=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&v?(i.child=Qr(i,n.child,null,g),i.child=Qr(i,null,A,g)):Bt(n,i,A,g),i.memoizedState=c.state,h&&Ep(i,a,!0),i.child}function yg(n){var i=n.stateNode;i.pendingContext?Tp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Tp(n,i.context,!1),Ec(n,i.containerInfo)}function Ag(n,i,a,c,h){return qr(),mc(h),i.flags|=256,Bt(n,i,a,c),i.child}var xc={dehydrated:null,treeContext:null,retryLane:0};function $c(n){return{baseLanes:n,cachePool:null,transitions:null}}function Tg(n,i,a){var c=i.pendingProps,h=it.current,g=!1,v=(i.flags&128)!==0,A;if((A=v)||(A=n!==null&&n.memoizedState===null?!1:(h&2)!==0),A?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(h|=1),Ye(it,h&1),n===null)return gc(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=c.children,n=c.fallback,g?(c=i.mode,g=i.child,v={mode:"hidden",children:v},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=v):g=pl(v,c,0,null),n=gr(n,c,a,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=$c(a),i.memoizedState=xc,n):zc(i,v));if(h=n.memoizedState,h!==null&&(A=h.dehydrated,A!==null))return Zy(n,i,v,c,A,h,a);if(g){g=c.fallback,v=i.mode,h=n.child,A=h.sibling;var _={mode:"hidden",children:c.children};return(v&1)===0&&i.child!==h?(c=i.child,c.childLanes=0,c.pendingProps=_,i.deletions=null):(c=Ui(h,_),c.subtreeFlags=h.subtreeFlags&14680064),A!==null?g=Ui(A,g):(g=gr(g,v,a,null),g.flags|=2),g.return=i,c.return=i,c.sibling=g,i.child=c,c=g,g=i.child,v=n.child.memoizedState,v=v===null?$c(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},g.memoizedState=v,g.childLanes=n.childLanes&~a,i.memoizedState=xc,c}return g=n.child,n=g.sibling,c=Ui(g,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function zc(n,i){return i=pl({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function tl(n,i,a,c){return c!==null&&mc(c),Qr(i,n.child,null,a),n=zc(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Zy(n,i,a,c,h,g,v){if(a)return i.flags&256?(i.flags&=-257,c=Bc(Error(r(422))),tl(n,i,v,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=c.fallback,h=i.mode,c=pl({mode:"visible",children:c.children},h,0,null),g=gr(g,h,v,null),g.flags|=2,c.return=i,g.return=i,c.sibling=g,i.child=c,(i.mode&1)!==0&&Qr(i,n.child,null,v),i.child.memoizedState=$c(v),i.memoizedState=xc,g);if((i.mode&1)===0)return tl(n,i,v,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var A=c.dgst;return c=A,g=Error(r(419)),c=Bc(g,c,void 0),tl(n,i,v,c)}if(A=(v&n.childLanes)!==0,Vt||A){if(c=vt,c!==null){switch(v&-v){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|v))!==0?0:h,h!==0&&h!==g.retryLane&&(g.retryLane=h,ii(n,h),Rn(c,n,h,-1))}return od(),c=Bc(Error(r(421))),tl(n,i,v,c)}return h.data==="$?"?(i.flags|=128,i.child=n.child,i=uA.bind(null,n),h._reactRetry=i,null):(n=g.treeContext,en=wi(h.nextSibling),Jt=i,Qe=!0,En=null,n!==null&&(ln[un++]=ti,ln[un++]=ni,ln[un++]=sr,ti=n.id,ni=n.overflow,sr=i),i=zc(i,c.children),i.flags|=4096,i)}function Ig(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Ac(n.return,i,a)}function Wc(n,i,a,c,h){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=h)}function Eg(n,i,a){var c=i.pendingProps,h=c.revealOrder,g=c.tail;if(Bt(n,i,c.children,a),c=it.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ig(n,a,i);else if(n.tag===19)Ig(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ye(it,c),(i.mode&1)===0)i.memoizedState=null;else switch(h){case"forwards":for(a=i.child,h=null;a!==null;)n=a.alternate,n!==null&&Xa(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Wc(i,!1,h,a,g);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(n=h.alternate,n!==null&&Xa(n)===null){i.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}Wc(i,!0,a,null,g);break;case"together":Wc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function nl(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function oi(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),dr|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=Ui(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Ui(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function qy(n,i,a){switch(i.tag){case 3:yg(i),qr();break;case 5:Bp(i);break;case 1:jt(i.type)&&Ha(i);break;case 4:Ec(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,h=i.memoizedProps.value;Ye(Wa,c._currentValue),c._currentValue=h;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Ye(it,it.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Tg(n,i,a):(Ye(it,it.current&1),n=oi(n,i,a),n!==null?n.sibling:null);Ye(it,it.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return Eg(n,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Ye(it,it.current),c)break;return null;case 22:case 23:return i.lanes=0,mg(n,i,a)}return oi(n,i,a)}var wg,Yc,Cg,_g;wg=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Yc=function(){},Cg=function(n,i,a,c){var h=n.memoizedProps;if(h!==c){n=i.stateNode,ur($n.current);var g=null;switch(a){case"input":h=qe(n,h),c=qe(n,c),g=[];break;case"select":h=Y({},h,{value:void 0}),c=Y({},c,{value:void 0}),g=[];break;case"textarea":h=nr(n,h),c=nr(n,c),g=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Ua)}Cu(a,c);var v;a=null;for(k in h)if(!c.hasOwnProperty(k)&&h.hasOwnProperty(k)&&h[k]!=null)if(k==="style"){var A=h[k];for(v in A)A.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else k!=="dangerouslySetInnerHTML"&&k!=="children"&&k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(l.hasOwnProperty(k)?g||(g=[]):(g=g||[]).push(k,null));for(k in c){var _=c[k];if(A=h!=null?h[k]:void 0,c.hasOwnProperty(k)&&_!==A&&(_!=null||A!=null))if(k==="style")if(A){for(v in A)!A.hasOwnProperty(v)||_&&_.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in _)_.hasOwnProperty(v)&&A[v]!==_[v]&&(a||(a={}),a[v]=_[v])}else a||(g||(g=[]),g.push(k,a)),a=_;else k==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,A=A?A.__html:void 0,_!=null&&A!==_&&(g=g||[]).push(k,_)):k==="children"?typeof _!="string"&&typeof _!="number"||(g=g||[]).push(k,""+_):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&(l.hasOwnProperty(k)?(_!=null&&k==="onScroll"&&Ve("scroll",n),g||A===_||(g=[])):(g=g||[]).push(k,_))}a&&(g=g||[]).push("style",a);var k=g;(i.updateQueue=k)&&(i.flags|=4)}},_g=function(n,i,a,c){a!==c&&(i.flags|=4)};function Ss(n,i){if(!Qe)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ot(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function Qy(n,i,a){var c=i.pendingProps;switch(hc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(i),null;case 1:return jt(i.type)&&Ba(),Ot(i),null;case 3:return c=i.stateNode,to(),Xe(Yt),Xe(Nt),_c(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&($a(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,En!==null&&(nd(En),En=null))),Yc(n,i),Ot(i),null;case 5:wc(i);var h=ur(hs.current);if(a=i.type,n!==null&&i.stateNode!=null)Cg(n,i,a,c,h),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(r(166));return Ot(i),null}if(n=ur($n.current),$a(i)){c=i.stateNode,a=i.type;var g=i.memoizedProps;switch(c[xn]=i,c[ls]=g,n=(i.mode&1)!==0,a){case"dialog":Ve("cancel",c),Ve("close",c);break;case"iframe":case"object":case"embed":Ve("load",c);break;case"video":case"audio":for(h=0;h<os.length;h++)Ve(os[h],c);break;case"source":Ve("error",c);break;case"img":case"image":case"link":Ve("error",c),Ve("load",c);break;case"details":Ve("toggle",c);break;case"input":je(c,g),Ve("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},Ve("invalid",c);break;case"textarea":uh(c,g),Ve("invalid",c)}Cu(a,g),h=null;for(var v in g)if(g.hasOwnProperty(v)){var A=g[v];v==="children"?typeof A=="string"?c.textContent!==A&&(g.suppressHydrationWarning!==!0&&Fa(c.textContent,A,n),h=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&Fa(c.textContent,A,n),h=["children",""+A]):l.hasOwnProperty(v)&&A!=null&&v==="onScroll"&&Ve("scroll",c)}switch(a){case"input":Le(c),an(c,g,!0);break;case"textarea":Le(c),dh(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=Ua)}c=h,i.updateQueue=c,c!==null&&(i.flags|=4)}else{v=h.nodeType===9?h:h.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=fh(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[xn]=i,n[ls]=c,wg(n,i,!1,!1),i.stateNode=n;e:{switch(v=_u(a,c),a){case"dialog":Ve("cancel",n),Ve("close",n),h=c;break;case"iframe":case"object":case"embed":Ve("load",n),h=c;break;case"video":case"audio":for(h=0;h<os.length;h++)Ve(os[h],n);h=c;break;case"source":Ve("error",n),h=c;break;case"img":case"image":case"link":Ve("error",n),Ve("load",n),h=c;break;case"details":Ve("toggle",n),h=c;break;case"input":je(n,c),h=qe(n,c),Ve("invalid",n);break;case"option":h=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},h=Y({},c,{value:void 0}),Ve("invalid",n);break;case"textarea":uh(n,c),h=nr(n,c),Ve("invalid",n);break;default:h=c}Cu(a,h),A=h;for(g in A)if(A.hasOwnProperty(g)){var _=A[g];g==="style"?gh(n,_):g==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&hh(n,_)):g==="children"?typeof _=="string"?(a!=="textarea"||_!=="")&&Go(n,_):typeof _=="number"&&Go(n,""+_):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(l.hasOwnProperty(g)?_!=null&&g==="onScroll"&&Ve("scroll",n):_!=null&&D(n,g,_,v))}switch(a){case"input":Le(n),an(n,c,!1);break;case"textarea":Le(n),dh(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Te(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?vi(n,!!c.multiple,g,!1):c.defaultValue!=null&&vi(n,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(n.onclick=Ua)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ot(i),null;case 6:if(n&&i.stateNode!=null)_g(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(a=ur(hs.current),ur($n.current),$a(i)){if(c=i.stateNode,a=i.memoizedProps,c[xn]=i,(g=c.nodeValue!==a)&&(n=Jt,n!==null))switch(n.tag){case 3:Fa(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Fa(c.nodeValue,a,(n.mode&1)!==0)}g&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[xn]=i,i.stateNode=c}return Ot(i),null;case 13:if(Xe(it),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Qe&&en!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Np(),qr(),i.flags|=98560,g=!1;else if(g=$a(i),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(r(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[xn]=i}else qr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ot(i),g=!1}else En!==null&&(nd(En),En=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(it.current&1)!==0?pt===0&&(pt=3):od())),i.updateQueue!==null&&(i.flags|=4),Ot(i),null);case 4:return to(),Yc(n,i),n===null&&ss(i.stateNode.containerInfo),Ot(i),null;case 10:return yc(i.type._context),Ot(i),null;case 17:return jt(i.type)&&Ba(),Ot(i),null;case 19:if(Xe(it),g=i.memoizedState,g===null)return Ot(i),null;if(c=(i.flags&128)!==0,v=g.rendering,v===null)if(c)Ss(g,!1);else{if(pt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(v=Xa(n),v!==null){for(i.flags|=128,Ss(g,!1),c=v.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)g=a,n=c,g.flags&=14680066,v=g.alternate,v===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=v.childLanes,g.lanes=v.lanes,g.child=v.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=v.memoizedProps,g.memoizedState=v.memoizedState,g.updateQueue=v.updateQueue,g.type=v.type,n=v.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ye(it,it.current&1|2),i.child}n=n.sibling}g.tail!==null&&st()>oo&&(i.flags|=128,c=!0,Ss(g,!1),i.lanes=4194304)}else{if(!c)if(n=Xa(v),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ss(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Qe)return Ot(i),null}else 2*st()-g.renderingStartTime>oo&&a!==1073741824&&(i.flags|=128,c=!0,Ss(g,!1),i.lanes=4194304);g.isBackwards?(v.sibling=i.child,i.child=v):(a=g.last,a!==null?a.sibling=v:i.child=v,g.last=v)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=st(),i.sibling=null,a=it.current,Ye(it,c?a&1|2:a&1),i):(Ot(i),null);case 22:case 23:return rd(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(tn&1073741824)!==0&&(Ot(i),i.subtreeFlags&6&&(i.flags|=8192)):Ot(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function Jy(n,i){switch(hc(i),i.tag){case 1:return jt(i.type)&&Ba(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return to(),Xe(Yt),Xe(Nt),_c(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return wc(i),null;case 13:if(Xe(it),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));qr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Xe(it),null;case 4:return to(),null;case 10:return yc(i.type._context),null;case 22:case 23:return rd(),null;case 24:return null;default:return null}}var il=!1,Mt=!1,eA=typeof WeakSet=="function"?WeakSet:Set,Q=null;function io(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ot(n,i,c)}else a.current=null}function jc(n,i,a){try{a()}catch(c){ot(n,i,c)}}var Rg=!1;function tA(n,i){if(rc=Ea,n=op(),Zu(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var v=0,A=-1,_=-1,k=0,G=0,z=n,b=null;t:for(;;){for(var q;z!==a||h!==0&&z.nodeType!==3||(A=v+h),z!==g||c!==0&&z.nodeType!==3||(_=v+c),z.nodeType===3&&(v+=z.nodeValue.length),(q=z.firstChild)!==null;)b=z,z=q;for(;;){if(z===n)break t;if(b===a&&++k===h&&(A=v),b===g&&++G===c&&(_=v),(q=z.nextSibling)!==null)break;z=b,b=z.parentNode}z=q}a=A===-1||_===-1?null:{start:A,end:_}}else a=null}a=a||{start:0,end:0}}else a=null;for(oc={focusedElem:n,selectionRange:a},Ea=!1,Q=i;Q!==null;)if(i=Q,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Q=n;else for(;Q!==null;){i=Q;try{var te=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(te!==null){var oe=te.memoizedProps,at=te.memoizedState,O=i.stateNode,N=O.getSnapshotBeforeUpdate(i.elementType===i.type?oe:wn(i.type,oe),at);O.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var M=i.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(j){ot(i,i.return,j)}if(n=i.sibling,n!==null){n.return=i.return,Q=n;break}Q=i.return}return te=Rg,Rg=!1,te}function ys(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&n)===n){var g=h.destroy;h.destroy=void 0,g!==void 0&&jc(i,a,g)}h=h.next}while(h!==c)}}function rl(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function Vc(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function Pg(n){var i=n.alternate;i!==null&&(n.alternate=null,Pg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[xn],delete i[ls],delete i[uc],delete i[By],delete i[Hy])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Ng(n){return n.tag===5||n.tag===3||n.tag===4}function Dg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ng(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Xc(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ua));else if(c!==4&&(n=n.child,n!==null))for(Xc(n,i,a),n=n.sibling;n!==null;)Xc(n,i,a),n=n.sibling}function Kc(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Kc(n,i,a),n=n.sibling;n!==null;)Kc(n,i,a),n=n.sibling}var Ct=null,Cn=!1;function Di(n,i,a){for(a=a.child;a!==null;)Og(n,i,a),a=a.sibling}function Og(n,i,a){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(va,a)}catch{}switch(a.tag){case 5:Mt||io(a,i);case 6:var c=Ct,h=Cn;Ct=null,Di(n,i,a),Ct=c,Cn=h,Ct!==null&&(Cn?(n=Ct,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ct.removeChild(a.stateNode));break;case 18:Ct!==null&&(Cn?(n=Ct,a=a.stateNode,n.nodeType===8?lc(n.parentNode,a):n.nodeType===1&&lc(n,a),qo(n)):lc(Ct,a.stateNode));break;case 4:c=Ct,h=Cn,Ct=a.stateNode.containerInfo,Cn=!0,Di(n,i,a),Ct=c,Cn=h;break;case 0:case 11:case 14:case 15:if(!Mt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var g=h,v=g.destroy;g=g.tag,v!==void 0&&((g&2)!==0||(g&4)!==0)&&jc(a,i,v),h=h.next}while(h!==c)}Di(n,i,a);break;case 1:if(!Mt&&(io(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){ot(a,i,A)}Di(n,i,a);break;case 21:Di(n,i,a);break;case 22:a.mode&1?(Mt=(c=Mt)||a.memoizedState!==null,Di(n,i,a),Mt=c):Di(n,i,a);break;default:Di(n,i,a)}}function Mg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new eA),i.forEach(function(c){var h=cA.bind(null,n,c);a.has(c)||(a.add(c),c.then(h,h))})}}function _n(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];try{var g=n,v=i,A=v;e:for(;A!==null;){switch(A.tag){case 5:Ct=A.stateNode,Cn=!1;break e;case 3:Ct=A.stateNode.containerInfo,Cn=!0;break e;case 4:Ct=A.stateNode.containerInfo,Cn=!0;break e}A=A.return}if(Ct===null)throw Error(r(160));Og(g,v,h),Ct=null,Cn=!1;var _=h.alternate;_!==null&&(_.return=null),h.return=null}catch(k){ot(h,i,k)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)kg(i,n),i=i.sibling}function kg(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(_n(i,n),Wn(n),c&4){try{ys(3,n,n.return),rl(3,n)}catch(oe){ot(n,n.return,oe)}try{ys(5,n,n.return)}catch(oe){ot(n,n.return,oe)}}break;case 1:_n(i,n),Wn(n),c&512&&a!==null&&io(a,a.return);break;case 5:if(_n(i,n),Wn(n),c&512&&a!==null&&io(a,a.return),n.flags&32){var h=n.stateNode;try{Go(h,"")}catch(oe){ot(n,n.return,oe)}}if(c&4&&(h=n.stateNode,h!=null)){var g=n.memoizedProps,v=a!==null?a.memoizedProps:g,A=n.type,_=n.updateQueue;if(n.updateQueue=null,_!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&Bn(h,g),_u(A,v);var k=_u(A,g);for(v=0;v<_.length;v+=2){var G=_[v],z=_[v+1];G==="style"?gh(h,z):G==="dangerouslySetInnerHTML"?hh(h,z):G==="children"?Go(h,z):D(h,G,z,k)}switch(A){case"input":Wt(h,g);break;case"textarea":ch(h,g);break;case"select":var b=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!g.multiple;var q=g.value;q!=null?vi(h,!!g.multiple,q,!1):b!==!!g.multiple&&(g.defaultValue!=null?vi(h,!!g.multiple,g.defaultValue,!0):vi(h,!!g.multiple,g.multiple?[]:"",!1))}h[ls]=g}catch(oe){ot(n,n.return,oe)}}break;case 6:if(_n(i,n),Wn(n),c&4){if(n.stateNode===null)throw Error(r(162));h=n.stateNode,g=n.memoizedProps;try{h.nodeValue=g}catch(oe){ot(n,n.return,oe)}}break;case 3:if(_n(i,n),Wn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{qo(i.containerInfo)}catch(oe){ot(n,n.return,oe)}break;case 4:_n(i,n),Wn(n);break;case 13:_n(i,n),Wn(n),h=n.child,h.flags&8192&&(g=h.memoizedState!==null,h.stateNode.isHidden=g,!g||h.alternate!==null&&h.alternate.memoizedState!==null||(Qc=st())),c&4&&Mg(n);break;case 22:if(G=a!==null&&a.memoizedState!==null,n.mode&1?(Mt=(k=Mt)||G,_n(i,n),Mt=k):_n(i,n),Wn(n),c&8192){if(k=n.memoizedState!==null,(n.stateNode.isHidden=k)&&!G&&(n.mode&1)!==0)for(Q=n,G=n.child;G!==null;){for(z=Q=G;Q!==null;){switch(b=Q,q=b.child,b.tag){case 0:case 11:case 14:case 15:ys(4,b,b.return);break;case 1:io(b,b.return);var te=b.stateNode;if(typeof te.componentWillUnmount=="function"){c=b,a=b.return;try{i=c,te.props=i.memoizedProps,te.state=i.memoizedState,te.componentWillUnmount()}catch(oe){ot(c,a,oe)}}break;case 5:io(b,b.return);break;case 22:if(b.memoizedState!==null){Lg(z);continue}}q!==null?(q.return=b,Q=q):Lg(z)}G=G.sibling}e:for(G=null,z=n;;){if(z.tag===5){if(G===null){G=z;try{h=z.stateNode,k?(g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=z.stateNode,_=z.memoizedProps.style,v=_!=null&&_.hasOwnProperty("display")?_.display:null,A.style.display=ph("display",v))}catch(oe){ot(n,n.return,oe)}}}else if(z.tag===6){if(G===null)try{z.stateNode.nodeValue=k?"":z.memoizedProps}catch(oe){ot(n,n.return,oe)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===n)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===n)break e;for(;z.sibling===null;){if(z.return===null||z.return===n)break e;G===z&&(G=null),z=z.return}G===z&&(G=null),z.sibling.return=z.return,z=z.sibling}}break;case 19:_n(i,n),Wn(n),c&4&&Mg(n);break;case 21:break;default:_n(i,n),Wn(n)}}function Wn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Ng(a)){var c=a;break e}a=a.return}throw Error(r(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(Go(h,""),c.flags&=-33);var g=Dg(n);Kc(n,g,h);break;case 3:case 4:var v=c.stateNode.containerInfo,A=Dg(n);Xc(n,A,v);break;default:throw Error(r(161))}}catch(_){ot(n,n.return,_)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function nA(n,i,a){Q=n,Fg(n)}function Fg(n,i,a){for(var c=(n.mode&1)!==0;Q!==null;){var h=Q,g=h.child;if(h.tag===22&&c){var v=h.memoizedState!==null||il;if(!v){var A=h.alternate,_=A!==null&&A.memoizedState!==null||Mt;A=il;var k=Mt;if(il=v,(Mt=_)&&!k)for(Q=h;Q!==null;)v=Q,_=v.child,v.tag===22&&v.memoizedState!==null?Bg(h):_!==null?(_.return=v,Q=_):Bg(h);for(;g!==null;)Q=g,Fg(g),g=g.sibling;Q=h,il=A,Mt=k}Ug(n)}else(h.subtreeFlags&8772)!==0&&g!==null?(g.return=h,Q=g):Ug(n)}}function Ug(n){for(;Q!==null;){var i=Q;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Mt||rl(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!Mt)if(a===null)c.componentDidMount();else{var h=i.elementType===i.type?a.memoizedProps:wn(i.type,a.memoizedProps);c.componentDidUpdate(h,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&Lp(i,g,c);break;case 3:var v=i.updateQueue;if(v!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Lp(i,v,a)}break;case 5:var A=i.stateNode;if(a===null&&i.flags&4){a=A;var _=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&a.focus();break;case"img":_.src&&(a.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var k=i.alternate;if(k!==null){var G=k.memoizedState;if(G!==null){var z=G.dehydrated;z!==null&&qo(z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Mt||i.flags&512&&Vc(i)}catch(b){ot(i,i.return,b)}}if(i===n){Q=null;break}if(a=i.sibling,a!==null){a.return=i.return,Q=a;break}Q=i.return}}function Lg(n){for(;Q!==null;){var i=Q;if(i===n){Q=null;break}var a=i.sibling;if(a!==null){a.return=i.return,Q=a;break}Q=i.return}}function Bg(n){for(;Q!==null;){var i=Q;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{rl(4,i)}catch(_){ot(i,a,_)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var h=i.return;try{c.componentDidMount()}catch(_){ot(i,h,_)}}var g=i.return;try{Vc(i)}catch(_){ot(i,g,_)}break;case 5:var v=i.return;try{Vc(i)}catch(_){ot(i,v,_)}}}catch(_){ot(i,i.return,_)}if(i===n){Q=null;break}var A=i.sibling;if(A!==null){A.return=i.return,Q=A;break}Q=i.return}}var iA=Math.ceil,ol=H.ReactCurrentDispatcher,Zc=H.ReactCurrentOwner,fn=H.ReactCurrentBatchConfig,He=0,vt=null,ct=null,_t=0,tn=0,ro=Ci(0),pt=0,As=null,dr=0,sl=0,qc=0,Ts=null,Xt=null,Qc=0,oo=1/0,si=null,al=!1,Jc=null,Oi=null,ll=!1,Mi=null,ul=0,Is=0,ed=null,cl=-1,dl=0;function Ht(){return(He&6)!==0?st():cl!==-1?cl:cl=st()}function ki(n){return(n.mode&1)===0?1:(He&2)!==0&&_t!==0?_t&-_t:Gy.transition!==null?(dl===0&&(dl=Dh()),dl):(n=We,n!==0||(n=window.event,n=n===void 0?16:bh(n.type)),n)}function Rn(n,i,a,c){if(50<Is)throw Is=0,ed=null,Error(r(185));jo(n,a,c),((He&2)===0||n!==vt)&&(n===vt&&((He&2)===0&&(sl|=a),pt===4&&Fi(n,_t)),Kt(n,c),a===1&&He===0&&(i.mode&1)===0&&(oo=st()+500,ba&&Ri()))}function Kt(n,i){var a=n.callbackNode;GS(n,i);var c=Aa(n,n===vt?_t:0);if(c===0)a!==null&&Rh(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Rh(a),i===1)n.tag===0?by(bg.bind(null,n)):wp(bg.bind(null,n)),Uy(function(){(He&6)===0&&Ri()}),a=null;else{switch(Oh(c)){case 1:a=ku;break;case 4:a=Ph;break;case 16:a=ma;break;case 536870912:a=Nh;break;default:a=ma}a=Vg(a,Hg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Hg(n,i){if(cl=-1,dl=0,(He&6)!==0)throw Error(r(327));var a=n.callbackNode;if(so()&&n.callbackNode!==a)return null;var c=Aa(n,n===vt?_t:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=fl(n,c);else{i=c;var h=He;He|=2;var g=xg();(vt!==n||_t!==i)&&(si=null,oo=st()+500,hr(n,i));do try{sA();break}catch(A){Gg(n,A)}while(!0);Sc(),ol.current=g,He=h,ct!==null?i=0:(vt=null,_t=0,i=pt)}if(i!==0){if(i===2&&(h=Fu(n),h!==0&&(c=h,i=td(n,h))),i===1)throw a=As,hr(n,0),Fi(n,c),Kt(n,st()),a;if(i===6)Fi(n,c);else{if(h=n.current.alternate,(c&30)===0&&!rA(h)&&(i=fl(n,c),i===2&&(g=Fu(n),g!==0&&(c=g,i=td(n,g))),i===1))throw a=As,hr(n,0),Fi(n,c),Kt(n,st()),a;switch(n.finishedWork=h,n.finishedLanes=c,i){case 0:case 1:throw Error(r(345));case 2:pr(n,Xt,si);break;case 3:if(Fi(n,c),(c&130023424)===c&&(i=Qc+500-st(),10<i)){if(Aa(n,0)!==0)break;if(h=n.suspendedLanes,(h&c)!==c){Ht(),n.pingedLanes|=n.suspendedLanes&h;break}n.timeoutHandle=ac(pr.bind(null,n,Xt,si),i);break}pr(n,Xt,si);break;case 4:if(Fi(n,c),(c&4194240)===c)break;for(i=n.eventTimes,h=-1;0<c;){var v=31-Tn(c);g=1<<v,v=i[v],v>h&&(h=v),c&=~g}if(c=h,c=st()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*iA(c/1960))-c,10<c){n.timeoutHandle=ac(pr.bind(null,n,Xt,si),c);break}pr(n,Xt,si);break;case 5:pr(n,Xt,si);break;default:throw Error(r(329))}}}return Kt(n,st()),n.callbackNode===a?Hg.bind(null,n):null}function td(n,i){var a=Ts;return n.current.memoizedState.isDehydrated&&(hr(n,i).flags|=256),n=fl(n,i),n!==2&&(i=Xt,Xt=a,i!==null&&nd(i)),n}function nd(n){Xt===null?Xt=n:Xt.push.apply(Xt,n)}function rA(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var h=a[c],g=h.getSnapshot;h=h.value;try{if(!In(g(),h))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Fi(n,i){for(i&=~qc,i&=~sl,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Tn(i),c=1<<a;n[a]=-1,i&=~c}}function bg(n){if((He&6)!==0)throw Error(r(327));so();var i=Aa(n,0);if((i&1)===0)return Kt(n,st()),null;var a=fl(n,i);if(n.tag!==0&&a===2){var c=Fu(n);c!==0&&(i=c,a=td(n,c))}if(a===1)throw a=As,hr(n,0),Fi(n,i),Kt(n,st()),a;if(a===6)throw Error(r(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,pr(n,Xt,si),Kt(n,st()),null}function id(n,i){var a=He;He|=1;try{return n(i)}finally{He=a,He===0&&(oo=st()+500,ba&&Ri())}}function fr(n){Mi!==null&&Mi.tag===0&&(He&6)===0&&so();var i=He;He|=1;var a=fn.transition,c=We;try{if(fn.transition=null,We=1,n)return n()}finally{We=c,fn.transition=a,He=i,(He&6)===0&&Ri()}}function rd(){tn=ro.current,Xe(ro)}function hr(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Fy(a)),ct!==null)for(a=ct.return;a!==null;){var c=a;switch(hc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Ba();break;case 3:to(),Xe(Yt),Xe(Nt),_c();break;case 5:wc(c);break;case 4:to();break;case 13:Xe(it);break;case 19:Xe(it);break;case 10:yc(c.type._context);break;case 22:case 23:rd()}a=a.return}if(vt=n,ct=n=Ui(n.current,null),_t=tn=i,pt=0,As=null,qc=sl=dr=0,Xt=Ts=null,lr!==null){for(i=0;i<lr.length;i++)if(a=lr[i],c=a.interleaved,c!==null){a.interleaved=null;var h=c.next,g=a.pending;if(g!==null){var v=g.next;g.next=h,c.next=v}a.pending=c}lr=null}return n}function Gg(n,i){do{var a=ct;try{if(Sc(),Ka.current=Ja,Za){for(var c=rt.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Za=!1}if(cr=0,mt=ht=rt=null,ps=!1,gs=0,Zc.current=null,a===null||a.return===null){pt=1,As=i,ct=null;break}e:{var g=n,v=a.return,A=a,_=i;if(i=_t,A.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var k=_,G=A,z=G.tag;if((G.mode&1)===0&&(z===0||z===11||z===15)){var b=G.alternate;b?(G.updateQueue=b.updateQueue,G.memoizedState=b.memoizedState,G.lanes=b.lanes):(G.updateQueue=null,G.memoizedState=null)}var q=dg(v);if(q!==null){q.flags&=-257,fg(q,v,A,g,i),q.mode&1&&cg(g,k,i),i=q,_=k;var te=i.updateQueue;if(te===null){var oe=new Set;oe.add(_),i.updateQueue=oe}else te.add(_);break e}else{if((i&1)===0){cg(g,k,i),od();break e}_=Error(r(426))}}else if(Qe&&A.mode&1){var at=dg(v);if(at!==null){(at.flags&65536)===0&&(at.flags|=256),fg(at,v,A,g,i),mc(no(_,A));break e}}g=_=no(_,A),pt!==4&&(pt=2),Ts===null?Ts=[g]:Ts.push(g),g=v;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var O=lg(g,_,i);Up(g,O);break e;case 1:A=_;var N=g.type,M=g.stateNode;if((g.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Oi===null||!Oi.has(M)))){g.flags|=65536,i&=-i,g.lanes|=i;var j=ug(g,A,i);Up(g,j);break e}}g=g.return}while(g!==null)}zg(a)}catch(le){i=le,ct===a&&a!==null&&(ct=a=a.return);continue}break}while(!0)}function xg(){var n=ol.current;return ol.current=Ja,n===null?Ja:n}function od(){(pt===0||pt===3||pt===2)&&(pt=4),vt===null||(dr&268435455)===0&&(sl&268435455)===0||Fi(vt,_t)}function fl(n,i){var a=He;He|=2;var c=xg();(vt!==n||_t!==i)&&(si=null,hr(n,i));do try{oA();break}catch(h){Gg(n,h)}while(!0);if(Sc(),He=a,ol.current=c,ct!==null)throw Error(r(261));return vt=null,_t=0,pt}function oA(){for(;ct!==null;)$g(ct)}function sA(){for(;ct!==null&&!OS();)$g(ct)}function $g(n){var i=jg(n.alternate,n,tn);n.memoizedProps=n.pendingProps,i===null?zg(n):ct=i,Zc.current=null}function zg(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=Qy(a,i,tn),a!==null){ct=a;return}}else{if(a=Jy(a,i),a!==null){a.flags&=32767,ct=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{pt=6,ct=null;return}}if(i=i.sibling,i!==null){ct=i;return}ct=i=n}while(i!==null);pt===0&&(pt=5)}function pr(n,i,a){var c=We,h=fn.transition;try{fn.transition=null,We=1,aA(n,i,a,c)}finally{fn.transition=h,We=c}return null}function aA(n,i,a,c){do so();while(Mi!==null);if((He&6)!==0)throw Error(r(327));a=n.finishedWork;var h=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(xS(n,g),n===vt&&(ct=vt=null,_t=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ll||(ll=!0,Vg(ma,function(){return so(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=fn.transition,fn.transition=null;var v=We;We=1;var A=He;He|=4,Zc.current=null,tA(n,a),kg(a,n),Ry(oc),Ea=!!rc,oc=rc=null,n.current=a,nA(a),MS(),He=A,We=v,fn.transition=g}else n.current=a;if(ll&&(ll=!1,Mi=n,ul=h),g=n.pendingLanes,g===0&&(Oi=null),US(a.stateNode),Kt(n,st()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)h=i[a],c(h.value,{componentStack:h.stack,digest:h.digest});if(al)throw al=!1,n=Jc,Jc=null,n;return(ul&1)!==0&&n.tag!==0&&so(),g=n.pendingLanes,(g&1)!==0?n===ed?Is++:(Is=0,ed=n):Is=0,Ri(),null}function so(){if(Mi!==null){var n=Oh(ul),i=fn.transition,a=We;try{if(fn.transition=null,We=16>n?16:n,Mi===null)var c=!1;else{if(n=Mi,Mi=null,ul=0,(He&6)!==0)throw Error(r(331));var h=He;for(He|=4,Q=n.current;Q!==null;){var g=Q,v=g.child;if((Q.flags&16)!==0){var A=g.deletions;if(A!==null){for(var _=0;_<A.length;_++){var k=A[_];for(Q=k;Q!==null;){var G=Q;switch(G.tag){case 0:case 11:case 15:ys(8,G,g)}var z=G.child;if(z!==null)z.return=G,Q=z;else for(;Q!==null;){G=Q;var b=G.sibling,q=G.return;if(Pg(G),G===k){Q=null;break}if(b!==null){b.return=q,Q=b;break}Q=q}}}var te=g.alternate;if(te!==null){var oe=te.child;if(oe!==null){te.child=null;do{var at=oe.sibling;oe.sibling=null,oe=at}while(oe!==null)}}Q=g}}if((g.subtreeFlags&2064)!==0&&v!==null)v.return=g,Q=v;else e:for(;Q!==null;){if(g=Q,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:ys(9,g,g.return)}var O=g.sibling;if(O!==null){O.return=g.return,Q=O;break e}Q=g.return}}var N=n.current;for(Q=N;Q!==null;){v=Q;var M=v.child;if((v.subtreeFlags&2064)!==0&&M!==null)M.return=v,Q=M;else e:for(v=N;Q!==null;){if(A=Q,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:rl(9,A)}}catch(le){ot(A,A.return,le)}if(A===v){Q=null;break e}var j=A.sibling;if(j!==null){j.return=A.return,Q=j;break e}Q=A.return}}if(He=h,Ri(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(va,n)}catch{}c=!0}return c}finally{We=a,fn.transition=i}}return!1}function Wg(n,i,a){i=no(a,i),i=lg(n,i,1),n=Ni(n,i,1),i=Ht(),n!==null&&(jo(n,1,i),Kt(n,i))}function ot(n,i,a){if(n.tag===3)Wg(n,n,a);else for(;i!==null;){if(i.tag===3){Wg(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Oi===null||!Oi.has(c))){n=no(a,n),n=ug(i,n,1),i=Ni(i,n,1),n=Ht(),i!==null&&(jo(i,1,n),Kt(i,n));break}}i=i.return}}function lA(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Ht(),n.pingedLanes|=n.suspendedLanes&a,vt===n&&(_t&a)===a&&(pt===4||pt===3&&(_t&130023424)===_t&&500>st()-Qc?hr(n,0):qc|=a),Kt(n,i)}function Yg(n,i){i===0&&((n.mode&1)===0?i=1:(i=ya,ya<<=1,(ya&130023424)===0&&(ya=4194304)));var a=Ht();n=ii(n,i),n!==null&&(jo(n,i,a),Kt(n,a))}function uA(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Yg(n,a)}function cA(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(r(314))}c!==null&&c.delete(i),Yg(n,a)}var jg;jg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Yt.current)Vt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Vt=!1,qy(n,i,a);Vt=(n.flags&131072)!==0}else Vt=!1,Qe&&(i.flags&1048576)!==0&&Cp(i,xa,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;nl(n,i),n=i.pendingProps;var h=Xr(i,Nt.current);eo(i,a),h=Nc(null,i,c,n,h,a);var g=Dc();return i.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,jt(c)?(g=!0,Ha(i)):g=!1,i.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Ic(i),h.updater=el,i.stateNode=h,h._reactInternals=i,Lc(i,c,n,a),i=Gc(null,i,c,!0,g,a)):(i.tag=0,Qe&&g&&fc(i),Bt(null,i,h,a),i=i.child),i;case 16:c=i.elementType;e:{switch(nl(n,i),n=i.pendingProps,h=c._init,c=h(c._payload),i.type=c,h=i.tag=fA(c),n=wn(c,n),h){case 0:i=bc(null,i,c,n,a);break e;case 1:i=Sg(null,i,c,n,a);break e;case 11:i=hg(null,i,c,n,a);break e;case 14:i=pg(null,i,c,wn(c.type,n),a);break e}throw Error(r(306,c,""))}return i;case 0:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:wn(c,h),bc(n,i,c,h,a);case 1:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:wn(c,h),Sg(n,i,c,h,a);case 3:e:{if(yg(i),n===null)throw Error(r(387));c=i.pendingProps,g=i.memoizedState,h=g.element,Fp(n,i),Va(i,c,null,a);var v=i.memoizedState;if(c=v.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){h=no(Error(r(423)),i),i=Ag(n,i,c,a,h);break e}else if(c!==h){h=no(Error(r(424)),i),i=Ag(n,i,c,a,h);break e}else for(en=wi(i.stateNode.containerInfo.firstChild),Jt=i,Qe=!0,En=null,a=Mp(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(qr(),c===h){i=oi(n,i,a);break e}Bt(n,i,c,a)}i=i.child}return i;case 5:return Bp(i),n===null&&gc(i),c=i.type,h=i.pendingProps,g=n!==null?n.memoizedProps:null,v=h.children,sc(c,h)?v=null:g!==null&&sc(c,g)&&(i.flags|=32),vg(n,i),Bt(n,i,v,a),i.child;case 6:return n===null&&gc(i),null;case 13:return Tg(n,i,a);case 4:return Ec(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Qr(i,null,c,a):Bt(n,i,c,a),i.child;case 11:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:wn(c,h),hg(n,i,c,h,a);case 7:return Bt(n,i,i.pendingProps,a),i.child;case 8:return Bt(n,i,i.pendingProps.children,a),i.child;case 12:return Bt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,h=i.pendingProps,g=i.memoizedProps,v=h.value,Ye(Wa,c._currentValue),c._currentValue=v,g!==null)if(In(g.value,v)){if(g.children===h.children&&!Yt.current){i=oi(n,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var A=g.dependencies;if(A!==null){v=g.child;for(var _=A.firstContext;_!==null;){if(_.context===c){if(g.tag===1){_=ri(-1,a&-a),_.tag=2;var k=g.updateQueue;if(k!==null){k=k.shared;var G=k.pending;G===null?_.next=_:(_.next=G.next,G.next=_),k.pending=_}}g.lanes|=a,_=g.alternate,_!==null&&(_.lanes|=a),Ac(g.return,a,i),A.lanes|=a;break}_=_.next}}else if(g.tag===10)v=g.type===i.type?null:g.child;else if(g.tag===18){if(v=g.return,v===null)throw Error(r(341));v.lanes|=a,A=v.alternate,A!==null&&(A.lanes|=a),Ac(v,a,i),v=g.sibling}else v=g.child;if(v!==null)v.return=g;else for(v=g;v!==null;){if(v===i){v=null;break}if(g=v.sibling,g!==null){g.return=v.return,v=g;break}v=v.return}g=v}Bt(n,i,h.children,a),i=i.child}return i;case 9:return h=i.type,c=i.pendingProps.children,eo(i,a),h=cn(h),c=c(h),i.flags|=1,Bt(n,i,c,a),i.child;case 14:return c=i.type,h=wn(c,i.pendingProps),h=wn(c.type,h),pg(n,i,c,h,a);case 15:return gg(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:wn(c,h),nl(n,i),i.tag=1,jt(c)?(n=!0,Ha(i)):n=!1,eo(i,a),sg(i,c,h),Lc(i,c,h,a),Gc(null,i,c,!0,n,a);case 19:return Eg(n,i,a);case 22:return mg(n,i,a)}throw Error(r(156,i.tag))};function Vg(n,i){return _h(n,i)}function dA(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(n,i,a,c){return new dA(n,i,a,c)}function sd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function fA(n){if(typeof n=="function")return sd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Ne)return 11;if(n===Ue)return 14}return 2}function Ui(n,i){var a=n.alternate;return a===null?(a=hn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function hl(n,i,a,c,h,g){var v=2;if(c=n,typeof n=="function")sd(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case $:return gr(a.children,h,g,i);case ee:v=8,h|=8;break;case Ce:return n=hn(12,a,i,h|2),n.elementType=Ce,n.lanes=g,n;case Pe:return n=hn(13,a,i,h),n.elementType=Pe,n.lanes=g,n;case de:return n=hn(19,a,i,h),n.elementType=de,n.lanes=g,n;case ne:return pl(a,h,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case _e:v=10;break e;case Ge:v=9;break e;case Ne:v=11;break e;case Ue:v=14;break e;case Ae:v=16,c=null;break e}throw Error(r(130,n==null?n:typeof n,""))}return i=hn(v,a,i,h),i.elementType=n,i.type=c,i.lanes=g,i}function gr(n,i,a,c){return n=hn(7,n,c,i),n.lanes=a,n}function pl(n,i,a,c){return n=hn(22,n,c,i),n.elementType=ne,n.lanes=a,n.stateNode={isHidden:!1},n}function ad(n,i,a){return n=hn(6,n,null,i),n.lanes=a,n}function ld(n,i,a){return i=hn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function hA(n,i,a,c,h){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uu(0),this.expirationTimes=Uu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uu(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function ud(n,i,a,c,h,g,v,A,_){return n=new hA(n,i,a,A,_),i===1?(i=1,g===!0&&(i|=8)):i=0,g=hn(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ic(g),n}function pA(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function Xg(n){if(!n)return _i;n=n._reactInternals;e:{if(ir(n)!==n||n.tag!==1)throw Error(r(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(jt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(n.tag===1){var a=n.type;if(jt(a))return Ip(n,a,i)}return i}function Kg(n,i,a,c,h,g,v,A,_){return n=ud(a,c,!0,n,h,g,v,A,_),n.context=Xg(null),a=n.current,c=Ht(),h=ki(a),g=ri(c,h),g.callback=i??null,Ni(a,g,h),n.current.lanes=h,jo(n,h,c),Kt(n,c),n}function gl(n,i,a,c){var h=i.current,g=Ht(),v=ki(h);return a=Xg(a),i.context===null?i.context=a:i.pendingContext=a,i=ri(g,v),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=Ni(h,i,v),n!==null&&(Rn(n,h,v,g),ja(n,h,v)),v}function ml(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Zg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function cd(n,i){Zg(n,i),(n=n.alternate)&&Zg(n,i)}function gA(){return null}var qg=typeof reportError=="function"?reportError:function(n){console.error(n)};function dd(n){this._internalRoot=n}vl.prototype.render=dd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));gl(n,i,null,null)},vl.prototype.unmount=dd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;fr(function(){gl(null,n,null,null)}),i[Jn]=null}};function vl(n){this._internalRoot=n}vl.prototype.unstable_scheduleHydration=function(n){if(n){var i=Fh();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Ti.length&&i!==0&&i<Ti[a].priority;a++);Ti.splice(a,0,n),a===0&&Bh(n)}};function fd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Sl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Qg(){}function mA(n,i,a,c,h){if(h){if(typeof c=="function"){var g=c;c=function(){var k=ml(v);g.call(k)}}var v=Kg(i,c,n,0,null,!1,!1,"",Qg);return n._reactRootContainer=v,n[Jn]=v.current,ss(n.nodeType===8?n.parentNode:n),fr(),v}for(;h=n.lastChild;)n.removeChild(h);if(typeof c=="function"){var A=c;c=function(){var k=ml(_);A.call(k)}}var _=ud(n,0,!1,null,null,!1,!1,"",Qg);return n._reactRootContainer=_,n[Jn]=_.current,ss(n.nodeType===8?n.parentNode:n),fr(function(){gl(i,_,a,c)}),_}function yl(n,i,a,c,h){var g=a._reactRootContainer;if(g){var v=g;if(typeof h=="function"){var A=h;h=function(){var _=ml(v);A.call(_)}}gl(i,v,n,h)}else v=mA(a,i,n,h,c);return ml(v)}Mh=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Yo(i.pendingLanes);a!==0&&(Lu(i,a|1),Kt(i,st()),(He&6)===0&&(oo=st()+500,Ri()))}break;case 13:fr(function(){var c=ii(n,1);if(c!==null){var h=Ht();Rn(c,n,1,h)}}),cd(n,1)}},Bu=function(n){if(n.tag===13){var i=ii(n,134217728);if(i!==null){var a=Ht();Rn(i,n,134217728,a)}cd(n,134217728)}},kh=function(n){if(n.tag===13){var i=ki(n),a=ii(n,i);if(a!==null){var c=Ht();Rn(a,n,i,c)}cd(n,i)}},Fh=function(){return We},Uh=function(n,i){var a=We;try{return We=n,i()}finally{We=a}},Nu=function(n,i,a){switch(i){case"input":if(Wt(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var h=La(c);if(!h)throw Error(r(90));he(c),Wt(c,h)}}}break;case"textarea":ch(n,a);break;case"select":i=a.value,i!=null&&vi(n,!!a.multiple,i,!1)}},yh=id,Ah=fr;var vA={usingClientEntryPoint:!1,Events:[us,jr,La,vh,Sh,id]},Es={findFiberByHostInstance:rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SA={bundleType:Es.bundleType,version:Es.version,rendererPackageName:Es.rendererPackageName,rendererConfig:Es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=wh(n),n===null?null:n.stateNode},findFiberByHostInstance:Es.findFiberByHostInstance||gA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Al.isDisabled&&Al.supportsFiber)try{va=Al.inject(SA),Gn=Al}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vA,Zt.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fd(i))throw Error(r(200));return pA(n,i,null,a)},Zt.createRoot=function(n,i){if(!fd(n))throw Error(r(299));var a=!1,c="",h=qg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(h=i.onRecoverableError)),i=ud(n,1,!1,null,null,a,!1,c,h),n[Jn]=i.current,ss(n.nodeType===8?n.parentNode:n),new dd(i)},Zt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=wh(i),n=n===null?null:n.stateNode,n},Zt.flushSync=function(n){return fr(n)},Zt.hydrate=function(n,i,a){if(!Sl(i))throw Error(r(200));return yl(null,n,i,!0,a)},Zt.hydrateRoot=function(n,i,a){if(!fd(n))throw Error(r(405));var c=a!=null&&a.hydratedSources||null,h=!1,g="",v=qg;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),i=Kg(i,null,n,1,a??null,h,!1,g,v),n[Jn]=i.current,ss(n),c)for(n=0;n<c.length;n++)a=c[n],h=a._getVersion,h=h(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,h]:i.mutableSourceEagerHydrationData.push(a,h);return new vl(i)},Zt.render=function(n,i,a){if(!Sl(i))throw Error(r(200));return yl(null,n,i,!1,a)},Zt.unmountComponentAtNode=function(n){if(!Sl(n))throw Error(r(40));return n._reactRootContainer?(fr(function(){yl(null,null,n,!1,function(){n._reactRootContainer=null,n[Jn]=null})}),!0):!1},Zt.unstable_batchedUpdates=id,Zt.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Sl(a))throw Error(r(200));if(n==null||n._reactInternals===void 0)throw Error(r(38));return yl(n,i,a,!1,c)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var sm;function PA(){if(sm)return gd.exports;sm=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),gd.exports=RA(),gd.exports}var am;function NA(){if(am)return Tl;am=1;var e=PA();return Tl.createRoot=e.createRoot,Tl.hydrateRoot=e.hydrateRoot,Tl}var DA=NA();const OA=D0(DA);class MA{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,r){let o=this.length++;for(;o>0;){const l=o-1>>1,s=this.values[l];if(r>=s)break;this.ids[o]=this.ids[l],this.values[o]=s,o=l}this.ids[o]=t,this.values[o]=r}pop(){if(this.length===0)return;const t=this.ids[0];if(this.length--,this.length>0){const r=this.ids[0]=this.ids[this.length],o=this.values[0]=this.values[this.length],l=this.length>>1;let s=0;for(;s<l;){let u=(s<<1)+1;const d=u+1;let f=this.ids[u],p=this.values[u];const m=this.values[d];if(d<this.length&&m<p&&(u=d,f=this.ids[d],p=m),p>=o)break;this.ids[s]=f,this.values[s]=p,s=u}this.ids[s]=r,this.values[s]=o}return t}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}const lm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Sd=3;class Cf{static from(t,r=0){if(r%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!t||t.byteLength===void 0||t.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[o,l]=new Uint8Array(t,r+0,2);if(o!==251)throw new Error("Data does not appear to be in a Flatbush format.");const s=l>>4;if(s!==Sd)throw new Error(`Got v${s} data when expected v${Sd}.`);const u=lm[l&15];if(!u)throw new Error("Unrecognized array type.");const[d]=new Uint16Array(t,r+2,1),[f]=new Uint32Array(t,r+4,1);return new Cf(f,d,u,void 0,t,r)}constructor(t,r=16,o=Float64Array,l=ArrayBuffer,s,u=0){if(t===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(t)||t<=0)throw new Error(`Unexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+r,2),65535),this.byteOffset=u;let d=t,f=d;this._levelBounds=[d*4];do d=Math.ceil(d/this.nodeSize),f+=d,this._levelBounds.push(f*4);while(d!==1);this.ArrayType=o,this.IndexArrayType=f<16384?Uint16Array:Uint32Array;const p=lm.indexOf(this.ArrayType),m=f*4*this.ArrayType.BYTES_PER_ELEMENT;if(p<0)throw new Error(`Unexpected typed array class: ${o}.`);s&&s.byteLength!==void 0&&!s.buffer?(this.data=s,this._boxes=new this.ArrayType(this.data,u+8,f*4),this._indices=new this.IndexArrayType(this.data,u+8+m,f),this._pos=f*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1]):(this.data=new l(8+m+f*this.IndexArrayType.BYTES_PER_ELEMENT),this._boxes=new this.ArrayType(this.data,8,f*4),this._indices=new this.IndexArrayType(this.data,8+m,f),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(this.data,0,2).set([251,(Sd<<4)+p]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=t),this._queue=new MA}add(t,r,o=t,l=r){const s=this._pos>>2,u=this._boxes;return this._indices[s]=s,u[this._pos++]=t,u[this._pos++]=r,u[this._pos++]=o,u[this._pos++]=l,t<this.minX&&(this.minX=t),r<this.minY&&(this.minY=r),o>this.maxX&&(this.maxX=o),l>this.maxY&&(this.maxY=l),s}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const t=this._boxes;if(this.numItems<=this.nodeSize){t[this._pos++]=this.minX,t[this._pos++]=this.minY,t[this._pos++]=this.maxX,t[this._pos++]=this.maxY;return}const r=this.maxX-this.minX||1,o=this.maxY-this.minY||1,l=new Uint32Array(this.numItems),s=65535;for(let u=0,d=0;u<this.numItems;u++){const f=t[d++],p=t[d++],m=t[d++],S=t[d++],y=Math.floor(s*((f+m)/2-this.minX)/r),w=Math.floor(s*((p+S)/2-this.minY)/o);l[u]=FA(y,w)}Qd(l,t,this._indices,0,this.numItems-1,this.nodeSize);for(let u=0,d=0;u<this._levelBounds.length-1;u++){const f=this._levelBounds[u];for(;d<f;){const p=d;let m=t[d++],S=t[d++],y=t[d++],w=t[d++];for(let E=1;E<this.nodeSize&&d<f;E++)m=Math.min(m,t[d++]),S=Math.min(S,t[d++]),y=Math.max(y,t[d++]),w=Math.max(w,t[d++]);this._indices[this._pos>>2]=p,t[this._pos++]=m,t[this._pos++]=S,t[this._pos++]=y,t[this._pos++]=w}}}search(t,r,o,l,s){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let u=this._boxes.length-4;const d=[],f=[];for(;u!==void 0;){const p=Math.min(u+this.nodeSize*4,cm(u,this._levelBounds));for(let m=u;m<p;m+=4){if(o<this._boxes[m]||l<this._boxes[m+1]||t>this._boxes[m+2]||r>this._boxes[m+3])continue;const S=this._indices[m>>2]|0;u>=this.numItems*4?d.push(S):(s===void 0||s(S))&&f.push(S)}u=d.pop()}return f}neighbors(t,r,o=1/0,l=1/0,s){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let u=this._boxes.length-4;const d=this._queue,f=[],p=l*l;e:for(;u!==void 0;){const m=Math.min(u+this.nodeSize*4,cm(u,this._levelBounds));for(let S=u;S<m;S+=4){const y=this._indices[S>>2]|0,w=um(t,this._boxes[S],this._boxes[S+2]),E=um(r,this._boxes[S+1],this._boxes[S+3]),T=w*w+E*E;T>p||(u>=this.numItems*4?d.push(y<<1,T):(s===void 0||s(y))&&d.push((y<<1)+1,T))}for(;d.length&&d.peek()&1;)if(d.peekValue()>p||(f.push(d.pop()>>1),f.length===o))break e;u=d.length?d.pop()>>1:void 0}return d.clear(),f}}function um(e,t,r){return e<t?t-e:e<=r?0:e-r}function cm(e,t){let r=0,o=t.length-1;for(;r<o;){const l=r+o>>1;t[l]>e?o=l:r=l+1}return t[r]}function Qd(e,t,r,o,l,s){if(Math.floor(o/s)>=Math.floor(l/s))return;const u=e[o+l>>1];let d=o-1,f=l+1;for(;;){do d++;while(e[d]<u);do f--;while(e[f]>u);if(d>=f)break;kA(e,t,r,d,f)}Qd(e,t,r,o,f,s),Qd(e,t,r,f+1,l,s)}function kA(e,t,r,o,l){const s=e[o];e[o]=e[l],e[l]=s;const u=4*o,d=4*l,f=t[u],p=t[u+1],m=t[u+2],S=t[u+3];t[u]=t[d],t[u+1]=t[d+1],t[u+2]=t[d+2],t[u+3]=t[d+3],t[d]=f,t[d+1]=p,t[d+2]=m,t[d+3]=S;const y=r[o];r[o]=r[l],r[l]=y}function FA(e,t){let r=e^t,o=65535^r,l=65535^(e|t),s=e&(t^65535),u=r|o>>1,d=r>>1^r,f=l>>1^o&s>>1^l,p=r&l>>1^s>>1^s;r=u,o=d,l=f,s=p,u=r&r>>2^o&o>>2,d=r&o>>2^o&(r^o)>>2,f^=r&l>>2^o&s>>2,p^=o&l>>2^(r^o)&s>>2,r=u,o=d,l=f,s=p,u=r&r>>4^o&o>>4,d=r&o>>4^o&(r^o)>>4,f^=r&l>>4^o&s>>4,p^=o&l>>4^(r^o)&s>>4,r=u,o=d,l=f,s=p,f^=r&l>>8^o&s>>8,p^=o&l>>8^(r^o)&s>>8,r=f^f>>1,o=p^p>>1;let m=e^t,S=o|65535^(m|r);return m=(m|m<<8)&16711935,m=(m|m<<4)&252645135,m=(m|m<<2)&858993459,m=(m|m<<1)&1431655765,S=(S|S<<8)&16711935,S=(S|S<<4)&252645135,S=(S|S<<2)&858993459,S=(S|S<<1)&1431655765,(S<<1|m)>>>0}function ao(e,t){if(e.length===0)return{all:()=>[],byRect:()=>[],byRadius:()=>[],byProperty:()=>[],resetPropertyCache:()=>{},count:()=>0};const r=new Cf(e.length),o=new Map;for(const s of e)r.add(s.position.x,s.position.y,s.position.x,s.position.y);return r.finish(),{all(){return e},byRect(s){return r.search(s.left,s.top,s.right,s.bottom).map(d=>e[d])},byRadius(s,u){return r.neighbors(s.x,s.y,void 0,u).map(f=>e[f])},byProperty(s,u){var d;if(!o.has(s)){const f=new Map;for(const p of e){const m=p[s];f.has(m)||f.set(m,[]),f.get(m).push(p)}o.set(s,f)}return((d=o.get(s))==null?void 0:d.get(u))||[]},resetPropertyCache(){o.clear()},count(){return e.length}}}function uu(e){const t=Object.values(e.entities.entities),r=t.filter(p=>p.type==="human"),o=t.filter(p=>p.type==="berryBush"),l=t.filter(p=>p.type==="corpse"),s=t.filter(p=>p.type==="prey"),u=t.filter(p=>p.type==="predator"),d=t.filter(p=>p.type==="building");return{...e,search:{human:ao(r),berryBush:ao(o),corpse:ao(l),prey:ao(s),predator:ao(u),building:ao(d)}}}const UA="tribe-game-db",qi="save-files",_f="tribe-game-save",Jd=1;async function Rf(e){try{const t={version:Jd,savedAt:Date.now(),gameState:e},r=JSON.stringify(t),o=await BA(r);await bA(_f,o),console.log(`Game saved successfully. Size: ${(o.size/1024).toFixed(2)} KB`)}catch(t){throw console.error("Failed to save game:",t),t}}async function LA(){try{const e=await GA(_f);if(!e)return null;const t=await HA(e),r=JSON.parse(t);return r.version!==Jd?(console.warn(`Save game version mismatch. Expected ${Jd}, found ${r.version}. Discarding save.`),await ef(),null):(console.log("Game loaded successfully."),uu(r.gameState))}catch(e){return console.error("Failed to load game:",e),await ef(),null}}async function ef(){try{await xA(_f),console.log("Saved game cleared.")}catch(e){console.error("Failed to clear saved game:",e)}}async function BA(e){const r=new Blob([e]).stream().pipeThrough(new CompressionStream("gzip"));return await new Response(r).blob()}async function HA(e){const t=e.stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(t).text()}function Pf(){return new Promise((e,t)=>{const r=indexedDB.open(UA,1);r.onupgradeneeded=o=>{const l=o.target.result;l.objectStoreNames.contains(qi)||l.createObjectStore(qi)},r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})}async function bA(e,t){const r=await Pf();return new Promise((o,l)=>{const d=r.transaction(qi,"readwrite").objectStore(qi).put(t,e);d.onsuccess=()=>o(),d.onerror=()=>l(d.error)})}async function GA(e){const t=await Pf();return new Promise((r,o)=>{const u=t.transaction(qi,"readonly").objectStore(qi).get(e);u.onsuccess=()=>r(u.result),u.onerror=()=>o(u.error)})}async function xA(e){const t=await Pf();return new Promise((r,o)=>{const u=t.transaction(qi,"readwrite").objectStore(qi).delete(e);u.onsuccess=()=>r(),u.onerror=()=>o(u.error)})}const O0=Re.createContext(void 0),$A=({initialAppState:e,children:t})=>{const[r,o]=Re.useState(e),[l,s]=Re.useState(void 0),[u,d]=Re.useState(null),[f,p]=Re.useState(!1);Re.useEffect(()=>{LA().then(E=>{E&&d(E),p(!0)})},[]);const m=(E,T)=>{o(E),E==="gameOver"&&T?s(T):E!=="gameOver"&&s(void 0)},S=()=>{o("intro"),s(void 0),w()},y=E=>{Rf(E),d(E)},w=()=>{ef(),d(null)};return Fe.jsx(O0.Provider,{value:{appState:r,setAppState:m,returnToIntro:S,gameOverDetails:l,contextReady:f,savedGameState:u,setSavedGameState:d,saveCurrentGame:y,clearCurrentSave:w},children:t})},ko=()=>{const e=Re.useContext(O0);if(e===void 0)throw new Error("useGameContext must be used within a GameProvider");return e};var Ut=function(){return Ut=Object.assign||function(t){for(var r,o=1,l=arguments.length;o<l;o++){r=arguments[o];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ut.apply(this,arguments)};function Vs(e,t,r){if(r||arguments.length===2)for(var o=0,l=t.length,s;o<l;o++)(s||!(o in t))&&(s||(s=Array.prototype.slice.call(t,0,o)),s[o]=t[o]);return e.concat(s||Array.prototype.slice.call(t))}var Ke="-ms-",Hs="-moz-",$e="-webkit-",M0="comm",cu="rule",Nf="decl",zA="@import",k0="@keyframes",WA="@layer",F0=Math.abs,Df=String.fromCharCode,tf=Object.assign;function YA(e,t){return yt(e,0)^45?(((t<<2^yt(e,0))<<2^yt(e,1))<<2^yt(e,2))<<2^yt(e,3):0}function U0(e){return e.trim()}function ui(e,t){return(e=t.exec(e))?e[0]:e}function ke(e,t,r){return e.replace(t,r)}function Wl(e,t,r){return e.indexOf(t,r)}function yt(e,t){return e.charCodeAt(t)|0}function Eo(e,t,r){return e.slice(t,r)}function Kn(e){return e.length}function L0(e){return e.length}function ks(e,t){return t.push(e),e}function jA(e,t){return e.map(t).join("")}function dm(e,t){return e.filter(function(r){return!ui(r,t)})}var du=1,wo=1,B0=0,Sn=0,dt=0,Fo="";function fu(e,t,r,o,l,s,u,d){return{value:e,root:t,parent:r,type:o,props:l,children:s,line:du,column:wo,length:u,return:"",siblings:d}}function Gi(e,t){return tf(fu("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function lo(e){for(;e.root;)e=Gi(e.root,{children:[e]});ks(e,e.siblings)}function VA(){return dt}function XA(){return dt=Sn>0?yt(Fo,--Sn):0,wo--,dt===10&&(wo=1,du--),dt}function Dn(){return dt=Sn<B0?yt(Fo,Sn++):0,wo++,dt===10&&(wo=1,du++),dt}function wr(){return yt(Fo,Sn)}function Yl(){return Sn}function hu(e,t){return Eo(Fo,e,t)}function nf(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function KA(e){return du=wo=1,B0=Kn(Fo=e),Sn=0,[]}function ZA(e){return Fo="",e}function yd(e){return U0(hu(Sn-1,rf(e===91?e+2:e===40?e+1:e)))}function qA(e){for(;(dt=wr())&&dt<33;)Dn();return nf(e)>2||nf(dt)>3?"":" "}function QA(e,t){for(;--t&&Dn()&&!(dt<48||dt>102||dt>57&&dt<65||dt>70&&dt<97););return hu(e,Yl()+(t<6&&wr()==32&&Dn()==32))}function rf(e){for(;Dn();)switch(dt){case e:return Sn;case 34:case 39:e!==34&&e!==39&&rf(dt);break;case 40:e===41&&rf(e);break;case 92:Dn();break}return Sn}function JA(e,t){for(;Dn()&&e+dt!==57;)if(e+dt===84&&wr()===47)break;return"/*"+hu(t,Sn-1)+"*"+Df(e===47?e:Dn())}function eT(e){for(;!nf(wr());)Dn();return hu(e,Sn)}function tT(e){return ZA(jl("",null,null,null,[""],e=KA(e),0,[0],e))}function jl(e,t,r,o,l,s,u,d,f){for(var p=0,m=0,S=u,y=0,w=0,E=0,T=1,C=1,F=1,B=0,D="",H=l,x=s,U=o,$=D;C;)switch(E=B,B=Dn()){case 40:if(E!=108&&yt($,S-1)==58){Wl($+=ke(yd(B),"&","&\f"),"&\f",F0(p?d[p-1]:0))!=-1&&(F=-1);break}case 34:case 39:case 91:$+=yd(B);break;case 9:case 10:case 13:case 32:$+=qA(E);break;case 92:$+=QA(Yl()-1,7);continue;case 47:switch(wr()){case 42:case 47:ks(nT(JA(Dn(),Yl()),t,r,f),f);break;default:$+="/"}break;case 123*T:d[p++]=Kn($)*F;case 125*T:case 59:case 0:switch(B){case 0:case 125:C=0;case 59+m:F==-1&&($=ke($,/\f/g,"")),w>0&&Kn($)-S&&ks(w>32?hm($+";",o,r,S-1,f):hm(ke($," ","")+";",o,r,S-2,f),f);break;case 59:$+=";";default:if(ks(U=fm($,t,r,p,m,l,d,D,H=[],x=[],S,s),s),B===123)if(m===0)jl($,t,U,U,H,s,S,d,x);else switch(y===99&&yt($,3)===110?100:y){case 100:case 108:case 109:case 115:jl(e,U,U,o&&ks(fm(e,U,U,0,0,l,d,D,l,H=[],S,x),x),l,x,S,d,o?H:x);break;default:jl($,U,U,U,[""],x,0,d,x)}}p=m=w=0,T=F=1,D=$="",S=u;break;case 58:S=1+Kn($),w=E;default:if(T<1){if(B==123)--T;else if(B==125&&T++==0&&XA()==125)continue}switch($+=Df(B),B*T){case 38:F=m>0?1:($+="\f",-1);break;case 44:d[p++]=(Kn($)-1)*F,F=1;break;case 64:wr()===45&&($+=yd(Dn())),y=wr(),m=S=Kn(D=$+=eT(Yl())),B++;break;case 45:E===45&&Kn($)==2&&(T=0)}}return s}function fm(e,t,r,o,l,s,u,d,f,p,m,S){for(var y=l-1,w=l===0?s:[""],E=L0(w),T=0,C=0,F=0;T<o;++T)for(var B=0,D=Eo(e,y+1,y=F0(C=u[T])),H=e;B<E;++B)(H=U0(C>0?w[B]+" "+D:ke(D,/&\f/g,w[B])))&&(f[F++]=H);return fu(e,t,r,l===0?cu:d,f,p,m,S)}function nT(e,t,r,o){return fu(e,t,r,M0,Df(VA()),Eo(e,2,-2),0,o)}function hm(e,t,r,o,l){return fu(e,t,r,Nf,Eo(e,0,o),Eo(e,o+1,-1),o,l)}function H0(e,t,r){switch(YA(e,t)){case 5103:return $e+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return $e+e+e;case 4789:return Hs+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return $e+e+Hs+e+Ke+e+e;case 5936:switch(yt(e,t+11)){case 114:return $e+e+Ke+ke(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return $e+e+Ke+ke(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return $e+e+Ke+ke(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return $e+e+Ke+e+e;case 6165:return $e+e+Ke+"flex-"+e+e;case 5187:return $e+e+ke(e,/(\w+).+(:[^]+)/,$e+"box-$1$2"+Ke+"flex-$1$2")+e;case 5443:return $e+e+Ke+"flex-item-"+ke(e,/flex-|-self/g,"")+(ui(e,/flex-|baseline/)?"":Ke+"grid-row-"+ke(e,/flex-|-self/g,""))+e;case 4675:return $e+e+Ke+"flex-line-pack"+ke(e,/align-content|flex-|-self/g,"")+e;case 5548:return $e+e+Ke+ke(e,"shrink","negative")+e;case 5292:return $e+e+Ke+ke(e,"basis","preferred-size")+e;case 6060:return $e+"box-"+ke(e,"-grow","")+$e+e+Ke+ke(e,"grow","positive")+e;case 4554:return $e+ke(e,/([^-])(transform)/g,"$1"+$e+"$2")+e;case 6187:return ke(ke(ke(e,/(zoom-|grab)/,$e+"$1"),/(image-set)/,$e+"$1"),e,"")+e;case 5495:case 3959:return ke(e,/(image-set\([^]*)/,$e+"$1$`$1");case 4968:return ke(ke(e,/(.+:)(flex-)?(.*)/,$e+"box-pack:$3"+Ke+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+$e+e+e;case 4200:if(!ui(e,/flex-|baseline/))return Ke+"grid-column-align"+Eo(e,t)+e;break;case 2592:case 3360:return Ke+ke(e,"template-","")+e;case 4384:case 3616:return r&&r.some(function(o,l){return t=l,ui(o.props,/grid-\w+-end/)})?~Wl(e+(r=r[t].value),"span",0)?e:Ke+ke(e,"-start","")+e+Ke+"grid-row-span:"+(~Wl(r,"span",0)?ui(r,/\d+/):+ui(r,/\d+/)-+ui(e,/\d+/))+";":Ke+ke(e,"-start","")+e;case 4896:case 4128:return r&&r.some(function(o){return ui(o.props,/grid-\w+-start/)})?e:Ke+ke(ke(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return ke(e,/(.+)-inline(.+)/,$e+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Kn(e)-1-t>6)switch(yt(e,t+1)){case 109:if(yt(e,t+4)!==45)break;case 102:return ke(e,/(.+:)(.+)-([^]+)/,"$1"+$e+"$2-$3$1"+Hs+(yt(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Wl(e,"stretch",0)?H0(ke(e,"stretch","fill-available"),t,r)+e:e}break;case 5152:case 5920:return ke(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(o,l,s,u,d,f,p){return Ke+l+":"+s+p+(u?Ke+l+"-span:"+(d?f:+f-+s)+p:"")+e});case 4949:if(yt(e,t+6)===121)return ke(e,":",":"+$e)+e;break;case 6444:switch(yt(e,yt(e,14)===45?18:11)){case 120:return ke(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+$e+(yt(e,14)===45?"inline-":"")+"box$3$1"+$e+"$2$3$1"+Ke+"$2box$3")+e;case 100:return ke(e,":",":"+Ke)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ke(e,"scroll-","scroll-snap-")+e}return e}function Ql(e,t){for(var r="",o=0;o<e.length;o++)r+=t(e[o],o,e,t)||"";return r}function iT(e,t,r,o){switch(e.type){case WA:if(e.children.length)break;case zA:case Nf:return e.return=e.return||e.value;case M0:return"";case k0:return e.return=e.value+"{"+Ql(e.children,o)+"}";case cu:if(!Kn(e.value=e.props.join(",")))return""}return Kn(r=Ql(e.children,o))?e.return=e.value+"{"+r+"}":""}function rT(e){var t=L0(e);return function(r,o,l,s){for(var u="",d=0;d<t;d++)u+=e[d](r,o,l,s)||"";return u}}function oT(e){return function(t){t.root||(t=t.return)&&e(t)}}function sT(e,t,r,o){if(e.length>-1&&!e.return)switch(e.type){case Nf:e.return=H0(e.value,e.length,r);return;case k0:return Ql([Gi(e,{value:ke(e.value,"@","@"+$e)})],o);case cu:if(e.length)return jA(r=e.props,function(l){switch(ui(l,o=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":lo(Gi(e,{props:[ke(l,/:(read-\w+)/,":"+Hs+"$1")]})),lo(Gi(e,{props:[l]})),tf(e,{props:dm(r,o)});break;case"::placeholder":lo(Gi(e,{props:[ke(l,/:(plac\w+)/,":"+$e+"input-$1")]})),lo(Gi(e,{props:[ke(l,/:(plac\w+)/,":"+Hs+"$1")]})),lo(Gi(e,{props:[ke(l,/:(plac\w+)/,Ke+"input-$1")]})),lo(Gi(e,{props:[l]})),tf(e,{props:dm(r,o)});break}return""})}}var aT={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},on={},Co=typeof process<"u"&&on!==void 0&&(on.REACT_APP_SC_ATTR||on.SC_ATTR)||"data-styled",b0="active",G0="data-styled-version",pu="6.1.13",Of=`/*!sc*/
`,Jl=typeof window<"u"&&"HTMLElement"in window,lT=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&on!==void 0&&on.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&on.REACT_APP_SC_DISABLE_SPEEDY!==""?on.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&on.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&on!==void 0&&on.SC_DISABLE_SPEEDY!==void 0&&on.SC_DISABLE_SPEEDY!==""&&on.SC_DISABLE_SPEEDY!=="false"&&on.SC_DISABLE_SPEEDY),uT={},gu=Object.freeze([]),_o=Object.freeze({});function x0(e,t,r){return r===void 0&&(r=_o),e.theme!==r.theme&&e.theme||t||r.theme}var $0=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),cT=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,dT=/(^-|-$)/g;function pm(e){return e.replace(cT,"-").replace(dT,"")}var fT=/(a)(d)/gi,Il=52,gm=function(e){return String.fromCharCode(e+(e>25?39:97))};function of(e){var t,r="";for(t=Math.abs(e);t>Il;t=t/Il|0)r=gm(t%Il)+r;return(gm(t%Il)+r).replace(fT,"$1-$2")}var Ad,z0=5381,mo=function(e,t){for(var r=t.length;r;)e=33*e^t.charCodeAt(--r);return e},W0=function(e){return mo(z0,e)};function Y0(e){return of(W0(e)>>>0)}function hT(e){return e.displayName||e.name||"Component"}function Td(e){return typeof e=="string"&&!0}var j0=typeof Symbol=="function"&&Symbol.for,V0=j0?Symbol.for("react.memo"):60115,pT=j0?Symbol.for("react.forward_ref"):60112,gT={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},mT={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},X0={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},vT=((Ad={})[pT]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ad[V0]=X0,Ad);function mm(e){return("type"in(t=e)&&t.type.$$typeof)===V0?X0:"$$typeof"in e?vT[e.$$typeof]:gT;var t}var ST=Object.defineProperty,yT=Object.getOwnPropertyNames,vm=Object.getOwnPropertySymbols,AT=Object.getOwnPropertyDescriptor,TT=Object.getPrototypeOf,Sm=Object.prototype;function K0(e,t,r){if(typeof t!="string"){if(Sm){var o=TT(t);o&&o!==Sm&&K0(e,o,r)}var l=yT(t);vm&&(l=l.concat(vm(t)));for(var s=mm(e),u=mm(t),d=0;d<l.length;++d){var f=l[d];if(!(f in mT||r&&r[f]||u&&f in u||s&&f in s)){var p=AT(t,f);try{ST(e,f,p)}catch{}}}}return e}function Ro(e){return typeof e=="function"}function Mf(e){return typeof e=="object"&&"styledComponentId"in e}function Ir(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function sf(e,t){if(e.length===0)return"";for(var r=e[0],o=1;o<e.length;o++)r+=e[o];return r}function Xs(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function af(e,t,r){if(r===void 0&&(r=!1),!r&&!Xs(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var o=0;o<t.length;o++)e[o]=af(e[o],t[o]);else if(Xs(t))for(var o in t)e[o]=af(e[o],t[o]);return e}function kf(e,t){Object.defineProperty(e,"toString",{value:t})}function la(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var IT=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return e.prototype.indexOfGroup=function(t){for(var r=0,o=0;o<t;o++)r+=this.groupSizes[o];return r},e.prototype.insertRules=function(t,r){if(t>=this.groupSizes.length){for(var o=this.groupSizes,l=o.length,s=l;t>=s;)if((s<<=1)<0)throw la(16,"".concat(t));this.groupSizes=new Uint32Array(s),this.groupSizes.set(o),this.length=s;for(var u=l;u<s;u++)this.groupSizes[u]=0}for(var d=this.indexOfGroup(t+1),f=(u=0,r.length);u<f;u++)this.tag.insertRule(d,r[u])&&(this.groupSizes[t]++,d++)},e.prototype.clearGroup=function(t){if(t<this.length){var r=this.groupSizes[t],o=this.indexOfGroup(t),l=o+r;this.groupSizes[t]=0;for(var s=o;s<l;s++)this.tag.deleteRule(o)}},e.prototype.getGroup=function(t){var r="";if(t>=this.length||this.groupSizes[t]===0)return r;for(var o=this.groupSizes[t],l=this.indexOfGroup(t),s=l+o,u=l;u<s;u++)r+="".concat(this.tag.getRule(u)).concat(Of);return r},e}(),Vl=new Map,eu=new Map,Xl=1,El=function(e){if(Vl.has(e))return Vl.get(e);for(;eu.has(Xl);)Xl++;var t=Xl++;return Vl.set(e,t),eu.set(t,e),t},ET=function(e,t){Xl=t+1,Vl.set(e,t),eu.set(t,e)},wT="style[".concat(Co,"][").concat(G0,'="').concat(pu,'"]'),CT=new RegExp("^".concat(Co,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),_T=function(e,t,r){for(var o,l=r.split(","),s=0,u=l.length;s<u;s++)(o=l[s])&&e.registerName(t,o)},RT=function(e,t){for(var r,o=((r=t.textContent)!==null&&r!==void 0?r:"").split(Of),l=[],s=0,u=o.length;s<u;s++){var d=o[s].trim();if(d){var f=d.match(CT);if(f){var p=0|parseInt(f[1],10),m=f[2];p!==0&&(ET(m,p),_T(e,m,f[3]),e.getTag().insertRules(p,l)),l.length=0}else l.push(d)}}},ym=function(e){for(var t=document.querySelectorAll(wT),r=0,o=t.length;r<o;r++){var l=t[r];l&&l.getAttribute(Co)!==b0&&(RT(e,l),l.parentNode&&l.parentNode.removeChild(l))}};function PT(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Z0=function(e){var t=document.head,r=e||t,o=document.createElement("style"),l=function(d){var f=Array.from(d.querySelectorAll("style[".concat(Co,"]")));return f[f.length-1]}(r),s=l!==void 0?l.nextSibling:null;o.setAttribute(Co,b0),o.setAttribute(G0,pu);var u=PT();return u&&o.setAttribute("nonce",u),r.insertBefore(o,s),o},NT=function(){function e(t){this.element=Z0(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var o=document.styleSheets,l=0,s=o.length;l<s;l++){var u=o[l];if(u.ownerNode===r)return u}throw la(17)}(this.element),this.length=0}return e.prototype.insertRule=function(t,r){try{return this.sheet.insertRule(r,t),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.prototype.getRule=function(t){var r=this.sheet.cssRules[t];return r&&r.cssText?r.cssText:""},e}(),DT=function(){function e(t){this.element=Z0(t),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(t,r){if(t<=this.length&&t>=0){var o=document.createTextNode(r);return this.element.insertBefore(o,this.nodes[t]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),OT=function(){function e(t){this.rules=[],this.length=0}return e.prototype.insertRule=function(t,r){return t<=this.length&&(this.rules.splice(t,0,r),this.length++,!0)},e.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),Am=Jl,MT={isServer:!Jl,useCSSOMInjection:!lT},tu=function(){function e(t,r,o){t===void 0&&(t=_o),r===void 0&&(r={});var l=this;this.options=Ut(Ut({},MT),t),this.gs=r,this.names=new Map(o),this.server=!!t.isServer,!this.server&&Jl&&Am&&(Am=!1,ym(this)),kf(this,function(){return function(s){for(var u=s.getTag(),d=u.length,f="",p=function(S){var y=function(F){return eu.get(F)}(S);if(y===void 0)return"continue";var w=s.names.get(y),E=u.getGroup(S);if(w===void 0||!w.size||E.length===0)return"continue";var T="".concat(Co,".g").concat(S,'[id="').concat(y,'"]'),C="";w!==void 0&&w.forEach(function(F){F.length>0&&(C+="".concat(F,","))}),f+="".concat(E).concat(T,'{content:"').concat(C,'"}').concat(Of)},m=0;m<d;m++)p(m);return f}(l)})}return e.registerId=function(t){return El(t)},e.prototype.rehydrate=function(){!this.server&&Jl&&ym(this)},e.prototype.reconstructWithOptions=function(t,r){return r===void 0&&(r=!0),new e(Ut(Ut({},this.options),t),this.gs,r&&this.names||void 0)},e.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(t=function(r){var o=r.useCSSOMInjection,l=r.target;return r.isServer?new OT(l):o?new NT(l):new DT(l)}(this.options),new IT(t)));var t},e.prototype.hasNameForId=function(t,r){return this.names.has(t)&&this.names.get(t).has(r)},e.prototype.registerName=function(t,r){if(El(t),this.names.has(t))this.names.get(t).add(r);else{var o=new Set;o.add(r),this.names.set(t,o)}},e.prototype.insertRules=function(t,r,o){this.registerName(t,r),this.getTag().insertRules(El(t),o)},e.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.prototype.clearRules=function(t){this.getTag().clearGroup(El(t)),this.clearNames(t)},e.prototype.clearTag=function(){this.tag=void 0},e}(),kT=/&/g,FT=/^\s*\/\/.*$/gm;function q0(e,t){return e.map(function(r){return r.type==="rule"&&(r.value="".concat(t," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(t," ")),r.props=r.props.map(function(o){return"".concat(t," ").concat(o)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=q0(r.children,t)),r})}function UT(e){var t,r,o,l=_o,s=l.options,u=s===void 0?_o:s,d=l.plugins,f=d===void 0?gu:d,p=function(y,w,E){return E.startsWith(r)&&E.endsWith(r)&&E.replaceAll(r,"").length>0?".".concat(t):y},m=f.slice();m.push(function(y){y.type===cu&&y.value.includes("&")&&(y.props[0]=y.props[0].replace(kT,r).replace(o,p))}),u.prefix&&m.push(sT),m.push(iT);var S=function(y,w,E,T){w===void 0&&(w=""),E===void 0&&(E=""),T===void 0&&(T="&"),t=T,r=w,o=new RegExp("\\".concat(r,"\\b"),"g");var C=y.replace(FT,""),F=tT(E||w?"".concat(E," ").concat(w," { ").concat(C," }"):C);u.namespace&&(F=q0(F,u.namespace));var B=[];return Ql(F,rT(m.concat(oT(function(D){return B.push(D)})))),B};return S.hash=f.length?f.reduce(function(y,w){return w.name||la(15),mo(y,w.name)},z0).toString():"",S}var LT=new tu,lf=UT(),Q0=Zn.createContext({shouldForwardProp:void 0,styleSheet:LT,stylis:lf});Q0.Consumer;Zn.createContext(void 0);function uf(){return Re.useContext(Q0)}var BT=function(){function e(t,r){var o=this;this.inject=function(l,s){s===void 0&&(s=lf);var u=o.name+s.hash;l.hasNameForId(o.id,u)||l.insertRules(o.id,u,s(o.rules,u,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=r,kf(this,function(){throw la(12,String(o.name))})}return e.prototype.getName=function(t){return t===void 0&&(t=lf),this.name+t.hash},e}(),HT=function(e){return e>="A"&&e<="Z"};function Tm(e){for(var t="",r=0;r<e.length;r++){var o=e[r];if(r===1&&o==="-"&&e[0]==="-")return e;HT(o)?t+="-"+o.toLowerCase():t+=o}return t.startsWith("ms-")?"-"+t:t}var J0=function(e){return e==null||e===!1||e===""},ev=function(e){var t,r,o=[];for(var l in e){var s=e[l];e.hasOwnProperty(l)&&!J0(s)&&(Array.isArray(s)&&s.isCss||Ro(s)?o.push("".concat(Tm(l),":"),s,";"):Xs(s)?o.push.apply(o,Vs(Vs(["".concat(l," {")],ev(s),!1),["}"],!1)):o.push("".concat(Tm(l),": ").concat((t=l,(r=s)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||t in aT||t.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return o};function Ki(e,t,r,o){if(J0(e))return[];if(Mf(e))return[".".concat(e.styledComponentId)];if(Ro(e)){if(!Ro(s=e)||s.prototype&&s.prototype.isReactComponent||!t)return[e];var l=e(t);return Ki(l,t,r,o)}var s;return e instanceof BT?r?(e.inject(r,o),[e.getName(o)]):[e]:Xs(e)?ev(e):Array.isArray(e)?Array.prototype.concat.apply(gu,e.map(function(u){return Ki(u,t,r,o)})):[e.toString()]}function tv(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(Ro(r)&&!Mf(r))return!1}return!0}var bT=W0(pu),GT=function(){function e(t,r,o){this.rules=t,this.staticRulesId="",this.isStatic=(o===void 0||o.isStatic)&&tv(t),this.componentId=r,this.baseHash=mo(bT,r),this.baseStyle=o,tu.registerId(r)}return e.prototype.generateAndInjectStyles=function(t,r,o){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,r,o):"";if(this.isStatic&&!o.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))l=Ir(l,this.staticRulesId);else{var s=sf(Ki(this.rules,t,r,o)),u=of(mo(this.baseHash,s)>>>0);if(!r.hasNameForId(this.componentId,u)){var d=o(s,".".concat(u),void 0,this.componentId);r.insertRules(this.componentId,u,d)}l=Ir(l,u),this.staticRulesId=u}else{for(var f=mo(this.baseHash,o.hash),p="",m=0;m<this.rules.length;m++){var S=this.rules[m];if(typeof S=="string")p+=S;else if(S){var y=sf(Ki(S,t,r,o));f=mo(f,y+m),p+=y}}if(p){var w=of(f>>>0);r.hasNameForId(this.componentId,w)||r.insertRules(this.componentId,w,o(p,".".concat(w),void 0,this.componentId)),l=Ir(l,w)}}return l},e}(),Ff=Zn.createContext(void 0);Ff.Consumer;var Id={};function xT(e,t,r){var o=Mf(e),l=e,s=!Td(e),u=t.attrs,d=u===void 0?gu:u,f=t.componentId,p=f===void 0?function(H,x){var U=typeof H!="string"?"sc":pm(H);Id[U]=(Id[U]||0)+1;var $="".concat(U,"-").concat(Y0(pu+U+Id[U]));return x?"".concat(x,"-").concat($):$}(t.displayName,t.parentComponentId):f,m=t.displayName,S=m===void 0?function(H){return Td(H)?"styled.".concat(H):"Styled(".concat(hT(H),")")}(e):m,y=t.displayName&&t.componentId?"".concat(pm(t.displayName),"-").concat(t.componentId):t.componentId||p,w=o&&l.attrs?l.attrs.concat(d).filter(Boolean):d,E=t.shouldForwardProp;if(o&&l.shouldForwardProp){var T=l.shouldForwardProp;if(t.shouldForwardProp){var C=t.shouldForwardProp;E=function(H,x){return T(H,x)&&C(H,x)}}else E=T}var F=new GT(r,y,o?l.componentStyle:void 0);function B(H,x){return function(U,$,ee){var Ce=U.attrs,_e=U.componentStyle,Ge=U.defaultProps,Ne=U.foldedComponentIds,Pe=U.styledComponentId,de=U.target,Ue=Zn.useContext(Ff),Ae=uf(),ne=U.shouldForwardProp||Ae.shouldForwardProp,W=x0($,Ue,Ge)||_o,X=function(Se,ae,Ee){for(var Te,Z=Ut(Ut({},ae),{className:void 0,theme:Ee}),re=0;re<Se.length;re+=1){var Le=Ro(Te=Se[re])?Te(Z):Te;for(var he in Le)Z[he]=he==="className"?Ir(Z[he],Le[he]):he==="style"?Ut(Ut({},Z[he]),Le[he]):Le[he]}return ae.className&&(Z.className=Ir(Z.className,ae.className)),Z}(Ce,$,W),Y=X.as||de,R={};for(var L in X)X[L]===void 0||L[0]==="$"||L==="as"||L==="theme"&&X.theme===W||(L==="forwardedAs"?R.as=X.forwardedAs:ne&&!ne(L,Y)||(R[L]=X[L]));var K=function(Se,ae){var Ee=uf(),Te=Se.generateAndInjectStyles(ae,Ee.styleSheet,Ee.stylis);return Te}(_e,X),ie=Ir(Ne,Pe);return K&&(ie+=" "+K),X.className&&(ie+=" "+X.className),R[Td(Y)&&!$0.has(Y)?"class":"className"]=ie,R.ref=ee,Re.createElement(Y,R)}(D,H,x)}B.displayName=S;var D=Zn.forwardRef(B);return D.attrs=w,D.componentStyle=F,D.displayName=S,D.shouldForwardProp=E,D.foldedComponentIds=o?Ir(l.foldedComponentIds,l.styledComponentId):"",D.styledComponentId=y,D.target=o?l.target:e,Object.defineProperty(D,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(H){this._foldedDefaultProps=o?function(x){for(var U=[],$=1;$<arguments.length;$++)U[$-1]=arguments[$];for(var ee=0,Ce=U;ee<Ce.length;ee++)af(x,Ce[ee],!0);return x}({},l.defaultProps,H):H}}),kf(D,function(){return".".concat(D.styledComponentId)}),s&&K0(D,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),D}function Im(e,t){for(var r=[e[0]],o=0,l=t.length;o<l;o+=1)r.push(t[o],e[o+1]);return r}var Em=function(e){return Object.assign(e,{isCss:!0})};function nv(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Ro(e)||Xs(e))return Em(Ki(Im(gu,Vs([e],t,!0))));var o=e;return t.length===0&&o.length===1&&typeof o[0]=="string"?Ki(o):Em(Ki(Im(o,t)))}function cf(e,t,r){if(r===void 0&&(r=_o),!t)throw la(1,t);var o=function(l){for(var s=[],u=1;u<arguments.length;u++)s[u-1]=arguments[u];return e(t,r,nv.apply(void 0,Vs([l],s,!1)))};return o.attrs=function(l){return cf(e,t,Ut(Ut({},r),{attrs:Array.prototype.concat(r.attrs,l).filter(Boolean)}))},o.withConfig=function(l){return cf(e,t,Ut(Ut({},r),l))},o}var iv=function(e){return cf(xT,e)},An=iv;$0.forEach(function(e){An[e]=iv(e)});var $T=function(){function e(t,r){this.rules=t,this.componentId=r,this.isStatic=tv(t),tu.registerId(this.componentId+1)}return e.prototype.createStyles=function(t,r,o,l){var s=l(sf(Ki(this.rules,r,o,l)),""),u=this.componentId+t;o.insertRules(u,u,s)},e.prototype.removeStyles=function(t,r){r.clearRules(this.componentId+t)},e.prototype.renderStyles=function(t,r,o,l){t>2&&tu.registerId(this.componentId+t),this.removeStyles(t,o),this.createStyles(t,r,o,l)},e}();function zT(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=nv.apply(void 0,Vs([e],t,!1)),l="sc-global-".concat(Y0(JSON.stringify(o))),s=new $T(o,l),u=function(f){var p=uf(),m=Zn.useContext(Ff),S=Zn.useRef(p.styleSheet.allocateGSInstance(l)).current;return p.styleSheet.server&&d(S,f,p.styleSheet,m,p.stylis),Zn.useLayoutEffect(function(){if(!p.styleSheet.server)return d(S,f,p.styleSheet,m,p.stylis),function(){return s.removeStyles(S,p.styleSheet)}},[S,f,p.styleSheet,m,p.stylis]),null};function d(f,p,m,S,y){if(s.isStatic)s.renderStyles(f,uT,m,y);else{var w=Ut(Ut({},p),{theme:x0(p,S,u.defaultProps)});s.renderStyles(f,w,m,y)}}return Zn.memo(u)}function rv(e,t){var r=Re.useRef(null),o=Re.useRef(!1),l=Re.useRef(e);l.current=e;var s=Re.useCallback(function(d){o.current&&(l.current(d),r.current=requestAnimationFrame(s))},[]),u=Re.useMemo(function(){return[function(){o.current&&(o.current=!1,r.current&&cancelAnimationFrame(r.current))},function(){o.current||(o.current=!0,r.current=requestAnimationFrame(s))},function(){return o.current}]},[]);return Re.useEffect(function(){return u[0]},[]),u}function WT(e,t,r,o,l){var u;(u=e.onExit)==null||u.call(e,o,t);const s=l.find(({id:d})=>d===t);return s!=null&&s.onEnter?s.onEnter(o,r):{...r,enteredAt:o.updateContext.gameState.time}}function YT(e,t){return t.find(({id:r})=>r===e)}function jT(e,t){return e!==t}function VT(e){console.warn(`No handler found for state: ${e}`)}const bs="bushGrowing",Tr="bushFull",Kl="bushSpreading",Ks="bushDying",At=24,Tt=10,et=3e3,tt=3e3,Uf=2,XT=15,KT=5e3,fi=100,hi=20,pi=60,ZT=1e3,qT=5,QT=3,JT=12,eI=940,df=20,wm=90,ov=45,sv=240,Or=5,tI=.5,Cm=100,Qi=30,gi=.1,Fs=.9,be=1,Er=3,nI=70;function Oe(e,t,r,o,l){const s={id:e.nextVisualEffectId,type:t,position:r,startTime:e.time,duration:o,entityId:l};return e.visualEffects.push(s),e.nextVisualEffectId++,s.id}var ue=(e=>(e[e.Hunger=0]="Hunger",e[e.Procreation=1]="Procreation",e[e.Pregnant=2]="Pregnant",e[e.TargetAcquired=3]="TargetAcquired",e[e.Attack=4]="Attack",e[e.Partnered=5]="Partnered",e[e.BushClaimed=6]="BushClaimed",e[e.BushClaimLost=7]="BushClaimLost",e[e.Eating=8]="Eating",e[e.ChildFed=9]="ChildFed",e[e.AttackDeflected=10]="AttackDeflected",e[e.AttackResisted=11]="AttackResisted",e[e.Hit=12]="Hit",e[e.SeizeBuildup=13]="SeizeBuildup",e[e.Seize=14]="Seize",e[e.CallToAttack=15]="CallToAttack",e[e.CallToFollow=16]="CallToFollow",e[e.AutopilotMoveTarget=17]="AutopilotMoveTarget",e))(ue||{}),Mn=(e=>(e.Berry="berry",e.Meat="meat",e))(Mn||{});const Lf={berry:"",meat:""},iI={id:bs,update:(e,t)=>{const{entity:r,updateContext:o}=t,l=o.deltaTime*(At/Tt);return r.age+=l,r.age>=r.lifespan?{nextState:Ks,data:{...e,enteredAt:o.gameState.time}}:(r.ownerId&&r.claimedUntil&&o.gameState.time>r.claimedUntil&&(Oe(o.gameState,ue.BushClaimLost,r.position,be),r.ownerId=void 0,r.claimedUntil=void 0),r.timeSinceLastBerryRegen+=l,r.timeSinceLastBerryRegen>=JT&&r.food.length<r.maxFood&&(r.food.push({type:Mn.Berry}),r.timeSinceLastBerryRegen=0),r.food.length>=r.maxFood?{nextState:Tr,data:{...e,enteredAt:o.gameState.time,previousState:bs}}:{nextState:bs,data:e})},onEnter:(e,t)=>({...t,enteredAt:e.updateContext.gameState.time})},rI={id:Tr,update:(e,t)=>{const{entity:r,updateContext:o}=t,l=o.deltaTime*(At/Tt);return r.age+=l,r.age>=r.lifespan?{nextState:Ks,data:{...e,enteredAt:o.gameState.time,previousState:Tr}}:r.food.length<r.maxFood?{nextState:bs,data:{...e,enteredAt:o.gameState.time,previousState:Tr}}:(r.ownerId&&r.claimedUntil&&o.gameState.time>r.claimedUntil&&(Oe(o.gameState,ue.BushClaimLost,r.position,be),r.ownerId=void 0,r.claimedUntil=void 0),r.timeSinceLastSpreadAttempt+=l,r.timeSinceLastSpreadAttempt>=wm&&(r.timeSinceLastSpreadAttempt=0,o.gameState.time-r.timeSinceLastHarvest>=wm&&Math.random()<o.gameState.ecosystem.berryBushSpreadChance)?{nextState:Kl,data:{...e,enteredAt:o.gameState.time,previousState:Tr}}:{nextState:Tr,data:e})},onEnter:(e,t)=>({...t,enteredAt:e.updateContext.gameState.time})},Zs=1,ff=150*.6,oI=150*.25,sI=150*.7,aI=150*.8,_m=300,lI=600,av=100,uI=250,cI=120,dI=2,Rm=400,fI=1e3,hI=150*.85,pI=100,gI=3,mI=96,vI=24,SI=600,lv=600,yI=1,AI=24,TI=1,II=.5,EI=2,hf=24,pf=12,wI=24,Pm=24,CI=1500,Ed=500,_I=400,RI=10,PI=-5,NI=1.5,DI=1.5,OI=1.2,MI=10,kI=150,FI=200,UI=100,LI=100,BI=.7,HI=300,bI=100,GI=120,Nm=400,uv=.15,cv=200,Zl=30*.75*1.2,xI=20,$I=.3,zI=.6,WI=.8,YI=1,jI=3,VI=5,XI=6,Dm=.5,KI=.4,ZI=.6,qI=.8,mu=10,qs=80,QI=3,Cs=5,Mr=150,dv=Mr*.8,JI=Mr*.2,kr=Mr*.95,Ji=30,fv=10,eE=10,tE=.5,It=30,Fr=It*.75,hv=50,nE=20,iE=qs*.8,rE=.7,oE=16,pv=40,sE=24,Bf=16,aE=72/3,Om=24,lE=1.25,uE=1.5,Hf=Mr*.6,bf=50,cE=1,dE=350,gv=qs*.65,fE=80,hE=50,pE=1,gE=128,mv=10,Mm=100,Gf=35,qn=It,vv=.5,vu=2.5,mE=5,xf=.5,$f=1.5,vE=.1,SE=.5,yE=1.5,AE=.25,TE=2.5,IE=45,EE=.05;function On(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Sv(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Pt(e,t){return{x:e.x*t,y:e.y*t}}function Po(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function nt(e){const t=Po(e);return t===0?{x:0,y:0}:Pt(e,1/t)}function wE(e,t){return Po(Sv(e,t))}function zf(e,t,r){return{x:e.x+(t.x-e.x)*r,y:e.y+(t.y-e.y)*r}}function Wf(e){if(e.length===0)return{x:0,y:0};const t=e.reduce((r,o)=>({x:r.x+o.x,y:r.y+o.y}),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}}function ze(e,t,r,o){let l=t.x-e.x,s=t.y-e.y;return Math.abs(l)>r/2&&(l=l-Math.sign(l)*r),Math.abs(s)>o/2&&(s=s-Math.sign(s)*o),{x:l,y:s}}function Ft(e,t,r){const o=ze(e,t,r.width,r.height);return nt(o)}function V(e,t,r,o){const l=ze(e,t,r,o);return Po(l)}function CE(e,t){return e.x*t.x+e.y*t.y}function _E(e,t){const r=CE(e,t),o=Po(e),l=Po(t);if(o===0||l===0)return 0;const s=Math.max(-1,Math.min(1,r/(o*l)));return Math.acos(s)}function RE(e,t,r){const o=Math.max(0,Math.min(1,r)),l={r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)},s={r:parseInt(t.substring(1,3),16),g:parseInt(t.substring(3,5),16),b:parseInt(t.substring(5,7),16)},u=Math.round(l.r+(s.r-l.r)*o),d=Math.round(l.g+(s.g-l.g)*o),f=Math.round(l.b+(s.b-l.b)*o),p=m=>("00"+m.toString(16)).slice(-2);return`#${p(u)}${p(d)}${p(f)}`}var gt=(e=>(e.Friendly="Friendly",e.Hostile="Hostile",e))(gt||{}),Rt=(e=>(e[e.None=0]="None",e[e.General=1]="General",e[e.Performance=2]="Performance",e[e.Ecosystem=3]="Ecosystem",e))(Rt||{});function km(e,t,r){return t.search.human.byRadius(e.position,r).filter(s=>{if(s.id===e.id||s.gender===e.gender||!s.isAdult||s.hunger>=kr||(s.procreationCooldown||0)>0||s.gender==="female"&&s.isPregnant)return!1;const u=s.id===e.motherId||s.id===e.fatherId,d=e.id===s.motherId||e.id===s.fatherId;return!u&&!d})}function mi(e){if(e.length===0)return;const t=e.filter(l=>l.gender==="male"),r=e.filter(l=>l.gender==="female"),o=(l,s)=>l.age!==s.age?s.age-l.age:l.id-s.id;if(t.sort(o),t.length>0)return t[0];if(r.sort(o),r.length>0)return r[0]}function Lt(e,t){const r=e,o=r.search.human.byProperty("motherId",t.id),l=r.search.human.byProperty("fatherId",t.id);return[...o,...l]}function yv(e,t,r){var l;if(e.id===t.id||e.motherId===t.id||e.fatherId===t.id||t.motherId===e.id||t.fatherId===e.id||e.motherId&&e.motherId===t.motherId||e.fatherId&&e.fatherId===t.fatherId||(l=e.partnerIds)!=null&&l.includes(t.id))return!0;if(e.motherId){const s=r.entities.entities[e.motherId];if(s&&(s.motherId===t.id||s.fatherId===t.id))return!0}if(e.fatherId){const s=r.entities.entities[e.fatherId];if(s&&(s.motherId===t.id||s.fatherId===t.id))return!0}if(t.motherId){const s=r.entities.entities[t.motherId];if(s&&(s.motherId===e.id||s.fatherId===e.id))return!0}if(t.fatherId){const s=r.entities.entities[t.fatherId];if(s&&(s.motherId===e.id||s.fatherId===e.id))return!0}return!1}function gf(e,t){var s,u,d,f;if(e.id===t.id||e.motherId===t.id||e.fatherId===t.id||t.motherId===e.id||t.fatherId===e.id||(s=e.partnerIds)!=null&&s.includes(t.id)||(u=t.partnerIds)!=null&&u.includes(e.id))return!0;if(e.fatherId===void 0&&e.motherId===void 0||t.fatherId===void 0&&t.motherId===void 0)return!1;const r=e.motherId===t.motherId||e.fatherId===t.fatherId,o=t.motherId===e.motherId||t.fatherId===e.fatherId,l=((d=e.ancestorIds)==null?void 0:d.some(p=>t.ancestorIds.includes(p)))||((f=t.ancestorIds)==null?void 0:f.some(p=>e.ancestorIds.includes(p)));return r||o||l}function PE(e,t){const r=[];if(e.motherId){const o=t.entities.entities[e.motherId];o&&r.push(o)}if(e.fatherId){const o=t.entities.entities[e.fatherId];o&&r.push(o)}return r}function NE(e,t){if(e.gender!=="female"||!e.partnerIds||e.partnerIds.length===0)return null;for(const r of e.partnerIds){const o=t.entities.entities[r];if(o&&o.gender==="male")return o}return null}function DE(e,t){var r;if(!e.isAdult&&e.fatherId){const o=t.entities.entities[e.fatherId];if(o&&o.type==="human")return o}if(e.isAdult&&e.fatherId){const o=t.entities.entities[e.fatherId];if(o&&o.type==="human"&&((r=mi(Lt(t,o)))==null?void 0:r.id)===e.id)return o}return e.isAdult&&e.gender==="female"&&e.partnerIds&&e.partnerIds.length>0?NE(e,t):null}function nu(e,t){var o;const r=new Set;if(e.motherId){const l=t.entities.entities[e.motherId];l&&r.add(l)}if(e.fatherId){const l=t.entities.entities[e.fatherId];l&&r.add(l)}return(o=e.partnerIds)==null||o.forEach(l=>{const s=t.entities.entities[l];s&&r.add(s)}),Lt(t,e).forEach(l=>r.add(l)),Array.from(r)}function Av(e,t){const r=new Map;function o(l){const s=Lt(t,l);for(const u of s)r.has(u.id)||(r.set(u.id,u),o(u))}return o(e),Array.from(r.values())}function Qs(e,t){return t.search.human.byProperty("leaderId",e)}function Tv(e,t){var u,d;const r=new Map,o=Object.values(e.entities.entities).filter(f=>f.type==="human");for(const f of o)f.leaderId&&(r.has(f.leaderId)||r.set(f.leaderId,{leaderId:f.leaderId,tribeBadge:f.tribeBadge||"?",members:[]}),(u=r.get(f.leaderId))==null||u.members.push(f));const l=t?(d=e.entities.entities[t])==null?void 0:d.diplomacy:void 0,s=Array.from(r.values()).map(f=>{const p=e.entities.entities[f.leaderId],m=f.members.filter(y=>y.isAdult).length,S=f.members.length-m;return{leaderId:f.leaderId,tribeBadge:f.tribeBadge,adultCount:m,childCount:S,isPlayerTribe:f.leaderId===t,leaderAge:(p==null?void 0:p.age)??0,leaderGender:(p==null?void 0:p.gender)??"male",diplomacyStatus:(l==null?void 0:l[f.leaderId??-1])??gt.Friendly}});return s.sort((f,p)=>f.isPlayerTribe?-1:p.isPlayerTribe?1:p.adultCount+p.childCount-(f.adultCount+f.childCount)),s}function kn(e,t){return e.leaderId?t.search.human.byProperty("leaderId",e.leaderId):[]}function De(e,t,r,o,l){const s=t,u=o,d="position"in e&&e.id?e:null,f=d?d.position:e,p=s.search[r].byRadius(f,u);let m=null,S=u;for(const y of p){if(y.id===(d==null?void 0:d.id)||l&&!l(y))continue;const w=V(f,y.position,t.mapDimensions.width,t.mapDimensions.height);w<S&&(S=w,m=y)}return m}function Iv(e,t,r,o){return t.search[r].byRadius(e,o)}function Fm(e,t,r,o){return Iv(e,t,r,o).length}function Et(e){const r=e.search.human.byProperty("isPlayer",!0);return r.length>0?r[0]:void 0}function OE(e,t){var u;const o=t.search.human.byProperty("activeAction","attacking");let l=null,s=1/0;for(const d of o){if(d.attackTargetId!==e)continue;const f=V(d.position,((u=t.entities.entities[e])==null?void 0:u.position)||{x:0,y:0},t.mapDimensions.width,t.mapDimensions.height);f<s&&(l=d,s=f)}return l}function ME(e){return Object.values(e.entities.entities).filter(t=>t.type==="human")}function kE(e,t,r){const o=Object.values(t.entities.entities).reverse();for(const l of o)if(wE(e,l.position)<l.radius)return l}function Yf(e,t,r,o){const l=Math.random()*Math.PI*2,s=Math.sqrt(Math.random())*t,u={x:Math.cos(l)*s,y:Math.sin(l)*s},d=On(e,u);return{x:(d.x%r+r)%r,y:(d.y%o+o)%o}}function Fn(e,t,r,o){const l=t,s={left:e.x-r,top:e.y-r,right:e.x+r,bottom:e.y+r},u=[...l.search.human.byRect(s),...l.search.berryBush.byRect(s),...l.search.corpse.byRect(s)];for(const d of u){if(o!==void 0&&d.id===o)continue;if(V(e,d.position,t.mapDimensions.width,t.mapDimensions.height)<r+d.radius)return!0}return!1}function Ev(e,t,r,o,l){const s=t.mapDimensions.width,u=t.mapDimensions.height;if(!Fn(e,t,o,l))return e;const d=o;for(let f=d;f<=r;f+=d){const p=Math.ceil(2*Math.PI*f/d);for(let m=0;m<p;m++){const S=m/p*2*Math.PI,y={x:Math.cos(S)*f,y:Math.sin(S)*f},w=On(e,y),E={x:(w.x%s+s)%s,y:(w.y%u+u)%u};if(!Fn(E,t,o,l))return E}}return null}function er(e,t){const r=Qs(e,t);if(r.length===0){const l=t.entities.entities[e];return l?l.position:{x:0,y:0}}const o=r.map(l=>l.position);return Wf(o)}function Um(e,t){const o=[...nu(e,t),e].map(l=>l.position);return Wf(o)}function FE(e,t,r){const o=r.mapDimensions.width,l=r.mapDimensions.height;let s=e.x-t.position.x,u=e.y-t.position.y;return Math.abs(s)>o/2&&(s-=Math.sign(s)*o),Math.abs(u)>l/2&&(u-=Math.sign(u)*l),Math.abs(s)<=t.width/2&&Math.abs(u)<=t.height/2}function UE(e,t,r){return t.search.human.byRadius(e.position,r).filter(l=>{var s;return l.activeAction==="procreating"&&l.gender===e.gender&&typeof l.target=="number"&&((s=e.partnerIds)==null?void 0:s.includes(l.target))})[0]}function LE(e,t,r){if(!e.leaderId)return;const o=t,l=o.search.berryBush.byRadius(e.position,r).filter(s=>s.ownerId===e.id);for(const s of l)if(s.claimedUntil&&t.time<s.claimedUntil){const u=o.search.human.byRadius(s.position,It);for(const d of u)if(!gf(d,e)&&d.activeAction==="gathering"&&d.target===s.id)return d}}function BE(e,t,r){const o=nu(e,t),l=t;for(const s of o){if(V(e.position,s.position,t.mapDimensions.width,t.mapDimensions.height)>r)continue;const d=l.search.human.byProperty("attackTargetId",s.id);for(const f of d)if(f.leaderId!==e.leaderId)return{familyMember:s,aggressor:f}}}function HE(e,t){const o=t.search.human.byRadius(e.position,HI);let l,s=1/0;for(const u of o){if(u.id===e.id||u.hitpoints<=0||u.hitpoints/u.maxHitpoints>BI||yv(e,u,t))continue;const d=V(e.position,u.position,t.mapDimensions.width,t.mapDimensions.height);d<s&&(s=d,l=u)}return l}function bE(e,t){const r=De(e,t,"berryBush",Cm,l=>l.ownerId===e.id);return r?Ev(r.position,t,Cm,Qi,r.id):null}function jf(e,t,r){return t.search.human.byRadius(e.position,r).filter(l=>Lo(e,l,t))}function GE(e,t,r){const o=r.search.human.byProperty("leaderId",e);let l=0;for(const s of o)s.attackTargetId===t&&l++;return l}function Lm(e,t,r,o){const l=r.search.berryBush.byRadius(e,t),s=r.search.human.byRadius(e,t).filter(f=>f.leaderId!==o);let u=l.length*RI;u+=s.length*PI;let d;if(s.length>0){const f={};for(const m of s)m.leaderId&&(f[m.leaderId]=(f[m.leaderId]||0)+1);let p=0;for(const m in f)f[m]>p&&(p=f[m],d=parseInt(m,10))}return{score:u,occupyingTribeId:d}}function iu(e){return e.filter(t=>t.isAdult).reduce((t,r)=>{let o=r.hitpoints;return o+=(r.maxAge-r.age)*.5,o+=r.food.length*2,t+o},0)}function xE(e,t){if(e.id!==e.leaderId)return null;const r=t,o=er(e.id,t),{score:l}=Lm(o,Ed/2,r,e.id);let s=null,u=l;const d=_I,f=CI;for(let p=e.position.x-f;p<e.position.x+f;p+=d)for(let m=e.position.y-f;m<e.position.y+f;m+=d){const S={x:(p%t.mapDimensions.width+t.mapDimensions.width)%t.mapDimensions.width,y:(m%t.mapDimensions.height+t.mapDimensions.height)%t.mapDimensions.height};if(V(o,S,t.mapDimensions.width,t.mapDimensions.height)<Ed*2)continue;const{score:w}=Lm(S,Ed/2,r,e.id);w>u*NI&&(u=w,s=S)}return s}const wt=30,Uo=wt*.6,Vf="#4CAF50",wv="#FF5722",Cv="#9C27B0",$E="#2196F3",_v="#FFC107",zE="#FFD700",Rv="#DC143C",Xf="#FFFFFF",Kf=[5,5],Su=5,No=15,WE=20,YE=16,jE=10,VE=16,XE=16,Bm=["","","","","","","","","",""],mf=8,KE="#FFFFFF",mn=18,Ze=15,ZE="rgba(0, 0, 0, 0.7)",qE=4,Bi=150,nn=15,ai=10,Yi="#555",QE="#f44336",JE="#4CAF50",ew="#2196F3",tw="#FFC107",wl=16,mr=32,Cl=28,nw=10,iw=8,rw=8,ow=8,pn=28,_l=40,sw="rgba(255, 215, 0, 0.7)",aw="rgba(0, 0, 0, 0.3)",Yn=10,Hm=8,wd=11,Hi=20,Cd=40,bm=5,lw=10,uw="#FFA500",cw="#808080",di=120,Pv=30,dw=20,zi="#2d3748",vn="#ffffff",Rl="#4a5568",Nv=5,Zf="#bdc9f792",Dv="#272c36ff",Ov="#a0aec0",ru=300,Mv="rgba(255, 255, 255, 0.5)",fw="rgba(0, 0, 0, 0.8)",hw="#FFFFFF",Gm=14,xm=8,$m=-15,kv="#FFD700",Fv=5,pw=60,gw=-50,mw=10,_d=12,zm=10,vw="rgba(0, 0, 0, 0.5)",Sw="#4CAF50",yw="#F44336",Aw="#FFC107",Tw="rgba(255, 255, 255, 0.2)",Wm="#FFFFFF",Iw="#FF6B6B",Ew=5,Uv=30,_s=50,Pl=8,Ym=10,ww="rgba(0, 0, 0, 0.5)",Cw="#FFFFFF",_w=33,Rw=400,Pw=20,Nw=10,Dw="rgba(0, 0, 0, 0.7)",Ow="#FFFFFF",Rd=20,jm=16,Mw=.5,Vm=5,Lv="#FFD700",kw=40,qf=4,Bv=3,Fw=5,Hv=20,bv=5,Uw="#FFFFFF",Lw="#FF6B6B",rn=80,vr=10,Nl=300,Sr=15,Bw=8,Hw="rgba(0, 0, 0, 0.8)",bw="#FFFFFF",Pd=14,Xm=10,jn=20,Gw="#FF6B6B",xw="#4CAF50",Km="#FFD700",$w="rgba(255, 255, 0, 0.3)",zw=2,Ww=500,Yw=120,jw=45,Vw="#FFD700",Xw=3,Kw=4;let Nd=0;function vf(){const e=Bm[Nd];return Nd=(Nd+1)%Bm.length,e}const Zm=40,Zw=.3,qw=24,qm=500,Do=10,Gv=250,Js=12,xv=10;var se=(e=>(e.Gather="Gather",e.Eat="Eat",e.Procreate="Procreate",e.Attack="Attack",e.Plant="Plant",e.CallToAttack="CallToAttack",e.TribeSplit="TribeSplit",e.FollowMe="FollowMe",e.FeedChild="FeedChild",e.HuntPrey="HuntPrey",e.DefendAgainstPredator="DefendAgainstPredator",e.Build="Build",e.Removal="Removal",e.Deposit="Deposit",e.Retrieve="Retrieve",e.AutopilotMove="AutopilotMove",e.AutopilotGather="AutopilotGather",e.AutopilotAttack="AutopilotAttack",e.AutopilotProcreate="AutopilotProcreate",e.AutopilotPlant="AutopilotPlant",e.AutopilotFeedChild="AutopilotFeedChild",e.AutopilotFollowMe="AutopilotFollowMe",e.AutopilotDeposit="AutopilotDeposit",e.AutopilotRetrieve="AutopilotRetrieve",e))(se||{});const yu={Gather:"",Eat:"",Procreate:"",Attack:"",Plant:"",CallToAttack:"",TribeSplit:"",FollowMe:"",FeedChild:"",HuntPrey:"",DefendAgainstPredator:"",Build:"",Removal:"",Deposit:"",Retrieve:"",AutopilotMove:"",AutopilotGather:"",AutopilotAttack:"",AutopilotProcreate:"",AutopilotPlant:"",AutopilotFeedChild:"",AutopilotFollowMe:"",AutopilotDeposit:"",AutopilotRetrieve:""},$v={Gather:"Gather",Eat:"Eat",Procreate:"Procreate",Attack:"Attack",Plant:"Plant",CallToAttack:"Call to Attack",TribeSplit:"Split Tribe",FollowMe:"Follow Me",FeedChild:"Feed Child",HuntPrey:"Hunt Prey",DefendAgainstPredator:"Defend",Build:"Build",Removal:"Remove",Deposit:"Deposit",Retrieve:"Retrieve",AutopilotMove:"Walk",AutopilotGather:"Gather",AutopilotAttack:"Attack",AutopilotProcreate:"Procreate",AutopilotPlant:"Plant",AutopilotFeedChild:"Feed",AutopilotFollowMe:"Follow",AutopilotDeposit:"Deposit",AutopilotRetrieve:"Retrieve"};var ho=(e=>(e.Time="Time",e.Hunger="Hunger",e.Hitpoints="Hitpoints",e.Food="Food",e.Autopilot="Autopilot",e.Muted="Muted",e.Family="Family",e.Tribes="Tribes",e))(ho||{});const Rs={Time:"",Hunger:"",Hitpoints:"",Food:"",Autopilot:"",Muted:"",Family:"",Tribes:""};var pe=(e=>(e.ToggleMute="ToggleMute",e.TogglePause="TogglePause",e.FastForward="FastForward",e.DismissTutorial="DismissTutorial",e.ReturnToIntro="ReturnToIntro",e.ConfirmExitYes="ConfirmExitYes",e.ConfirmExitNo="ConfirmExitNo",e.CommandEat="CommandEat",e.CommandPlant="CommandPlant",e.CommandCallToAttack="CommandCallToAttack",e.CommandFollowMe="CommandFollowMe",e.CommandGather="CommandGather",e.CommandTribeSplit="CommandTribeSplit",e.CommandBuild="CommandBuild",e.SelectStorageSpot="SelectStorageSpot",e.SelectPlantingZone="SelectPlantingZone",e.SelectRemovalTool="SelectRemovalTool",e.ToggleProcreationBehavior="ToggleProcreationBehavior",e.ToggleAttackBehavior="ToggleAttackBehavior",e.ToggleFeedChildBehavior="ToggleFeedChildBehavior",e.TogglePlantingBehavior="TogglePlantingBehavior",e.ToggleGatheringBehavior="ToggleGatheringBehavior",e.ToggleAutopilotFollowLeaderBehavior="ToggleAutopilotFollowLeaderBehavior",e.ToggleDiplomacy="ToggleDiplomacy",e))(pe||{});const Qw=12,Jw=24,eC=150*.9,tC=24;var ea=(e=>(e.Hello="HELLO",e.NewTribeFormed="NEW_TRIBE_FORMED",e.NoHeir="NO_HEIR",e.ChildrenStarving="CHILDREN_STARVING",e))(ea||{});let nC=0;function iC(){return`notification-${Date.now()}-${nC++}`}function Sf(e,t){if(t.identifier){const o=e.notifications.find(l=>l.identifier===t.identifier);if(o){if(o.dismissedUntil&&e.time<o.dismissedUntil)return;o.message=t.message,o.timestamp=e.time,o.creationTime=Date.now(),o.duration=t.duration,o.targetEntityIds=t.targetEntityIds,o.highlightedEntityIds=t.highlightedEntityIds,o.targetPosition=t.targetPosition,o.targetArea=t.targetArea,o.targetRadius=t.targetRadius,o.isDismissed=!1,o.dismissedUntil=void 0;return}}const r={...t,id:iC(),timestamp:e.time,creationTime:Date.now(),isDismissed:!1};e.notifications.push(r)}function rC(e,t){const r=e.notifications.find(o=>o.id===t);r&&(r.isDismissed=!0,r.identifier&&(r.dismissedUntil=e.time+tC))}function oC(e){const t=e.time;e.notifications=e.notifications.filter(r=>r.duration===0?!0:!(t-r.timestamp>r.duration))}function sC(e){for(const r of Object.values(e.entities.entities))r.isHighlighted=!1;const t=e.notifications.filter(r=>!r.isDismissed);for(const r of t)if(r.highlightedEntityIds)for(const o of r.highlightedEntityIds){const l=e.entities.entities[o];l&&(l.isHighlighted=!0)}}const Qm=600,aC=1.5,zv=.1,Dl=""+new URL("attack-D4MA8VWK.mp3",import.meta.url).href,Dd=""+new URL("gather-CU75596W.mp3",import.meta.url).href,lC=""+new URL("eat-DCjHq2QD.mp3",import.meta.url).href,Od=""+new URL("procreate-CfE4r5Cp.mp3",import.meta.url).href,uC=""+new URL("birth-Cbd67GHT.mp3",import.meta.url).href,cC=""+new URL("child-fed-DzEPuMid.mp3",import.meta.url).href,dC=""+new URL("human-death-B6HFLXES.mp3",import.meta.url).href,fC=""+new URL("game-over-C5dqkyER.mp3",import.meta.url).href,hC=""+new URL("button-click-DomLUeaU.mp3",import.meta.url).href,pC=""+new URL("soundtrack-1-BdlYUGye.mp3",import.meta.url).href;var fe=(e=>(e[e.Attack=0]="Attack",e[e.Gather=1]="Gather",e[e.Eat=2]="Eat",e[e.Procreate=3]="Procreate",e[e.Birth=4]="Birth",e[e.ChildFed=5]="ChildFed",e[e.HumanDeath=6]="HumanDeath",e[e.Seize=7]="Seize",e[e.CallToAttack=8]="CallToAttack",e[e.TribeSplit=9]="TribeSplit",e[e.CallToFollow=10]="CallToFollow",e[e.StorageDeposit=11]="StorageDeposit",e[e.StorageRetrieve=12]="StorageRetrieve",e[e.StorageSteal=13]="StorageSteal",e[e.GameOver=14]="GameOver",e[e.ButtonClick=15]="ButtonClick",e[e.SoundTrack1=16]="SoundTrack1",e))(fe||{});const gC=new Map([[0,Dl],[1,Dd],[2,lC],[3,Od],[4,uC],[5,cC],[6,dC],[14,fC],[15,hC],[7,Dl],[8,Dl],[9,Od],[10,Od],[11,Dd],[12,Dd],[13,Dl],[16,pC]]);let Ps,ta;function mC(){if(!(typeof window>"u"))return ta}function Qf(){if(!(typeof window>"u"))return!Ps&&typeof window.AudioContext=="function"&&(Ps=new window.AudioContext,ta=Ps.createGain(),ta.connect(Ps.destination),Gs(.1,!1)),Ps}function Gs(e,t){ta&&(ta.gain.value=t?0:e/10)}const Wv=new Map;let Ol=!1,Jm=!1;async function vC(){if(Jm||Ol)return;const e=Qf();if(!e){console.error("AudioContext not supported. Cannot load sounds.");return}e.state==="suspended"&&e.resume(),Ol=!0,console.log("Starting sound loading...");const t=[];gC.forEach((r,o)=>{const l=fetch(r).then(s=>{if(!s.ok)throw new Error(`Failed to fetch sound: ${r}`);return s.arrayBuffer()}).then(s=>e.decodeAudioData(s)).then(s=>{Wv.set(o,s)}).catch(s=>{console.error(`Error loading sound ${fe[o]} from ${r}:`,s)});t.push(l)});try{await Promise.all(t),Jm=!0,Ol=!1,console.log("All sounds loaded successfully.")}catch(r){Ol=!1,console.error("An error occurred while loading sounds:",r)}}const xs=new Map;function Jf(e,t){const r=Qf(),o=mC();if(!r||!o||o.gain.value===0&&(t==null?void 0:t.trackId)===void 0)return;r.state==="suspended"&&r.resume();const l=Wv.get(e);if(!l){console.warn(`Sound buffer not found for type: ${fe[e]}`);return}if(t!=null&&t.trackId&&xs.has(t.trackId))return;const s=r.createBufferSource();s.buffer=l,s.loop=(t==null?void 0:t.loop)??!1;const u=r.createGain(),d=r.createStereoPanner();let f=u;if(t!=null&&t.position&&(t!=null&&t.listenerPosition)&&(t!=null&&t.worldDimensions)){const p=ze(t.listenerPosition,t.position,t.worldDimensions.width,t.worldDimensions.height),m=V(t.listenerPosition,t.position,t.worldDimensions.width,t.worldDimensions.height);if(m>Qm)return;const S=1-Math.pow(m/Qm,aC);u.gain.value=Math.max(0,S);const y=Math.sin(p.x/m*(Math.PI/2));d.pan.value=isNaN(y)?0:y,u.connect(d),f=d}else{const p=e===fe.GameOver?.4:e===fe.SoundTrack1?1:.2;u.gain.value=p}s.connect(f),f.connect(o),s.start(0),t!=null&&t.trackId&&(xs.set(t.trackId,{sourceNode:s,gainNode:u}),s.onended=()=>{xs.delete(t.trackId)})}function Md(e,t=1){const r=xs.get(e),o=Qf();if(r&&o){const{sourceNode:l,gainNode:s}=r,u=o.currentTime;s.gain.setValueAtTime(s.gain.value,u),s.gain.linearRampToValueAtTime(0,u+t),l.stop(u+t),l.onended=null,xs.delete(e)}}function Ie(e,t,r){const o=Et(e.gameState);o&&Jf(t,{position:r,listenerPosition:o.position,worldDimensions:e.gameState.mapDimensions,masterVolume:e.gameState.masterVolume,isMuted:e.gameState.isMuted})}function SC(e,t,r){const o=r.mapDimensions.width,l=r.mapDimensions.height,s=t.radius*2;for(let u=qm;u<o/2;u+=50)for(let d=0;d<10;d++){const f=Yf(e,u,o,l);if(!(V(e,f,o,l)<qm)&&!Fn(f,r,s,t.id))return f}return null}function eh(e,t){if(!e.isAdult||e.gender!=="male"||e.leaderId===e.id||!e.leaderId)return{canSplit:!1};if(!e.leaderId)return{canSplit:!1};const r=t.entities.entities[e.leaderId];if(!r||r.type!=="human")return{canSplit:!1};const o=mi(Lt(t,r));if(o&&o.id===e.id)return{canSplit:!1};const l=Qs(e.leaderId,t);if(l.length<Zm)return{canSplit:!1};const u=Av(e,t).length+1,d=Math.min(l.length*Zw,Zm);return{canSplit:u>=d,progress:u/d}}function th(e,t){if(!eh(e,t).canSplit)return;const r=e.leaderId?t.entities.entities[e.leaderId]:void 0,o=vf(),l=Av(e,t);e.leaderId=e.id,e.tribeBadge=o,e.diplomacy={},r&&r.diplomacy&&(r.diplomacy[e.id]=gt.Hostile);for(const u of l)u.leaderId=e.id,u.tribeBadge=o;Sf(t,{type:ea.NewTribeFormed,message:`A new tribe has formed! ${o}`,duration:Jw,targetEntityIds:[e.id],highlightedEntityIds:[e.id,...l.map(u=>u.id)]}),Ie({gameState:t},fe.TribeSplit,e.position)}const yC=20,yn=30,AC=.5,TC=.3,IC=2,yf=50;function nh(e,t){const r=[];if(t.food.length>0&&t.hunger>Ji&&r.push({type:se.Eat,action:"eating",key:"f"}),t.food.length<t.maxFood){const s=De(t,e,"berryBush",It,f=>f.food.length>0),u=De(t,e,"corpse",It,f=>f.food.length>0);let d=null;s&&u?d=V(t.position,s.position,e.mapDimensions.width,e.mapDimensions.height)<=V(t.position,u.position,e.mapDimensions.width,e.mapDimensions.height)?s:u:d=s||u,d&&r.push({type:se.Gather,action:"gathering",key:"e",targetEntity:d})}const o=De(t,e,"human",It,s=>Ur(t,s,e));if(o&&r.push({type:se.Procreate,action:"procreating",key:"r",targetEntity:o}),t.food.length>0&&t.isAdult){const s=De(t,e,"human",It,u=>{const d=u;return!d.isAdult&&(d.motherId===t.id||d.fatherId===t.id)&&d.hunger>=Ji});s&&r.push({type:se.FeedChild,action:"feeding",key:"h",targetEntity:s})}const l=De(t,e,"human",qn,s=>Lo(t,s,e))??De(t,e,"predator",qn)??De(t,e,"prey",qn);if(l&&r.push({type:se.Attack,action:"attacking",key:"q",targetEntity:l}),t.food.filter(s=>s.type===Mn.Berry).length>=Or&&r.push({type:se.Plant,action:"planting",key:"b"}),t.food.length>0&&t.isAdult){const s=De(t,e,"building",yn,u=>{const d=u;return d.buildingType==="storageSpot"&&d.ownerId===t.leaderId&&d.isConstructed&&d.storedFood!==void 0&&d.storageCapacity!==void 0&&d.storedFood.length<d.storageCapacity});s&&r.push({type:se.Deposit,action:"idle",key:"x",targetEntity:s})}if(t.food.length<t.maxFood&&t.isAdult){const s=De(t,e,"building",yn,u=>{const d=u;return d.buildingType==="storageSpot"&&d.ownerId===t.leaderId&&d.isConstructed&&d.storedFood!==void 0&&d.storedFood.length>0});s&&r.push({type:se.Retrieve,action:"idle",key:"z",targetEntity:s})}return t.leaderId===t.id&&!t.isCallingToAttack&&jf(t,e,Gv).length>0&&r.push({type:se.CallToAttack,action:"idle",key:"v"}),eh(t,e).canSplit&&r.push({type:se.TribeSplit,action:"idle",key:"k"}),t.leaderId===t.id&&!t.isCallingToFollow&&r.push({type:se.FollowMe,action:"idle",key:"c"}),r}const Lo=(e,t,r)=>{var o,l,s,u;if(e.id===t.id)return!1;if(e.leaderId&&!t.leaderId)return!0;if(e.leaderId===t.leaderId)return!1;if(e.leaderId&&t.leaderId){const d=(l=(o=r.entities.entities[e.leaderId])==null?void 0:o.diplomacy)==null?void 0:l[t.leaderId],f=(u=(s=r.entities.entities[t.leaderId])==null?void 0:s.diplomacy)==null?void 0:u[e.leaderId];return d===gt.Hostile||f===gt.Hostile}return!1},Ur=(e,t,r)=>{if(e.id===t.id||e.gender===t.gender||!e.isAdult||!t.isAdult||e.hunger>=kr||t.hunger>=kr||(e.procreationCooldown||0)>0||(t.procreationCooldown||0)>0||Lo(e,t,r))return!1;const o=e.gender==="female"?e:t;return!(o.isPregnant||o.age>pv)},na={StorageSpot:"storageSpot",PlantingZone:"plantingZone"},ua={[na.StorageSpot]:{name:"Storage Spot",description:"A designated area for storing excess food.",icon:"",dimensions:{width:40,height:40},constructionTimeHours:.1,destructionTimeHours:.1,cost:{}},[na.PlantingZone]:{name:"Planting Zone",description:"An area marked for agricultural use.",icon:"",dimensions:{width:60,height:60},constructionTimeHours:.1,destructionTimeHours:.1,cost:{}}},EC=.5,wC="#FFA500",CC="#FF4500",e0=4,_C=10;function Yv(e){return ua[e].dimensions}function RC(e){return ua[e].constructionTimeHours}function PC(e){return ua[e].destructionTimeHours}function jv(e,t,r,o){if(r===void 0)return!1;const l=Yv(t),s=Math.sqrt(l.width*l.width+l.height*l.height)/2;if(Fn(e,o,s*.8))return!1;const d=o.search.building.byRadius(e,s*2);for(const f of d){const p=V(e,f.position,o.mapDimensions.width,o.mapDimensions.height),m=(Math.max(l.width,l.height)+Math.max(f.width,f.height))/2;if(p<m*.9)return!1}return!0}function NC(e,t,r,o){return iR(o.entities,e,t,r)}function DC(e,t){const r=t.entities.entities[e];r&&r.type==="building"&&!r.isBeingDestroyed&&(r.isBeingDestroyed=!0,r.destructionProgress=0)}function OC(e,t){const l=t.search.building.byRadius(e,100);for(const s of l){let u=e.x-s.position.x,d=e.y-s.position.y;const f=t.mapDimensions.width,p=t.mapDimensions.height;if(Math.abs(u)>f/2&&(u-=Math.sign(u)*f),Math.abs(d)>p/2&&(d-=Math.sign(d)*p),Math.abs(u)<=s.width/2&&Math.abs(d)<=s.height/2)return s}}const MC=500,kC=500;function FC(e,t){if(!e.leaderId)return 0;const r=UC(e.leaderId,t),o=LC(e.leaderId,t);return o===0?0:Math.min(1,r/o)}function UC(e,t){const r=kn({leaderId:e},t),o=Au(e,t),l=r.reduce((u,d)=>u+d.food.length,0),s=o.reduce((u,d)=>{var f;return u+(((f=d.storedFood)==null?void 0:f.length)||0)},0);return l+s}function LC(e,t){const r=kn({leaderId:e},t),o=Au(e,t),l=r.reduce((u,d)=>u+d.maxFood,0),s=o.reduce((u,d)=>u+(d.storageCapacity||0),0);return l+s}function BC(e,t){const r=Au(e,t);if(r.length===0)return 0;const o=r.reduce((s,u)=>{var d;return s+(((d=u.storedFood)==null?void 0:d.length)||0)},0),l=r.reduce((s,u)=>s+(u.storageCapacity||0),0);return l===0?0:Math.min(1,o/l)}function HC(e,t){const r=kn({leaderId:e},t);return r.length===0?0:bC(e,t)/r.length}function bC(e,t){const r=t,o=er(e,t);return r.search.berryBush.byRadius(o,MC).filter(u=>{const d=u.stateMachine&&u.stateMachine[0]==="bushDying",f=u.food.length>0;return!d&&f}).length}function ih(e,t){return e.leaderId?t.search.building.all().filter(l=>{if(l.buildingType!==na.PlantingZone||!l.isConstructed)return!1;if(l.ownerId){const s=t.entities.entities[l.ownerId];return s&&s.leaderId===e.leaderId}return!1}):[]}function Vv(e){const t=Qi*2,r=Math.floor(e.width/t),o=Math.floor(e.height/t);return r*o}function Xv(e,t){const r=t,o=Math.max(e.width,e.height);return r.search.berryBush.byRadius(e.position,o).filter(u=>{const d=Math.abs(u.position.x-e.position.x),f=Math.abs(u.position.y-e.position.y);return d<=e.width/2&&f<=e.height/2}).length}function GC(e,t){const r=ih(e,t),o=kn(e,t);return r.map(l=>{const s=Vv(l),u=Xv(l,t),d=o.filter(f=>{if(f.activeAction!=="planting")return!1;if(typeof f.target=="object"&&"x"in f.target){const p=f.target,m=V(p,l.position,t.mapDimensions.width,t.mapDimensions.height),S=Math.sqrt(l.width*l.width+l.height*l.height)/2;return m<=S}return!1}).length;return{zone:l,capacity:s,currentBushes:u,assignedPlanters:d}})}function xC(e,t){const r=GC(e,t);if(r.length===0)return null;const o=r.filter(l=>l.currentBushes<l.capacity);return o.length===0?null:(o.sort((l,s)=>{const u=l.currentBushes/l.capacity,d=s.currentBushes/s.capacity;return Math.abs(u-d)>.01?u-d:l.assignedPlanters-s.assignedPlanters}),o[0].zone)}function $C(e,t){if(!e.leaderId)return[];const r=Au(e.leaderId,t),o=kn(e,t);return r.map(l=>{var p;const s=l.storageCapacity||0,u=((p=l.storedFood)==null?void 0:p.length)||0,d=o.filter(m=>{if(m.activeAction!=="depositing")return!1;if(typeof m.target=="object"&&"x"in m.target){const S=m.target;return V(S,l.position,t.mapDimensions.width,t.mapDimensions.height)<=50}return!1}).length,f=V(e.position,l.position,t.mapDimensions.width,t.mapDimensions.height);return{storage:l,capacity:s,currentFood:u,assignedDepositors:d,distance:f}})}function t0(e,t){const r=$C(e,t);if(r.length===0)return null;const o=r.filter(l=>{const s=l.currentFood<l.capacity,u=l.distance<=kC;return s&&u});return o.length===0?null:(o.sort((l,s)=>{const u=l.currentFood/l.capacity,d=s.currentFood/s.capacity;return Math.abs(u-d)>.1?u-d:l.assignedDepositors!==s.assignedDepositors?l.assignedDepositors-s.assignedDepositors:l.distance-s.distance}),o[0].storage)}function Kv(e,t,r){return kn({leaderId:e},t).filter(l=>l.activeAction===r).length}function Au(e,t){return t.search.building.all().filter(l=>{if(l.buildingType!==na.StorageSpot||!l.isConstructed)return!1;if(l.ownerId){const s=t.entities.entities[l.ownerId];return s&&s.leaderId===e}return!1})}function zC(e,t){const r=ih(e,t);if(r.length===0)return null;const o=t.mapDimensions.width,l=t.mapDimensions.height;for(const s of r){const u=Vv(s);if(Xv(s,t)>=u)continue;const f=20;for(let p=0;p<f;p++){const m=s.position.x+(Math.random()-.5)*s.width,S=s.position.y+(Math.random()-.5)*s.height,y={x:(m%o+o)%o,y:(S%l+l)%l};if(!Fn(y,t,Qi))return y}}return null}function WC(e,t,r){return ih(t,r).some(s=>FE(e,s,r))?!Fn(e,r,Qi):!1}const YC={id:Kl,update:(e,t)=>{const{entity:r,updateContext:o}=t,{gameState:l}=o,s=o.deltaTime*(At/Tt);if(r.age+=s,r.age>=r.lifespan)return{nextState:Ks,data:{...e,enteredAt:l.time,previousState:Kl}};const u=Yf(r.position,r.spreadRadius,l.mapDimensions.width,l.mapDimensions.height);return Fn(u,l,15)||fa(l.entities,u,l.time),{nextState:Tr,data:{...e,enteredAt:l.time,previousState:Kl}}},onEnter:(e,t)=>({...t,enteredAt:e.updateContext.gameState.time})},jC={id:Ks,update:e=>({nextState:Ks,data:e}),onEnter:(e,t)=>(bo(e.updateContext.gameState.entities,e.entity.id),{...t,enteredAt:e.updateContext.gameState.time})},VC=[iI,rI,YC,jC],ut="humanIdle",Ar="humanMoving",Us="humanEating",ca="humanGathering",$s="humanDepositing",zs="humanRetrieving",ia="humanProcreating",tr="humanAttacking",ql="humanPlanting",XC={id:ut,update:(e,t)=>{const{entity:r,updateContext:o}=t;return r.activeAction==="attacking"&&r.attackTargetId?{nextState:tr,data:{...e,enteredAt:o.gameState.time,previousState:ut,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:(r.hunger>=dv?(r.debuffs=r.debuffs.filter(l=>l.type!=="slow"),r.debuffs.push({type:"slow",startTime:o.gameState.time,duration:.1})):r.debuffs=r.debuffs.filter(l=>l.type!=="slow"),r.activeAction==="moving"?{nextState:Ar,data:{...e,enteredAt:o.gameState.time,previousState:ut,target:r.target}}:r.activeAction==="gathering"?{nextState:ca,data:{...e,enteredAt:o.gameState.time,previousState:ut,target:r.target}}:r.activeAction==="eating"?{nextState:Us,data:{...e,enteredAt:o.gameState.time,previousState:ut}}:r.activeAction==="planting"&&r.target?{nextState:ql,data:{...e,enteredAt:o.gameState.time,previousState:ut,plantingSpot:r.target}}:r.activeAction==="depositing"?{nextState:$s,data:{...e,enteredAt:o.gameState.time,previousState:ut}}:r.activeAction==="retrieving"?{nextState:zs,data:{...e,enteredAt:o.gameState.time,previousState:ut}}:{nextState:ut,data:e})},onEnter:(e,t)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...t,enteredAt:e.updateContext.gameState.time})};function Zv(e){let t=eE;return e.hunger>=dv&&(t*=tE),e.age>=iE&&(t*=rE),e.movementSlowdown&&(t*=e.movementSlowdown.modifier),t}const kd=7.5;class KC{constructor(){Me(this,"id",Ar)}update(t,r){var f;const{entity:o,updateContext:l}=r;if(o.activeAction==="attacking"&&o.attackTargetId)return{nextState:tr,data:{...t,enteredAt:l.gameState.time,previousState:Ar,attackTargetId:o.attackTargetId,attackStartTime:l.gameState.time}};if(o.activeAction!=="moving")return{nextState:ut,data:{...t,enteredAt:l.gameState.time,previousState:Ar}};let s;if(typeof o.target=="object"?s=o.target:typeof o.target=="number"&&(s=(f=r.updateContext.gameState.entities.entities[o.target])==null?void 0:f.position),!s&&(o.direction.x!==0||o.direction.y!==0)&&(s={x:o.position.x+o.direction.x*kd*2,y:o.position.y+o.direction.y*kd*2}),!s)return{nextState:ut,data:{...t,enteredAt:l.gameState.time,previousState:Ar}};const u=ze(o.position,s,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=nt(u),o.acceleration=Zv(o),V(o.position,s,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height)<kd?{nextState:ut,data:{...t,enteredAt:l.gameState.time,previousState:Ar}}:{nextState:Ar,data:t}}onExit(t){const{entity:r}=t;r.acceleration=0}}const ZC=new KC,qC={id:Us,update:(e,t)=>{const{entity:r,updateContext:o}=t;return r.activeAction!=="eating"?{nextState:ut,data:{...e,enteredAt:o.gameState.time,previousState:Us}}:(r.food.length>0&&(!r.eatingCooldownTime||o.gameState.time>=r.eatingCooldownTime)&&r.hunger>Ji&&(r.hunger=Math.max(0,r.hunger-Ji),r.food.pop(),r.eatingCooldownTime=o.gameState.time+1,Ie(o,fe.Eat,r.position),(!r.lastEatingEffectTime||o.gameState.time-r.lastEatingEffectTime>2)&&(Oe(o.gameState,ue.Eating,r.position,be,r.id),r.lastEatingEffectTime=o.gameState.time)),r.hunger<=0||r.food.length<=0?{nextState:ut,data:{...e,enteredAt:o.gameState.time,previousState:Us}}:{nextState:Us,data:e})},onEnter:(e,t)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...t,enteredAt:e.updateContext.gameState.time})};class QC{constructor(){Me(this,"id",ca)}update(t,r){return r.entity.activeAction!=="gathering"?{nextState:"humanIdle",data:{...t,enteredAt:r.updateContext.gameState.time,previousState:this.id}}:{nextState:this.id,data:t}}}const JC=new QC,e_={id:$s,update:(e,t)=>{const{entity:r}=t;return r.activeAction!=="depositing"?{nextState:ut,data:{...e,enteredAt:t.updateContext.gameState.time,previousState:$s}}:{nextState:$s,data:e}},onEnter:(e,t)=>{const{entity:r}=e;return r.activeAction="depositing",t},onExit:e=>{const{entity:t}=e;t.activeAction==="depositing"&&(t.activeAction="idle")}},t_={id:zs,update:(e,t)=>{const{entity:r}=t;return r.activeAction!=="retrieving"?{nextState:ut,data:{...e,enteredAt:t.updateContext.gameState.time,previousState:zs}}:{nextState:zs,data:e}},onEnter:(e,t)=>{const{entity:r}=e;return r.activeAction="retrieving",t},onExit:e=>{const{entity:t}=e;t.activeAction==="retrieving"&&(t.activeAction="idle")}},n_=(e,t)=>(t.procreationEndTime=e.updateContext.gameState.time+(t.duration||2),t),i_=(e,t)=>{const{entity:r,updateContext:o}=t,{gameState:l}=o;if(l.time<(e.procreationEndTime||0))return{nextState:ia,data:e};const s=l.entities.entities[e.partnerId];if(s&&s.type==="human"&&!s.isPregnant&&r.hunger<kr&&s.hunger<kr&&!r.procreationCooldown&&!s.procreationCooldown){const u=r.gender==="female"?r:s.gender==="female"?s:void 0,d=r.gender==="male"?r:s.gender==="male"?s:void 0;u&&d&&(u.isPregnant=!0,u.gestationTime=aE,u.pregnancyFatherId=d.id,r.procreationCooldown=Om,s.procreationCooldown=Om,Ie(o,fe.Procreate,u.position))}return r.activeAction="idle",s&&(s.activeAction="idle"),{nextState:ut,data:{...e,enteredAt:l.time,previousState:ia}}},r_={id:ia,onEnter:n_,update:i_},o_={id:tr,onEnter:(e,t)=>({...t,enteredAt:e.updateContext.gameState.time,attackStartTime:e.updateContext.gameState.time}),update:(e,t)=>{if(t.entity.activeAction!=="attacking"||!t.entity.attackTargetId)return t.entity.activeAction="idle",{nextState:ut,data:{...e}};const r=t.updateContext.gameState.entities.entities[t.entity.attackTargetId];if(!r)return t.entity.activeAction="idle",{nextState:ut,data:{...e}};const o=V(t.entity.position,r.position,t.updateContext.gameState.mapDimensions.width,t.updateContext.gameState.mapDimensions.height),l=ze(t.entity.position,r.position,t.updateContext.gameState.mapDimensions.width,t.updateContext.gameState.mapDimensions.height);return t.entity.direction=nt(l),o>qn?t.entity.acceleration=Zv(t.entity):t.entity.acceleration=0,{nextState:tr,data:e}}},s_={id:ql,update:(e,t)=>{const{entity:r,updateContext:o}=t,{gameState:l}=o;if(l.time-e.enteredAt>=tI){if(r.food.filter(d=>d.type===Mn.Berry).length>=Or){for(let f=0;f<Or;f++){const p=r.food.findIndex(m=>m.type===Mn.Berry);p>-1&&r.food.splice(p,1)}const d=fa(l.entities,e.plantingSpot,l.time);d.ownerId=r.id,d.claimedUntil=l.time+sv}return{nextState:ut,data:{...e,enteredAt:l.time,previousState:ql}}}return{nextState:ql,data:e}},onEnter:(e,t)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...t,enteredAt:e.updateContext.gameState.time})},a_=[XC,ZC,qC,JC,e_,t_,r_,o_,s_],Pn="preyIdle",Wi="preyMoving",Ls="preyGrazing",Bs="preyProcreating",l_={id:Pn,update:(e,t)=>{const{entity:r,updateContext:o}=t;return r.activeAction==="moving"?{nextState:Wi,data:{...e,enteredAt:o.gameState.time,previousState:Pn,target:r.target}}:r.activeAction==="grazing"?{nextState:Ls,data:{...e,enteredAt:o.gameState.time,previousState:Pn}}:r.activeAction==="procreating"?{nextState:Bs,data:{...e,enteredAt:o.gameState.time,previousState:Pn}}:{nextState:Pn,data:e}},onEnter:(e,t)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...t,enteredAt:e.updateContext.gameState.time})},qv=12,u_=120,n0=50,c_=12,Qv=30,d_=2,zt=50,f_=100,Ws=2,Fd=3,h_=.9,p_=1,g_=50,m_=.5,Jv=20,v_=140,i0=40,S_=12,eS=40,y_=3,Zi=60,Nn=40,po=50,r0=320,tS=25,A_=60,nS=2,T_=90,I_=.7,E_=1,Ys=3,Ud=15,rh=80,iS=10,Tu=80,Bo=40,rS=2,ou=30,vo=10,Cr=40,So=12,_r=48,yo=12,Rr=50,Ao=18,Pr=60,To=.5,ji=2.5,Io=.25,Vi=2;function w_(e){let t=c_;return e.isAdult||(t*=.7),e.hunger>=g_&&(t*=m_),e.movementSlowdown&&(t*=e.movementSlowdown.modifier),t}function C_(e,t){const r=e>>16&255,o=e>>8&255,l=e&255,s=t>>16&255,u=t>>8&255,d=t&255;let f=Math.floor((r+s)/2),p=Math.floor((o+u)/2),m=Math.floor((l+d)/2);return Math.random()<.05&&(f=Math.max(0,Math.min(255,f+(Math.random()-.5)*60))),Math.random()<.05&&(p=Math.max(0,Math.min(255,p+(Math.random()-.5)*60))),Math.random()<.05&&(m=Math.max(0,Math.min(255,m+(Math.random()-.5)*60))),f<<16|p<<8|m}function ra(){const e=Math.floor(Math.random()*100)+100,t=Math.floor(Math.random()*80)+60,r=Math.floor(Math.random()*60)+20;return e<<16|t<<8|r}const Ld=10;class __{constructor(){Me(this,"id",Wi)}update(t,r){var f;const{entity:o,updateContext:l}=r;if(o.activeAction!=="moving")return{nextState:Pn,data:{...t,enteredAt:l.gameState.time,previousState:Wi}};let s;if(typeof o.target=="object"?s=o.target:typeof o.target=="number"&&(s=(f=r.updateContext.gameState.entities.entities[o.target])==null?void 0:f.position),!s&&(o.direction.x!==0||o.direction.y!==0)&&(s={x:o.position.x+o.direction.x*Ld*2,y:o.position.y+o.direction.y*Ld*2}),!s)return{nextState:Pn,data:{...t,enteredAt:l.gameState.time,previousState:Wi}};const u=ze(o.position,s,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=nt(u),o.acceleration=w_(o),V(o.position,s,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height)<Ld?{nextState:Pn,data:{...t,enteredAt:l.gameState.time,previousState:Wi}}:{nextState:Wi,data:t}}onExit(t){const{entity:r}=t;r.acceleration=0}onEnter(t,r){return{...r,enteredAt:t.updateContext.gameState.time}}}const R_=new __,P_={id:Ls,update:(e,t)=>{const{entity:r,updateContext:o}=t;return r.activeAction==="moving"?{nextState:Wi,data:{...e,enteredAt:o.gameState.time,previousState:Ls,target:r.target}}:r.activeAction!=="grazing"?{nextState:Pn,data:{...e,enteredAt:o.gameState.time,previousState:Ls}}:{nextState:Ls,data:e}},onEnter:(e,t)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...t,enteredAt:e.updateContext.gameState.time})},N_={id:Bs,update:(e,t)=>{const{entity:r,updateContext:o}=t;return r.activeAction==="moving"?{nextState:Wi,data:{...e,enteredAt:o.gameState.time,previousState:Bs,target:r.target}}:r.activeAction!=="procreating"?{nextState:Pn,data:{...e,enteredAt:o.gameState.time,previousState:Bs}}:{nextState:Bs,data:e}},onEnter:(e,t)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...t,enteredAt:e.updateContext.gameState.time})},D_=[l_,R_,P_,N_],$t="predatorIdle",xi="predatorMoving",ci="predatorAttacking",go="predatorProcreating",Nr="predatorEating",O_={id:$t,update:(e,t)=>{const{entity:r,updateContext:o}=t;return r.activeAction==="eating"?{nextState:Nr,data:{...e,enteredAt:o.gameState.time,previousState:$t,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}}:r.activeAction==="attacking"&&r.attackTargetId?{nextState:ci,data:{...e,enteredAt:o.gameState.time,previousState:$t,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:r.activeAction==="moving"?{nextState:xi,data:{...e,enteredAt:o.gameState.time,previousState:$t,target:r.target}}:r.activeAction==="procreating"?{nextState:go,data:{...e,enteredAt:o.gameState.time,previousState:$t}}:{nextState:$t,data:e}},onEnter:(e,t)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...t,enteredAt:e.updateContext.gameState.time})};function oS(e){let t=S_;return e.hunger>=T_&&(t*=I_),e.isAdult||(t*=.7),e.movementSlowdown&&(t*=e.movementSlowdown.modifier),t}function M_(e,t){const r=e>>16&255,o=e>>8&255,l=e&255,s=t>>16&255,u=t>>8&255,d=t&255;let f=Math.floor((r+s)/2),p=Math.floor((o+u)/2),m=Math.floor((l+d)/2);return Math.random()<.05&&(f=Math.max(0,Math.min(255,f+(Math.random()-.5)*60))),Math.random()<.05&&(p=Math.max(0,Math.min(255,p+(Math.random()-.5)*60))),Math.random()<.05&&(m=Math.max(0,Math.min(255,m+(Math.random()-.5)*60))),f<<16|p<<8|m}function oa(){const e=Math.floor(Math.random()*60)+60,t=Math.floor(Math.random()*50)+40,r=Math.floor(Math.random()*40)+20;return e<<16|t<<8|r}const Bd=12;class k_{constructor(){Me(this,"id",xi)}update(t,r){var f;const{entity:o,updateContext:l}=r;if(o.activeAction==="eating")return{nextState:Nr,data:{...t,enteredAt:l.gameState.time,previousState:xi,preyId:o.attackTargetId,eatingStartTime:l.gameState.time}};if(o.activeAction==="attacking"&&o.attackTargetId)return{nextState:ci,data:{...t,enteredAt:l.gameState.time,previousState:xi,attackTargetId:o.attackTargetId,attackStartTime:l.gameState.time}};if(o.activeAction!=="moving")return{nextState:$t,data:{...t,enteredAt:l.gameState.time,previousState:xi}};let s;if(typeof o.target=="object"?s=o.target:typeof o.target=="number"&&(s=(f=r.updateContext.gameState.entities.entities[o.target])==null?void 0:f.position),!s&&(o.direction.x!==0||o.direction.y!==0)&&(s={x:o.position.x+o.direction.x*Bd*2,y:o.position.y+o.direction.y*Bd*2}),!s)return{nextState:$t,data:{...t,enteredAt:l.gameState.time,previousState:xi}};const u=ze(o.position,s,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=nt(u),o.acceleration=oS(o),V(o.position,s,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height)<Bd?{nextState:$t,data:{...t,enteredAt:l.gameState.time,previousState:xi}}:{nextState:xi,data:t}}onExit(t){const{entity:r}=t;r.acceleration=0}onEnter(t,r){return{...r,enteredAt:t.updateContext.gameState.time}}}const F_=new k_,U_={id:ci,update:(e,t)=>{const{entity:r,updateContext:o}=t;if(r.activeAction==="eating")return{nextState:Nr,data:{...e,enteredAt:o.gameState.time,previousState:ci,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}};if(r.activeAction!=="attacking"||!r.attackTargetId)return r.activeAction="idle",{nextState:$t,data:{...e,enteredAt:o.gameState.time,previousState:ci}};const l=o.gameState.entities.entities[r.attackTargetId];if(!l)return r.activeAction="idle",{nextState:$t,data:{...e,enteredAt:o.gameState.time,previousState:ci}};if(l.type==="prey"&&l.hitpoints<=0||l.type==="predator"&&l.hitpoints<=0||l.type==="human"&&l.hitpoints<=0)return r.activeAction="idle",{nextState:$t,data:{...e,enteredAt:o.gameState.time,previousState:ci}};const u=V(r.position,l.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height),d=ze(r.position,l.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height);return r.direction=nt(d),u>Nn?r.acceleration=oS(r):r.acceleration=0,{nextState:ci,data:e}},onEnter:(e,t)=>({...t,enteredAt:e.updateContext.gameState.time})},L_={id:go,update:(e,t)=>{const{entity:r,updateContext:o}=t;return r.activeAction==="eating"?{nextState:Nr,data:{...e,enteredAt:o.gameState.time,previousState:go,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}}:r.activeAction==="attacking"&&r.attackTargetId?{nextState:ci,data:{...e,enteredAt:o.gameState.time,previousState:go,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:r.activeAction!=="procreating"?{nextState:$t,data:{...e,enteredAt:o.gameState.time,previousState:go}}:{nextState:go,data:e}},onEnter:(e,t)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...t,enteredAt:e.updateContext.gameState.time})},B_={id:Nr,update:(e,t)=>{const{entity:r,updateContext:o}=t;return r.activeAction!=="eating"?{nextState:$t,data:{...e,enteredAt:o.gameState.time,previousState:Nr}}:{nextState:Nr,data:e}},onEnter:(e,t)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...t,enteredAt:e.updateContext.gameState.time})},H_=[O_,F_,U_,L_,B_],o0=[...VC,...a_,...D_,...H_];function b_(e,t,r){const o=YT(e,o0);if(!o)return VT(e),[e,t];const{nextState:l,data:s}=o.update(t,r);return jT(e,l)?[l,WT(o,l,s,r,o0)]:[l,s]}function G_(e,t,r){const{gameState:o}=t,l=r*(At/Tt);if(e.isAdult=e.age>=Bf,e.isCallingToAttack&&e.callToAttackEndTime&&o.time>e.callToAttackEndTime&&(e.isCallingToAttack=!1,e.callToAttackEndTime=void 0),e.isCallingToFollow&&e.callToFollowEndTime&&o.time>e.callToFollowEndTime&&(e.isCallingToFollow=!1,e.callToFollowEndTime=void 0),e.movementSlowdown&&o.time>e.movementSlowdown.endTime&&(e.movementSlowdown=void 0),e.hitpoints<e.maxHitpoints){const u=1-e.hunger/100*SE,d=vE*u*l;e.hitpoints=Math.min(e.maxHitpoints,e.hitpoints+d)}if(e.hunger+=r*(Cs/(At/Tt)),e.hunger>nI&&(!e.lastHungerEffectTime||o.time-e.lastHungerEffectTime>Er*2)&&(Oe(o,ue.Hunger,e.position,Er,e.id),e.lastHungerEffectTime=o.time),e.age+=r/mu,e.isPlayer){const u=Lt(o,e).filter(d=>d.hunger>=eC);if(u.length>0){const d=u.map(f=>f.id);Sf(o,{identifier:"children_starving",type:ea.ChildrenStarving,message:"Your children are starving!",duration:Qw,targetEntityIds:d,highlightedEntityIds:d})}}if(e.gender==="female"&&e.isPregnant&&e.gestationTime&&(e.gestationTime-=l,e.hunger+=r*((Cs*lE-Cs)/(At/Tt)),(!e.lastPregnantEffectTime||o.time-e.lastPregnantEffectTime>Er*3)&&(Oe(o,ue.Pregnant,e.position,Er,e.id),e.lastPregnantEffectTime=o.time),e.gestationTime<=0&&(nR(e,e.pregnancyFatherId,t),e.isPregnant=!1,e.gestationTime=0,e.pregnancyFatherId=void 0)),e.procreationCooldown&&(e.procreationCooldown-=l,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.attackCooldown&&(e.attackCooldown-=l,e.attackCooldown<0&&(e.attackCooldown=0)),e.feedParentCooldownTime&&(e.feedParentCooldownTime-=l,e.feedParentCooldownTime<0&&(e.feedParentCooldownTime=0)),e.feedChildCooldownTime&&(e.feedChildCooldownTime-=l,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0)),e.leaderMetaStrategyCooldown&&(e.leaderMetaStrategyCooldown-=l,e.leaderMetaStrategyCooldown<0&&(e.leaderMetaStrategyCooldown=0)),e.isAdult?e.radius===Uo&&(e.radius=wt):e.hunger+=r*((Cs*uE-Cs)/(At/Tt)),e.isAdult&&e.food.length>0&&(!e.feedParentCooldownTime||e.feedParentCooldownTime<=0)){const u=[];if(e.motherId){const d=o.entities.entities[e.motherId];d&&u.push(d)}if(e.fatherId){const d=o.entities.entities[e.fatherId];d&&u.push(d)}for(const d of u)if(d.age>=gv&&d.hunger>=fE&&V(e.position,d.position,o.mapDimensions.width,o.mapDimensions.height)<=hE){e.food.pop(),d.hunger=Math.max(0,d.hunger-Ji),e.feedParentCooldownTime=pE;break}}let s;if(e.hitpoints<=0?s="killed":e.hunger>=Mr?e.food.length>0&&e.isAdult?(e.food.pop(),e.hunger=Math.max(0,e.hunger-Ji)):s="hunger":e.age>=e.maxAge&&(s="oldAge"),s){if(e.leaderId===e.id){const u=mi(Lt(o,e));u?(u.leaderId=u.id,u.tribeBadge=e.tribeBadge,u.diplomacy={...e.diplomacy},Object.values(o.entities.entities).forEach(d=>{if(d.type==="human"&&d.leaderId===e.id){const f=d;f.leaderId=u.id}if(d.type==="building"&&d.ownerId===e.id){const f=d;f.ownerId=u.id}})):Object.values(o.entities.entities).forEach(d=>{if(d.type==="human"&&d.leaderId===e.id){const f=d;f.leaderId=void 0,f.tribeBadge=void 0}if(d.type==="building"&&d.ownerId===e.id){const f=d;f.ownerId=void 0}})}if(e.isPlayer){const u=mi(Lt(o,e));u?(u.isPlayer=!0,o.generationCount++):(o.gameOver=!0,o.causeOfGameOver=s,Sf(o,{identifier:"no_heir",type:ea.NoHeir,message:"Your lineage has ended. You have no heir.",duration:0}))}J1(o.entities,e.position,e.gender,e.age,e.radius,e.id,o.time,e.food,e.hunger),bo(o.entities,e.id);return}e.animationProgress===void 0&&(e.animationProgress=0),e.animationSpeed===void 0&&(e.animationSpeed=1),e.animationProgress+=r*e.animationSpeed,e.animationProgress>=1&&(e.animationProgress=0)}function x_(e,t){const r=t.gameState.time-e.timeOfDeath;e.decayProgress=Math.min(1,r/gE);const o=Math.floor(mv*(1-e.decayProgress));e.food.length>o&&e.food.splice(o),e.decayProgress>=1&&e.food.length<=0&&bo(t.gameState.entities,e.id)}function $_(e,t,r){const o=r*(At/Tt);e.age+=r/mu,e.isAdult=e.age>=Ws;let l=t.gameState.ecosystem.preyHungerIncreasePerHour*o;if(e.isPregnant&&(l*=1.2),e.hunger+=l,e.isPregnant&&e.gestationTime!==void 0&&(e.gestationTime-=o,e.gestationTime<=0)){const u={x:e.position.x+(Math.random()-.5)*40,y:e.position.y+(Math.random()-.5)*40};u.x=Math.max(20,Math.min(t.gameState.mapDimensions.width-20,u.x)),u.y=Math.max(20,Math.min(t.gameState.mapDimensions.height-20,u.y));const d=Math.random()<.5?"male":"female",f=e,p=e.fatherId?t.gameState.entities.entities[e.fatherId]:void 0;let m;if(p)m=C_(f.geneCode,p.geneCode);else{m=f.geneCode;const S=Math.floor((Math.random()-.5)*4096);m=Math.max(0,Math.min(16777215,m+S))}Oo(t.gameState.entities,u,d,0,Qv*.5,m,e.id,e.fatherId),Oe(t.gameState,ue.Procreation,e.position,Er,e.id),Ie(t,fe.Birth,e.position),e.isPregnant=!1,e.gestationTime=0,e.procreationCooldown=t.gameState.ecosystem.preyProcreationCooldown,e.fatherId=void 0}e.procreationCooldown&&e.procreationCooldown>0&&(e.procreationCooldown-=o,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.eatingCooldownTime&&e.eatingCooldownTime>t.gameState.time||(e.eatingCooldownTime=void 0),e.fleeCooldown&&e.fleeCooldown>0&&(e.fleeCooldown-=o,e.fleeCooldown<0&&(e.fleeCooldown=0)),e.feedChildCooldownTime&&e.feedChildCooldownTime>0&&(e.feedChildCooldownTime-=o,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0));let s=!1;e.hunger>=u_&&(s=!0),e.hitpoints<=0&&(s=!0),e.age>=qv&&(s=!0),s&&(eR(t.gameState.entities,e.position,e.gender,e.age,e.radius,e.id,t.gameState.time,e.geneCode),bo(t.gameState.entities,e.id))}function z_(e,t,r){const o=r*(At/Tt);e.age+=r/mu,e.isAdult=e.age>=Ys;let l=t.gameState.ecosystem.predatorHungerIncreasePerHour*o;if(e.isPregnant&&(l*=1.3),e.hunger+=l,e.isPregnant&&e.gestationTime!==void 0&&(e.gestationTime-=o,e.gestationTime<=0)){const u={x:e.position.x+(Math.random()-.5)*50,y:e.position.y+(Math.random()-.5)*50};u.x=Math.max(25,Math.min(t.gameState.mapDimensions.width-25,u.x)),u.y=Math.max(25,Math.min(t.gameState.mapDimensions.height-25,u.y));const d=Math.random()<.5?"male":"female",f=e,p=e.pregnancyFatherId?t.gameState.entities.entities[e.pregnancyFatherId]:void 0;let m;if(p)m=M_(f.geneCode,p.geneCode);else{m=f.geneCode;const S=Math.floor((Math.random()-.5)*4096);m=Math.max(0,Math.min(16777215,m+S))}Mo(t.gameState.entities,u,d,0,eS*.6,m,e.id,e.pregnancyFatherId),Oe(t.gameState,ue.Procreation,e.position,Er,e.id),Ie(t,fe.Birth,e.position),e.isPregnant=!1,e.gestationTime=0,e.procreationCooldown=t.gameState.ecosystem.predatorProcreationCooldown,e.pregnancyFatherId=void 0}e.procreationCooldown&&e.procreationCooldown>0&&(e.procreationCooldown-=o,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.attackCooldown&&e.attackCooldown>0&&(e.attackCooldown-=o,e.attackCooldown<0&&(e.attackCooldown=0)),e.huntCooldown&&e.huntCooldown>0&&(e.huntCooldown-=o,e.huntCooldown<0&&(e.huntCooldown=0)),e.feedChildCooldownTime&&e.feedChildCooldownTime>0&&(e.feedChildCooldownTime-=o,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0));let s=!1;e.hunger>=v_&&(s=!0),e.hitpoints<=0&&(s=!0),e.age>=Jv&&(s=!0),s&&(tR(t.gameState.entities,e.position,e.gender,e.age,e.radius,e.id,t.gameState.time,e.geneCode),bo(t.gameState.entities,e.id))}var da=(e=>(e[e.BehaviorTreeBased=0]="BehaviorTreeBased",e))(da||{}),I=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.FAILURE=1]="FAILURE",e[e.RUNNING=2]="RUNNING",e[e.NOT_EVALUATED=3]="NOT_EVALUATED",e))(I||{});class Qn{constructor(){Me(this,"name");Me(this,"depth");Me(this,"children");Me(this,"child")}getLastStatus(t){return P.get(t.aiBlackboard,`${this.name}_lastStatus`)??3}setLastStatus(t,r){P.set(t.aiBlackboard,`${this.name}_lastStatus`,r)}getRunningChildIndex(t){return P.get(t.aiBlackboard,`${this.name}_runningChildIndex`)}setRunningChildIndex(t,r){P.set(t.aiBlackboard,`${this.name}_runningChildIndex`,r)}}const P={create(){return{data:{},nodeExecutionData:{}}},set({data:e},t,r){e[t]=r},get(e,t){return e==null?void 0:e.data[t]},delete({data:e},t){delete e[t]},has({data:e},t){return t in e},recordNodeExecution({nodeExecutionData:e},t,r,o,l,s){const u=e[t]||{lastExecuted:0,status:I.FAILURE,depth:0,debugInfo:"",executionHistory:[]},d=u.executionHistory[u.executionHistory.length-1];d&&o-(d==null?void 0:d.time)>Zs&&u.executionHistory.push({time:d.time+Zs,status:I.NOT_EVALUATED}),u.executionHistory.push({time:o,status:r});const f=Uv/Tt*At,p=o-f;u.executionHistory=u.executionHistory.filter(S=>S.time>=p);const m={...u,lastExecuted:o,status:r,depth:l,debugInfo:s};e[t]=m},getNodeExecutionData({nodeExecutionData:e}){return e},cleanupOldEntries({nodeExecutionData:e},t){const r=vI,o=[];for(const[l,s]of Object.entries(e))t-s.lastExecuted>r&&o.push(l);for(const l of o)delete e[l]}};function oh(e,t,r){if(e.aiBlackboard){const o=P.get(e.aiBlackboard,"lastAiUpdateTime")??0;t.gameState.time-o>=Zs&&(r.execute(e,t,e.aiBlackboard),P.set(e.aiBlackboard,"lastAiUpdateTime",t.gameState.time))}else console.warn(`Behavior Tree AI ticked for human ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle"}const s0="Human Behavior",W_=1;class Y_{constructor(){Me(this,"nodeData",new Map);Me(this,"pathStack",[]);Me(this,"startTimeStack",[])}nodeStart(t){this.pathStack.push(t),this.startTimeStack.push(performance.now())}nodeEnd(){if(this.startTimeStack.length===0||this.pathStack.length===0){console.error("BTProfiler: nodeEnd() called without a matching nodeStart().");return}const t=performance.now(),r=this.startTimeStack.pop(),o=t-r,l=this.pathStack.join(" > "),s=this.nodeData.get(l)??{path:l,totalTime:0,callCount:0,minTime:1/0,maxTime:-1/0};s.totalTime+=o,s.callCount++,s.minTime=Math.min(s.minTime,o),s.maxTime=Math.max(s.maxTime,o),this.nodeData.set(l,s),this.pathStack.pop()}report(t={}){const{showAll:r=!1}=t,o=Array.from(this.nodeData.values());if(o.length===0){console.log("--- Behavior Tree Profiler: No data collected. ---");return}let l=o,s="--- Behavior Tree Full Report ---";if(!r){const d=this.nodeData.get(s0);if(d){const f=d.totalTime*W_/100;l=o.filter(p=>p.totalTime>f&&p.path!==s0),s="--- Behavior Tree Problem Report ---"}else console.log('BTProfiler: Root node "Human Behavior" not found. Showing full report.'),s="--- Behavior Tree Full Report (Root Not Found) ---"}const u=l.sort((d,f)=>f.totalTime-d.totalTime);console.log(s),u.length>0?console.table(u.map(d=>({Path:d.path,"Total Time (ms)":d.totalTime.toFixed(3),Calls:d.callCount,"Avg Time (ms)":(d.totalTime/d.callCount).toFixed(3),"Min Time (ms)":d.minTime.toFixed(3),"Max Time (ms)":d.maxTime.toFixed(3)}))):console.log("No significant performance problems detected."),console.log("------------------------------------")}reset(){this.nodeData.clear(),this.pathStack=[],this.startTimeStack=[]}}const ft=new Y_;function Un(e){return Array.isArray(e)?e:[e,""]}class ge extends Qn{constructor(r,o,l=0){super();Me(this,"name");Me(this,"depth");this.children=r,this.name=o,this.depth=l,this.children.forEach(s=>{s.depth=(this.depth??0)+1})}execute(r,o,l){this.name&&ft.nodeStart(this.name);try{for(const s of this.children){const[u,d]=Un(s.execute(r,o,l));if(u!==I.SUCCESS)return this.setLastStatus(r,u),this.name&&P.recordNodeExecution(l,this.name,u,o.gameState.time,this.depth,d),u}return this.setLastStatus(r,I.SUCCESS),this.name&&P.recordNodeExecution(l,this.name,I.SUCCESS,o.gameState.time,this.depth,""),I.SUCCESS}finally{this.name&&ft.nodeEnd()}}}class qt extends Qn{constructor(r,o,l=0){super();Me(this,"name");Me(this,"depth");this.children=r,this.name=o,this.depth=l,this.children.forEach(s=>{s.depth=(this.depth??0)+1})}execute(r,o,l){this.name&&ft.nodeStart(this.name);try{const s=this.getRunningChildIndex(r)??0;for(let u=s;u<this.children.length;u++){const d=this.children[u],[f,p]=Un(d.execute(r,o,l));if(f!==I.FAILURE){if(f===I.SUCCESS)return this.setRunningChildIndex(r,void 0),this.setLastStatus(r,I.SUCCESS),this.name&&P.recordNodeExecution(l,this.name,I.SUCCESS,o.gameState.time,this.depth,p),I.SUCCESS;if(f===I.RUNNING)return this.setRunningChildIndex(r,u),this.setLastStatus(r,I.RUNNING),this.name&&P.recordNodeExecution(l,this.name,I.RUNNING,o.gameState.time,this.depth,p),I.RUNNING}}return this.setRunningChildIndex(r,void 0),this.setLastStatus(r,I.FAILURE),this.name&&P.recordNodeExecution(l,this.name,I.FAILURE,o.gameState.time,this.depth,""),I.FAILURE}finally{this.name&&ft.nodeEnd()}}}class ce extends Qn{constructor(r,o,l=0){super();Me(this,"name");Me(this,"depth");this.action=r,this.name=o,this.depth=l}execute(r,o,l){this.name&&ft.nodeStart(this.name);try{const[s,u]=Un(this.action(r,o,l));return this.setLastStatus(r,s),this.name&&P.recordNodeExecution(l,this.name,s,o.gameState.time,this.depth,u),s}finally{this.name&&ft.nodeEnd()}}}class J extends Qn{constructor(r,o,l=0){super();Me(this,"name");Me(this,"depth");this.condition=r,this.name=o,this.depth=l}execute(r,o,l){this.name&&ft.nodeStart(this.name);try{const[s,u]=Un(this.condition(r,o,l)),d=s?I.SUCCESS:I.FAILURE;return this.setLastStatus(r,d),this.name&&P.recordNodeExecution(l,this.name,d,o.gameState.time,this.depth,u),d}finally{this.name&&ft.nodeEnd()}}}class su extends Qn{constructor(r,o,l,s=0){super();Me(this,"name");Me(this,"depth");Me(this,"startTimeKey");this.child=r,this.timeoutDurationHours=o,this.name=l,this.depth=s,this.child.depth=(this.depth??0)+1,this.startTimeKey=`timeout_${this.name}_startTime`}execute(r,o,l){ft.nodeStart(this.name);try{const s=o.gameState.time;let u=P.get(l,this.startTimeKey);const[d,f]=Un(this.child.execute(r,o,l));if(d===I.RUNNING){u===void 0&&(P.set(l,this.startTimeKey,s),u=s);const p=s-u;if(p>this.timeoutDurationHours){P.delete(l,this.startTimeKey),this.setLastStatus(r,I.FAILURE);const S=`Timed out after ${p.toFixed(2)}h.`;return P.recordNodeExecution(l,this.name,this.getLastStatus(r),s,this.depth,S),this.getLastStatus(r)}this.setLastStatus(r,I.RUNNING);const m=`Running for ${p.toFixed(2)}h. ${f}`;return P.recordNodeExecution(l,this.name,this.getLastStatus(r),s,this.depth,m),this.getLastStatus(r)}return u!==void 0&&P.delete(l,this.startTimeKey),this.setLastStatus(r,d),P.recordNodeExecution(l,this.name,this.getLastStatus(r),s,this.depth,f),this.getLastStatus(r)}finally{ft.nodeEnd()}}}class sa extends Qn{constructor(r,o,l,s=0,u){super();Me(this,"name");Me(this,"depth");Me(this,"statusKey");Me(this,"timestampKey");this.child=r,this.cacheDurationHours=o,this.validityCheck=u,this.name=l,this.depth=s,this.child.depth=(this.depth??0)+1,this.statusKey=`caching_${this.name}_status`,this.timestampKey=`caching_${this.name}_timestamp`}execute(r,o,l){ft.nodeStart(this.name);try{const s=o.gameState.time,u=P.get(l,this.statusKey),d=P.get(l,this.timestampKey);if(u!==void 0&&d!==void 0){const S=s-d>this.cacheDurationHours,y=this.validityCheck?this.validityCheck(r,o,l):!0;if(!S&&y){const w=(d+this.cacheDurationHours-s).toFixed(2),E=`Cache hit. Status: ${I[u]}. ${w}h left.`;return this.setLastStatus(r,u),P.recordNodeExecution(l,this.name,this.getLastStatus(r),s,this.depth,E),this.getLastStatus(r)}}const[f,p]=Un(this.child.execute(r,o,l));(f===I.SUCCESS||f===I.FAILURE)&&(P.set(l,this.statusKey,f),P.set(l,this.timestampKey,s)),this.setLastStatus(r,f);const m=`Cache miss. Child returned ${I[f]}. ${p}`;return P.recordNodeExecution(l,this.name,this.getLastStatus(r),s,this.depth,m),this.getLastStatus(r)}finally{ft.nodeEnd()}}}class Lr extends Qn{constructor(r,o,l,s=0){super();Me(this,"name");Me(this,"depth");Me(this,"cooldownKey");this.cooldownDurationHours=r,this.child=o,this.name=l,this.depth=s,this.child.depth=(this.depth??0)+1,this.cooldownKey=`cooldown_${this.name}`}execute(r,o,l){ft.nodeStart(this.name);try{const s=o.gameState.time,u=P.get(l,this.cooldownKey);if(this.child.getLastStatus(r)===I.RUNNING){const[p,m]=Un(this.child.execute(r,o,l));if(this.setLastStatus(r,p),this.name){const S=`Continuing running child. ${m}`;P.recordNodeExecution(l,this.name,this.getLastStatus(r),s,this.depth,S)}return this.getLastStatus(r)}if(u!==void 0&&s<u){const m=`Cooldown active, ${(u-s).toFixed(2)}h left`;return this.setLastStatus(r,I.FAILURE),this.name&&P.recordNodeExecution(l,this.name,this.getLastStatus(r),s,this.depth,m),this.getLastStatus(r)}const[d,f]=Un(this.child.execute(r,o,l));return d===I.SUCCESS&&P.set(l,this.cooldownKey,s+this.cooldownDurationHours),this.setLastStatus(r,d),this.name&&P.recordNodeExecution(l,this.name,this.getLastStatus(r),s,this.depth,f),this.getLastStatus(r)}finally{ft.nodeEnd()}}}class Vn extends Qn{constructor(r,o,l,s=0){super();Me(this,"name");Me(this,"depth");this.child=r,this.behaviorKey=o,this.name=l,this.depth=s;const u=(d,f)=>{d.depth=f,d.children?d.children.forEach(p=>u(p,f+1)):d.child&&u(d.child,f+1)};u(this.child,(this.depth??0)+1)}execute(r,o,l){this.name&&ft.nodeStart(this.name);try{if(r.isPlayer&&!o.gameState.autopilotControls.behaviors[this.behaviorKey]){const f=`Player autopilot for '${this.behaviorKey}' is disabled.`;return this.setLastStatus(r,I.FAILURE),this.name&&P.recordNodeExecution(l,this.name,this.getLastStatus(r),o.gameState.time,this.depth,f),this.getLastStatus(r)}const[u,d]=Un(this.child.execute(r,o,l));return this.setLastStatus(r,u),this.name&&P.recordNodeExecution(l,this.name,this.getLastStatus(r),o.gameState.time,this.depth,d),this.getLastStatus(r)}finally{this.name&&ft.nodeEnd()}}}class j_ extends Qn{constructor(r,o,l=0){super();Me(this,"name");Me(this,"depth");this.child=r,this.name=o,this.depth=l;const s=(u,d)=>{u.depth=d,u.children?u.children.forEach(f=>s(f,d+1)):u.child&&s(u.child,d+1)};s(this.child,(this.depth??0)+1)}execute(r,o,l){this.name&&ft.nodeStart(this.name);try{if(r.isPlayer&&o.gameState.autopilotControls.isManuallyMoving)return this.setLastStatus(r,I.FAILURE),this.name&&P.recordNodeExecution(l,this.name,this.getLastStatus(r),o.gameState.time,this.depth,"Manual movement active, AI blocked."),this.getLastStatus(r);const[s,u]=Un(this.child.execute(r,o,l));return this.setLastStatus(r,s),this.name&&P.recordNodeExecution(l,this.name,this.getLastStatus(r),o.gameState.time,this.depth,u),this.getLastStatus(r)}finally{this.name&&ft.nodeEnd()}}}class Ns extends Qn{constructor(r,o,l=0){super();Me(this,"name");Me(this,"depth");this.child=r,this.name=o,this.depth=l;const s=(u,d)=>{u.depth=d,u.children?u.children.forEach(f=>s(f,d+1)):u.child&&s(u.child,d+1)};s(this.child,(this.depth??0)+1)}execute(r,o,l){this.name&&ft.nodeStart(this.name);try{if(r.isPlayer)return this.setLastStatus(r,I.FAILURE),this.name&&P.recordNodeExecution(l,this.name,this.getLastStatus(r),o.gameState.time,this.depth,"Player controlled, AI blocked."),this.getLastStatus(r);const[s,u]=Un(this.child.execute(r,o,l));return this.setLastStatus(r,s),this.name&&P.recordNodeExecution(l,this.name,this.getLastStatus(r),o.gameState.time,this.depth,u),this.getLastStatus(r)}finally{this.name&&ft.nodeEnd()}}}function V_(e){return new ge([new J((t,r)=>{const o=t.hunger>=ff,l=t.food.length>0,s=!t.eatingCooldownTime||r.gameState.time>=t.eatingCooldownTime;return[!!(o&&l&&s),`${Math.floor(t.hunger-ff)}, ${t.food.length}, ${t.eatingCooldownTime?Math.floor(t.eatingCooldownTime-r.gameState.time):""}`]},"Can Eat",e+1),new ce(t=>(t.direction={x:0,y:0},t.target=void 0,t.activeAction="eating",I.RUNNING),"Eat",e+1)],"Eating",e)}function X_(e){return new ge([new J((t,r,o)=>{if(t.isAdult&&t.hitpoints>t.maxHitpoints*uv||!(t.hitpoints<t.maxHitpoints*.1)&&t.isAdult&&t.hunger>hI)return!1;const s=OE(t.id,r.gameState);return s?(P.set(o,"fleeThreat",s.id),!0):!1},"Should Flee",e+1),new ce((t,r,o)=>{const l=P.get(o,"fleeThreat"),s=l&&r.gameState.entities.entities[l];if(!s)return I.FAILURE;t.activeAction="moving";const u=ze(s.position,t.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),d=nt(u),f=On(t.position,Pt(d,cv));return t.target={x:(f.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(f.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},t.direction=d,I.RUNNING},"Execute Flee",e+1)],"Flee",e)}const sS=100,K_=25;function a0(e){const t=Math.sin(e)*1e4;return t-Math.floor(t)}function Z_(e,t,r=sS){return t.search.building.byRadius(e.position,r).some(s=>{const u=s;return u.buildingType==="storageSpot"&&u.ownerId===e.leaderId&&u.isConstructed&&u.storedFood&&u.storageCapacity&&u.storedFood.length<u.storageCapacity})}function l0(e,t,r=sS){return t.search.building.byRadius(e.position,r).filter(s=>{const u=s;return u.buildingType==="storageSpot"&&u.ownerId===e.leaderId&&u.isConstructed&&u.storedFood&&u.storedFood.length>0})}function u0(e,t,r){if(t.length===0)return null;let o=null,l=1/0;for(const s of t){const u=V(e.position,s.position,r.mapDimensions.width,r.mapDimensions.height);u<l&&(l=u,o=s)}return o?{storage:o,distance:l}:null}function aS(e){const t=e.storedFood?e.storedFood.length:0,r=a0(t+e.id)*2*Math.PI,o=a0(t+e.id+1)*K_;return{x:Math.cos(r)*o,y:Math.sin(r)*o}}const Ds="foodSource";function q_(e){const t=new ce((o,l,s)=>{const u=new Map,d=De(o,l.gameState,"berryBush",Nm,m=>{if(m.food.length===0)return!1;if(!m.ownerId||!m.claimedUntil||l.gameState.time>=m.claimedUntil)return!0;const S=l.gameState.entities.entities[m.ownerId];if(!S||S.leaderId===o.leaderId)return!0;const y=u.get(S.id)??V(o.position,S.position,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height);return u.set(S.id,y),y>GI}),f=De(o,l.gameState,"corpse",Nm,m=>m.food.length>0);let p=null;if(d&&f){const m=V(o.position,d.position,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height),S=V(o.position,f.position,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height);p=m<=S?d:f}else p=d||f;return p?(P.set(s,Ds,p.id),[I.SUCCESS,`Found food: ${p.type} at ${p.position.x.toFixed(0)},${p.position.y.toFixed(0)}`]):[I.FAILURE,"No food source found"]},"Find Closest Food Source",e+4),r=new ce((o,l,s)=>{const u=P.get(s,Ds),d=u&&l.gameState.entities.entities[u];return!d||d.food.length===0?(P.delete(s,Ds),[I.FAILURE,"Food source is invalid or depleted"]):V(o.position,d.position,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height)<Fr?(o.activeAction="gathering",o.direction={x:0,y:0},o.target=d.id,P.delete(s,Ds),[I.SUCCESS,`Gathering from ${d.type}`]):(o.activeAction="moving",o.target=d.id,o.direction=Ft(o.position,d.position,l.gameState.mapDimensions),[I.RUNNING,`Moving to ${d.type}`])},"Move To Food and Gather",e+3);return new ge([new J((o,l)=>{const s=o.food.length<o.maxFood,u=o.hunger>oI,d=Lt(l.gameState,o).filter(p=>p.hunger>Hf),f=Z_(o,l.gameState);return[(o.isAdult&&s&&(u||d.length>0||f))??!1,`${u?"H":""}${d.length>0?" HC("+d.length+")":""}${f?" S":""}`]},"Should Gather Food",e+1),new qt([new ge([new J((o,l,s)=>P.has(s,Ds),"Has Food Source?",e+2),r],"Continue Gathering Action",e+2),new ge([new sa(t,II,"Cache Food Source Search",e+3),r],"Find New Food Source and Gather",e+2)],"Perform or Start Gathering",e+1)],"Gather Food",e)}function Q_(e){return new ce((t,r,o)=>(t.activeAction="idle",t.direction={x:0,y:0},t.target=void 0,P.set(o,"wanderTarget",void 0),I.SUCCESS),"Idle",e)}const Ml="procreationWanderStartTime",c0=(e,t,r)=>t.find(o=>Ur(e,o,r));function J_(e){const t=new J((s,u,d)=>{const f=km(s,u.gameState,Fr),p=c0(s,f,u.gameState);return p?(P.set(d,"procreationPartner",p.id),!0):!1},"Find Immediate Partner"),r=new ce((s,u,d)=>{var m;const f=P.get(d,"procreationPartner"),p=f&&u.gameState.entities.entities[f];return p?(s.activeAction="procreating",s.target=void 0,P.delete(d,"procreationPartner"),P.delete(d,Ml),(m=s.partnerIds)!=null&&m.includes(p.id)||(s.partnerIds=s.partnerIds?[...s.partnerIds,p.id]:[p.id]),I.SUCCESS):I.FAILURE},"Start Procreating"),o=new J((s,u,d)=>{const f=km(s,u.gameState,fI),p=c0(s,f,u.gameState);return p?(P.set(d,"procreationPartner",p.id),!0):!1},"Locate Distant Partner"),l=new ce((s,u,d)=>{const f=P.get(d,"procreationPartner"),p=f&&u.gameState.entities.entities[f];if(!p)return I.FAILURE;if(V(s.position,p.position,u.gameState.mapDimensions.width,u.gameState.mapDimensions.height)<Fr)return I.SUCCESS;s.activeAction="moving",s.target=p.id;const S=ze(s.position,p.position,u.gameState.mapDimensions.width,u.gameState.mapDimensions.height);return s.direction=nt(S),I.RUNNING},"Move Towards Partner");return new ge([new J(s=>!(!s.isAdult||s.gender==="female"&&s.isPregnant||s.age<oE||s.gender==="female"&&s.age>pv),"Is Fertile (age, not pregnant)",e+1),new J(s=>s.hunger<kr,"Is Healthy (hunger)",e+1),new J(s=>(s.procreationCooldown||0)<=0,"Is Ready (cooldown)",e+1),new qt([new ge([new J((s,u)=>Fm(s.position,u.gameState,"berryBush",Rm)>=dI,"Is Environment Viable (food)",e+3),new ce((s,u,d)=>(P.delete(d,Ml),I.SUCCESS),"Clear Wander Timer",e+3)],"Sufficient Food Path",e+2),new ge([new J((s,u)=>{if(s.gender==="male"){const d=Lt(u.gameState,s);return!mi(d)}return!1},"Is Male Without Heir",e+3),new ce((s,u,d)=>{const f=P.get(d,Ml);if(f===void 0)return P.set(d,Ml,u.gameState.time),[I.FAILURE,"Starting heirless wander timer"];const p=u.gameState.time-f;return p>=sE?Fm(s.position,u.gameState,"berryBush",Rm)>=1?[I.SUCCESS,`Wandered for ${p.toFixed(1)}h, minimum food found`]:[I.FAILURE,"Desperate but no food sources nearby"]:[I.FAILURE,`Wandering for heir, ${p.toFixed(1)}h elapsed`]},"Check Wander Timer",e+3)],"Heirless Desperation Path",e+2)],"Check Environment Or Desperation",e+1),new J((s,u,d)=>{var p;const f=P.get(d,"procreationPartner");return f&&((p=f.partnerIds)!=null&&p.length)&&!f.partnerIds.includes(s.id)&&f.partnerIds.map(m=>u.gameState.entities.entities[m]).filter(m=>!!m).some(m=>V(s.position,m.position,u.gameState.mapDimensions.width,u.gameState.mapDimensions.height)<bI)?[!1,"Partner's primary partner is too close"]:!0},"Is Partner's Primary Partner Nearby",e+1),new qt([new ge([t,r],"Procreate With Immediate Partner",e+2),new Lr(yI,new ge([o,l],"Seek Distant Partner Action",e+3),"Seek Distant Partner Cooldown",e+2)],"Find Partner And Procreate",e+1)],"Procreate",e)}const uo="attackTarget",yr="homeCenter",Hd=150;function e1(e){return new ge([new J((t,r,o)=>{if(!t.isAdult)return[!1,"Not an adult"];const{gameState:l}=r;if(t.activeAction==="attacking"&&t.attackTargetId){const u=l.entities.entities[t.attackTargetId];if(u&&u.hitpoints>0&&V(t.position,u.position,l.mapDimensions.width,l.mapDimensions.height)<=Hd){if(P.set(o,uo,u.id),!P.get(o,yr)){const d=t.leaderId?er(t.leaderId,l):nu(t,l).length>0?Um(t,l):t.position;P.set(o,yr,d)}return!0}}const s=De(t,l,"human",Hd,u=>u.hitpoints>0&&Lo(t,u,l));if(s){P.set(o,uo,s.id);const u=t.leaderId?er(t.leaderId,l):nu(t,l).length>0?Um(t,l):t.position;return P.set(o,yr,u),!0}return P.set(o,uo,void 0),P.set(o,yr,void 0),!1},"Find Attack Target",e+1),new ce((t,r,o)=>{const l=P.get(o,uo),s=l&&r.gameState.entities.entities[l],u=P.get(o,yr);if(!s||!u)return I.FAILURE;const{gameState:d}=r;return V(t.position,u,d.mapDimensions.width,d.mapDimensions.height)>lv?(t.activeAction="idle",t.attackTargetId=void 0,P.set(o,uo,void 0),P.set(o,yr,void 0),I.FAILURE):s.hitpoints<=0||V(t.position,s.position,d.mapDimensions.width,d.mapDimensions.height)>Hd?(t.activeAction==="attacking"&&(t.activeAction="idle",t.attackTargetId=void 0),P.set(o,uo,void 0),P.set(o,yr,void 0),I.SUCCESS):(t.activeAction==="attacking"&&t.attackTargetId===s.id||(t.activeAction="attacking",t.attackTargetId=s.id),I.RUNNING)},"Execute Attack",e+1)],"Attack",e)}const t1=(e,t,r)=>{const o=Lt(t.gameState,e).filter(u=>!u.isAdult);if(o.length===0)return I.FAILURE;let l=null,s=Hf;for(const u of o)u.hunger>=s&&(s=u.hunger,l=u);return l?(P.set(r,"targetChild",l.id),I.SUCCESS):I.FAILURE},n1=(e,t,r)=>{const o=P.get(r,"targetChild"),l=o&&t.gameState.entities.entities[o];return l?V(e.position,l.position,t.gameState.mapDimensions.width,t.gameState.mapDimensions.height)>bf?(e.activeAction="moving",e.target=l.id,e.direction=Ft(e.position,l.position,t.gameState.mapDimensions),I.RUNNING):(e.activeAction="feeding",e.target=void 0,P.set(r,"targetChild",void 0),I.SUCCESS):I.FAILURE};function i1(e){return new ge([new J(t=>(t.isAdult&&t.food.length>0&&(!t.feedChildCooldownTime||t.feedChildCooldownTime<=0))??!1,"Can Feed Child",e+1),new ce(t1,"Find Hungriest Child",e+1),new ce(n1,"Move To Child and Feed",e+1)],"Feed Child",e)}function r1(e){return new ge([new J(t=>!t.isAdult&&t.hunger>=Hf,"Is Hungry Child",e+1),new ce((t,r,o)=>{const l=PE(t,r.gameState);if(l.length===0)return I.FAILURE;const s=De(t,r.gameState,"human",dE,u=>l.some(d=>d.id===u.id)&&u.food.length>0);return s?(P.set(o,"targetParent",s.id),I.SUCCESS):I.FAILURE},"Find Parent With Food",e+1),new ce((t,r,o)=>{const l=P.get(o,"targetParent"),s=l&&r.gameState.entities.entities[l];if(!s)return I.FAILURE;const u=V(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return t.activeAction="idle",u<=bf?(t.target=void 0,I.SUCCESS):(t.target=s.id,t.activeAction="moving",I.RUNNING)},"Move To Parent",e+1)],"Seek Food From Parent",e)}const Os="plantingSpot",o1="assignedPlantingZone";function s1(e,t,r,o){const l=ze(e,t,r,o);return On(e,l)}function a1(e){const t=new ce((o,l,s)=>{const u=P.get(s,Os);if(!u||Fn(u,l.gameState,Qi,o.id))return P.delete(s,Os),[I.FAILURE,"Planting spot is missing"];const d=s1(o.position,u,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height),f=V(o.position,d,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height);return f>Fr?(o.activeAction="moving",o.target=d,o.direction=Ft(o.position,d,l.gameState.mapDimensions),[I.RUNNING,"Moving to planting spot: "+f.toFixed(2)+" units away"]):Fn(u,l.gameState,Qi,o.id)?(P.delete(s,Os),[I.FAILURE,"Planting spot is now occupied"]):(o.activeAction="planting",o.target=u,[I.RUNNING,"Planting state initiated"])},"Move To Spot and Plant",e+3),r=new ce((o,l,s)=>{const u=xC(o,l.gameState);u&&P.set(s,o1,u.id);let d=zC(o,l.gameState);return d||(d=bE(o,l.gameState)),d?(P.set(s,Os,d),[I.SUCCESS,`Found new spot at ${d.x.toFixed(0)}, ${d.y.toFixed(0)}`]):[I.FAILURE,"No suitable planting spot found"]},"Find Optimal Planting Spot",e+3);return new ge([new J(o=>{const l=o.food.filter(d=>d.type===Mn.Berry).length>=Or,s=o.hunger<sI,u=(o.isAdult&&l&&s)??!1;return[u,u?"Can plant":`Cannot plant: adult=${o.isAdult}, berries=${o.food.filter(d=>d.type===Mn.Berry).length}/${Or}, hunger=${o.hunger.toFixed(0)}`]},"Can Plant",e+1),new J((o,l)=>{if(!o.leaderId)return[!1,"No tribe"];const s=FC(o,l.gameState),u=HC(o.leaderId,l.gameState);let d;return s<$I?d=YI:s<zI?d=jI:s<WI?d=VI:d=XI,[u<d,`Food security: ${(s*100).toFixed(0)}%, Bush density: ${u.toFixed(1)}/${d}`]},"Needs More Bushes (Adaptive)",e+1),new J((o,l)=>{if(!o.leaderId)return[!0,"No tribe coordination needed"];const s=kn(o,l.gameState),u=Kv(o.leaderId,l.gameState,"planting"),d=Math.max(1,Math.ceil(s.length*.3));return[u<d,`Active planters: ${u}/${d}`]},"Not Too Many Planters",e+1),new qt([new ge([new J((o,l,s)=>P.has(s,Os),"Has Planting Spot?",e+2),t],"Continue Planting Action",e+2),new Lr(TI,r,"Find Planting Spot Cooldown",e+2)],"Perform or Start Planting",e+1)],"Plant Bush",e)}const d0="lastDepositTime",bd="assignedStorageSpot";function l1(e){return new qt([new ge([new J((t,r,o)=>{const l=P.get(o,d0)||0,s=r.gameState.time-l;if(s<Dm)return[!1,`Cooldown: ${(Dm-s).toFixed(1)}h remaining`];if(!t.isAdult)return[!1,"Not an adult"];if(!t.leaderId)return[!1,"No tribe"];const u=BC(t.leaderId,r.gameState);let d;u<.3?d=KI:u<.7?d=ZI:d=qI;const f=t.food.length/t.maxFood;return f<=d?[!1,`Food ${(f*100).toFixed(0)}% < threshold ${(d*100).toFixed(0)}%`]:t0(t,r.gameState)?[!0,`Storage util: ${(u*100).toFixed(0)}%, Personal: ${(f*100).toFixed(0)}%`]:[!1,"No available tribe storage nearby"]},"Check for Excess Food and Storage",e+1),new J((t,r)=>{if(!t.leaderId)return[!0,"No tribe coordination needed"];const o=Kv(t.leaderId,r.gameState,"depositing"),l=kn(t,r.gameState),s=Math.max(1,Math.ceil(l.length*.4));return[o<s,`Active depositors: ${o}/${s}`]},"Not Too Many Depositors",e+1),new ce((t,r,o)=>{let l=P.get(o,bd),s=null;if(l&&(s=r.gameState.entities.entities[l]||null),!s){if(s=t0(t,r.gameState),!s)return[I.FAILURE,"No storage available"];P.set(o,bd,s.id)}const u=V(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return u<=yn?(t.activeAction="depositing",t.target=void 0,P.set(o,d0,r.gameState.time),P.delete(o,bd),[I.SUCCESS,"Depositing food"]):(t.activeAction="moving",t.target=s.position,[I.RUNNING,`Moving to storage (${u.toFixed(1)}px away)`])},"Navigate to Storage and Deposit",e+1)],"Deposit Sequence",e)],"Storage Deposit Behavior",e)}function u1(e){return new qt([new ge([new J((t,r,o)=>{if(t.hunger<=ff)return[!1,"Not hungry enough"];if(t.food.length>=t.maxFood)return[!1,"Inventory full"];const l=l0(t,r.gameState),s=u0(t,l,r.gameState);return(s==null?void 0:s.storage)?[!0,`Storage with food found at distance ${s.distance.toFixed(1)}`]:[!1,"No tribe storage with food nearby"]},"Check for Hunger and Storage Food",e+1),new ce((t,r,o)=>{const l=l0(t,r.gameState);if(l.length===0)return[I.FAILURE,"No storage with food available"];const s=u0(t,l,r.gameState);if(!s)return[I.FAILURE,"No storage found"];const u=s.storage,d=s.distance;return d<=yn?(t.activeAction="retrieving",t.target=void 0,[I.SUCCESS,"Retrieving food"]):(t.activeAction="moving",t.target=u.position,[I.RUNNING,`Moving to storage (${d.toFixed(1)}px away)`])},"Navigate to Storage and Retrieve",e+1)],"Retrieve Sequence",e)],"Storage Retrieve Behavior",e)}function c1(e){return new qt([new ge([new J((t,r,o)=>{if(!t.isAdult)return[!1,"Not an adult"];if(t.food.length>=t.maxFood)return[!1,"Inventory full"];if(!t.leaderId)return[!1,"No tribe leader"];const l=r.gameState.entities.entities[t.leaderId];if(!l||!l.diplomacy)return[!1,"No diplomacy info"];const d=r.gameState.search.building.byRadius(t.position,150).find(f=>{const p=f;if(p.buildingType!=="storageSpot"||!p.isConstructed||!p.storedFood||p.storedFood.length===0||p.ownerId===t.leaderId||l.diplomacy[p.ownerId]!==gt.Hostile)return!1;const S=kn({leaderId:p.ownerId},r.gameState);for(const y of S)if(V(t.position,y.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=yf)return!1;return!0});return d?[!0,`Undefended enemy storage found at distance ${V(t.position,d.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height).toFixed(1)}`]:[!1,"No undefended enemy storage nearby"]},"Check for Undefended Enemy Storage",e+1),new ce((t,r,o)=>{if(!t.leaderId)return[I.FAILURE,"No tribe leader"];const l=r.gameState.entities.entities[t.leaderId];if(!l||!l.diplomacy)return[I.FAILURE,"No diplomacy info"];const d=r.gameState.search.building.byRadius(t.position,150).filter(m=>{const S=m;if(S.buildingType!=="storageSpot"||!S.isConstructed||!S.storedFood||S.storedFood.length===0||S.ownerId===t.leaderId||l.diplomacy[S.ownerId]!==gt.Hostile)return!1;const w=kn({leaderId:S.ownerId},r.gameState);for(const E of w)if(V(t.position,E.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=yf)return!1;return!0});if(d.length===0)return[I.FAILURE,"No undefended storage available"];let f=null,p=1/0;for(const m of d){const S=V(t.position,m.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);S<p&&(p=S,f=m)}return f?p<=yn?(t.activeAction="idle",t.target=void 0,[I.SUCCESS,"Stealing food"]):(t.activeAction="moving",t.target=f.position,[I.RUNNING,`Moving to enemy storage (${p.toFixed(1)}px away)`]):[I.FAILURE,"No storage found"]},"Navigate to Enemy Storage and Steal",e+1)],"Steal Sequence",e)],"Storage Steal Behavior",e)}const Gd="enemiesNearby";function d1(e){const t=new J(s=>s.id===s.leaderId,"Is Leader?",e+1),r=new J(s=>!s.isCallingToAttack,"Is Not Already Calling?",e+1),o=new ce((s,u,d)=>{const f=jf(s,u.gameState,Gv);return f.length>0?(P.set(d,Gd,f.map(p=>p.id)),I.SUCCESS):I.FAILURE},"Find Nearby Enemies",e+1),l=new qt([new ge([new J((s,u,d)=>{const f=P.get(d,Gd),p=f==null?void 0:f.map(w=>u.gameState.entities.entities[w]).filter(w=>!!w);if(!p||p.length===0)return!1;const m=Qs(s.id,u.gameState),S=iu(m),y=iu(p);return S>y*OI},"Is Strong Enough?",e+3),new ce((s,u)=>(s.isCallingToAttack=!0,s.callToAttackEndTime=u.gameState.time+Do,Oe(u.gameState,ue.CallToAttack,s.position,Do),Ie(u,fe.CallToAttack,s.position),s.activeAction="idle",s.target=void 0,I.SUCCESS),"Issue Call to Attack",e+3)],"Attack",e+2),new ce((s,u,d)=>{const f=P.get(d,Gd),p=f==null?void 0:f.map(T=>u.gameState.entities.entities[T]).filter(T=>!!T);if(!p||p.length===0)return I.FAILURE;const m=p.map(T=>T.position),S=Wf(m),y=ze(S,s.position,u.gameState.mapDimensions.width,u.gameState.mapDimensions.height),w=nt(y),E=On(s.position,Pt(w,cv*2));return s.activeAction="moving",s.target={x:(E.x%u.gameState.mapDimensions.width+u.gameState.mapDimensions.width)%u.gameState.mapDimensions.width,y:(E.y%u.gameState.mapDimensions.height+u.gameState.mapDimensions.height)%u.gameState.mapDimensions.height},s.direction=w,I.SUCCESS},"Retreat",e+2)],"Attack or Retreat",e+2);return new ge([t,r,o,new Lr(MI,l,"Leader Combat Cooldown",e+1)],"Leader Combat Strategy",e)}const xd="combatTarget",$d="homeCenter";function f1(e){const t=new J(u=>u.isAdult&&u.leaderId?u.id!==u.leaderId:!1,"Is Tribe Follower?",e+1),r=new J(u=>u.hunger<aI&&u.hitpoints>=u.maxHitpoints*uv,"Is Fit for Combat?",e+1),o=new J((u,d)=>{const f=d.gameState.entities.entities[u.leaderId];return!!(f!=null&&f.isCallingToAttack)},"Is Leader Calling to Attack?",e+1),l=new ce((u,d,f)=>{const{gameState:p}=d,m=p.entities.entities[u.leaderId];if(!m)return I.FAILURE;const S=jf(m,p,pI);if(S.length===0)return I.FAILURE;S.sort((y,w)=>{const E=V(u.position,y.position,p.mapDimensions.width,p.mapDimensions.height),T=V(u.position,w.position,p.mapDimensions.width,p.mapDimensions.height);return E-T});for(const y of S)if(GE(m.id,y.id,p)<gI){P.set(f,xd,y.id);const E=er(m.id,p);return P.set(f,$d,E),I.SUCCESS}return I.FAILURE},"Find Best Target",e+1),s=new ce((u,d,f)=>{const p=P.get(f,xd),m=p&&d.gameState.entities.entities[p],S=P.get(f,$d);if(!m||!S)return I.FAILURE;const{gameState:y}=d;return V(u.position,S,y.mapDimensions.width,y.mapDimensions.height)>lv?(u.activeAction==="attacking"&&u.attackTargetId===m.id&&(u.activeAction="idle",u.attackTargetId=void 0),P.set(f,xd,void 0),P.set(f,$d,void 0),I.FAILURE):((!u.lastTargetAcquiredEffectTime||d.gameState.time-u.lastTargetAcquiredEffectTime>be*5)&&(Oe(d.gameState,ue.TargetAcquired,u.position,be,u.id),u.lastTargetAcquiredEffectTime=d.gameState.time),u.activeAction="attacking",u.attackTargetId=m.id,u.target=void 0,I.RUNNING)},"Attack Target",e+1);return new ge([t,r,o,l,s],"Tribe Member Combat",e)}function h1(e){const t=new J((m,S)=>{if(!m.isAdult||m.gender!=="male")return!1;const y=m.partnerIds&&m.partnerIds.length>0,w=Lt(S.gameState,m).length>0;return y||w},"Is Adult Male With Family?",e+1),r=new J((m,S)=>{var T;const y=Et(S.gameState);if(y){const C=mi(Lt(S.gameState,y));if((C==null?void 0:C.id)===m.id)return!1}if(!m.fatherId)return!1;const w=S.gameState.entities.entities[m.fatherId];return!w||((T=mi(Lt(S.gameState,w)))==null?void 0:T.id)===m.id?!1:V(m.position,w.position,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height)<SI},"Is Too Close To Father?",e+1),o=new J((m,S,y)=>P.get(y,"territoryMoveTarget")!==void 0,"Is Moving To Territory?",e+3),l=new ce((m,S,y)=>{const w=P.get(y,"territoryMoveTarget"),E=P.get(y,"territoryMoveStartTime");if(!w||!E)return[I.FAILURE,"Missing move data"];if(S.gameState.time-E>mI)return P.delete(y,"territoryMoveTarget"),P.delete(y,"territoryMoveStartTime"),[I.FAILURE,"Territory move timed out"];if(V(m.position,w,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height)<Fr)return P.delete(y,"territoryMoveTarget"),P.delete(y,"territoryMoveStartTime"),[I.SUCCESS,"Arrived at new territory"];m.activeAction="moving",m.target=w;const F=ze(m.position,m.target,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height);return m.direction=nt(F),[I.RUNNING,"Continuing move to territory"]},"Check Timeout & Arrival",e+3),s=new ge([o,l],"Handle In-Progress Move",e+2),u=new J((m,S,y)=>P.get(y,"territoryMoveTarget")===void 0,"Should Start New Move?",e+4),d=new ce((m,S,y)=>{const w=Yf(m.position,S.gameState.mapDimensions.width/4,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height);P.set(y,"territoryMoveTarget",w),P.set(y,"territoryMoveStartTime",S.gameState.time),m.activeAction="moving",m.target=w;const E=ze(m.position,m.target,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height);return m.direction=nt(E),[I.RUNNING,"Started moving to new territory"]},"Start New Territory Move",e+4),f=new ge([u,d],"Start New Territory Move Action",e+3),p=new qt([s,new Lr(AI,f,"Establish Territory Cooldown",e+2)],"Establish or Continue Move",e+1);return new ge([t,r,p],"Establish Family Territory",e)}function p1(e){return new ge([new ce((t,r,o)=>{const l=DE(t,r.gameState);return l?(P.set(o,"patriarchTarget",l.id),[I.SUCCESS,`Found patriarch: ${l.id}`]):(P.delete(o,"patriarchTarget"),[I.FAILURE,"No patriarch found"])},"Find Patriarch",e+1),new ce((t,r,o)=>{const l=P.get(o,"patriarchTarget"),s=l&&r.gameState.entities.entities[l];if(!s)return[I.FAILURE,"Patriarch target missing from blackboard"];const u=V(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(u>av){t.activeAction="moving",t.target=s.id;const d=ze(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return t.direction=nt(d),[I.RUNNING,`Moving to patriarch at ${u.toFixed(0)}`]}return t.activeAction="idle",t.target=void 0,t.direction={x:0,y:0},[I.SUCCESS,`Arrived at patriarch at ${u.toFixed(0)}`]},"Move Towards Patriarch",e+1)],"Follow Patriarch",e)}const zd="tribeSplitMigrationTarget";function g1(e){const t=new ge([new J((r,o)=>{const{canSplit:l,progress:s}=eh(r,o.gameState);return l?[!0,`Progress: ${(s??0)*100}%`]:[!1,"Cannot split"]},"Can Split Tribe?",e+2),new ce((r,o,l)=>{const{gameState:s}=o;let u=P.get(l,zd);if(!u){if(!r.leaderId)return I.FAILURE;const f=er(r.leaderId,s),p=SC(f,r,s);if(p)P.set(l,zd,p),u=p;else return I.FAILURE}return V(r.position,u,s.mapDimensions.width,s.mapDimensions.height)<Fr?(P.delete(l,zd),r.activeAction="idle",r.target=void 0,I.SUCCESS):(r.activeAction="moving",r.target=u,I.RUNNING)},"Move to New Territory",e+2),new ce((r,o)=>(th(r,o.gameState),I.SUCCESS),"Perform Tribe Split",e+2)],"Tribe Split Action",e+1);return new Lr(qw,t,"Tribe Split Cooldown",e)}const kl="jealousyAttackTarget";function m1(e){return new ge([new J((t,r,o)=>{if(!t.isAdult)return[!1,"Not an adult"];const l=UE(t,r.gameState,kI);return l?t.leaderId&&l.id===t.leaderId?[!1,"Stranger is in same tribe - no attack"]:(P.set(o,kl,l.id),[!0,`Partner cheating with ${l.id}`]):(P.delete(o,kl),!1)},"Check for Infidelity",e+1),new ce((t,r,o)=>{const l=P.get(o,kl),s=l&&r.gameState.entities.entities[l];return!s||s.hitpoints<=0?(P.delete(o,kl),[I.FAILURE,"Target is invalid or dead"]):t.activeAction==="attacking"&&t.attackTargetId===s.id?I.RUNNING:(t.activeAction="attacking",t.attackTargetId=s.id,[I.RUNNING,`Attacking ${s.id}`])},"Execute Jealousy Attack",e+1)],"Jealousy Attack",e)}const Fl="defendAggressor";function v1(e){return new ge([new J((t,r,o)=>{if(!t.isAdult)return[!1,"Not an adult"];const l=BE(t,r.gameState,FI);return l?(P.set(o,Fl,l.aggressor.id),[!0,`Family member ${l.familyMember.id} attacked by ${l.aggressor.id}`]):(P.delete(o,Fl),!1)},"Check Family Under Attack",e+1),new ce((t,r,o)=>{const l=P.get(o,Fl),s=l&&r.gameState.entities.entities[l];return!s||s.hitpoints<=0?(P.delete(o,Fl),[I.FAILURE,"Target invalid/dead"]):t.activeAction==="attacking"&&t.attackTargetId===s.id?I.RUNNING:(t.activeAction="attacking",t.attackTargetId=s.id,[I.RUNNING,`Attacking aggressor ${s.id}`])},"Execute Family Defense Attack",e+1)],"Defend Family",e)}const Ul="bushIntruder";function S1(e){return new ge([new J((t,r,o)=>{if(!t.isAdult)return[!1,"Not an adult"];const l=LE(t,r.gameState,UI);return l?(P.set(o,Ul,l.id),[!0,`Intruder ${l.id} stealing berries`]):(P.delete(o,Ul),!1)},"Check For Intruders on Bushes",e+1),new ce((t,r,o)=>{const l=P.get(o,Ul),s=l&&r.gameState.entities.entities[l];return!s||s.hitpoints<=0?(P.delete(o,Ul),[I.FAILURE,"Intruder is invalid or dead"]):t.activeAction==="attacking"&&t.attackTargetId===s.id?I.RUNNING:(t.activeAction="attacking",t.attackTargetId=s.id,[I.RUNNING,`Attacking intruder ${s.id}`])},"Execute Bush Defense Attack",e+1)],"Defend Claimed Bush",e)}const Ll="desperateAttackTarget";function y1(e){return new ge([new J(t=>t.hunger>LI,"Is Starving",e+1),new J((t,r)=>{if(!t.isAdult)return[!1,"Not an adult"];const o=De(t,r.gameState,"berryBush",It,s=>s.food.length>0),l=De(t,r.gameState,"corpse",It,s=>s.food.length>0);return!o&&!l},"No Other Food Available",e+1),new J((t,r,o)=>{const l=HE(t,r.gameState);return l?(P.set(o,Ll,l.id),[!0,`Found weak target ${l.id}`]):(P.delete(o,Ll),!1)},"Find Weak Target",e+1),new ce((t,r,o)=>{const l=P.get(o,Ll),s=l&&r.gameState.entities.entities[l];return!s||s.hitpoints<=0?(P.delete(o,Ll),[I.FAILURE,"Target is invalid or dead"]):t.activeAction==="attacking"&&t.attackTargetId===s.id?I.RUNNING:(t.activeAction="attacking",t.attackTargetId=s.id,[I.RUNNING,`Desperately attacking ${s.id}`])},"Execute Desperate Attack",e+1)],"Desperate Attack",e)}function A1(e,t,r,o){const l=e.entities.entities[r.targetEntityId];return!l||!("hitpoints"in l)||l.hitpoints<=0?(e.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):V(t.position,l.position,e.mapDimensions.width,e.mapDimensions.height)<=Zl?(t.activeAction="attacking",t.attackTargetId=l.id,e.autopilotControls.activeAutopilotAction=void 0,I.SUCCESS):(t.activeAction="moving",t.target=l.id,t.direction=Ft(t.position,l.position,e.mapDimensions),I.RUNNING)}function T1(e){return new ge([new J((t,r)=>t.isPlayer===!0&&!!r.gameState.autopilotControls.activeAutopilotAction,"Has Player Command",e+1),new ce((t,r)=>{var s;const{gameState:o}=r,l=o.autopilotControls.activeAutopilotAction;if(!l)return I.FAILURE;switch(l.action){case se.AutopilotMove:{const u=l.position;return V(t.position,u,o.mapDimensions.width,o.mapDimensions.height)<xI?(o.autopilotControls.activeAutopilotAction=void 0,t.activeAction==="moving"&&(t.activeAction="idle",t.target=void 0),I.SUCCESS):(t.activeAction="moving",t.target=u,t.direction=Ft(t.position,u,o.mapDimensions),I.RUNNING)}case se.AutopilotGather:{const u=o.entities.entities[l.targetEntityId];return!u||u.food.length===0?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):V(t.position,u.position,o.mapDimensions.width,o.mapDimensions.height)>Fr?(t.activeAction="moving",t.target=u.id,t.direction=Ft(t.position,u.position,o.mapDimensions),I.RUNNING):(t.activeAction="gathering",t.target=u.id,o.autopilotControls.activeAutopilotAction=void 0,I.SUCCESS)}case se.AutopilotAttack:return A1(o,t,l);case se.AutopilotProcreate:{const u=o.entities.entities[l.targetEntityId];return!u||u.type!=="human"||!Ur(t,u,r.gameState)?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):V(t.position,u.position,o.mapDimensions.width,o.mapDimensions.height)<=Zl?(t.activeAction="procreating",o.autopilotControls.activeAutopilotAction=void 0,I.SUCCESS):(t.activeAction="moving",t.target=u.id,t.direction=Ft(t.position,u.position,o.mapDimensions),I.RUNNING)}case se.AutopilotPlant:{if(t.activeAction==="planting")return I.RUNNING;const u=l.position;return Fn(u,o,Qi,t.id)?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):V(t.position,u,o.mapDimensions.width,o.mapDimensions.height)<=Zl?(t.activeAction="planting",t.target=u,o.autopilotControls.activeAutopilotAction=void 0,o.hasPlayerPlantedBush=!0,I.RUNNING):(t.activeAction="moving",t.target=u,t.direction=Ft(t.position,u,o.mapDimensions),I.RUNNING)}case se.AutopilotFeedChild:{const u=o.entities.entities[l.targetEntityId];return!u||u.type!=="human"||u.isAdult||t.food.length===0?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):V(t.position,u.position,o.mapDimensions.width,o.mapDimensions.height)<=Zl?(o.autopilotControls.activeAutopilotAction=void 0,t.activeAction="feeding",I.SUCCESS):(t.activeAction="moving",t.target=u.id,t.direction=Ft(t.position,u.position,o.mapDimensions),I.RUNNING)}case se.AutopilotDeposit:{const u=o.entities.entities[l.targetEntityId];if(!u||u.buildingType!=="storageSpot"||!u.isConstructed)return o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE;const d=u.storageCapacity??0;return(((s=u.storedFood)==null?void 0:s.length)??0)>=d||t.leaderId!==u.ownerId||t.food.length===0?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):V(t.position,u.position,o.mapDimensions.width,o.mapDimensions.height)<=yn?(t.activeAction="depositing",t.target=void 0,o.autopilotControls.activeAutopilotAction=void 0,I.SUCCESS):(t.activeAction="moving",t.target=u.id,t.direction=Ft(t.position,u.position,o.mapDimensions),I.RUNNING)}case se.AutopilotRetrieve:{const u=o.entities.entities[l.targetEntityId];return!u||u.buildingType!=="storageSpot"||!u.isConstructed||!u.storedFood||u.storedFood.length===0||t.leaderId!==u.ownerId||t.food.length>=t.maxFood?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):V(t.position,u.position,o.mapDimensions.width,o.mapDimensions.height)<=yn?(t.activeAction="retrieving",t.target=void 0,o.autopilotControls.activeAutopilotAction=void 0,I.SUCCESS):(t.activeAction="moving",t.target=u.id,t.direction=Ft(t.position,u.position,o.mapDimensions),I.RUNNING)}case se.AutopilotFollowMe:{const u=o.entities.entities[l.targetEntityId];return!u||u.type!=="human"||u.id!==u.leaderId?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):V(t.position,u.position,o.mapDimensions.width,o.mapDimensions.height)<=av?(o.autopilotControls.activeAutopilotAction=void 0,t.activeAction==="moving"&&(t.activeAction="idle"),I.SUCCESS):(t.activeAction="moving",t.target=u.id,t.direction=Ft(t.position,u.position,o.mapDimensions),I.RUNNING)}default:return o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE}},"Execute Player Command",e+1)],"Player Command Handler",e)}function I1(e){return new ge([new J(t=>!!t.leaderId&&t.leaderId!==t.id,"Is Follower",e+1),new J((t,r)=>{if(!t.leaderId)return!1;const o=r.gameState.entities.entities[t.leaderId];return!!o&&o.isCallingToFollow===!0},"Is Leader Calling To Follow",e+1),new J(t=>t.hunger<cI,"Is Not Critically Hungry",e+1),new ce((t,r)=>{if(!t.leaderId)return I.FAILURE;const o=r.gameState.entities.entities[t.leaderId];return o?V(t.position,o.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>uI?(t.activeAction="moving",t.target=o.id,t.direction=Ft(t.position,o.position,r.gameState.mapDimensions),I.RUNNING):(t.activeAction==="moving"&&t.target===o.id&&(t.activeAction="idle",t.target=void 0),I.SUCCESS):I.FAILURE},"Execute Follow Leader",e+1)],"Follow Leader Command",e)}const f0="tribeMigrationCheckCooldown";function E1(e){const t=new ge([new J(o=>!!o.leaderId&&o.leaderId===o.id,"Is Tribe Leader",e+2),new J((o,l)=>{const s=P.get(o.aiBlackboard,f0);return s?l.gameState.time-s>=Pm:!0},"Is Migration Check Cooldown Over",e+2),new ce((o,l)=>{o.aiBlackboard&&P.set(o.aiBlackboard,f0,l.gameState.time);const s=xE(o,l.gameState);return s?(o.isCallingToFollow=!0,o.callToFollowEndTime=l.gameState.time+Js,o.target=s,o.activeAction="moving",I.SUCCESS):I.FAILURE},"Execute Tribe Migration",e+2)],"Tribe Migration Strategy",e+1),r=new sa(t,pf,"Cache Tribe Migration",e+1);return new Lr(Pm,r,"Tribe Migration Cooldown",e)}function w1(e){const t=new J(o=>o.id===o.leaderId,"Is Leader?",e+1),r=new ce((o,l)=>{var p;const{gameState:s}=l,u=Qs(o.id,s),d=iu(u),f=Tv(s).filter(m=>m.leaderId!==o.id);for(const m of f){const S=Qs(m.leaderId,s),y=iu(S),w=((p=o.diplomacy)==null?void 0:p[m.leaderId])||gt.Friendly;d>y*DI?w!==gt.Hostile&&o.diplomacy&&(o.diplomacy[m.leaderId]=gt.Hostile):w!==gt.Friendly&&o.diplomacy&&(o.diplomacy[m.leaderId]=gt.Friendly)}return I.SUCCESS},"Evaluate Diplomacy",e+2);return new ge([t,new Lr(wI,r,"Diplomacy Cooldown",e+1)],"Manage Diplomacy",e)}const Bl="huntTarget";function C1(e){return new ge([new sa(new J((r,o,l)=>{var f;if(!r.isAdult)return[!1,"Not an adult"];if(!r.leaderId)return[!1,"Not in a tribe"];const s=er(r.leaderId,o.gameState),u=((f=Iv(s,o.gameState,"berryBush",_m))==null?void 0:f.map(p=>p.id))||[],d=De(s,o.gameState,"prey",_m,p=>typeof p.target=="number"&&u.includes(p.target));return d?(P.set(l,Bl,d.id),!0):!1},"Find Prey Target",e+2),EI,"Cache Find Prey",e+1),new su(new ce((r,o,l)=>{if(!r.leaderId)return I.FAILURE;const s=P.get(l,Bl);if(!s)return I.FAILURE;const u=o.gameState.entities.entities[s];if(!u||u.hitpoints<=0)return P.delete(l,Bl),r.activeAction="idle",r.attackTargetId=void 0,I.SUCCESS;const{gameState:d}=o,f=er(r.leaderId,d);return V(r.position,f,d.mapDimensions.width,d.mapDimensions.height)>lI?(P.delete(l,Bl),r.activeAction="idle",r.attackTargetId=void 0,I.FAILURE):(r.activeAction="attacking",r.attackTargetId=u.id,I.RUNNING)},"Hunt Prey Action",e+2),hf,"Hunt Prey Timeout",e+1)],"Human Hunt Prey Sequence",e)}const Hl="defendTarget",Wd=150;function _1(e){return new ge([new J((t,r,o)=>{if(!t.isAdult)return[!1,"Not an adult - children flee instead"];const{gameState:l}=r;if(t.activeAction==="attacking"&&t.attackTargetId){const u=l.entities.entities[t.attackTargetId];if(u&&u.type==="predator"&&u.hitpoints>0&&V(t.position,u.position,l.mapDimensions.width,l.mapDimensions.height)<=Wd)return P.set(o,Hl,u.id),[!0,"Continuing defense"]}const s=De(t,l,"predator",Wd,u=>u.hitpoints>0&&(u.isAdult||!1));if(s){const u=V(t.position,s.position,l.mapDimensions.width,l.mapDimensions.height),d=s.attackTargetId===t.id,f=u<80;if(d||f)return P.set(o,Hl,s.id),[!0,"Predator threat detected"]}return P.set(o,Hl,void 0),[!1,"No predator threat"]},"Detect Predator Threat",e+1),new ce((t,r,o)=>{const l=P.get(o,Hl),s=l&&r.gameState.entities.entities[l];if(!s)return I.FAILURE;const{gameState:u}=r,d=V(t.position,s.position,u.mapDimensions.width,u.mapDimensions.height);return s.hitpoints<=0||d>Wd*1.5?(t.activeAction="idle",t.attackTargetId=void 0,I.SUCCESS):(t.activeAction="attacking",t.attackTargetId=s.id,I.RUNNING)},"Defend Against Predator",e+1)],"Human Defend Against Predator",e)}function R1(e){return new ge([new J((t,r,o)=>{const l=De(t,r.gameState,"predator",zt*2,()=>!0),s=De(t,r.gameState,"human",zt*2,()=>!0);let u=null,d=1/0;if(l){const f=V(t.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);f<d&&(d=f,u=l)}if(s){const f=V(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);f<d&&(d=f,u=s)}return u&&d<zt*1.5?(P.set(o,"fleeThreat",u.id),P.set(o,"fleeDistance",d),!0):!1},"Detect Threat",e+1),new ce((t,r,o)=>{const l=P.get(o,"fleeThreat"),s=l&&r.gameState.entities.entities[l];if(!s)return I.FAILURE;t.activeAction="moving";const u=ze(s.position,t.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),d=nt(u),f=On(t.position,Pt(d,f_));return t.target={x:(f.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(f.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},t.direction=d,t.fleeCooldown=r.gameState.time+2,I.RUNNING},"Execute Flee",e+1)],"Prey Flee",e)}function P1(e){return new ge([new J((t,r,o)=>{if(!t.isAdult)return[!1,"Not an adult"];if(t.hunger<=30||t.eatingCooldownTime&&t.eatingCooldownTime>r.gameState.time)return!1;const l=De(t,r.gameState,"berryBush",zt*10,s=>s.food.length>0);return l?V(t.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=zt?(P.set(o,"grazingTarget",l.id),!0):(P.set(o,"grazingTarget",l.id),P.set(o,"needToMoveToTarget",!0),!0):!1},"Find Berry Bush",e+1),new ce((t,r,o)=>{const l=P.get(o,"grazingTarget"),s=l&&r.gameState.entities.entities[l],u=P.get(o,"needToMoveToTarget");if(!s)return I.FAILURE;const d=V(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(d<=zt)return t.activeAction="grazing",t.target=s.id,t.direction={x:0,y:0},P.delete(o,"needToMoveToTarget"),I.RUNNING;if(u||d>zt){t.activeAction="moving",t.target=s.id;const f=Ft(t.position,s.position,r.gameState.mapDimensions);return t.direction=f,I.RUNNING}return I.FAILURE},"Move to Bush or Graze",e+1)],"Prey Graze",e)}function N1(e){const t=new J((s,u,d)=>{const f=De(s,u.gameState,"prey",zt,p=>p.id!==s.id&&p.gender!==s.gender&&!!p.isAdult&&p.age>=Ws&&p.age<=Fd&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return f?(P.set(d,"procreationPartner",f.id),!0):!1},"Find Immediate Partner",e+2),r=new ce((s,u,d)=>{const f=P.get(d,"procreationPartner"),p=f&&u.gameState.entities.entities[f];return p?(s.activeAction="procreating",s.target=p.id,s.direction={x:0,y:0},P.delete(d,"procreationPartner"),I.SUCCESS):I.FAILURE},"Start Procreating",e+2),o=new J((s,u,d)=>{const f=De(s,u.gameState,"prey",zt*10,p=>p.id!==s.id&&p.gender!==s.gender&&!!p.isAdult&&p.age>=Ws&&p.age<=Fd&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return f?(P.set(d,"procreationPartner",f.id),!0):!1},"Locate Distant Partner",e+2),l=new ce((s,u,d)=>{const f=P.get(d,"procreationPartner"),p=f&&u.gameState.entities.entities[f];if(!p)return I.FAILURE;if(V(s.position,p.position,u.gameState.mapDimensions.width,u.gameState.mapDimensions.height)<=zt)return I.SUCCESS;s.activeAction="moving",s.target=p.id;const S=ze(s.position,p.position,u.gameState.mapDimensions.width,u.gameState.mapDimensions.height);return s.direction=nt(S),I.RUNNING},"Move Towards Partner",e+2);return new ge([new J(s=>!!(s.isAdult&&!s.isPregnant&&s.age>=Ws&&s.age<=Fd&&s.hunger<200&&(!s.procreationCooldown||s.procreationCooldown<=0)),"Is Fertile and Ready",e+1),new qt([new ge([t,r],"Procreate With Immediate Partner",e+2),new ge([o,l],"Seek Distant Partner",e+2)],"Find Partner And Procreate",e+1)],"Prey Procreate",e)}const D1=(e,t,r)=>{const o=t.gameState.search.prey.byProperty("motherId",e.id).filter(u=>!u.isAdult&&u.type==="prey");if(o.length===0)return I.FAILURE;let l=null,s=Tu;for(const u of o)u.hunger>=s&&(s=u.hunger,l=u);return l?(P.set(r,"targetChild",l.id),I.SUCCESS):I.FAILURE},O1=(e,t,r)=>{const o=P.get(r,"targetChild"),l=o&&t.gameState.entities.entities[o];return l?V(e.position,l.position,t.gameState.mapDimensions.width,t.gameState.mapDimensions.height)>Bo?(e.activeAction="moving",e.target=l.id,e.direction=Ft(e.position,l.position,t.gameState.mapDimensions),I.RUNNING):(e.activeAction="feeding",e.target=void 0,P.set(r,"targetChild",void 0),I.SUCCESS):I.FAILURE};function M1(e){return new ge([new J(t=>(t.isAdult&&t.gender==="female"&&t.hunger<80&&(!t.feedChildCooldownTime||t.feedChildCooldownTime<=0))??!1,"Can Feed Child (Female Only)",e+1),new ce(D1,"Find Hungriest Prey Child",e+1),new ce(O1,"Move To Child and Feed",e+1)],"Feed Prey Child",e)}function k1(e){return new ge([new J(t=>!t.isAdult&&t.hunger>=Tu,"Is Hungry Prey Child",e+1),new ce((t,r,o)=>{if(!t.motherId)return I.FAILURE;const l=r.gameState.entities.entities[t.motherId];return l?(P.set(o,"targetParent",l.id),I.SUCCESS):I.FAILURE},"Find Female Parent",e+1),new ce((t,r,o)=>{const l=P.get(o,"targetParent"),s=l&&r.gameState.entities.entities[l];if(!s)return I.FAILURE;const u=V(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return t.activeAction="idle",u<=Bo?(t.target=void 0,I.SUCCESS):(t.target=s.id,t.activeAction="moving",I.RUNNING)},"Move To Female Parent",e+1)],"Seek Food From Female Parent",e)}function F1(e){return new ge([new J((t,r,o)=>{if(!t.isAdult)return[!1,"Not an adult"];if(t.hunger<=50||t.huntCooldown&&t.huntCooldown>0)return!1;const l=De(t,r.gameState,"prey",po*10,s=>s.hitpoints>0);if(l){const s=V(t.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(s<=po)return P.set(o,"huntTarget",l.id),!0;if(s<=po*10)return P.set(o,"huntTarget",l.id),P.set(o,"needToApproach",!0),!0}return!1},"Find Prey Target",e+1),new su(new ce((t,r,o)=>{const l=P.get(o,"huntTarget"),s=l&&r.gameState.entities.entities[l],u=P.get(o,"needToApproach");if(!s||s.hitpoints<=0)return I.FAILURE;const d=V(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(d<=po)return t.activeAction="attacking",t.attackTargetId=s.id,t.target=s.id,t.direction={x:0,y:0},P.delete(o,"needToApproach"),I.RUNNING;if(u||d>po){t.activeAction="moving",t.target=s.id;const f=ze(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return t.direction=nt(f),I.RUNNING}return I.FAILURE},"Hunt or Approach Prey",e+2),10,"Hunt Timeout (10 hour)",e+1)],"Predator Hunt",e)}function U1(e){return new ge([new J((t,r,o)=>{const l=t.hunger>100,s=t.hitpoints<t.maxHitpoints*.5;if(!l&&!s||t.attackCooldown&&t.attackCooldown>0)return!1;const u=De(t,r.gameState,"human",Nn*2,d=>d.hitpoints>0);if(u){const d=V(t.position,u.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(d<=Nn)return P.set(o,"attackTarget",u.id),!0;if(l&&d<=Nn*2)return P.set(o,"attackTarget",u.id),P.set(o,"needToApproach",!0),!0}return!1},"Find Human Target",e+1),new ce((t,r,o)=>{const l=P.get(o,"attackTarget"),s=l&&r.gameState.entities.entities[l],u=P.get(o,"needToApproach");if(!s||s.hitpoints<=0)return I.FAILURE;const d=V(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(d<=Nn)return t.activeAction="attacking",t.attackTargetId=s.id,t.target=s.id,t.direction={x:0,y:0},P.delete(o,"needToApproach"),I.RUNNING;if(u||d>Nn){t.activeAction="moving",t.target=s.id;const f=ze(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return t.direction=nt(f),I.RUNNING}return I.FAILURE},"Attack or Approach Human",e+1)],"Predator Attack Human",e)}function L1(e){const t=new J((s,u,d)=>{const f=De(s,u.gameState,"predator",Zi,p=>p.id!==s.id&&p.gender!==s.gender&&!!p.isAdult&&p.age>=Ys&&p.age<=Ud&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return f?(P.set(d,"procreationPartner",f.id),!0):!1},"Find Immediate Partner",e+2),r=new ce((s,u,d)=>{const f=P.get(d,"procreationPartner"),p=f&&u.gameState.entities.entities[f];return p?(s.activeAction="procreating",s.target=p.id,s.direction={x:0,y:0},P.delete(d,"procreationPartner"),I.SUCCESS):I.FAILURE},"Start Procreating",e+2),o=new J((s,u,d)=>{const f=De(s,u.gameState,"predator",Zi*10,p=>p.id!==s.id&&p.gender!==s.gender&&!!p.isAdult&&p.age>=Ys&&p.age<=Ud&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return f?(P.set(d,"procreationPartner",f.id),!0):!1},"Locate Distant Partner",e+2),l=new ce((s,u,d)=>{const f=P.get(d,"procreationPartner"),p=f&&u.gameState.entities.entities[f];if(!p)return I.FAILURE;if(V(s.position,p.position,u.gameState.mapDimensions.width,u.gameState.mapDimensions.height)<=Zi)return I.SUCCESS;s.activeAction="moving",s.target=p.id;const S=ze(s.position,p.position,u.gameState.mapDimensions.width,u.gameState.mapDimensions.height);return s.direction=nt(S),I.RUNNING},"Move Towards Partner",e+2);return new ge([new J(s=>!!(s.isAdult&&!s.isPregnant&&s.age>=Ys&&s.age<=Ud&&s.hunger<200&&(!s.procreationCooldown||s.procreationCooldown<=0)),"Is Fertile and Ready",e+1),new qt([new ge([t,r],"Procreate With Immediate Partner",e+2),new ge([o,l],"Seek Distant Partner",e+2)],"Find Partner And Procreate",e+1)],"Predator Procreate",e)}const B1=(e,t,r)=>{const o=t.gameState.search.predator.byProperty("motherId",e.id).filter(u=>!u.isAdult&&u.type==="predator");if(o.length===0)return I.FAILURE;let l=null,s=Tu;for(const u of o)u.hunger>=s&&(s=u.hunger,l=u);return l?(P.set(r,"targetChild",l.id),I.SUCCESS):I.FAILURE},H1=(e,t,r)=>{const o=P.get(r,"targetChild"),l=o&&t.gameState.entities.entities[o];return l?V(e.position,l.position,t.gameState.mapDimensions.width,t.gameState.mapDimensions.height)>Bo?(e.activeAction="moving",e.target=l.id,e.direction=Ft(e.position,l.position,t.gameState.mapDimensions),I.RUNNING):(e.activeAction="feeding",e.target=void 0,P.set(r,"targetChild",void 0),I.SUCCESS):I.FAILURE};function b1(e){return new ge([new J(t=>(t.isAdult&&t.gender==="female"&&t.hunger<90&&(!t.feedChildCooldownTime||t.feedChildCooldownTime<=0))??!1,"Can Feed Child (Female Only)",e+1),new ce(B1,"Find Hungriest Predator Child",e+1),new ce(H1,"Move To Child and Feed",e+1)],"Feed Predator Child",e)}function G1(e){return new ge([new J(t=>!t.isAdult&&t.hunger>=Tu,"Is Hungry Predator Child",e+1),new ce((t,r,o)=>{if(!t.motherId)return I.FAILURE;const l=r.gameState.entities.entities[t.motherId];return l?(P.set(o,"targetParent",l.id),I.SUCCESS):I.FAILURE},"Find Female Parent",e+1),new ce((t,r,o)=>{const l=P.get(o,"targetParent"),s=l&&r.gameState.entities.entities[l];if(!s)return I.FAILURE;const u=V(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return t.activeAction="idle",u<=Bo?(t.target=void 0,I.SUCCESS):(t.target=s.id,t.activeAction="moving",I.RUNNING)},"Move To Female Parent",e+1)],"Seek Food From Female Parent",e)}function lS(e){return new ce((t,r,o)=>{t.activeAction="idle";let l=P.get(o,"wanderTarget"),s=P.get(o,"wanderStartTime");const u=r.gameState.time;if(!l||!s||u-s>2){const d=Math.random()*2*Math.PI,f=50+Math.random()*100,p={x:Math.cos(d),y:Math.sin(d)},m=On(t.position,Pt(p,f));l={x:(m.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(m.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},P.set(o,"wanderTarget",l),P.set(o,"wanderStartTime",u)}if(l){t.target=l;let d=l.x-t.position.x,f=l.y-t.position.y;const p=r.gameState.mapDimensions.width,m=r.gameState.mapDimensions.height;Math.abs(d)>p/2&&(d=d>0?d-p:d+p),Math.abs(f)>m/2&&(f=f>0?f-m:f+m);const S=nt({x:d,y:f});t.direction=S}return I.SUCCESS},"Animal Wander",e)}function x1(e){return new ge([new J((t,r,o)=>{if(t.hunger>90||t.hitpoints<t.maxHitpoints*.3||t.activeAction==="grazing"||t.activeAction==="procreating")return!1;const l=Object.values(r.gameState.entities.entities),s=[];for(const u of l)if(u.type==="prey"&&u.id!==t.id){const d=u;d.hitpoints>0&&d.isAdult&&V(t.position,d.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=zt*5&&s.push(d)}if(s.length>=2){let u=0,d=0;for(const m of s)u+=m.position.x,d+=m.position.y;u/=s.length,d/=s.length;const f={x:u,y:d};if(V(t.position,f,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>zt*2)return P.set(o,"herdCenter",f),P.set(o,"herdSize",s.length),!0}return!1},"Find Herd",e+1),new ce((t,r,o)=>{const l=P.get(o,"herdCenter");if(!l)return I.FAILURE;if(V(t.position,l,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>zt*2){t.activeAction="moving",t.target=l;const u=ze(t.position,l,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return t.direction=nt(u),I.RUNNING}else return t.activeAction="idle",t.direction={x:0,y:0},I.SUCCESS},"Join Herd",e+1)],"Prey Herd Behavior",e)}function $1(e){return new ge([new J((t,r,o)=>{if(t.hunger>100||t.hitpoints<t.maxHitpoints*.4||t.activeAction==="attacking"||t.activeAction==="procreating")return!1;const l=De(t,r.gameState,"predator",Zi*4,s=>s.id!==t.id&&s.hitpoints>0&&s.isAdult&&t.fatherId!==void 0&&s.fatherId===t.fatherId&&s.age>=t.age||s.hitpoints>t.hitpoints);return l&&V(t.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Zi*2?(P.set(o,"packLeader",l.id),!0):!1},"Find Pack Leader",e+1),new ce((t,r,o)=>{const l=P.get(o,"packLeader"),s=l&&r.gameState.entities.entities[l];if(!s||s.hitpoints<=0)return I.FAILURE;if(V(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Zi*2){t.activeAction="moving",t.target=s.id;const d=ze(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return t.direction=nt(d),I.RUNNING}else return t.activeAction="idle",t.direction={x:0,y:0},I.SUCCESS},"Follow Pack Leader",e+1)],"Predator Pack Behavior",e)}function z1(e){return new ge([new J((t,r,o)=>{if(!t.isAdult||t.hitpoints<t.maxHitpoints*.6||t.hunger>120||t.attackCooldown&&t.attackCooldown>0)return!1;const l=De(t,r.gameState,"predator",r0,s=>!!(s.id!==t.id&&s.hitpoints>0&&s.isAdult&&t.fatherId!==s.fatherId&&t.gender===s.gender&&t.fatherId!==void 0&&s.fatherId!==void 0));if(l){const s=V(t.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(s<=Nn)return P.set(o,"territorialTarget",l.id),!0;if(s<=r0)return P.set(o,"territorialTarget",l.id),P.set(o,"needToApproach",!0),!0}return!1},"Find Territorial Rival",e+1),new ce((t,r,o)=>{const l=P.get(o,"territorialTarget"),s=l&&r.gameState.entities.entities[l],u=P.get(o,"needToApproach");if(!s||s.hitpoints<=0)return I.FAILURE;const d=V(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(d<=Nn)return t.activeAction="attacking",t.attackTargetId=s.id,t.target=s.id,t.direction={x:0,y:0},P.delete(o,"needToApproach"),I.RUNNING;if(u||d>Nn){t.activeAction="moving",t.target=s.id;const f=ze(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return t.direction=nt(f),I.RUNNING}return I.FAILURE},"Territorial Fight or Approach",e+1)],"Predator Territorial Defense",e)}function W1(){const e=new qt([X_(2),v1(2),_1(2),m1(2),S1(2),y1(2),T1(2),new Ns(d1(3),"Gated Leader Combat Strategy",2),new Ns(w1(3),"Gated Diplomacy",2),f1(2),new Vn(c1(3),"attack","Gated Storage Steal",2),new Vn(e1(3),"attack","Gated Attacking",2),V_(2),new Vn(u1(3),"gathering","Gated Storage Retrieve",2),new su(new Vn(q_(4),"gathering","Gated Gathering",3),hf,"Timeout Gathering",2),new Vn(l1(3),"gathering","Gated Storage Deposit",2),new Vn(i1(3),"feedChildren","Gated Feed Child",2),r1(2),new su(new Vn(a1(4),"planting","Gated Planting",3),hf,"Timeout Planting",2),new Vn(C1(3),"attack","Gated Hunt Prey",2),new Vn(J_(3),"procreation","Gated Procreation",2),new sa(g1(3),pf,"Cache Tribe Split",2),new Ns(E1(3),"Gated Tribe Migration",2),new sa(h1(3),pf,"Cache Establish Territory",2),new Vn(I1(3),"followLeader","Gated Follow Leader",2),new Ns(p1(2),"Gated Follow Patriarch",2),new Ns(Q_(2),"Gated Idle Wander",2)],"AI Root Selector",1);return new j_(e,"Manual Control Gate",0)}const uS=W1();function Y1(e,t){e.aiBlackboard&&P.cleanupOldEntries(e.aiBlackboard,t.gameState.time);const r=performance.now();switch(e.aiType){case da.BehaviorTreeBased:default:oh(e,t,uS);break}t.gameState.performanceMetrics.currentBucket.aiUpdateTime+=performance.now()-r}function j1(){return new qt([R1(1),M1(1),k1(1),P1(1),N1(1),x1(1),lS(1)],"Prey Behavior Root",0)}function V1(){return new qt([F1(1),U1(1),b1(1),G1(1),z1(1),L1(1),$1(1),lS(1)],"Predator Behavior Root",0)}const cS=j1();function X1(e,t){e.aiBlackboard?oh(e,t,cS):(console.warn(`Behavior Tree AI ticked for prey ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle")}const dS=V1();function K1(e,t){e.aiBlackboard?oh(e,t,dS):(console.warn(`Behavior Tree AI ticked for predator ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle")}function Z1(e,t){const{gameState:r,deltaTime:o}=t,l=o*(At/Tt);if(e.isBeingDestroyed){const s=PC(e.buildingType);if(s>0?e.destructionProgress+=l/s:e.destructionProgress=1,e.destructionProgress>=1){bo(r.entities,e.id);return}}if(!e.isConstructed&&!e.isBeingDestroyed){const s=RC(e.buildingType);s>0?e.constructionProgress+=l/s:e.constructionProgress=1,e.constructionProgress>=1&&(e.constructionProgress=1,e.isConstructed=!0)}}function q1(e,t){e.forces.push(Pt(e.velocity,-.1));const r=Pt(nt(e.direction),e.acceleration);e.forces.push(r),e.debuffs.forEach(o=>{t.gameState.time-o.startTime<o.duration&&o.type==="slow"&&(e.velocity=Pt(e.velocity,.5))}),e.debuffs=e.debuffs.filter(o=>t.gameState.time-o.startTime<o.duration),e.velocity=On(e.velocity,e.forces.reduce(On,{x:0,y:0})),Po(e.velocity)<.001&&(e.velocity={x:0,y:0}),e.position=On(e.position,Pt(e.velocity,t.deltaTime)),e.position.x=(e.position.x%t.gameState.mapDimensions.width+t.gameState.mapDimensions.width)%t.gameState.mapDimensions.width,e.position.y=(e.position.y%t.gameState.mapDimensions.height+t.gameState.mapDimensions.height)%t.gameState.mapDimensions.height,e.forces=[],e.type==="human"?G_(e,t,t.deltaTime):e.type==="corpse"?x_(e,t):e.type==="prey"?$_(e,t,t.deltaTime):e.type==="predator"?z_(e,t,t.deltaTime):e.type==="building"&&Z1(e,t),e.type==="human"&&Y1(e,t),e.type==="prey"?X1(e,t):e.type==="predator"&&K1(e,t),e.stateMachine&&(e.stateMachine=b_(...e.stateMachine,{entity:e,updateContext:t}))}function Q1(e){const t=e.gameState.entities;Object.values(t.entities).forEach(r=>{q1(r,e)})}function fS(){return{entities:{},nextEntityId:1}}function Ho(e,t,r){const o={id:e.nextEntityId++,type:t,velocity:{x:0,y:0},direction:{x:0,y:0},acceleration:0,forces:[],debuffs:[],...r};return e.entities[o.id]=o,o}function fa(e,t,r){return Ho(e,"berryBush",{position:t,radius:df,food:Array.from({length:QT},()=>({type:Mn.Berry})).map(l=>({...l,id:e.nextEntityId++})),maxFood:qT,lifespan:eI,age:0,spreadRadius:df,timeSinceLastBerryRegen:0,timeSinceLastSpreadAttempt:0,timeSinceLastHarvest:0,stateMachine:[bs,{enteredAt:r,previousState:void 0}]})}function au(e,t,r,o,l=!1,s=nE,u=hv,d,f,p=[],m,S){const y=s>=Bf;return Ho(e,"human",{position:t,radius:y?wt:Uo,hunger:u,hitpoints:Mm,maxHitpoints:Mm,age:s,gender:o,isPlayer:l,food:[],maxFood:fv,maxAge:qs,isAdult:y,isPregnant:!1,gestationTime:0,procreationCooldown:0,attackCooldown:0,motherId:d,fatherId:f,ancestorIds:p,stateMachine:[ut,{enteredAt:r,previousState:void 0}],leaderId:m,tribeBadge:S,aiType:da.BehaviorTreeBased,aiBlackboard:P.create()})}function sh(e,t,r,o,l,s,u,d,f,p,m){let S,y;switch(u){case"human":S=mv,y=kr;break;case"prey":S=2,y=120;break;case"predator":S=4,y=140;break}return Ho(e,"corpse",{position:t,radius:l,gender:r,age:o,originalEntityId:s,originalEntityType:u,timeOfDeath:d,decayProgress:0,geneCode:m,food:[...Array.from({length:Math.max(S*Math.max(y-p,0)/y,0)},()=>({type:Mn.Meat})),...f].map(E=>({...E,id:e.nextEntityId++})),stateMachine:void 0})}function J1(e,t,r,o,l,s,u,d,f){return sh(e,t,r,o,l,s,"human",u,d,f)}function eR(e,t,r,o,l,s,u,d){return sh(e,t,r,o,l,s,"prey",u,[],0,d)}function tR(e,t,r,o,l,s,u,d){return sh(e,t,r,o,l,s,"predator",u,[],0,d)}function nR(e,t,r){const o=t?r.gameState.entities.entities[t]:void 0,l=[...e.ancestorIds||[],e.id],s=o?[...o.ancestorIds||[],o.id]:[],u=[...l,...s],d=[...new Set(u)],f=d.slice(Math.max(d.length-QI,0)),p=Math.random()<.5?"male":"female",m=On(e.position,{x:5,y:5}),S=au(r.gameState.entities,m,r.gameState.time,p,!1,0,hv/2,e.id,t,f,(o==null?void 0:o.leaderId)??e.leaderId,(o==null?void 0:o.tribeBadge)??e.tribeBadge);return Ie(r,fe.Birth,e.position),S}function bo(e,t){return e.entities[t]?(delete e.entities[t],!0):!1}function Oo(e,t,r,o=d_,l=Qv,s,u,d){const f=o>=Ws,p=Date.now();return Ho(e,"prey",{position:t,radius:f?wt*.7:Uo*.7,hunger:l,hitpoints:n0,maxHitpoints:n0,age:o,maxAge:qv,gender:r,isAdult:f,isPregnant:!1,gestationTime:0,procreationCooldown:0,geneCode:s,motherId:u,fatherId:d,stateMachine:[Pn,{enteredAt:p,previousState:void 0}],aiType:da.BehaviorTreeBased,aiBlackboard:P.create()})}function Mo(e,t,r,o=y_,l=eS,s,u,d){const f=o>=Ys,p=Date.now();return Ho(e,"predator",{position:t,radius:f?wt*.9:Uo*.9,hunger:l,hitpoints:i0,maxHitpoints:i0,age:o,maxAge:Jv,gender:r,isAdult:f,isPregnant:!1,gestationTime:0,procreationCooldown:0,geneCode:s,motherId:u,fatherId:d,stateMachine:[$t,{enteredAt:p,previousState:void 0}],aiType:da.BehaviorTreeBased,aiBlackboard:P.create()})}function iR(e,t,r,o){const l=Yv(r),s={position:t,radius:Math.max(l.width,l.height)/2,buildingType:r,ownerId:o,width:l.width,height:l.height,constructionProgress:0,destructionProgress:0,isConstructed:!1,isBeingDestroyed:!1};return Ho(e,"building",{...s,...r===na.StorageSpot&&{storedFood:[],storageCapacity:yC,lastDepositTime:0,lastRetrieveTime:0,lastStealTime:0}})}var Gt=(e=>(e.MOVE="MOVE",e.HUNGER="HUNGER",e.EAT="EAT",e.FIND_BUSH="FIND_BUSH",e.GATHER="GATHER",e.PROCREATE="PROCREATE",e.PLANT_BUSH="PLANT_BUSH",e.AUTOPILOT="AUTOPILOT",e.ANIMALS_INTRODUCTION="ANIMALS_INTRODUCTION",e.HUNT_PREY="HUNT_PREY",e.DEFEND_FROM_PREDATORS="DEFEND_FROM_PREDATORS",e))(Gt||{}),Dr=(e=>(e.HUNGER_BAR="HUNGER_BAR",e.FOOD_BAR="FOOD_BAR",e.COMMAND_BUTTONS="COMMAND_BUTTONS",e))(Dr||{}),xt=(e=>(e[e.FADING_IN=0]="FADING_IN",e[e.ACTIVE=1]="ACTIVE",e[e.FADING_OUT=2]="FADING_OUT",e[e.INACTIVE=3]="INACTIVE",e))(xt||{});const Af={},Tf={},rR=[{key:Gt.MOVE,title:"Movement",text:"Use WASD or Arrow Keys to move your character around the world.",condition:e=>e.hasPlayerMovedEver||e.hasPlayerEnabledAutopilot>2,isCompleted:!1},{key:Gt.HUNGER,title:"Hunger",text:"Your character gets hungry over time. Watch the hunger bar!",condition:(e,t)=>t.hunger>JI,isCompleted:!1,minDisplayTime:Vm,highlightedUIElements:[Dr.HUNGER_BAR]},{key:Gt.FIND_BUSH,title:"Find Food",text:"Look for berry bushes. They are your primary source of food.",condition:(e,t)=>!!De(t,e,"berryBush",It*5,o=>o.food.length>0),getTargets:(e,t)=>{const r=[];for(const o of Object.values(e.entities.entities))o.type==="berryBush"&&o.food.length>0&&V(t.position,o.position,e.mapDimensions.width,e.mapDimensions.height)<500&&r.push(o);return r.map(o=>o.id)},isCompleted:!1,minDisplayTime:Vm},{key:Gt.GATHER,title:"Gather Berries",text:"Get close to a bush and press 'E' to gather berries.",condition:(e,t)=>t.food.length>0,getTargets:(e,t)=>{const r=De(t,e,"berryBush",It,o=>o.food.length>0);return r?[r.id]:[]},isCompleted:!1},{key:Gt.EAT,title:"Eat",text:"When you are hungry and have food, press 'F' to eat.",condition:(e,t)=>t.activeAction==="eating",isCompleted:!1,highlightedUIElements:[Dr.FOOD_BAR]},{key:Gt.PROCREATE,title:"Procreate",text:"Find a mate and press 'R' to start a family. This is how you continue your lineage.",condition:(e,t)=>Lt(e,t).length>0,getTargets:(e,t)=>{const r=De(t,e,"human",It,o=>Ur(t,o,e));return r?[r.id]:[]},isCompleted:!1},{key:Gt.PLANT_BUSH,title:"Farming",text:"You can plant new berry bushes. Carry some berries and press 'B' to plant.",condition:(e,t)=>nh(e,t).some(o=>o.type===se.Plant)||e.hasPlayerPlantedBush===!0,isCompleted:!1},{key:Gt.AUTOPILOT,title:"Autopilot!",text:"You can turn autopilot for specific actions, press Shift and click on the action button to enable it.",condition:e=>e.hasPlayerEnabledAutopilot>2,highlightedUIElements:[Dr.COMMAND_BUTTONS],isCompleted:!1},{key:Gt.ANIMALS_INTRODUCTION,title:"Wild Animals!",text:"Your world now has wild animals! Prey provide meat when hunted, but beware of predators that may attack.",condition:e=>Object.values(e.entities.entities).some(r=>r.type==="prey"||r.type==="predator"),isCompleted:!1,dependsOn:Gt.AUTOPILOT},{key:Gt.HUNT_PREY,title:"Hunt for Meat",text:"Click on prey animals to hunt them for meat. Hunting provides more food than gathering berries!",condition:(e,t)=>{const r=De(t,e,"prey",150);return t.hunger>40&&!!r},getTargets:(e,t)=>{const r=De(t,e,"prey",150);return r?[r.id]:[]},isCompleted:!1,dependsOn:Gt.ANIMALS_INTRODUCTION},{key:Gt.DEFEND_FROM_PREDATORS,title:"Predators",text:"Predators may attack when hungry! Click on them to fight back. Fighting together with family is more effective.",condition:(e,t)=>!!De(t,e,"predator",120),getTargets:(e,t)=>{const r=De(t,e,"predator",120);return r?[r.id]:[]},isCompleted:!1,dependsOn:Gt.HUNT_PREY}].map(e=>({...e,condition:e.condition?aR(e.condition):void 0,getTargets:e.getTargets?lR(e.getTargets):void 0}));function hS(){return{steps:rR.map(e=>({...e,isCompleted:!1}))}}function pS(){return{currentStepIndex:0,completedSteps:[],isActive:!0,transitionState:xt.FADING_IN,transitionAlpha:0,highlightedEntityIds:[],stepStartTime:null,activeUIHighlights:[]}}function oR(e){for(let t=0;t<e.tutorial.steps.length;t++){const r=e.tutorial.steps[t];if(!r.isCompleted)if(r.dependsOn){if(e.tutorialState.completedSteps.includes(r.dependsOn))return t}else return t}return null}function sR(e,t){const r=e.tutorialState;if(!r.isActive){r.transitionState=xt.INACTIVE,r.highlightedEntityIds=[],r.activeUIHighlights=[];return}const o=Et(e);if(!o){r.isActive=!1,r.transitionState=xt.INACTIVE,r.highlightedEntityIds=[],r.activeUIHighlights=[];return}const l=e.tutorial.steps[r.currentStepIndex];if(!l){r.isActive=!1,r.transitionState=xt.INACTIVE,r.highlightedEntityIds=[],r.activeUIHighlights=[];return}const s=1/Mw;switch(r.transitionState){case xt.FADING_IN:r.stepStartTime===null&&(r.stepStartTime=e.time),r.transitionAlpha+=s*t,r.transitionAlpha>=1&&(r.transitionAlpha=1,r.transitionState=xt.ACTIVE);break;case xt.ACTIVE:{const f=e.time-(r.stepStartTime||e.time)>=(l.minDisplayTime||0),p=Af[l.condition];p&&f&&p(e,o)&&(l.isCompleted=!0,r.completedSteps.includes(l.key)||r.completedSteps.push(l.key),r.transitionState=xt.FADING_OUT);break}case xt.FADING_OUT:if(r.transitionAlpha-=s*t,r.transitionAlpha<=0){r.transitionAlpha=0,r.stepStartTime=null;const d=oR(e);d!==null?(r.currentStepIndex=d,r.transitionState=xt.FADING_IN):(r.isActive=!1,r.transitionState=xt.INACTIVE)}break}if(r.transitionState!==xt.FADING_OUT&&r.transitionState!==xt.INACTIVE){const d=Tf[l.getTargets||""];d?r.highlightedEntityIds=[...d(e,o)]:r.highlightedEntityIds=[],l.highlightedUIElements?r.activeUIHighlights=[...l.highlightedUIElements]:r.activeUIHighlights=[]}else r.highlightedEntityIds=[],r.activeUIHighlights=[]}function aR(e){const t=`condition_${Object.keys(Af).length+1}`;return Af[t]=e,t}function lR(e){const t=`getTargets_${Object.keys(Tf).length+1}`;return Tf[t]=e,t}function uR(){const e=fS(),t=0;for(let S=0;S<ov;S++){const y={x:Math.random()*et,y:Math.random()*tt};fa(e,y,t)}const r=et/2,o=tt/2,l=au(e,{x:r,y:o},t,"male",!0);au(e,{x:r+50,y:o},t,"female",!1);for(let S=0;S<iS;S++){const y={x:r+et*(Math.random()-Math.random()),y:o+tt*(Math.random()-Math.random())};Oo(e,y,"male",void 0,void 0,ra()),Oo(e,{x:y.x+20,y:y.y},"female",void 0,void 0,ra())}const s={x:r+et*(Math.random()-Math.random()),y:o+tt*(Math.random()-Math.random())};Mo(e,s,"male",void 0,void 0,oa()),Mo(e,{x:s.x+20,y:s.y},"female",void 0,void 0,oa());const u=[{id:"muteButton",action:pe.ToggleMute,currentWidth:di,rect:{x:0,y:0,width:0,height:0},text:"",backgroundColor:"",textColor:vn},{id:"pauseButton",action:pe.TogglePause,currentWidth:di,rect:{x:0,y:0,width:0,height:0},text:"",backgroundColor:"",textColor:vn},{id:"returnToIntroButton",action:pe.ReturnToIntro,currentWidth:di,rect:{x:0,y:0,width:0,height:0},text:"EXIT",backgroundColor:"",textColor:vn}],d=hS(),f=pS(),p={time:t,entities:e,mapDimensions:{width:et,height:tt},generationCount:1,gameOver:!1,visualEffects:[],nextVisualEffectId:0,viewportCenter:{...l.position},isPaused:!1,exitConfirmation:"inactive",autopilotControls:{behaviors:{procreation:!1,planting:!1,gathering:!1,attack:!1,feedChildren:!0,followLeader:!1},hoveredAutopilotAction:void 0,activeAutopilotAction:void 0,isManuallyMoving:!1},buildMenuOpen:!1,selectedBuildingType:null,selectedBuildingForRemoval:null,hasPlayerMovedEver:!1,hasPlayerPlantedBush:!1,hasPlayerEnabledAutopilot:0,masterVolume:zv,isMuted:!1,uiButtons:u,tutorial:d,tutorialState:f,debugPanel:Rt.None,performanceMetrics:{currentBucket:{renderTime:0,worldUpdateTime:0,aiUpdateTime:0},history:[]},hoveredButtonId:void 0,mousePosition:{x:0,y:0},notifications:[{id:"welcome",type:ea.Hello,message:"Welcome to the game!",duration:50,targetEntityIds:[l.id],highlightedEntityIds:[l.id],timestamp:0,isDismissed:!1,creationTime:Date.now()}],ecosystem:{preyGestationPeriod:Cr,preyProcreationCooldown:_r,predatorGestationPeriod:Rr,predatorProcreationCooldown:Pr,preyHungerIncreasePerHour:ji,predatorHungerIncreasePerHour:Vi,berryBushSpreadChance:gi},autosaveIntervalSeconds:5,lastAutosaveTime:Date.now()},m=uu(p);return console.log("Game world initialized:",m),m}function cR(){const e=fS(),t=0;for(let u=0;u<ov;u++){const d={x:Math.random()*et,y:Math.random()*tt};fa(e,d,t)}for(let u=0;u<XT;u++){const d={x:Math.random()*et,y:Math.random()*tt},f=Math.random()<.5?"male":"female";au(e,d,t,f,!1)}for(let u=0;u<iS;u++){const d={x:Math.random()*et,y:Math.random()*tt};Oo(e,d,"male",void 0,void 0,ra()),Oo(e,{x:d.x+20,y:d.y},"female",void 0,void 0,ra())}const r={x:Math.random()*et,y:Math.random()*tt};Mo(e,r,"male",void 0,void 0,oa()),Mo(e,{x:r.x+20,y:r.y},"female",void 0,void 0,oa());const o=hS(),l=pS(),s={time:t,entities:e,mapDimensions:{width:et,height:tt},generationCount:0,gameOver:!1,visualEffects:[],nextVisualEffectId:0,viewportCenter:{x:et/2,y:tt/2},isPaused:!1,exitConfirmation:"inactive",autopilotControls:{behaviors:{procreation:!1,planting:!1,gathering:!1,attack:!1,feedChildren:!0,followLeader:!1},hoveredAutopilotAction:void 0,activeAutopilotAction:void 0,isManuallyMoving:!1},buildMenuOpen:!1,selectedBuildingType:null,selectedBuildingForRemoval:null,hasPlayerMovedEver:!1,hasPlayerPlantedBush:!1,hasPlayerEnabledAutopilot:0,masterVolume:zv,isMuted:!0,uiButtons:[],tutorial:o,tutorialState:l,debugPanel:Rt.None,performanceMetrics:{currentBucket:{renderTime:0,worldUpdateTime:0,aiUpdateTime:0},history:[]},hoveredButtonId:void 0,mousePosition:{x:0,y:0},notifications:[],ecosystem:{preyGestationPeriod:Cr,preyProcreationCooldown:_r,predatorGestationPeriod:Rr,predatorProcreationCooldown:Pr,preyHungerIncreasePerHour:ji,predatorHungerIncreasePerHour:Vi,berryBushSpreadChance:gi},lastAutosaveTime:0};return uu(s)}const dR="humanProcreation",fR="human",hR="human",pR=It,gR=(e,t,r)=>Ur(e,t,r.gameState)?e.gender==="male"?e.activeAction==="procreating":e.activeAction==="procreating"&&t.activeAction==="procreating":!1,mR=(e,t,r)=>{var f,p;const{gameState:o}=r,l={x:(e.position.x+t.position.x)/2,y:(e.position.y+t.position.y)/2},s=e.gender==="male"?e:t,u=e.gender==="female"?e:t,d=(s.partnerIds||[]).length===0;if(e.stateMachine=[ia,{partnerId:t.id,previousState:(f=e.stateMachine)==null?void 0:f[0]}],t.stateMachine=[ia,{partnerId:e.id,previousState:(p=t.stateMachine)==null?void 0:p[0]}],e.partnerIds||(e.partnerIds=[]),e.partnerIds.includes(t.id)||e.partnerIds.push(t.id),t.partnerIds||(t.partnerIds=[]),t.partnerIds.includes(e.id)||t.partnerIds.push(e.id),d&&s.leaderId&&s.leaderId!==s.id){const m=o.entities.entities[s.leaderId];if(m){const S=gf(s,m),y=gf(u,m);if(!S&&!y){const w=vf();s.leaderId=s.id,s.tribeBadge=w,s.diplomacy={},u.leaderId=s.id,u.tribeBadge=w}}}else if(!e.leaderId&&!t.leaderId&&s&&u){const m=vf();s.leaderId=s.id,s.tribeBadge=m,s.diplomacy={},u.leaderId=s.id,u.tribeBadge=m}e.activeAction=void 0,Oe(o,ue.Procreation,l,Er),Oe(o,ue.Partnered,e.position,be,e.id),Oe(o,ue.Partnered,t.position,be,t.id),e.lastPartneredEffectTime=o.time,t.lastPartneredEffectTime=o.time,t.activeAction=void 0,Ie(r,fe.Procreate,l)},vR={id:dR,sourceType:fR,targetType:hR,maxDistance:pR,checker:gR,perform:mR},SR={id:"humanChildFeeding",sourceType:"human",targetType:"human",maxDistance:bf,checker:(e,t)=>e.isAdult===!0&&e.food.length>0&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&t.isAdult===!1&&(t.motherId===e.id||t.fatherId===e.id)&&t.hunger>=Ji&&e.activeAction==="feeding",perform:(e,t,r)=>{e.food.pop(),t.hunger=Math.max(0,t.hunger-Ji),e.feedChildCooldownTime=cE,(!t.lastChildFedEffectTime||r.gameState.time-t.lastChildFedEffectTime>2)&&(Oe(r.gameState,ue.ChildFed,t.position,be,t.id),t.lastChildFedEffectTime=r.gameState.time),Ie(r,fe.ChildFed,t.position)}},yR={id:"human-attack",sourceType:"human",targetType:"human",maxDistance:qn,checker:(e,t,r)=>{var s;if(((s=e.stateMachine)==null?void 0:s[0])!==tr||e.attackTargetId!==t.id||(e.attackCooldown||0)>0)return!1;const o=e.stateMachine[1];return r.gameState.time-o.attackStartTime>=vv},perform:(e,t,r)=>{const o=ze(e.position,t.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),l=_E(nt(o),t.direction);if(Math.abs(l)<IE*Math.PI/180&&Math.random()<EE)Oe(r.gameState,ue.AttackDeflected,t.position,be,t.id);else{let d=Gf;e.gender==="male"&&(d*=yE),e.isAdult||(d*=AE),(!t.isAdult||t.age>=gv)&&e.isAdult&&(d*=TE),t.hitpoints-=d,t.movementSlowdown={modifier:xf,endTime:r.gameState.time+$f},Oe(r.gameState,ue.Hit,t.position,be,t.id);const p=ze(e.position,t.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),m=Pt(p,mE);t.forces.push(m),t.hitpoints<=0?Ie(r,fe.HumanDeath,t.position):Ie(r,fe.Attack,e.position)}e.attackCooldown=vu;const u=e.stateMachine[1];u.attackStartTime=r.gameState.time,Oe(r.gameState,ue.Attack,e.position,be,e.id)}},AR={id:"human-collision",sourceType:"human",targetType:"human",maxDistance:wt*2,checker:(e,t,{gameState:r})=>V(e.position,t.position,r.mapDimensions.width,r.mapDimensions.height)<(e.radius+t.radius)/3,perform:(e,t,{gameState:r})=>{const o=V(e.position,t.position,r.mapDimensions.width,r.mapDimensions.height);if(o===0){e.forces.push({x:.1,y:0}),t.forces.push({x:-.1,y:0});return}const s=(e.radius+t.radius-o)*.05,u=nt(Sv(e.position,t.position)),d=Pt(u,s);e.forces.push(d),t.forces.push(Pt(d,-1))}},TR={id:"humanBerryBushGather",sourceType:"human",targetType:"berryBush",maxDistance:It,checker:(e,t,r)=>{var o;return e.isAdult&&t.food.length>0&&((o=e.stateMachine)==null?void 0:o[0])===ca&&e.food.length<e.maxFood&&(!e.gatheringCooldownTime||e.gatheringCooldownTime<r.gameState.time)||!1},perform:(e,t,r)=>{const o=t.food.pop();o&&e.food.push(o),e.gatheringCooldownTime=r.gameState.time+1,t.timeSinceLastHarvest=r.gameState.time,t.ownerId=e.id,t.claimedUntil=r.gameState.time+sv,Oe(r.gameState,ue.BushClaimed,t.position,be),Ie(r,fe.Gather,e.position)}},IR={id:"corpseGather",sourceType:"human",targetType:"corpse",maxDistance:It,checker:(e,t,r)=>{var o;return e.isAdult&&t.food.length>0&&((o=e.stateMachine)==null?void 0:o[0])===ca&&e.food.length<e.maxFood&&(!e.gatheringCooldownTime||e.gatheringCooldownTime<r.gameState.time)||!1},perform:(e,t,r)=>{const o=t.food.pop();o&&e.food.push(o),e.gatheringCooldownTime=r.gameState.time+1,Ie(r,fe.Gather,e.position)}},ER=[TR,IR],wR={id:"prey-eat-berry-bush",sourceType:"prey",targetType:"berryBush",maxDistance:zt,checker:(e,t,r)=>!!(e.isAdult&&t.food.length>0&&e.hunger>30&&(!e.eatingCooldownTime||e.eatingCooldownTime<r.gameState.time)),perform:(e,t,r)=>{t.food.pop()&&(e.hunger=Math.max(0,e.hunger-25),t.lifespan-=p_,t.timeSinceLastHarvest=r.gameState.time,e.eatingCooldownTime=r.gameState.time+h_,Oe(r.gameState,ue.BushClaimed,t.position,be,e.id),Ie(r,fe.Gather,e.position))}},CR={id:"predator-hunt-prey",sourceType:"predator",targetType:"prey",maxDistance:po,checker:(e,t,r)=>!!(e.isAdult&&e.hunger>50&&(!e.huntCooldown||e.huntCooldown<=0)&&t.hitpoints>0),perform:(e,t,r)=>{t.hitpoints-=A_;const o=ze(e.position,t.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),l=Pt(o,8);t.forces.push(l),e.huntCooldown=E_,t.hitpoints<=0?(Ie(r,fe.HumanDeath,t.position),Oe(r.gameState,ue.Hit,t.position,be,t.id)):(Oe(r.gameState,ue.Hit,t.position,be,t.id),t.fleeCooldown=5,Ie(r,fe.Attack,e.position)),Oe(r.gameState,ue.Attack,e.position,be,e.id)}},_R={id:"human-hunt-prey",sourceType:"human",targetType:"prey",maxDistance:qn,checker:(e,t,r)=>{var o;return!!(((o=e.stateMachine)==null?void 0:o[0])===tr&&e.attackTargetId===t.id&&(!e.attackCooldown||e.attackCooldown<=0)&&t.hitpoints>0&&e.isAdult)},perform:(e,t,r)=>{let o=Gf*1.2;e.gender==="male"&&(o*=1.3),t.hitpoints-=o;const l=ze(e.position,t.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),s=Pt(l,6);t.forces.push(s),e.attackCooldown=vu,t.hitpoints<=0?(Ie(r,fe.HumanDeath,t.position),Oe(r.gameState,ue.Hit,t.position,be,t.id)):(Oe(r.gameState,ue.Hit,t.position,be,t.id),t.fleeCooldown=8,Ie(r,fe.Attack,e.position)),Oe(r.gameState,ue.Attack,e.position,be,e.id)}},RR={id:"predator-attack-human",sourceType:"predator",targetType:"human",maxDistance:Nn,checker:(e,t,r)=>{var o;return!!(e.isAdult&&(!e.attackCooldown||e.attackCooldown<=0)&&t.hitpoints>0&&(e.hunger>100||t.attackTargetId===e.id||t.attackTargetId&&((o=r.gameState.entities.entities[t.attackTargetId])==null?void 0:o.type)==="predator"))},perform:(e,t,r)=>{let o=tS;e.hunger>120&&(o*=1.3),t.hitpoints-=o,t.movementSlowdown={modifier:xf,endTime:r.gameState.time+$f};const l=ze(e.position,t.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),s=Pt(l,7);t.forces.push(s),e.attackCooldown=nS,t.hitpoints<=0?(e.hunger=Math.max(0,e.hunger-rh),Ie(r,fe.HumanDeath,t.position),Oe(r.gameState,ue.Hit,t.position,be,t.id)):(Oe(r.gameState,ue.Hit,t.position,be,t.id),Ie(r,fe.Attack,e.position)),Oe(r.gameState,ue.Attack,e.position,be,e.id)}},PR={id:"human-attack-predator",sourceType:"human",targetType:"predator",maxDistance:qn,checker:(e,t,r)=>{var o;return!!(((o=e.stateMachine)==null?void 0:o[0])===tr&&e.attackTargetId===t.id&&(!e.attackCooldown||e.attackCooldown<=0)&&t.hitpoints>0&&e.isAdult)},perform:(e,t,r)=>{let o=Gf*.8;e.gender==="male"&&(o*=1.2);const l=Object.values(r.gameState.entities.entities).filter(d=>d.type==="human"&&d.id!==e.id).filter(d=>{const f=d;return Math.sqrt(Math.pow(f.position.x-e.position.x,2)+Math.pow(f.position.y-e.position.y,2))<100&&f.activeAction==="attacking"&&f.attackTargetId===t.id}).length;l>0&&(o*=1+l*.2),t.hitpoints-=o;const s=ze(e.position,t.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),u=Pt(s,8);t.forces.push(u),e.attackCooldown=vu,t.hitpoints<=0?(Ie(r,fe.HumanDeath,t.position),Oe(r.gameState,ue.Hit,t.position,be,t.id)):(Oe(r.gameState,ue.Hit,t.position,be,t.id),t.hitpoints<t.maxHitpoints*.3&&(t.hunger+=20),Ie(r,fe.Attack,e.position)),Oe(r.gameState,ue.Attack,e.position,be,e.id)}},NR={id:"prey-procreation",sourceType:"prey",targetType:"prey",maxDistance:zt,checker:(e,t,r)=>!!(e.isAdult&&t.isAdult&&e.gender!==t.gender&&e.id!==t.id&&!e.isPregnant&&!t.isPregnant&&e.hunger<200&&t.hunger<200&&(!e.procreationCooldown||e.procreationCooldown<=0)&&(!t.procreationCooldown||t.procreationCooldown<=0)),perform:(e,t,r)=>{const o=e.gender==="female"?e:t;o.isPregnant=!0,o.gestationTime=r.gameState.ecosystem.preyGestationPeriod,e.procreationCooldown=r.gameState.ecosystem.preyProcreationCooldown,t.procreationCooldown=r.gameState.ecosystem.preyProcreationCooldown,Oe(r.gameState,ue.Procreation,o.position,be,o.id),Ie(r,fe.Procreate,o.position)}},DR={id:"predator-procreation",sourceType:"predator",targetType:"predator",maxDistance:Zi,checker:(e,t,r)=>!!(e.isAdult&&t.isAdult&&e.gender!==t.gender&&e.id!==t.id&&!e.isPregnant&&!t.isPregnant&&e.hunger<200&&t.hunger<200&&(!e.procreationCooldown||e.procreationCooldown<=0)&&(!t.procreationCooldown||t.procreationCooldown<=0)),perform:(e,t,r)=>{const o=e.gender==="female"?e:t;o.isPregnant=!0,o.pregnancyFatherId=e.gender==="male"?e.id:t.id,o.gestationTime=r.gameState.ecosystem.predatorGestationPeriod,e.procreationCooldown=r.gameState.ecosystem.predatorProcreationCooldown,t.procreationCooldown=r.gameState.ecosystem.predatorProcreationCooldown,Oe(r.gameState,ue.Procreation,o.position,be,o.id),Ie(r,fe.Procreate,o.position)}},OR={id:"preyChildFeeding",sourceType:"prey",targetType:"prey",maxDistance:Bo,checker:(e,t)=>e.isAdult===!0&&e.gender==="female"&&e.hunger<80&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&t.isAdult===!1&&(t.motherId===e.id||t.fatherId===e.id)&&t.hunger>=ou&&e.activeAction==="feeding",perform:(e,t,r)=>{e.hunger=Math.min(120,e.hunger+10),t.hunger=Math.max(0,t.hunger-ou),e.feedChildCooldownTime=rS,(!t.lastChildFedEffectTime||r.gameState.time-t.lastChildFedEffectTime>2)&&(Oe(r.gameState,ue.ChildFed,t.position,be,t.id),t.lastChildFedEffectTime=r.gameState.time),Ie(r,fe.ChildFed,t.position)}},MR={id:"predatorChildFeeding",sourceType:"predator",targetType:"predator",maxDistance:Bo,checker:(e,t)=>e.isAdult===!0&&e.gender==="female"&&e.hunger<90&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&t.isAdult===!1&&(t.motherId===e.id||t.fatherId===e.id)&&t.hunger>=ou&&e.activeAction==="feeding",perform:(e,t,r)=>{e.hunger=Math.min(140,e.hunger+15),t.hunger=Math.max(0,t.hunger-ou),e.feedChildCooldownTime=rS,(!t.lastChildFedEffectTime||r.gameState.time-t.lastChildFedEffectTime>2)&&(Oe(r.gameState,ue.ChildFed,t.position,be,t.id),t.lastChildFedEffectTime=r.gameState.time),Ie(r,fe.ChildFed,t.position)}},kR={id:"predator-eat-corpse",sourceType:"predator",targetType:"corpse",maxDistance:Zi,checker:(e,t,r)=>!!(e.isAdult&&e.hunger>30&&t.food.length>0&&(!e.eatingCooldownTime||e.eatingCooldownTime<=r.gameState.time)),perform:(e,t,r)=>{t.food.pop()&&(e.hunger=Math.max(0,e.hunger-rh),e.eatingCooldownTime=r.gameState.time+2,Oe(r.gameState,ue.Eating,e.position,be,e.id),Ie(r,fe.Gather,e.position))}},FR={id:"predator-attack-rival",sourceType:"predator",targetType:"predator",maxDistance:Nn,checker:(e,t,r)=>{var o;return!!(e.isAdult&&(!e.attackCooldown||e.attackCooldown<=0)&&t.hitpoints>0&&(e.hunger>100||t.attackTargetId===e.id||t.attackTargetId&&((o=r.gameState.entities.entities[t.attackTargetId])==null?void 0:o.type)==="predator"))},perform:(e,t,r)=>{let o=tS;e.hunger>120&&(o*=1.3),t.hitpoints-=o,t.movementSlowdown={modifier:xf,endTime:r.gameState.time+$f};const l=ze(e.position,t.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),s=Pt(l,7);t.forces.push(s),e.attackCooldown=nS,t.hitpoints<=0?(e.hunger=Math.max(0,e.hunger-rh),Ie(r,fe.HumanDeath,t.position),Oe(r.gameState,ue.Hit,t.position,be,t.id)):(Oe(r.gameState,ue.Hit,t.position,be,t.id),Ie(r,fe.Attack,e.position)),Oe(r.gameState,ue.Attack,e.position,be,e.id)}},UR={id:"storageDeposit",sourceType:"human",targetType:"building",maxDistance:yn,checker:(e,t,r)=>{var s;if(t.buildingType!=="storageSpot"||((s=e.stateMachine)==null?void 0:s[0])!==$s||!t.isConstructed||e.food.length===0)return!1;t.storedFood||(t.storedFood=[]);const o=t.storageCapacity??0;return!(t.storedFood.length>=o||e.leaderId!==t.ownerId||r.gameState.time-(t.lastDepositTime??0)<AC)},perform:(e,t,r)=>{t.storedFood||(t.storedFood=[]);const o=e.food.pop();o&&t.storedFood.push({item:o,positionOffset:aS(t)}),t.lastDepositTime=r.gameState.time,Ie(r,fe.StorageDeposit,t.position)}},LR={id:"storageRetrieve",sourceType:"human",targetType:"building",maxDistance:yn,checker:(e,t,r)=>{var l;return!(t.buildingType!=="storageSpot"||((l=e.stateMachine)==null?void 0:l[0])!==zs||!t.isConstructed||!t.storedFood||t.storedFood.length===0||e.food.length>=e.maxFood||e.leaderId!==t.ownerId||r.gameState.time-(t.lastRetrieveTime??0)<TC)},perform:(e,t,r)=>{if(!t.storedFood||t.storedFood.length===0)return;const o=t.storedFood.pop();o&&(e.food.push(o.item),aS(t)),t.lastRetrieveTime=r.gameState.time,Ie(r,fe.StorageRetrieve,t.position)}},BR={id:"storageSteal",sourceType:"human",targetType:"building",maxDistance:yn,checker:(e,t,r)=>{var d;if(t.buildingType!=="storageSpot"||((d=e.stateMachine)==null?void 0:d[0])!==ca||!t.isConstructed||!t.storedFood||t.storedFood.length===0||e.food.length>=e.maxFood||e.leaderId===t.ownerId)return!1;const o=e.leaderId?r.gameState.entities.entities[e.leaderId]:void 0;if(!o||!o.diplomacy||o.diplomacy[t.ownerId]!==gt.Hostile||r.gameState.time-(t.lastStealTime??0)<IC)return!1;const u=kn({leaderId:t.ownerId},r.gameState);for(const f of u)if(V(e.position,f.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=yf)return!1;return!0},perform:(e,t,r)=>{if(!t.storedFood||t.storedFood.length===0)return;const o=t.storedFood.pop();o&&e.food.push(o.item),t.lastStealTime=r.gameState.time,Ie(r,fe.StorageSteal,t.position),Oe(r.gameState,ue.Attack,t.position,.5)}},HR=[AR,...ER,vR,SR,yR,UR,LR,BR,wR,OR,MR,kR,CR,_R,PR,RR,FR,NR,DR];function bR(e){const{gameState:t}=e,r=t,o=Object.values(t.entities.entities);for(const l of HR)for(const s of o){if(l.sourceType&&s.type!==l.sourceType)continue;const u=r.search[l.targetType].byRadius(s.position,l.maxDistance);for(const d of u){if(s.id===d.id)continue;V(s.position,d.position,t.mapDimensions.width,t.mapDimensions.height)<=l.maxDistance&&l.checker(s,d,e)&&l.perform(s,d,e)}}}function GR(e){e.visualEffects=e.visualEffects.filter(t=>e.time-t.startTime<=t.duration)}function xR(e){const t=e.search.berryBush.byProperty("type","berryBush"),r=e.search.predator.byProperty("type","predator"),o=e.search.human.byProperty("type","human");for(let l=0;l<20;l++){let s;if(t.length>0&&l<15){const f=t[Math.floor(Math.random()*t.length)],p=Math.random()*2*Math.PI,m=50+Math.random()*100;s={x:Math.max(50,Math.min(et-50,f.position.x+Math.cos(p)*m)),y:Math.max(50,Math.min(tt-50,f.position.y+Math.sin(p)*m))}}else s={x:50+Math.random()*(et-100),y:50+Math.random()*(tt-100)};let u=!0;const d=100;for(const f of r)if(Math.sqrt((s.x-f.position.x)**2+(s.y-f.position.y)**2)<d){u=!1;break}if(u){for(const f of o)if(Math.sqrt((s.x-f.position.x)**2+(s.y-f.position.y)**2)<d){u=!1;break}}if(u)return s}return{x:et*.3+Math.random()*et*.4,y:tt*.3+Math.random()*tt*.4}}function $R(e){const t=e.search.prey.byProperty("type","prey"),r=e.search.human.byProperty("type","human");for(let l=0;l<15;l++){let s;if(t.length>0&&l<10){const f=t[Math.floor(Math.random()*t.length)],p=Math.random()*2*Math.PI,m=100+Math.random()*150;s={x:Math.max(50,Math.min(et-50,f.position.x+Math.cos(p)*m)),y:Math.max(50,Math.min(tt-50,f.position.y+Math.sin(p)*m))}}else s={x:50+Math.random()*(et-100),y:50+Math.random()*(tt-100)};let u=!0;const d=150;for(const f of r)if(Math.sqrt((s.x-f.position.x)**2+(s.y-f.position.y)**2)<d){u=!1;break}if(u)return s}switch(Math.floor(Math.random()*4)){case 0:return{x:Math.random()*et,y:50+Math.random()*100};case 1:return{x:et-150+Math.random()*100,y:Math.random()*tt};case 2:return{x:Math.random()*et,y:tt-150+Math.random()*100};default:return{x:50+Math.random()*100,y:Math.random()*tt}}}function zR(e){const t=e.search.human.byProperty("type","human"),r=e.search.berryBush.byProperty("type","berryBush");for(let o=0;o<20;o++){const l={x:50+Math.random()*(et-100),y:50+Math.random()*(tt-100)};let s=!0;const u=80,d=60;for(const f of t)if(Math.sqrt((l.x-f.position.x)**2+(l.y-f.position.y)**2)<u){s=!1;break}if(s){for(const f of r)if(Math.sqrt((l.x-f.position.x)**2+(l.y-f.position.y)**2)<d){s=!1;break}}if(s)return l}return{x:Math.random()*et,y:Math.random()*tt}}function gS(e,t=4){console.log(` Respawning ${t} prey to prevent extinction`);const r=e;for(let o=0;o<t;o++){const l=xR(r),s=o%2===0?"male":"female";Oo(e.entities,l,s,void 0,void 0,ra())}}function mS(e,t=2){console.log(` Respawning ${t} predators to prevent extinction`);const r=e;for(let o=0;o<t;o++){const l=$R(r),s=o%2===0?"male":"female";Mo(e.entities,l,s,void 0,void 0,oa())}}function WR(e){const t=e,r=t.search.prey.count(),o=t.search.predator.count();let l=!1;return r===0&&(gS(e,6),l=!0),o===0&&(mS(e,3),l=!0),l}function YR(e){const t=e,r=t.search.prey.count(),o=t.search.predator.count(),l=t.search.berryBush.count();let s=!1;if(r>0&&r<5){const u=Math.max(2,Math.floor(8-r));gS(e,u),s=!0}if(o>0&&o<2){const u=Math.max(1,Math.floor(3-o));mS(e,u),s=!0}if(l<5){console.log(` Boosting bush count from ${l} to help ecosystem`);for(let u=0;u<5;u++){const d=zR(t);fa(e.entities,d,e.time)}s=!0}return s}const jR=1,VR=.3,XR=.8,h0=.8,KR=.99,ZR=.05;var vS=(e=>(e[e.INCREASE_PREY_GESTATION=0]="INCREASE_PREY_GESTATION",e[e.DECREASE_PREY_GESTATION=1]="DECREASE_PREY_GESTATION",e[e.INCREASE_PREY_PROCREATION_COOLDOWN=2]="INCREASE_PREY_PROCREATION_COOLDOWN",e[e.DECREASE_PREY_PROCREATION_COOLDOWN=3]="DECREASE_PREY_PROCREATION_COOLDOWN",e[e.INCREASE_PREY_HUNGER=4]="INCREASE_PREY_HUNGER",e[e.DECREASE_PREY_HUNGER=5]="DECREASE_PREY_HUNGER",e[e.INCREASE_PREDATOR_GESTATION=6]="INCREASE_PREDATOR_GESTATION",e[e.DECREASE_PREDATOR_GESTATION=7]="DECREASE_PREDATOR_GESTATION",e[e.INCREASE_PREDATOR_PROCREATION_COOLDOWN=8]="INCREASE_PREDATOR_PROCREATION_COOLDOWN",e[e.DECREASE_PREDATOR_PROCREATION_COOLDOWN=9]="DECREASE_PREDATOR_PROCREATION_COOLDOWN",e[e.INCREASE_PREDATOR_HUNGER=10]="INCREASE_PREDATOR_HUNGER",e[e.DECREASE_PREDATOR_HUNGER=11]="DECREASE_PREDATOR_HUNGER",e[e.INCREASE_BUSH_SPREAD=12]="INCREASE_BUSH_SPREAD",e[e.DECREASE_BUSH_SPREAD=13]="DECREASE_BUSH_SPREAD",e[e.NO_ACTION=14]="NO_ACTION",e))(vS||{});const Yd=Object.keys(vS).length/2;class qR{constructor(){Me(this,"qTable",new Map);Me(this,"epsilon",h0);Me(this,"lastState",null);Me(this,"lastAction",null)}discretizeState(t,r,o){const l=Math.min(4,Math.floor(t/25)),s=Math.min(4,Math.floor(r/5)),u=Math.min(4,Math.floor(o/15));return`${l}-${s}-${u}`}getQValue(t,r){return this.qTable.has(t)||this.qTable.set(t,new Map),this.qTable.get(t).get(r)||0}setQValue(t,r,o){this.qTable.has(t)||this.qTable.set(t,new Map),this.qTable.get(t).set(r,o)}getBestAction(t){let r=0,o=this.getQValue(t,0);for(let l=1;l<Yd;l++){const s=this.getQValue(t,l);s>o&&(o=s,r=l)}return r}chooseAction(t){return Math.random()<this.epsilon?Math.floor(Math.random()*Yd):this.getBestAction(t)}applyEmergencyCorrections(t,r,o,l){t<fi*.5&&(l.ecosystem.preyGestationPeriod=Math.max(vo,l.ecosystem.preyGestationPeriod*.8),l.ecosystem.preyProcreationCooldown=Math.max(So,l.ecosystem.preyProcreationCooldown*.8),l.ecosystem.preyHungerIncreasePerHour=Math.max(To,l.ecosystem.preyHungerIncreasePerHour*.9)),r<hi*.6&&(l.ecosystem.predatorGestationPeriod=Math.max(yo,l.ecosystem.predatorGestationPeriod*.75),l.ecosystem.predatorProcreationCooldown=Math.max(Ao,l.ecosystem.predatorProcreationCooldown*.75),l.ecosystem.predatorHungerIncreasePerHour=Math.max(Io,l.ecosystem.predatorHungerIncreasePerHour*.85)),o<pi*.5&&(l.ecosystem.berryBushSpreadChance=Math.min(Fs,l.ecosystem.berryBushSpreadChance*1.2)),t>fi*1.4&&(l.ecosystem.preyHungerIncreasePerHour=Math.min(ji,l.ecosystem.preyHungerIncreasePerHour*1.05)),r>hi*1.4&&(l.ecosystem.predatorHungerIncreasePerHour=Math.min(Vi,l.ecosystem.predatorHungerIncreasePerHour*1.05)),o>pi*1.4&&(l.ecosystem.berryBushSpreadChance=Math.max(gi,l.ecosystem.berryBushSpreadChance*.95))}calculateReward(t,r,o){const l=Math.abs(t-fi),s=Math.abs(r-hi),u=Math.abs(o-pi),d=l/fi,f=s/hi,p=u/pi,m=d+f+p;return 100*Math.exp(-m*2)-50}applyAction(t,r){switch(t){case 0:r.ecosystem.preyGestationPeriod=Math.min(Cr,r.ecosystem.preyGestationPeriod+.2*(Cr-vo));break;case 1:r.ecosystem.preyGestationPeriod=Math.max(vo,r.ecosystem.preyGestationPeriod-.2*(Cr-vo));break;case 2:r.ecosystem.preyProcreationCooldown=Math.min(_r,r.ecosystem.preyProcreationCooldown+.2*(_r-So));break;case 3:r.ecosystem.preyProcreationCooldown=Math.max(So,r.ecosystem.preyProcreationCooldown-.2*(_r-So));break;case 4:r.ecosystem.preyHungerIncreasePerHour=Math.min(ji,r.ecosystem.preyHungerIncreasePerHour+.2*(ji-To));break;case 5:r.ecosystem.preyHungerIncreasePerHour=Math.max(To,r.ecosystem.preyHungerIncreasePerHour-.2*(ji-To));break;case 6:r.ecosystem.predatorGestationPeriod=Math.min(Rr,r.ecosystem.predatorGestationPeriod+.2*(Rr-yo));break;case 7:r.ecosystem.predatorGestationPeriod=Math.max(yo,r.ecosystem.predatorGestationPeriod-.2*(Rr-yo));break;case 8:r.ecosystem.predatorProcreationCooldown=Math.min(Pr,r.ecosystem.predatorProcreationCooldown+.2*(Pr-Ao));break;case 9:r.ecosystem.predatorProcreationCooldown=Math.max(Ao,r.ecosystem.predatorProcreationCooldown-.2*(Pr-Ao));break;case 10:r.ecosystem.predatorHungerIncreasePerHour=Math.min(Vi,r.ecosystem.predatorHungerIncreasePerHour+.2*(Vi-Io));break;case 11:r.ecosystem.predatorHungerIncreasePerHour=Math.max(Io,r.ecosystem.predatorHungerIncreasePerHour-.2*(Vi-Io));break;case 12:r.ecosystem.berryBushSpreadChance=Math.min(Fs,r.ecosystem.berryBushSpreadChance+.2*(Fs-gi));break;case 13:r.ecosystem.berryBushSpreadChance=Math.max(gi,r.ecosystem.berryBushSpreadChance-.2*(Fs-gi));break}}updateQTable(t,r,o,l){const s=this.getQValue(t,r),u=Math.max(...Array.from({length:Yd},(f,p)=>this.getQValue(l,p))),d=s+VR*(o+XR*u-s);this.setQValue(t,r,d)}step(t){const r=t,o=r.search.prey.count(),l=r.search.predator.count(),s=r.search.berryBush.count();this.applyEmergencyCorrections(o,l,s,t);const u=this.discretizeState(o,l,s);if(this.lastState!==null&&this.lastAction!==null){const f=this.calculateReward(o,l,s);this.updateQTable(this.lastState,this.lastAction,f,u)}const d=this.chooseAction(u);this.applyAction(d,t),this.epsilon=Math.max(ZR,this.epsilon*KR),this.lastState=u,this.lastAction=d}reset(){this.qTable.clear(),this.epsilon=h0,this.lastState=null,this.lastAction=null}getStats(){return{qTableSize:this.qTable.size,explorationRate:this.epsilon}}}let SS=new qR;function QR(e){WR(e),YR(e),e.ecosystem.lastUpdateTime||(e.ecosystem.preyGestationPeriod=vo+(Cr-vo)*.3,e.ecosystem.preyProcreationCooldown=So+(_r-So)*.3,e.ecosystem.preyHungerIncreasePerHour=To+(ji-To)*.3,e.ecosystem.predatorGestationPeriod=yo+(Rr-yo)*.3,e.ecosystem.predatorProcreationCooldown=Ao+(Pr-Ao)*.3,e.ecosystem.predatorHungerIncreasePerHour=Io+(Vi-Io)*.3,e.ecosystem.berryBushSpreadChance=gi+(Fs-gi)*.7),SS.step(e)}function JR(e){e.ecosystem.lastUpdateTime||(e.ecosystem.lastUpdateTime=0),!(e.time-e.ecosystem.lastUpdateTime<jR)&&(e.ecosystem.lastUpdateTime=e.time,QR(e))}function eP(){return SS.getStats()}function tP(e,t){e.selectedBuildingType&&e.selectedBuildingType!=="removal"&&(e.autopilotControls.activeAutopilotAction=void 0,e.autopilotControls.hoveredAutopilotAction=void 0)}const nP=1/60;function iP(e,t){const r=Et(e);r&&(e.viewportCenter=zf(e.viewportCenter,r.position,Uf*t))}function Iu(e,t){if(e.isPaused)return e;if(e.autosaveIntervalSeconds){const r=Date.now();r-e.lastAutosaveTime>e.autosaveIntervalSeconds*1e3&&(Rf(e),e.lastAutosaveTime=r)}for(;t>0;){const r=uu(e),o=Math.min(t,nP),l=o*(At/Tt);r.time+=l,iP(r,o),oC(r),JR(r),sC(r),Q1({gameState:r,deltaTime:o}),bR({gameState:r,deltaTime:o}),GR(r),sR(r,o),tP(r),e=r,t-=o}return e}function jd(e,t,r){e.save();const{x:o,y:l,width:s,height:u}=t.rect,d=Nv;if(e.beginPath(),e.moveTo(o+d,l),e.lineTo(o+s-d,l),e.quadraticCurveTo(o+s,l,o+s,l+d),e.lineTo(o+s,l+u-d),e.quadraticCurveTo(o+s,l+u,o+s-d,l+u),e.lineTo(o+d,l+u),e.quadraticCurveTo(o,l+u,o,l+u-d),e.lineTo(o,l+d),e.quadraticCurveTo(o,l,o+d,l),e.closePath(),e.fillStyle=t.isDisabled?Dv:t.backgroundColor,e.fill(),t.activated){e.save();const f=(Math.sin(Date.now()/1e3*Fv)+1)/2;e.strokeStyle=kv,e.lineWidth=2+f*2,e.globalAlpha=.7+f*.3,e.stroke(),e.restore()}if(t.lastActivated){const f=Date.now()-t.lastActivated;if(f<ru){const p=1-f/ru;e.fillStyle=Mv,e.globalAlpha=p,e.fill(),e.globalAlpha=1}}r&&!t.isDisabled&&(e.fillStyle=Zf,e.globalAlpha=.5,e.fill(),e.globalAlpha=1),e.fillStyle=t.isDisabled?Ov:t.textColor,t.icon?(e.font=`${u*.55}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(t.icon,o+s/2,l+u/2),t.text&&(e.font=`${u*.18}px "Press Start 2P", Arial`,e.textAlign="right",e.textBaseline="bottom",e.fillText(t.text,o+s-4,l+u-2))):(e.textAlign="center",e.textBaseline="middle",e.fillText(t.text,o+s/2,l+u/2)),e.restore()}function rP(e,t,r,o){e.save(),e.font=`${Gm}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="bottom";const s=e.measureText(r).width,u=Gm,d=s+xm*2,f=u+xm*2,p=o.x-d/2,m=e.canvas.height,S=t.y<m/2?t.y+t.height-$m:t.y-f+$m;e.fillStyle=fw,e.fillRect(p,S,d,f),e.fillStyle=hw,e.fillText(r,o.x,S+f/2+u/2),e.restore()}function oP(e,t,r){e.save();const o=Et(t),l=[{id:"fastForwardButton",action:pe.FastForward,text:"FFWD [T]",currentWidth:di*1.3,backgroundColor:zi,textColor:vn,tooltip:"Fast-forward time",rect:{x:0,y:0,width:0,height:0}},{id:"pauseButton",action:pe.TogglePause,text:t.isPaused?"UN[P]AUSE":"[P]AUSE",backgroundColor:t.isPaused?Rl:zi,currentWidth:t.isPaused?di*1.4:di*1.1,tooltip:t.isPaused?"Resume Game":"Pause Game",rect:{x:0,y:0,width:0,height:0},textColor:vn},{id:"muteButton",action:pe.ToggleMute,text:t.isMuted?"UN[M]UTE":"[M]UTE",backgroundColor:t.isMuted?Rl:zi,tooltip:`Toggle Sound (${t.isMuted?"Muted":"Enabled"})`,currentWidth:di,rect:{x:0,y:0,width:0,height:0},textColor:vn},{id:"returnToIntroButton",action:pe.ReturnToIntro,text:"EXIT",backgroundColor:zi,tooltip:"Return to Main Menu [ESC]",currentWidth:di*.9,rect:{x:0,y:0,width:0,height:0},textColor:vn}];if(t.uiButtons.push(...l),o){const p=nh(t,o),m=new Set(p.map(B=>B.type));let S=[{playerAction:se.Gather,buttonAction:pe.CommandGather,shortcut:"E",name:"Gather",toggleKey:"gathering",condition:()=>o.isAdult===!0},{playerAction:se.Eat,buttonAction:pe.CommandEat,shortcut:"F",name:"Eat"},{playerAction:se.Plant,buttonAction:pe.CommandPlant,shortcut:"B",name:"Plant",toggleKey:"planting",condition:()=>o.isAdult===!0},{playerAction:se.Procreate,buttonAction:pe.ToggleProcreationBehavior,shortcut:"R",name:"Procreation",toggleKey:"procreation",condition:()=>o.isAdult===!0},{playerAction:se.FeedChild,buttonAction:pe.ToggleFeedChildBehavior,shortcut:"H",name:"Feed Child",toggleKey:"feedChildren",condition:()=>o.isAdult===!0},{playerAction:se.Attack,buttonAction:pe.ToggleAttackBehavior,shortcut:"Q",name:"Attack",toggleKey:"attack",condition:()=>o.isAdult===!0&&o.leaderId===o.id},{playerAction:se.FollowMe,buttonAction:pe.CommandFollowMe,shortcut:"C",name:"Follow Me",toggleKey:"followLeader",condition:()=>o.isAdult===!0&&o.leaderId===o.id},{playerAction:se.CallToAttack,buttonAction:pe.CommandCallToAttack,shortcut:"V",name:"Call to Attack",condition:()=>o.isAdult===!0&&o.leaderId===o.id},{playerAction:se.TribeSplit,buttonAction:pe.CommandTribeSplit,shortcut:"K",name:"Split Tribe",condition:()=>o.leaderId!==void 0&&o.leaderId!==o.id&&o.isAdult===!0},{playerAction:se.Build,buttonAction:pe.CommandBuild,shortcut:"L",name:"Build",condition:()=>o.isAdult===!0&&o.leaderId===o.id}];S=S.filter(B=>B.condition?B.condition():!0);const y=1,w=S.length,E=w*rn+(w-1)*vr,T=y*rn+(y-1)*vr,C=(r-E)/2,F=e.canvas.height-T-20;if(S.forEach((B,D)=>{const H=D%w,x=Math.floor(D/w),U=C+H*(rn+vr),$=F+x*(rn+vr),ee=!!B.toggleKey,Ce=ee&&t.autopilotControls.behaviors[B.toggleKey],_e=!m.has(B.playerAction),Ne=B.playerAction===se.Build&&t.buildMenuOpen,Pe=!t.hasPlayerEnabledAutopilot||t.hasPlayerEnabledAutopilot<3?" (Press Shift to toggle Auto)":"",de=ee?`${B.name}${Pe}`:B.name,Ue=Ce||Ne?Rl:zi,Ae={id:`commandButton_${B.name}`,action:B.buttonAction,rect:{x:U,y:$,width:rn,height:rn},icon:yu[B.playerAction],text:B.shortcut,backgroundColor:Ue,textColor:vn,currentWidth:rn,tooltip:de,isDisabled:_e,activated:Ce||Ne};t.uiButtons.push(Ae)}),t.buildMenuOpen){const B=[{id:"buildMenu_storageSpot",action:pe.SelectStorageSpot,icon:"",shortcut:"1",name:"Storage Spot"},{id:"buildMenu_plantingZone",action:pe.SelectPlantingZone,icon:"",shortcut:"2",name:"Planting Zone"},{id:"buildMenu_removal",action:pe.SelectRemovalTool,icon:"",shortcut:"3",name:"Remove Building"}],D=B.length,H=D*rn+(D-1)*vr,x=(r-H)/2,U=F-rn-vr;B.forEach(($,ee)=>{const Ce=x+ee*(rn+vr),_e=U,Ge=$.action===pe.SelectStorageSpot&&t.selectedBuildingType==="storageSpot"||$.action===pe.SelectPlantingZone&&t.selectedBuildingType==="plantingZone"||$.action===pe.SelectRemovalTool&&t.selectedBuildingType==="removal",Ne={id:$.id,action:$.action,rect:{x:Ce,y:_e,width:rn,height:rn},icon:$.icon,text:$.shortcut,backgroundColor:Ge?Rl:zi,textColor:vn,currentWidth:rn,tooltip:$.name,activated:Ge};t.uiButtons.push(Ne),jd(e,Ne,t.hoveredButtonId===Ne.id)})}}let s=r-Ze;l.forEach(p=>{const m=Ze,S=s-p.currentWidth;p.rect={x:S,y:m,width:p.currentWidth,height:Pv},jd(e,p,t.hoveredButtonId===p.id),s-=p.currentWidth+dw});let u=null;t.uiButtons.filter(p=>p.id.startsWith("commandButton_")||p.id.startsWith("buildMenu_")).forEach(p=>{u||(u={x:p.rect.x,y:p.rect.y,width:p.rect.width,height:p.rect.height}),u.x=Math.min(u.x,p.rect.x),u.y=Math.min(u.y,p.rect.y),u.width=Math.max(u.width,p.rect.x+p.rect.width-u.x),u.height=Math.max(u.height,p.rect.y+p.rect.height-u.y),p.id.startsWith("commandButton_")&&jd(e,p,t.hoveredButtonId===p.id)});const f=t.hoveredButtonId?t.uiButtons.find(p=>p.id===t.hoveredButtonId):void 0;return f&&f.tooltip&&t.mousePosition&&rP(e,f.rect,f.tooltip,t.mousePosition),e.restore(),{commandButtonsRect:u}}function sP(e){e.save(),e.fillStyle=ww,e.fillRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle=Cw,e.font=`${_w}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("PAUSED",e.canvas.width/2,e.canvas.height/2),e.restore()}function If(e,t,r,o){const l=t.x-r.width/2,s=t.y-r.height/2,u=l+e.x,d=s+e.y,f=(u%o.width+o.width)%o.width,p=(d%o.height+o.height)%o.height;return{x:f,y:p}}function Eu(e,t,r,o){let l=e.x-t.x,s=e.y-t.y;return Math.abs(l)>o.width/2&&(l=l-Math.sign(l)*o.width),Math.abs(s)>o.height/2&&(s=s-Math.sign(s)*o.height),{x:l+r.width/2,y:s+r.height/2}}function bl(e,t,r,o){const l=Eu(e.position,t,r,o),u=("radius"in e?e.radius:20)+20;return l.x>=-u&&l.x<=r.width+u&&l.y>=-u&&l.y<=r.height+u}function sn(e,t,r,o,l,...s){const u={...l.position};for(let d=-r;d<=r;d+=r)for(let f=-t;f<=t;f+=t)l.position.x=u.x+f,l.position.y=u.y+d,o(e,l,...s);l.position=u}const aP=25,lP=0,p0=28;function yS(e,t,r,o,l,s,u,d,f,p){e.save();const{x:m,y:S}=Eu(t,u,{width:d,height:f},p);e.strokeStyle=o,e.lineWidth=s,e.setLineDash(l),e.beginPath(),e.arc(m,S,r+Su,0,2*Math.PI),e.stroke(),e.restore()}function uP(e,t,r,o,l,s,u){if(t=t.filter(S=>S.type!==se.FollowMe),t.length===0)return;e.save(),t.forEach(S=>{S.targetEntity&&yS(e,S.targetEntity.position,S.targetEntity.radius,Xf,Kf,2,o,l,s,u)}),e.font=`${No}px "Press Start 2P", Arial`,e.fillStyle="white",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=5;const{x:d,y:f}=Eu(r.position,o,{width:l,height:s},u);let p=0,m={};t.forEach(S=>{const y=yu[S.type];if(S.targetEntity){m[S.targetEntity.id]=(m[S.targetEntity.id]||0)+1;const w=S.targetEntity.position.x-o.x+l/2,E=S.targetEntity.position.y-o.y+s/2,T=`${y}${S.key.toUpperCase()}`,C=E-S.targetEntity.radius-Su-No/2-(m[S.targetEntity.id]-1)*p0;e.fillText(T,w,C)}else{e.textAlign="left";const w=`${y}${S.key.toUpperCase()}`,E=d+aP,C=f+lP+p*p0;e.fillText(w,E,C),p++,e.textAlign="center"}}),e.restore()}const ye=(e,t,r,o,l,s,u)=>{s==="transparent"||o<=0||l<=0||(e.fillStyle=s,e.fillRect(Math.floor(t*u),Math.floor(r*u),Math.ceil(o*u),Math.ceil(l*u)))},g0=10,m0=10,Xn=6,li=4,Gl=2,cP=5,gn=4,dP=2,kt=4,fP=2,Je=3,co=2,$i=0,js=$i+li-1,bt=js,lt=js+gn-1,hP="rgba(0, 0, 0, 0.4)",pP=4,gP=1,ah={name:"tribe-human-2d",referenceImage:"swos.png",description:`A 2D human character asset for the Tribe game. This includes ensuring that the unique animations for stances like 'eat' and 'procreate' do not erroneously appear in other stances, such as 'walk', which was observed in the provided rendered media. The 'idle' animation was updated to a leg sway to better match the provided video for that stance, replacing a simpler body bob.

# Visual style

Human characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like people from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the character to give it a sense of depth.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 1 and 60, with 20 being the average age.
- gender: 
  - The male characters should have only pants, while female cover their breasts with a top. The clothing should be simple and muted, reflecting a stone-age style.
  - Female characters should have long hair, while male should have short hair and beard.
  - Male characters should have a more robust, muscular build
  - Female characters should have thinner arms and legs, with a more pronounced waist and hips.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'gathering': The character is gathering food from berry bushes, with arms reaching out and a slight bend at the knees.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or dust particles to indicate movement.
- 'attacking': The character performs an attack animation, with arms raised and a forward motion.
- 'defending': The character takes a defensive stance, with arms raised and a slight bend at the knees.
- 'stunned': The character is stunned and laying on the ground, with limbs relaxed and a neutral expression.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a skeleton over time.

`,stances:["idle","walk","gathering","eat","procreate","dead","attacking","defending","stunned"],render(e,t,r,o,l,s,u,d="male",f=20,p=[1,0],m=!1,S=0){const y=["dead","stunned"].includes(u),w=y?m0+4:g0,E=y?g0+4:m0+Je,T=.15,C=Math.min(o*(1-2*T)/w,l*(1-2*T)/E),F=w*C,B=E*C,D=t+(o-F)/2,H=r+(l-B)/2;e.save(),p[0]<0&&!y?(e.translate(D+F,H),e.scale(-1,1)):e.translate(D,H);const U="#D09A5A",$=f>50?"#BDBDBD":"#281808",ee="#7F5C4A",Ce="#6B4F3A",_e="#E0D8C0",Ge="#A0522D",Ne=1-Math.max(0,Math.min(100,S))/100*.2,Pe=d==="male"?1.1:.9,de=.8+(Math.max(1,Math.min(f,60))-1)/59*.2;let Ue=cP*Ne*Pe*de,Ae=dP*Ne*Pe*de,ne=fP*Ne*de;m&&d==="female"&&(Ue*=1.5);const W=Math.round((w-Ue)/2),X=Math.round((w-Xn)/2),Y=W-Ae,R=W+Ue,L=1,K=W+(Ue/2-L/2)-ne,ie=W+(Ue/2+L/2),Se=p[1]<-.2&&Math.abs(p[0])<.7,ae=Z=>{e.fillStyle=hP,e.beginPath();const re=w/2,Le=Z;e.ellipse(Math.floor(re*C),Math.floor(Le*C),Math.max(1,Math.floor(pP*C)),Math.max(1,Math.floor(gP*C)),0,0,2*Math.PI),e.fill()},Ee=(Z,re)=>{d==="male"?(ye(e,W,js+Z,Ue,gn-co,re,C),ye(e,W,js+gn-co+Z,Ue,co,ee,C)):ye(e,W,js+Z,Ue,gn,Ce,C)},Te=(Z,re)=>{Se?ye(e,X,$i+Z,Xn,li,$,C):(ye(e,X,$i+Z,Xn,li,re,C),ye(e,X,$i+Z,Xn,Gl,$,C),d==="female"?(ye(e,X-1,$i+Gl+Z,1,li,$,C),ye(e,X+Xn,$i+Gl+Z,1,li,$,C)):ye(e,X+1,$i+2+Z,Xn-2,li-2,$,C))};switch(u){case"idle":{const Z=s*Math.PI*2,re=Math.sin(Z)*.5,he=(Math.cos(Z*2)+1)*.25;ae(lt+Je+1),ye(e,K+re,lt+he,ne,Je,U,C),ye(e,ie-re,lt+he,ne,Je,U,C),Ee(he,U),ye(e,Y,bt+he,Ae,kt,U,C),ye(e,R,bt+he,Ae,kt,U,C),Te(he,U);break}case"walk":{const Z=s*Math.PI*2,re=Math.sin(Z)*2,he=Math.abs(Math.cos(Z))*1;ae(lt+Je+1),ye(e,K+re,lt+he,ne,Je,U,C),ye(e,ie-re,lt+he,ne,Je,U,C),Ee(he,U),ye(e,Y-re,bt+he,Ae,kt,U,C),ye(e,R+re,bt+he,Ae,kt,U,C),Te(he,U);break}case"gathering":{const Z=s*Math.PI*2,re=1,Le=(Math.sin(Z)+1)/2*2,he=re+Math.abs(Math.cos(Z))*.5;ae(lt+Je+1),ye(e,K,lt+he,ne,Je-re,U,C),ye(e,ie,lt+he,ne,Je-re,U,C),Ee(he,U),ye(e,Y+1,bt+he-Le,Ae,kt,U,C),ye(e,R-1,bt+he-Le,Ae,kt,U,C),Te(he,U);break}case"eat":{ae(lt+Je+1),ye(e,K,lt+1,ne,Je-1,U,C),ye(e,ie,lt+1,ne,Je-1,U,C),Ee(1,U);const Le=(Math.sin(s*Math.PI*4)+1)/2,he=X+Xn/2,Ln=$i+li/2,qe=R+(he-R)*Le,je=bt+1+(Ln-(bt+1))*Le;ye(e,Y,bt+1,Ae,kt,U,C),ye(e,qe,je,Ae,kt,U,C),ye(e,qe,je-1,1,1,Ge,C),Te(1,U);break}case"procreate":{const Z=(Math.sin(s*Math.PI*8)+1)/4,re=(Math.sin(s*Math.PI*6)+1)*.5,Le=1.5,he=Le-re;ae(lt+Je+1),ye(e,K,lt+he,ne,Je-Le,U,C),ye(e,ie,lt+he,ne,Je-Le,U,C),Ee(he,U),ye(e,Y,bt+he,Ae,kt,U,C),ye(e,R,bt+he,Ae,kt,U,C),Te(he,U),e.globalAlpha=Z,Ee(he,"white"),e.globalAlpha=1;break}case"attacking":{const Z=Math.sin(s*Math.PI)*1.5,re=Math.abs(Math.sin(s*Math.PI));ae(lt+Je+1),ye(e,K-Z,lt+re,ne,Je,U,C),ye(e,ie+Z*.5,lt+re,ne,Je,U,C),Ee(re,U),ye(e,Y,bt+re-2,Ae,kt,U,C),ye(e,R,bt+re-2.5,Ae,kt,U,C),Te(re,U);break}case"defending":{ae(lt+Je+1),ye(e,K,lt+1,ne,Je-1,U,C),ye(e,ie,lt+1,ne,Je-1,U,C),Ee(1,U),ye(e,Y-1,bt+1-1,Ae,kt,U,C),ye(e,R+1,bt+1-1,Ae,kt,U,C),Te(1,U);break}case"stunned":case"dead":{const Z=u==="dead",re=Z?Math.min(1,s):0,Le=re>.5?_e:U,he=d==="male"?ee:Ce,Ln=re>.8?"transparent":$,qe=w/2,je=E/2,Bn=2;ae(E-1),ye(e,qe-ne-Bn,je,ne,Je,Le,C),ye(e,qe+Bn,je,ne,Je,Le,C),ye(e,qe-Ae-Bn,je-gn+1,Ae,kt,Le,C),ye(e,qe+Bn,je-gn+1,Ae,kt,Le,C);const Wt=qe-Ue/2,an=je-gn/2;d==="male"?(re<.7&&ye(e,Wt,an+gn-co,Ue,co,he,C),ye(e,Wt,an,Ue,gn-co,Le,C)):re<.7?ye(e,Wt,an,Ue,gn,he,C):ye(e,Wt,an,Ue,gn,Le,C);const Hn=qe-Xn/2,bn=je-gn/2-li+1;if(ye(e,Hn,bn,Xn,li,Le,C),Ln!=="transparent"&&ye(e,Hn,bn,Xn,Gl,Ln,C),Z&&re>.6){const vi="#B0A890";for(let nr=0;nr<3;nr++)ye(e,Wt+1,an+nr*1+1,Ue-2,.5,vi,C)}break}default:ye(e,0,0,w,E,"magenta",C);break}e.restore()}};function mP(e,t,r,o,l){const s=t.x,u=t.y-r-o/2;e.save(),e.fillStyle=l,e.strokeStyle=l,e.lineWidth=1.5,e.beginPath(),e.rect(s-o/2,u,o,o/2),e.fill(),e.beginPath(),e.moveTo(s-o/2,u),e.lineTo(s-o/4,u-o/3),e.lineTo(s-o/6,u),e.moveTo(s-o/6,u),e.lineTo(s,u-o/2),e.lineTo(s+o/6,u),e.moveTo(s+o/6,u),e.lineTo(s+o/4,u-o/3),e.lineTo(s+o/2,u),e.stroke(),e.restore()}function aa(e,t,r,o,l,s=!1,u=!1,d=!1,f=!1){o<Bf&&(r=r*.75),ah.render(e,t.x-r/2,t.y-r/2,r,r,0,"idle",l,o,[0,0],!1,0);let p,m;s?(p=nw,m=Vf):u?(p=iw,m=_v):d?(p=rw,m=Cv):f&&(p=ow,m=wv),p&&m&&mP(e,t,r/2,p,m)}function vP(e,t,r,o,l,s){if(e.save(),o.length===0){e.restore();return}const u=o.length*l,d=4;let f;const p=u+(o.length-1)*d;o.length>1&&p>s?f=(s-u)/(o.length-1):f=d,o.length<=1&&(f=0);for(let m=0;m<o.length;m++){const{member:S,isPlayer:y,isHeir:w,isPartner:E,isParent:T}=o[m],C=t+m*(l+f)+l/2,F=r+l/4;aa(e,{x:C,y:F},l,S.age,S.gender,y,w,E,T)}e.restore()}function SP(e,t,r,o,l){if(r.length===0)return;e.save();const s=Yn,u=" 00",d=" 00";e.font=`${wd}px "Press Start 2P", Arial`;const f=e.measureText(u).width,p=e.measureText(d).width,m=Yn+pn+Yn+pn+Yn+Hi+f+Yn/2+Hi+p,S=r.length*_l+(r.length-1)*Hm,y=l-S-Yn;e.fillStyle=aw,e.fillRect(s,y,m,S);for(let w=0;w<r.length;w++){const E=r[w],T=y+w*(_l+Hm),C=T+_l/2;E.isPlayerTribe&&(e.fillStyle=sw,e.fillRect(s,T,m,_l));let F=s+Yn;if(e.font=`${pn}px "Press Start 2P", Arial`,e.textBaseline="middle",e.textAlign="left",e.fillText(E.tribeBadge,F,C-pn/4),F+=pn+Yn,!E.isPlayerTribe){const B=E.diplomacyStatus===gt.Friendly?"":"",D=`diplomacyButton_${E.leaderId}`,H={x:F-2,y:C-pn/2-2,width:pn+4,height:pn+4},x={id:D,action:pe.ToggleDiplomacy,rect:H,text:"",icon:B,backgroundColor:"transparent",textColor:"white",currentWidth:pn,tooltip:`Toggle diplomacy with this tribe (Currently: ${E.diplomacyStatus})`,targetTribeId:E.leaderId};t.uiButtons.push(x),t.hoveredButtonId===D&&(e.fillStyle=Zf,e.globalAlpha=.5,e.fillRect(H.x,H.y,H.width,H.height),e.globalAlpha=1),e.font=`${pn*.8}px "Press Start 2P", Arial`,e.textBaseline="middle",e.textAlign="center",e.fillText(B,F+pn/2,C)}F+=pn+Yn,E.adultCount>0&&(aa(e,{x:F+Hi/2,y:C},Hi,25,"male"),F+=Hi/2,e.font=`${wd}px "Press Start 2P", Arial`,e.fillStyle="white",e.textBaseline="middle",e.textAlign="left",e.fillText(` ${E.adultCount}`,F,C),F+=e.measureText(` ${E.adultCount}`).width+Yn/2),E.childCount>0&&(aa(e,{x:F+Hi/2,y:C},Hi,1,"female"),F+=Hi/2,e.font=`${wd}px "Press Start 2P", Arial`,e.fillStyle="white",e.textBaseline="middle",e.textAlign="left",e.fillText(` ${E.childCount}`,F,C))}e.restore()}function yP(e,t,r,o,l){const s=Hv,u=bv,d=t+o-s-u,f=r+u;e.save(),e.lineWidth=2,e.strokeStyle=l?Lw:Uw,e.beginPath();const p=5;e.moveTo(d+p,f+p),e.lineTo(d+s-p,f+s-p),e.moveTo(d+s-p,f+p),e.lineTo(d+p,f+s-p),e.stroke(),e.restore()}function AP(e,t,r,o){const{tutorialState:l,tutorial:s}=t;if(l.transitionState===xt.INACTIVE)return;const u=s.steps[l.currentStepIndex];if(!u)return;e.save(),e.globalAlpha=l.transitionAlpha;const d=Rw,f=Pw,p=Nw,m=`${Rd}px "Press Start 2P", Arial`,S=`${jm}px "Press Start 2P", Arial`,y=Ow,w=jm*1.5;e.font=S;const E=u.text.split(" ");let T="";const C=[];for(let _e=0;_e<E.length;_e++){const Ge=T+E[_e]+" ";e.measureText(Ge).width>d-f*2&&_e>0?(C.push(T),T=E[_e]+" "):T=Ge}C.push(T);const F=f*2+Rd+f/2+C.length*w,B=(r-d)/2,D=o-F-160;e.fillStyle=Dw,e.beginPath(),e.moveTo(B+p,D),e.lineTo(B+d-p,D),e.quadraticCurveTo(B+d,D,B+d,D+p),e.lineTo(B+d,D+F-p),e.quadraticCurveTo(B+d,D+F,B+d-p,D+F),e.lineTo(B+p,D+F),e.quadraticCurveTo(B,D+F,B,D+F-p),e.lineTo(B,D+p),e.quadraticCurveTo(B,D,B+p,D),e.closePath(),e.fill(),e.fillStyle=y,e.textAlign="center",e.textBaseline="top",e.font=m,e.fillText(u.title,B+d/2,D+f),e.font=S;let H=D+f+Rd+f/2;for(const _e of C)e.fillText(_e,B+d/2,H),H+=w;const x=t.hoveredButtonId==="tutorial-dismiss";yP(e,B,D,d,x),e.restore();const U=Hv,$=bv,ee=B+d-U-$,Ce=D+$;return{x:ee,y:Ce,width:U,height:U}}function Vd(e,t,r){e.save();const o=Fw,l={x:t.x-o,y:t.y-o,width:t.width+o*2,height:t.height+o*2};e.strokeStyle=Lv,e.lineWidth=Bv+Math.sin(r*qf)*1.5,e.setLineDash([8,8]),e.strokeRect(l.x,l.y,l.width,l.height),e.restore()}function TP(e,t){e.fillStyle="white",e.font='30px "Press Start 2P", Arial',e.textAlign="center",e.fillText("Game Over!",e.canvas.width/2,e.canvas.height/2-60),e.font='20px "Press Start 2P", Arial',e.fillText("Lineage Extinct.",e.canvas.width/2,e.canvas.height/2-20),e.fillText(`Cause: ${t.causeOfGameOver||"Unknown"}`,e.canvas.width/2,e.canvas.height/2+20)}const Ef=10,IP=3,v0=Ef*.7;function EP(e,t,r,o,l){const{position:s,food:u,maxFood:d,ownerId:f,claimedUntil:p}=t;if(e.beginPath(),e.arc(s.x,s.y,Ef,0,Math.PI*2),e.fillStyle="#228B22",e.fill(),e.strokeStyle="#006400",e.lineWidth=1,e.stroke(),f&&p&&p>l&&o){const m=r.entities.entities[f];if(m){let S;m.id===o.id?S=Vf:yv(o,m,r)?S=zE:S=Rv,S&&(e.strokeStyle=S,e.lineWidth=1+Math.sin(l*2)*.5,e.beginPath(),e.arc(s.x,s.y,Ef+2,0,Math.PI*2),e.stroke())}}if(u.length>0){const m=Math.PI*2/Math.min(u.length,d);for(let S=0;S<u.length;S++){const y=S*m,w=s.x+v0*Math.cos(y),E=s.y+v0*Math.sin(y);e.beginPath(),e.arc(w,E,IP,0,Math.PI*2),e.fillStyle="#FF0000",e.fill()}}}const S0=(e,t,r=70,o=50)=>{const l=e>>t&255;return`hsl(${Math.floor(l/255*360)}, ${r}%, ${o}%)`},wP=(e,t)=>{const r=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(!r)return e;const[o,l,s]=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])];return`hsl(${o}, ${l}%, ${Math.max(0,s-t)}%)`},xl=(e,t,r,o,l,s,u,d=!1)=>{e.save(),e.translate(t,r),e.rotate(s),e.fillStyle=d?wP(u,15):u,e.beginPath(),e.roundRect(-o/2,0,o,l,o/2),e.fill(),e.restore()},Xd=(e,t)=>{const r=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/),o=75;if(!r)return`hsl(0, 0%, ${o}%)`;const[,l,s,u]=r.map(Number),d=s*(1-t),f=u+(o-u)*t;return`hsl(${l}, ${d}%, ${f}%)`},AS={name:"tribe-prey-2d",referenceImage:"swos.png",description:`A 2D prey asset for the Tribe game, featuring various stances and animations.

Prey is an animal which can be hunted by predators or humans in the Tribe game.

Preys look like small 4 leg mammals, with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Visual style

Prey characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like creatures from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in away that conveys their actions clearly.

Prey walks on all fours, unlike human (two legs).

Each prey is described by a unique gene code, which is a number that defines its appearance, size, and other characteristics. The gene code is used to generate the character's appearance, including body proportions, color, and other visual features. The gene code is a 32-bit integer, with each bit representing a specific characteristic of the character.

Prey should have should have visible body parts, such as head, torso, arms, and legs. The body parts should be connected and should not overlap. The character's body parts should be simple shapes, such as circles and rectangles, with solid colors and no gradients or patterns.

Preys are supposed to be sympathetic and friendly, so the character's face should have a friendly expression, with a smile and bright eyes. The character's eyes should be large and expressive, with a simple design.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the a character to give it a sense of depth.

IMPORTANT: The character is visible from the side, just like in Sensible Soccer.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 0 and 12, with 2 being the average age.
- gender:
  - 'male': Male prey are larger and more robust, with a more pronounced musculature.
  - 'female': Female prey are smaller and more agile, with a leaner build.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or a dust particles to indicate movement.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a grey skeleton over time. The character pose and body parts should not be animated in this stance, as the character is dead so it should not move.`,stances:["idle","walk","eat","dead","procreate"],render(e,t,r,o,l,s,u,d={gender:"male",age:2,direction:[1,0],isPregnant:!1,hungryLevel:0,geneCode:8405024}){e.save(),e.imageSmoothingEnabled=!1;const f=o*.15,p=t+o/2,m=r+l/2,S=o-f*2,y=l-f*2,{gender:w,age:E,direction:T,isPregnant:C,hungryLevel:F,geneCode:B}=d,D=.8+Math.min(E,10)/10*.4,H=w==="male"?1.05:.95,x=1-F/100*.3,U=S*.5*x*D*H;let $=y*.3*D*H;const ee=S*.15*D*H,Ce=U*.2,_e=y*.3,Ge=S0(B,0,30,50);let Ne=S0(B,8,50,40);if(E>45){const ae=Math.min(1,(E-45)/15);Ne=Xd(Ne,ae)}e.translate(p,m),T[0]<0&&e.scale(-1,1);const Pe=Math.sin(s*Math.PI*2),de=Math.cos(s*Math.PI*2),Ue=_e+$*.2;if(u==="dead"){const ae=Math.min(s,1);e.translate(0,y*.2),e.rotate(Math.PI/2);const Ee=Xd(Ne,ae),Te=Xd(Ge,ae);e.globalAlpha=.5+ae*.5,e.strokeStyle=Ee,e.lineWidth=Ce*.5,e.beginPath(),e.moveTo(-U*.4,0),e.lineTo(U*.4,0),e.stroke();for(let Z=-1;Z<=1;Z+=1)e.beginPath(),e.arc(0,0,$*.4,Math.PI*.4*Z-Math.PI*.2,Math.PI*.4*Z+Math.PI*.2),e.stroke();e.fillStyle=Te,e.beginPath(),e.arc(U*.5,0,ee,0,Math.PI*2),e.fill(),e.fillStyle="black",e.beginPath(),e.arc(U*.55,0,ee*.3,0,Math.PI*2),e.fill(),e.restore();return}e.fillStyle="rgba(0, 0, 0, 0.1)",e.beginPath(),e.ellipse(0,Ue,U*.7,U*.25,0,0,2*Math.PI),e.fill();let Ae=0,ne=0,W=0,X=0,Y=0,R=0;switch(u){case"idle":ne=Pe*(y*.02),W=Pe*.05,X=-Pe*.05,Y=-Pe*.05,R=Pe*.05;break;case"walk":ne=Math.abs(de)*(y*-.04),W=Pe*.7,X=-Pe*.7,Y=-Pe*.7,R=Pe*.7;break;case"eat":Ae=y*.1,ne=y*.05,Ae+=Pe*(y*.02);break;case"procreate":ne=y*.05;const ae=(1-de)*-S*.05;e.translate(ae,0),e.shadowColor="rgba(255, 182, 193, 0.9)",e.shadowBlur=10;break}C&&w==="female"&&($*=1.6);const L=ne,K=L-$*.2;xl(e,U*-.35,K,Ce,_e,Y,Ne,!0),xl(e,U*.35,K,Ce,_e,R,Ne,!0),e.fillStyle=Ne,e.beginPath(),e.ellipse(0,L,U/2,$/2,0,0,2*Math.PI),e.fill();const ie=U*.45,Se=K+Ae;e.fillStyle=Ge,e.beginPath(),e.arc(ie,Se,ee,0,Math.PI*2),e.fill(),T[1]>=0&&(e.fillStyle="black",e.beginPath(),e.arc(ie+ee*.3,Se-ee*.2,ee*.15,0,Math.PI*2),e.fill()),xl(e,U*-.35,K,Ce,_e,W,Ne),xl(e,U*.35,K,Ce,_e,X,Ne),e.restore()}};function CP(e,t){let[r,o,l]=e.match(/\d+/g).map(Number);return r=Math.max(0,r-t),o=Math.max(0,o-t),l=Math.max(0,l-t),`rgb(${r}, ${o}, ${l})`}function _P(e){const t=(e&16711680)>>16,r=(e&65280)>>8,o=e&255,l=`rgb(${t}, ${r}, ${o})`,s=CP(l,40),u=(e&255)%100+50,d=(e>>8&255)%100,f=(e>>16&255)%100,p=`rgb(${u}, ${d}, ${f})`,m=(e&8388608)!==0?"#00aaff":"#ffaa00";return{furColor:l,darkerFurColor:s,skinColor:p,eyeColor:m}}const TS={name:"tribe-predator-2d",referenceImage:"swos.png",description:`A 2D predator asset for the Tribe game, featuring various stances and animations.

Predator is an animal which can hunt and attack humans in the Tribe game. It is designed to be a threat to the player, adding an element of danger and challenge to the game world.

Predator look like bears or wolves, with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Visual style

Predator characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like creatures from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in away that conveys their actions clearly.

Predator walks on arms and legs, unlike human (two legs).

Each predator is described by a unique gene code, which is a number that defines its appearance, size, and other characteristics. The gene code is used to generate the character's appearance, including body proportions, color, and other visual features. The gene code is a 32-bit integer, with each bit representing a specific characteristic of the character.

Predator should have visible ears, eyes, and mouth with teeth. It must have a tail. Front legs should be shorter than back legs, and they should be positioned closer to the body. The character's body should be wider at the top and narrower at the bottom, with a slight curve to the back. The character's head should be larger than the body, with a pronounced jaw and sharp teeth.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the a character to give it a sense of depth.

IMPORTANT: The character is visible from the side, just like in Sensible Soccer.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 1 and 20, with 3 being the average age.
- gender:
  - 'male': Male predators are larger and more robust, with a more pronounced musculature.
  - 'female': Female predators are smaller and more agile, with a leaner build.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or a dust particles to indicate movement.
- 'attacking': The character performs an attack animation, with arms raised and a forward motion.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a grey skeleton over time. The character pose and body parts should not be animated in this stance, as the character is dead so it should not move.`,stances:["idle","walk","eat","dead","attacking","procreate"],render(e,t,r,o,l,s,u,d={gender:"male",age:20,direction:[1,0],isPregnant:!1,hungryLevel:0,geneCode:8405024}){const{gender:f,age:p,direction:m,isPregnant:S,hungryLevel:y,geneCode:w}=d;e.save();const E=o*.15,T=Math.max(1,Math.floor((o-E*2)/10)),C=m[0]<0;e.translate(t+o/2,r+l/2),C&&e.scale(-1,1);const F=_P(w),B=.8+Math.min(p,20)/20*.4,D=f==="male"?1.05:.95,H=1-y/100*.25,x=B*D*H,U=Math.max(0,Math.min(1,(p-15)/5));e.filter=`grayscale(${U})`;const $=F.furColor,ee=F.darkerFurColor,Ce=F.eyeColor,_e="#FFFFFF",Ge="#c75c5c",Ne="#E0E0E0",Pe="#A0A0A0",de=l/2-2*T,Ue=Math.sin(s*Math.PI*2),Ae=Math.abs(Ue);if(e.fillStyle="rgba(0,0,0,0.15)",e.beginPath(),e.ellipse(0,de,T*4,T,0,0,2*Math.PI),e.fill(),e.filter="none",u==="dead"){const qe=Math.min(1,s*2);e.save(),e.translate(0,de-T*3),e.rotate(-Math.PI/2);const je=(Bn,Wt,an,Hn,bn=!1)=>{e.fillStyle=bn?Pe:Ne,e.fillRect(Bn*T,Wt*T,an*T,Hn*T)};qe<1&&(e.globalAlpha=1-qe,e.fillStyle=$,e.beginPath(),e.ellipse(0,0,T*3,T*5,0,0,Math.PI*2),e.fill(),e.globalAlpha=1),qe>0&&(e.globalAlpha=qe,je(-1,-4,2,2),je(1,-3.5,1,1,!0),je(-.5,-2,1,5,!0),je(-2.5,-1,5,.5),je(-2.5,0,5,.5),je(-2.5,1,5,.5),je(-3,-2,-1,2,!0),je(3,-2,1,2),je(-3,2,-1,2,!0),je(3,2,1,2),e.globalAlpha=1),e.restore(),e.restore();return}e.fillStyle=$;let ne=0,W=0,X=0,Y=[0,0,0,0];switch(u){case"idle":ne=Ue*T*.1;break;case"walk":const qe=Math.sin(s*Math.PI*4);ne=Math.abs(qe)*-T*.5,Y=[qe*T,-qe*T,-qe*T,qe*T];break;case"attacking":const je=Math.sin(s*Math.PI*4);W=T*2+je*T,X=T*2,ne=T;break;case"eat":X=T*3+Ae*T,ne=T*1.5,e.fillStyle=Ge,e.fillRect(-T,de-T,T*2,T);break;case"procreate":ne=Math.sin(s*Math.PI*8)*T*.3,e.fillStyle="rgba(139, 69, 19, 0.5)";for(let Wt=0;Wt<5;Wt++){const an=(Math.random()-.5)*T*8,Hn=de+(Math.random()-.5)*T*2;Ae>.5&&e.fillRect(an,Hn,T*.5,T*.5)}break}const R=T*3*x*(S?1.3:1),L=T*5*x,K=-L/1.5,ie=de-R-T*2.5+ne;e.fillStyle=$,e.beginPath(),e.moveTo(K-T*.5,ie+R*.5),e.quadraticCurveTo(K-T*3,ie-T,K-T*2+Ue*T,ie+R+T),e.fill();const Se=T*1.2*x,ae=T*3*x,Ee=T*2.5*x,Te=K+L*.8,Z=K+L*.2;e.fillStyle=ee,e.fillRect(Z,de-Ee,Se,Ee+Y[2]),e.fillRect(Te,de-ae,Se,ae+Y[0]),e.fillStyle=$,e.beginPath(),e.moveTo(K,ie+R),e.lineTo(K,ie+T),e.quadraticCurveTo(K+L/2,ie,K+L,ie+T),e.lineTo(K+L,ie+R),e.fill(),e.fillStyle=$,e.fillRect(Z+T/2,de-Ee,Se,Ee+Y[3]),e.fillRect(Te+T/2,de-ae,Se,ae+Y[1]);const re=T*3.5*x,Le=K+L-re*.3+W,he=ie-re*.3+X;e.fillStyle=$,e.beginPath(),e.arc(Le,he,re/2,0,Math.PI*2),e.fill(),e.beginPath(),e.ellipse(Le+re*.4,he+re*.2,T*1.5,T,0,0,Math.PI*2),e.fill(),m[1]>=0&&(e.fillStyle=Ce,e.fillRect(Le+T*.5,he-T*.5,T*.5,T*.5),u==="attacking"&&(e.fillStyle=_e,e.fillRect(Le+re*.5,he+re*.4,T,T*.4))),e.fillStyle=ee,e.beginPath(),e.moveTo(Le-re*.4,he-re*.3),e.lineTo(Le,he-re*.7),e.lineTo(Le,he-re*.2),e.fill(),e.restore()}},RP=9;function PP(e,t){const{position:r,gender:o,age:l,decayProgress:s,food:u,radius:d,originalEntityType:f,geneCode:p}=t;if(e.save(),e.globalAlpha=1-s,f==="human"?ah.render(e,r.x-d,r.y-d,d*2,d*2,s,"dead",o,l,[0,0],!1,0):f==="prey"?AS.render(e,r.x-d,r.y-d,d*2,d*2,s,"dead",{gender:o,age:l,direction:[0,0],isPregnant:!1,hungryLevel:0,geneCode:p||8405024}):f==="predator"&&TS.render(e,r.x-d,r.y-d,d*2,d*2,s,"dead",{gender:o,age:l,direction:[0,0],isPregnant:!1,hungryLevel:0,geneCode:p||8405024}),e.restore(),u.length>0){e.save(),e.font=`${RP}px Arial`,e.textAlign="center",e.textBaseline="middle";const m=wt*.9,S=Math.PI/fv*3;u.forEach((y,w)=>{const E=w*S,T=r.x+m*Math.cos(E)*Math.atan2(w,w),C=r.y+m*Math.sin(E)*Math.atan2(w,w),F=Lf[y.type];e.fillText(F,T,C)}),e.restore()}}function Xi(e,t,r,o,l,s,u,d){e.save(),e.fillStyle=u,e.fillRect(t,r,o,l),e.fillStyle=d,e.fillRect(t,r,o*Math.max(0,s),l),e.restore()}function NP(e,t,r,o,l,s){if(e.save(),o.length===0){e.restore();return}const u=o.length*l;let d;u>s||u+(o.length-1)*4>s?d=(s-u)/(o.length-1):d=4,o.length===1&&(d=0);for(let f=0;f<o.length;f++){const p=Lf[o[f].type];e.fillText(p,t+f*(l+d),r)}e.restore()}function DP(e,t,r,o,l){const s=t.autopilotControls.hoveredAutopilotAction;if(!s)return;let u,d=wt/2;const f=yu[s.action],p=$v[s.action],m=`${f} ${p}`;if("targetEntityId"in s){const S=t.entities.entities[s.targetEntityId];S&&(u=S.position,d=S.radius)}else"position"in s&&(u=s.position);if(u){yS(e,u,d,Xf,Kf,2,r,o,l,t.mapDimensions),e.save(),e.font=`${No}px "Press Start 2P", Arial`,e.fillStyle="white",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=5;const{x:S,y}=Eu(u,r,{width:o,height:l},t.mapDimensions),w=y-d-Su-No/2;e.fillText(m,S,w),e.restore()}}function OP(e,t,r,o,l){e.save();const s=(Math.sin(l*qf)+1)/2,u=r+Su+s*5;e.strokeStyle=Xf,e.lineWidth=2,e.setLineDash(Kf),e.beginPath(),e.arc(t.x,t.y,u,0,Math.PI*2),e.stroke(),e.setLineDash([]);const d=yu[o],f=$v[o];if(d){e.font=`${No*1.5}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle";const p=t.y-u-25;e.fillText(d,t.x,p),e.font=`${No*.8}px "Press Start 2P", Arial`,e.fillText(f,t.x,p+25)}e.restore()}function MP(e,t,r){e.save();const o=30,l=70,s=3,u=l/s;for(let d=0;d<s;d++){const f=d*u,p=(r*o+f)%l,m=1-p/l;e.strokeStyle=`rgba(255, 215, 0, ${m*.7})`,e.lineWidth=1+(1-m)*2,e.beginPath(),e.arc(t.x,t.y,p,0,Math.PI*2),e.stroke()}e.restore()}function kP(e,t){const{activeAutopilotAction:r,behaviors:o}=t.autopilotControls,l=Et(t);if(!l)return;const s=(u,d)=>{MP(u,d.position,t.time)};if(l.isCallingToFollow&&sn(e,t.mapDimensions.width,t.mapDimensions.height,s,{position:l.position}),o.followLeader&&!r&&sn(e,t.mapDimensions.width,t.mapDimensions.height,s,{position:l.position},70),r){let u,d=15;if("position"in r)u=r.position;else if("targetEntityId"in r){const f=t.entities.entities[r.targetEntityId];f&&(u=f.position,d=f.radius||30)}if(u&&r.action!==se.AutopilotFollowMe&&!l.isCallingToFollow){const f=(p,m)=>{OP(p,m.position,d,r.action,t.time)};sn(e,t.mapDimensions.width,t.mapDimensions.height,f,{position:{...u}},u,d+30)}}}function y0(e,t,r,o,l,s,u=!0){const d=t.split(" ");let f="";const p=[];for(let m=0;m<d.length;m++){const S=f+d[m]+" ";e.measureText(S).width>l&&m>0?(p.push(f),f=d[m]+" "):f=S}if(p.push(f),u)for(let m=0;m<p.length;m++)e.fillText(p[m],r,o+m*s);return p.length*s}function FP(e){return 1-Math.pow(1-e,3)}function UP(e,t,r,o){t.notificationButtonRects={dismiss:{},view:{}};const l=t.notifications.filter(u=>!u.isDismissed);if(l.length===0)return;e.save();let s=o-Yw;for(const u of l){const d=r-Nl-Sr;e.font=`${Pd}px "Press Start 2P", Arial`;const f=d+Sr,p=Nl-Sr*2,m=y0(e,u.message,-9999,-9999,p,Pd*1.2,!1),S=Sr*2+m+jn,y=s-S,w=Date.now()-u.creationTime,E=Math.min(w/Ww,1),T=FP(E),C=o,F=C+(y-C)*T;e.fillStyle=Hw,e.beginPath(),e.roundRect(d,F,Nl,S,Bw),e.fill(),e.fillStyle=bw,e.textBaseline="top",y0(e,u.message,f,F+Sr,p,Pd*1.2,!0);const B=F+S-jn-Sr/2,D=d+Nl-jn-Sr/2,H={x:D,y:B,width:jn,height:jn};t.notificationButtonRects&&(t.notificationButtonRects.dismiss[u.id]=H);const x=t.hoveredButtonId===`notification-dismiss-${u.id}`;if(e.fillStyle=x?Km:Gw,e.font=`${jn}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("",H.x+H.width/2,H.y+H.height/2),u.targetEntityIds||u.targetPosition||u.targetArea||u.targetRadius){const ee={x:D-jn-Xm,y:B,width:jn,height:jn};t.notificationButtonRects&&(t.notificationButtonRects.view[u.id]=ee);const Ce=t.hoveredButtonId===`notification-view-${u.id}`;e.fillStyle=Ce?Km:xw,e.font=`${jn*(Ce?1.5:1.2)}px Arial`,e.fillText("",ee.x+ee.width/2,ee.y+ee.height/2)}s-=S+Xm}e.restore()}function LP(e){return e.length===0?0:e.reduce((r,o)=>r+o,0)/e.length}function Kd(e,t,r,o,l,s,u,d){e.save(),e.fillStyle="rgba(255, 255, 255, 0.1)",e.fillRect(o,l,s,u),e.strokeStyle="#555",e.lineWidth=1,e.strokeRect(o,l,s,u);const f=LP(r);e.fillStyle="white",e.font="11px monospace",e.textAlign="left",e.fillText(`${t}: ${f.toFixed(2)}ms`,o+Ze,l+Ze+8);const p=Math.max(...r,1),m=r.map(S=>S/p*u);if(e.beginPath(),e.strokeStyle=d,e.lineWidth=2,m.length>1){e.moveTo(o,l+u-m[0]);for(let S=1;S<m.length;S++){const y=o+S/(m.length-1)*s,w=l+u-m[S];e.lineTo(y,w)}}else if(m.length===1){const S=l+u-m[0];e.moveTo(o,S),e.lineTo(o+s,S)}e.stroke(),e.fillStyle="rgba(255, 255, 255, 0.7)",e.font="10px monospace",e.textAlign="right",e.fillText(`${p.toFixed(2)}ms`,o+s-Ze,l+Ze+8),e.restore()}function BP(e,t,r){const{performanceMetrics:o}=t;if(!o)return;const l=280,s=240,u=r-l-Ze,d=Ze+mn*2;e.save(),e.fillStyle="rgba(0, 0, 0, 0.8)",e.fillRect(u,d,l,s),e.strokeStyle="#444",e.lineWidth=2,e.strokeRect(u,d,l,s),e.fillStyle="white",e.font="12px monospace",e.textAlign="left";let f=d+Ze+5;const p=u+Ze;e.fillStyle="#66ccff",e.font="bold 14px monospace",e.fillText(" Performance Debugger",p,f),f+=25,e.fillStyle="white",e.font="12px monospace";const m=HP(t);e.fillText(`FPS: ${m.toFixed(1)}`,p,f),f+=20;const S=l-Ze*2,y=45,w=10;Kd(e,"Render",Zd(t,"renderTime"),p,f,S,y,"#4CAF50"),f+=y+w,Kd(e,"World Update",Zd(t,"worldUpdateTime"),p,f,S,y,"#2196F3"),f+=y+w,Kd(e,"AI Update",Zd(t,"aiUpdateTime"),p,f,S,y,"#FFC107"),e.fillStyle="#888",e.font="10px monospace",e.textAlign="center",e.fillText("Press '2' to toggle this panel",u+l/2,d+s-10),e.restore()}function HP(e){const{performanceMetrics:t}=e;if(!t||t.history.length===0)return 0;const r=t.history[t.history.length-1].bucketTime/(At/Tt);return t.history.filter(s=>r-s.bucketTime/(At/Tt)<1).length}function bP(e,t){if(e.length===0)return[];const r=new Map;for(const s of e){const u=Math.floor(s.bucketTime/(At/Tt));r.set(u,(r.get(u)||0)+s[t])}return Array.from(r.keys()).sort().map(s=>r.get(s)).slice(0,-1).slice(1).reverse()}function Zd(e,t){return bP(e.performanceMetrics.history,t)}function lh(e,t,r){if(!t.aiBlackboard)return;const o=t.aiBlackboard.nodeExecutionData,l=t.type==="human"?uS:t.type==="predator"?dS:t.type==="prey"?cS:null;if(!l)return;e.save(),e.font=`${mw}px Arial`,e.textAlign="left",e.textBaseline="top";const s=y=>{switch(y){case I.SUCCESS:return Sw;case I.FAILURE:return yw;case I.RUNNING:return Aw;case I.NOT_EVALUATED:case null:default:return Tw}},u=y=>{if(!y.name||!o[y.name])return{width:0,height:0};let w=0,E=0;const T=o[y.name],C=` ${y.name}`+(T!=null&&T.debugInfo?`: ${T.debugInfo}`:""),F=e.measureText(C).width,B=(y.depth??0)*zm+8+F+Ym+_s+20;if(w=Math.max(w,B),E+=_d,y.children)for(const D of y.children){const H=u(D);w=Math.max(w,H.width),E+=H.height}else if(y.child){const D=u(y.child);w=Math.max(w,D.width),E+=D.height}return{width:w,height:E}},d=(y,w,E,T)=>{if(!y.name||!o[y.name])return w;let C=w;const F=o[y.name],B=E+2+(y.depth??0)*zm;let D=I.NOT_EVALUATED,H=Wm,x="";if(F){D=F.status,x=F.debugInfo;const ee=Ew/Tt*At,Ce=r-F.lastExecuted,_e=Math.max(0,1-Ce/ee);H=RE(Wm,Iw,_e),Ce>Zs&&(D=I.NOT_EVALUATED)}const U=s(D);e.fillStyle=U,e.fillText("",B,C),e.fillStyle=H;const $=` ${y.name}`+(x?`: ${x}`:"");if(e.fillText($,B+8,C),F&&F.executionHistory.length>0){const{executionHistory:ee}=F,Ce=Uv/Tt*At,_e=r,Ge=_e-Ce,Ne=E+T-_s-Ym;let Pe=Ne;const de=C+(_d-Pl)/2,Ue=ee.filter(K=>K.time<Ge);let Ae=Ue.length>0?Ue[Ue.length-1].status:null,ne=Ge;const W=ee.filter(K=>K.time>=Ge&&K.time<=_e),X=_s/Ce;e.fillStyle="rgba(255, 255, 255, 0.1)",e.fillRect(Ne,de,_s,Pl);for(const K of W){const Se=(K.time-ne)*X;Se>0&&(e.fillStyle=s(Ae),e.fillRect(Pe,de,Se,Pl),Pe+=Se),Ae=K.status,ne=K.time}r-ne>Zs&&(Ae=I.NOT_EVALUATED);const R=(_e-ne)*X;e.fillStyle=s(Ae);const L=Ne+_s-Pe;e.fillRect(Pe,de,Math.min(R,L),Pl)}if(C+=_d,y.children)for(const ee of y.children)C=d(ee,C,E,T);else y.child&&(C=d(y.child,C,E,T));return C},{width:f,height:p}=u(l);if(p===0){e.restore();return}const m=t.position.x+pw,S=t.position.y+gw-p/2;e.fillStyle=vw,e.fillRect(m,S,f,p+4),d(l,S+2,m,f),e.restore()}const GP={moving:"walk",gathering:"gathering",eating:"eat",feeding:"eat",procreating:"procreate",idle:"idle",attacking:"attacking",planting:"gathering",depositing:"gathering",retrieving:"gathering"};function xP(e,t){var d;const{radius:r,position:o,activeAction:l="idle"}=t,s=((d=t.stateMachine)==null?void 0:d[0])||"N/A",u=t.isAdult?wt+20:wt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${l}`,o.x,o.y-u),e.fillText(`State: ${s}`,o.x,o.y-u+10),e.fillText(`HP: ${t.hitpoints}`,o.x,o.y-u+20),e.fillText(`Cooldown: ${t.attackCooldown||"N/A"}`,o.x,o.y-u+30),e.fillText(`Tribe: ${t.leaderId||"N/A"}`,o.x,o.y-u+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(255, 0, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function $P(e,t,r,o,l){e.save(),e.font=`${mf}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(r,t.x,t.y-(o?wt:Uo)-mf-l),e.restore()}function zP(e,t,r,o,l){const s=t.x,u=t.y-r-o/2;e.save(),e.fillStyle=l,e.strokeStyle=l,e.lineWidth=1.5,e.beginPath(),e.rect(s-o/2,u,o,o/2),e.fill(),e.beginPath(),e.moveTo(s-o/2,u),e.lineTo(s-o/4,u-o/3),e.lineTo(s-o/6,u),e.moveTo(s-o/6,u),e.lineTo(s,u-o/2),e.lineTo(s+o/6,u),e.moveTo(s+o/6,u),e.lineTo(s+o/4,u-o/3),e.lineTo(s+o/2,u),e.stroke(),e.restore()}function WP(e,t,r){var d;const{position:o,radius:l}=t,s=o.x-Cd/2,u=o.y-l-lw;if(((d=t.stateMachine)==null?void 0:d[0])===tr){const f=t.stateMachine[1],p=r-f.attackStartTime,m=Math.min(p/vv,1);Xi(e,s,u,Cd,bm,m,Yi,uw)}else if(t.attackCooldown&&t.attackCooldown>0){const f=1-t.attackCooldown/vu;Xi(e,s,u,Cd,bm,f,Yi,cw)}}function YP(e,t,r){const l="";e.save(),e.font="15px Arial",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=3,e.fillText(l,t.x,t.y-r),e.restore()}function jP(e,t,r=!1,o=!1,l=!1,s=!1,u=!1,d=!1,f=!1,p=!1,m,S){const{position:y,activeAction:w="idle"}=t,E=t.isAdult?wt:wt*.6,T=GP[w]||"idle";ah.render(e,y.x-E,y.y-E,E*2,E*2,t.animationProgress||0,T,t.gender,t.age,[t.direction.x,t.direction.y],t.isPregnant??!1,t.hunger),d&&(e.save(),e.strokeStyle=Rv,e.lineWidth=2,e.beginPath(),e.arc(y.x,y.y,E+3,0,2*Math.PI),e.stroke(),e.restore());let C,F;if(u?(C=YE,F=_v):r?(C=WE,F=Vf):l?(C=jE,F=$E):o?(C=VE,F=wv):s&&(C=XE,F=Cv),C&&F&&zP(e,y,E,C,F),t.tribeBadge&&$P(e,y,t.tribeBadge,t.isAdult??!1,C??0),f){let D=(t.isAdult?wt:Uo)+5;C&&(D+=C),t.tribeBadge&&(D+=mf),YP(e,y,D)}const B=p&&(S===void 0||t.id===S);B&&t.aiBlackboard&&lh(e,t,m),WP(e,t,m),B&&xP(e,t)}const VP={grazing:"eat",moving:"walk",procreating:"procreate",feeding:"eat",idle:"idle"};function XP(e,t){var d;const{radius:r,position:o,activeAction:l="idle"}=t,s=((d=t.stateMachine)==null?void 0:d[0])||"N/A",u=t.isAdult?wt+20:wt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${l}`,o.x,o.y-u),e.fillText(`State: ${s}`,o.x,o.y-u+10),e.fillText(`HP: ${t.hitpoints}`,o.x,o.y-u+20),e.fillText(`Hunger: ${Math.round(t.hunger)}`,o.x,o.y-u+30),e.fillText(`Age: ${Math.round(t.age)}`,o.x,o.y-u+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(0, 255, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function KP(e,t,r=!1,o=0,l){var m,S;const{position:s,activeAction:u="idle"}=t,d=t.isAdult?t.radius:t.radius*.6,f=VP[u]||"idle";if(AS.render(e,s.x-d,s.y-d,d*2,d*2,t.animationProgress||0,f,{gender:t.gender,age:t.age,direction:[((m=t.direction)==null?void 0:m.x)||1,((S=t.direction)==null?void 0:S.y)||0],isPregnant:t.isPregnant??!1,hungryLevel:t.hunger,geneCode:t.geneCode}),t.hitpoints<t.maxHitpoints){const y=d*1.5,w=3,E=s.x-y/2,T=s.y-d-8;e.fillStyle="#555",e.fillRect(E,T,y,w);const C=t.hitpoints/t.maxHitpoints;e.fillStyle=C>.5?"#4CAF50":C>.25?"#FFC107":"#F44336",e.fillRect(E,T,y*C,w)}const p=r&&(l===void 0||t.id===l);p&&t.aiBlackboard&&lh(e,t,o),p&&XP(e,t)}const ZP={attacking:"attacking",eating:"eat",moving:"walk",procreating:"procreate",feeding:"eat",idle:"idle"};function qP(e,t){var d;const{radius:r,position:o,activeAction:l="idle"}=t,s=((d=t.stateMachine)==null?void 0:d[0])||"N/A",u=t.isAdult?wt+20:wt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${l}`,o.x,o.y-u),e.fillText(`State: ${s}`,o.x,o.y-u+10),e.fillText(`HP: ${t.hitpoints}`,o.x,o.y-u+20),e.fillText(`Hunger: ${Math.round(t.hunger)}`,o.x,o.y-u+30),e.fillText(`Age: ${Math.round(t.age)}`,o.x,o.y-u+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(255, 0, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function QP(e,t,r=!1,o=0,l){var m,S;const{position:s,activeAction:u="idle"}=t,d=t.isAdult?t.radius:t.radius*.6,f=ZP[u]||"idle";if(TS.render(e,s.x-d,s.y-d,d*2,d*2,t.animationProgress||0,f,{gender:t.gender,age:t.age,direction:[((m=t.direction)==null?void 0:m.x)||1,((S=t.direction)==null?void 0:S.y)||0],isPregnant:t.isPregnant??!1,hungryLevel:t.hunger,geneCode:t.geneCode}),t.hitpoints<t.maxHitpoints){const y=d*1.5,w=3,E=s.x-y/2,T=s.y-d-8;e.fillStyle="#555",e.fillRect(E,T,y,w);const C=t.hitpoints/t.maxHitpoints;e.fillStyle=C>.5?"#4CAF50":C>.25?"#FFC107":"#F44336",e.fillRect(E,T,y*C,w)}(t.attackCooldown&&t.attackCooldown>0||t.huntCooldown&&t.huntCooldown>0)&&(e.strokeStyle="#FF8C00",e.lineWidth=3,e.beginPath(),e.arc(s.x,s.y,d+3,0,2*Math.PI),e.stroke());const p=r&&(l===void 0||t.id===l);p&&t.aiBlackboard&&lh(e,t,o),p&&qP(e,t)}const IS=15;function A0(e,t,r,o,l=1.5){const s=r-t.startTime,u=Math.min(s/t.duration,1),d=1-u,p=1+Math.sin(u*Math.PI*2)*(l-1),m=IS*p;e.save(),e.globalAlpha=d,e.beginPath(),e.arc(t.position.x,t.position.y,Math.max(0,m),0,Math.PI*2),e.fillStyle=o,e.fill(),e.restore()}function fo(e,t,r,o,l=2){const s=r-t.startTime,u=Math.min(s/t.duration,1),d=1-u,f=IS*2*u;e.save(),e.globalAlpha=d,e.beginPath(),e.arc(t.position.x,t.position.y,f,0,Math.PI*2),e.strokeStyle=o,e.lineWidth=l,e.stroke(),e.restore()}function bi(e,t,r,o){const l=r-t.startTime,s=Math.min(l/t.duration,1),u=1-s,d=-20*s;e.save(),e.globalAlpha=u,e.font="20px Arial",e.textAlign="center",e.fillText(o,t.position.x,t.position.y+d),e.restore()}function JP(e,t,r){switch(t.type){case ue.Hunger:A0(e,t,r,"rgba(255, 165, 0, 0.7)",1);break;case ue.Procreation:bi(e,t,r,"");break;case ue.Pregnant:A0(e,t,r,"rgba(255, 105, 180, 0.7)",1.2);break;case ue.TargetAcquired:fo(e,t,r,"rgba(255, 0, 0, 0.8)",3);break;case ue.Attack:bi(e,t,r,"");break;case ue.Partnered:bi(e,t,r,"");break;case ue.BushClaimed:fo(e,t,r,"rgba(0, 255, 0, 0.7)",2);break;case ue.BushClaimLost:fo(e,t,r,"rgba(128, 128, 128, 0.7)",2);break;case ue.Eating:bi(e,t,r,"");break;case ue.ChildFed:bi(e,t,r,"");break;case ue.AttackDeflected:bi(e,t,r,"");break;case ue.AttackResisted:bi(e,t,r,"");break;case ue.Hit:bi(e,t,r,"");break;case ue.SeizeBuildup:fo(e,t,r,"rgba(255, 215, 0, 0.8)",4);break;case ue.Seize:fo(e,t,r,"rgba(148, 0, 211, 0.8)",4);break;case ue.CallToAttack:fo(e,t,r,"rgba(255, 255, 0, 0.8)",4);break}}function T0(e,t,r,o,l,s,u){e.save();const{position:d}=t;e.strokeStyle=o,e.lineWidth=l+Math.sin(u*s)*(l/2),e.setLineDash([8,8]),e.beginPath(),e.arc(d.x,d.y,r,0,2*Math.PI),e.stroke(),e.restore()}const I0=8,eN=1.5,tN=.5,E0=2,nN="#5a5a5a",iN="#7e7e7e",rN=6;function qd(e){const t=Math.sin(e)*1e4;return t-Math.floor(t)}function ES(e,t,r,o,l){const s=(t+r)*2,u=Math.floor(s/I0),d=-t/2,f=t/2,p=-r/2,m=r/2;for(let S=0;S<u;S++){const y=o+S*13,w=qd(y),E=qd(y+1);let T=S*I0,C=0,F=0;T<t?(C=d+T,F=p):T<t+r?(C=f,F=p+(T-t)):T<t*2+r?(C=f-(T-(t+r)),F=m):(C=d,F=m-(T-(t*2+r)));const B=(E-.5)*E0,D=(qd(y+2)-.5)*E0;e.beginPath();const H=eN+w*tN;e.fillStyle=l||(w>.5?iN:nN),e.ellipse(C+B,F+D,H,H*.85,E*Math.PI,0,Math.PI*2),e.fill(),l||(e.strokeStyle="#2b2b2b",e.lineWidth=1,e.stroke())}}function oN(e,t){if(!t.storedFood||t.storedFood.length===0)return;const{position:r,storedFood:o}=t;e.save(),e.font=`${rN}px Arial`,e.textAlign="center",e.textBaseline="middle",e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=2,o.forEach(l=>{const s=Lf[l.item.type],u={x:r.x+l.positionOffset.x,y:r.y+l.positionOffset.y};e.fillText(s,u.x,u.y)}),e.shadowBlur=0,e.shadowColor="transparent",e.restore()}function sN(e,t,r){const{position:o,width:l,height:s,constructionProgress:u,destructionProgress:d,isConstructed:f,isBeingDestroyed:p,id:m}=t,S=ua[t.buildingType];e.save(),e.translate(o.x,o.y),f||(e.globalAlpha=.3+u*.7),ES(e,l,s,m),e.globalAlpha=.5,e.font=`${Math.min(l,s,30)*.5}px Arial`,e.textAlign="center",e.textBaseline="middle",e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=4,e.fillStyle="#FFFFFF",e.fillText(S.icon,0,0),e.shadowBlur=0,e.restore();const y=l,w=o.x-y/2,E=o.y+s/2+_C;f?p&&Xi(e,w,E,y,e0,1-d,Yi,CC):Xi(e,w,E,y,e0,u,Yi,wC),t.buildingType==="storageSpot"&&f&&oN(e,t)}function aN(e,t,r,o,l){const s=ua[r],{width:u,height:d}=s.dimensions,f=(m,S)=>{m.save(),m.translate(S.x,S.y),m.globalAlpha=EC;const y=o?"#4CAF50":"#F44336";ES(m,u,d,9999,y),m.font=`${Math.min(u,d)*.5}px Arial`,m.textAlign="center",m.textBaseline="middle",m.fillStyle=y,m.fillText(s.icon,0,0),m.restore()},p={position:{...t},radius:Math.max(u,d)/2,id:0,type:"building",direction:{x:0,y:0},acceleration:0,forces:[],velocity:{x:0,y:0},debuffs:[]};sn(e,l.width,l.height,(m,S)=>f(m,S.position),p)}function lN(e,t,r,o,l){const s=Et(t),u=s?Lt(t,s):[],d=mi(u),{width:f,height:p}=t.mapDimensions;Object.values(t.entities.entities).sort((E,T)=>E.type==="building"&&T.type!=="building"?-1:E.position.y-T.position.y||E.id-T.id).filter(E=>bl(E,o,l,t.mapDimensions)).forEach(E=>{var T,C;if(E.type==="building")sn(e,f,p,sN,E,t,s,t.time);else if(E.type==="berryBush")sn(e,f,p,EP,E,t,s,t.time);else if(E.type==="human"){const F=E,B=F.id===(s==null?void 0:s.id),D=u.some(_e=>_e.id===F.id),H=F.id===(d==null?void 0:d.id),x=s&&(F.id===s.motherId||F.id===s.fatherId),U=s&&(((T=F.partnerIds)==null?void 0:T.includes(s.id))||((C=s.partnerIds)==null?void 0:C.includes(F.id))),$=(s==null?void 0:s.attackTargetId)===F.id,ee=F.leaderId?t.entities.entities[F.leaderId]:void 0,Ce=s?F.leaderId===s.id&&F.activeAction==="moving"&&F.target===F.leaderId&&(ee==null?void 0:ee.isCallingToFollow):!1;sn(e,f,p,jP,F,B,x,D,U,H,$,Ce,r,t.time,t.debugCharacterId)}else E.type==="corpse"?sn(e,f,p,PP,E):E.type==="prey"?sn(e,f,p,KP,E,r,t.time,t.debugCharacterId):E.type==="predator"&&sn(e,f,p,QP,E,r,t.time,t.debugCharacterId)}),t.visualEffects.filter(E=>bl(E,o,l,t.mapDimensions)).forEach(E=>{sn(e,f,p,JP,E,t.time)});const w=t.notifications.filter(E=>!E.isDismissed);for(const E of w)if(E.highlightedEntityIds&&E.renderHighlights)for(const T of E.highlightedEntityIds){const C=t.entities.entities[T];C&&bl(C,o,l,t.mapDimensions)&&sn(e,f,p,T0,C,jw,Vw,Kw,Xw,t.time)}if(t.tutorialState.isActive&&t.tutorialState.highlightedEntityIds.length>0)for(const E of t.tutorialState.highlightedEntityIds){const T=t.entities.entities[E];T&&bl(T,o,l,t.mapDimensions)&&sn(e,f,p,T0,T,kw,Lv,Bv,qf,t.time)}}function uN(e,t,r,o,l,s){let u=null,d=null;e.textAlign="left";let f=Ze+mn;const m=t.time/(At/Tt)/mu%1,S=Rs[ho.Time],y=25,w=Ze+y;e.fillText(S,Ze,f+nn/2+mn/3),Xi(e,w,f,Bi,nn,m,Yi,tw),f+=nn+ai;const E=f+mr/2,T=f+(mr-nn)/2,C=5;aa(e,{x:Ze*2,y:E},mr,5,r.gender,!1,!1,!1);const F=Ze+mr+C,B=Bi+y-(mr+C)*2;Xi(e,F,T,B,nn,Math.floor(r.age)/qs,Yi,ew),aa(e,{x:F+B+C+mr/2,y:E},mr,qs,r.gender,!1,!1,!1),f+=nn+ai*2;const D=[],H=new Set;if(D.push({member:r,isPlayer:!0,isHeir:!1,isPartner:!1,isParent:!1}),H.add(r.id),o&&!H.has(o.id)&&(D.push({member:o,isPlayer:!1,isHeir:!0,isPartner:!1,isParent:!1}),H.add(o.id)),l.forEach(de=>{H.has(de.id)||(D.push({member:de,isPlayer:!1,isHeir:!1,isPartner:!0,isParent:!1}),H.add(de.id))}),s.forEach(de=>{H.has(de.id)||(D.push({member:de,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!1}),H.add(de.id))}),r.motherId&&!H.has(r.motherId)){const de=t.entities.entities[r.motherId];de&&(D.push({member:de,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!0}),H.add(de.id))}if(r.fatherId&&!H.has(r.fatherId)){const de=t.entities.entities[r.fatherId];de&&(D.push({member:de,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!0}),H.add(de.id))}const x=Rs[ho.Family],U=10,$=Ze+mn+U,ee=Bi+y-(mn+U),Ce=f+Cl/2;e.font=`${mn}px "Press Start 2P", Arial`,e.textBaseline="middle",e.fillText(x,Ze,Ce);const _e=f+Cl/2;vP(e,$,_e,D,Cl,ee),f+=Cl+ai,e.textBaseline="alphabetic";const Ge=Rs[ho.Hitpoints];e.fillText(Ge,Ze,f+nn/2+mn/3),Xi(e,w,f,Bi,nn,r.hitpoints/r.maxHitpoints,Yi,JE),f+=nn+ai;const Ne=Rs[ho.Hunger];e.fillText(Ne,Ze,f+nn/2+mn/3),Xi(e,w,f,Bi,nn,(Mr-r.hunger)/Mr,Yi,QE),u={x:Ze,y:f-ai/2,width:Bi+y,height:nn+ai},f+=nn+ai,e.textBaseline="middle";const Pe=Rs[ho.Food];return e.fillText(Pe,Ze,f+wl/2),NP(e,w,f+wl/2,r.food,wl,Bi),d={x:Ze,y:f-ai/5,width:Bi+y,height:wl+ai},e.textBaseline="alphabetic",{hungerBarRect:u,foodBarRect:d}}let Ms=[],w0=0;const cN=36,dN=200;function fN(e,t,r,o){const l=t.search.prey.count(),s=t.search.predator.count(),u=t.search.berryBush.count();t.time-w0>=cN&&(Ms.push({time:t.time,prey:l,predators:s,bushes:u}),Ms.length>dN&&(Ms=Ms.slice(-200)),w0=t.time);const d=et*tt,f=l/d*1e6,p=s/d*1e6,m=u/d*1e6,S=eP(),y=Math.floor(t.time/(24*365)),w=Math.floor(t.time%(24*365)/24),E=Math.floor(t.time%24),T=400,C=Math.min(o*.8,600),F=r-T-10,B=Ze+mn*2;e.save(),e.fillStyle="rgba(0, 0, 0, 0.9)",e.fillRect(F,B,T,C),e.strokeStyle="#444",e.lineWidth=2,e.strokeRect(F,B,T,C),e.fillStyle="white",e.font="12px monospace",e.textAlign="left";let D=B+20;const H=14,x=F+15;e.fillStyle="#66ccff",e.font="bold 14px monospace",e.fillText(" Ecosystem Debugger",x,D),D+=25,e.fillStyle="white",e.font="12px monospace",e.fillText(`Game Time: Year ${y}, Day ${w}, Hour ${E}`,x,D),D+=H,e.fillText(`Map Size: ${et}  ${tt} pixels`,x,D),D+=20,e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Q-Learning Status",x,D),D+=18,S&&(e.fillText(`Q-Table Size: ${S.qTableSize} entries`,x,D),D+=H,e.fillText(`Exploration Rate: ${(S.explorationRate*100).toFixed(1)}%`,x,D),D+=H);const U=Ms.slice(-20);U.length>1&&(e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Population Trends (Last 20 Points)",x,D),D+=30,hN(e,x,D,U),D+=50),e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Density (per 1000 px)",x,D),D+=18,e.fillStyle="white",e.font="12px monospace";const $=(fi/d*1e6).toFixed(2),ee=(hi/d*1e6).toFixed(2),Ce=(pi/d*1e6).toFixed(2);e.fillText(`Prey: ${f.toFixed(2)} (target: ${$})`,x,D),D+=H,e.fillText(`Predators: ${p.toFixed(2)} (target: ${ee})`,x,D),D+=H,e.fillText(`Bushes: ${m.toFixed(2)} (target: ${Ce})`,x,D),D+=20,e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Current Population Status",x,D),D+=18,e.fillStyle="white",e.font="12px monospace";const _e=Math.round(l/fi*100),Ge=Math.round(s/hi*100),Ne=Math.round(u/pi*100),Pe=de=>de<50?"#ff4444":de<80?"#ffaa44":de>120?"#44aaff":"#44ff44";e.fillStyle=Pe(_e),e.fillText(`Prey: ${l}/${fi} (${_e}%)`,x,D),D+=H,e.fillStyle=Pe(Ge),e.fillText(`Predators: ${s}/${hi} (${Ge}%)`,x,D),D+=H,e.fillStyle=Pe(Ne),e.fillText(`Bushes: ${u}/${pi} (${Ne}%)`,x,D),D+=20,e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Current Parameters",x,D),D+=18,e.fillStyle="white",e.font="10px monospace",e.fillText("Prey:",x,D),D+=13,e.fillText(` Gestation: ${t.ecosystem.preyGestationPeriod.toFixed(1)}h`,x,D),D+=11,e.fillText(` Procreation: ${t.ecosystem.preyProcreationCooldown.toFixed(1)}h`,x,D),D+=11,e.fillText(` Hunger: ${t.ecosystem.preyHungerIncreasePerHour.toFixed(1)}/h`,x,D),D+=13,e.fillText("Predators:",x,D),D+=13,e.fillText(` Gestation: ${t.ecosystem.predatorGestationPeriod.toFixed(1)}h`,x,D),D+=11,e.fillText(` Procreation: ${t.ecosystem.predatorProcreationCooldown.toFixed(1)}h`,x,D),D+=11,e.fillText(` Hunger: ${t.ecosystem.predatorHungerIncreasePerHour.toFixed(1)}/h`,x,D),D+=13,e.fillText("Bushes:",x,D),D+=13,e.fillText(` Spread Chance: ${(t.ecosystem.berryBushSpreadChance*100).toFixed(1)}%`,x,D),D+=15,e.fillStyle="#888",e.font="10px monospace",e.textAlign="center",e.fillText("Press '1' to toggle this debugger",F+T/2,B+C-10),e.restore()}function hN(e,t,r,o){if(o.length<2)return;const d={prey:Math.max(...o.map(p=>p.prey),fi),predators:Math.max(...o.map(p=>p.predators),hi),bushes:Math.max(...o.map(p=>p.bushes),pi)};[{data:o.map(p=>p.prey),color:"#44ff44",label:"Prey",target:fi,max:d.prey},{data:o.map(p=>p.predators),color:"#ff4444",label:"Predators",target:hi,max:d.predators},{data:o.map(p=>p.bushes),color:"#ffaa44",label:"Bushes",target:pi,max:d.bushes}].forEach((p,m)=>{const S=t+m*115,y=r;e.fillStyle=p.color,e.font="10px monospace",e.fillText(p.label,S,y-5),e.strokeStyle="#333",e.lineWidth=1,e.strokeRect(S,y,100,30),e.beginPath(),e.strokeStyle=p.color;for(let E=0;E<p.data.length;E++){const T=S+E/(p.data.length-1)*100,C=y+30-p.data[E]/p.max*30;E===0?e.moveTo(T,C):e.lineTo(T,C)}e.stroke(),e.beginPath(),e.strokeStyle="#888",e.setLineDash([2,2]);const w=y+30-p.target/p.max*30;e.moveTo(S,w),e.lineTo(S+100,w),e.stroke(),e.setLineDash([])})}function C0(e,t,r){e.save();const{x:o,y:l,width:s,height:u}=t.rect,d=Nv;if(e.beginPath(),e.moveTo(o+d,l),e.lineTo(o+s-d,l),e.quadraticCurveTo(o+s,l,o+s,l+d),e.lineTo(o+s,l+u-d),e.quadraticCurveTo(o+s,l+u,o+s-d,l+u),e.lineTo(o+d,l+u),e.quadraticCurveTo(o,l+u,o,l+u-d),e.lineTo(o,l+d),e.quadraticCurveTo(o,l,o+d,l),e.closePath(),e.fillStyle=t.isDisabled?Dv:t.backgroundColor,e.fill(),t.activated){e.save();const f=(Math.sin(Date.now()/1e3*Fv)+1)/2;e.strokeStyle=kv,e.lineWidth=2+f*2,e.globalAlpha=.7+f*.3,e.stroke(),e.restore()}if(t.lastActivated){const f=Date.now()-t.lastActivated;if(f<ru){const p=1-f/ru;e.fillStyle=Mv,e.globalAlpha=p,e.fill(),e.globalAlpha=1}}r&&!t.isDisabled&&(e.fillStyle=Zf,e.globalAlpha=.5,e.fill(),e.globalAlpha=1),e.fillStyle=t.isDisabled?Ov:t.textColor,t.icon?(e.font=`${u*.55}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(t.icon,o+s/2,l+u/2),t.text&&(e.font=`${u*.18}px "Press Start 2P", Arial`,e.textAlign="right",e.textBaseline="bottom",e.fillText(t.text,o+s-4,l+u-2))):(e.font=`${mn*1.5}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(t.text,o+s/2,l+u/2)),e.restore()}function pN(e,t,r,o){e.save(),e.fillStyle="rgba(0, 0, 0, 0.6)",e.fillRect(0,0,r,o);const l=500,s=150,u=(r-l)/2,d=(o-s)/2;e.fillStyle=vn,e.font=`${mn*1.1}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("Are you sure you want to exit",r/2,d+s/3-10),e.fillText("to the main menu?",r/2,d+s/3+10);const f=di*1.5,p=Pv,m=d+s-p-Ze*2,S=20,y=f*2+S,w=u+(l-y)/2,E={id:"confirmExitYes",action:pe.ConfirmExitYes,rect:{x:w,y:m,width:f,height:p},text:"Yes",backgroundColor:zi,textColor:vn,currentWidth:f},T=w+f+S,C={id:"confirmExitNo",action:pe.ConfirmExitNo,rect:{x:T,y:m,width:f,height:p},text:"No",backgroundColor:zi,textColor:vn,currentWidth:f};t.uiButtons.push(E,C),C0(e,E,t.hoveredButtonId===E.id),C0(e,C,t.hoveredButtonId===C.id),e.restore()}function lu(e,t,r,o,l,s=!1){var f;if(e.save(),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="#2c5234",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.translate(e.canvas.width/2-r.x,e.canvas.height/2-r.y),!s&&t.gameOver){e.restore(),TP(e,t);return}lN(e,t,t.debugPanel===Rt.General,r,l);const u=Et(t);if(u&&t.selectedBuildingType&&t.selectedBuildingType!=="removal"&&t.mousePosition){const p=If(t.mousePosition,r,l,t.mapDimensions),m=jv(p,t.selectedBuildingType,u.leaderId,t);aN(e,p,t.selectedBuildingType,m,t.mapDimensions)}const d=t.notifications.filter(p=>!p.isDismissed);for(const p of d){const m=(Math.sin(t.time*zw)+1)/2;e.globalAlpha=m*.5+.25,e.fillStyle=$w,p.targetArea&&e.fillRect(p.targetArea.x,p.targetArea.y,p.targetArea.width,p.targetArea.height),p.targetRadius&&(e.beginPath(),e.arc(p.targetRadius.x,p.targetRadius.y,p.targetRadius.radius,0,Math.PI*2),e.fill())}if(e.globalAlpha=1,kP(e,t),e.restore(),!s){e.fillStyle=KE,e.font=`${mn}px "Press Start 2P", Arial`,e.shadowColor=ZE,e.shadowBlur=qE,t.uiButtons=[];let p=null,m=null;if(u){const w=Lt(t,u),E=mi(w),T=((f=u.partnerIds)==null?void 0:f.map(F=>t.entities.entities[F]).filter(F=>F!==void 0))||[],C=uN(e,t,u,E,T,w);p=C.hungerBarRect,m=C.foodBarRect}const S=Tv(t,u==null?void 0:u.leaderId);SP(e,t,S,e.canvas.width,e.canvas.height);const{commandButtonsRect:y}=oP(e,t,e.canvas.width);if(e.shadowColor="transparent",e.shadowBlur=0,u&&(DP(e,t,r,e.canvas.width,e.canvas.height),o.length>0&&uP(e,o,u,r,e.canvas.width,e.canvas.height,t.mapDimensions)),t.tutorialState.activeUIHighlights.length>0){const{activeUIHighlights:w}=t.tutorialState;w.includes(Dr.HUNGER_BAR)&&p&&Vd(e,p,t.time),w.includes(Dr.FOOD_BAR)&&m&&Vd(e,m,t.time),w.includes(Dr.COMMAND_BUTTONS)&&y&&Vd(e,y,t.time)}if(t.tutorialState.isActive){const w=AP(e,t,e.canvas.width,e.canvas.height);w&&t.uiButtons.push({id:"tutorial-dismiss",action:pe.DismissTutorial,rect:w,text:"",currentWidth:w.width,backgroundColor:"transparent",textColor:"transparent"})}switch(UP(e,t,e.canvas.width,e.canvas.height),t.debugPanel){case Rt.Ecosystem:fN(e,t,e.canvas.width,e.canvas.height);break;case Rt.Performance:BP(e,t,l.width);break}t.isPaused&&t.exitConfirmation!=="pending"&&sP(e),t.exitConfirmation==="pending"&&pN(e,t,e.canvas.width,e.canvas.height)}}const gN=An.div`
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
`,mN=An.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #2c5234;
`,vN=An.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  z-index: 1;
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0.7) 100%);
`,SN=An.h1`
  font-family: 'Press Start 2P', cursive;
  font-size: 4rem;
  color: #fff;
  text-shadow: 4px 4px 0px #ff0000;
  margin-bottom: 2rem;
`,_0=An.button`
  font-family: 'Press Start 2P', cursive;
  font-size: 1.5rem;
  padding: 1rem 2rem;
  color: #fff;
  background-color: #ff0000;
  border: 2px solid #fff;
  box-shadow: 4px 4px 0px #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;

  &:hover {
    background-color: #fff;
    color: #ff0000;
    box-shadow: 4px 4px 0px #ff0000;
  }
`,yN=An.div`
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  align-items: center;
`,AN=An.div`
  position: absolute;
  bottom: 1rem;
  font-family: 'Press Start 2P', cursive;
  font-size: 0.8rem;
  color: #fff;
  text-shadow: 2px 2px 0px #000;
  a {
    color: #fff;
    text-decoration: none;
    &:hover {
      text-decoration: underline;
    }
  }
`,$l="intro-soundtrack",R0=()=>{const{setAppState:e,savedGameState:t,clearCurrentSave:r}=ko(),o=Re.useRef(null),l=Re.useRef(null),s=Re.useRef(cR()),u=Re.useRef(),d=Re.useRef(s.current.viewportCenter),f=Re.useRef(),p=Re.useCallback(()=>{Md($l,2),r(),e("game")},[e,r]),m=Re.useCallback(()=>{t&&(Md($l,2),e("game"))},[e,t]);Re.useEffect(()=>{const w=E=>{(E.key==="Enter"||E.key===" ")&&(t?m():p())};return window.addEventListener("keydown",w),()=>{window.removeEventListener("keydown",w)}},[p,m,t]),Re.useEffect(()=>(Jf(fe.SoundTrack1,{loop:!0,trackId:$l}),()=>{Md($l,2)}),[]),Re.useEffect(()=>{const w=o.current;if(!w)return;l.current=w.getContext("2d");const E=()=>{w&&l.current&&(w.width=window.innerWidth,w.height=window.innerHeight,lu(l.current,s.current,d.current,[],{width:w.width,height:w.height},!0))};return E(),window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]),Re.useEffect(()=>{const w=()=>{const T=ME(s.current);if(T.length>0){const C=Math.floor(Math.random()*T.length);f.current=T[C].id}};w();const E=setInterval(w,KT);return()=>clearInterval(E)},[]);const[S,y]=rv(w=>{var C,F;if(!l.current)return;if(u.current===void 0){u.current=w;return}const E=Math.min((w-u.current)/1e3,1);s.current=Iu(s.current,E);const T=f.current?s.current.entities.entities[f.current]:void 0;if(T){const{mapDimensions:B}=s.current,{width:D,height:H}=B;let x={...T.position};const U=x.x-d.current.x;Math.abs(U)>D/2&&(U>0?x.x-=D:x.x+=D);const $=x.y-d.current.y;Math.abs($)>H/2&&($>0?x.y-=H:x.y+=H);let ee=zf(d.current,x,Uf*E);ee={x:(ee.x%D+D)%D,y:(ee.y%H+H)%H},d.current=ee}lu(l.current,s.current,d.current,[],{width:((C=o.current)==null?void 0:C.width)||800,height:((F=o.current)==null?void 0:F.height)||600},!0),u.current=w});return Re.useEffect(()=>(y(),S),[y,S]),Fe.jsxs(gN,{children:[Fe.jsx(mN,{ref:o}),Fe.jsxs(vN,{children:[Fe.jsx(SN,{children:"Tribe2"}),Fe.jsxs(yN,{children:[Fe.jsx(_0,{onClick:p,children:"New Game"}),t&&Fe.jsx(_0,{onClick:m,children:"Load Game"})]}),Fe.jsxs(AN,{children:["by"," ",Fe.jsx("a",{href:"https://github.com/gtanczyk",target:"_blank",rel:"noopener noreferrer",children:"gtanczyk"})]})]})]})};function TN(){console.log("Tribe game initialized with detailed 2D world state.");const e=uR();return e.ecosystem={preyGestationPeriod:Cr,preyProcreationCooldown:_r,predatorGestationPeriod:Rr,predatorProcreationCooldown:Pr,preyHungerIncreasePerHour:ji,predatorHungerIncreasePerHour:Vi,berryBushSpreadChance:gi},e.debugPanel=Rt.None,e.performanceMetrics={currentBucket:{renderTime:0,worldUpdateTime:0,aiUpdateTime:0},history:[]},e}const IN=({canvasRef:e,ctxRef:t,gameStateRef:r,viewportCenterRef:o,playerActionHintsRef:l})=>(Re.useEffect(()=>{const s=e.current;if(!s)return;t.current=s.getContext("2d");const u=()=>{s&&t.current&&r.current&&(s.width=window.innerWidth,s.height=window.innerHeight,lu(t.current,r.current,o.current,l.current,{width:s.width,height:s.height},!1))};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]),Fe.jsx("canvas",{ref:e,style:{display:"block",background:"#2c5234"}})),EN=(e,t,r,o=!1)=>{let l;const s=kE(e,r);if(s){if(t.isAdult&&s.type==="berryBush"&&s.food.length>0)l={action:se.AutopilotGather,targetEntityId:s.id};else if(t.isAdult&&s.type==="corpse"&&s.food.length>0)l={action:se.AutopilotGather,targetEntityId:s.id};else if(s.type==="human"){const u=s;t.isAdult&&Lo(t,u,r)?l={action:se.AutopilotAttack,targetEntityId:u.id}:Ur(t,u,r)?l={action:se.AutopilotProcreate,targetEntityId:u.id}:t.food.length>0&&!u.isAdult&&(u.motherId===t.id||u.fatherId===t.id)&&(l={action:se.AutopilotFeedChild,targetEntityId:u.id})}else if(s.type==="prey")l={action:se.AutopilotAttack,targetEntityId:s.id};else if(s.type==="predator")l={action:se.AutopilotAttack,targetEntityId:s.id};else if(s.type==="building"){const u=s;if(r.selectedBuildingType==="removal")l={action:se.Removal,position:s.position};else if(u.buildingType==="storageSpot"){const d=u.ownerId===t.leaderId,f=u.storedFood!==void 0&&u.storedFood.length>0,p=u.storedFood!==void 0&&u.storageCapacity!==void 0&&u.storedFood.length<u.storageCapacity;if(o&&u.isConstructed&&f&&t.food.length<t.maxFood)if(d)l={action:se.AutopilotRetrieve,targetEntityId:s.id};else{const m=t.leaderId?r.entities.entities[t.leaderId]:void 0;m&&m.diplomacy?m.diplomacy[u.ownerId]===gt.Hostile?l={action:se.AutopilotGather,targetEntityId:s.id}:l={action:se.AutopilotMove,position:e}:l={action:se.AutopilotMove,position:e}}else d&&u.isConstructed?t.food.length>0&&p?l={action:se.AutopilotDeposit,targetEntityId:s.id}:t.food.length<t.maxFood&&f?l={action:se.AutopilotRetrieve,targetEntityId:s.id}:l={action:se.AutopilotMove,position:e}:l={action:se.AutopilotMove,position:e}}else u.buildingType==="plantingZone"&&t.food.filter(d=>d.type===Mn.Berry).length>=Or&&!Fn(e,r,Qi)?l={action:se.AutopilotPlant,position:e}:l={action:se.AutopilotMove,position:e}}}else t.food.filter(u=>u.type===Mn.Berry).length>=Or&&(r.autopilotControls.isManuallyPlanting||WC(e,t,r))?l={action:se.AutopilotPlant,position:e}:l={action:se.AutopilotMove,position:e};return l},wN=(e,t)=>{if(e.isPaused)return;const r=Et(e);if(!r)return;if(e.selectedBuildingType&&e.selectedBuildingType!=="removal"){jv(t,e.selectedBuildingType,r.leaderId,e)&&(NC(t,e.selectedBuildingType,r.leaderId,e),e.selectedBuildingType=null);return}if(e.selectedBuildingType==="removal"){const l=OC(t,e);l&&DC(l.id,e);return}const o=e.autopilotControls.hoveredAutopilotAction;e.autopilotControls.activeAutopilotAction=void 0,o?(e.autopilotControls.activeAutopilotAction=o,(o.action===se.AutopilotMove||o.action===se.AutopilotGather)&&(e.hasPlayerMovedEver=!0),o.action===se.AutopilotPlant&&(e.hasPlayerPlantedBush=!0)):e.autopilotControls.activeAutopilotAction={action:se.AutopilotMove,position:t},e.autopilotControls.isManuallyMoving=!1,e.autopilotControls.isManuallyPlanting=!1},CN=(e,t)=>{var u,d,f,p;const r=e.key.toLowerCase(),o=e.ctrlKey||e.metaKey;let l=!0,s=t;if(o){switch(r){case"s":Rf(t);break;default:l=!1;break}return{newState:s,handled:l}}switch(r){case"escape":const{autopilotControls:m}=t;m.activeAutopilotAction||m.isManuallyMoving||m.isManuallyPlanting||t.buildMenuOpen||t.selectedBuildingType?(m.activeAutopilotAction=void 0,m.isManuallyMoving=!1,m.isManuallyPlanting=!1,t.buildMenuOpen=!1,t.selectedBuildingType=null):s.exitConfirmation==="pending"?(s.exitConfirmation="inactive",s.isPaused=!1):(s.exitConfirmation="pending",s.isPaused=!0);break;case"m":t.isMuted=!t.isMuted,Gs(t.masterVolume,t.isMuted);break;case"=":case"+":const S=Math.min(1,t.masterVolume+.1);t.masterVolume=parseFloat(S.toFixed(1)),Gs(t.masterVolume,t.isMuted);break;case"-":const y=Math.max(0,t.masterVolume-.1);t.masterVolume=parseFloat(y.toFixed(1)),Gs(t.masterVolume,t.isMuted);break;case"t":s=Iu(t,xv);break;case" ":case"p":t.isPaused=!t.isPaused;break;case"":case"`":s.debugPanel===Rt.General?(s.debugPanel=Rt.None,s.debugCharacterId=void 0):(s.debugPanel=Rt.General,s.debugCharacterId||(s.debugCharacterId=((u=Et(s))==null?void 0:u.id)??((d=Object.values(s.entities.entities).find(E=>E.type==="human"||E.type==="prey"||E.type==="predator"))==null?void 0:d.id)));break;case"!":if(e.shiftKey){if(s.debugPanel===Rt.Ecosystem){s.debugPanel=Rt.None;break}s.debugPanel=Rt.Ecosystem,s.debugCharacterId||(s.debugCharacterId=((f=Et(s))==null?void 0:f.id)??((p=Object.values(s.entities.entities).find(E=>E.type==="human"||E.type==="prey"||E.type==="predator"))==null?void 0:p.id))}else l=!1;break;case"@":if(e.shiftKey){if(s.debugPanel===Rt.Performance){s.debugPanel=Rt.None;break}s.debugPanel=Rt.Performance}else l=!1;break;case"tab":s.debugPanel=Rt.General;const w=Object.values(s.entities.entities).filter(E=>E.type==="human"||E.type==="prey"||E.type==="predator");if(w.length>0){const E=w.sort((B,D)=>{if(B.type==="human"&&B.isPlayer)return-1;if(D.type==="human"&&D.isPlayer)return 1;if(B.type!==D.type){const H={human:0,prey:1,predator:2},x=H[B.type]??999,U=H[D.type]??999;return x-U}return B.id-D.id}),T=s.debugCharacterId,F=((T?E.findIndex(B=>B.id===T):-1)+1)%E.length;s.debugCharacterId=E[F].id}else s.debugCharacterId=void 0;break;default:l=!1;break}return{newState:s,handled:l}},_N=(e,t,r,o,l)=>{const s={gameState:r};if(t&&["e","b","r","h"].includes(e)&&r.hasPlayerEnabledAutopilot++,r.buildMenuOpen){if(e==="1"){r.selectedBuildingType="storageSpot",Ie(s,fe.ButtonClick,o.position);return}else if(e==="2"){r.selectedBuildingType="plantingZone",Ie(s,fe.ButtonClick,o.position);return}else if(e==="3"){r.selectedBuildingType="removal",Ie(s,fe.ButtonClick,o.position);return}}if(e==="escape"&&r.selectedBuildingType){r.selectedBuildingType=null;return}if(e==="e"){if(t){r.autopilotControls.behaviors.gathering=!r.autopilotControls.behaviors.gathering;return}const u=De(o,r,"berryBush",It,p=>p.food.length>0&&o.food.length<o.maxFood),d=De(o,r,"corpse",It,p=>p.food.length>0&&o.food.length<o.maxFood);let f=null;u&&d?f=V(o.position,u.position,r.mapDimensions.width,r.mapDimensions.height)<=V(o.position,d.position,r.mapDimensions.width,r.mapDimensions.height)?u:d:f=u||d,f&&(o.activeAction="gathering",Ie(s,fe.Gather,o.position))}else if(e==="r"){if(t){r.autopilotControls.behaviors.procreation=!r.autopilotControls.behaviors.procreation;return}De(o,r,"human",It,d=>Ur(o,d,r))&&(o.activeAction="procreating",Ie(s,fe.Procreate,o.position))}else if(e==="f")o.food.length>0&&(o.activeAction="eating",Ie(s,fe.Eat,o.position));else if(e==="h"){if(t){r.autopilotControls.behaviors.feedChildren=!r.autopilotControls.behaviors.feedChildren;return}const u=l.find(d=>d.type===se.FeedChild);u&&u.targetEntity&&(o.activeAction="feeding",o.target=u.targetEntity.id)}else if(e==="arrowup"||e==="w")o.direction.y=-1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowdown"||e==="s")o.direction.y=1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowleft"||e==="a")o.direction.x=-1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowright"||e==="d")o.direction.x=1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="q"){if(t){r.autopilotControls.behaviors.attack=!r.autopilotControls.behaviors.attack;return}const u=De(o,r,"human",qn,d=>Lo(o,d,r))??De(o,r,"predator",qn)??De(o,r,"prey",qn);u&&(o.activeAction="attacking",o.attackTargetId=u.id)}else if(e==="b"){if(t){r.autopilotControls.behaviors.planting=!r.autopilotControls.behaviors.planting;return}if(l.find(d=>d.type===se.Plant)){const d=Ev(o.position,r,50,df);d&&(o.activeAction="planting",o.target=d,r.hasPlayerPlantedBush=!0)}}else if(e==="x"){if(t){r.autopilotControls.behaviors.gathering=!r.autopilotControls.behaviors.gathering;return}const u=De(o,r,"building",yn,d=>{const f=d;return f.buildingType==="storageSpot"&&f.ownerId===o.leaderId&&f.isConstructed&&f.storedFood!==void 0&&f.storageCapacity!==void 0&&f.storedFood.length<f.storageCapacity});u&&(o.activeAction="idle",o.target=u.id,Ie(s,fe.StorageDeposit,o.position))}else if(e==="z"){if(t){r.autopilotControls.behaviors.feedChildren=!r.autopilotControls.behaviors.feedChildren;return}const u=De(o,r,"building",yn,d=>{const f=d;return f.buildingType==="storageSpot"&&f.ownerId===o.leaderId&&f.isConstructed&&f.storedFood!==void 0&&f.storedFood.length>0});u&&(o.activeAction="idle",o.target=u.id,Ie(s,fe.StorageRetrieve,o.position))}else e==="v"?(o.isCallingToAttack=!0,o.callToAttackEndTime=r.time+Do,Oe(r,ue.CallToAttack,o.position,Do),Ie(s,fe.CallToAttack,o.position)):e==="c"?(o.isCallingToFollow=!0,o.callToFollowEndTime=r.time+Js,Oe(r,ue.CallToFollow,o.position,Js),Ie(s,fe.CallToFollow,o.position)):e==="k"?th(o,r):e==="l"&&(r.buildMenuOpen=!r.buildMenuOpen,Ie(s,fe.ButtonClick,o.position))},RN=(e,t,r,o)=>{e==="arrowup"||e==="w"||e==="arrowdown"||e==="s"?t.direction.y=0:(e==="arrowleft"||e==="a"||e==="arrowright"||e==="d")&&(t.direction.x=0),!o.current.has("arrowup")&&!o.current.has("arrowdown")&&!o.current.has("arrowleft")&&!o.current.has("arrowright")&&!o.current.has("w")&&!o.current.has("a")&&!o.current.has("s")&&!o.current.has("d")&&(t.activeAction==="moving"&&(t.activeAction="idle"),r.autopilotControls.isManuallyMoving=!1),!o.current.has("e")&&t.activeAction==="gathering"&&(t.activeAction="idle"),!o.current.has("f")&&t.activeAction==="eating"&&(t.activeAction="idle"),!o.current.has("r")&&t.activeAction==="procreating"&&(t.activeAction="idle"),!o.current.has("h")&&t.activeAction==="feeding"&&(t.activeAction="idle")},PN=(e,t,r)=>{let l=Et(e);if(e.debugCharacterId){const s=e.entities.entities[e.debugCharacterId];s&&"position"in s&&(l=s)}if(l){const{mapDimensions:s}=e,{width:u,height:d}=s;let f={...l.position};const p=f.x-t.x;Math.abs(p)>u/2&&(p>0?f.x-=u:f.x+=u);const m=f.y-t.y;Math.abs(m)>d/2&&(m>0?f.y-=d:f.y+=d);let S=zf(t,f,Uf*r);return S={x:(S.x%u+u)%u,y:(S.y%d+d)%d},S}return e.viewportCenter};function NN(e,t){const{width:r,height:o}=e.mapDimensions;e.viewportCenter={x:(t.x%r+r)%r,y:(t.y%o+o)%o}}const DN=(e,t,r,o)=>{const l={gameState:r},s=Et(r);s&&Ie(l,fe.ButtonClick,s.position);const u=r.uiButtons.find(f=>f.id===e.id);u&&(u.lastActivated=Date.now()),t&&[pe.CommandGather,pe.CommandPlant,pe.ToggleProcreationBehavior].includes(e.action)&&r.hasPlayerEnabledAutopilot++;const{behaviors:d}=r.autopilotControls;switch(e.action){case pe.ReturnToIntro:r.exitConfirmation="pending",r.isPaused=!0;break;case pe.ConfirmExitYes:o(),r.exitConfirmation="inactive";break;case pe.ConfirmExitNo:r.exitConfirmation="inactive",r.isPaused=!1;break;case pe.ToggleMute:r.isMuted=!r.isMuted,Gs(r.masterVolume,r.isMuted);break;case pe.TogglePause:r.isPaused=!r.isPaused;break;case pe.FastForward:return Iu(r,xv);case pe.DismissTutorial:r.tutorialState.isActive=!1;break;case pe.CommandEat:s&&s.food.length>0&&(s.activeAction="eating");break;case pe.CommandGather:t?d.gathering=!d.gathering:s&&(s.activeAction="gathering");break;case pe.CommandPlant:t?d.planting=!d.planting:s&&(r.autopilotControls.isManuallyPlanting=!0);break;case pe.ToggleProcreationBehavior:d.procreation=!d.procreation;break;case pe.ToggleAttackBehavior:d.attack=!d.attack;break;case pe.ToggleFeedChildBehavior:d.feedChildren=!d.feedChildren;break;case pe.ToggleAutopilotFollowLeaderBehavior:d.followLeader=!d.followLeader;break;case pe.CommandCallToAttack:s&&s.leaderId===s.id&&(s.isCallingToAttack=!0,s.callToAttackEndTime=r.time+Do,Oe(r,ue.CallToAttack,s.position,Do),Ie(l,fe.CallToAttack,s.position));break;case pe.CommandFollowMe:t?d.followLeader=!d.followLeader:s&&s.leaderId===s.id&&(s.isCallingToFollow=!0,s.callToFollowEndTime=r.time+Js,Oe(r,ue.CallToFollow,s.position,Js),Ie(l,fe.CallToFollow,s.position));break;case pe.CommandTribeSplit:s&&th(s,r);break;case pe.CommandBuild:r.buildMenuOpen=!r.buildMenuOpen;break;case pe.SelectStorageSpot:r.selectedBuildingType="storageSpot";break;case pe.SelectPlantingZone:r.selectedBuildingType="plantingZone";break;case pe.SelectRemovalTool:r.selectedBuildingType="removal";break;case pe.ToggleDiplomacy:if(s&&s.leaderId&&e.targetTribeId){const f=s.leaderId,p=e.targetTribeId,m=r.entities.entities[p],S=s.diplomacy,y=m==null?void 0:m.diplomacy;if(S&&y){const E=(S[p]||gt.Friendly)===gt.Friendly?gt.Hostile:gt.Friendly;S[p]=E,y[f]=E}}break}return r};function ON(e,t,r){if(!e.notificationButtonRects)return!1;const o=Et(e);for(const[l,s]of Object.entries(e.notificationButtonRects.dismiss))if(t>=s.x&&t<=s.x+s.width&&r>=s.y&&r<=s.y+s.height)return rC(e,l),o&&Ie({gameState:e},fe.ButtonClick,o.position),!0;for(const[l,s]of Object.entries(e.notificationButtonRects.view))if(t>=s.x&&t<=s.x+s.width&&r>=s.y&&r<=s.y+s.height){const u=e.notifications.find(d=>d.id===l);if(u){let d=u.targetPosition;if(!d&&u.targetEntityIds&&u.targetEntityIds.length>0){const f=e.entities.entities[u.targetEntityIds[0]];f&&(d=f.position)}return d&&NN(e,d),o&&Ie({gameState:e},fe.ButtonClick,o.position),u.highlightedEntityIds&&(u.renderHighlights=!u.renderHighlights),!0}}return!1}const MN=({isActive:e,gameStateRef:t,canvasRef:r,viewportCenterRef:o,playerActionHintsRef:l,keysPressed:s,returnToIntro:u})=>(Re.useEffect(()=>{const d=f=>{if(!e()||t.current.gameOver||!r.current||!f.target||f.target!==r.current)return;const p=r.current.getBoundingClientRect(),m=f.clientX-p.left,S=f.clientY-p.top;if(ON(t.current,m,S))return;const w=t.current.uiButtons.find(T=>m>=T.rect.x&&m<=T.rect.x+T.rect.width&&S>=T.rect.y&&S<=T.rect.y+T.rect.height);if(w){t.current=DN(w,f.shiftKey,t.current,u);return}const E=If({x:m,y:S},o.current,{width:r.current.width,height:r.current.height},t.current.mapDimensions);wN(t.current,E)};return window.addEventListener("mousedown",d),()=>{window.removeEventListener("mousedown",d)}},[e,r,t,o,u]),Re.useEffect(()=>{const d=f=>{if(!e()||!r.current)return;const p=r.current.getBoundingClientRect(),m=f.clientX-p.left,S=f.clientY-p.top;t.current.mousePosition={x:m,y:S};let y;if(t.current.notificationButtonRects){for(const[E,T]of Object.entries(t.current.notificationButtonRects.dismiss))if(m>=T.x&&m<=T.x+T.width&&S>=T.y&&S<=T.y+T.height){y=`notification-dismiss-${E}`;break}if(!y){for(const[E,T]of Object.entries(t.current.notificationButtonRects.view))if(m>=T.x&&m<=T.x+T.width&&S>=T.y&&S<=T.y+T.height){y=`notification-view-${E}`;break}}}if(!y)for(let E=t.current.uiButtons.length-1;E>=0;E--){const T=t.current.uiButtons[E];if(m>=T.rect.x&&m<=T.rect.x+T.rect.width&&S>=T.rect.y&&S<=T.rect.y+T.rect.height){y=T.id;break}}if(t.current.hoveredButtonId=y,y){t.current.autopilotControls.hoveredAutopilotAction=void 0;return}const w=Et(t.current);if(w){const E=If({x:m,y:S},o.current,{width:r.current.width,height:r.current.height},t.current.mapDimensions);t.current.autopilotControls.hoveredAutopilotAction=EN(E,w,t.current,f.shiftKey)}else t.current.autopilotControls.hoveredAutopilotAction=void 0};return window.addEventListener("mousemove",d),()=>{window.removeEventListener("mousemove",d)}},[e,r,t,o]),Re.useEffect(()=>{const d=p=>{if(!e()||t.current.gameOver)return;const m=p.key.toLowerCase();(m===" "||m==="p"||m==="tab"||(p.ctrlKey||p.metaKey)&&(m==="s"||m==="a"))&&p.preventDefault();const S=CN(p,t.current);if(t.current=S.newState,S.handled)return;const y=Et(t.current);y&&(s.current.add(m),_N(m,p.shiftKey,t.current,y,l.current))},f=p=>{if(!e()||t.current.gameOver)return;const m=p.key.toLowerCase();s.current.delete(m);const S=Et(t.current);S&&RN(m,S,t.current,s)};return window.addEventListener("keydown",d),window.addEventListener("keyup",f),()=>{window.removeEventListener("keydown",d),window.removeEventListener("keyup",f)}},[e,t,l,s,u]),null),kN=({gameStateRef:e,ctxRef:t,debugPanelTypeRef:r,viewportCenterRef:o,playerActionHintsRef:l,keysPressed:s,canvasRef:u,setAppState:d,appState:f})=>{const p=Re.useRef(),{returnToIntro:m}=ko(),[S,y,w]=rv(E=>{var H,x;if(!t.current||!p.current){p.current=E;return}const T=Math.min(E-p.current,1e3)/1e3,{performanceMetrics:C}=e.current;C.currentBucket={renderTime:0,worldUpdateTime:0,aiUpdateTime:0};const F=performance.now();e.current=Iu(e.current,T),C.currentBucket.worldUpdateTime=performance.now()-F;const B=Et(e.current);B?l.current=nh(e.current,B):l.current=[],o.current=PN(e.current,o.current,T);const D=performance.now();lu(t.current,e.current,o.current,l.current,{width:((H=u.current)==null?void 0:H.width)||800,height:((x=u.current)==null?void 0:x.height)||600},!1),C.currentBucket.renderTime=performance.now()-D,C.history.push({bucketTime:e.current.time,...C.currentBucket}),C.history.length>ZT&&C.history.shift(),p.current=E,e.current.gameOver&&f!=="gameOver"&&(Jf(fe.GameOver,{masterVolume:e.current.masterVolume,isMuted:e.current.isMuted}),d("gameOver",{generations:e.current.generationCount,cause:e.current.causeOfGameOver||"Unknown"}))});return Re.useEffect(()=>(y(),S),[y,S]),Fe.jsx(MN,{isActive:w,gameStateRef:e,canvasRef:u,viewportCenterRef:o,playerActionHintsRef:l,debugPanelTypeRef:r,keysPressed:s,returnToIntro:m})},P0=()=>{const{savedGameState:e,contextReady:t}=ko(),[r,o]=Re.useState(null);return Re.useEffect(()=>{t&&(e?(console.log("Loading saved game state..."),o(e)):(console.log("Initializing new game state..."),o(TN())))},[t,e]),!t||!r?Fe.jsx("div",{children:"Loading..."}):Fe.jsx(FN,{initialState:r})},FN=({initialState:e})=>{const t=Re.useRef(null),r=Re.useRef(null),o=Re.useRef(e),l=Re.useRef(new Set),s=Re.useRef(e.debugPanel),u=Re.useRef(e.viewportCenter),d=Re.useRef([]),{appState:f,setAppState:p}=ko();return Fe.jsxs(Fe.Fragment,{children:[Fe.jsx(IN,{canvasRef:t,ctxRef:r,gameStateRef:o,debugPanelTypeRef:s,viewportCenterRef:u,playerActionHintsRef:d}),Fe.jsx(kN,{gameStateRef:o,ctxRef:r,debugPanelTypeRef:s,viewportCenterRef:u,playerActionHintsRef:d,keysPressed:l,canvasRef:t,setAppState:p,appState:f})]})},UN=An.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  background-color: rgba(0, 0, 0, 0.75); // Semi-transparent overlay
  color: #fff;
  padding: 20px;
  z-index: 10; // Ensure it's on top
`,LN=An.h1`
  font-family: 'Press Start 2P', cursive;
  font-size: 4rem;
  color: #ff4136; // Red for emphasis
  text-shadow: 4px 4px 0px #000;
  margin-bottom: 1.5rem;
`,zl=An.p`
  font-family: 'Press Start 2P', cursive;
  font-size: 1.2rem;
  margin: 0.5em 0;
  color: #fff;
  text-shadow: 2px 2px 0px #000;
`,BN=An.button`
  font-family: 'Press Start 2P', cursive;
  font-size: 1rem;
  padding: 1rem 2rem;
  margin-top: 2em;
  color: #fff;
  background-color: #ff4136; // Red button
  border: 2px solid #fff;
  box-shadow: 4px 4px 0px #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  text-transform: uppercase;

  &:hover {
    background-color: #fff;
    color: #ff4136;
    box-shadow: 4px 4px 0px #ff4136;
  }
`,HN=()=>{const{setAppState:e,gameOverDetails:t}=ko(),r=()=>{e("intro")};return Fe.jsxs(UN,{children:[Fe.jsx(LN,{children:"Game Over"}),Fe.jsx(zl,{children:"Your tribe's lineage has ended."}),t&&Fe.jsxs(Fe.Fragment,{children:[Fe.jsxs(zl,{children:["Generations Survived: ",t.generations]}),Fe.jsxs(zl,{children:["Cause of Extinction: ",t.cause]})]}),!t&&Fe.jsx(zl,{children:"Game details are unavailable."}),Fe.jsx(BN,{onClick:r,children:"Return to Menu"})]})},bN=zT`
  /* CSS Reset */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    padding: 0;
    font-family: 'Press Start 2P', 'Arial', sans-serif;
    background-color: #121212;
    color: #f0f0f0;
    line-height: 1.6;
  }

  /* Additional global styles */
  h1, h2, h3, h4, h5, h6 {
    margin-top: 0;
  }

  button {
    cursor: pointer;
    font-family: inherit;
  }

  /* Prevent overflow issues */
  html, body {
    height: 100%;
    overflow-x: hidden;
  }

  /* Root element for React app */
  #root {
    height: 100%;
  }
`;function GN(e,t){Re.useEffect(()=>{const r=()=>{const o=document.location.hash==="#game"?"game":"intro";t(o)};return window.addEventListener("hashchange",r),r(),()=>{window.removeEventListener("hashchange",r)}},[]),Re.useEffect(()=>{e==="game"?document.location.hash="#game":e==="intro"&&(document.location.hash="")},[e])}const xN=()=>{const{appState:e,setAppState:t}=ko();GN(e,t);const r=()=>{switch(e){case"intro":return Fe.jsx(R0,{});case"game":return Fe.jsx(P0,{});case"gameOver":return Fe.jsxs(Fe.Fragment,{children:[Fe.jsx(P0,{}),Fe.jsx(HN,{})]});default:return Fe.jsx(R0,{})}};return Fe.jsxs(Fe.Fragment,{children:[Fe.jsx(bN,{}),r()]})},N0=document.getElementById("root");N0?vC().then(()=>{OA.createRoot(N0).render(Fe.jsx(Zn.StrictMode,{children:Fe.jsx($A,{initialAppState:document.location.hash==="#game"?"game":"intro",children:Fe.jsx(xN,{})})}))}):console.error("Failed to find the root element");
