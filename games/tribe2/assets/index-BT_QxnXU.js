var tT=Object.defineProperty;var nT=(e,n,r)=>n in e?tT(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var De=(e,n,r)=>nT(e,typeof n!="symbol"?n+"":n,r);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function r(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(l){if(l.ep)return;l.ep=!0;const a=r(l);fetch(l.href,a)}})();function f0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sd={exports:{}},Is={},ad={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function iT(){if($g)return Be;$g=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function S(R){return R===null||typeof R!="object"?null:(R=y&&R[y]||R["@@iterator"],typeof R=="function"?R:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,A={};function _(R,L,X){this.props=R,this.context=L,this.refs=A,this.updater=X||w}_.prototype.isReactComponent={},_.prototype.setState=function(R,L){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,L,"setState")},_.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function F(){}F.prototype=_.prototype;function B(R,L,X){this.props=R,this.context=L,this.refs=A,this.updater=X||w}var O=B.prototype=new F;O.constructor=B,I(O,_.prototype),O.isPureReactComponent=!0;var H=Array.isArray,x=Object.prototype.hasOwnProperty,U={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function J(R,L,X){var ne,ge={},se=null,Ie=null;if(L!=null)for(ne in L.ref!==void 0&&(Ie=L.ref),L.key!==void 0&&(se=""+L.key),L)x.call(L,ne)&&!$.hasOwnProperty(ne)&&(ge[ne]=L[ne]);var Ae=arguments.length-2;if(Ae===1)ge.children=X;else if(1<Ae){for(var q=Array(Ae),ie=0;ie<Ae;ie++)q[ie]=arguments[ie+2];ge.children=q}if(R&&R.defaultProps)for(ne in Ae=R.defaultProps,Ae)ge[ne]===void 0&&(ge[ne]=Ae[ne]);return{$$typeof:e,type:R,key:se,ref:Ie,props:ge,_owner:U.current}}function Ee(R,L){return{$$typeof:e,type:R.type,key:L,ref:R.ref,props:R.props,_owner:R._owner}}function _e(R){return typeof R=="object"&&R!==null&&R.$$typeof===e}function be(R){var L={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(X){return L[X]})}var Pe=/\/+/g;function Re(R,L){return typeof R=="object"&&R!==null&&R.key!=null?be(""+R.key):L.toString(36)}function ce(R,L,X,ne,ge){var se=typeof R;(se==="undefined"||se==="boolean")&&(R=null);var Ie=!1;if(R===null)Ie=!0;else switch(se){case"string":case"number":Ie=!0;break;case"object":switch(R.$$typeof){case e:case n:Ie=!0}}if(Ie)return Ie=R,ge=ge(Ie),R=ne===""?"."+Re(Ie,0):ne,H(ge)?(X="",R!=null&&(X=R.replace(Pe,"$&/")+"/"),ce(ge,L,X,"",function(ie){return ie})):ge!=null&&(_e(ge)&&(ge=Ee(ge,X+(!ge.key||Ie&&Ie.key===ge.key?"":(""+ge.key).replace(Pe,"$&/")+"/")+R)),L.push(ge)),1;if(Ie=0,ne=ne===""?".":ne+":",H(R))for(var Ae=0;Ae<R.length;Ae++){se=R[Ae];var q=ne+Re(se,Ae);Ie+=ce(se,L,X,q,ge)}else if(q=S(R),typeof q=="function")for(R=q.call(R),Ae=0;!(se=R.next()).done;)se=se.value,q=ne+Re(se,Ae++),Ie+=ce(se,L,X,q,ge);else if(se==="object")throw L=String(R),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return Ie}function Ue(R,L,X){if(R==null)return R;var ne=[],ge=0;return ce(R,ne,"","",function(se){return L.call(X,se,ge++)}),ne}function Se(R){if(R._status===-1){var L=R._result;L=L(),L.then(function(X){(R._status===0||R._status===-1)&&(R._status=1,R._result=X)},function(X){(R._status===0||R._status===-1)&&(R._status=2,R._result=X)}),R._status===-1&&(R._status=0,R._result=L)}if(R._status===1)return R._result.default;throw R._result}var te={current:null},W={transition:null},V={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:W,ReactCurrentOwner:U};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Be.Children={map:Ue,forEach:function(R,L,X){Ue(R,function(){L.apply(this,arguments)},X)},count:function(R){var L=0;return Ue(R,function(){L++}),L},toArray:function(R){return Ue(R,function(L){return L})||[]},only:function(R){if(!_e(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Be.Component=_,Be.Fragment=r,Be.Profiler=l,Be.PureComponent=B,Be.StrictMode=o,Be.Suspense=h,Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,Be.act=Y,Be.cloneElement=function(R,L,X){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var ne=I({},R.props),ge=R.key,se=R.ref,Ie=R._owner;if(L!=null){if(L.ref!==void 0&&(se=L.ref,Ie=U.current),L.key!==void 0&&(ge=""+L.key),R.type&&R.type.defaultProps)var Ae=R.type.defaultProps;for(q in L)x.call(L,q)&&!$.hasOwnProperty(q)&&(ne[q]=L[q]===void 0&&Ae!==void 0?Ae[q]:L[q])}var q=arguments.length-2;if(q===1)ne.children=X;else if(1<q){Ae=Array(q);for(var ie=0;ie<q;ie++)Ae[ie]=arguments[ie+2];ne.children=Ae}return{$$typeof:e,type:R.type,key:ge,ref:se,props:ne,_owner:Ie}},Be.createContext=function(R){return R={$$typeof:u,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:a,_context:R},R.Consumer=R},Be.createElement=J,Be.createFactory=function(R){var L=J.bind(null,R);return L.type=R,L},Be.createRef=function(){return{current:null}},Be.forwardRef=function(R){return{$$typeof:d,render:R}},Be.isValidElement=_e,Be.lazy=function(R){return{$$typeof:m,_payload:{_status:-1,_result:R},_init:Se}},Be.memo=function(R,L){return{$$typeof:g,type:R,compare:L===void 0?null:L}},Be.startTransition=function(R){var L=W.transition;W.transition={};try{R()}finally{W.transition=L}},Be.unstable_act=Y,Be.useCallback=function(R,L){return te.current.useCallback(R,L)},Be.useContext=function(R){return te.current.useContext(R)},Be.useDebugValue=function(){},Be.useDeferredValue=function(R){return te.current.useDeferredValue(R)},Be.useEffect=function(R,L){return te.current.useEffect(R,L)},Be.useId=function(){return te.current.useId()},Be.useImperativeHandle=function(R,L,X){return te.current.useImperativeHandle(R,L,X)},Be.useInsertionEffect=function(R,L){return te.current.useInsertionEffect(R,L)},Be.useLayoutEffect=function(R,L){return te.current.useLayoutEffect(R,L)},Be.useMemo=function(R,L){return te.current.useMemo(R,L)},Be.useReducer=function(R,L,X){return te.current.useReducer(R,L,X)},Be.useRef=function(R){return te.current.useRef(R)},Be.useState=function(R){return te.current.useState(R)},Be.useSyncExternalStore=function(R,L,X){return te.current.useSyncExternalStore(R,L,X)},Be.useTransition=function(){return te.current.useTransition()},Be.version="18.3.1",Be}var zg;function gf(){return zg||(zg=1,ad.exports=iT()),ad.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg;function rT(){if(Wg)return Is;Wg=1;var e=gf(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,h,g){var m,y={},S=null,w=null;g!==void 0&&(S=""+g),h.key!==void 0&&(S=""+h.key),h.ref!==void 0&&(w=h.ref);for(m in h)o.call(h,m)&&!a.hasOwnProperty(m)&&(y[m]=h[m]);if(d&&d.defaultProps)for(m in h=d.defaultProps,h)y[m]===void 0&&(y[m]=h[m]);return{$$typeof:n,type:d,key:S,ref:w,props:y,_owner:l.current}}return Is.Fragment=r,Is.jsx=u,Is.jsxs=u,Is}var Yg;function oT(){return Yg||(Yg=1,sd.exports=rT()),sd.exports}var ke=oT(),Ce=gf();const jn=f0(Ce);var gl={},ld={exports:{}},Kt={},ud={exports:{}},cd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function sT(){return jg||(jg=1,function(e){function n(W,V){var Y=W.length;W.push(V);e:for(;0<Y;){var R=Y-1>>>1,L=W[R];if(0<l(L,V))W[R]=V,W[Y]=L,Y=R;else break e}}function r(W){return W.length===0?null:W[0]}function o(W){if(W.length===0)return null;var V=W[0],Y=W.pop();if(Y!==V){W[0]=Y;e:for(var R=0,L=W.length,X=L>>>1;R<X;){var ne=2*(R+1)-1,ge=W[ne],se=ne+1,Ie=W[se];if(0>l(ge,Y))se<L&&0>l(Ie,ge)?(W[R]=Ie,W[se]=Y,R=se):(W[R]=ge,W[ne]=Y,R=ne);else if(se<L&&0>l(Ie,Y))W[R]=Ie,W[se]=Y,R=se;else break e}}return V}function l(W,V){var Y=W.sortIndex-V.sortIndex;return Y!==0?Y:W.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var h=[],g=[],m=1,y=null,S=3,w=!1,I=!1,A=!1,_=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(W){for(var V=r(g);V!==null;){if(V.callback===null)o(g);else if(V.startTime<=W)o(g),V.sortIndex=V.expirationTime,n(h,V);else break;V=r(g)}}function H(W){if(A=!1,O(W),!I)if(r(h)!==null)I=!0,Se(x);else{var V=r(g);V!==null&&te(H,V.startTime-W)}}function x(W,V){I=!1,A&&(A=!1,F(J),J=-1),w=!0;var Y=S;try{for(O(V),y=r(h);y!==null&&(!(y.expirationTime>V)||W&&!be());){var R=y.callback;if(typeof R=="function"){y.callback=null,S=y.priorityLevel;var L=R(y.expirationTime<=V);V=e.unstable_now(),typeof L=="function"?y.callback=L:y===r(h)&&o(h),O(V)}else o(h);y=r(h)}if(y!==null)var X=!0;else{var ne=r(g);ne!==null&&te(H,ne.startTime-V),X=!1}return X}finally{y=null,S=Y,w=!1}}var U=!1,$=null,J=-1,Ee=5,_e=-1;function be(){return!(e.unstable_now()-_e<Ee)}function Pe(){if($!==null){var W=e.unstable_now();_e=W;var V=!0;try{V=$(!0,W)}finally{V?Re():(U=!1,$=null)}}else U=!1}var Re;if(typeof B=="function")Re=function(){B(Pe)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Ue=ce.port2;ce.port1.onmessage=Pe,Re=function(){Ue.postMessage(null)}}else Re=function(){_(Pe,0)};function Se(W){$=W,U||(U=!0,Re())}function te(W,V){J=_(function(){W(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){I||w||(I=!0,Se(x))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ee=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(W){switch(S){case 1:case 2:case 3:var V=3;break;default:V=S}var Y=S;S=V;try{return W()}finally{S=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,V){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Y=S;S=W;try{return V()}finally{S=Y}},e.unstable_scheduleCallback=function(W,V,Y){var R=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?R+Y:R):Y=R,W){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=Y+L,W={id:m++,callback:V,priorityLevel:W,startTime:Y,expirationTime:L,sortIndex:-1},Y>R?(W.sortIndex=Y,n(g,W),r(h)===null&&W===r(g)&&(A?(F(J),J=-1):A=!0,te(H,Y-R))):(W.sortIndex=L,n(h,W),I||w||(I=!0,Se(x))),W},e.unstable_shouldYield=be,e.unstable_wrapCallback=function(W){var V=S;return function(){var Y=S;S=V;try{return W.apply(this,arguments)}finally{S=Y}}}}(cd)),cd}var Vg;function aT(){return Vg||(Vg=1,ud.exports=sT()),ud.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg;function lT(){if(Xg)return Kt;Xg=1;var e=gf(),n=aT();function r(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function a(t,i){u(t,i),u(t+"Capture",i)}function u(t,i){for(l[t]=i,t=0;t<i.length;t++)o.add(i[t])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function S(t){return h.call(y,t)?!0:h.call(m,t)?!1:g.test(t)?y[t]=!0:(m[t]=!0,!1)}function w(t,i,s,c){if(s!==null&&s.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function I(t,i,s,c){if(i===null||typeof i>"u"||w(t,i,s,c))return!0;if(c)return!1;if(s!==null)switch(s.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function A(t,i,s,c,f,p,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=s,this.propertyName=t,this.type=i,this.sanitizeURL=p,this.removeEmptyString=v}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){_[t]=new A(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];_[i]=new A(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){_[t]=new A(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){_[t]=new A(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){_[t]=new A(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){_[t]=new A(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){_[t]=new A(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){_[t]=new A(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){_[t]=new A(t,5,!1,t.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function B(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(F,B);_[i]=new A(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(F,B);_[i]=new A(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(F,B);_[i]=new A(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){_[t]=new A(t,1,!1,t.toLowerCase(),null,!1,!1)}),_.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){_[t]=new A(t,1,!1,t.toLowerCase(),null,!0,!0)});function O(t,i,s,c){var f=_.hasOwnProperty(i)?_[i]:null;(f!==null?f.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(I(i,s,f,c)&&(s=null),c||f===null?S(i)&&(s===null?t.removeAttribute(i):t.setAttribute(i,""+s)):f.mustUseProperty?t[f.propertyName]=s===null?f.type===3?!1:"":s:(i=f.attributeName,c=f.attributeNamespace,s===null?t.removeAttribute(i):(f=f.type,s=f===3||f===4&&s===!0?"":""+s,c?t.setAttributeNS(c,i,s):t.setAttribute(i,s))))}var H=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),U=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),Ee=Symbol.for("react.profiler"),_e=Symbol.for("react.provider"),be=Symbol.for("react.context"),Pe=Symbol.for("react.forward_ref"),Re=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),Ue=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),W=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=W&&t[W]||t["@@iterator"],typeof t=="function"?t:null)}var Y=Object.assign,R;function L(t){if(R===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);R=i&&i[1]||""}return`
`+R+t}var X=!1;function ne(t,i){if(!t||X)return"";X=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(k){var c=k}Reflect.construct(t,[],i)}else{try{i.call()}catch(k){c=k}t.call(i.prototype)}else{try{throw Error()}catch(k){c=k}t()}}catch(k){if(k&&c&&typeof k.stack=="string"){for(var f=k.stack.split(`
`),p=c.stack.split(`
`),v=f.length-1,T=p.length-1;1<=v&&0<=T&&f[v]!==p[T];)T--;for(;1<=v&&0<=T;v--,T--)if(f[v]!==p[T]){if(v!==1||T!==1)do if(v--,T--,0>T||f[v]!==p[T]){var C=`
`+f[v].replace(" at new "," at ");return t.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",t.displayName)),C}while(1<=v&&0<=T);break}}}finally{X=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?L(t):""}function ge(t){switch(t.tag){case 5:return L(t.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return t=ne(t.type,!1),t;case 11:return t=ne(t.type.render,!1),t;case 1:return t=ne(t.type,!0),t;default:return""}}function se(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $:return"Fragment";case U:return"Portal";case Ee:return"Profiler";case J:return"StrictMode";case Re:return"Suspense";case ce:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case be:return(t.displayName||"Context")+".Consumer";case _e:return(t._context.displayName||"Context")+".Provider";case Pe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ue:return i=t.displayName||null,i!==null?i:se(t.type)||"Memo";case Se:i=t._payload,t=t._init;try{return se(t(i))}catch{}}return null}function Ie(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(i);case 8:return i===J?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ae(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function q(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ie(t){var i=q(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),c=""+t[i];if(!t.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,p=s.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){c=""+v,p.call(this,v)}}),Object.defineProperty(t,i,{enumerable:s.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Le(t){t._valueTracker||(t._valueTracker=ie(t))}function de(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),c="";return t&&(c=q(t)?t.checked?"true":"false":t.value),t=c,t!==s?(i.setValue(t),!0):!1}function kn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ze(t,i){var s=i.checked;return Y({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function je(t,i){var s=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;s=Ae(i.value!=null?i.value:s),t._wrapperState={initialChecked:c,initialValue:s,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Fn(t,i){i=i.checked,i!=null&&O(t,"checked",i,!1)}function zt(t,i){Fn(t,i);var s=Ae(i.value),c=i.type;if(s!=null)c==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(c==="submit"||c==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?Un(t,i.type,s):i.hasOwnProperty("defaultValue")&&Un(t,i.type,Ae(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function sn(t,i,s){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,s||i===t.value||(t.value=i),t.defaultValue=i}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Un(t,i,s){(i!=="number"||kn(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Ln=Array.isArray;function pi(t,i,s,c){if(t=t.options,i){i={};for(var f=0;f<s.length;f++)i["$"+s[f]]=!0;for(s=0;s<t.length;s++)f=i.hasOwnProperty("$"+t[s].value),t[s].selected!==f&&(t[s].selected=f),f&&c&&(t[s].defaultSelected=!0)}else{for(s=""+Ae(s),i=null,f=0;f<t.length;f++){if(t[f].value===s){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function Qi(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return Y({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qf(t,i){var s=i.value;if(s==null){if(s=i.children,i=i.defaultValue,s!=null){if(i!=null)throw Error(r(92));if(Ln(s)){if(1<s.length)throw Error(r(93));s=s[0]}i=s}i==null&&(i=""),s=i}t._wrapperState={initialValue:Ae(s)}}function Jf(t,i){var s=Ae(i.value),c=Ae(i.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),i.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),c!=null&&(t.defaultValue=""+c)}function eh(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function th(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vu(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?th(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var aa,nh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,s,c,f){MSApp.execUnsafeLocalFunction(function(){return t(i,s,c,f)})}:t}(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(aa=aa||document.createElement("div"),aa.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=aa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function Ho(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var Go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oy=["Webkit","ms","Moz","O"];Object.keys(Go).forEach(function(t){oy.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),Go[i]=Go[t]})});function ih(t,i,s){return i==null||typeof i=="boolean"||i===""?"":s||typeof i!="number"||i===0||Go.hasOwnProperty(t)&&Go[t]?(""+i).trim():i+"px"}function rh(t,i){t=t.style;for(var s in i)if(i.hasOwnProperty(s)){var c=s.indexOf("--")===0,f=ih(s,i[s],c);s==="float"&&(s="cssFloat"),c?t.setProperty(s,f):t[s]=f}}var sy=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yu(t,i){if(i){if(sy[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function Su(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tu=null;function Au(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Iu=null,Fr=null,Ur=null;function oh(t){if(t=as(t)){if(typeof Iu!="function")throw Error(r(280));var i=t.stateNode;i&&(i=Oa(i),Iu(t.stateNode,t.type,i))}}function sh(t){Fr?Ur?Ur.push(t):Ur=[t]:Fr=t}function ah(){if(Fr){var t=Fr,i=Ur;if(Ur=Fr=null,oh(t),i)for(t=0;t<i.length;t++)oh(i[t])}}function lh(t,i){return t(i)}function uh(){}var wu=!1;function ch(t,i,s){if(wu)return t(i,s);wu=!0;try{return lh(t,i,s)}finally{wu=!1,(Fr!==null||Ur!==null)&&(uh(),ah())}}function bo(t,i){var s=t.stateNode;if(s===null)return null;var c=Oa(s);if(c===null)return null;s=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(r(231,i,typeof s));return s}var Eu=!1;if(d)try{var xo={};Object.defineProperty(xo,"passive",{get:function(){Eu=!0}}),window.addEventListener("test",xo,xo),window.removeEventListener("test",xo,xo)}catch{Eu=!1}function ay(t,i,s,c,f,p,v,T,C){var k=Array.prototype.slice.call(arguments,3);try{i.apply(s,k)}catch(b){this.onError(b)}}var $o=!1,la=null,ua=!1,_u=null,ly={onError:function(t){$o=!0,la=t}};function uy(t,i,s,c,f,p,v,T,C){$o=!1,la=null,ay.apply(ly,arguments)}function cy(t,i,s,c,f,p,v,T,C){if(uy.apply(this,arguments),$o){if($o){var k=la;$o=!1,la=null}else throw Error(r(198));ua||(ua=!0,_u=k)}}function Ji(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function dh(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function fh(t){if(Ji(t)!==t)throw Error(r(188))}function dy(t){var i=t.alternate;if(!i){if(i=Ji(t),i===null)throw Error(r(188));return i!==t?null:t}for(var s=t,c=i;;){var f=s.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){s=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===s)return fh(f),t;if(p===c)return fh(f),i;p=p.sibling}throw Error(r(188))}if(s.return!==c.return)s=f,c=p;else{for(var v=!1,T=f.child;T;){if(T===s){v=!0,s=f,c=p;break}if(T===c){v=!0,c=f,s=p;break}T=T.sibling}if(!v){for(T=p.child;T;){if(T===s){v=!0,s=p,c=f;break}if(T===c){v=!0,c=p,s=f;break}T=T.sibling}if(!v)throw Error(r(189))}}if(s.alternate!==c)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?t:i}function hh(t){return t=dy(t),t!==null?ph(t):null}function ph(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=ph(t);if(i!==null)return i;t=t.sibling}return null}var gh=n.unstable_scheduleCallback,mh=n.unstable_cancelCallback,fy=n.unstable_shouldYield,hy=n.unstable_requestPaint,st=n.unstable_now,py=n.unstable_getCurrentPriorityLevel,Cu=n.unstable_ImmediatePriority,vh=n.unstable_UserBlockingPriority,ca=n.unstable_NormalPriority,gy=n.unstable_LowPriority,yh=n.unstable_IdlePriority,da=null,Bn=null;function my(t){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(da,t,void 0,(t.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:Sy,vy=Math.log,yy=Math.LN2;function Sy(t){return t>>>=0,t===0?32:31-(vy(t)/yy|0)|0}var fa=64,ha=4194304;function zo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pa(t,i){var s=t.pendingLanes;if(s===0)return 0;var c=0,f=t.suspendedLanes,p=t.pingedLanes,v=s&268435455;if(v!==0){var T=v&~f;T!==0?c=zo(T):(p&=v,p!==0&&(c=zo(p)))}else v=s&~f,v!==0?c=zo(v):p!==0&&(c=zo(p));if(c===0)return 0;if(i!==0&&i!==c&&(i&f)===0&&(f=c&-c,p=i&-i,f>=p||f===16&&(p&4194240)!==0))return i;if((c&4)!==0&&(c|=s&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=c;0<i;)s=31-Sn(i),f=1<<s,c|=t[s],i&=~f;return c}function Ty(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ay(t,i){for(var s=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes;0<p;){var v=31-Sn(p),T=1<<v,C=f[v];C===-1?((T&s)===0||(T&c)!==0)&&(f[v]=Ty(T,i)):C<=i&&(t.expiredLanes|=T),p&=~T}}function Ru(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sh(){var t=fa;return fa<<=1,(fa&4194240)===0&&(fa=64),t}function Pu(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function Wo(t,i,s){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-Sn(i),t[i]=s}function Iy(t,i){var s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var c=t.eventTimes;for(t=t.expirationTimes;0<s;){var f=31-Sn(s),p=1<<f;i[f]=0,c[f]=-1,t[f]=-1,s&=~p}}function Nu(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var c=31-Sn(s),f=1<<c;f&i|t[c]&i&&(t[c]|=i),s&=~f}}var We=0;function Th(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Ah,Ou,Ih,wh,Eh,Du=!1,ga=[],gi=null,mi=null,vi=null,Yo=new Map,jo=new Map,yi=[],wy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _h(t,i){switch(t){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":mi=null;break;case"mouseover":case"mouseout":vi=null;break;case"pointerover":case"pointerout":Yo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":jo.delete(i.pointerId)}}function Vo(t,i,s,c,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:i,domEventName:s,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},i!==null&&(i=as(i),i!==null&&Ou(i)),t):(t.eventSystemFlags|=c,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function Ey(t,i,s,c,f){switch(i){case"focusin":return gi=Vo(gi,t,i,s,c,f),!0;case"dragenter":return mi=Vo(mi,t,i,s,c,f),!0;case"mouseover":return vi=Vo(vi,t,i,s,c,f),!0;case"pointerover":var p=f.pointerId;return Yo.set(p,Vo(Yo.get(p)||null,t,i,s,c,f)),!0;case"gotpointercapture":return p=f.pointerId,jo.set(p,Vo(jo.get(p)||null,t,i,s,c,f)),!0}return!1}function Ch(t){var i=er(t.target);if(i!==null){var s=Ji(i);if(s!==null){if(i=s.tag,i===13){if(i=dh(s),i!==null){t.blockedOn=i,Eh(t.priority,function(){Ih(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ma(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=ku(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var c=new s.constructor(s.type,s);Tu=c,s.target.dispatchEvent(c),Tu=null}else return i=as(s),i!==null&&Ou(i),t.blockedOn=s,!1;i.shift()}return!0}function Rh(t,i,s){ma(t)&&s.delete(i)}function _y(){Du=!1,gi!==null&&ma(gi)&&(gi=null),mi!==null&&ma(mi)&&(mi=null),vi!==null&&ma(vi)&&(vi=null),Yo.forEach(Rh),jo.forEach(Rh)}function Xo(t,i){t.blockedOn===i&&(t.blockedOn=null,Du||(Du=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,_y)))}function Ko(t){function i(f){return Xo(f,t)}if(0<ga.length){Xo(ga[0],t);for(var s=1;s<ga.length;s++){var c=ga[s];c.blockedOn===t&&(c.blockedOn=null)}}for(gi!==null&&Xo(gi,t),mi!==null&&Xo(mi,t),vi!==null&&Xo(vi,t),Yo.forEach(i),jo.forEach(i),s=0;s<yi.length;s++)c=yi[s],c.blockedOn===t&&(c.blockedOn=null);for(;0<yi.length&&(s=yi[0],s.blockedOn===null);)Ch(s),s.blockedOn===null&&yi.shift()}var Lr=H.ReactCurrentBatchConfig,va=!0;function Cy(t,i,s,c){var f=We,p=Lr.transition;Lr.transition=null;try{We=1,Mu(t,i,s,c)}finally{We=f,Lr.transition=p}}function Ry(t,i,s,c){var f=We,p=Lr.transition;Lr.transition=null;try{We=4,Mu(t,i,s,c)}finally{We=f,Lr.transition=p}}function Mu(t,i,s,c){if(va){var f=ku(t,i,s,c);if(f===null)qu(t,i,c,ya,s),_h(t,c);else if(Ey(f,t,i,s,c))c.stopPropagation();else if(_h(t,c),i&4&&-1<wy.indexOf(t)){for(;f!==null;){var p=as(f);if(p!==null&&Ah(p),p=ku(t,i,s,c),p===null&&qu(t,i,c,ya,s),p===f)break;f=p}f!==null&&c.stopPropagation()}else qu(t,i,c,null,s)}}var ya=null;function ku(t,i,s,c){if(ya=null,t=Au(c),t=er(t),t!==null)if(i=Ji(t),i===null)t=null;else if(s=i.tag,s===13){if(t=dh(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return ya=t,null}function Ph(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(py()){case Cu:return 1;case vh:return 4;case ca:case gy:return 16;case yh:return 536870912;default:return 16}default:return 16}}var Si=null,Fu=null,Sa=null;function Nh(){if(Sa)return Sa;var t,i=Fu,s=i.length,c,f="value"in Si?Si.value:Si.textContent,p=f.length;for(t=0;t<s&&i[t]===f[t];t++);var v=s-t;for(c=1;c<=v&&i[s-c]===f[p-c];c++);return Sa=f.slice(t,1<c?1-c:void 0)}function Ta(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Aa(){return!0}function Oh(){return!1}function Zt(t){function i(s,c,f,p,v){this._reactName=s,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(s=t[T],this[T]=s?s(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Aa:Oh,this.isPropagationStopped=Oh,this}return Y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Aa)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Aa)},persist:function(){},isPersistent:Aa}),i}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uu=Zt(Br),qo=Y({},Br,{view:0,detail:0}),Py=Zt(qo),Lu,Bu,Zo,Ia=Y({},qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zo&&(Zo&&t.type==="mousemove"?(Lu=t.screenX-Zo.screenX,Bu=t.screenY-Zo.screenY):Bu=Lu=0,Zo=t),Lu)},movementY:function(t){return"movementY"in t?t.movementY:Bu}}),Dh=Zt(Ia),Ny=Y({},Ia,{dataTransfer:0}),Oy=Zt(Ny),Dy=Y({},qo,{relatedTarget:0}),Hu=Zt(Dy),My=Y({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),ky=Zt(My),Fy=Y({},Br,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Uy=Zt(Fy),Ly=Y({},Br,{data:0}),Mh=Zt(Ly),By={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function by(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Gy[t])?!!i[t]:!1}function Gu(){return by}var xy=Y({},qo,{key:function(t){if(t.key){var i=By[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Ta(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gu,charCode:function(t){return t.type==="keypress"?Ta(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ta(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$y=Zt(xy),zy=Y({},Ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kh=Zt(zy),Wy=Y({},qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gu}),Yy=Zt(Wy),jy=Y({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vy=Zt(jy),Xy=Y({},Ia,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ky=Zt(Xy),qy=[9,13,27,32],bu=d&&"CompositionEvent"in window,Qo=null;d&&"documentMode"in document&&(Qo=document.documentMode);var Zy=d&&"TextEvent"in window&&!Qo,Fh=d&&(!bu||Qo&&8<Qo&&11>=Qo),Uh=" ",Lh=!1;function Bh(t,i){switch(t){case"keyup":return qy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hr=!1;function Qy(t,i){switch(t){case"compositionend":return Hh(i);case"keypress":return i.which!==32?null:(Lh=!0,Uh);case"textInput":return t=i.data,t===Uh&&Lh?null:t;default:return null}}function Jy(t,i){if(Hr)return t==="compositionend"||!bu&&Bh(t,i)?(t=Nh(),Sa=Fu=Si=null,Hr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Fh&&i.locale!=="ko"?null:i.data;default:return null}}var eS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!eS[t.type]:i==="textarea"}function bh(t,i,s,c){sh(c),i=Ra(i,"onChange"),0<i.length&&(s=new Uu("onChange","change",null,s,c),t.push({event:s,listeners:i}))}var Jo=null,es=null;function tS(t){rp(t,0)}function wa(t){var i=zr(t);if(de(i))return t}function nS(t,i){if(t==="change")return i}var xh=!1;if(d){var xu;if(d){var $u="oninput"in document;if(!$u){var $h=document.createElement("div");$h.setAttribute("oninput","return;"),$u=typeof $h.oninput=="function"}xu=$u}else xu=!1;xh=xu&&(!document.documentMode||9<document.documentMode)}function zh(){Jo&&(Jo.detachEvent("onpropertychange",Wh),es=Jo=null)}function Wh(t){if(t.propertyName==="value"&&wa(es)){var i=[];bh(i,es,t,Au(t)),ch(tS,i)}}function iS(t,i,s){t==="focusin"?(zh(),Jo=i,es=s,Jo.attachEvent("onpropertychange",Wh)):t==="focusout"&&zh()}function rS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wa(es)}function oS(t,i){if(t==="click")return wa(i)}function sS(t,i){if(t==="input"||t==="change")return wa(i)}function aS(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Tn=typeof Object.is=="function"?Object.is:aS;function ts(t,i){if(Tn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),c=Object.keys(i);if(s.length!==c.length)return!1;for(c=0;c<s.length;c++){var f=s[c];if(!h.call(i,f)||!Tn(t[f],i[f]))return!1}return!0}function Yh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jh(t,i){var s=Yh(t);t=0;for(var c;s;){if(s.nodeType===3){if(c=t+s.textContent.length,t<=i&&c>=i)return{node:s,offset:i-t};t=c}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Yh(s)}}function Vh(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Vh(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Xh(){for(var t=window,i=kn();i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=kn(t.document)}return i}function zu(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function lS(t){var i=Xh(),s=t.focusedElem,c=t.selectionRange;if(i!==s&&s&&s.ownerDocument&&Vh(s.ownerDocument.documentElement,s)){if(c!==null&&zu(s)){if(i=c.start,t=c.end,t===void 0&&(t=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(t,s.value.length);else if(t=(i=s.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var f=s.textContent.length,p=Math.min(c.start,f);c=c.end===void 0?p:Math.min(c.end,f),!t.extend&&p>c&&(f=c,c=p,p=f),f=jh(s,p);var v=jh(s,c);f&&v&&(t.rangeCount!==1||t.anchorNode!==f.node||t.anchorOffset!==f.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),t.removeAllRanges(),p>c?(t.addRange(i),t.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),t.addRange(i)))}}for(i=[],t=s;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)t=i[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uS=d&&"documentMode"in document&&11>=document.documentMode,Gr=null,Wu=null,ns=null,Yu=!1;function Kh(t,i,s){var c=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Yu||Gr==null||Gr!==kn(c)||(c=Gr,"selectionStart"in c&&zu(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ns&&ts(ns,c)||(ns=c,c=Ra(Wu,"onSelect"),0<c.length&&(i=new Uu("onSelect","select",null,i,s),t.push({event:i,listeners:c}),i.target=Gr)))}function Ea(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var br={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionend:Ea("Transition","TransitionEnd")},ju={},qh={};d&&(qh=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);function _a(t){if(ju[t])return ju[t];if(!br[t])return t;var i=br[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in qh)return ju[t]=i[s];return t}var Zh=_a("animationend"),Qh=_a("animationiteration"),Jh=_a("animationstart"),ep=_a("transitionend"),tp=new Map,np="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ti(t,i){tp.set(t,i),a(i,[t])}for(var Vu=0;Vu<np.length;Vu++){var Xu=np[Vu],cS=Xu.toLowerCase(),dS=Xu[0].toUpperCase()+Xu.slice(1);Ti(cS,"on"+dS)}Ti(Zh,"onAnimationEnd"),Ti(Qh,"onAnimationIteration"),Ti(Jh,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(ep,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fS=new Set("cancel close invalid load scroll toggle".split(" ").concat(is));function ip(t,i,s){var c=t.type||"unknown-event";t.currentTarget=s,cy(c,i,void 0,t),t.currentTarget=null}function rp(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var c=t[s],f=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var v=c.length-1;0<=v;v--){var T=c[v],C=T.instance,k=T.currentTarget;if(T=T.listener,C!==p&&f.isPropagationStopped())break e;ip(f,T,k),p=C}else for(v=0;v<c.length;v++){if(T=c[v],C=T.instance,k=T.currentTarget,T=T.listener,C!==p&&f.isPropagationStopped())break e;ip(f,T,k),p=C}}}if(ua)throw t=_u,ua=!1,_u=null,t}function Ve(t,i){var s=i[nc];s===void 0&&(s=i[nc]=new Set);var c=t+"__bubble";s.has(c)||(op(i,t,2,!1),s.add(c))}function Ku(t,i,s){var c=0;i&&(c|=4),op(s,t,c,i)}var Ca="_reactListening"+Math.random().toString(36).slice(2);function rs(t){if(!t[Ca]){t[Ca]=!0,o.forEach(function(s){s!=="selectionchange"&&(fS.has(s)||Ku(s,!1,t),Ku(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Ca]||(i[Ca]=!0,Ku("selectionchange",!1,i))}}function op(t,i,s,c){switch(Ph(i)){case 1:var f=Cy;break;case 4:f=Ry;break;default:f=Mu}s=f.bind(null,i,s,t),f=void 0,!Eu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(i,s,{capture:!0,passive:f}):t.addEventListener(i,s,!0):f!==void 0?t.addEventListener(i,s,{passive:f}):t.addEventListener(i,s,!1)}function qu(t,i,s,c,f){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var T=c.stateNode.containerInfo;if(T===f||T.nodeType===8&&T.parentNode===f)break;if(v===4)for(v=c.return;v!==null;){var C=v.tag;if((C===3||C===4)&&(C=v.stateNode.containerInfo,C===f||C.nodeType===8&&C.parentNode===f))return;v=v.return}for(;T!==null;){if(v=er(T),v===null)return;if(C=v.tag,C===5||C===6){c=p=v;continue e}T=T.parentNode}}c=c.return}ch(function(){var k=p,b=Au(s),z=[];e:{var G=tp.get(t);if(G!==void 0){var Z=Uu,ee=t;switch(t){case"keypress":if(Ta(s)===0)break e;case"keydown":case"keyup":Z=$y;break;case"focusin":ee="focus",Z=Hu;break;case"focusout":ee="blur",Z=Hu;break;case"beforeblur":case"afterblur":Z=Hu;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Dh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Oy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Yy;break;case Zh:case Qh:case Jh:Z=ky;break;case ep:Z=Vy;break;case"scroll":Z=Py;break;case"wheel":Z=Ky;break;case"copy":case"cut":case"paste":Z=Uy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=kh}var re=(i&4)!==0,at=!re&&t==="scroll",D=re?G!==null?G+"Capture":null:G;re=[];for(var P=k,M;P!==null;){M=P;var j=M.stateNode;if(M.tag===5&&j!==null&&(M=j,D!==null&&(j=bo(P,D),j!=null&&re.push(os(P,j,M)))),at)break;P=P.return}0<re.length&&(G=new Z(G,ee,null,s,b),z.push({event:G,listeners:re}))}}if((i&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",G&&s!==Tu&&(ee=s.relatedTarget||s.fromElement)&&(er(ee)||ee[qn]))break e;if((Z||G)&&(G=b.window===b?b:(G=b.ownerDocument)?G.defaultView||G.parentWindow:window,Z?(ee=s.relatedTarget||s.toElement,Z=k,ee=ee?er(ee):null,ee!==null&&(at=Ji(ee),ee!==at||ee.tag!==5&&ee.tag!==6)&&(ee=null)):(Z=null,ee=k),Z!==ee)){if(re=Dh,j="onMouseLeave",D="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(re=kh,j="onPointerLeave",D="onPointerEnter",P="pointer"),at=Z==null?G:zr(Z),M=ee==null?G:zr(ee),G=new re(j,P+"leave",Z,s,b),G.target=at,G.relatedTarget=M,j=null,er(b)===k&&(re=new re(D,P+"enter",ee,s,b),re.target=M,re.relatedTarget=at,j=re),at=j,Z&&ee)t:{for(re=Z,D=ee,P=0,M=re;M;M=xr(M))P++;for(M=0,j=D;j;j=xr(j))M++;for(;0<P-M;)re=xr(re),P--;for(;0<M-P;)D=xr(D),M--;for(;P--;){if(re===D||D!==null&&re===D.alternate)break t;re=xr(re),D=xr(D)}re=null}else re=null;Z!==null&&sp(z,G,Z,re,!1),ee!==null&&at!==null&&sp(z,at,ee,re,!0)}}e:{if(G=k?zr(k):window,Z=G.nodeName&&G.nodeName.toLowerCase(),Z==="select"||Z==="input"&&G.type==="file")var ae=nS;else if(Gh(G))if(xh)ae=sS;else{ae=rS;var he=iS}else(Z=G.nodeName)&&Z.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(ae=oS);if(ae&&(ae=ae(t,k))){bh(z,ae,s,b);break e}he&&he(t,G,k),t==="focusout"&&(he=G._wrapperState)&&he.controlled&&G.type==="number"&&Un(G,"number",G.value)}switch(he=k?zr(k):window,t){case"focusin":(Gh(he)||he.contentEditable==="true")&&(Gr=he,Wu=k,ns=null);break;case"focusout":ns=Wu=Gr=null;break;case"mousedown":Yu=!0;break;case"contextmenu":case"mouseup":case"dragend":Yu=!1,Kh(z,s,b);break;case"selectionchange":if(uS)break;case"keydown":case"keyup":Kh(z,s,b)}var pe;if(bu)e:{switch(t){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Hr?Bh(t,s)&&(we="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(we="onCompositionStart");we&&(Fh&&s.locale!=="ko"&&(Hr||we!=="onCompositionStart"?we==="onCompositionEnd"&&Hr&&(pe=Nh()):(Si=b,Fu="value"in Si?Si.value:Si.textContent,Hr=!0)),he=Ra(k,we),0<he.length&&(we=new Mh(we,t,null,s,b),z.push({event:we,listeners:he}),pe?we.data=pe:(pe=Hh(s),pe!==null&&(we.data=pe)))),(pe=Zy?Qy(t,s):Jy(t,s))&&(k=Ra(k,"onBeforeInput"),0<k.length&&(b=new Mh("onBeforeInput","beforeinput",null,s,b),z.push({event:b,listeners:k}),b.data=pe))}rp(z,i)})}function os(t,i,s){return{instance:t,listener:i,currentTarget:s}}function Ra(t,i){for(var s=i+"Capture",c=[];t!==null;){var f=t,p=f.stateNode;f.tag===5&&p!==null&&(f=p,p=bo(t,s),p!=null&&c.unshift(os(t,p,f)),p=bo(t,i),p!=null&&c.push(os(t,p,f))),t=t.return}return c}function xr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sp(t,i,s,c,f){for(var p=i._reactName,v=[];s!==null&&s!==c;){var T=s,C=T.alternate,k=T.stateNode;if(C!==null&&C===c)break;T.tag===5&&k!==null&&(T=k,f?(C=bo(s,p),C!=null&&v.unshift(os(s,C,T))):f||(C=bo(s,p),C!=null&&v.push(os(s,C,T)))),s=s.return}v.length!==0&&t.push({event:i,listeners:v})}var hS=/\r\n?/g,pS=/\u0000|\uFFFD/g;function ap(t){return(typeof t=="string"?t:""+t).replace(hS,`
`).replace(pS,"")}function Pa(t,i,s){if(i=ap(i),ap(t)!==i&&s)throw Error(r(425))}function Na(){}var Zu=null,Qu=null;function Ju(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ec=typeof setTimeout=="function"?setTimeout:void 0,gS=typeof clearTimeout=="function"?clearTimeout:void 0,lp=typeof Promise=="function"?Promise:void 0,mS=typeof queueMicrotask=="function"?queueMicrotask:typeof lp<"u"?function(t){return lp.resolve(null).then(t).catch(vS)}:ec;function vS(t){setTimeout(function(){throw t})}function tc(t,i){var s=i,c=0;do{var f=s.nextSibling;if(t.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(c===0){t.removeChild(f),Ko(i);return}c--}else s!=="$"&&s!=="$?"&&s!=="$!"||c++;s=f}while(s);Ko(i)}function Ai(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function up(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return t;i--}else s==="/$"&&i++}t=t.previousSibling}return null}var $r=Math.random().toString(36).slice(2),Hn="__reactFiber$"+$r,ss="__reactProps$"+$r,qn="__reactContainer$"+$r,nc="__reactEvents$"+$r,yS="__reactListeners$"+$r,SS="__reactHandles$"+$r;function er(t){var i=t[Hn];if(i)return i;for(var s=t.parentNode;s;){if(i=s[qn]||s[Hn]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=up(t);t!==null;){if(s=t[Hn])return s;t=up(t)}return i}t=s,s=t.parentNode}return null}function as(t){return t=t[Hn]||t[qn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function Oa(t){return t[ss]||null}var ic=[],Wr=-1;function Ii(t){return{current:t}}function Xe(t){0>Wr||(t.current=ic[Wr],ic[Wr]=null,Wr--)}function Ye(t,i){Wr++,ic[Wr]=t.current,t.current=i}var wi={},Nt=Ii(wi),Wt=Ii(!1),tr=wi;function Yr(t,i){var s=t.type.contextTypes;if(!s)return wi;var c=t.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var f={},p;for(p in s)f[p]=i[p];return c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=f),f}function Yt(t){return t=t.childContextTypes,t!=null}function Da(){Xe(Wt),Xe(Nt)}function cp(t,i,s){if(Nt.current!==wi)throw Error(r(168));Ye(Nt,i),Ye(Wt,s)}function dp(t,i,s){var c=t.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return s;c=c.getChildContext();for(var f in c)if(!(f in i))throw Error(r(108,Ie(t)||"Unknown",f));return Y({},s,c)}function Ma(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wi,tr=Nt.current,Ye(Nt,t),Ye(Wt,Wt.current),!0}function fp(t,i,s){var c=t.stateNode;if(!c)throw Error(r(169));s?(t=dp(t,i,tr),c.__reactInternalMemoizedMergedChildContext=t,Xe(Wt),Xe(Nt),Ye(Nt,t)):Xe(Wt),Ye(Wt,s)}var Zn=null,ka=!1,rc=!1;function hp(t){Zn===null?Zn=[t]:Zn.push(t)}function TS(t){ka=!0,hp(t)}function Ei(){if(!rc&&Zn!==null){rc=!0;var t=0,i=We;try{var s=Zn;for(We=1;t<s.length;t++){var c=s[t];do c=c(!0);while(c!==null)}Zn=null,ka=!1}catch(f){throw Zn!==null&&(Zn=Zn.slice(t+1)),gh(Cu,Ei),f}finally{We=i,rc=!1}}return null}var jr=[],Vr=0,Fa=null,Ua=0,an=[],ln=0,nr=null,Qn=1,Jn="";function ir(t,i){jr[Vr++]=Ua,jr[Vr++]=Fa,Fa=t,Ua=i}function pp(t,i,s){an[ln++]=Qn,an[ln++]=Jn,an[ln++]=nr,nr=t;var c=Qn;t=Jn;var f=32-Sn(c)-1;c&=~(1<<f),s+=1;var p=32-Sn(i)+f;if(30<p){var v=f-f%5;p=(c&(1<<v)-1).toString(32),c>>=v,f-=v,Qn=1<<32-Sn(i)+f|s<<f|c,Jn=p+t}else Qn=1<<p|s<<f|c,Jn=t}function oc(t){t.return!==null&&(ir(t,1),pp(t,1,0))}function sc(t){for(;t===Fa;)Fa=jr[--Vr],jr[Vr]=null,Ua=jr[--Vr],jr[Vr]=null;for(;t===nr;)nr=an[--ln],an[ln]=null,Jn=an[--ln],an[ln]=null,Qn=an[--ln],an[ln]=null}var Qt=null,Jt=null,Qe=!1,An=null;function gp(t,i){var s=fn(5,null,null,0);s.elementType="DELETED",s.stateNode=i,s.return=t,i=t.deletions,i===null?(t.deletions=[s],t.flags|=16):i.push(s)}function mp(t,i){switch(t.tag){case 5:var s=t.type;return i=i.nodeType!==1||s.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,Qt=t,Jt=Ai(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,Qt=t,Jt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(s=nr!==null?{id:Qn,overflow:Jn}:null,t.memoizedState={dehydrated:i,treeContext:s,retryLane:1073741824},s=fn(18,null,null,0),s.stateNode=i,s.return=t,t.child=s,Qt=t,Jt=null,!0):!1;default:return!1}}function ac(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lc(t){if(Qe){var i=Jt;if(i){var s=i;if(!mp(t,i)){if(ac(t))throw Error(r(418));i=Ai(s.nextSibling);var c=Qt;i&&mp(t,i)?gp(c,s):(t.flags=t.flags&-4097|2,Qe=!1,Qt=t)}}else{if(ac(t))throw Error(r(418));t.flags=t.flags&-4097|2,Qe=!1,Qt=t}}}function vp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function La(t){if(t!==Qt)return!1;if(!Qe)return vp(t),Qe=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!Ju(t.type,t.memoizedProps)),i&&(i=Jt)){if(ac(t))throw yp(),Error(r(418));for(;i;)gp(t,i),i=Ai(i.nextSibling)}if(vp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(i===0){Jt=Ai(t.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++}t=t.nextSibling}Jt=null}}else Jt=Qt?Ai(t.stateNode.nextSibling):null;return!0}function yp(){for(var t=Jt;t;)t=Ai(t.nextSibling)}function Xr(){Jt=Qt=null,Qe=!1}function uc(t){An===null?An=[t]:An.push(t)}var AS=H.ReactCurrentBatchConfig;function ls(t,i,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var c=s.stateNode}if(!c)throw Error(r(147,t));var f=c,p=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(v){var T=f.refs;v===null?delete T[p]:T[p]=v},i._stringRef=p,i)}if(typeof t!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,t))}return t}function Ba(t,i){throw t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function Sp(t){var i=t._init;return i(t._payload)}function Tp(t){function i(D,P){if(t){var M=D.deletions;M===null?(D.deletions=[P],D.flags|=16):M.push(P)}}function s(D,P){if(!t)return null;for(;P!==null;)i(D,P),P=P.sibling;return null}function c(D,P){for(D=new Map;P!==null;)P.key!==null?D.set(P.key,P):D.set(P.index,P),P=P.sibling;return D}function f(D,P){return D=Mi(D,P),D.index=0,D.sibling=null,D}function p(D,P,M){return D.index=M,t?(M=D.alternate,M!==null?(M=M.index,M<P?(D.flags|=2,P):M):(D.flags|=2,P)):(D.flags|=1048576,P)}function v(D){return t&&D.alternate===null&&(D.flags|=2),D}function T(D,P,M,j){return P===null||P.tag!==6?(P=ed(M,D.mode,j),P.return=D,P):(P=f(P,M),P.return=D,P)}function C(D,P,M,j){var ae=M.type;return ae===$?b(D,P,M.props.children,j,M.key):P!==null&&(P.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===Se&&Sp(ae)===P.type)?(j=f(P,M.props),j.ref=ls(D,P,M),j.return=D,j):(j=al(M.type,M.key,M.props,null,D.mode,j),j.ref=ls(D,P,M),j.return=D,j)}function k(D,P,M,j){return P===null||P.tag!==4||P.stateNode.containerInfo!==M.containerInfo||P.stateNode.implementation!==M.implementation?(P=td(M,D.mode,j),P.return=D,P):(P=f(P,M.children||[]),P.return=D,P)}function b(D,P,M,j,ae){return P===null||P.tag!==7?(P=dr(M,D.mode,j,ae),P.return=D,P):(P=f(P,M),P.return=D,P)}function z(D,P,M){if(typeof P=="string"&&P!==""||typeof P=="number")return P=ed(""+P,D.mode,M),P.return=D,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case x:return M=al(P.type,P.key,P.props,null,D.mode,M),M.ref=ls(D,null,P),M.return=D,M;case U:return P=td(P,D.mode,M),P.return=D,P;case Se:var j=P._init;return z(D,j(P._payload),M)}if(Ln(P)||V(P))return P=dr(P,D.mode,M,null),P.return=D,P;Ba(D,P)}return null}function G(D,P,M,j){var ae=P!==null?P.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return ae!==null?null:T(D,P,""+M,j);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case x:return M.key===ae?C(D,P,M,j):null;case U:return M.key===ae?k(D,P,M,j):null;case Se:return ae=M._init,G(D,P,ae(M._payload),j)}if(Ln(M)||V(M))return ae!==null?null:b(D,P,M,j,null);Ba(D,M)}return null}function Z(D,P,M,j,ae){if(typeof j=="string"&&j!==""||typeof j=="number")return D=D.get(M)||null,T(P,D,""+j,ae);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case x:return D=D.get(j.key===null?M:j.key)||null,C(P,D,j,ae);case U:return D=D.get(j.key===null?M:j.key)||null,k(P,D,j,ae);case Se:var he=j._init;return Z(D,P,M,he(j._payload),ae)}if(Ln(j)||V(j))return D=D.get(M)||null,b(P,D,j,ae,null);Ba(P,j)}return null}function ee(D,P,M,j){for(var ae=null,he=null,pe=P,we=P=0,mt=null;pe!==null&&we<M.length;we++){pe.index>we?(mt=pe,pe=null):mt=pe.sibling;var xe=G(D,pe,M[we],j);if(xe===null){pe===null&&(pe=mt);break}t&&pe&&xe.alternate===null&&i(D,pe),P=p(xe,P,we),he===null?ae=xe:he.sibling=xe,he=xe,pe=mt}if(we===M.length)return s(D,pe),Qe&&ir(D,we),ae;if(pe===null){for(;we<M.length;we++)pe=z(D,M[we],j),pe!==null&&(P=p(pe,P,we),he===null?ae=pe:he.sibling=pe,he=pe);return Qe&&ir(D,we),ae}for(pe=c(D,pe);we<M.length;we++)mt=Z(pe,D,we,M[we],j),mt!==null&&(t&&mt.alternate!==null&&pe.delete(mt.key===null?we:mt.key),P=p(mt,P,we),he===null?ae=mt:he.sibling=mt,he=mt);return t&&pe.forEach(function(ki){return i(D,ki)}),Qe&&ir(D,we),ae}function re(D,P,M,j){var ae=V(M);if(typeof ae!="function")throw Error(r(150));if(M=ae.call(M),M==null)throw Error(r(151));for(var he=ae=null,pe=P,we=P=0,mt=null,xe=M.next();pe!==null&&!xe.done;we++,xe=M.next()){pe.index>we?(mt=pe,pe=null):mt=pe.sibling;var ki=G(D,pe,xe.value,j);if(ki===null){pe===null&&(pe=mt);break}t&&pe&&ki.alternate===null&&i(D,pe),P=p(ki,P,we),he===null?ae=ki:he.sibling=ki,he=ki,pe=mt}if(xe.done)return s(D,pe),Qe&&ir(D,we),ae;if(pe===null){for(;!xe.done;we++,xe=M.next())xe=z(D,xe.value,j),xe!==null&&(P=p(xe,P,we),he===null?ae=xe:he.sibling=xe,he=xe);return Qe&&ir(D,we),ae}for(pe=c(D,pe);!xe.done;we++,xe=M.next())xe=Z(pe,D,we,xe.value,j),xe!==null&&(t&&xe.alternate!==null&&pe.delete(xe.key===null?we:xe.key),P=p(xe,P,we),he===null?ae=xe:he.sibling=xe,he=xe);return t&&pe.forEach(function(eT){return i(D,eT)}),Qe&&ir(D,we),ae}function at(D,P,M,j){if(typeof M=="object"&&M!==null&&M.type===$&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case x:e:{for(var ae=M.key,he=P;he!==null;){if(he.key===ae){if(ae=M.type,ae===$){if(he.tag===7){s(D,he.sibling),P=f(he,M.props.children),P.return=D,D=P;break e}}else if(he.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===Se&&Sp(ae)===he.type){s(D,he.sibling),P=f(he,M.props),P.ref=ls(D,he,M),P.return=D,D=P;break e}s(D,he);break}else i(D,he);he=he.sibling}M.type===$?(P=dr(M.props.children,D.mode,j,M.key),P.return=D,D=P):(j=al(M.type,M.key,M.props,null,D.mode,j),j.ref=ls(D,P,M),j.return=D,D=j)}return v(D);case U:e:{for(he=M.key;P!==null;){if(P.key===he)if(P.tag===4&&P.stateNode.containerInfo===M.containerInfo&&P.stateNode.implementation===M.implementation){s(D,P.sibling),P=f(P,M.children||[]),P.return=D,D=P;break e}else{s(D,P);break}else i(D,P);P=P.sibling}P=td(M,D.mode,j),P.return=D,D=P}return v(D);case Se:return he=M._init,at(D,P,he(M._payload),j)}if(Ln(M))return ee(D,P,M,j);if(V(M))return re(D,P,M,j);Ba(D,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,P!==null&&P.tag===6?(s(D,P.sibling),P=f(P,M),P.return=D,D=P):(s(D,P),P=ed(M,D.mode,j),P.return=D,D=P),v(D)):s(D,P)}return at}var Kr=Tp(!0),Ap=Tp(!1),Ha=Ii(null),Ga=null,qr=null,cc=null;function dc(){cc=qr=Ga=null}function fc(t){var i=Ha.current;Xe(Ha),t._currentValue=i}function hc(t,i,s){for(;t!==null;){var c=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),t===s)break;t=t.return}}function Zr(t,i){Ga=t,cc=qr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(jt=!0),t.firstContext=null)}function un(t){var i=t._currentValue;if(cc!==t)if(t={context:t,memoizedValue:i,next:null},qr===null){if(Ga===null)throw Error(r(308));qr=t,Ga.dependencies={lanes:0,firstContext:t}}else qr=qr.next=t;return i}var rr=null;function pc(t){rr===null?rr=[t]:rr.push(t)}function Ip(t,i,s,c){var f=i.interleaved;return f===null?(s.next=s,pc(i)):(s.next=f.next,f.next=s),i.interleaved=s,ei(t,c)}function ei(t,i){t.lanes|=i;var s=t.alternate;for(s!==null&&(s.lanes|=i),s=t,t=t.return;t!==null;)t.childLanes|=i,s=t.alternate,s!==null&&(s.childLanes|=i),s=t,t=t.return;return s.tag===3?s.stateNode:null}var _i=!1;function gc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wp(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ti(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function Ci(t,i,s){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(He&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,ei(t,s)}return f=c.interleaved,f===null?(i.next=i,pc(c)):(i.next=f.next,f.next=i),c.interleaved=i,ei(t,s)}function ba(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194240)!==0)){var c=i.lanes;c&=t.pendingLanes,s|=c,i.lanes=s,Nu(t,s)}}function Ep(t,i){var s=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,s===c)){var f=null,p=null;if(s=s.firstBaseUpdate,s!==null){do{var v={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};p===null?f=p=v:p=p.next=v,s=s.next}while(s!==null);p===null?f=p=i:p=p.next=i}else f=p=i;s={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,effects:c.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}function xa(t,i,s,c){var f=t.updateQueue;_i=!1;var p=f.firstBaseUpdate,v=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var C=T,k=C.next;C.next=null,v===null?p=k:v.next=k,v=C;var b=t.alternate;b!==null&&(b=b.updateQueue,T=b.lastBaseUpdate,T!==v&&(T===null?b.firstBaseUpdate=k:T.next=k,b.lastBaseUpdate=C))}if(p!==null){var z=f.baseState;v=0,b=k=C=null,T=p;do{var G=T.lane,Z=T.eventTime;if((c&G)===G){b!==null&&(b=b.next={eventTime:Z,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ee=t,re=T;switch(G=i,Z=s,re.tag){case 1:if(ee=re.payload,typeof ee=="function"){z=ee.call(Z,z,G);break e}z=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=re.payload,G=typeof ee=="function"?ee.call(Z,z,G):ee,G==null)break e;z=Y({},z,G);break e;case 2:_i=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,G=f.effects,G===null?f.effects=[T]:G.push(T))}else Z={eventTime:Z,lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},b===null?(k=b=Z,C=z):b=b.next=Z,v|=G;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;G=T,T=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);if(b===null&&(C=z),f.baseState=C,f.firstBaseUpdate=k,f.lastBaseUpdate=b,i=f.shared.interleaved,i!==null){f=i;do v|=f.lane,f=f.next;while(f!==i)}else p===null&&(f.shared.lanes=0);ar|=v,t.lanes=v,t.memoizedState=z}}function _p(t,i,s){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var c=t[i],f=c.callback;if(f!==null){if(c.callback=null,c=s,typeof f!="function")throw Error(r(191,f));f.call(c)}}}var us={},Gn=Ii(us),cs=Ii(us),ds=Ii(us);function or(t){if(t===us)throw Error(r(174));return t}function mc(t,i){switch(Ye(ds,i),Ye(cs,t),Ye(Gn,us),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:vu(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=vu(i,t)}Xe(Gn),Ye(Gn,i)}function Qr(){Xe(Gn),Xe(cs),Xe(ds)}function Cp(t){or(ds.current);var i=or(Gn.current),s=vu(i,t.type);i!==s&&(Ye(cs,t),Ye(Gn,s))}function vc(t){cs.current===t&&(Xe(Gn),Xe(cs))}var it=Ii(0);function $a(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var yc=[];function Sc(){for(var t=0;t<yc.length;t++)yc[t]._workInProgressVersionPrimary=null;yc.length=0}var za=H.ReactCurrentDispatcher,Tc=H.ReactCurrentBatchConfig,sr=0,rt=null,ft=null,pt=null,Wa=!1,fs=!1,hs=0,IS=0;function Ot(){throw Error(r(321))}function Ac(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!Tn(t[s],i[s]))return!1;return!0}function Ic(t,i,s,c,f,p){if(sr=p,rt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,za.current=t===null||t.memoizedState===null?CS:RS,t=s(c,f),fs){p=0;do{if(fs=!1,hs=0,25<=p)throw Error(r(301));p+=1,pt=ft=null,i.updateQueue=null,za.current=PS,t=s(c,f)}while(fs)}if(za.current=Va,i=ft!==null&&ft.next!==null,sr=0,pt=ft=rt=null,Wa=!1,i)throw Error(r(300));return t}function wc(){var t=hs!==0;return hs=0,t}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?rt.memoizedState=pt=t:pt=pt.next=t,pt}function cn(){if(ft===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var i=pt===null?rt.memoizedState:pt.next;if(i!==null)pt=i,ft=t;else{if(t===null)throw Error(r(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},pt===null?rt.memoizedState=pt=t:pt=pt.next=t}return pt}function ps(t,i){return typeof i=="function"?i(t):i}function Ec(t){var i=cn(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var c=ft,f=c.baseQueue,p=s.pending;if(p!==null){if(f!==null){var v=f.next;f.next=p.next,p.next=v}c.baseQueue=f=p,s.pending=null}if(f!==null){p=f.next,c=c.baseState;var T=v=null,C=null,k=p;do{var b=k.lane;if((sr&b)===b)C!==null&&(C=C.next={lane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),c=k.hasEagerState?k.eagerState:t(c,k.action);else{var z={lane:b,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null};C===null?(T=C=z,v=c):C=C.next=z,rt.lanes|=b,ar|=b}k=k.next}while(k!==null&&k!==p);C===null?v=c:C.next=T,Tn(c,i.memoizedState)||(jt=!0),i.memoizedState=c,i.baseState=v,i.baseQueue=C,s.lastRenderedState=c}if(t=s.interleaved,t!==null){f=t;do p=f.lane,rt.lanes|=p,ar|=p,f=f.next;while(f!==t)}else f===null&&(s.lanes=0);return[i.memoizedState,s.dispatch]}function _c(t){var i=cn(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var c=s.dispatch,f=s.pending,p=i.memoizedState;if(f!==null){s.pending=null;var v=f=f.next;do p=t(p,v.action),v=v.next;while(v!==f);Tn(p,i.memoizedState)||(jt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),s.lastRenderedState=p}return[p,c]}function Rp(){}function Pp(t,i){var s=rt,c=cn(),f=i(),p=!Tn(c.memoizedState,f);if(p&&(c.memoizedState=f,jt=!0),c=c.queue,Cc(Dp.bind(null,s,c,t),[t]),c.getSnapshot!==i||p||pt!==null&&pt.memoizedState.tag&1){if(s.flags|=2048,gs(9,Op.bind(null,s,c,f,i),void 0,null),gt===null)throw Error(r(349));(sr&30)!==0||Np(s,i,f)}return f}function Np(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=rt.updateQueue,i===null?(i={lastEffect:null,stores:null},rt.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function Op(t,i,s,c){i.value=s,i.getSnapshot=c,Mp(i)&&kp(t)}function Dp(t,i,s){return s(function(){Mp(i)&&kp(t)})}function Mp(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!Tn(t,s)}catch{return!0}}function kp(t){var i=ei(t,1);i!==null&&_n(i,t,1,-1)}function Fp(t){var i=bn();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:t},i.queue=t,t=t.dispatch=_S.bind(null,rt,t),[i.memoizedState,t]}function gs(t,i,s,c){return t={tag:t,create:i,destroy:s,deps:c,next:null},i=rt.updateQueue,i===null?(i={lastEffect:null,stores:null},rt.updateQueue=i,i.lastEffect=t.next=t):(s=i.lastEffect,s===null?i.lastEffect=t.next=t:(c=s.next,s.next=t,t.next=c,i.lastEffect=t)),t}function Up(){return cn().memoizedState}function Ya(t,i,s,c){var f=bn();rt.flags|=t,f.memoizedState=gs(1|i,s,void 0,c===void 0?null:c)}function ja(t,i,s,c){var f=cn();c=c===void 0?null:c;var p=void 0;if(ft!==null){var v=ft.memoizedState;if(p=v.destroy,c!==null&&Ac(c,v.deps)){f.memoizedState=gs(i,s,p,c);return}}rt.flags|=t,f.memoizedState=gs(1|i,s,p,c)}function Lp(t,i){return Ya(8390656,8,t,i)}function Cc(t,i){return ja(2048,8,t,i)}function Bp(t,i){return ja(4,2,t,i)}function Hp(t,i){return ja(4,4,t,i)}function Gp(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function bp(t,i,s){return s=s!=null?s.concat([t]):null,ja(4,4,Gp.bind(null,i,t),s)}function Rc(){}function xp(t,i){var s=cn();i=i===void 0?null:i;var c=s.memoizedState;return c!==null&&i!==null&&Ac(i,c[1])?c[0]:(s.memoizedState=[t,i],t)}function $p(t,i){var s=cn();i=i===void 0?null:i;var c=s.memoizedState;return c!==null&&i!==null&&Ac(i,c[1])?c[0]:(t=t(),s.memoizedState=[t,i],t)}function zp(t,i,s){return(sr&21)===0?(t.baseState&&(t.baseState=!1,jt=!0),t.memoizedState=s):(Tn(s,i)||(s=Sh(),rt.lanes|=s,ar|=s,t.baseState=!0),i)}function wS(t,i){var s=We;We=s!==0&&4>s?s:4,t(!0);var c=Tc.transition;Tc.transition={};try{t(!1),i()}finally{We=s,Tc.transition=c}}function Wp(){return cn().memoizedState}function ES(t,i,s){var c=Oi(t);if(s={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null},Yp(t))jp(i,s);else if(s=Ip(t,i,s,c),s!==null){var f=Lt();_n(s,t,c,f),Vp(s,i,c)}}function _S(t,i,s){var c=Oi(t),f={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null};if(Yp(t))jp(i,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,T=p(v,s);if(f.hasEagerState=!0,f.eagerState=T,Tn(T,v)){var C=i.interleaved;C===null?(f.next=f,pc(i)):(f.next=C.next,C.next=f),i.interleaved=f;return}}catch{}finally{}s=Ip(t,i,f,c),s!==null&&(f=Lt(),_n(s,t,c,f),Vp(s,i,c))}}function Yp(t){var i=t.alternate;return t===rt||i!==null&&i===rt}function jp(t,i){fs=Wa=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function Vp(t,i,s){if((s&4194240)!==0){var c=i.lanes;c&=t.pendingLanes,s|=c,i.lanes=s,Nu(t,s)}}var Va={readContext:un,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},CS={readContext:un,useCallback:function(t,i){return bn().memoizedState=[t,i===void 0?null:i],t},useContext:un,useEffect:Lp,useImperativeHandle:function(t,i,s){return s=s!=null?s.concat([t]):null,Ya(4194308,4,Gp.bind(null,i,t),s)},useLayoutEffect:function(t,i){return Ya(4194308,4,t,i)},useInsertionEffect:function(t,i){return Ya(4,2,t,i)},useMemo:function(t,i){var s=bn();return i=i===void 0?null:i,t=t(),s.memoizedState=[t,i],t},useReducer:function(t,i,s){var c=bn();return i=s!==void 0?s(i):i,c.memoizedState=c.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},c.queue=t,t=t.dispatch=ES.bind(null,rt,t),[c.memoizedState,t]},useRef:function(t){var i=bn();return t={current:t},i.memoizedState=t},useState:Fp,useDebugValue:Rc,useDeferredValue:function(t){return bn().memoizedState=t},useTransition:function(){var t=Fp(!1),i=t[0];return t=wS.bind(null,t[1]),bn().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,s){var c=rt,f=bn();if(Qe){if(s===void 0)throw Error(r(407));s=s()}else{if(s=i(),gt===null)throw Error(r(349));(sr&30)!==0||Np(c,i,s)}f.memoizedState=s;var p={value:s,getSnapshot:i};return f.queue=p,Lp(Dp.bind(null,c,p,t),[t]),c.flags|=2048,gs(9,Op.bind(null,c,p,s,i),void 0,null),s},useId:function(){var t=bn(),i=gt.identifierPrefix;if(Qe){var s=Jn,c=Qn;s=(c&~(1<<32-Sn(c)-1)).toString(32)+s,i=":"+i+"R"+s,s=hs++,0<s&&(i+="H"+s.toString(32)),i+=":"}else s=IS++,i=":"+i+"r"+s.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},RS={readContext:un,useCallback:xp,useContext:un,useEffect:Cc,useImperativeHandle:bp,useInsertionEffect:Bp,useLayoutEffect:Hp,useMemo:$p,useReducer:Ec,useRef:Up,useState:function(){return Ec(ps)},useDebugValue:Rc,useDeferredValue:function(t){var i=cn();return zp(i,ft.memoizedState,t)},useTransition:function(){var t=Ec(ps)[0],i=cn().memoizedState;return[t,i]},useMutableSource:Rp,useSyncExternalStore:Pp,useId:Wp,unstable_isNewReconciler:!1},PS={readContext:un,useCallback:xp,useContext:un,useEffect:Cc,useImperativeHandle:bp,useInsertionEffect:Bp,useLayoutEffect:Hp,useMemo:$p,useReducer:_c,useRef:Up,useState:function(){return _c(ps)},useDebugValue:Rc,useDeferredValue:function(t){var i=cn();return ft===null?i.memoizedState=t:zp(i,ft.memoizedState,t)},useTransition:function(){var t=_c(ps)[0],i=cn().memoizedState;return[t,i]},useMutableSource:Rp,useSyncExternalStore:Pp,useId:Wp,unstable_isNewReconciler:!1};function In(t,i){if(t&&t.defaultProps){i=Y({},i),t=t.defaultProps;for(var s in t)i[s]===void 0&&(i[s]=t[s]);return i}return i}function Pc(t,i,s,c){i=t.memoizedState,s=s(c,i),s=s==null?i:Y({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Xa={isMounted:function(t){return(t=t._reactInternals)?Ji(t)===t:!1},enqueueSetState:function(t,i,s){t=t._reactInternals;var c=Lt(),f=Oi(t),p=ti(c,f);p.payload=i,s!=null&&(p.callback=s),i=Ci(t,p,f),i!==null&&(_n(i,t,f,c),ba(i,t,f))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var c=Lt(),f=Oi(t),p=ti(c,f);p.tag=1,p.payload=i,s!=null&&(p.callback=s),i=Ci(t,p,f),i!==null&&(_n(i,t,f,c),ba(i,t,f))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=Lt(),c=Oi(t),f=ti(s,c);f.tag=2,i!=null&&(f.callback=i),i=Ci(t,f,c),i!==null&&(_n(i,t,c,s),ba(i,t,c))}};function Xp(t,i,s,c,f,p,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,p,v):i.prototype&&i.prototype.isPureReactComponent?!ts(s,c)||!ts(f,p):!0}function Kp(t,i,s){var c=!1,f=wi,p=i.contextType;return typeof p=="object"&&p!==null?p=un(p):(f=Yt(i)?tr:Nt.current,c=i.contextTypes,p=(c=c!=null)?Yr(t,f):wi),i=new i(s,p),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Xa,t.stateNode=i,i._reactInternals=t,c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=f,t.__reactInternalMemoizedMaskedChildContext=p),i}function qp(t,i,s,c){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,c),i.state!==t&&Xa.enqueueReplaceState(i,i.state,null)}function Nc(t,i,s,c){var f=t.stateNode;f.props=s,f.state=t.memoizedState,f.refs={},gc(t);var p=i.contextType;typeof p=="object"&&p!==null?f.context=un(p):(p=Yt(i)?tr:Nt.current,f.context=Yr(t,p)),f.state=t.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(Pc(t,i,p,s),f.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&Xa.enqueueReplaceState(f,f.state,null),xa(t,s,f,c),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308)}function Jr(t,i){try{var s="",c=i;do s+=ge(c),c=c.return;while(c);var f=s}catch(p){f=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:i,stack:f,digest:null}}function Oc(t,i,s){return{value:t,source:null,stack:s??null,digest:i??null}}function Dc(t,i){try{console.error(i.value)}catch(s){setTimeout(function(){throw s})}}var NS=typeof WeakMap=="function"?WeakMap:Map;function Zp(t,i,s){s=ti(-1,s),s.tag=3,s.payload={element:null};var c=i.value;return s.callback=function(){tl||(tl=!0,jc=c),Dc(t,i)},s}function Qp(t,i,s){s=ti(-1,s),s.tag=3;var c=t.type.getDerivedStateFromError;if(typeof c=="function"){var f=i.value;s.payload=function(){return c(f)},s.callback=function(){Dc(t,i)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(s.callback=function(){Dc(t,i),typeof c!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),s}function Jp(t,i,s){var c=t.pingCache;if(c===null){c=t.pingCache=new NS;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(s)||(f.add(s),t=zS.bind(null,t,i,s),i.then(t,t))}function eg(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function tg(t,i,s,c,f){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(i=ti(-1,1),i.tag=2,Ci(s,i,1))),s.lanes|=1),t):(t.flags|=65536,t.lanes=f,t)}var OS=H.ReactCurrentOwner,jt=!1;function Ut(t,i,s,c){i.child=t===null?Ap(i,null,s,c):Kr(i,t.child,s,c)}function ng(t,i,s,c,f){s=s.render;var p=i.ref;return Zr(i,f),c=Ic(t,i,s,c,p,f),s=wc(),t!==null&&!jt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~f,ni(t,i,f)):(Qe&&s&&oc(i),i.flags|=1,Ut(t,i,c,f),i.child)}function ig(t,i,s,c,f){if(t===null){var p=s.type;return typeof p=="function"&&!Jc(p)&&p.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(i.tag=15,i.type=p,rg(t,i,p,c,f)):(t=al(s.type,null,c,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(p=t.child,(t.lanes&f)===0){var v=p.memoizedProps;if(s=s.compare,s=s!==null?s:ts,s(v,c)&&t.ref===i.ref)return ni(t,i,f)}return i.flags|=1,t=Mi(p,c),t.ref=i.ref,t.return=i,i.child=t}function rg(t,i,s,c,f){if(t!==null){var p=t.memoizedProps;if(ts(p,c)&&t.ref===i.ref)if(jt=!1,i.pendingProps=c=p,(t.lanes&f)!==0)(t.flags&131072)!==0&&(jt=!0);else return i.lanes=t.lanes,ni(t,i,f)}return Mc(t,i,s,c,f)}function og(t,i,s){var c=i.pendingProps,f=c.children,p=t!==null?t.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(to,en),en|=s;else{if((s&1073741824)===0)return t=p!==null?p.baseLanes|s:s,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,Ye(to,en),en|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:s,Ye(to,en),en|=c}else p!==null?(c=p.baseLanes|s,i.memoizedState=null):c=s,Ye(to,en),en|=c;return Ut(t,i,f,s),i.child}function sg(t,i){var s=i.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(i.flags|=512,i.flags|=2097152)}function Mc(t,i,s,c,f){var p=Yt(s)?tr:Nt.current;return p=Yr(i,p),Zr(i,f),s=Ic(t,i,s,c,p,f),c=wc(),t!==null&&!jt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~f,ni(t,i,f)):(Qe&&c&&oc(i),i.flags|=1,Ut(t,i,s,f),i.child)}function ag(t,i,s,c,f){if(Yt(s)){var p=!0;Ma(i)}else p=!1;if(Zr(i,f),i.stateNode===null)qa(t,i),Kp(i,s,c),Nc(i,s,c,f),c=!0;else if(t===null){var v=i.stateNode,T=i.memoizedProps;v.props=T;var C=v.context,k=s.contextType;typeof k=="object"&&k!==null?k=un(k):(k=Yt(s)?tr:Nt.current,k=Yr(i,k));var b=s.getDerivedStateFromProps,z=typeof b=="function"||typeof v.getSnapshotBeforeUpdate=="function";z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==c||C!==k)&&qp(i,v,c,k),_i=!1;var G=i.memoizedState;v.state=G,xa(i,c,v,f),C=i.memoizedState,T!==c||G!==C||Wt.current||_i?(typeof b=="function"&&(Pc(i,s,b,c),C=i.memoizedState),(T=_i||Xp(i,s,T,c,G,C,k))?(z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=C),v.props=c,v.state=C,v.context=k,c=T):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{v=i.stateNode,wp(t,i),T=i.memoizedProps,k=i.type===i.elementType?T:In(i.type,T),v.props=k,z=i.pendingProps,G=v.context,C=s.contextType,typeof C=="object"&&C!==null?C=un(C):(C=Yt(s)?tr:Nt.current,C=Yr(i,C));var Z=s.getDerivedStateFromProps;(b=typeof Z=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==z||G!==C)&&qp(i,v,c,C),_i=!1,G=i.memoizedState,v.state=G,xa(i,c,v,f);var ee=i.memoizedState;T!==z||G!==ee||Wt.current||_i?(typeof Z=="function"&&(Pc(i,s,Z,c),ee=i.memoizedState),(k=_i||Xp(i,s,k,c,G,ee,C)||!1)?(b||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,ee,C),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,ee,C)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ee),v.props=c,v.state=ee,v.context=C,c=k):(typeof v.componentDidUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(i.flags|=1024),c=!1)}return kc(t,i,s,c,p,f)}function kc(t,i,s,c,f,p){sg(t,i);var v=(i.flags&128)!==0;if(!c&&!v)return f&&fp(i,s,!1),ni(t,i,p);c=i.stateNode,OS.current=i;var T=v&&typeof s.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,t!==null&&v?(i.child=Kr(i,t.child,null,p),i.child=Kr(i,null,T,p)):Ut(t,i,T,p),i.memoizedState=c.state,f&&fp(i,s,!0),i.child}function lg(t){var i=t.stateNode;i.pendingContext?cp(t,i.pendingContext,i.pendingContext!==i.context):i.context&&cp(t,i.context,!1),mc(t,i.containerInfo)}function ug(t,i,s,c,f){return Xr(),uc(f),i.flags|=256,Ut(t,i,s,c),i.child}var Fc={dehydrated:null,treeContext:null,retryLane:0};function Uc(t){return{baseLanes:t,cachePool:null,transitions:null}}function cg(t,i,s){var c=i.pendingProps,f=it.current,p=!1,v=(i.flags&128)!==0,T;if((T=v)||(T=t!==null&&t.memoizedState===null?!1:(f&2)!==0),T?(p=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(f|=1),Ye(it,f&1),t===null)return lc(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=c.children,t=c.fallback,p?(c=i.mode,p=i.child,v={mode:"hidden",children:v},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=ll(v,c,0,null),t=dr(t,c,s,null),p.return=i,t.return=i,p.sibling=t,i.child=p,i.child.memoizedState=Uc(s),i.memoizedState=Fc,t):Lc(i,v));if(f=t.memoizedState,f!==null&&(T=f.dehydrated,T!==null))return DS(t,i,v,c,T,f,s);if(p){p=c.fallback,v=i.mode,f=t.child,T=f.sibling;var C={mode:"hidden",children:c.children};return(v&1)===0&&i.child!==f?(c=i.child,c.childLanes=0,c.pendingProps=C,i.deletions=null):(c=Mi(f,C),c.subtreeFlags=f.subtreeFlags&14680064),T!==null?p=Mi(T,p):(p=dr(p,v,s,null),p.flags|=2),p.return=i,c.return=i,c.sibling=p,i.child=c,c=p,p=i.child,v=t.child.memoizedState,v=v===null?Uc(s):{baseLanes:v.baseLanes|s,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=t.childLanes&~s,i.memoizedState=Fc,c}return p=t.child,t=p.sibling,c=Mi(p,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=s),c.return=i,c.sibling=null,t!==null&&(s=i.deletions,s===null?(i.deletions=[t],i.flags|=16):s.push(t)),i.child=c,i.memoizedState=null,c}function Lc(t,i){return i=ll({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function Ka(t,i,s,c){return c!==null&&uc(c),Kr(i,t.child,null,s),t=Lc(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function DS(t,i,s,c,f,p,v){if(s)return i.flags&256?(i.flags&=-257,c=Oc(Error(r(422))),Ka(t,i,v,c)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(p=c.fallback,f=i.mode,c=ll({mode:"visible",children:c.children},f,0,null),p=dr(p,f,v,null),p.flags|=2,c.return=i,p.return=i,c.sibling=p,i.child=c,(i.mode&1)!==0&&Kr(i,t.child,null,v),i.child.memoizedState=Uc(v),i.memoizedState=Fc,p);if((i.mode&1)===0)return Ka(t,i,v,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var T=c.dgst;return c=T,p=Error(r(419)),c=Oc(p,c,void 0),Ka(t,i,v,c)}if(T=(v&t.childLanes)!==0,jt||T){if(c=gt,c!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|v))!==0?0:f,f!==0&&f!==p.retryLane&&(p.retryLane=f,ei(t,f),_n(c,t,f,-1))}return Qc(),c=Oc(Error(r(421))),Ka(t,i,v,c)}return f.data==="$?"?(i.flags|=128,i.child=t.child,i=WS.bind(null,t),f._reactRetry=i,null):(t=p.treeContext,Jt=Ai(f.nextSibling),Qt=i,Qe=!0,An=null,t!==null&&(an[ln++]=Qn,an[ln++]=Jn,an[ln++]=nr,Qn=t.id,Jn=t.overflow,nr=i),i=Lc(i,c.children),i.flags|=4096,i)}function dg(t,i,s){t.lanes|=i;var c=t.alternate;c!==null&&(c.lanes|=i),hc(t.return,i,s)}function Bc(t,i,s,c,f){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:s,tailMode:f}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=s,p.tailMode=f)}function fg(t,i,s){var c=i.pendingProps,f=c.revealOrder,p=c.tail;if(Ut(t,i,c.children,s),c=it.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dg(t,s,i);else if(t.tag===19)dg(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}if(Ye(it,c),(i.mode&1)===0)i.memoizedState=null;else switch(f){case"forwards":for(s=i.child,f=null;s!==null;)t=s.alternate,t!==null&&$a(t)===null&&(f=s),s=s.sibling;s=f,s===null?(f=i.child,i.child=null):(f=s.sibling,s.sibling=null),Bc(i,!1,f,s,p);break;case"backwards":for(s=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&$a(t)===null){i.child=f;break}t=f.sibling,f.sibling=s,s=f,f=t}Bc(i,!0,s,null,p);break;case"together":Bc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function qa(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function ni(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),ar|=i.lanes,(s&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,s=Mi(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=Mi(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function MS(t,i,s){switch(i.tag){case 3:lg(i),Xr();break;case 5:Cp(i);break;case 1:Yt(i.type)&&Ma(i);break;case 4:mc(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,f=i.memoizedProps.value;Ye(Ha,c._currentValue),c._currentValue=f;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Ye(it,it.current&1),i.flags|=128,null):(s&i.child.childLanes)!==0?cg(t,i,s):(Ye(it,it.current&1),t=ni(t,i,s),t!==null?t.sibling:null);Ye(it,it.current&1);break;case 19:if(c=(s&i.childLanes)!==0,(t.flags&128)!==0){if(c)return fg(t,i,s);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ye(it,it.current),c)break;return null;case 22:case 23:return i.lanes=0,og(t,i,s)}return ni(t,i,s)}var hg,Hc,pg,gg;hg=function(t,i){for(var s=i.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Hc=function(){},pg=function(t,i,s,c){var f=t.memoizedProps;if(f!==c){t=i.stateNode,or(Gn.current);var p=null;switch(s){case"input":f=Ze(t,f),c=Ze(t,c),p=[];break;case"select":f=Y({},f,{value:void 0}),c=Y({},c,{value:void 0}),p=[];break;case"textarea":f=Qi(t,f),c=Qi(t,c),p=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(t.onclick=Na)}yu(s,c);var v;s=null;for(k in f)if(!c.hasOwnProperty(k)&&f.hasOwnProperty(k)&&f[k]!=null)if(k==="style"){var T=f[k];for(v in T)T.hasOwnProperty(v)&&(s||(s={}),s[v]="")}else k!=="dangerouslySetInnerHTML"&&k!=="children"&&k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(l.hasOwnProperty(k)?p||(p=[]):(p=p||[]).push(k,null));for(k in c){var C=c[k];if(T=f!=null?f[k]:void 0,c.hasOwnProperty(k)&&C!==T&&(C!=null||T!=null))if(k==="style")if(T){for(v in T)!T.hasOwnProperty(v)||C&&C.hasOwnProperty(v)||(s||(s={}),s[v]="");for(v in C)C.hasOwnProperty(v)&&T[v]!==C[v]&&(s||(s={}),s[v]=C[v])}else s||(p||(p=[]),p.push(k,s)),s=C;else k==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,T=T?T.__html:void 0,C!=null&&T!==C&&(p=p||[]).push(k,C)):k==="children"?typeof C!="string"&&typeof C!="number"||(p=p||[]).push(k,""+C):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&(l.hasOwnProperty(k)?(C!=null&&k==="onScroll"&&Ve("scroll",t),p||T===C||(p=[])):(p=p||[]).push(k,C))}s&&(p=p||[]).push("style",s);var k=p;(i.updateQueue=k)&&(i.flags|=4)}},gg=function(t,i,s,c){s!==c&&(i.flags|=4)};function ms(t,i){if(!Qe)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Dt(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,c=0;if(i)for(var f=t.child;f!==null;)s|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)s|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=s,i}function kS(t,i,s){var c=i.pendingProps;switch(sc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(i),null;case 1:return Yt(i.type)&&Da(),Dt(i),null;case 3:return c=i.stateNode,Qr(),Xe(Wt),Xe(Nt),Sc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(La(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,An!==null&&(Kc(An),An=null))),Hc(t,i),Dt(i),null;case 5:vc(i);var f=or(ds.current);if(s=i.type,t!==null&&i.stateNode!=null)pg(t,i,s,c,f),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(r(166));return Dt(i),null}if(t=or(Gn.current),La(i)){c=i.stateNode,s=i.type;var p=i.memoizedProps;switch(c[Hn]=i,c[ss]=p,t=(i.mode&1)!==0,s){case"dialog":Ve("cancel",c),Ve("close",c);break;case"iframe":case"object":case"embed":Ve("load",c);break;case"video":case"audio":for(f=0;f<is.length;f++)Ve(is[f],c);break;case"source":Ve("error",c);break;case"img":case"image":case"link":Ve("error",c),Ve("load",c);break;case"details":Ve("toggle",c);break;case"input":je(c,p),Ve("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Ve("invalid",c);break;case"textarea":Qf(c,p),Ve("invalid",c)}yu(s,p),f=null;for(var v in p)if(p.hasOwnProperty(v)){var T=p[v];v==="children"?typeof T=="string"?c.textContent!==T&&(p.suppressHydrationWarning!==!0&&Pa(c.textContent,T,t),f=["children",T]):typeof T=="number"&&c.textContent!==""+T&&(p.suppressHydrationWarning!==!0&&Pa(c.textContent,T,t),f=["children",""+T]):l.hasOwnProperty(v)&&T!=null&&v==="onScroll"&&Ve("scroll",c)}switch(s){case"input":Le(c),sn(c,p,!0);break;case"textarea":Le(c),eh(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=Na)}c=f,i.updateQueue=c,c!==null&&(i.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=th(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof c.is=="string"?t=v.createElement(s,{is:c.is}):(t=v.createElement(s),s==="select"&&(v=t,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):t=v.createElementNS(t,s),t[Hn]=i,t[ss]=c,hg(t,i,!1,!1),i.stateNode=t;e:{switch(v=Su(s,c),s){case"dialog":Ve("cancel",t),Ve("close",t),f=c;break;case"iframe":case"object":case"embed":Ve("load",t),f=c;break;case"video":case"audio":for(f=0;f<is.length;f++)Ve(is[f],t);f=c;break;case"source":Ve("error",t),f=c;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),f=c;break;case"details":Ve("toggle",t),f=c;break;case"input":je(t,c),f=Ze(t,c),Ve("invalid",t);break;case"option":f=c;break;case"select":t._wrapperState={wasMultiple:!!c.multiple},f=Y({},c,{value:void 0}),Ve("invalid",t);break;case"textarea":Qf(t,c),f=Qi(t,c),Ve("invalid",t);break;default:f=c}yu(s,f),T=f;for(p in T)if(T.hasOwnProperty(p)){var C=T[p];p==="style"?rh(t,C):p==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&nh(t,C)):p==="children"?typeof C=="string"?(s!=="textarea"||C!=="")&&Ho(t,C):typeof C=="number"&&Ho(t,""+C):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(l.hasOwnProperty(p)?C!=null&&p==="onScroll"&&Ve("scroll",t):C!=null&&O(t,p,C,v))}switch(s){case"input":Le(t),sn(t,c,!1);break;case"textarea":Le(t),eh(t);break;case"option":c.value!=null&&t.setAttribute("value",""+Ae(c.value));break;case"select":t.multiple=!!c.multiple,p=c.value,p!=null?pi(t,!!c.multiple,p,!1):c.defaultValue!=null&&pi(t,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(t.onclick=Na)}switch(s){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Dt(i),null;case 6:if(t&&i.stateNode!=null)gg(t,i,t.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(s=or(ds.current),or(Gn.current),La(i)){if(c=i.stateNode,s=i.memoizedProps,c[Hn]=i,(p=c.nodeValue!==s)&&(t=Qt,t!==null))switch(t.tag){case 3:Pa(c.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pa(c.nodeValue,s,(t.mode&1)!==0)}p&&(i.flags|=4)}else c=(s.nodeType===9?s:s.ownerDocument).createTextNode(c),c[Hn]=i,i.stateNode=c}return Dt(i),null;case 13:if(Xe(it),c=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&Jt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)yp(),Xr(),i.flags|=98560,p=!1;else if(p=La(i),c!==null&&c.dehydrated!==null){if(t===null){if(!p)throw Error(r(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[Hn]=i}else Xr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Dt(i),p=!1}else An!==null&&(Kc(An),An=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=s,i):(c=c!==null,c!==(t!==null&&t.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(it.current&1)!==0?ht===0&&(ht=3):Qc())),i.updateQueue!==null&&(i.flags|=4),Dt(i),null);case 4:return Qr(),Hc(t,i),t===null&&rs(i.stateNode.containerInfo),Dt(i),null;case 10:return fc(i.type._context),Dt(i),null;case 17:return Yt(i.type)&&Da(),Dt(i),null;case 19:if(Xe(it),p=i.memoizedState,p===null)return Dt(i),null;if(c=(i.flags&128)!==0,v=p.rendering,v===null)if(c)ms(p,!1);else{if(ht!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(v=$a(t),v!==null){for(i.flags|=128,ms(p,!1),c=v.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=s,s=i.child;s!==null;)p=s,t=c,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,t=v.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Ye(it,it.current&1|2),i.child}t=t.sibling}p.tail!==null&&st()>no&&(i.flags|=128,c=!0,ms(p,!1),i.lanes=4194304)}else{if(!c)if(t=$a(v),t!==null){if(i.flags|=128,c=!0,s=t.updateQueue,s!==null&&(i.updateQueue=s,i.flags|=4),ms(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Qe)return Dt(i),null}else 2*st()-p.renderingStartTime>no&&s!==1073741824&&(i.flags|=128,c=!0,ms(p,!1),i.lanes=4194304);p.isBackwards?(v.sibling=i.child,i.child=v):(s=p.last,s!==null?s.sibling=v:i.child=v,p.last=v)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=st(),i.sibling=null,s=it.current,Ye(it,c?s&1|2:s&1),i):(Dt(i),null);case 22:case 23:return Zc(),c=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(en&1073741824)!==0&&(Dt(i),i.subtreeFlags&6&&(i.flags|=8192)):Dt(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function FS(t,i){switch(sc(i),i.tag){case 1:return Yt(i.type)&&Da(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Qr(),Xe(Wt),Xe(Nt),Sc(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return vc(i),null;case 13:if(Xe(it),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Xr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Xe(it),null;case 4:return Qr(),null;case 10:return fc(i.type._context),null;case 22:case 23:return Zc(),null;case 24:return null;default:return null}}var Za=!1,Mt=!1,US=typeof WeakSet=="function"?WeakSet:Set,Q=null;function eo(t,i){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(c){ot(t,i,c)}else s.current=null}function Gc(t,i,s){try{s()}catch(c){ot(t,i,c)}}var mg=!1;function LS(t,i){if(Zu=va,t=Xh(),zu(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var c=s.getSelection&&s.getSelection();if(c&&c.rangeCount!==0){s=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{s.nodeType,p.nodeType}catch{s=null;break e}var v=0,T=-1,C=-1,k=0,b=0,z=t,G=null;t:for(;;){for(var Z;z!==s||f!==0&&z.nodeType!==3||(T=v+f),z!==p||c!==0&&z.nodeType!==3||(C=v+c),z.nodeType===3&&(v+=z.nodeValue.length),(Z=z.firstChild)!==null;)G=z,z=Z;for(;;){if(z===t)break t;if(G===s&&++k===f&&(T=v),G===p&&++b===c&&(C=v),(Z=z.nextSibling)!==null)break;z=G,G=z.parentNode}z=Z}s=T===-1||C===-1?null:{start:T,end:C}}else s=null}s=s||{start:0,end:0}}else s=null;for(Qu={focusedElem:t,selectionRange:s},va=!1,Q=i;Q!==null;)if(i=Q,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Q=t;else for(;Q!==null;){i=Q;try{var ee=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ee!==null){var re=ee.memoizedProps,at=ee.memoizedState,D=i.stateNode,P=D.getSnapshotBeforeUpdate(i.elementType===i.type?re:In(i.type,re),at);D.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var M=i.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(j){ot(i,i.return,j)}if(t=i.sibling,t!==null){t.return=i.return,Q=t;break}Q=i.return}return ee=mg,mg=!1,ee}function vs(t,i,s){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&t)===t){var p=f.destroy;f.destroy=void 0,p!==void 0&&Gc(i,s,p)}f=f.next}while(f!==c)}}function Qa(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var c=s.create;s.destroy=c()}s=s.next}while(s!==i)}}function bc(t){var i=t.ref;if(i!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof i=="function"?i(t):i.current=t}}function vg(t){var i=t.alternate;i!==null&&(t.alternate=null,vg(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[Hn],delete i[ss],delete i[nc],delete i[yS],delete i[SS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yg(t){return t.tag===5||t.tag===3||t.tag===4}function Sg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xc(t,i,s){var c=t.tag;if(c===5||c===6)t=t.stateNode,i?s.nodeType===8?s.parentNode.insertBefore(t,i):s.insertBefore(t,i):(s.nodeType===8?(i=s.parentNode,i.insertBefore(t,s)):(i=s,i.appendChild(t)),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Na));else if(c!==4&&(t=t.child,t!==null))for(xc(t,i,s),t=t.sibling;t!==null;)xc(t,i,s),t=t.sibling}function $c(t,i,s){var c=t.tag;if(c===5||c===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(c!==4&&(t=t.child,t!==null))for($c(t,i,s),t=t.sibling;t!==null;)$c(t,i,s),t=t.sibling}var wt=null,wn=!1;function Ri(t,i,s){for(s=s.child;s!==null;)Tg(t,i,s),s=s.sibling}function Tg(t,i,s){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(da,s)}catch{}switch(s.tag){case 5:Mt||eo(s,i);case 6:var c=wt,f=wn;wt=null,Ri(t,i,s),wt=c,wn=f,wt!==null&&(wn?(t=wt,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):wt.removeChild(s.stateNode));break;case 18:wt!==null&&(wn?(t=wt,s=s.stateNode,t.nodeType===8?tc(t.parentNode,s):t.nodeType===1&&tc(t,s),Ko(t)):tc(wt,s.stateNode));break;case 4:c=wt,f=wn,wt=s.stateNode.containerInfo,wn=!0,Ri(t,i,s),wt=c,wn=f;break;case 0:case 11:case 14:case 15:if(!Mt&&(c=s.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var p=f,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&Gc(s,i,v),f=f.next}while(f!==c)}Ri(t,i,s);break;case 1:if(!Mt&&(eo(s,i),c=s.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=s.memoizedProps,c.state=s.memoizedState,c.componentWillUnmount()}catch(T){ot(s,i,T)}Ri(t,i,s);break;case 21:Ri(t,i,s);break;case 22:s.mode&1?(Mt=(c=Mt)||s.memoizedState!==null,Ri(t,i,s),Mt=c):Ri(t,i,s);break;default:Ri(t,i,s)}}function Ag(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new US),i.forEach(function(c){var f=YS.bind(null,t,c);s.has(c)||(s.add(c),c.then(f,f))})}}function En(t,i){var s=i.deletions;if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];try{var p=t,v=i,T=v;e:for(;T!==null;){switch(T.tag){case 5:wt=T.stateNode,wn=!1;break e;case 3:wt=T.stateNode.containerInfo,wn=!0;break e;case 4:wt=T.stateNode.containerInfo,wn=!0;break e}T=T.return}if(wt===null)throw Error(r(160));Tg(p,v,f),wt=null,wn=!1;var C=f.alternate;C!==null&&(C.return=null),f.return=null}catch(k){ot(f,i,k)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Ig(i,t),i=i.sibling}function Ig(t,i){var s=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(En(i,t),xn(t),c&4){try{vs(3,t,t.return),Qa(3,t)}catch(re){ot(t,t.return,re)}try{vs(5,t,t.return)}catch(re){ot(t,t.return,re)}}break;case 1:En(i,t),xn(t),c&512&&s!==null&&eo(s,s.return);break;case 5:if(En(i,t),xn(t),c&512&&s!==null&&eo(s,s.return),t.flags&32){var f=t.stateNode;try{Ho(f,"")}catch(re){ot(t,t.return,re)}}if(c&4&&(f=t.stateNode,f!=null)){var p=t.memoizedProps,v=s!==null?s.memoizedProps:p,T=t.type,C=t.updateQueue;if(t.updateQueue=null,C!==null)try{T==="input"&&p.type==="radio"&&p.name!=null&&Fn(f,p),Su(T,v);var k=Su(T,p);for(v=0;v<C.length;v+=2){var b=C[v],z=C[v+1];b==="style"?rh(f,z):b==="dangerouslySetInnerHTML"?nh(f,z):b==="children"?Ho(f,z):O(f,b,z,k)}switch(T){case"input":zt(f,p);break;case"textarea":Jf(f,p);break;case"select":var G=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!p.multiple;var Z=p.value;Z!=null?pi(f,!!p.multiple,Z,!1):G!==!!p.multiple&&(p.defaultValue!=null?pi(f,!!p.multiple,p.defaultValue,!0):pi(f,!!p.multiple,p.multiple?[]:"",!1))}f[ss]=p}catch(re){ot(t,t.return,re)}}break;case 6:if(En(i,t),xn(t),c&4){if(t.stateNode===null)throw Error(r(162));f=t.stateNode,p=t.memoizedProps;try{f.nodeValue=p}catch(re){ot(t,t.return,re)}}break;case 3:if(En(i,t),xn(t),c&4&&s!==null&&s.memoizedState.isDehydrated)try{Ko(i.containerInfo)}catch(re){ot(t,t.return,re)}break;case 4:En(i,t),xn(t);break;case 13:En(i,t),xn(t),f=t.child,f.flags&8192&&(p=f.memoizedState!==null,f.stateNode.isHidden=p,!p||f.alternate!==null&&f.alternate.memoizedState!==null||(Yc=st())),c&4&&Ag(t);break;case 22:if(b=s!==null&&s.memoizedState!==null,t.mode&1?(Mt=(k=Mt)||b,En(i,t),Mt=k):En(i,t),xn(t),c&8192){if(k=t.memoizedState!==null,(t.stateNode.isHidden=k)&&!b&&(t.mode&1)!==0)for(Q=t,b=t.child;b!==null;){for(z=Q=b;Q!==null;){switch(G=Q,Z=G.child,G.tag){case 0:case 11:case 14:case 15:vs(4,G,G.return);break;case 1:eo(G,G.return);var ee=G.stateNode;if(typeof ee.componentWillUnmount=="function"){c=G,s=G.return;try{i=c,ee.props=i.memoizedProps,ee.state=i.memoizedState,ee.componentWillUnmount()}catch(re){ot(c,s,re)}}break;case 5:eo(G,G.return);break;case 22:if(G.memoizedState!==null){_g(z);continue}}Z!==null?(Z.return=G,Q=Z):_g(z)}b=b.sibling}e:for(b=null,z=t;;){if(z.tag===5){if(b===null){b=z;try{f=z.stateNode,k?(p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(T=z.stateNode,C=z.memoizedProps.style,v=C!=null&&C.hasOwnProperty("display")?C.display:null,T.style.display=ih("display",v))}catch(re){ot(t,t.return,re)}}}else if(z.tag===6){if(b===null)try{z.stateNode.nodeValue=k?"":z.memoizedProps}catch(re){ot(t,t.return,re)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===t)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===t)break e;for(;z.sibling===null;){if(z.return===null||z.return===t)break e;b===z&&(b=null),z=z.return}b===z&&(b=null),z.sibling.return=z.return,z=z.sibling}}break;case 19:En(i,t),xn(t),c&4&&Ag(t);break;case 21:break;default:En(i,t),xn(t)}}function xn(t){var i=t.flags;if(i&2){try{e:{for(var s=t.return;s!==null;){if(yg(s)){var c=s;break e}s=s.return}throw Error(r(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(Ho(f,""),c.flags&=-33);var p=Sg(t);$c(t,p,f);break;case 3:case 4:var v=c.stateNode.containerInfo,T=Sg(t);xc(t,T,v);break;default:throw Error(r(161))}}catch(C){ot(t,t.return,C)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function BS(t,i,s){Q=t,wg(t)}function wg(t,i,s){for(var c=(t.mode&1)!==0;Q!==null;){var f=Q,p=f.child;if(f.tag===22&&c){var v=f.memoizedState!==null||Za;if(!v){var T=f.alternate,C=T!==null&&T.memoizedState!==null||Mt;T=Za;var k=Mt;if(Za=v,(Mt=C)&&!k)for(Q=f;Q!==null;)v=Q,C=v.child,v.tag===22&&v.memoizedState!==null?Cg(f):C!==null?(C.return=v,Q=C):Cg(f);for(;p!==null;)Q=p,wg(p),p=p.sibling;Q=f,Za=T,Mt=k}Eg(t)}else(f.subtreeFlags&8772)!==0&&p!==null?(p.return=f,Q=p):Eg(t)}}function Eg(t){for(;Q!==null;){var i=Q;if((i.flags&8772)!==0){var s=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Mt||Qa(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!Mt)if(s===null)c.componentDidMount();else{var f=i.elementType===i.type?s.memoizedProps:In(i.type,s.memoizedProps);c.componentDidUpdate(f,s.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&_p(i,p,c);break;case 3:var v=i.updateQueue;if(v!==null){if(s=null,i.child!==null)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}_p(i,v,s)}break;case 5:var T=i.stateNode;if(s===null&&i.flags&4){s=T;var C=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&s.focus();break;case"img":C.src&&(s.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var k=i.alternate;if(k!==null){var b=k.memoizedState;if(b!==null){var z=b.dehydrated;z!==null&&Ko(z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Mt||i.flags&512&&bc(i)}catch(G){ot(i,i.return,G)}}if(i===t){Q=null;break}if(s=i.sibling,s!==null){s.return=i.return,Q=s;break}Q=i.return}}function _g(t){for(;Q!==null;){var i=Q;if(i===t){Q=null;break}var s=i.sibling;if(s!==null){s.return=i.return,Q=s;break}Q=i.return}}function Cg(t){for(;Q!==null;){var i=Q;try{switch(i.tag){case 0:case 11:case 15:var s=i.return;try{Qa(4,i)}catch(C){ot(i,s,C)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var f=i.return;try{c.componentDidMount()}catch(C){ot(i,f,C)}}var p=i.return;try{bc(i)}catch(C){ot(i,p,C)}break;case 5:var v=i.return;try{bc(i)}catch(C){ot(i,v,C)}}}catch(C){ot(i,i.return,C)}if(i===t){Q=null;break}var T=i.sibling;if(T!==null){T.return=i.return,Q=T;break}Q=i.return}}var HS=Math.ceil,Ja=H.ReactCurrentDispatcher,zc=H.ReactCurrentOwner,dn=H.ReactCurrentBatchConfig,He=0,gt=null,ut=null,Et=0,en=0,to=Ii(0),ht=0,ys=null,ar=0,el=0,Wc=0,Ss=null,Vt=null,Yc=0,no=1/0,ii=null,tl=!1,jc=null,Pi=null,nl=!1,Ni=null,il=0,Ts=0,Vc=null,rl=-1,ol=0;function Lt(){return(He&6)!==0?st():rl!==-1?rl:rl=st()}function Oi(t){return(t.mode&1)===0?1:(He&2)!==0&&Et!==0?Et&-Et:AS.transition!==null?(ol===0&&(ol=Sh()),ol):(t=We,t!==0||(t=window.event,t=t===void 0?16:Ph(t.type)),t)}function _n(t,i,s,c){if(50<Ts)throw Ts=0,Vc=null,Error(r(185));Wo(t,s,c),((He&2)===0||t!==gt)&&(t===gt&&((He&2)===0&&(el|=s),ht===4&&Di(t,Et)),Xt(t,c),s===1&&He===0&&(i.mode&1)===0&&(no=st()+500,ka&&Ei()))}function Xt(t,i){var s=t.callbackNode;Ay(t,i);var c=pa(t,t===gt?Et:0);if(c===0)s!==null&&mh(s),t.callbackNode=null,t.callbackPriority=0;else if(i=c&-c,t.callbackPriority!==i){if(s!=null&&mh(s),i===1)t.tag===0?TS(Pg.bind(null,t)):hp(Pg.bind(null,t)),mS(function(){(He&6)===0&&Ei()}),s=null;else{switch(Th(c)){case 1:s=Cu;break;case 4:s=vh;break;case 16:s=ca;break;case 536870912:s=yh;break;default:s=ca}s=Lg(s,Rg.bind(null,t))}t.callbackPriority=i,t.callbackNode=s}}function Rg(t,i){if(rl=-1,ol=0,(He&6)!==0)throw Error(r(327));var s=t.callbackNode;if(io()&&t.callbackNode!==s)return null;var c=pa(t,t===gt?Et:0);if(c===0)return null;if((c&30)!==0||(c&t.expiredLanes)!==0||i)i=sl(t,c);else{i=c;var f=He;He|=2;var p=Og();(gt!==t||Et!==i)&&(ii=null,no=st()+500,ur(t,i));do try{xS();break}catch(T){Ng(t,T)}while(!0);dc(),Ja.current=p,He=f,ut!==null?i=0:(gt=null,Et=0,i=ht)}if(i!==0){if(i===2&&(f=Ru(t),f!==0&&(c=f,i=Xc(t,f))),i===1)throw s=ys,ur(t,0),Di(t,c),Xt(t,st()),s;if(i===6)Di(t,c);else{if(f=t.current.alternate,(c&30)===0&&!GS(f)&&(i=sl(t,c),i===2&&(p=Ru(t),p!==0&&(c=p,i=Xc(t,p))),i===1))throw s=ys,ur(t,0),Di(t,c),Xt(t,st()),s;switch(t.finishedWork=f,t.finishedLanes=c,i){case 0:case 1:throw Error(r(345));case 2:cr(t,Vt,ii);break;case 3:if(Di(t,c),(c&130023424)===c&&(i=Yc+500-st(),10<i)){if(pa(t,0)!==0)break;if(f=t.suspendedLanes,(f&c)!==c){Lt(),t.pingedLanes|=t.suspendedLanes&f;break}t.timeoutHandle=ec(cr.bind(null,t,Vt,ii),i);break}cr(t,Vt,ii);break;case 4:if(Di(t,c),(c&4194240)===c)break;for(i=t.eventTimes,f=-1;0<c;){var v=31-Sn(c);p=1<<v,v=i[v],v>f&&(f=v),c&=~p}if(c=f,c=st()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*HS(c/1960))-c,10<c){t.timeoutHandle=ec(cr.bind(null,t,Vt,ii),c);break}cr(t,Vt,ii);break;case 5:cr(t,Vt,ii);break;default:throw Error(r(329))}}}return Xt(t,st()),t.callbackNode===s?Rg.bind(null,t):null}function Xc(t,i){var s=Ss;return t.current.memoizedState.isDehydrated&&(ur(t,i).flags|=256),t=sl(t,i),t!==2&&(i=Vt,Vt=s,i!==null&&Kc(i)),t}function Kc(t){Vt===null?Vt=t:Vt.push.apply(Vt,t)}function GS(t){for(var i=t;;){if(i.flags&16384){var s=i.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var c=0;c<s.length;c++){var f=s[c],p=f.getSnapshot;f=f.value;try{if(!Tn(p(),f))return!1}catch{return!1}}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Di(t,i){for(i&=~Wc,i&=~el,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var s=31-Sn(i),c=1<<s;t[s]=-1,i&=~c}}function Pg(t){if((He&6)!==0)throw Error(r(327));io();var i=pa(t,0);if((i&1)===0)return Xt(t,st()),null;var s=sl(t,i);if(t.tag!==0&&s===2){var c=Ru(t);c!==0&&(i=c,s=Xc(t,c))}if(s===1)throw s=ys,ur(t,0),Di(t,i),Xt(t,st()),s;if(s===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,cr(t,Vt,ii),Xt(t,st()),null}function qc(t,i){var s=He;He|=1;try{return t(i)}finally{He=s,He===0&&(no=st()+500,ka&&Ei())}}function lr(t){Ni!==null&&Ni.tag===0&&(He&6)===0&&io();var i=He;He|=1;var s=dn.transition,c=We;try{if(dn.transition=null,We=1,t)return t()}finally{We=c,dn.transition=s,He=i,(He&6)===0&&Ei()}}function Zc(){en=to.current,Xe(to)}function ur(t,i){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,gS(s)),ut!==null)for(s=ut.return;s!==null;){var c=s;switch(sc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Da();break;case 3:Qr(),Xe(Wt),Xe(Nt),Sc();break;case 5:vc(c);break;case 4:Qr();break;case 13:Xe(it);break;case 19:Xe(it);break;case 10:fc(c.type._context);break;case 22:case 23:Zc()}s=s.return}if(gt=t,ut=t=Mi(t.current,null),Et=en=i,ht=0,ys=null,Wc=el=ar=0,Vt=Ss=null,rr!==null){for(i=0;i<rr.length;i++)if(s=rr[i],c=s.interleaved,c!==null){s.interleaved=null;var f=c.next,p=s.pending;if(p!==null){var v=p.next;p.next=f,c.next=v}s.pending=c}rr=null}return t}function Ng(t,i){do{var s=ut;try{if(dc(),za.current=Va,Wa){for(var c=rt.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Wa=!1}if(sr=0,pt=ft=rt=null,fs=!1,hs=0,zc.current=null,s===null||s.return===null){ht=1,ys=i,ut=null;break}e:{var p=t,v=s.return,T=s,C=i;if(i=Et,T.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var k=C,b=T,z=b.tag;if((b.mode&1)===0&&(z===0||z===11||z===15)){var G=b.alternate;G?(b.updateQueue=G.updateQueue,b.memoizedState=G.memoizedState,b.lanes=G.lanes):(b.updateQueue=null,b.memoizedState=null)}var Z=eg(v);if(Z!==null){Z.flags&=-257,tg(Z,v,T,p,i),Z.mode&1&&Jp(p,k,i),i=Z,C=k;var ee=i.updateQueue;if(ee===null){var re=new Set;re.add(C),i.updateQueue=re}else ee.add(C);break e}else{if((i&1)===0){Jp(p,k,i),Qc();break e}C=Error(r(426))}}else if(Qe&&T.mode&1){var at=eg(v);if(at!==null){(at.flags&65536)===0&&(at.flags|=256),tg(at,v,T,p,i),uc(Jr(C,T));break e}}p=C=Jr(C,T),ht!==4&&(ht=2),Ss===null?Ss=[p]:Ss.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var D=Zp(p,C,i);Ep(p,D);break e;case 1:T=C;var P=p.type,M=p.stateNode;if((p.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Pi===null||!Pi.has(M)))){p.flags|=65536,i&=-i,p.lanes|=i;var j=Qp(p,T,i);Ep(p,j);break e}}p=p.return}while(p!==null)}Mg(s)}catch(ae){i=ae,ut===s&&s!==null&&(ut=s=s.return);continue}break}while(!0)}function Og(){var t=Ja.current;return Ja.current=Va,t===null?Va:t}function Qc(){(ht===0||ht===3||ht===2)&&(ht=4),gt===null||(ar&268435455)===0&&(el&268435455)===0||Di(gt,Et)}function sl(t,i){var s=He;He|=2;var c=Og();(gt!==t||Et!==i)&&(ii=null,ur(t,i));do try{bS();break}catch(f){Ng(t,f)}while(!0);if(dc(),He=s,Ja.current=c,ut!==null)throw Error(r(261));return gt=null,Et=0,ht}function bS(){for(;ut!==null;)Dg(ut)}function xS(){for(;ut!==null&&!fy();)Dg(ut)}function Dg(t){var i=Ug(t.alternate,t,en);t.memoizedProps=t.pendingProps,i===null?Mg(t):ut=i,zc.current=null}function Mg(t){var i=t;do{var s=i.alternate;if(t=i.return,(i.flags&32768)===0){if(s=kS(s,i,en),s!==null){ut=s;return}}else{if(s=FS(s,i),s!==null){s.flags&=32767,ut=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,ut=null;return}}if(i=i.sibling,i!==null){ut=i;return}ut=i=t}while(i!==null);ht===0&&(ht=5)}function cr(t,i,s){var c=We,f=dn.transition;try{dn.transition=null,We=1,$S(t,i,s,c)}finally{dn.transition=f,We=c}return null}function $S(t,i,s,c){do io();while(Ni!==null);if((He&6)!==0)throw Error(r(327));s=t.finishedWork;var f=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var p=s.lanes|s.childLanes;if(Iy(t,p),t===gt&&(ut=gt=null,Et=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||nl||(nl=!0,Lg(ca,function(){return io(),null})),p=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||p){p=dn.transition,dn.transition=null;var v=We;We=1;var T=He;He|=4,zc.current=null,LS(t,s),Ig(s,t),lS(Qu),va=!!Zu,Qu=Zu=null,t.current=s,BS(s),hy(),He=T,We=v,dn.transition=p}else t.current=s;if(nl&&(nl=!1,Ni=t,il=f),p=t.pendingLanes,p===0&&(Pi=null),my(s.stateNode),Xt(t,st()),i!==null)for(c=t.onRecoverableError,s=0;s<i.length;s++)f=i[s],c(f.value,{componentStack:f.stack,digest:f.digest});if(tl)throw tl=!1,t=jc,jc=null,t;return(il&1)!==0&&t.tag!==0&&io(),p=t.pendingLanes,(p&1)!==0?t===Vc?Ts++:(Ts=0,Vc=t):Ts=0,Ei(),null}function io(){if(Ni!==null){var t=Th(il),i=dn.transition,s=We;try{if(dn.transition=null,We=16>t?16:t,Ni===null)var c=!1;else{if(t=Ni,Ni=null,il=0,(He&6)!==0)throw Error(r(331));var f=He;for(He|=4,Q=t.current;Q!==null;){var p=Q,v=p.child;if((Q.flags&16)!==0){var T=p.deletions;if(T!==null){for(var C=0;C<T.length;C++){var k=T[C];for(Q=k;Q!==null;){var b=Q;switch(b.tag){case 0:case 11:case 15:vs(8,b,p)}var z=b.child;if(z!==null)z.return=b,Q=z;else for(;Q!==null;){b=Q;var G=b.sibling,Z=b.return;if(vg(b),b===k){Q=null;break}if(G!==null){G.return=Z,Q=G;break}Q=Z}}}var ee=p.alternate;if(ee!==null){var re=ee.child;if(re!==null){ee.child=null;do{var at=re.sibling;re.sibling=null,re=at}while(re!==null)}}Q=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,Q=v;else e:for(;Q!==null;){if(p=Q,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:vs(9,p,p.return)}var D=p.sibling;if(D!==null){D.return=p.return,Q=D;break e}Q=p.return}}var P=t.current;for(Q=P;Q!==null;){v=Q;var M=v.child;if((v.subtreeFlags&2064)!==0&&M!==null)M.return=v,Q=M;else e:for(v=P;Q!==null;){if(T=Q,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:Qa(9,T)}}catch(ae){ot(T,T.return,ae)}if(T===v){Q=null;break e}var j=T.sibling;if(j!==null){j.return=T.return,Q=j;break e}Q=T.return}}if(He=f,Ei(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(da,t)}catch{}c=!0}return c}finally{We=s,dn.transition=i}}return!1}function kg(t,i,s){i=Jr(s,i),i=Zp(t,i,1),t=Ci(t,i,1),i=Lt(),t!==null&&(Wo(t,1,i),Xt(t,i))}function ot(t,i,s){if(t.tag===3)kg(t,t,s);else for(;i!==null;){if(i.tag===3){kg(i,t,s);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Pi===null||!Pi.has(c))){t=Jr(s,t),t=Qp(i,t,1),i=Ci(i,t,1),t=Lt(),i!==null&&(Wo(i,1,t),Xt(i,t));break}}i=i.return}}function zS(t,i,s){var c=t.pingCache;c!==null&&c.delete(i),i=Lt(),t.pingedLanes|=t.suspendedLanes&s,gt===t&&(Et&s)===s&&(ht===4||ht===3&&(Et&130023424)===Et&&500>st()-Yc?ur(t,0):Wc|=s),Xt(t,i)}function Fg(t,i){i===0&&((t.mode&1)===0?i=1:(i=ha,ha<<=1,(ha&130023424)===0&&(ha=4194304)));var s=Lt();t=ei(t,i),t!==null&&(Wo(t,i,s),Xt(t,s))}function WS(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),Fg(t,s)}function YS(t,i){var s=0;switch(t.tag){case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(s=f.retryLane);break;case 19:c=t.stateNode;break;default:throw Error(r(314))}c!==null&&c.delete(i),Fg(t,s)}var Ug;Ug=function(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps||Wt.current)jt=!0;else{if((t.lanes&s)===0&&(i.flags&128)===0)return jt=!1,MS(t,i,s);jt=(t.flags&131072)!==0}else jt=!1,Qe&&(i.flags&1048576)!==0&&pp(i,Ua,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;qa(t,i),t=i.pendingProps;var f=Yr(i,Nt.current);Zr(i,s),f=Ic(null,i,c,t,f,s);var p=wc();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Yt(c)?(p=!0,Ma(i)):p=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,gc(i),f.updater=Xa,i.stateNode=f,f._reactInternals=i,Nc(i,c,t,s),i=kc(null,i,c,!0,p,s)):(i.tag=0,Qe&&p&&oc(i),Ut(null,i,f,s),i=i.child),i;case 16:c=i.elementType;e:{switch(qa(t,i),t=i.pendingProps,f=c._init,c=f(c._payload),i.type=c,f=i.tag=VS(c),t=In(c,t),f){case 0:i=Mc(null,i,c,t,s);break e;case 1:i=ag(null,i,c,t,s);break e;case 11:i=ng(null,i,c,t,s);break e;case 14:i=ig(null,i,c,In(c.type,t),s);break e}throw Error(r(306,c,""))}return i;case 0:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:In(c,f),Mc(t,i,c,f,s);case 1:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:In(c,f),ag(t,i,c,f,s);case 3:e:{if(lg(i),t===null)throw Error(r(387));c=i.pendingProps,p=i.memoizedState,f=p.element,wp(t,i),xa(i,c,null,s);var v=i.memoizedState;if(c=v.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){f=Jr(Error(r(423)),i),i=ug(t,i,c,s,f);break e}else if(c!==f){f=Jr(Error(r(424)),i),i=ug(t,i,c,s,f);break e}else for(Jt=Ai(i.stateNode.containerInfo.firstChild),Qt=i,Qe=!0,An=null,s=Ap(i,null,c,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Xr(),c===f){i=ni(t,i,s);break e}Ut(t,i,c,s)}i=i.child}return i;case 5:return Cp(i),t===null&&lc(i),c=i.type,f=i.pendingProps,p=t!==null?t.memoizedProps:null,v=f.children,Ju(c,f)?v=null:p!==null&&Ju(c,p)&&(i.flags|=32),sg(t,i),Ut(t,i,v,s),i.child;case 6:return t===null&&lc(i),null;case 13:return cg(t,i,s);case 4:return mc(i,i.stateNode.containerInfo),c=i.pendingProps,t===null?i.child=Kr(i,null,c,s):Ut(t,i,c,s),i.child;case 11:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:In(c,f),ng(t,i,c,f,s);case 7:return Ut(t,i,i.pendingProps,s),i.child;case 8:return Ut(t,i,i.pendingProps.children,s),i.child;case 12:return Ut(t,i,i.pendingProps.children,s),i.child;case 10:e:{if(c=i.type._context,f=i.pendingProps,p=i.memoizedProps,v=f.value,Ye(Ha,c._currentValue),c._currentValue=v,p!==null)if(Tn(p.value,v)){if(p.children===f.children&&!Wt.current){i=ni(t,i,s);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var T=p.dependencies;if(T!==null){v=p.child;for(var C=T.firstContext;C!==null;){if(C.context===c){if(p.tag===1){C=ti(-1,s&-s),C.tag=2;var k=p.updateQueue;if(k!==null){k=k.shared;var b=k.pending;b===null?C.next=C:(C.next=b.next,b.next=C),k.pending=C}}p.lanes|=s,C=p.alternate,C!==null&&(C.lanes|=s),hc(p.return,s,i),T.lanes|=s;break}C=C.next}}else if(p.tag===10)v=p.type===i.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(r(341));v.lanes|=s,T=v.alternate,T!==null&&(T.lanes|=s),hc(v,s,i),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===i){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}Ut(t,i,f.children,s),i=i.child}return i;case 9:return f=i.type,c=i.pendingProps.children,Zr(i,s),f=un(f),c=c(f),i.flags|=1,Ut(t,i,c,s),i.child;case 14:return c=i.type,f=In(c,i.pendingProps),f=In(c.type,f),ig(t,i,c,f,s);case 15:return rg(t,i,i.type,i.pendingProps,s);case 17:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:In(c,f),qa(t,i),i.tag=1,Yt(c)?(t=!0,Ma(i)):t=!1,Zr(i,s),Kp(i,c,f),Nc(i,c,f,s),kc(null,i,c,!0,t,s);case 19:return fg(t,i,s);case 22:return og(t,i,s)}throw Error(r(156,i.tag))};function Lg(t,i){return gh(t,i)}function jS(t,i,s,c){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,i,s,c){return new jS(t,i,s,c)}function Jc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function VS(t){if(typeof t=="function")return Jc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Pe)return 11;if(t===Ue)return 14}return 2}function Mi(t,i){var s=t.alternate;return s===null?(s=fn(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function al(t,i,s,c,f,p){var v=2;if(c=t,typeof t=="function")Jc(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case $:return dr(s.children,f,p,i);case J:v=8,f|=8;break;case Ee:return t=fn(12,s,i,f|2),t.elementType=Ee,t.lanes=p,t;case Re:return t=fn(13,s,i,f),t.elementType=Re,t.lanes=p,t;case ce:return t=fn(19,s,i,f),t.elementType=ce,t.lanes=p,t;case te:return ll(s,f,p,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _e:v=10;break e;case be:v=9;break e;case Pe:v=11;break e;case Ue:v=14;break e;case Se:v=16,c=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return i=fn(v,s,i,f),i.elementType=t,i.type=c,i.lanes=p,i}function dr(t,i,s,c){return t=fn(7,t,c,i),t.lanes=s,t}function ll(t,i,s,c){return t=fn(22,t,c,i),t.elementType=te,t.lanes=s,t.stateNode={isHidden:!1},t}function ed(t,i,s){return t=fn(6,t,null,i),t.lanes=s,t}function td(t,i,s){return i=fn(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function XS(t,i,s,c,f){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pu(0),this.expirationTimes=Pu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pu(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function nd(t,i,s,c,f,p,v,T,C){return t=new XS(t,i,s,T,C),i===1?(i=1,p===!0&&(i|=8)):i=0,p=fn(3,null,null,i),t.current=p,p.stateNode=t,p.memoizedState={element:c,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},gc(p),t}function KS(t,i,s){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:c==null?null:""+c,children:t,containerInfo:i,implementation:s}}function Bg(t){if(!t)return wi;t=t._reactInternals;e:{if(Ji(t)!==t||t.tag!==1)throw Error(r(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Yt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(t.tag===1){var s=t.type;if(Yt(s))return dp(t,s,i)}return i}function Hg(t,i,s,c,f,p,v,T,C){return t=nd(s,c,!0,t,f,p,v,T,C),t.context=Bg(null),s=t.current,c=Lt(),f=Oi(s),p=ti(c,f),p.callback=i??null,Ci(s,p,f),t.current.lanes=f,Wo(t,f,c),Xt(t,c),t}function ul(t,i,s,c){var f=i.current,p=Lt(),v=Oi(f);return s=Bg(s),i.context===null?i.context=s:i.pendingContext=s,i=ti(p,v),i.payload={element:t},c=c===void 0?null:c,c!==null&&(i.callback=c),t=Ci(f,i,v),t!==null&&(_n(t,f,v,p),ba(t,f,v)),v}function cl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gg(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function id(t,i){Gg(t,i),(t=t.alternate)&&Gg(t,i)}function qS(){return null}var bg=typeof reportError=="function"?reportError:function(t){console.error(t)};function rd(t){this._internalRoot=t}dl.prototype.render=rd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));ul(t,i,null,null)},dl.prototype.unmount=rd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;lr(function(){ul(null,t,null,null)}),i[qn]=null}};function dl(t){this._internalRoot=t}dl.prototype.unstable_scheduleHydration=function(t){if(t){var i=wh();t={blockedOn:null,target:t,priority:i};for(var s=0;s<yi.length&&i!==0&&i<yi[s].priority;s++);yi.splice(s,0,t),s===0&&Ch(t)}};function od(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xg(){}function ZS(t,i,s,c,f){if(f){if(typeof c=="function"){var p=c;c=function(){var k=cl(v);p.call(k)}}var v=Hg(i,c,t,0,null,!1,!1,"",xg);return t._reactRootContainer=v,t[qn]=v.current,rs(t.nodeType===8?t.parentNode:t),lr(),v}for(;f=t.lastChild;)t.removeChild(f);if(typeof c=="function"){var T=c;c=function(){var k=cl(C);T.call(k)}}var C=nd(t,0,!1,null,null,!1,!1,"",xg);return t._reactRootContainer=C,t[qn]=C.current,rs(t.nodeType===8?t.parentNode:t),lr(function(){ul(i,C,s,c)}),C}function hl(t,i,s,c,f){var p=s._reactRootContainer;if(p){var v=p;if(typeof f=="function"){var T=f;f=function(){var C=cl(v);T.call(C)}}ul(i,v,t,f)}else v=ZS(s,i,t,f,c);return cl(v)}Ah=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var s=zo(i.pendingLanes);s!==0&&(Nu(i,s|1),Xt(i,st()),(He&6)===0&&(no=st()+500,Ei()))}break;case 13:lr(function(){var c=ei(t,1);if(c!==null){var f=Lt();_n(c,t,1,f)}}),id(t,1)}},Ou=function(t){if(t.tag===13){var i=ei(t,134217728);if(i!==null){var s=Lt();_n(i,t,134217728,s)}id(t,134217728)}},Ih=function(t){if(t.tag===13){var i=Oi(t),s=ei(t,i);if(s!==null){var c=Lt();_n(s,t,i,c)}id(t,i)}},wh=function(){return We},Eh=function(t,i){var s=We;try{return We=t,i()}finally{We=s}},Iu=function(t,i,s){switch(i){case"input":if(zt(t,s),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<s.length;i++){var c=s[i];if(c!==t&&c.form===t.form){var f=Oa(c);if(!f)throw Error(r(90));de(c),zt(c,f)}}}break;case"textarea":Jf(t,s);break;case"select":i=s.value,i!=null&&pi(t,!!s.multiple,i,!1)}},lh=qc,uh=lr;var QS={usingClientEntryPoint:!1,Events:[as,zr,Oa,sh,ah,qc]},As={findFiberByHostInstance:er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JS={bundleType:As.bundleType,version:As.version,rendererPackageName:As.rendererPackageName,rendererConfig:As.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hh(t),t===null?null:t.stateNode},findFiberByHostInstance:As.findFiberByHostInstance||qS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{da=pl.inject(JS),Bn=pl}catch{}}return Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QS,Kt.createPortal=function(t,i){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!od(i))throw Error(r(200));return KS(t,i,null,s)},Kt.createRoot=function(t,i){if(!od(t))throw Error(r(299));var s=!1,c="",f=bg;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=nd(t,1,!1,null,null,s,!1,c,f),t[qn]=i.current,rs(t.nodeType===8?t.parentNode:t),new rd(i)},Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=hh(i),t=t===null?null:t.stateNode,t},Kt.flushSync=function(t){return lr(t)},Kt.hydrate=function(t,i,s){if(!fl(i))throw Error(r(200));return hl(null,t,i,!0,s)},Kt.hydrateRoot=function(t,i,s){if(!od(t))throw Error(r(405));var c=s!=null&&s.hydratedSources||null,f=!1,p="",v=bg;if(s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),i=Hg(i,null,t,1,s??null,f,!1,p,v),t[qn]=i.current,rs(t),c)for(t=0;t<c.length;t++)s=c[t],f=s._getVersion,f=f(s._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[s,f]:i.mutableSourceEagerHydrationData.push(s,f);return new dl(i)},Kt.render=function(t,i,s){if(!fl(i))throw Error(r(200));return hl(null,t,i,!1,s)},Kt.unmountComponentAtNode=function(t){if(!fl(t))throw Error(r(40));return t._reactRootContainer?(lr(function(){hl(null,null,t,!1,function(){t._reactRootContainer=null,t[qn]=null})}),!0):!1},Kt.unstable_batchedUpdates=qc,Kt.unstable_renderSubtreeIntoContainer=function(t,i,s,c){if(!fl(s))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return hl(t,i,s,!1,c)},Kt.version="18.3.1-next-f1338f8080-20240426",Kt}var Kg;function uT(){if(Kg)return ld.exports;Kg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),ld.exports=lT(),ld.exports}var qg;function cT(){if(qg)return gl;qg=1;var e=uT();return gl.createRoot=e.createRoot,gl.hydrateRoot=e.hydrateRoot,gl}var dT=cT();const fT=f0(dT);class hT{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(n,r){let o=this.length++;for(;o>0;){const l=o-1>>1,a=this.values[l];if(r>=a)break;this.ids[o]=this.ids[l],this.values[o]=a,o=l}this.ids[o]=n,this.values[o]=r}pop(){if(this.length===0)return;const n=this.ids[0];if(this.length--,this.length>0){const r=this.ids[0]=this.ids[this.length],o=this.values[0]=this.values[this.length],l=this.length>>1;let a=0;for(;a<l;){let u=(a<<1)+1;const d=u+1;let h=this.ids[u],g=this.values[u];const m=this.values[d];if(d<this.length&&m<g&&(u=d,h=this.ids[d],g=m),g>=o)break;this.ids[a]=h,this.values[a]=g,a=u}this.ids[a]=r,this.values[a]=o}return n}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}const Zg=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],dd=3;class mf{static from(n,r=0){if(r%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!n||n.byteLength===void 0||n.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[o,l]=new Uint8Array(n,r+0,2);if(o!==251)throw new Error("Data does not appear to be in a Flatbush format.");const a=l>>4;if(a!==dd)throw new Error(`Got v${a} data when expected v${dd}.`);const u=Zg[l&15];if(!u)throw new Error("Unrecognized array type.");const[d]=new Uint16Array(n,r+2,1),[h]=new Uint32Array(n,r+4,1);return new mf(h,d,u,void 0,n,r)}constructor(n,r=16,o=Float64Array,l=ArrayBuffer,a,u=0){if(n===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(n)||n<=0)throw new Error(`Unexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+r,2),65535),this.byteOffset=u;let d=n,h=d;this._levelBounds=[d*4];do d=Math.ceil(d/this.nodeSize),h+=d,this._levelBounds.push(h*4);while(d!==1);this.ArrayType=o,this.IndexArrayType=h<16384?Uint16Array:Uint32Array;const g=Zg.indexOf(this.ArrayType),m=h*4*this.ArrayType.BYTES_PER_ELEMENT;if(g<0)throw new Error(`Unexpected typed array class: ${o}.`);a&&a.byteLength!==void 0&&!a.buffer?(this.data=a,this._boxes=new this.ArrayType(this.data,u+8,h*4),this._indices=new this.IndexArrayType(this.data,u+8+m,h),this._pos=h*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1]):(this.data=new l(8+m+h*this.IndexArrayType.BYTES_PER_ELEMENT),this._boxes=new this.ArrayType(this.data,8,h*4),this._indices=new this.IndexArrayType(this.data,8+m,h),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(this.data,0,2).set([251,(dd<<4)+g]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=n),this._queue=new hT}add(n,r,o=n,l=r){const a=this._pos>>2,u=this._boxes;return this._indices[a]=a,u[this._pos++]=n,u[this._pos++]=r,u[this._pos++]=o,u[this._pos++]=l,n<this.minX&&(this.minX=n),r<this.minY&&(this.minY=r),o>this.maxX&&(this.maxX=o),l>this.maxY&&(this.maxY=l),a}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const n=this._boxes;if(this.numItems<=this.nodeSize){n[this._pos++]=this.minX,n[this._pos++]=this.minY,n[this._pos++]=this.maxX,n[this._pos++]=this.maxY;return}const r=this.maxX-this.minX||1,o=this.maxY-this.minY||1,l=new Uint32Array(this.numItems),a=65535;for(let u=0,d=0;u<this.numItems;u++){const h=n[d++],g=n[d++],m=n[d++],y=n[d++],S=Math.floor(a*((h+m)/2-this.minX)/r),w=Math.floor(a*((g+y)/2-this.minY)/o);l[u]=gT(S,w)}Wd(l,n,this._indices,0,this.numItems-1,this.nodeSize);for(let u=0,d=0;u<this._levelBounds.length-1;u++){const h=this._levelBounds[u];for(;d<h;){const g=d;let m=n[d++],y=n[d++],S=n[d++],w=n[d++];for(let I=1;I<this.nodeSize&&d<h;I++)m=Math.min(m,n[d++]),y=Math.min(y,n[d++]),S=Math.max(S,n[d++]),w=Math.max(w,n[d++]);this._indices[this._pos>>2]=g,n[this._pos++]=m,n[this._pos++]=y,n[this._pos++]=S,n[this._pos++]=w}}}search(n,r,o,l,a){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let u=this._boxes.length-4;const d=[],h=[];for(;u!==void 0;){const g=Math.min(u+this.nodeSize*4,Jg(u,this._levelBounds));for(let m=u;m<g;m+=4){if(o<this._boxes[m]||l<this._boxes[m+1]||n>this._boxes[m+2]||r>this._boxes[m+3])continue;const y=this._indices[m>>2]|0;u>=this.numItems*4?d.push(y):(a===void 0||a(y))&&h.push(y)}u=d.pop()}return h}neighbors(n,r,o=1/0,l=1/0,a){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let u=this._boxes.length-4;const d=this._queue,h=[],g=l*l;e:for(;u!==void 0;){const m=Math.min(u+this.nodeSize*4,Jg(u,this._levelBounds));for(let y=u;y<m;y+=4){const S=this._indices[y>>2]|0,w=Qg(n,this._boxes[y],this._boxes[y+2]),I=Qg(r,this._boxes[y+1],this._boxes[y+3]),A=w*w+I*I;A>g||(u>=this.numItems*4?d.push(S<<1,A):(a===void 0||a(S))&&d.push((S<<1)+1,A))}for(;d.length&&d.peek()&1;)if(d.peekValue()>g||(h.push(d.pop()>>1),h.length===o))break e;u=d.length?d.pop()>>1:void 0}return d.clear(),h}}function Qg(e,n,r){return e<n?n-e:e<=r?0:e-r}function Jg(e,n){let r=0,o=n.length-1;for(;r<o;){const l=r+o>>1;n[l]>e?o=l:r=l+1}return n[r]}function Wd(e,n,r,o,l,a){if(Math.floor(o/a)>=Math.floor(l/a))return;const u=e[o+l>>1];let d=o-1,h=l+1;for(;;){do d++;while(e[d]<u);do h--;while(e[h]>u);if(d>=h)break;pT(e,n,r,d,h)}Wd(e,n,r,o,h,a),Wd(e,n,r,h+1,l,a)}function pT(e,n,r,o,l){const a=e[o];e[o]=e[l],e[l]=a;const u=4*o,d=4*l,h=n[u],g=n[u+1],m=n[u+2],y=n[u+3];n[u]=n[d],n[u+1]=n[d+1],n[u+2]=n[d+2],n[u+3]=n[d+3],n[d]=h,n[d+1]=g,n[d+2]=m,n[d+3]=y;const S=r[o];r[o]=r[l],r[l]=S}function gT(e,n){let r=e^n,o=65535^r,l=65535^(e|n),a=e&(n^65535),u=r|o>>1,d=r>>1^r,h=l>>1^o&a>>1^l,g=r&l>>1^a>>1^a;r=u,o=d,l=h,a=g,u=r&r>>2^o&o>>2,d=r&o>>2^o&(r^o)>>2,h^=r&l>>2^o&a>>2,g^=o&l>>2^(r^o)&a>>2,r=u,o=d,l=h,a=g,u=r&r>>4^o&o>>4,d=r&o>>4^o&(r^o)>>4,h^=r&l>>4^o&a>>4,g^=o&l>>4^(r^o)&a>>4,r=u,o=d,l=h,a=g,h^=r&l>>8^o&a>>8,g^=o&l>>8^(r^o)&a>>8,r=h^h>>1,o=g^g>>1;let m=e^n,y=o|65535^(m|r);return m=(m|m<<8)&16711935,m=(m|m<<4)&252645135,m=(m|m<<2)&858993459,m=(m|m<<1)&1431655765,y=(y|y<<8)&16711935,y=(y|y<<4)&252645135,y=(y|y<<2)&858993459,y=(y|y<<1)&1431655765,(y<<1|m)>>>0}function ro(e,n){if(e.length===0)return{all:()=>[],byRect:()=>[],byRadius:()=>[],byProperty:()=>[],resetPropertyCache:()=>{},count:()=>0};const r=new mf(e.length),o=new Map;for(const a of e)r.add(a.position.x,a.position.y,a.position.x,a.position.y);return r.finish(),{all(){return e},byRect(a){return r.search(a.left,a.top,a.right,a.bottom).map(d=>e[d])},byRadius(a,u){return r.neighbors(a.x,a.y,void 0,u).map(h=>e[h])},byProperty(a,u){var d;if(!o.has(a)){const h=new Map;for(const g of e){const m=g[a];h.has(m)||h.set(m,[]),h.get(m).push(g)}o.set(a,h)}return((d=o.get(a))==null?void 0:d.get(u))||[]},resetPropertyCache(){o.clear()},count(){return e.length}}}function nu(e){const n=Object.values(e.entities.entities),r=n.filter(g=>g.type==="human"),o=n.filter(g=>g.type==="berryBush"),l=n.filter(g=>g.type==="corpse"),a=n.filter(g=>g.type==="prey"),u=n.filter(g=>g.type==="predator"),d=n.filter(g=>g.type==="building");return{...e,search:{human:ro(r),berryBush:ro(o),corpse:ro(l),prey:ro(a),predator:ro(u),building:ro(d)}}}const mT="tribe-game-db",Xi="save-files",vf="tribe-game-save",Yd=1;async function yf(e){try{const n={version:Yd,savedAt:Date.now(),gameState:e},r=JSON.stringify(n),o=await yT(r);await TT(vf,o),console.log(`Game saved successfully. Size: ${(o.size/1024).toFixed(2)} KB`)}catch(n){throw console.error("Failed to save game:",n),n}}async function vT(){try{const e=await AT(vf);if(!e)return null;const n=await ST(e),r=JSON.parse(n);return r.version!==Yd?(console.warn(`Save game version mismatch. Expected ${Yd}, found ${r.version}. Discarding save.`),await jd(),null):(console.log("Game loaded successfully."),nu(r.gameState))}catch(e){return console.error("Failed to load game:",e),await jd(),null}}async function jd(){try{await IT(vf),console.log("Saved game cleared.")}catch(e){console.error("Failed to clear saved game:",e)}}async function yT(e){const r=new Blob([e]).stream().pipeThrough(new CompressionStream("gzip"));return await new Response(r).blob()}async function ST(e){const n=e.stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(n).text()}function Sf(){return new Promise((e,n)=>{const r=indexedDB.open(mT,1);r.onupgradeneeded=o=>{const l=o.target.result;l.objectStoreNames.contains(Xi)||l.createObjectStore(Xi)},r.onsuccess=()=>e(r.result),r.onerror=()=>n(r.error)})}async function TT(e,n){const r=await Sf();return new Promise((o,l)=>{const d=r.transaction(Xi,"readwrite").objectStore(Xi).put(n,e);d.onsuccess=()=>o(),d.onerror=()=>l(d.error)})}async function AT(e){const n=await Sf();return new Promise((r,o)=>{const u=n.transaction(Xi,"readonly").objectStore(Xi).get(e);u.onsuccess=()=>r(u.result),u.onerror=()=>o(u.error)})}async function IT(e){const n=await Sf();return new Promise((r,o)=>{const u=n.transaction(Xi,"readwrite").objectStore(Xi).delete(e);u.onsuccess=()=>r(),u.onerror=()=>o(u.error)})}const h0=Ce.createContext(void 0),wT=({initialAppState:e,children:n})=>{const[r,o]=Ce.useState(e),[l,a]=Ce.useState(void 0),[u,d]=Ce.useState(null),[h,g]=Ce.useState(!1);Ce.useEffect(()=>{vT().then(I=>{I&&d(I),g(!0)})},[]);const m=(I,A)=>{o(I),I==="gameOver"&&A?a(A):I!=="gameOver"&&a(void 0)},y=()=>{o("intro"),a(void 0),w()},S=I=>{yf(I),d(I)},w=()=>{jd(),d(null)};return ke.jsx(h0.Provider,{value:{appState:r,setAppState:m,returnToIntro:y,gameOverDetails:l,contextReady:h,savedGameState:u,setSavedGameState:d,saveCurrentGame:S,clearCurrentSave:w},children:n})},Do=()=>{const e=Ce.useContext(h0);if(e===void 0)throw new Error("useGameContext must be used within a GameProvider");return e};var Ft=function(){return Ft=Object.assign||function(n){for(var r,o=1,l=arguments.length;o<l;o++){r=arguments[o];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},Ft.apply(this,arguments)};function zs(e,n,r){if(r||arguments.length===2)for(var o=0,l=n.length,a;o<l;o++)(a||!(o in n))&&(a||(a=Array.prototype.slice.call(n,0,o)),a[o]=n[o]);return e.concat(a||Array.prototype.slice.call(n))}var Ke="-ms-",Ls="-moz-",$e="-webkit-",p0="comm",iu="rule",Tf="decl",ET="@import",g0="@keyframes",_T="@layer",m0=Math.abs,Af=String.fromCharCode,Vd=Object.assign;function CT(e,n){return vt(e,0)^45?(((n<<2^vt(e,0))<<2^vt(e,1))<<2^vt(e,2))<<2^vt(e,3):0}function v0(e){return e.trim()}function si(e,n){return(e=n.exec(e))?e[0]:e}function Me(e,n,r){return e.replace(n,r)}function Bl(e,n,r){return e.indexOf(n,r)}function vt(e,n){return e.charCodeAt(n)|0}function To(e,n,r){return e.slice(n,r)}function Yn(e){return e.length}function y0(e){return e.length}function Ds(e,n){return n.push(e),e}function RT(e,n){return e.map(n).join("")}function em(e,n){return e.filter(function(r){return!si(r,n)})}var ru=1,Ao=1,S0=0,vn=0,ct=0,Mo="";function ou(e,n,r,o,l,a,u,d){return{value:e,root:n,parent:r,type:o,props:l,children:a,line:ru,column:Ao,length:u,return:"",siblings:d}}function Bi(e,n){return Vd(ou("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},n)}function oo(e){for(;e.root;)e=Bi(e.root,{children:[e]});Ds(e,e.siblings)}function PT(){return ct}function NT(){return ct=vn>0?vt(Mo,--vn):0,Ao--,ct===10&&(Ao=1,ru--),ct}function Pn(){return ct=vn<S0?vt(Mo,vn++):0,Ao++,ct===10&&(Ao=1,ru++),ct}function Ar(){return vt(Mo,vn)}function Hl(){return vn}function su(e,n){return To(Mo,e,n)}function Xd(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function OT(e){return ru=Ao=1,S0=Yn(Mo=e),vn=0,[]}function DT(e){return Mo="",e}function fd(e){return v0(su(vn-1,Kd(e===91?e+2:e===40?e+1:e)))}function MT(e){for(;(ct=Ar())&&ct<33;)Pn();return Xd(e)>2||Xd(ct)>3?"":" "}function kT(e,n){for(;--n&&Pn()&&!(ct<48||ct>102||ct>57&&ct<65||ct>70&&ct<97););return su(e,Hl()+(n<6&&Ar()==32&&Pn()==32))}function Kd(e){for(;Pn();)switch(ct){case e:return vn;case 34:case 39:e!==34&&e!==39&&Kd(ct);break;case 40:e===41&&Kd(e);break;case 92:Pn();break}return vn}function FT(e,n){for(;Pn()&&e+ct!==57;)if(e+ct===84&&Ar()===47)break;return"/*"+su(n,vn-1)+"*"+Af(e===47?e:Pn())}function UT(e){for(;!Xd(Ar());)Pn();return su(e,vn)}function LT(e){return DT(Gl("",null,null,null,[""],e=OT(e),0,[0],e))}function Gl(e,n,r,o,l,a,u,d,h){for(var g=0,m=0,y=u,S=0,w=0,I=0,A=1,_=1,F=1,B=0,O="",H=l,x=a,U=o,$=O;_;)switch(I=B,B=Pn()){case 40:if(I!=108&&vt($,y-1)==58){Bl($+=Me(fd(B),"&","&\f"),"&\f",m0(g?d[g-1]:0))!=-1&&(F=-1);break}case 34:case 39:case 91:$+=fd(B);break;case 9:case 10:case 13:case 32:$+=MT(I);break;case 92:$+=kT(Hl()-1,7);continue;case 47:switch(Ar()){case 42:case 47:Ds(BT(FT(Pn(),Hl()),n,r,h),h);break;default:$+="/"}break;case 123*A:d[g++]=Yn($)*F;case 125*A:case 59:case 0:switch(B){case 0:case 125:_=0;case 59+m:F==-1&&($=Me($,/\f/g,"")),w>0&&Yn($)-y&&Ds(w>32?nm($+";",o,r,y-1,h):nm(Me($," ","")+";",o,r,y-2,h),h);break;case 59:$+=";";default:if(Ds(U=tm($,n,r,g,m,l,d,O,H=[],x=[],y,a),a),B===123)if(m===0)Gl($,n,U,U,H,a,y,d,x);else switch(S===99&&vt($,3)===110?100:S){case 100:case 108:case 109:case 115:Gl(e,U,U,o&&Ds(tm(e,U,U,0,0,l,d,O,l,H=[],y,x),x),l,x,y,d,o?H:x);break;default:Gl($,U,U,U,[""],x,0,d,x)}}g=m=w=0,A=F=1,O=$="",y=u;break;case 58:y=1+Yn($),w=I;default:if(A<1){if(B==123)--A;else if(B==125&&A++==0&&NT()==125)continue}switch($+=Af(B),B*A){case 38:F=m>0?1:($+="\f",-1);break;case 44:d[g++]=(Yn($)-1)*F,F=1;break;case 64:Ar()===45&&($+=fd(Pn())),S=Ar(),m=y=Yn(O=$+=UT(Hl())),B++;break;case 45:I===45&&Yn($)==2&&(A=0)}}return a}function tm(e,n,r,o,l,a,u,d,h,g,m,y){for(var S=l-1,w=l===0?a:[""],I=y0(w),A=0,_=0,F=0;A<o;++A)for(var B=0,O=To(e,S+1,S=m0(_=u[A])),H=e;B<I;++B)(H=v0(_>0?w[B]+" "+O:Me(O,/&\f/g,w[B])))&&(h[F++]=H);return ou(e,n,r,l===0?iu:d,h,g,m,y)}function BT(e,n,r,o){return ou(e,n,r,p0,Af(PT()),To(e,2,-2),0,o)}function nm(e,n,r,o,l){return ou(e,n,r,Tf,To(e,0,o),To(e,o+1,-1),o,l)}function T0(e,n,r){switch(CT(e,n)){case 5103:return $e+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return $e+e+e;case 4789:return Ls+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return $e+e+Ls+e+Ke+e+e;case 5936:switch(vt(e,n+11)){case 114:return $e+e+Ke+Me(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return $e+e+Ke+Me(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return $e+e+Ke+Me(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return $e+e+Ke+e+e;case 6165:return $e+e+Ke+"flex-"+e+e;case 5187:return $e+e+Me(e,/(\w+).+(:[^]+)/,$e+"box-$1$2"+Ke+"flex-$1$2")+e;case 5443:return $e+e+Ke+"flex-item-"+Me(e,/flex-|-self/g,"")+(si(e,/flex-|baseline/)?"":Ke+"grid-row-"+Me(e,/flex-|-self/g,""))+e;case 4675:return $e+e+Ke+"flex-line-pack"+Me(e,/align-content|flex-|-self/g,"")+e;case 5548:return $e+e+Ke+Me(e,"shrink","negative")+e;case 5292:return $e+e+Ke+Me(e,"basis","preferred-size")+e;case 6060:return $e+"box-"+Me(e,"-grow","")+$e+e+Ke+Me(e,"grow","positive")+e;case 4554:return $e+Me(e,/([^-])(transform)/g,"$1"+$e+"$2")+e;case 6187:return Me(Me(Me(e,/(zoom-|grab)/,$e+"$1"),/(image-set)/,$e+"$1"),e,"")+e;case 5495:case 3959:return Me(e,/(image-set\([^]*)/,$e+"$1$`$1");case 4968:return Me(Me(e,/(.+:)(flex-)?(.*)/,$e+"box-pack:$3"+Ke+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+$e+e+e;case 4200:if(!si(e,/flex-|baseline/))return Ke+"grid-column-align"+To(e,n)+e;break;case 2592:case 3360:return Ke+Me(e,"template-","")+e;case 4384:case 3616:return r&&r.some(function(o,l){return n=l,si(o.props,/grid-\w+-end/)})?~Bl(e+(r=r[n].value),"span",0)?e:Ke+Me(e,"-start","")+e+Ke+"grid-row-span:"+(~Bl(r,"span",0)?si(r,/\d+/):+si(r,/\d+/)-+si(e,/\d+/))+";":Ke+Me(e,"-start","")+e;case 4896:case 4128:return r&&r.some(function(o){return si(o.props,/grid-\w+-start/)})?e:Ke+Me(Me(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return Me(e,/(.+)-inline(.+)/,$e+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Yn(e)-1-n>6)switch(vt(e,n+1)){case 109:if(vt(e,n+4)!==45)break;case 102:return Me(e,/(.+:)(.+)-([^]+)/,"$1"+$e+"$2-$3$1"+Ls+(vt(e,n+3)==108?"$3":"$2-$3"))+e;case 115:return~Bl(e,"stretch",0)?T0(Me(e,"stretch","fill-available"),n,r)+e:e}break;case 5152:case 5920:return Me(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(o,l,a,u,d,h,g){return Ke+l+":"+a+g+(u?Ke+l+"-span:"+(d?h:+h-+a)+g:"")+e});case 4949:if(vt(e,n+6)===121)return Me(e,":",":"+$e)+e;break;case 6444:switch(vt(e,vt(e,14)===45?18:11)){case 120:return Me(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+$e+(vt(e,14)===45?"inline-":"")+"box$3$1"+$e+"$2$3$1"+Ke+"$2box$3")+e;case 100:return Me(e,":",":"+Ke)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Me(e,"scroll-","scroll-snap-")+e}return e}function Yl(e,n){for(var r="",o=0;o<e.length;o++)r+=n(e[o],o,e,n)||"";return r}function HT(e,n,r,o){switch(e.type){case _T:if(e.children.length)break;case ET:case Tf:return e.return=e.return||e.value;case p0:return"";case g0:return e.return=e.value+"{"+Yl(e.children,o)+"}";case iu:if(!Yn(e.value=e.props.join(",")))return""}return Yn(r=Yl(e.children,o))?e.return=e.value+"{"+r+"}":""}function GT(e){var n=y0(e);return function(r,o,l,a){for(var u="",d=0;d<n;d++)u+=e[d](r,o,l,a)||"";return u}}function bT(e){return function(n){n.root||(n=n.return)&&e(n)}}function xT(e,n,r,o){if(e.length>-1&&!e.return)switch(e.type){case Tf:e.return=T0(e.value,e.length,r);return;case g0:return Yl([Bi(e,{value:Me(e.value,"@","@"+$e)})],o);case iu:if(e.length)return RT(r=e.props,function(l){switch(si(l,o=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":oo(Bi(e,{props:[Me(l,/:(read-\w+)/,":"+Ls+"$1")]})),oo(Bi(e,{props:[l]})),Vd(e,{props:em(r,o)});break;case"::placeholder":oo(Bi(e,{props:[Me(l,/:(plac\w+)/,":"+$e+"input-$1")]})),oo(Bi(e,{props:[Me(l,/:(plac\w+)/,":"+Ls+"$1")]})),oo(Bi(e,{props:[Me(l,/:(plac\w+)/,Ke+"input-$1")]})),oo(Bi(e,{props:[l]})),Vd(e,{props:em(r,o)});break}return""})}}var $T={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},rn={},Io=typeof process<"u"&&rn!==void 0&&(rn.REACT_APP_SC_ATTR||rn.SC_ATTR)||"data-styled",A0="active",I0="data-styled-version",au="6.1.13",If=`/*!sc*/
`,jl=typeof window<"u"&&"HTMLElement"in window,zT=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&rn!==void 0&&rn.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&rn.REACT_APP_SC_DISABLE_SPEEDY!==""?rn.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&rn.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&rn!==void 0&&rn.SC_DISABLE_SPEEDY!==void 0&&rn.SC_DISABLE_SPEEDY!==""&&rn.SC_DISABLE_SPEEDY!=="false"&&rn.SC_DISABLE_SPEEDY),WT={},lu=Object.freeze([]),wo=Object.freeze({});function w0(e,n,r){return r===void 0&&(r=wo),e.theme!==r.theme&&e.theme||n||r.theme}var E0=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),YT=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,jT=/(^-|-$)/g;function im(e){return e.replace(YT,"-").replace(jT,"")}var VT=/(a)(d)/gi,ml=52,rm=function(e){return String.fromCharCode(e+(e>25?39:97))};function qd(e){var n,r="";for(n=Math.abs(e);n>ml;n=n/ml|0)r=rm(n%ml)+r;return(rm(n%ml)+r).replace(VT,"$1-$2")}var hd,_0=5381,ho=function(e,n){for(var r=n.length;r;)e=33*e^n.charCodeAt(--r);return e},C0=function(e){return ho(_0,e)};function R0(e){return qd(C0(e)>>>0)}function XT(e){return e.displayName||e.name||"Component"}function pd(e){return typeof e=="string"&&!0}var P0=typeof Symbol=="function"&&Symbol.for,N0=P0?Symbol.for("react.memo"):60115,KT=P0?Symbol.for("react.forward_ref"):60112,qT={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ZT={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},O0={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},QT=((hd={})[KT]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},hd[N0]=O0,hd);function om(e){return("type"in(n=e)&&n.type.$$typeof)===N0?O0:"$$typeof"in e?QT[e.$$typeof]:qT;var n}var JT=Object.defineProperty,eA=Object.getOwnPropertyNames,sm=Object.getOwnPropertySymbols,tA=Object.getOwnPropertyDescriptor,nA=Object.getPrototypeOf,am=Object.prototype;function D0(e,n,r){if(typeof n!="string"){if(am){var o=nA(n);o&&o!==am&&D0(e,o,r)}var l=eA(n);sm&&(l=l.concat(sm(n)));for(var a=om(e),u=om(n),d=0;d<l.length;++d){var h=l[d];if(!(h in ZT||r&&r[h]||u&&h in u||a&&h in a)){var g=tA(n,h);try{JT(e,h,g)}catch{}}}}return e}function Eo(e){return typeof e=="function"}function wf(e){return typeof e=="object"&&"styledComponentId"in e}function Sr(e,n){return e&&n?"".concat(e," ").concat(n):e||n||""}function Zd(e,n){if(e.length===0)return"";for(var r=e[0],o=1;o<e.length;o++)r+=e[o];return r}function Ws(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Qd(e,n,r){if(r===void 0&&(r=!1),!r&&!Ws(e)&&!Array.isArray(e))return n;if(Array.isArray(n))for(var o=0;o<n.length;o++)e[o]=Qd(e[o],n[o]);else if(Ws(n))for(var o in n)e[o]=Qd(e[o],n[o]);return e}function Ef(e,n){Object.defineProperty(e,"toString",{value:n})}function ia(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(n.length>0?" Args: ".concat(n.join(", ")):""))}var iA=function(){function e(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}return e.prototype.indexOfGroup=function(n){for(var r=0,o=0;o<n;o++)r+=this.groupSizes[o];return r},e.prototype.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var o=this.groupSizes,l=o.length,a=l;n>=a;)if((a<<=1)<0)throw ia(16,"".concat(n));this.groupSizes=new Uint32Array(a),this.groupSizes.set(o),this.length=a;for(var u=l;u<a;u++)this.groupSizes[u]=0}for(var d=this.indexOfGroup(n+1),h=(u=0,r.length);u<h;u++)this.tag.insertRule(d,r[u])&&(this.groupSizes[n]++,d++)},e.prototype.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],o=this.indexOfGroup(n),l=o+r;this.groupSizes[n]=0;for(var a=o;a<l;a++)this.tag.deleteRule(o)}},e.prototype.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var o=this.groupSizes[n],l=this.indexOfGroup(n),a=l+o,u=l;u<a;u++)r+="".concat(this.tag.getRule(u)).concat(If);return r},e}(),bl=new Map,Vl=new Map,xl=1,vl=function(e){if(bl.has(e))return bl.get(e);for(;Vl.has(xl);)xl++;var n=xl++;return bl.set(e,n),Vl.set(n,e),n},rA=function(e,n){xl=n+1,bl.set(e,n),Vl.set(n,e)},oA="style[".concat(Io,"][").concat(I0,'="').concat(au,'"]'),sA=new RegExp("^".concat(Io,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),aA=function(e,n,r){for(var o,l=r.split(","),a=0,u=l.length;a<u;a++)(o=l[a])&&e.registerName(n,o)},lA=function(e,n){for(var r,o=((r=n.textContent)!==null&&r!==void 0?r:"").split(If),l=[],a=0,u=o.length;a<u;a++){var d=o[a].trim();if(d){var h=d.match(sA);if(h){var g=0|parseInt(h[1],10),m=h[2];g!==0&&(rA(m,g),aA(e,m,h[3]),e.getTag().insertRules(g,l)),l.length=0}else l.push(d)}}},lm=function(e){for(var n=document.querySelectorAll(oA),r=0,o=n.length;r<o;r++){var l=n[r];l&&l.getAttribute(Io)!==A0&&(lA(e,l),l.parentNode&&l.parentNode.removeChild(l))}};function uA(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var M0=function(e){var n=document.head,r=e||n,o=document.createElement("style"),l=function(d){var h=Array.from(d.querySelectorAll("style[".concat(Io,"]")));return h[h.length-1]}(r),a=l!==void 0?l.nextSibling:null;o.setAttribute(Io,A0),o.setAttribute(I0,au);var u=uA();return u&&o.setAttribute("nonce",u),r.insertBefore(o,a),o},cA=function(){function e(n){this.element=M0(n),this.element.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var o=document.styleSheets,l=0,a=o.length;l<a;l++){var u=o[l];if(u.ownerNode===r)return u}throw ia(17)}(this.element),this.length=0}return e.prototype.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},e.prototype.getRule=function(n){var r=this.sheet.cssRules[n];return r&&r.cssText?r.cssText:""},e}(),dA=function(){function e(n){this.element=M0(n),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(n,r){if(n<=this.length&&n>=0){var o=document.createTextNode(r);return this.element.insertBefore(o,this.nodes[n]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},e.prototype.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},e}(),fA=function(){function e(n){this.rules=[],this.length=0}return e.prototype.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},e.prototype.deleteRule=function(n){this.rules.splice(n,1),this.length--},e.prototype.getRule=function(n){return n<this.length?this.rules[n]:""},e}(),um=jl,hA={isServer:!jl,useCSSOMInjection:!zT},Xl=function(){function e(n,r,o){n===void 0&&(n=wo),r===void 0&&(r={});var l=this;this.options=Ft(Ft({},hA),n),this.gs=r,this.names=new Map(o),this.server=!!n.isServer,!this.server&&jl&&um&&(um=!1,lm(this)),Ef(this,function(){return function(a){for(var u=a.getTag(),d=u.length,h="",g=function(y){var S=function(F){return Vl.get(F)}(y);if(S===void 0)return"continue";var w=a.names.get(S),I=u.getGroup(y);if(w===void 0||!w.size||I.length===0)return"continue";var A="".concat(Io,".g").concat(y,'[id="').concat(S,'"]'),_="";w!==void 0&&w.forEach(function(F){F.length>0&&(_+="".concat(F,","))}),h+="".concat(I).concat(A,'{content:"').concat(_,'"}').concat(If)},m=0;m<d;m++)g(m);return h}(l)})}return e.registerId=function(n){return vl(n)},e.prototype.rehydrate=function(){!this.server&&jl&&lm(this)},e.prototype.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new e(Ft(Ft({},this.options),n),this.gs,r&&this.names||void 0)},e.prototype.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(n=function(r){var o=r.useCSSOMInjection,l=r.target;return r.isServer?new fA(l):o?new cA(l):new dA(l)}(this.options),new iA(n)));var n},e.prototype.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},e.prototype.registerName=function(n,r){if(vl(n),this.names.has(n))this.names.get(n).add(r);else{var o=new Set;o.add(r),this.names.set(n,o)}},e.prototype.insertRules=function(n,r,o){this.registerName(n,r),this.getTag().insertRules(vl(n),o)},e.prototype.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},e.prototype.clearRules=function(n){this.getTag().clearGroup(vl(n)),this.clearNames(n)},e.prototype.clearTag=function(){this.tag=void 0},e}(),pA=/&/g,gA=/^\s*\/\/.*$/gm;function k0(e,n){return e.map(function(r){return r.type==="rule"&&(r.value="".concat(n," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(n," ")),r.props=r.props.map(function(o){return"".concat(n," ").concat(o)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=k0(r.children,n)),r})}function mA(e){var n,r,o,l=wo,a=l.options,u=a===void 0?wo:a,d=l.plugins,h=d===void 0?lu:d,g=function(S,w,I){return I.startsWith(r)&&I.endsWith(r)&&I.replaceAll(r,"").length>0?".".concat(n):S},m=h.slice();m.push(function(S){S.type===iu&&S.value.includes("&")&&(S.props[0]=S.props[0].replace(pA,r).replace(o,g))}),u.prefix&&m.push(xT),m.push(HT);var y=function(S,w,I,A){w===void 0&&(w=""),I===void 0&&(I=""),A===void 0&&(A="&"),n=A,r=w,o=new RegExp("\\".concat(r,"\\b"),"g");var _=S.replace(gA,""),F=LT(I||w?"".concat(I," ").concat(w," { ").concat(_," }"):_);u.namespace&&(F=k0(F,u.namespace));var B=[];return Yl(F,GT(m.concat(bT(function(O){return B.push(O)})))),B};return y.hash=h.length?h.reduce(function(S,w){return w.name||ia(15),ho(S,w.name)},_0).toString():"",y}var vA=new Xl,Jd=mA(),F0=jn.createContext({shouldForwardProp:void 0,styleSheet:vA,stylis:Jd});F0.Consumer;jn.createContext(void 0);function ef(){return Ce.useContext(F0)}var yA=function(){function e(n,r){var o=this;this.inject=function(l,a){a===void 0&&(a=Jd);var u=o.name+a.hash;l.hasNameForId(o.id,u)||l.insertRules(o.id,u,a(o.rules,u,"@keyframes"))},this.name=n,this.id="sc-keyframes-".concat(n),this.rules=r,Ef(this,function(){throw ia(12,String(o.name))})}return e.prototype.getName=function(n){return n===void 0&&(n=Jd),this.name+n.hash},e}(),SA=function(e){return e>="A"&&e<="Z"};function cm(e){for(var n="",r=0;r<e.length;r++){var o=e[r];if(r===1&&o==="-"&&e[0]==="-")return e;SA(o)?n+="-"+o.toLowerCase():n+=o}return n.startsWith("ms-")?"-"+n:n}var U0=function(e){return e==null||e===!1||e===""},L0=function(e){var n,r,o=[];for(var l in e){var a=e[l];e.hasOwnProperty(l)&&!U0(a)&&(Array.isArray(a)&&a.isCss||Eo(a)?o.push("".concat(cm(l),":"),a,";"):Ws(a)?o.push.apply(o,zs(zs(["".concat(l," {")],L0(a),!1),["}"],!1)):o.push("".concat(cm(l),": ").concat((n=l,(r=a)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||n in $T||n.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return o};function ji(e,n,r,o){if(U0(e))return[];if(wf(e))return[".".concat(e.styledComponentId)];if(Eo(e)){if(!Eo(a=e)||a.prototype&&a.prototype.isReactComponent||!n)return[e];var l=e(n);return ji(l,n,r,o)}var a;return e instanceof yA?r?(e.inject(r,o),[e.getName(o)]):[e]:Ws(e)?L0(e):Array.isArray(e)?Array.prototype.concat.apply(lu,e.map(function(u){return ji(u,n,r,o)})):[e.toString()]}function B0(e){for(var n=0;n<e.length;n+=1){var r=e[n];if(Eo(r)&&!wf(r))return!1}return!0}var TA=C0(au),AA=function(){function e(n,r,o){this.rules=n,this.staticRulesId="",this.isStatic=(o===void 0||o.isStatic)&&B0(n),this.componentId=r,this.baseHash=ho(TA,r),this.baseStyle=o,Xl.registerId(r)}return e.prototype.generateAndInjectStyles=function(n,r,o){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(n,r,o):"";if(this.isStatic&&!o.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))l=Sr(l,this.staticRulesId);else{var a=Zd(ji(this.rules,n,r,o)),u=qd(ho(this.baseHash,a)>>>0);if(!r.hasNameForId(this.componentId,u)){var d=o(a,".".concat(u),void 0,this.componentId);r.insertRules(this.componentId,u,d)}l=Sr(l,u),this.staticRulesId=u}else{for(var h=ho(this.baseHash,o.hash),g="",m=0;m<this.rules.length;m++){var y=this.rules[m];if(typeof y=="string")g+=y;else if(y){var S=Zd(ji(y,n,r,o));h=ho(h,S+m),g+=S}}if(g){var w=qd(h>>>0);r.hasNameForId(this.componentId,w)||r.insertRules(this.componentId,w,o(g,".".concat(w),void 0,this.componentId)),l=Sr(l,w)}}return l},e}(),_f=jn.createContext(void 0);_f.Consumer;var gd={};function IA(e,n,r){var o=wf(e),l=e,a=!pd(e),u=n.attrs,d=u===void 0?lu:u,h=n.componentId,g=h===void 0?function(H,x){var U=typeof H!="string"?"sc":im(H);gd[U]=(gd[U]||0)+1;var $="".concat(U,"-").concat(R0(au+U+gd[U]));return x?"".concat(x,"-").concat($):$}(n.displayName,n.parentComponentId):h,m=n.displayName,y=m===void 0?function(H){return pd(H)?"styled.".concat(H):"Styled(".concat(XT(H),")")}(e):m,S=n.displayName&&n.componentId?"".concat(im(n.displayName),"-").concat(n.componentId):n.componentId||g,w=o&&l.attrs?l.attrs.concat(d).filter(Boolean):d,I=n.shouldForwardProp;if(o&&l.shouldForwardProp){var A=l.shouldForwardProp;if(n.shouldForwardProp){var _=n.shouldForwardProp;I=function(H,x){return A(H,x)&&_(H,x)}}else I=A}var F=new AA(r,S,o?l.componentStyle:void 0);function B(H,x){return function(U,$,J){var Ee=U.attrs,_e=U.componentStyle,be=U.defaultProps,Pe=U.foldedComponentIds,Re=U.styledComponentId,ce=U.target,Ue=jn.useContext(_f),Se=ef(),te=U.shouldForwardProp||Se.shouldForwardProp,W=w0($,Ue,be)||wo,V=function(ge,se,Ie){for(var Ae,q=Ft(Ft({},se),{className:void 0,theme:Ie}),ie=0;ie<ge.length;ie+=1){var Le=Eo(Ae=ge[ie])?Ae(q):Ae;for(var de in Le)q[de]=de==="className"?Sr(q[de],Le[de]):de==="style"?Ft(Ft({},q[de]),Le[de]):Le[de]}return se.className&&(q.className=Sr(q.className,se.className)),q}(Ee,$,W),Y=V.as||ce,R={};for(var L in V)V[L]===void 0||L[0]==="$"||L==="as"||L==="theme"&&V.theme===W||(L==="forwardedAs"?R.as=V.forwardedAs:te&&!te(L,Y)||(R[L]=V[L]));var X=function(ge,se){var Ie=ef(),Ae=ge.generateAndInjectStyles(se,Ie.styleSheet,Ie.stylis);return Ae}(_e,V),ne=Sr(Pe,Re);return X&&(ne+=" "+X),V.className&&(ne+=" "+V.className),R[pd(Y)&&!E0.has(Y)?"class":"className"]=ne,R.ref=J,Ce.createElement(Y,R)}(O,H,x)}B.displayName=y;var O=jn.forwardRef(B);return O.attrs=w,O.componentStyle=F,O.displayName=y,O.shouldForwardProp=I,O.foldedComponentIds=o?Sr(l.foldedComponentIds,l.styledComponentId):"",O.styledComponentId=S,O.target=o?l.target:e,Object.defineProperty(O,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(H){this._foldedDefaultProps=o?function(x){for(var U=[],$=1;$<arguments.length;$++)U[$-1]=arguments[$];for(var J=0,Ee=U;J<Ee.length;J++)Qd(x,Ee[J],!0);return x}({},l.defaultProps,H):H}}),Ef(O,function(){return".".concat(O.styledComponentId)}),a&&D0(O,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),O}function dm(e,n){for(var r=[e[0]],o=0,l=n.length;o<l;o+=1)r.push(n[o],e[o+1]);return r}var fm=function(e){return Object.assign(e,{isCss:!0})};function H0(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(Eo(e)||Ws(e))return fm(ji(dm(lu,zs([e],n,!0))));var o=e;return n.length===0&&o.length===1&&typeof o[0]=="string"?ji(o):fm(ji(dm(o,n)))}function tf(e,n,r){if(r===void 0&&(r=wo),!n)throw ia(1,n);var o=function(l){for(var a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];return e(n,r,H0.apply(void 0,zs([l],a,!1)))};return o.attrs=function(l){return tf(e,n,Ft(Ft({},r),{attrs:Array.prototype.concat(r.attrs,l).filter(Boolean)}))},o.withConfig=function(l){return tf(e,n,Ft(Ft({},r),l))},o}var G0=function(e){return tf(IA,e)},yn=G0;E0.forEach(function(e){yn[e]=G0(e)});var wA=function(){function e(n,r){this.rules=n,this.componentId=r,this.isStatic=B0(n),Xl.registerId(this.componentId+1)}return e.prototype.createStyles=function(n,r,o,l){var a=l(Zd(ji(this.rules,r,o,l)),""),u=this.componentId+n;o.insertRules(u,u,a)},e.prototype.removeStyles=function(n,r){r.clearRules(this.componentId+n)},e.prototype.renderStyles=function(n,r,o,l){n>2&&Xl.registerId(this.componentId+n),this.removeStyles(n,o),this.createStyles(n,r,o,l)},e}();function EA(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=H0.apply(void 0,zs([e],n,!1)),l="sc-global-".concat(R0(JSON.stringify(o))),a=new wA(o,l),u=function(h){var g=ef(),m=jn.useContext(_f),y=jn.useRef(g.styleSheet.allocateGSInstance(l)).current;return g.styleSheet.server&&d(y,h,g.styleSheet,m,g.stylis),jn.useLayoutEffect(function(){if(!g.styleSheet.server)return d(y,h,g.styleSheet,m,g.stylis),function(){return a.removeStyles(y,g.styleSheet)}},[y,h,g.styleSheet,m,g.stylis]),null};function d(h,g,m,y,S){if(a.isStatic)a.renderStyles(h,WT,m,S);else{var w=Ft(Ft({},g),{theme:w0(g,y,u.defaultProps)});a.renderStyles(h,w,m,S)}}return jn.memo(u)}function b0(e,n){var r=Ce.useRef(null),o=Ce.useRef(!1),l=Ce.useRef(e);l.current=e;var a=Ce.useCallback(function(d){o.current&&(l.current(d),r.current=requestAnimationFrame(a))},[]),u=Ce.useMemo(function(){return[function(){o.current&&(o.current=!1,r.current&&cancelAnimationFrame(r.current))},function(){o.current||(o.current=!0,r.current=requestAnimationFrame(a))},function(){return o.current}]},[]);return Ce.useEffect(function(){return u[0]},[]),u}function _A(e,n,r,o,l){var u;(u=e.onExit)==null||u.call(e,o,n);const a=l.find(({id:d})=>d===n);return a!=null&&a.onEnter?a.onEnter(o,r):{...r,enteredAt:o.updateContext.gameState.time}}function CA(e,n){return n.find(({id:r})=>r===e)}function RA(e,n){return e!==n}function PA(e){console.warn(`No handler found for state: ${e}`)}const Bs="bushGrowing",yr="bushFull",$l="bushSpreading",Ys="bushDying",yt=24,St=10,et=3e3,tt=3e3,Cf=2,NA=15,OA=5e3,ui=100,ci=20,di=60,DA=1e3,MA=5,kA=3,FA=12,UA=940,nf=20,hm=90,x0=45,$0=240,_o=5,LA=.5,pm=100,BA=300,Ki=30,fi=.1,Ms=.9,Ge=1,Tr=3,HA=70;function Oe(e,n,r,o,l){const a={id:e.nextVisualEffectId,type:n,position:r,startTime:e.time,duration:o,entityId:l};return e.visualEffects.push(a),e.nextVisualEffectId++,a.id}var le=(e=>(e[e.Hunger=0]="Hunger",e[e.Procreation=1]="Procreation",e[e.Pregnant=2]="Pregnant",e[e.TargetAcquired=3]="TargetAcquired",e[e.Attack=4]="Attack",e[e.Partnered=5]="Partnered",e[e.BushClaimed=6]="BushClaimed",e[e.BushClaimLost=7]="BushClaimLost",e[e.Eating=8]="Eating",e[e.ChildFed=9]="ChildFed",e[e.AttackDeflected=10]="AttackDeflected",e[e.AttackResisted=11]="AttackResisted",e[e.Hit=12]="Hit",e[e.SeizeBuildup=13]="SeizeBuildup",e[e.Seize=14]="Seize",e[e.CallToAttack=15]="CallToAttack",e[e.CallToFollow=16]="CallToFollow",e[e.AutopilotMoveTarget=17]="AutopilotMoveTarget",e))(le||{}),Xn=(e=>(e.Berry="berry",e.Meat="meat",e))(Xn||{});const z0={berry:"",meat:""},GA={id:Bs,update:(e,n)=>{const{entity:r,updateContext:o}=n,l=o.deltaTime*(yt/St);return r.age+=l,r.age>=r.lifespan?{nextState:Ys,data:{...e,enteredAt:o.gameState.time}}:(r.ownerId&&r.claimedUntil&&o.gameState.time>r.claimedUntil&&(Oe(o.gameState,le.BushClaimLost,r.position,Ge),r.ownerId=void 0,r.claimedUntil=void 0),r.timeSinceLastBerryRegen+=l,r.timeSinceLastBerryRegen>=FA&&r.food.length<r.maxFood&&(r.food.push({type:Xn.Berry}),r.timeSinceLastBerryRegen=0),r.food.length>=r.maxFood?{nextState:yr,data:{...e,enteredAt:o.gameState.time,previousState:Bs}}:{nextState:Bs,data:e})},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},bA={id:yr,update:(e,n)=>{const{entity:r,updateContext:o}=n,l=o.deltaTime*(yt/St);return r.age+=l,r.age>=r.lifespan?{nextState:Ys,data:{...e,enteredAt:o.gameState.time,previousState:yr}}:r.food.length<r.maxFood?{nextState:Bs,data:{...e,enteredAt:o.gameState.time,previousState:yr}}:(r.ownerId&&r.claimedUntil&&o.gameState.time>r.claimedUntil&&(Oe(o.gameState,le.BushClaimLost,r.position,Ge),r.ownerId=void 0,r.claimedUntil=void 0),r.timeSinceLastSpreadAttempt+=l,r.timeSinceLastSpreadAttempt>=hm&&(r.timeSinceLastSpreadAttempt=0,o.gameState.time-r.timeSinceLastHarvest>=hm&&Math.random()<o.gameState.ecosystem.berryBushSpreadChance)?{nextState:$l,data:{...e,enteredAt:o.gameState.time,previousState:yr}}:{nextState:yr,data:e})},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},js=1,gm=150*.6,xA=150*.25,$A=150*.7,zA=150*.8,mm=300,WA=600,W0=100,YA=250,jA=120,VA=2,XA=400,KA=1e3,qA=150*.85,ZA=100,QA=3,JA=96,eI=24,tI=600,Y0=600,nI=1,iI=24,rI=1,oI=.5,sI=2,rf=24,of=12,aI=24,vm=24,lI=1500,md=500,uI=400,cI=10,dI=-5,fI=1.5,hI=1.5,pI=1.2,gI=10,mI=150,vI=200,yI=100,SI=100,TI=.7,AI=300,II=100,wI=120,ym=400,j0=.15,V0=200,zl=30*.75*1.2,EI=20,uu=10,Vs=80,_I=3,ws=5,Pr=150,X0=Pr*.8,CI=Pr*.2,Nr=Pr*.95,qi=30,K0=10,RI=10,PI=.5,Tt=30,Or=Tt*.75,q0=50,NI=20,OI=Vs*.8,DI=.7,MI=16,Z0=40,kI=24,Rf=16,FI=72/3,Sm=24,UI=1.25,LI=1.5,Pf=Pr*.6,Nf=50,BI=1,HI=350,Q0=Vs*.65,GI=80,bI=50,xI=1,$I=128,J0=10,Tm=100,Of=35,Vn=Tt,ev=.5,cu=2.5,zI=5,Df=.5,Mf=1.5,WI=.1,YI=.5,jI=1.5,VI=.25,XI=2.5,KI=45,qI=.05;function Nn(e,n){return{x:e.x+n.x,y:e.y+n.y}}function tv(e,n){return{x:e.x-n.x,y:e.y-n.y}}function Rt(e,n){return{x:e.x*n,y:e.y*n}}function Co(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function nt(e){const n=Co(e);return n===0?{x:0,y:0}:Rt(e,1/n)}function ZI(e,n){return Co(tv(e,n))}function kf(e,n,r){return{x:e.x+(n.x-e.x)*r,y:e.y+(n.y-e.y)*r}}function Ff(e){if(e.length===0)return{x:0,y:0};const n=e.reduce((r,o)=>({x:r.x+o.x,y:r.y+o.y}),{x:0,y:0});return{x:n.x/e.length,y:n.y/e.length}}function ze(e,n,r,o){let l=n.x-e.x,a=n.y-e.y;return Math.abs(l)>r/2&&(l=l-Math.sign(l)*r),Math.abs(a)>o/2&&(a=a-Math.sign(a)*o),{x:l,y:a}}function qt(e,n,r){const o=ze(e,n,r.width,r.height);return nt(o)}function K(e,n,r,o){const l=ze(e,n,r,o);return Co(l)}function QI(e,n){return e.x*n.x+e.y*n.y}function JI(e,n){const r=QI(e,n),o=Co(e),l=Co(n);if(o===0||l===0)return 0;const a=Math.max(-1,Math.min(1,r/(o*l)));return Math.acos(a)}function ew(e,n,r){const o=Math.max(0,Math.min(1,r)),l={r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)},a={r:parseInt(n.substring(1,3),16),g:parseInt(n.substring(3,5),16),b:parseInt(n.substring(5,7),16)},u=Math.round(l.r+(a.r-l.r)*o),d=Math.round(l.g+(a.g-l.g)*o),h=Math.round(l.b+(a.b-l.b)*o),g=m=>("00"+m.toString(16)).slice(-2);return`#${g(u)}${g(d)}${g(h)}`}var xt=(e=>(e.Friendly="Friendly",e.Hostile="Hostile",e))(xt||{}),_t=(e=>(e[e.None=0]="None",e[e.General=1]="General",e[e.Performance=2]="Performance",e[e.Ecosystem=3]="Ecosystem",e))(_t||{});function Am(e,n,r){return n.search.human.byRadius(e.position,r).filter(a=>{if(a.id===e.id||a.gender===e.gender||!a.isAdult||a.hunger>=Nr||(a.procreationCooldown||0)>0||a.gender==="female"&&a.isPregnant)return!1;const u=a.id===e.motherId||a.id===e.fatherId,d=e.id===a.motherId||e.id===a.fatherId;return!u&&!d})}function hi(e){if(e.length===0)return;const n=e.filter(l=>l.gender==="male"),r=e.filter(l=>l.gender==="female"),o=(l,a)=>l.age!==a.age?a.age-l.age:l.id-a.id;if(n.sort(o),n.length>0)return n[0];if(r.sort(o),r.length>0)return r[0]}function Pt(e,n){const r=e,o=r.search.human.byProperty("motherId",n.id),l=r.search.human.byProperty("fatherId",n.id);return[...o,...l]}function nv(e,n,r){var l;if(e.id===n.id||e.motherId===n.id||e.fatherId===n.id||n.motherId===e.id||n.fatherId===e.id||e.motherId&&e.motherId===n.motherId||e.fatherId&&e.fatherId===n.fatherId||(l=e.partnerIds)!=null&&l.includes(n.id))return!0;if(e.motherId){const a=r.entities.entities[e.motherId];if(a&&(a.motherId===n.id||a.fatherId===n.id))return!0}if(e.fatherId){const a=r.entities.entities[e.fatherId];if(a&&(a.motherId===n.id||a.fatherId===n.id))return!0}if(n.motherId){const a=r.entities.entities[n.motherId];if(a&&(a.motherId===e.id||a.fatherId===e.id))return!0}if(n.fatherId){const a=r.entities.entities[n.fatherId];if(a&&(a.motherId===e.id||a.fatherId===e.id))return!0}return!1}function sf(e,n){var a,u,d,h;if(e.id===n.id||e.motherId===n.id||e.fatherId===n.id||n.motherId===e.id||n.fatherId===e.id||(a=e.partnerIds)!=null&&a.includes(n.id)||(u=n.partnerIds)!=null&&u.includes(e.id))return!0;if(e.fatherId===void 0&&e.motherId===void 0||n.fatherId===void 0&&n.motherId===void 0)return!1;const r=e.motherId===n.motherId||e.fatherId===n.fatherId,o=n.motherId===e.motherId||n.fatherId===e.fatherId,l=((d=e.ancestorIds)==null?void 0:d.some(g=>n.ancestorIds.includes(g)))||((h=n.ancestorIds)==null?void 0:h.some(g=>e.ancestorIds.includes(g)));return r||o||l}function tw(e,n){const r=[];if(e.motherId){const o=n.entities.entities[e.motherId];o&&r.push(o)}if(e.fatherId){const o=n.entities.entities[e.fatherId];o&&r.push(o)}return r}function nw(e,n){if(e.gender!=="female"||!e.partnerIds||e.partnerIds.length===0)return null;for(const r of e.partnerIds){const o=n.entities.entities[r];if(o&&o.gender==="male")return o}return null}function iw(e,n){var r;if(!e.isAdult&&e.fatherId){const o=n.entities.entities[e.fatherId];if(o&&o.type==="human")return o}if(e.isAdult&&e.fatherId){const o=n.entities.entities[e.fatherId];if(o&&o.type==="human"&&((r=hi(Pt(n,o)))==null?void 0:r.id)===e.id)return o}return e.isAdult&&e.gender==="female"&&e.partnerIds&&e.partnerIds.length>0?nw(e,n):null}function Kl(e,n){var o;const r=new Set;if(e.motherId){const l=n.entities.entities[e.motherId];l&&r.add(l)}if(e.fatherId){const l=n.entities.entities[e.fatherId];l&&r.add(l)}return(o=e.partnerIds)==null||o.forEach(l=>{const a=n.entities.entities[l];a&&r.add(a)}),Pt(n,e).forEach(l=>r.add(l)),Array.from(r)}function iv(e,n){const r=new Map;function o(l){const a=Pt(n,l);for(const u of a)r.has(u.id)||(r.set(u.id,u),o(u))}return o(e),Array.from(r.values())}function Xs(e,n){return n.search.human.byProperty("leaderId",e)}function rv(e,n){var u,d;const r=new Map,o=Object.values(e.entities.entities).filter(h=>h.type==="human");for(const h of o)h.leaderId&&(r.has(h.leaderId)||r.set(h.leaderId,{leaderId:h.leaderId,tribeBadge:h.tribeBadge||"?",members:[]}),(u=r.get(h.leaderId))==null||u.members.push(h));const l=n?(d=e.entities.entities[n])==null?void 0:d.diplomacy:void 0,a=Array.from(r.values()).map(h=>{const g=e.entities.entities[h.leaderId],m=h.members.filter(S=>S.isAdult).length,y=h.members.length-m;return{leaderId:h.leaderId,tribeBadge:h.tribeBadge,adultCount:m,childCount:y,isPlayerTribe:h.leaderId===n,leaderAge:(g==null?void 0:g.age)??0,leaderGender:(g==null?void 0:g.gender)??"male",diplomacyStatus:(l==null?void 0:l[h.leaderId??-1])??xt.Friendly}});return a.sort((h,g)=>h.isPlayerTribe?-1:g.isPlayerTribe?1:g.adultCount+g.childCount-(h.adultCount+h.childCount)),a}function Fe(e,n,r,o,l){const a=n,u=o,d="position"in e&&e.id?e:null,h=d?d.position:e,g=a.search[r].byRadius(h,u);let m=null,y=u;for(const S of g){if(S.id===(d==null?void 0:d.id)||l&&!l(S))continue;const w=K(h,S.position,n.mapDimensions.width,n.mapDimensions.height);w<y&&(y=w,m=S)}return m}function ov(e,n,r,o){return n.search[r].byRadius(e,o)}function sv(e,n,r,o){return ov(e,n,r,o).length}function At(e){const r=e.search.human.byProperty("isPlayer",!0);return r.length>0?r[0]:void 0}function rw(e,n){var u;const o=n.search.human.byProperty("activeAction","attacking");let l=null,a=1/0;for(const d of o){if(d.attackTargetId!==e)continue;const h=K(d.position,((u=n.entities.entities[e])==null?void 0:u.position)||{x:0,y:0},n.mapDimensions.width,n.mapDimensions.height);h<a&&(l=d,a=h)}return l}function ow(e){return Object.values(e.entities.entities).filter(n=>n.type==="human")}function sw(e,n,r){const o=Object.values(n.entities.entities).reverse();for(const l of o)if(ZI(e,l.position)<l.radius)return l}function Uf(e,n,r,o){const l=Math.random()*Math.PI*2,a=Math.sqrt(Math.random())*n,u={x:Math.cos(l)*a,y:Math.sin(l)*a},d=Nn(e,u);return{x:(d.x%r+r)%r,y:(d.y%o+o)%o}}function On(e,n,r,o){const l=n,a={left:e.x-r,top:e.y-r,right:e.x+r,bottom:e.y+r},u=[...l.search.human.byRect(a),...l.search.berryBush.byRect(a),...l.search.corpse.byRect(a)];for(const d of u){if(o!==void 0&&d.id===o)continue;if(K(e,d.position,n.mapDimensions.width,n.mapDimensions.height)<r+d.radius)return!0}return!1}function av(e,n,r,o,l){const a=n.mapDimensions.width,u=n.mapDimensions.height;if(!On(e,n,o,l))return e;const d=o;for(let h=d;h<=r;h+=d){const g=Math.ceil(2*Math.PI*h/d);for(let m=0;m<g;m++){const y=m/g*2*Math.PI,S={x:Math.cos(y)*h,y:Math.sin(y)*h},w=Nn(e,S),I={x:(w.x%a+a)%a,y:(w.y%u+u)%u};if(!On(I,n,o,l))return I}}return null}function Dr(e,n){const r=Xs(e,n);if(r.length===0){const l=n.entities.entities[e];return l?l.position:{x:0,y:0}}const o=r.map(l=>l.position);return Ff(o)}function Im(e,n){const o=[...Kl(e,n),e].map(l=>l.position);return Ff(o)}function aw(e,n,r){return cv(n,r).some(a=>uv(e,a,r))?!On(e,r,Ki):!1}const af={StorageSpot:"storageSpot",PlantingZone:"plantingZone"},ra={[af.StorageSpot]:{name:"Storage Spot",description:"A designated area for storing excess food.",icon:"",dimensions:{width:40,height:40},constructionTimeHours:.1,destructionTimeHours:.1,cost:{}},[af.PlantingZone]:{name:"Planting Zone",description:"An area marked for agricultural use.",icon:"",dimensions:{width:60,height:60},constructionTimeHours:.1,destructionTimeHours:.1,cost:{}}},lw=.5,uw="#FFA500",cw="#FF4500",wm=4,dw=10;function lv(e){return ra[e].dimensions}function fw(e){return ra[e].constructionTimeHours}function hw(e){return ra[e].destructionTimeHours}function pw(e,n,r){return n.search.human.byRadius(e.position,r).filter(l=>{var a;return l.activeAction==="procreating"&&l.gender===e.gender&&typeof l.target=="number"&&((a=e.partnerIds)==null?void 0:a.includes(l.target))})[0]}function gw(e,n,r){if(!e.leaderId)return;const o=n,l=o.search.berryBush.byRadius(e.position,r).filter(a=>a.ownerId===e.id);for(const a of l)if(a.claimedUntil&&n.time<a.claimedUntil){const u=o.search.human.byRadius(a.position,Tt);for(const d of u)if(!sf(d,e)&&d.activeAction==="gathering"&&d.target===a.id)return d}}function mw(e,n,r){const o=Kl(e,n),l=n;for(const a of o){if(K(e.position,a.position,n.mapDimensions.width,n.mapDimensions.height)>r)continue;const d=l.search.human.byProperty("attackTargetId",a.id);for(const h of d)if(h.leaderId!==e.leaderId)return{familyMember:a,aggressor:h}}}function vw(e,n){const o=n.search.human.byRadius(e.position,AI);let l,a=1/0;for(const u of o){if(u.id===e.id||u.hitpoints<=0||u.hitpoints/u.maxHitpoints>TI||nv(e,u,n))continue;const d=K(e.position,u.position,n.mapDimensions.width,n.mapDimensions.height);d<a&&(a=d,l=u)}return l}function yw(e,n){const r=Fe(e,n,"berryBush",pm,l=>l.ownerId===e.id);return r?av(r.position,n,pm,Ki,r.id):null}function Lf(e,n,r){return n.search.human.byRadius(e.position,r).filter(l=>Fo(e,l,n))}function Sw(e,n,r){const o=r.search.human.byProperty("leaderId",e);let l=0;for(const a of o)a.attackTargetId===n&&l++;return l}function Em(e,n,r,o){const l=r.search.berryBush.byRadius(e,n),a=r.search.human.byRadius(e,n).filter(h=>h.leaderId!==o);let u=l.length*cI;u+=a.length*dI;let d;if(a.length>0){const h={};for(const m of a)m.leaderId&&(h[m.leaderId]=(h[m.leaderId]||0)+1);let g=0;for(const m in h)h[m]>g&&(g=h[m],d=parseInt(m,10))}return{score:u,occupyingTribeId:d}}function ql(e){return e.filter(n=>n.isAdult).reduce((n,r)=>{let o=r.hitpoints;return o+=(r.maxAge-r.age)*.5,o+=r.food.length*2,n+o},0)}function Tw(e,n){if(e.id!==e.leaderId)return null;const r=n,o=Dr(e.id,n),{score:l}=Em(o,md/2,r,e.id);let a=null,u=l;const d=uI,h=lI;for(let g=e.position.x-h;g<e.position.x+h;g+=d)for(let m=e.position.y-h;m<e.position.y+h;m+=d){const y={x:(g%n.mapDimensions.width+n.mapDimensions.width)%n.mapDimensions.width,y:(m%n.mapDimensions.height+n.mapDimensions.height)%n.mapDimensions.height};if(K(o,y,n.mapDimensions.width,n.mapDimensions.height)<md*2)continue;const{score:w}=Em(y,md/2,r,e.id);w>u*fI&&(u=w,a=y)}return a}function uv(e,n,r){const o=r.mapDimensions.width,l=r.mapDimensions.height;let a=e.x-n.position.x,u=e.y-n.position.y;return Math.abs(a)>o/2&&(a-=Math.sign(a)*o),Math.abs(u)>l/2&&(u-=Math.sign(u)*l),Math.abs(a)<=n.width/2&&Math.abs(u)<=n.height/2}function Aw(e){const n=Ki*2,r=Math.floor(e.width/n),o=Math.floor(e.height/n);return Math.max(1,r*o)}function Iw(e,n){const r=n,o=Math.sqrt(e.width*e.width+e.height*e.height)/2;return r.search.berryBush.byRadius(e.position,o).filter(a=>uv(a.position,e,n)).length}function cv(e,n){return e.leaderId?n.search.building.all().filter(l=>{if(l.buildingType!==af.PlantingZone)return!1;if(l.ownerId){const a=n.entities.entities[l.ownerId];return a&&a.leaderId===e.leaderId}return!1}):[]}function ww(e,n){const r=cv(e,n);if(r.length===0)return null;const o=n.mapDimensions.width,l=n.mapDimensions.height;for(const a of r){const u=Aw(a);if(Iw(a,n)>=u)continue;const h=20;for(let g=0;g<h;g++){const m=a.position.x+(Math.random()-.5)*a.width,y=a.position.y+(Math.random()-.5)*a.height,S={x:(m%o+o)%o,y:(y%l+l)%l};if(!On(S,n,Ki))return S}}return null}const It=30,ko=It*.6,Bf="#4CAF50",dv="#FF5722",fv="#9C27B0",Ew="#2196F3",hv="#FFC107",_w="#FFD700",pv="#DC143C",Hf="#FFFFFF",Gf=[5,5],du=5,Ro=15,Cw=20,Rw=16,Pw=10,Nw=16,Ow=16,_m=["","","","","","","","","",""],lf=8,Dw="#FFFFFF",gn=18,qe=15,Mw="rgba(0, 0, 0, 0.7)",kw=4,Fi=150,tn=15,ri=10,$i="#555",Fw="#f44336",Uw="#4CAF50",Lw="#2196F3",Bw="#FFC107",yl=16,fr=32,Sl=28,Hw=10,Gw=8,bw=8,xw=8,hn=28,Tl=40,$w="rgba(255, 215, 0, 0.7)",zw="rgba(0, 0, 0, 0.3)",$n=10,Cm=8,vd=11,Ui=20,yd=40,Rm=5,Ww=10,Yw="#FFA500",jw="#808080",li=120,gv=30,Vw=20,bi="#2d3748",mn="#ffffff",Al="#4a5568",mv=5,bf="#bdc9f792",vv="#272c36ff",yv="#a0aec0",Zl=300,Sv="rgba(255, 255, 255, 0.5)",Xw="rgba(0, 0, 0, 0.8)",Kw="#FFFFFF",Pm=14,Nm=8,Om=-15,Tv="#FFD700",Av=5,qw=60,Zw=-50,Qw=10,Sd=12,Dm=10,Jw="rgba(0, 0, 0, 0.5)",eE="#4CAF50",tE="#F44336",nE="#FFC107",iE="rgba(255, 255, 255, 0.2)",Mm="#FFFFFF",rE="#FF6B6B",oE=5,Iv=30,Es=50,Il=8,km=10,sE="rgba(0, 0, 0, 0.5)",aE="#FFFFFF",lE=33,uE=400,cE=20,dE=10,fE="rgba(0, 0, 0, 0.7)",hE="#FFFFFF",Td=20,Fm=16,pE=.5,Um=5,wv="#FFD700",gE=40,xf=4,Ev=3,mE=5,_v=20,Cv=5,vE="#FFFFFF",yE="#FF6B6B",nn=80,hr=10,wl=300,pr=15,SE=8,TE="rgba(0, 0, 0, 0.8)",AE="#FFFFFF",Ad=14,Lm=10,zn=20,IE="#FF6B6B",wE="#4CAF50",Bm="#FFD700",EE="rgba(255, 255, 0, 0.3)",_E=2,CE=500,RE=120,PE=45,NE="#FFD700",OE=3,DE=4;let Id=0;function uf(){const e=_m[Id];return Id=(Id+1)%_m.length,e}const Hm=40,ME=.3,kE=24,Gm=500,Po=10,Rv=250,Ks=12,Pv=10;var Te=(e=>(e.Gather="Gather",e.Eat="Eat",e.Procreate="Procreate",e.Attack="Attack",e.Plant="Plant",e.CallToAttack="CallToAttack",e.TribeSplit="TribeSplit",e.FollowMe="FollowMe",e.FeedChild="FeedChild",e.HuntPrey="HuntPrey",e.DefendAgainstPredator="DefendAgainstPredator",e.Build="Build",e.Removal="Removal",e.AutopilotMove="AutopilotMove",e.AutopilotGather="AutopilotGather",e.AutopilotAttack="AutopilotAttack",e.AutopilotProcreate="AutopilotProcreate",e.AutopilotPlant="AutopilotPlant",e.AutopilotFeedChild="AutopilotFeedChild",e.AutopilotFollowMe="AutopilotFollowMe",e))(Te||{});const fu={Gather:"",Eat:"",Procreate:"",Attack:"",Plant:"",CallToAttack:"",TribeSplit:"",FollowMe:"",FeedChild:"",HuntPrey:"",DefendAgainstPredator:"",Build:"",Removal:"",AutopilotMove:"",AutopilotGather:"",AutopilotAttack:"",AutopilotProcreate:"",AutopilotPlant:"",AutopilotFeedChild:"",AutopilotFollowMe:""},Nv={Gather:"Gather",Eat:"Eat",Procreate:"Procreate",Attack:"Attack",Plant:"Plant",CallToAttack:"Call to Attack",TribeSplit:"Split Tribe",FollowMe:"Follow Me",FeedChild:"Feed Child",HuntPrey:"Hunt Prey",DefendAgainstPredator:"Defend",Build:"Build",Removal:"Remove",AutopilotMove:"Walk",AutopilotGather:"Gather",AutopilotAttack:"Attack",AutopilotProcreate:"Procreate",AutopilotPlant:"Plant",AutopilotFeedChild:"Feed",AutopilotFollowMe:"Follow"};var uo=(e=>(e.Time="Time",e.Hunger="Hunger",e.Hitpoints="Hitpoints",e.Food="Food",e.Autopilot="Autopilot",e.Muted="Muted",e.Family="Family",e.Tribes="Tribes",e))(uo||{});const _s={Time:"",Hunger:"",Hitpoints:"",Food:"",Autopilot:"",Muted:"",Family:"",Tribes:""};var fe=(e=>(e.ToggleMute="ToggleMute",e.TogglePause="TogglePause",e.FastForward="FastForward",e.DismissTutorial="DismissTutorial",e.ReturnToIntro="ReturnToIntro",e.ConfirmExitYes="ConfirmExitYes",e.ConfirmExitNo="ConfirmExitNo",e.CommandEat="CommandEat",e.CommandPlant="CommandPlant",e.CommandCallToAttack="CommandCallToAttack",e.CommandFollowMe="CommandFollowMe",e.CommandGather="CommandGather",e.CommandTribeSplit="CommandTribeSplit",e.CommandBuild="CommandBuild",e.SelectStorageSpot="SelectStorageSpot",e.SelectPlantingZone="SelectPlantingZone",e.SelectRemovalTool="SelectRemovalTool",e.ToggleProcreationBehavior="ToggleProcreationBehavior",e.ToggleAttackBehavior="ToggleAttackBehavior",e.ToggleFeedChildBehavior="ToggleFeedChildBehavior",e.TogglePlantingBehavior="TogglePlantingBehavior",e.ToggleGatheringBehavior="ToggleGatheringBehavior",e.ToggleAutopilotFollowLeaderBehavior="ToggleAutopilotFollowLeaderBehavior",e.ToggleDiplomacy="ToggleDiplomacy",e))(fe||{});const FE=12,UE=24,LE=150*.9,BE=24;var qs=(e=>(e.Hello="HELLO",e.NewTribeFormed="NEW_TRIBE_FORMED",e.NoHeir="NO_HEIR",e.ChildrenStarving="CHILDREN_STARVING",e))(qs||{});let HE=0;function GE(){return`notification-${Date.now()}-${HE++}`}function cf(e,n){if(n.identifier){const o=e.notifications.find(l=>l.identifier===n.identifier);if(o){if(o.dismissedUntil&&e.time<o.dismissedUntil)return;o.message=n.message,o.timestamp=e.time,o.creationTime=Date.now(),o.duration=n.duration,o.targetEntityIds=n.targetEntityIds,o.highlightedEntityIds=n.highlightedEntityIds,o.targetPosition=n.targetPosition,o.targetArea=n.targetArea,o.targetRadius=n.targetRadius,o.isDismissed=!1,o.dismissedUntil=void 0;return}}const r={...n,id:GE(),timestamp:e.time,creationTime:Date.now(),isDismissed:!1};e.notifications.push(r)}function bE(e,n){const r=e.notifications.find(o=>o.id===n);r&&(r.isDismissed=!0,r.identifier&&(r.dismissedUntil=e.time+BE))}function xE(e){const n=e.time;e.notifications=e.notifications.filter(r=>r.duration===0?!0:!(n-r.timestamp>r.duration))}function $E(e){for(const r of Object.values(e.entities.entities))r.isHighlighted=!1;const n=e.notifications.filter(r=>!r.isDismissed);for(const r of n)if(r.highlightedEntityIds)for(const o of r.highlightedEntityIds){const l=e.entities.entities[o];l&&(l.isHighlighted=!0)}}const bm=600,zE=1.5,Ov=.1,wd=""+new URL("attack-D4MA8VWK.mp3",import.meta.url).href,WE=""+new URL("gather-CU75596W.mp3",import.meta.url).href,YE=""+new URL("eat-DCjHq2QD.mp3",import.meta.url).href,Ed=""+new URL("procreate-CfE4r5Cp.mp3",import.meta.url).href,jE=""+new URL("birth-Cbd67GHT.mp3",import.meta.url).href,VE=""+new URL("child-fed-DzEPuMid.mp3",import.meta.url).href,XE=""+new URL("human-death-B6HFLXES.mp3",import.meta.url).href,KE=""+new URL("game-over-C5dqkyER.mp3",import.meta.url).href,qE=""+new URL("button-click-DomLUeaU.mp3",import.meta.url).href,ZE=""+new URL("soundtrack-1-BdlYUGye.mp3",import.meta.url).href;var ve=(e=>(e[e.Attack=0]="Attack",e[e.Gather=1]="Gather",e[e.Eat=2]="Eat",e[e.Procreate=3]="Procreate",e[e.Birth=4]="Birth",e[e.ChildFed=5]="ChildFed",e[e.HumanDeath=6]="HumanDeath",e[e.Seize=7]="Seize",e[e.CallToAttack=8]="CallToAttack",e[e.TribeSplit=9]="TribeSplit",e[e.CallToFollow=10]="CallToFollow",e[e.GameOver=11]="GameOver",e[e.ButtonClick=12]="ButtonClick",e[e.SoundTrack1=13]="SoundTrack1",e))(ve||{});const QE=new Map([[0,wd],[1,WE],[2,YE],[3,Ed],[4,jE],[5,VE],[6,XE],[11,KE],[12,qE],[7,wd],[8,wd],[9,Ed],[10,Ed],[13,ZE]]);let Cs,Zs;function JE(){if(!(typeof window>"u"))return Zs}function $f(){if(!(typeof window>"u"))return!Cs&&typeof window.AudioContext=="function"&&(Cs=new window.AudioContext,Zs=Cs.createGain(),Zs.connect(Cs.destination),Hs(.1,!1)),Cs}function Hs(e,n){Zs&&(Zs.gain.value=n?0:e/10)}const Dv=new Map;let El=!1,xm=!1;async function e_(){if(xm||El)return;const e=$f();if(!e){console.error("AudioContext not supported. Cannot load sounds.");return}e.state==="suspended"&&e.resume(),El=!0,console.log("Starting sound loading...");const n=[];QE.forEach((r,o)=>{const l=fetch(r).then(a=>{if(!a.ok)throw new Error(`Failed to fetch sound: ${r}`);return a.arrayBuffer()}).then(a=>e.decodeAudioData(a)).then(a=>{Dv.set(o,a)}).catch(a=>{console.error(`Error loading sound ${ve[o]} from ${r}:`,a)});n.push(l)});try{await Promise.all(n),xm=!0,El=!1,console.log("All sounds loaded successfully.")}catch(r){El=!1,console.error("An error occurred while loading sounds:",r)}}const Gs=new Map;function zf(e,n){const r=$f(),o=JE();if(!r||!o||o.gain.value===0&&(n==null?void 0:n.trackId)===void 0)return;r.state==="suspended"&&r.resume();const l=Dv.get(e);if(!l){console.warn(`Sound buffer not found for type: ${ve[e]}`);return}if(n!=null&&n.trackId&&Gs.has(n.trackId))return;const a=r.createBufferSource();a.buffer=l,a.loop=(n==null?void 0:n.loop)??!1;const u=r.createGain(),d=r.createStereoPanner();let h=u;if(n!=null&&n.position&&(n!=null&&n.listenerPosition)&&(n!=null&&n.worldDimensions)){const g=ze(n.listenerPosition,n.position,n.worldDimensions.width,n.worldDimensions.height),m=K(n.listenerPosition,n.position,n.worldDimensions.width,n.worldDimensions.height);if(m>bm)return;const y=1-Math.pow(m/bm,zE);u.gain.value=Math.max(0,y);const S=Math.sin(g.x/m*(Math.PI/2));d.pan.value=isNaN(S)?0:S,u.connect(d),h=d}else{const g=e===ve.GameOver?.4:e===ve.SoundTrack1?1:.2;u.gain.value=g}a.connect(h),h.connect(o),a.start(0),n!=null&&n.trackId&&(Gs.set(n.trackId,{sourceNode:a,gainNode:u}),a.onended=()=>{Gs.delete(n.trackId)})}function _d(e,n=1){const r=Gs.get(e),o=$f();if(r&&o){const{sourceNode:l,gainNode:a}=r,u=o.currentTime;a.gain.setValueAtTime(a.gain.value,u),a.gain.linearRampToValueAtTime(0,u+n),l.stop(u+n),l.onended=null,Gs.delete(e)}}function Ne(e,n,r){const o=At(e.gameState);o&&zf(n,{position:r,listenerPosition:o.position,worldDimensions:e.gameState.mapDimensions,masterVolume:e.gameState.masterVolume,isMuted:e.gameState.isMuted})}function t_(e,n,r){const o=r.mapDimensions.width,l=r.mapDimensions.height,a=n.radius*2;for(let u=Gm;u<o/2;u+=50)for(let d=0;d<10;d++){const h=Uf(e,u,o,l);if(!(K(e,h,o,l)<Gm)&&!On(h,r,a,n.id))return h}return null}function Wf(e,n){if(!e.isAdult||e.gender!=="male"||e.leaderId===e.id||!e.leaderId)return{canSplit:!1};if(!e.leaderId)return{canSplit:!1};const r=n.entities.entities[e.leaderId];if(!r||r.type!=="human")return{canSplit:!1};const o=hi(Pt(n,r));if(o&&o.id===e.id)return{canSplit:!1};const l=Xs(e.leaderId,n);if(l.length<Hm)return{canSplit:!1};const u=iv(e,n).length+1,d=Math.min(l.length*ME,Hm);return{canSplit:u>=d,progress:u/d}}function Yf(e,n){if(!Wf(e,n).canSplit)return;const r=e.leaderId?n.entities.entities[e.leaderId]:void 0,o=uf(),l=iv(e,n);e.leaderId=e.id,e.tribeBadge=o,e.diplomacy={},r&&r.diplomacy&&(r.diplomacy[e.id]=xt.Hostile);for(const u of l)u.leaderId=e.id,u.tribeBadge=o;cf(n,{type:qs.NewTribeFormed,message:`A new tribe has formed! ${o}`,duration:UE,targetEntityIds:[e.id],highlightedEntityIds:[e.id,...l.map(u=>u.id)]}),Ne({gameState:n},ve.TribeSplit,e.position)}function jf(e,n){const r=[];if(n.food.length>0&&n.hunger>qi&&r.push({type:Te.Eat,action:"eating",key:"f"}),n.food.length<n.maxFood){const a=Fe(n,e,"berryBush",Tt,h=>h.food.length>0),u=Fe(n,e,"corpse",Tt,h=>h.food.length>0);let d=null;a&&u?d=K(n.position,a.position,e.mapDimensions.width,e.mapDimensions.height)<=K(n.position,u.position,e.mapDimensions.width,e.mapDimensions.height)?a:u:d=a||u,d&&r.push({type:Te.Gather,action:"gathering",key:"e",targetEntity:d})}const o=Fe(n,e,"human",Tt,a=>Mr(n,a,e));if(o&&r.push({type:Te.Procreate,action:"procreating",key:"r",targetEntity:o}),n.food.length>0&&n.isAdult){const a=Fe(n,e,"human",Tt,u=>{const d=u;return!d.isAdult&&(d.motherId===n.id||d.fatherId===n.id)&&d.hunger>=qi});a&&r.push({type:Te.FeedChild,action:"feeding",key:"h",targetEntity:a})}const l=Fe(n,e,"human",Vn,a=>Fo(n,a,e))??Fe(n,e,"predator",Vn)??Fe(n,e,"prey",Vn);return l&&r.push({type:Te.Attack,action:"attacking",key:"q",targetEntity:l}),n.food.filter(a=>a.type===Xn.Berry).length>=_o&&r.push({type:Te.Plant,action:"planting",key:"b"}),n.leaderId===n.id&&!n.isCallingToAttack&&Lf(n,e,Rv).length>0&&r.push({type:Te.CallToAttack,action:"idle",key:"v"}),Wf(n,e).canSplit&&r.push({type:Te.TribeSplit,action:"idle",key:"k"}),n.leaderId===n.id&&!n.isCallingToFollow&&r.push({type:Te.FollowMe,action:"idle",key:"c"}),r}const Fo=(e,n,r)=>{var o,l,a,u;if(e.id===n.id)return!1;if(e.leaderId&&!n.leaderId)return!0;if(e.leaderId===n.leaderId)return!1;if(e.leaderId&&n.leaderId){const d=(l=(o=r.entities.entities[e.leaderId])==null?void 0:o.diplomacy)==null?void 0:l[n.leaderId],h=(u=(a=r.entities.entities[n.leaderId])==null?void 0:a.diplomacy)==null?void 0:u[e.leaderId];return d===xt.Hostile||h===xt.Hostile}return!1},Mr=(e,n,r)=>{if(e.id===n.id||e.gender===n.gender||!e.isAdult||!n.isAdult||e.hunger>=Nr||n.hunger>=Nr||(e.procreationCooldown||0)>0||(n.procreationCooldown||0)>0||Fo(e,n,r))return!1;const o=e.gender==="female"?e:n;return!(o.isPregnant||o.age>Z0)};function Mv(e,n,r,o){if(r===void 0)return!1;const l=lv(n),a=Math.sqrt(l.width*l.width+l.height*l.height)/2;if(On(e,o,a*.8))return!1;const d=o.search.building.byRadius(e,a*2);for(const h of d){const g=K(e,h.position,o.mapDimensions.width,o.mapDimensions.height),m=(Math.max(l.width,l.height)+Math.max(h.width,h.height))/2;if(g<m*.9)return!1}return!0}function n_(e,n,r,o){return u1(o.entities,e,n,r)}function i_(e,n){const r=n.entities.entities[e];r&&r.type==="building"&&!r.isBeingDestroyed&&(r.isBeingDestroyed=!0,r.destructionProgress=0)}function r_(e,n){const l=n.search.building.byRadius(e,100);for(const a of l){let u=e.x-a.position.x,d=e.y-a.position.y;const h=n.mapDimensions.width,g=n.mapDimensions.height;if(Math.abs(u)>h/2&&(u-=Math.sign(u)*h),Math.abs(d)>g/2&&(d-=Math.sign(d)*g),Math.abs(u)<=a.width/2&&Math.abs(d)<=a.height/2)return a}}const o_={id:$l,update:(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:l}=o,a=o.deltaTime*(yt/St);if(r.age+=a,r.age>=r.lifespan)return{nextState:Ys,data:{...e,enteredAt:l.time,previousState:$l}};const u=Uf(r.position,r.spreadRadius,l.mapDimensions.width,l.mapDimensions.height);return On(u,l,15)||sa(l.entities,u,l.time),{nextState:yr,data:{...e,enteredAt:l.time,previousState:$l}}},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},s_={id:Ys,update:e=>({nextState:Ys,data:e}),onEnter:(e,n)=>(Bo(e.updateContext.gameState.entities,e.entity.id),{...n,enteredAt:e.updateContext.gameState.time})},a_=[GA,bA,o_,s_],Ct="humanIdle",vr="humanMoving",ks="humanEating",hu="humanGathering",Qs="humanProcreating",Zi="humanAttacking",Wl="humanPlanting",l_={id:Ct,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="attacking"&&r.attackTargetId?{nextState:Zi,data:{...e,enteredAt:o.gameState.time,previousState:Ct,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:(r.hunger>=X0?(r.debuffs=r.debuffs.filter(l=>l.type!=="slow"),r.debuffs.push({type:"slow",startTime:o.gameState.time,duration:.1})):r.debuffs=r.debuffs.filter(l=>l.type!=="slow"),r.activeAction==="moving"?{nextState:vr,data:{...e,enteredAt:o.gameState.time,previousState:Ct,target:r.target}}:r.activeAction==="gathering"?{nextState:hu,data:{...e,enteredAt:o.gameState.time,previousState:Ct,target:r.target}}:r.activeAction==="eating"?{nextState:ks,data:{...e,enteredAt:o.gameState.time,previousState:Ct}}:r.activeAction==="planting"&&r.target?{nextState:Wl,data:{...e,enteredAt:o.gameState.time,previousState:Ct,plantingSpot:r.target}}:{nextState:Ct,data:e})},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function kv(e){let n=RI;return e.hunger>=X0&&(n*=PI),e.age>=OI&&(n*=DI),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}const Cd=7.5;class u_{constructor(){De(this,"id",vr)}update(n,r){var h;const{entity:o,updateContext:l}=r;if(o.activeAction==="attacking"&&o.attackTargetId)return{nextState:Zi,data:{...n,enteredAt:l.gameState.time,previousState:vr,attackTargetId:o.attackTargetId,attackStartTime:l.gameState.time}};if(o.activeAction!=="moving")return{nextState:Ct,data:{...n,enteredAt:l.gameState.time,previousState:vr}};let a;if(typeof o.target=="object"?a=o.target:typeof o.target=="number"&&(a=(h=r.updateContext.gameState.entities.entities[o.target])==null?void 0:h.position),!a&&(o.direction.x!==0||o.direction.y!==0)&&(a={x:o.position.x+o.direction.x*Cd*2,y:o.position.y+o.direction.y*Cd*2}),!a)return{nextState:Ct,data:{...n,enteredAt:l.gameState.time,previousState:vr}};const u=ze(o.position,a,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=nt(u),o.acceleration=kv(o),K(o.position,a,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height)<Cd?{nextState:Ct,data:{...n,enteredAt:l.gameState.time,previousState:vr}}:{nextState:vr,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}}const c_=new u_,d_={id:ks,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction!=="eating"?{nextState:Ct,data:{...e,enteredAt:o.gameState.time,previousState:ks}}:(r.food.length>0&&(!r.eatingCooldownTime||o.gameState.time>=r.eatingCooldownTime)&&r.hunger>qi&&(r.hunger=Math.max(0,r.hunger-qi),r.food.pop(),r.eatingCooldownTime=o.gameState.time+1,Ne(o,ve.Eat,r.position),(!r.lastEatingEffectTime||o.gameState.time-r.lastEatingEffectTime>2)&&(Oe(o.gameState,le.Eating,r.position,Ge,r.id),r.lastEatingEffectTime=o.gameState.time)),r.hunger<=0||r.food.length<=0?{nextState:Ct,data:{...e,enteredAt:o.gameState.time,previousState:ks}}:{nextState:ks,data:e})},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};class f_{constructor(){De(this,"id",hu)}update(n,r){return r.entity.activeAction!=="gathering"?{nextState:"humanIdle",data:{...n,enteredAt:r.updateContext.gameState.time,previousState:this.id}}:{nextState:this.id,data:n}}}const h_=new f_,p_=(e,n)=>(n.procreationEndTime=e.updateContext.gameState.time+(n.duration||2),n),g_=(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:l}=o;if(l.time<(e.procreationEndTime||0))return{nextState:Qs,data:e};const a=l.entities.entities[e.partnerId];if(a&&a.type==="human"&&!a.isPregnant&&r.hunger<Nr&&a.hunger<Nr&&!r.procreationCooldown&&!a.procreationCooldown){const u=r.gender==="female"?r:a.gender==="female"?a:void 0,d=r.gender==="male"?r:a.gender==="male"?a:void 0;u&&d&&(u.isPregnant=!0,u.gestationTime=FI,u.pregnancyFatherId=d.id,r.procreationCooldown=Sm,a.procreationCooldown=Sm,Ne(o,ve.Procreate,u.position))}return r.activeAction="idle",a&&(a.activeAction="idle"),{nextState:Ct,data:{...e,enteredAt:l.time,previousState:Qs}}},m_={id:Qs,onEnter:p_,update:g_},v_={id:Zi,onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time,attackStartTime:e.updateContext.gameState.time}),update:(e,n)=>{if(n.entity.activeAction!=="attacking"||!n.entity.attackTargetId)return n.entity.activeAction="idle",{nextState:Ct,data:{...e}};const r=n.updateContext.gameState.entities.entities[n.entity.attackTargetId];if(!r)return n.entity.activeAction="idle",{nextState:Ct,data:{...e}};const o=K(n.entity.position,r.position,n.updateContext.gameState.mapDimensions.width,n.updateContext.gameState.mapDimensions.height),l=ze(n.entity.position,r.position,n.updateContext.gameState.mapDimensions.width,n.updateContext.gameState.mapDimensions.height);return n.entity.direction=nt(l),o>Vn?n.entity.acceleration=kv(n.entity):n.entity.acceleration=0,{nextState:Zi,data:e}}},y_={id:Wl,update:(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:l}=o;if(l.time-e.enteredAt>=LA){if(r.food.filter(d=>d.type===Xn.Berry).length>=_o){for(let h=0;h<_o;h++){const g=r.food.findIndex(m=>m.type===Xn.Berry);g>-1&&r.food.splice(g,1)}const d=sa(l.entities,e.plantingSpot,l.time);d.ownerId=r.id,d.claimedUntil=l.time+$0}return{nextState:Ct,data:{...e,enteredAt:l.time,previousState:Wl}}}return{nextState:Wl,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},S_=[l_,c_,d_,h_,m_,v_,y_],Cn="preyIdle",xi="preyMoving",Fs="preyGrazing",Us="preyProcreating",T_={id:Cn,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:xi,data:{...e,enteredAt:o.gameState.time,previousState:Cn,target:r.target}}:r.activeAction==="grazing"?{nextState:Fs,data:{...e,enteredAt:o.gameState.time,previousState:Cn}}:r.activeAction==="procreating"?{nextState:Us,data:{...e,enteredAt:o.gameState.time,previousState:Cn}}:{nextState:Cn,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},Fv=12,A_=120,$m=50,I_=12,Uv=30,w_=2,$t=50,E_=150,bs=2,Rd=8,__=.5,C_=1,R_=80,P_=.7,Lv=20,N_=140,zm=40,O_=12,Bv=40,D_=3,Vi=60,Rn=40,co=50,Wm=320,Hv=25,M_=60,Gv=2,k_=90,F_=.7,U_=1.5,xs=3,Pd=15,Vf=80,bv=10,pu=80,Uo=40,xv=2,Ql=30,po=10,Ir=40,go=12,wr=48,mo=12,Er=50,vo=18,_r=60,yo=.5,zi=2.5,So=.25,Wi=2;function L_(e){let n=I_;return e.isAdult||(n*=.7),e.hunger>=R_&&(n*=P_),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}function B_(e,n){const r=e>>16&255,o=e>>8&255,l=e&255,a=n>>16&255,u=n>>8&255,d=n&255;let h=Math.floor((r+a)/2),g=Math.floor((o+u)/2),m=Math.floor((l+d)/2);return Math.random()<.05&&(h=Math.max(0,Math.min(255,h+(Math.random()-.5)*60))),Math.random()<.05&&(g=Math.max(0,Math.min(255,g+(Math.random()-.5)*60))),Math.random()<.05&&(m=Math.max(0,Math.min(255,m+(Math.random()-.5)*60))),h<<16|g<<8|m}function Js(){const e=Math.floor(Math.random()*100)+100,n=Math.floor(Math.random()*80)+60,r=Math.floor(Math.random()*60)+20;return e<<16|n<<8|r}const Nd=10;class H_{constructor(){De(this,"id",xi)}update(n,r){var h;const{entity:o,updateContext:l}=r;if(o.activeAction!=="moving")return{nextState:Cn,data:{...n,enteredAt:l.gameState.time,previousState:xi}};let a;if(typeof o.target=="object"?a=o.target:typeof o.target=="number"&&(a=(h=r.updateContext.gameState.entities.entities[o.target])==null?void 0:h.position),!a&&(o.direction.x!==0||o.direction.y!==0)&&(a={x:o.position.x+o.direction.x*Nd*2,y:o.position.y+o.direction.y*Nd*2}),!a)return{nextState:Cn,data:{...n,enteredAt:l.gameState.time,previousState:xi}};const u=ze(o.position,a,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=nt(u),o.acceleration=L_(o),K(o.position,a,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height)<Nd?{nextState:Cn,data:{...n,enteredAt:l.gameState.time,previousState:xi}}:{nextState:xi,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}onEnter(n,r){return{...r,enteredAt:n.updateContext.gameState.time}}}const G_=new H_,b_={id:Fs,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:xi,data:{...e,enteredAt:o.gameState.time,previousState:Fs,target:r.target}}:r.activeAction!=="grazing"?{nextState:Cn,data:{...e,enteredAt:o.gameState.time,previousState:Fs}}:{nextState:Fs,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},x_={id:Us,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:xi,data:{...e,enteredAt:o.gameState.time,previousState:Us,target:r.target}}:r.activeAction!=="procreating"?{nextState:Cn,data:{...e,enteredAt:o.gameState.time,previousState:Us}}:{nextState:Us,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},$_=[T_,G_,b_,x_],bt="predatorIdle",Hi="predatorMoving",ai="predatorAttacking",fo="predatorProcreating",Cr="predatorEating",z_={id:bt,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="eating"?{nextState:Cr,data:{...e,enteredAt:o.gameState.time,previousState:bt,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}}:r.activeAction==="attacking"&&r.attackTargetId?{nextState:ai,data:{...e,enteredAt:o.gameState.time,previousState:bt,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:r.activeAction==="moving"?{nextState:Hi,data:{...e,enteredAt:o.gameState.time,previousState:bt,target:r.target}}:r.activeAction==="procreating"?{nextState:fo,data:{...e,enteredAt:o.gameState.time,previousState:bt}}:{nextState:bt,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function $v(e){let n=O_;return e.hunger>=k_&&(n*=F_),e.isAdult||(n*=.7),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}function W_(e,n){const r=e>>16&255,o=e>>8&255,l=e&255,a=n>>16&255,u=n>>8&255,d=n&255;let h=Math.floor((r+a)/2),g=Math.floor((o+u)/2),m=Math.floor((l+d)/2);return Math.random()<.05&&(h=Math.max(0,Math.min(255,h+(Math.random()-.5)*60))),Math.random()<.05&&(g=Math.max(0,Math.min(255,g+(Math.random()-.5)*60))),Math.random()<.05&&(m=Math.max(0,Math.min(255,m+(Math.random()-.5)*60))),h<<16|g<<8|m}function ea(){const e=Math.floor(Math.random()*60)+60,n=Math.floor(Math.random()*50)+40,r=Math.floor(Math.random()*40)+20;return e<<16|n<<8|r}const Od=12;class Y_{constructor(){De(this,"id",Hi)}update(n,r){var h;const{entity:o,updateContext:l}=r;if(o.activeAction==="eating")return{nextState:Cr,data:{...n,enteredAt:l.gameState.time,previousState:Hi,preyId:o.attackTargetId,eatingStartTime:l.gameState.time}};if(o.activeAction==="attacking"&&o.attackTargetId)return{nextState:ai,data:{...n,enteredAt:l.gameState.time,previousState:Hi,attackTargetId:o.attackTargetId,attackStartTime:l.gameState.time}};if(o.activeAction!=="moving")return{nextState:bt,data:{...n,enteredAt:l.gameState.time,previousState:Hi}};let a;if(typeof o.target=="object"?a=o.target:typeof o.target=="number"&&(a=(h=r.updateContext.gameState.entities.entities[o.target])==null?void 0:h.position),!a&&(o.direction.x!==0||o.direction.y!==0)&&(a={x:o.position.x+o.direction.x*Od*2,y:o.position.y+o.direction.y*Od*2}),!a)return{nextState:bt,data:{...n,enteredAt:l.gameState.time,previousState:Hi}};const u=ze(o.position,a,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=nt(u),o.acceleration=$v(o),K(o.position,a,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height)<Od?{nextState:bt,data:{...n,enteredAt:l.gameState.time,previousState:Hi}}:{nextState:Hi,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}onEnter(n,r){return{...r,enteredAt:n.updateContext.gameState.time}}}const j_=new Y_,V_={id:ai,update:(e,n)=>{const{entity:r,updateContext:o}=n;if(r.activeAction==="eating")return{nextState:Cr,data:{...e,enteredAt:o.gameState.time,previousState:ai,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}};if(r.activeAction!=="attacking"||!r.attackTargetId)return r.activeAction="idle",{nextState:bt,data:{...e,enteredAt:o.gameState.time,previousState:ai}};const l=o.gameState.entities.entities[r.attackTargetId];if(!l)return r.activeAction="idle",{nextState:bt,data:{...e,enteredAt:o.gameState.time,previousState:ai}};if(l.type==="prey"&&l.hitpoints<=0||l.type==="predator"&&l.hitpoints<=0||l.type==="human"&&l.hitpoints<=0)return r.activeAction="idle",{nextState:bt,data:{...e,enteredAt:o.gameState.time,previousState:ai}};const u=K(r.position,l.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height),d=ze(r.position,l.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height);return r.direction=nt(d),u>Rn?r.acceleration=$v(r):r.acceleration=0,{nextState:ai,data:e}},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},X_={id:fo,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="eating"?{nextState:Cr,data:{...e,enteredAt:o.gameState.time,previousState:fo,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}}:r.activeAction==="attacking"&&r.attackTargetId?{nextState:ai,data:{...e,enteredAt:o.gameState.time,previousState:fo,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:r.activeAction!=="procreating"?{nextState:bt,data:{...e,enteredAt:o.gameState.time,previousState:fo}}:{nextState:fo,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},K_={id:Cr,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction!=="eating"?{nextState:bt,data:{...e,enteredAt:o.gameState.time,previousState:Cr}}:{nextState:Cr,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},q_=[z_,j_,V_,X_,K_],Ym=[...a_,...S_,...$_,...q_];function Z_(e,n,r){const o=CA(e,Ym);if(!o)return PA(e),[e,n];const{nextState:l,data:a}=o.update(n,r);return RA(e,l)?[l,_A(o,l,a,r,Ym)]:[l,a]}function Q_(e,n,r){const{gameState:o}=n,l=r*(yt/St);if(e.isAdult=e.age>=Rf,e.isCallingToAttack&&e.callToAttackEndTime&&o.time>e.callToAttackEndTime&&(e.isCallingToAttack=!1,e.callToAttackEndTime=void 0),e.isCallingToFollow&&e.callToFollowEndTime&&o.time>e.callToFollowEndTime&&(e.isCallingToFollow=!1,e.callToFollowEndTime=void 0),e.movementSlowdown&&o.time>e.movementSlowdown.endTime&&(e.movementSlowdown=void 0),e.hitpoints<e.maxHitpoints){const u=1-e.hunger/100*YI,d=WI*u*l;e.hitpoints=Math.min(e.maxHitpoints,e.hitpoints+d)}if(e.hunger+=r*(ws/(yt/St)),e.hunger>HA&&(!e.lastHungerEffectTime||o.time-e.lastHungerEffectTime>Tr*2)&&(Oe(o,le.Hunger,e.position,Tr,e.id),e.lastHungerEffectTime=o.time),e.age+=r/uu,e.isPlayer){const u=Pt(o,e).filter(d=>d.hunger>=LE);if(u.length>0){const d=u.map(h=>h.id);cf(o,{identifier:"children_starving",type:qs.ChildrenStarving,message:"Your children are starving!",duration:FE,targetEntityIds:d,highlightedEntityIds:d})}}if(e.gender==="female"&&e.isPregnant&&e.gestationTime&&(e.gestationTime-=l,e.hunger+=r*((ws*UI-ws)/(yt/St)),(!e.lastPregnantEffectTime||o.time-e.lastPregnantEffectTime>Tr*3)&&(Oe(o,le.Pregnant,e.position,Tr,e.id),e.lastPregnantEffectTime=o.time),e.gestationTime<=0&&(l1(e,e.pregnancyFatherId,n),e.isPregnant=!1,e.gestationTime=0,e.pregnancyFatherId=void 0)),e.procreationCooldown&&(e.procreationCooldown-=l,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.attackCooldown&&(e.attackCooldown-=l,e.attackCooldown<0&&(e.attackCooldown=0)),e.feedParentCooldownTime&&(e.feedParentCooldownTime-=l,e.feedParentCooldownTime<0&&(e.feedParentCooldownTime=0)),e.feedChildCooldownTime&&(e.feedChildCooldownTime-=l,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0)),e.leaderMetaStrategyCooldown&&(e.leaderMetaStrategyCooldown-=l,e.leaderMetaStrategyCooldown<0&&(e.leaderMetaStrategyCooldown=0)),e.isAdult?e.radius===ko&&(e.radius=It):e.hunger+=r*((ws*LI-ws)/(yt/St)),e.isAdult&&e.food.length>0&&(!e.feedParentCooldownTime||e.feedParentCooldownTime<=0)){const u=[];if(e.motherId){const d=o.entities.entities[e.motherId];d&&u.push(d)}if(e.fatherId){const d=o.entities.entities[e.fatherId];d&&u.push(d)}for(const d of u)if(d.age>=Q0&&d.hunger>=GI&&K(e.position,d.position,o.mapDimensions.width,o.mapDimensions.height)<=bI){e.food.pop(),d.hunger=Math.max(0,d.hunger-qi),e.feedParentCooldownTime=xI;break}}let a;if(e.hitpoints<=0?a="killed":e.hunger>=Pr?e.food.length>0&&e.isAdult?(e.food.pop(),e.hunger=Math.max(0,e.hunger-qi)):a="hunger":e.age>=e.maxAge&&(a="oldAge"),a){if(e.leaderId===e.id){const u=hi(Pt(o,e));u?(u.leaderId=u.id,u.tribeBadge=e.tribeBadge,u.diplomacy={...e.diplomacy},Object.values(o.entities.entities).forEach(d=>{if(d.type==="human"&&d.leaderId===e.id){const h=d;h.leaderId=u.id}if(d.type==="building"&&d.ownerId===e.id){const h=d;h.ownerId=u.id}})):Object.values(o.entities.entities).forEach(d=>{if(d.type==="human"&&d.leaderId===e.id){const h=d;h.leaderId=void 0,h.tribeBadge=void 0}if(d.type==="building"&&d.ownerId===e.id){const h=d;h.ownerId=void 0}})}if(e.isPlayer){const u=hi(Pt(o,e));u?(u.isPlayer=!0,o.generationCount++):(o.gameOver=!0,o.causeOfGameOver=a,cf(o,{identifier:"no_heir",type:qs.NoHeir,message:"Your lineage has ended. You have no heir.",duration:0}))}o1(o.entities,e.position,e.gender,e.age,e.radius,e.id,o.time,e.food,e.hunger),Bo(o.entities,e.id);return}e.animationProgress===void 0&&(e.animationProgress=0),e.animationSpeed===void 0&&(e.animationSpeed=1),e.animationProgress+=r*e.animationSpeed,e.animationProgress>=1&&(e.animationProgress=0)}function J_(e,n){const r=n.gameState.time-e.timeOfDeath;e.decayProgress=Math.min(1,r/$I);const o=Math.floor(J0*(1-e.decayProgress));e.food.length>o&&e.food.splice(o),e.decayProgress>=1&&e.food.length<=0&&Bo(n.gameState.entities,e.id)}function eC(e,n,r){const o=r*(yt/St);e.age+=r/uu,e.isAdult=e.age>=bs;let l=n.gameState.ecosystem.preyHungerIncreasePerHour*o;if(e.isPregnant&&(l*=1.2),e.hunger+=l,e.isPregnant&&e.gestationTime!==void 0&&(e.gestationTime-=o,e.gestationTime<=0)){const u={x:e.position.x+(Math.random()-.5)*40,y:e.position.y+(Math.random()-.5)*40};u.x=Math.max(20,Math.min(n.gameState.mapDimensions.width-20,u.x)),u.y=Math.max(20,Math.min(n.gameState.mapDimensions.height-20,u.y));const d=Math.random()<.5?"male":"female",h=e,g=e.fatherId?n.gameState.entities.entities[e.fatherId]:void 0;let m;if(g)m=B_(h.geneCode,g.geneCode);else{m=h.geneCode;const y=Math.floor((Math.random()-.5)*4096);m=Math.max(0,Math.min(16777215,m+y))}No(n.gameState.entities,u,d,0,Uv*.5,m,e.id,e.fatherId),Oe(n.gameState,le.Procreation,e.position,Tr,e.id),Ne(n,ve.Birth,e.position),e.isPregnant=!1,e.gestationTime=0,e.procreationCooldown=n.gameState.ecosystem.preyProcreationCooldown,e.fatherId=void 0}e.procreationCooldown&&e.procreationCooldown>0&&(e.procreationCooldown-=o,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.eatingCooldownTime&&e.eatingCooldownTime>n.gameState.time||(e.eatingCooldownTime=void 0),e.fleeCooldown&&e.fleeCooldown>0&&(e.fleeCooldown-=o,e.fleeCooldown<0&&(e.fleeCooldown=0)),e.feedChildCooldownTime&&e.feedChildCooldownTime>0&&(e.feedChildCooldownTime-=o,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0));let a=!1;e.hunger>=A_&&(a=!0),e.hitpoints<=0&&(a=!0),e.age>=Fv&&(a=!0),a&&(s1(n.gameState.entities,e.position,e.gender,e.age,e.radius,e.id,n.gameState.time,e.geneCode),Bo(n.gameState.entities,e.id))}function tC(e,n,r){const o=r*(yt/St);e.age+=r/uu,e.isAdult=e.age>=xs;let l=n.gameState.ecosystem.predatorHungerIncreasePerHour*o;if(e.isPregnant&&(l*=1.3),e.hunger+=l,e.isPregnant&&e.gestationTime!==void 0&&(e.gestationTime-=o,e.gestationTime<=0)){const u={x:e.position.x+(Math.random()-.5)*50,y:e.position.y+(Math.random()-.5)*50};u.x=Math.max(25,Math.min(n.gameState.mapDimensions.width-25,u.x)),u.y=Math.max(25,Math.min(n.gameState.mapDimensions.height-25,u.y));const d=Math.random()<.5?"male":"female",h=e,g=e.pregnancyFatherId?n.gameState.entities.entities[e.pregnancyFatherId]:void 0;let m;if(g)m=W_(h.geneCode,g.geneCode);else{m=h.geneCode;const y=Math.floor((Math.random()-.5)*4096);m=Math.max(0,Math.min(16777215,m+y))}Oo(n.gameState.entities,u,d,0,Bv*.6,m,e.id,e.pregnancyFatherId),Oe(n.gameState,le.Procreation,e.position,Tr,e.id),Ne(n,ve.Birth,e.position),e.isPregnant=!1,e.gestationTime=0,e.procreationCooldown=n.gameState.ecosystem.predatorProcreationCooldown,e.pregnancyFatherId=void 0}e.procreationCooldown&&e.procreationCooldown>0&&(e.procreationCooldown-=o,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.attackCooldown&&e.attackCooldown>0&&(e.attackCooldown-=o,e.attackCooldown<0&&(e.attackCooldown=0)),e.huntCooldown&&e.huntCooldown>0&&(e.huntCooldown-=o,e.huntCooldown<0&&(e.huntCooldown=0)),e.feedChildCooldownTime&&e.feedChildCooldownTime>0&&(e.feedChildCooldownTime-=o,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0));let a=!1;e.hunger>=N_&&(a=!0),e.hitpoints<=0&&(a=!0),e.age>=Lv&&(a=!0),a&&(a1(n.gameState.entities,e.position,e.gender,e.age,e.radius,e.id,n.gameState.time,e.geneCode),Bo(n.gameState.entities,e.id))}var oa=(e=>(e[e.BehaviorTreeBased=0]="BehaviorTreeBased",e))(oa||{}),E=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.FAILURE=1]="FAILURE",e[e.RUNNING=2]="RUNNING",e[e.NOT_EVALUATED=3]="NOT_EVALUATED",e))(E||{});class Kn{constructor(){De(this,"name");De(this,"depth");De(this,"children");De(this,"child")}getLastStatus(n){return N.get(n.aiBlackboard,`${this.name}_lastStatus`)??3}setLastStatus(n,r){N.set(n.aiBlackboard,`${this.name}_lastStatus`,r)}getRunningChildIndex(n){return N.get(n.aiBlackboard,`${this.name}_runningChildIndex`)}setRunningChildIndex(n,r){N.set(n.aiBlackboard,`${this.name}_runningChildIndex`,r)}}const N={create(){return{data:{},nodeExecutionData:{}}},set({data:e},n,r){e[n]=r},get(e,n){return e==null?void 0:e.data[n]},delete({data:e},n){delete e[n]},has({data:e},n){return n in e},recordNodeExecution({nodeExecutionData:e},n,r,o,l,a){const u=e[n]||{lastExecuted:0,status:E.FAILURE,depth:0,debugInfo:"",executionHistory:[]},d=u.executionHistory[u.executionHistory.length-1];d&&o-(d==null?void 0:d.time)>js&&u.executionHistory.push({time:d.time+js,status:E.NOT_EVALUATED}),u.executionHistory.push({time:o,status:r});const h=Iv/St*yt,g=o-h;u.executionHistory=u.executionHistory.filter(y=>y.time>=g);const m={...u,lastExecuted:o,status:r,depth:l,debugInfo:a};e[n]=m},getNodeExecutionData({nodeExecutionData:e}){return e},cleanupOldEntries({nodeExecutionData:e},n){const r=eI,o=[];for(const[l,a]of Object.entries(e))n-a.lastExecuted>r&&o.push(l);for(const l of o)delete e[l]}};function Xf(e,n,r){if(e.aiBlackboard){const o=N.get(e.aiBlackboard,"lastAiUpdateTime")??0;n.gameState.time-o>=js&&(r.execute(e,n,e.aiBlackboard),N.set(e.aiBlackboard,"lastAiUpdateTime",n.gameState.time))}else console.warn(`Behavior Tree AI ticked for human ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle"}const jm="Human Behavior",nC=1;class iC{constructor(){De(this,"nodeData",new Map);De(this,"pathStack",[]);De(this,"startTimeStack",[])}nodeStart(n){this.pathStack.push(n),this.startTimeStack.push(performance.now())}nodeEnd(){if(this.startTimeStack.length===0||this.pathStack.length===0){console.error("BTProfiler: nodeEnd() called without a matching nodeStart().");return}const n=performance.now(),r=this.startTimeStack.pop(),o=n-r,l=this.pathStack.join(" > "),a=this.nodeData.get(l)??{path:l,totalTime:0,callCount:0,minTime:1/0,maxTime:-1/0};a.totalTime+=o,a.callCount++,a.minTime=Math.min(a.minTime,o),a.maxTime=Math.max(a.maxTime,o),this.nodeData.set(l,a),this.pathStack.pop()}report(n={}){const{showAll:r=!1}=n,o=Array.from(this.nodeData.values());if(o.length===0){console.log("--- Behavior Tree Profiler: No data collected. ---");return}let l=o,a="--- Behavior Tree Full Report ---";if(!r){const d=this.nodeData.get(jm);if(d){const h=d.totalTime*nC/100;l=o.filter(g=>g.totalTime>h&&g.path!==jm),a="--- Behavior Tree Problem Report ---"}else console.log('BTProfiler: Root node "Human Behavior" not found. Showing full report.'),a="--- Behavior Tree Full Report (Root Not Found) ---"}const u=l.sort((d,h)=>h.totalTime-d.totalTime);console.log(a),u.length>0?console.table(u.map(d=>({Path:d.path,"Total Time (ms)":d.totalTime.toFixed(3),Calls:d.callCount,"Avg Time (ms)":(d.totalTime/d.callCount).toFixed(3),"Min Time (ms)":d.minTime.toFixed(3),"Max Time (ms)":d.maxTime.toFixed(3)}))):console.log("No significant performance problems detected."),console.log("------------------------------------")}reset(){this.nodeData.clear(),this.pathStack=[],this.startTimeStack=[]}}const dt=new iC;function Dn(e){return Array.isArray(e)?e:[e,""]}class ye extends Kn{constructor(r,o,l=0){super();De(this,"name");De(this,"depth");this.children=r,this.name=o,this.depth=l,this.children.forEach(a=>{a.depth=(this.depth??0)+1})}execute(r,o,l){this.name&&dt.nodeStart(this.name);try{for(const a of this.children){const[u,d]=Dn(a.execute(r,o,l));if(u!==E.SUCCESS)return this.setLastStatus(r,u),this.name&&N.recordNodeExecution(l,this.name,u,o.gameState.time,this.depth,d),u}return this.setLastStatus(r,E.SUCCESS),this.name&&N.recordNodeExecution(l,this.name,E.SUCCESS,o.gameState.time,this.depth,""),E.SUCCESS}finally{this.name&&dt.nodeEnd()}}}class Mn extends Kn{constructor(r,o,l=0){super();De(this,"name");De(this,"depth");this.children=r,this.name=o,this.depth=l,this.children.forEach(a=>{a.depth=(this.depth??0)+1})}execute(r,o,l){this.name&&dt.nodeStart(this.name);try{const a=this.getRunningChildIndex(r)??0;for(let u=a;u<this.children.length;u++){const d=this.children[u],[h,g]=Dn(d.execute(r,o,l));if(h!==E.FAILURE){if(h===E.SUCCESS)return this.setRunningChildIndex(r,void 0),this.setLastStatus(r,E.SUCCESS),this.name&&N.recordNodeExecution(l,this.name,E.SUCCESS,o.gameState.time,this.depth,g),E.SUCCESS;if(h===E.RUNNING)return this.setRunningChildIndex(r,u),this.setLastStatus(r,E.RUNNING),this.name&&N.recordNodeExecution(l,this.name,E.RUNNING,o.gameState.time,this.depth,g),E.RUNNING}}return this.setRunningChildIndex(r,void 0),this.setLastStatus(r,E.FAILURE),this.name&&N.recordNodeExecution(l,this.name,E.FAILURE,o.gameState.time,this.depth,""),E.FAILURE}finally{this.name&&dt.nodeEnd()}}}class ue extends Kn{constructor(r,o,l=0){super();De(this,"name");De(this,"depth");this.action=r,this.name=o,this.depth=l}execute(r,o,l){this.name&&dt.nodeStart(this.name);try{const[a,u]=Dn(this.action(r,o,l));return this.setLastStatus(r,a),this.name&&N.recordNodeExecution(l,this.name,a,o.gameState.time,this.depth,u),a}finally{this.name&&dt.nodeEnd()}}}class oe extends Kn{constructor(r,o,l=0){super();De(this,"name");De(this,"depth");this.condition=r,this.name=o,this.depth=l}execute(r,o,l){this.name&&dt.nodeStart(this.name);try{const[a,u]=Dn(this.condition(r,o,l)),d=a?E.SUCCESS:E.FAILURE;return this.setLastStatus(r,d),this.name&&N.recordNodeExecution(l,this.name,d,o.gameState.time,this.depth,u),d}finally{this.name&&dt.nodeEnd()}}}class Jl extends Kn{constructor(r,o,l,a=0){super();De(this,"name");De(this,"depth");De(this,"startTimeKey");this.child=r,this.timeoutDurationHours=o,this.name=l,this.depth=a,this.child.depth=(this.depth??0)+1,this.startTimeKey=`timeout_${this.name}_startTime`}execute(r,o,l){dt.nodeStart(this.name);try{const a=o.gameState.time;let u=N.get(l,this.startTimeKey);const[d,h]=Dn(this.child.execute(r,o,l));if(d===E.RUNNING){u===void 0&&(N.set(l,this.startTimeKey,a),u=a);const g=a-u;if(g>this.timeoutDurationHours){N.delete(l,this.startTimeKey),this.setLastStatus(r,E.FAILURE);const y=`Timed out after ${g.toFixed(2)}h.`;return N.recordNodeExecution(l,this.name,this.getLastStatus(r),a,this.depth,y),this.getLastStatus(r)}this.setLastStatus(r,E.RUNNING);const m=`Running for ${g.toFixed(2)}h. ${h}`;return N.recordNodeExecution(l,this.name,this.getLastStatus(r),a,this.depth,m),this.getLastStatus(r)}return u!==void 0&&N.delete(l,this.startTimeKey),this.setLastStatus(r,d),N.recordNodeExecution(l,this.name,this.getLastStatus(r),a,this.depth,h),this.getLastStatus(r)}finally{dt.nodeEnd()}}}class ta extends Kn{constructor(r,o,l,a=0,u){super();De(this,"name");De(this,"depth");De(this,"statusKey");De(this,"timestampKey");this.child=r,this.cacheDurationHours=o,this.validityCheck=u,this.name=l,this.depth=a,this.child.depth=(this.depth??0)+1,this.statusKey=`caching_${this.name}_status`,this.timestampKey=`caching_${this.name}_timestamp`}execute(r,o,l){dt.nodeStart(this.name);try{const a=o.gameState.time,u=N.get(l,this.statusKey),d=N.get(l,this.timestampKey);if(u!==void 0&&d!==void 0){const y=a-d>this.cacheDurationHours,S=this.validityCheck?this.validityCheck(r,o,l):!0;if(!y&&S){const w=(d+this.cacheDurationHours-a).toFixed(2),I=`Cache hit. Status: ${E[u]}. ${w}h left.`;return this.setLastStatus(r,u),N.recordNodeExecution(l,this.name,this.getLastStatus(r),a,this.depth,I),this.getLastStatus(r)}}const[h,g]=Dn(this.child.execute(r,o,l));(h===E.SUCCESS||h===E.FAILURE)&&(N.set(l,this.statusKey,h),N.set(l,this.timestampKey,a)),this.setLastStatus(r,h);const m=`Cache miss. Child returned ${E[h]}. ${g}`;return N.recordNodeExecution(l,this.name,this.getLastStatus(r),a,this.depth,m),this.getLastStatus(r)}finally{dt.nodeEnd()}}}class kr extends Kn{constructor(r,o,l,a=0){super();De(this,"name");De(this,"depth");De(this,"cooldownKey");this.cooldownDurationHours=r,this.child=o,this.name=l,this.depth=a,this.child.depth=(this.depth??0)+1,this.cooldownKey=`cooldown_${this.name}`}execute(r,o,l){dt.nodeStart(this.name);try{const a=o.gameState.time,u=N.get(l,this.cooldownKey);if(this.child.getLastStatus(r)===E.RUNNING){const[g,m]=Dn(this.child.execute(r,o,l));if(this.setLastStatus(r,g),this.name){const y=`Continuing running child. ${m}`;N.recordNodeExecution(l,this.name,this.getLastStatus(r),a,this.depth,y)}return this.getLastStatus(r)}if(u!==void 0&&a<u){const m=`Cooldown active, ${(u-a).toFixed(2)}h left`;return this.setLastStatus(r,E.FAILURE),this.name&&N.recordNodeExecution(l,this.name,this.getLastStatus(r),a,this.depth,m),this.getLastStatus(r)}const[d,h]=Dn(this.child.execute(r,o,l));return(d===E.SUCCESS||d===E.RUNNING)&&N.set(l,this.cooldownKey,a+this.cooldownDurationHours),this.setLastStatus(r,d),this.name&&N.recordNodeExecution(l,this.name,this.getLastStatus(r),a,this.depth,h),this.getLastStatus(r)}finally{dt.nodeEnd()}}}class gr extends Kn{constructor(r,o,l,a=0){super();De(this,"name");De(this,"depth");this.child=r,this.behaviorKey=o,this.name=l,this.depth=a;const u=(d,h)=>{d.depth=h,d.children?d.children.forEach(g=>u(g,h+1)):d.child&&u(d.child,h+1)};u(this.child,(this.depth??0)+1)}execute(r,o,l){this.name&&dt.nodeStart(this.name);try{if(r.isPlayer&&!o.gameState.autopilotControls.behaviors[this.behaviorKey]){const h=`Player autopilot for '${this.behaviorKey}' is disabled.`;return this.setLastStatus(r,E.FAILURE),this.name&&N.recordNodeExecution(l,this.name,this.getLastStatus(r),o.gameState.time,this.depth,h),this.getLastStatus(r)}const[u,d]=Dn(this.child.execute(r,o,l));return this.setLastStatus(r,u),this.name&&N.recordNodeExecution(l,this.name,this.getLastStatus(r),o.gameState.time,this.depth,d),this.getLastStatus(r)}finally{this.name&&dt.nodeEnd()}}}class rC extends Kn{constructor(r,o,l=0){super();De(this,"name");De(this,"depth");this.child=r,this.name=o,this.depth=l;const a=(u,d)=>{u.depth=d,u.children?u.children.forEach(h=>a(h,d+1)):u.child&&a(u.child,d+1)};a(this.child,(this.depth??0)+1)}execute(r,o,l){this.name&&dt.nodeStart(this.name);try{if(r.isPlayer&&o.gameState.autopilotControls.isManuallyMoving)return this.setLastStatus(r,E.FAILURE),this.name&&N.recordNodeExecution(l,this.name,this.getLastStatus(r),o.gameState.time,this.depth,"Manual movement active, AI blocked."),this.getLastStatus(r);const[a,u]=Dn(this.child.execute(r,o,l));return this.setLastStatus(r,a),this.name&&N.recordNodeExecution(l,this.name,this.getLastStatus(r),o.gameState.time,this.depth,u),this.getLastStatus(r)}finally{this.name&&dt.nodeEnd()}}}class Rs extends Kn{constructor(r,o,l=0){super();De(this,"name");De(this,"depth");this.child=r,this.name=o,this.depth=l;const a=(u,d)=>{u.depth=d,u.children?u.children.forEach(h=>a(h,d+1)):u.child&&a(u.child,d+1)};a(this.child,(this.depth??0)+1)}execute(r,o,l){this.name&&dt.nodeStart(this.name);try{if(r.isPlayer)return this.setLastStatus(r,E.FAILURE),this.name&&N.recordNodeExecution(l,this.name,this.getLastStatus(r),o.gameState.time,this.depth,"Player controlled, AI blocked."),this.getLastStatus(r);const[a,u]=Dn(this.child.execute(r,o,l));return this.setLastStatus(r,a),this.name&&N.recordNodeExecution(l,this.name,this.getLastStatus(r),o.gameState.time,this.depth,u),this.getLastStatus(r)}finally{this.name&&dt.nodeEnd()}}}function oC(e){return new ye([new oe((n,r)=>{const o=n.hunger>=gm,l=n.food.length>0,a=!n.eatingCooldownTime||r.gameState.time>=n.eatingCooldownTime;return[!!(n.isAdult&&o&&l&&a),`${Math.floor(n.hunger-gm)}, ${n.food.length}, ${n.eatingCooldownTime?Math.floor(n.eatingCooldownTime-r.gameState.time):""}`]},"Can Eat",e+1),new ue(n=>(n.direction={x:0,y:0},n.target=void 0,n.activeAction="eating",E.RUNNING),"Eat",e+1)],"Eating",e)}function sC(e){return new ye([new oe((n,r,o)=>{if(n.isAdult&&n.hitpoints>n.maxHitpoints*j0||n.isAdult&&n.hunger>qA)return!1;const l=rw(n.id,r.gameState);return l?(N.set(o,"fleeThreat",l.id),!0):!1},"Should Flee",e+1),new ue((n,r,o)=>{const l=N.get(o,"fleeThreat"),a=l&&r.gameState.entities.entities[l];if(!a)return E.FAILURE;n.activeAction="moving";const u=ze(a.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),d=nt(u),h=Nn(n.position,Rt(d,V0));return n.target={x:(h.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(h.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},n.direction=d,E.RUNNING},"Execute Flee",e+1)],"Flee",e)}const Ps="foodSource";function aC(e){const n=new ue((o,l,a)=>{const u=new Map,d=Fe(o,l.gameState,"berryBush",ym,m=>{if(m.food.length===0)return!1;if(!m.ownerId||!m.claimedUntil||l.gameState.time>=m.claimedUntil)return!0;const y=l.gameState.entities.entities[m.ownerId];if(!y||y.leaderId===o.leaderId)return!0;const S=u.get(y.id)??K(o.position,y.position,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height);return u.set(y.id,S),S>wI}),h=Fe(o,l.gameState,"corpse",ym,m=>m.food.length>0);let g=null;if(d&&h){const m=K(o.position,d.position,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height),y=K(o.position,h.position,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height);g=m<=y?d:h}else g=d||h;return g?(N.set(a,Ps,g.id),[E.SUCCESS,`Found food: ${g.type} at ${g.position.x.toFixed(0)},${g.position.y.toFixed(0)}`]):[E.FAILURE,"No food source found"]},"Find Closest Food Source",e+4),r=new ue((o,l,a)=>{const u=N.get(a,Ps),d=u&&l.gameState.entities.entities[u];return!d||d.food.length===0?(N.delete(a,Ps),[E.FAILURE,"Food source is invalid or depleted"]):K(o.position,d.position,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height)<Or?(o.activeAction="gathering",o.direction={x:0,y:0},o.target=d.id,N.delete(a,Ps),[E.SUCCESS,`Gathering from ${d.type}`]):(o.activeAction="moving",o.target=d.id,o.direction=qt(o.position,d.position,l.gameState.mapDimensions),[E.RUNNING,`Moving to ${d.type}`])},"Move To Food and Gather",e+3);return new ye([new oe((o,l)=>{const a=o.food.length<o.maxFood,u=o.hunger>xA,d=Pt(l.gameState,o).filter(h=>h.hunger>Pf);return[(o.isAdult&&a&&(u||d.length>0))??!1,`${u?"H":""}, ${d.length>0?" HC("+d.length+")":""}`]},"Should Gather Food",e+1),new Mn([new ye([new oe((o,l,a)=>N.has(a,Ps),"Has Food Source?",e+2),r],"Continue Gathering Action",e+2),new ye([new ta(n,oI,"Cache Food Source Search",e+3),r],"Find New Food Source and Gather",e+2)],"Perform or Start Gathering",e+1)],"Gather Food",e)}function lC(e){return new ue((n,r,o)=>(n.activeAction="idle",n.direction={x:0,y:0},n.target=void 0,N.set(o,"wanderTarget",void 0),E.SUCCESS),"Idle",e)}const _l="procreationWanderStartTime",Vm=(e,n,r)=>n.find(o=>Mr(e,o,r));function uC(e){const n=new oe((a,u,d)=>{const h=Am(a,u.gameState,Or),g=Vm(a,h,u.gameState);return g?(N.set(d,"procreationPartner",g.id),!0):!1},"Find Immediate Partner"),r=new ue((a,u,d)=>{var m;const h=N.get(d,"procreationPartner"),g=h&&u.gameState.entities.entities[h];return g?(a.activeAction="procreating",a.target=void 0,N.delete(d,"procreationPartner"),N.delete(d,_l),(m=a.partnerIds)!=null&&m.includes(g.id)||(a.partnerIds=a.partnerIds?[...a.partnerIds,g.id]:[g.id]),E.SUCCESS):E.FAILURE},"Start Procreating"),o=new oe((a,u,d)=>{const h=Am(a,u.gameState,KA),g=Vm(a,h,u.gameState);return g?(N.set(d,"procreationPartner",g.id),!0):!1},"Locate Distant Partner"),l=new ue((a,u,d)=>{const h=N.get(d,"procreationPartner"),g=h&&u.gameState.entities.entities[h];if(!g)return E.FAILURE;if(K(a.position,g.position,u.gameState.mapDimensions.width,u.gameState.mapDimensions.height)<Or)return E.SUCCESS;a.activeAction="moving",a.target=g.id;const y=ze(a.position,g.position,u.gameState.mapDimensions.width,u.gameState.mapDimensions.height);return a.direction=nt(y),E.RUNNING},"Move Towards Partner");return new ye([new oe(a=>!(!a.isAdult||a.gender==="female"&&a.isPregnant||a.age<MI||a.gender==="female"&&a.age>Z0),"Is Fertile (age, not pregnant)",e+1),new oe(a=>a.hunger<Nr,"Is Healthy (hunger)",e+1),new oe(a=>(a.procreationCooldown||0)<=0,"Is Ready (cooldown)",e+1),new Mn([new ye([new oe((a,u)=>sv(a.position,u.gameState,"berryBush",XA)>=VA,"Is Environment Viable (food)",e+3),new ue((a,u,d)=>(N.delete(d,_l),E.SUCCESS),"Clear Wander Timer",e+3)],"Sufficient Food Path",e+2),new ye([new oe((a,u)=>{if(a.gender==="male"){const d=Pt(u.gameState,a);return!hi(d)}return!1},"Is Male Without Heir",e+3),new ue((a,u,d)=>{const h=N.get(d,_l);if(h===void 0)return N.set(d,_l,u.gameState.time),[E.FAILURE,"Starting heirless wander timer"];const g=u.gameState.time-h;return g>=kI?[E.SUCCESS,`Wandered for ${g.toFixed(1)}h, proceeding without food`]:[E.FAILURE,`Wandering for heir, ${g.toFixed(1)}h elapsed`]},"Check Wander Timer",e+3)],"Heirless Desperation Path",e+2)],"Check Environment Or Desperation",e+1),new oe((a,u,d)=>{var g;const h=N.get(d,"procreationPartner");return h&&((g=h.partnerIds)!=null&&g.length)&&!h.partnerIds.includes(a.id)&&h.partnerIds.map(m=>u.gameState.entities.entities[m]).filter(m=>!!m).some(m=>K(a.position,m.position,u.gameState.mapDimensions.width,u.gameState.mapDimensions.height)<II)?[!1,"Partner's primary partner is too close"]:!0},"Is Partner's Primary Partner Nearby",e+1),new Mn([new ye([n,r],"Procreate With Immediate Partner",e+2),new kr(nI,new ye([o,l],"Seek Distant Partner Action",e+3),"Seek Distant Partner Cooldown",e+2)],"Find Partner And Procreate",e+1)],"Procreate",e)}const so="attackTarget",mr="homeCenter",Dd=150;function cC(e){return new ye([new oe((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const{gameState:l}=r;if(n.activeAction==="attacking"&&n.attackTargetId){const u=l.entities.entities[n.attackTargetId];if(u&&u.hitpoints>0&&K(n.position,u.position,l.mapDimensions.width,l.mapDimensions.height)<=Dd){if(N.set(o,so,u.id),!N.get(o,mr)){const d=n.leaderId?Dr(n.leaderId,l):Kl(n,l).length>0?Im(n,l):n.position;N.set(o,mr,d)}return!0}}const a=Fe(n,l,"human",Dd,u=>u.hitpoints>0&&Fo(n,u,l));if(a){N.set(o,so,a.id);const u=n.leaderId?Dr(n.leaderId,l):Kl(n,l).length>0?Im(n,l):n.position;return N.set(o,mr,u),!0}return N.set(o,so,void 0),N.set(o,mr,void 0),!1},"Find Attack Target",e+1),new ue((n,r,o)=>{const l=N.get(o,so),a=l&&r.gameState.entities.entities[l],u=N.get(o,mr);if(!a||!u)return E.FAILURE;const{gameState:d}=r;return K(n.position,u,d.mapDimensions.width,d.mapDimensions.height)>Y0?(n.activeAction="idle",n.attackTargetId=void 0,N.set(o,so,void 0),N.set(o,mr,void 0),E.FAILURE):a.hitpoints<=0||K(n.position,a.position,d.mapDimensions.width,d.mapDimensions.height)>Dd?(n.activeAction==="attacking"&&(n.activeAction="idle",n.attackTargetId=void 0),N.set(o,so,void 0),N.set(o,mr,void 0),E.SUCCESS):(n.activeAction==="attacking"&&n.attackTargetId===a.id||(n.activeAction="attacking",n.attackTargetId=a.id),E.RUNNING)},"Execute Attack",e+1)],"Attack",e)}const dC=(e,n,r)=>{const o=Pt(n.gameState,e).filter(u=>!u.isAdult);if(o.length===0)return E.FAILURE;let l=null,a=Pf;for(const u of o)u.hunger>=a&&(a=u.hunger,l=u);return l?(N.set(r,"targetChild",l.id),E.SUCCESS):E.FAILURE},fC=(e,n,r)=>{const o=N.get(r,"targetChild"),l=o&&n.gameState.entities.entities[o];return l?K(e.position,l.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>Nf?(e.activeAction="moving",e.target=l.id,e.direction=qt(e.position,l.position,n.gameState.mapDimensions),E.RUNNING):(e.activeAction="feeding",e.target=void 0,N.set(r,"targetChild",void 0),E.SUCCESS):E.FAILURE};function hC(e){return new ye([new oe(n=>(n.isAdult&&n.food.length>0&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child",e+1),new ue(dC,"Find Hungriest Child",e+1),new ue(fC,"Move To Child and Feed",e+1)],"Feed Child",e)}function pC(e){return new ye([new oe(n=>!n.isAdult&&n.hunger>=Pf,"Is Hungry Child",e+1),new ue((n,r,o)=>{const l=tw(n,r.gameState);if(l.length===0)return E.FAILURE;const a=Fe(n,r.gameState,"human",HI,u=>l.some(d=>d.id===u.id)&&u.food.length>0);return a?(N.set(o,"targetParent",a.id),E.SUCCESS):E.FAILURE},"Find Parent With Food",e+1),new ue((n,r,o)=>{const l=N.get(o,"targetParent"),a=l&&r.gameState.entities.entities[l];if(!a)return E.FAILURE;const u=K(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",u<=Nf?(n.target=void 0,E.SUCCESS):(n.target=a.id,n.activeAction="moving",E.RUNNING)},"Move To Parent",e+1)],"Seek Food From Parent",e)}const Ns="plantingSpot";function gC(e,n,r,o){const l=ze(e,n,r,o);return Nn(e,l)}function mC(e){const n=new ue((o,l,a)=>{const u=N.get(a,Ns);if(!u||On(u,l.gameState,Ki,o.id))return N.delete(a,Ns),[E.FAILURE,"Planting spot is missing"];const d=gC(o.position,u,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height),h=K(o.position,d,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height);return h>Or?(o.activeAction="moving",o.target=d,o.direction=qt(o.position,d,l.gameState.mapDimensions),[E.RUNNING,"Moving to planting spot: "+h.toFixed(2)+" units away"]):On(u,l.gameState,Ki,o.id)?(N.delete(a,Ns),[E.FAILURE,"Planting spot is now occupied"]):(o.activeAction="planting",o.target=u,[E.RUNNING,"Planting state initiated"])},"Move To Spot and Plant",e+3),r=new ue((o,l,a)=>{let u=ww(o,l.gameState);return u||(u=yw(o,l.gameState)),u?(N.set(a,Ns,u),[E.SUCCESS,`Found new spot at ${u.x.toFixed(0)}, ${u.y.toFixed(0)}`]):[E.FAILURE,"No suitable planting spot found"]},"Find Optimal Planting Spot",e+3);return new ye([new oe(o=>{const l=o.food.filter(u=>u.type===Xn.Berry).length>=_o,a=o.hunger<$A;return(o.isAdult&&l&&a)??!1},"Can Plant",e+1),new oe((o,l)=>{const a=sv(o.position,l.gameState,"berryBush",BA),u=Pt(l.gameState,o);return!(u.length===0||a>=u.length*5)},"Has Not Enough Nearby Bushes",e+1),new Mn([new ye([new oe((o,l,a)=>N.has(a,Ns),"Has Planting Spot?",e+2),n],"Continue Planting Action",e+2),new kr(rI,r,"Find Planting Spot Cooldown",e+2)],"Perform or Start Planting",e+1)],"Plant Bush",e)}const Md="enemiesNearby";function vC(e){const n=new oe(a=>a.id===a.leaderId,"Is Leader?",e+1),r=new oe(a=>!a.isCallingToAttack,"Is Not Already Calling?",e+1),o=new ue((a,u,d)=>{const h=Lf(a,u.gameState,Rv);return h.length>0?(N.set(d,Md,h.map(g=>g.id)),E.SUCCESS):E.FAILURE},"Find Nearby Enemies",e+1),l=new Mn([new ye([new oe((a,u,d)=>{const h=N.get(d,Md),g=h==null?void 0:h.map(w=>u.gameState.entities.entities[w]).filter(w=>!!w);if(!g||g.length===0)return!1;const m=Xs(a.id,u.gameState),y=ql(m),S=ql(g);return y>S*pI},"Is Strong Enough?",e+3),new ue((a,u)=>(a.isCallingToAttack=!0,a.callToAttackEndTime=u.gameState.time+Po,Oe(u.gameState,le.CallToAttack,a.position,Po),Ne(u,ve.CallToAttack,a.position),a.activeAction="idle",a.target=void 0,E.SUCCESS),"Issue Call to Attack",e+3)],"Attack",e+2),new ue((a,u,d)=>{const h=N.get(d,Md),g=h==null?void 0:h.map(A=>u.gameState.entities.entities[A]).filter(A=>!!A);if(!g||g.length===0)return E.FAILURE;const m=g.map(A=>A.position),y=Ff(m),S=ze(y,a.position,u.gameState.mapDimensions.width,u.gameState.mapDimensions.height),w=nt(S),I=Nn(a.position,Rt(w,V0*2));return a.activeAction="moving",a.target={x:(I.x%u.gameState.mapDimensions.width+u.gameState.mapDimensions.width)%u.gameState.mapDimensions.width,y:(I.y%u.gameState.mapDimensions.height+u.gameState.mapDimensions.height)%u.gameState.mapDimensions.height},a.direction=w,E.SUCCESS},"Retreat",e+2)],"Attack or Retreat",e+2);return new ye([n,r,o,new kr(gI,l,"Leader Combat Cooldown",e+1)],"Leader Combat Strategy",e)}const kd="combatTarget",Fd="homeCenter";function yC(e){const n=new oe(u=>u.isAdult&&u.leaderId?u.id!==u.leaderId:!1,"Is Tribe Follower?",e+1),r=new oe(u=>u.hunger<zA&&u.hitpoints>=u.maxHitpoints*j0,"Is Fit for Combat?",e+1),o=new oe((u,d)=>{const h=d.gameState.entities.entities[u.leaderId];return!!(h!=null&&h.isCallingToAttack)},"Is Leader Calling to Attack?",e+1),l=new ue((u,d,h)=>{const{gameState:g}=d,m=g.entities.entities[u.leaderId];if(!m)return E.FAILURE;const y=Lf(m,g,ZA);if(y.length===0)return E.FAILURE;y.sort((S,w)=>{const I=K(u.position,S.position,g.mapDimensions.width,g.mapDimensions.height),A=K(u.position,w.position,g.mapDimensions.width,g.mapDimensions.height);return I-A});for(const S of y)if(Sw(m.id,S.id,g)<QA){N.set(h,kd,S.id);const I=Dr(m.id,g);return N.set(h,Fd,I),E.SUCCESS}return E.FAILURE},"Find Best Target",e+1),a=new ue((u,d,h)=>{const g=N.get(h,kd),m=g&&d.gameState.entities.entities[g],y=N.get(h,Fd);if(!m||!y)return E.FAILURE;const{gameState:S}=d;return K(u.position,y,S.mapDimensions.width,S.mapDimensions.height)>Y0?(u.activeAction==="attacking"&&u.attackTargetId===m.id&&(u.activeAction="idle",u.attackTargetId=void 0),N.set(h,kd,void 0),N.set(h,Fd,void 0),E.FAILURE):((!u.lastTargetAcquiredEffectTime||d.gameState.time-u.lastTargetAcquiredEffectTime>Ge*5)&&(Oe(d.gameState,le.TargetAcquired,u.position,Ge,u.id),u.lastTargetAcquiredEffectTime=d.gameState.time),u.activeAction="attacking",u.attackTargetId=m.id,u.target=void 0,E.RUNNING)},"Attack Target",e+1);return new ye([n,r,o,l,a],"Tribe Member Combat",e)}function SC(e){const n=new oe((m,y)=>{if(!m.isAdult||m.gender!=="male")return!1;const S=m.partnerIds&&m.partnerIds.length>0,w=Pt(y.gameState,m).length>0;return S||w},"Is Adult Male With Family?",e+1),r=new oe((m,y)=>{var A;const S=At(y.gameState);if(S){const _=hi(Pt(y.gameState,S));if((_==null?void 0:_.id)===m.id)return!1}if(!m.fatherId)return!1;const w=y.gameState.entities.entities[m.fatherId];return!w||((A=hi(Pt(y.gameState,w)))==null?void 0:A.id)===m.id?!1:K(m.position,w.position,y.gameState.mapDimensions.width,y.gameState.mapDimensions.height)<tI},"Is Too Close To Father?",e+1),o=new oe((m,y,S)=>N.get(S,"territoryMoveTarget")!==void 0,"Is Moving To Territory?",e+3),l=new ue((m,y,S)=>{const w=N.get(S,"territoryMoveTarget"),I=N.get(S,"territoryMoveStartTime");if(!w||!I)return[E.FAILURE,"Missing move data"];if(y.gameState.time-I>JA)return N.delete(S,"territoryMoveTarget"),N.delete(S,"territoryMoveStartTime"),[E.FAILURE,"Territory move timed out"];if(K(m.position,w,y.gameState.mapDimensions.width,y.gameState.mapDimensions.height)<Or)return N.delete(S,"territoryMoveTarget"),N.delete(S,"territoryMoveStartTime"),[E.SUCCESS,"Arrived at new territory"];m.activeAction="moving",m.target=w;const F=ze(m.position,m.target,y.gameState.mapDimensions.width,y.gameState.mapDimensions.height);return m.direction=nt(F),[E.RUNNING,"Continuing move to territory"]},"Check Timeout & Arrival",e+3),a=new ye([o,l],"Handle In-Progress Move",e+2),u=new oe((m,y,S)=>N.get(S,"territoryMoveTarget")===void 0,"Should Start New Move?",e+4),d=new ue((m,y,S)=>{const w=Uf(m.position,y.gameState.mapDimensions.width/4,y.gameState.mapDimensions.width,y.gameState.mapDimensions.height);N.set(S,"territoryMoveTarget",w),N.set(S,"territoryMoveStartTime",y.gameState.time),m.activeAction="moving",m.target=w;const I=ze(m.position,m.target,y.gameState.mapDimensions.width,y.gameState.mapDimensions.height);return m.direction=nt(I),[E.RUNNING,"Started moving to new territory"]},"Start New Territory Move",e+4),h=new ye([u,d],"Start New Territory Move Action",e+3),g=new Mn([a,new kr(iI,h,"Establish Territory Cooldown",e+2)],"Establish or Continue Move",e+1);return new ye([n,r,g],"Establish Family Territory",e)}function TC(e){return new ye([new ue((n,r,o)=>{const l=iw(n,r.gameState);return l?(N.set(o,"patriarchTarget",l.id),[E.SUCCESS,`Found patriarch: ${l.id}`]):(N.delete(o,"patriarchTarget"),[E.FAILURE,"No patriarch found"])},"Find Patriarch",e+1),new ue((n,r,o)=>{const l=N.get(o,"patriarchTarget"),a=l&&r.gameState.entities.entities[l];if(!a)return[E.FAILURE,"Patriarch target missing from blackboard"];const u=K(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(u>W0){n.activeAction="moving",n.target=a.id;const d=ze(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=nt(d),[E.RUNNING,`Moving to patriarch at ${u.toFixed(0)}`]}return n.activeAction="idle",n.target=void 0,n.direction={x:0,y:0},[E.SUCCESS,`Arrived at patriarch at ${u.toFixed(0)}`]},"Move Towards Patriarch",e+1)],"Follow Patriarch",e)}const Ud="tribeSplitMigrationTarget";function AC(e){const n=new ye([new oe((r,o)=>{const{canSplit:l,progress:a}=Wf(r,o.gameState);return l?[!0,`Progress: ${(a??0)*100}%`]:[!1,"Cannot split"]},"Can Split Tribe?",e+2),new ue((r,o,l)=>{const{gameState:a}=o;let u=N.get(l,Ud);if(!u){if(!r.leaderId)return E.FAILURE;const h=Dr(r.leaderId,a),g=t_(h,r,a);if(g)N.set(l,Ud,g),u=g;else return E.FAILURE}return K(r.position,u,a.mapDimensions.width,a.mapDimensions.height)<Or?(N.delete(l,Ud),r.activeAction="idle",r.target=void 0,E.SUCCESS):(r.activeAction="moving",r.target=u,E.RUNNING)},"Move to New Territory",e+2),new ue((r,o)=>(Yf(r,o.gameState),E.SUCCESS),"Perform Tribe Split",e+2)],"Tribe Split Action",e+1);return new kr(kE,n,"Tribe Split Cooldown",e)}const Cl="jealousyAttackTarget";function IC(e){return new ye([new oe((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const l=pw(n,r.gameState,mI);return l?(N.set(o,Cl,l.id),[!0,`Partner cheating with ${l.id}`]):(N.delete(o,Cl),!1)},"Check for Infidelity",e+1),new ue((n,r,o)=>{const l=N.get(o,Cl),a=l&&r.gameState.entities.entities[l];return!a||a.hitpoints<=0?(N.delete(o,Cl),[E.FAILURE,"Target is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?E.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[E.RUNNING,`Attacking ${a.id}`])},"Execute Jealousy Attack",e+1)],"Jealousy Attack",e)}const Rl="defendAggressor";function wC(e){return new ye([new oe((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const l=mw(n,r.gameState,vI);return l?(N.set(o,Rl,l.aggressor.id),[!0,`Family member ${l.familyMember.id} attacked by ${l.aggressor.id}`]):(N.delete(o,Rl),!1)},"Check Family Under Attack",e+1),new ue((n,r,o)=>{const l=N.get(o,Rl),a=l&&r.gameState.entities.entities[l];return!a||a.hitpoints<=0?(N.delete(o,Rl),[E.FAILURE,"Target invalid/dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?E.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[E.RUNNING,`Attacking aggressor ${a.id}`])},"Execute Family Defense Attack",e+1)],"Defend Family",e)}const Pl="bushIntruder";function EC(e){return new ye([new oe((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const l=gw(n,r.gameState,yI);return l?(N.set(o,Pl,l.id),[!0,`Intruder ${l.id} stealing berries`]):(N.delete(o,Pl),!1)},"Check For Intruders on Bushes",e+1),new ue((n,r,o)=>{const l=N.get(o,Pl),a=l&&r.gameState.entities.entities[l];return!a||a.hitpoints<=0?(N.delete(o,Pl),[E.FAILURE,"Intruder is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?E.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[E.RUNNING,`Attacking intruder ${a.id}`])},"Execute Bush Defense Attack",e+1)],"Defend Claimed Bush",e)}const Nl="desperateAttackTarget";function _C(e){return new ye([new oe(n=>n.hunger>SI,"Is Starving",e+1),new oe((n,r)=>{if(!n.isAdult)return[!1,"Not an adult"];const o=Fe(n,r.gameState,"berryBush",Tt,a=>a.food.length>0),l=Fe(n,r.gameState,"corpse",Tt,a=>a.food.length>0);return!o&&!l},"No Other Food Available",e+1),new oe((n,r,o)=>{const l=vw(n,r.gameState);return l?(N.set(o,Nl,l.id),[!0,`Found weak target ${l.id}`]):(N.delete(o,Nl),!1)},"Find Weak Target",e+1),new ue((n,r,o)=>{const l=N.get(o,Nl),a=l&&r.gameState.entities.entities[l];return!a||a.hitpoints<=0?(N.delete(o,Nl),[E.FAILURE,"Target is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?E.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[E.RUNNING,`Desperately attacking ${a.id}`])},"Execute Desperate Attack",e+1)],"Desperate Attack",e)}function CC(e,n,r,o){const l=e.entities.entities[r.targetEntityId];return!l||!("hitpoints"in l)||l.hitpoints<=0?(e.autopilotControls.activeAutopilotAction=void 0,E.FAILURE):K(n.position,l.position,e.mapDimensions.width,e.mapDimensions.height)<=zl?(n.activeAction="attacking",n.attackTargetId=l.id,e.autopilotControls.activeAutopilotAction=void 0,E.SUCCESS):(n.activeAction="moving",n.target=l.id,n.direction=qt(n.position,l.position,e.mapDimensions),E.RUNNING)}function RC(e){return new ye([new oe((n,r)=>n.isPlayer===!0&&!!r.gameState.autopilotControls.activeAutopilotAction,"Has Player Command",e+1),new ue((n,r)=>{const{gameState:o}=r,l=o.autopilotControls.activeAutopilotAction;if(!l)return E.FAILURE;switch(l.action){case Te.AutopilotMove:{const a=l.position;return K(n.position,a,o.mapDimensions.width,o.mapDimensions.height)<EI?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction==="moving"&&(n.activeAction="idle",n.target=void 0),E.SUCCESS):(n.activeAction="moving",n.target=a,n.direction=qt(n.position,a,o.mapDimensions),E.RUNNING)}case Te.AutopilotGather:{const a=o.entities.entities[l.targetEntityId];return!a||a.food.length===0?(o.autopilotControls.activeAutopilotAction=void 0,E.FAILURE):K(n.position,a.position,o.mapDimensions.width,o.mapDimensions.height)>Or?(n.activeAction="moving",n.target=a.id,n.direction=qt(n.position,a.position,o.mapDimensions),E.RUNNING):(n.activeAction="gathering",n.target=a.id,o.autopilotControls.activeAutopilotAction=void 0,E.SUCCESS)}case Te.AutopilotAttack:return CC(o,n,l);case Te.AutopilotProcreate:{const a=o.entities.entities[l.targetEntityId];return!a||a.type!=="human"||!Mr(n,a,r.gameState)?(o.autopilotControls.activeAutopilotAction=void 0,E.FAILURE):K(n.position,a.position,o.mapDimensions.width,o.mapDimensions.height)<=zl?(n.activeAction="procreating",o.autopilotControls.activeAutopilotAction=void 0,E.SUCCESS):(n.activeAction="moving",n.target=a.id,n.direction=qt(n.position,a.position,o.mapDimensions),E.RUNNING)}case Te.AutopilotPlant:{if(n.activeAction==="planting")return E.RUNNING;const a=l.position;return On(a,o,Ki,n.id)?(o.autopilotControls.activeAutopilotAction=void 0,E.FAILURE):K(n.position,a,o.mapDimensions.width,o.mapDimensions.height)<=zl?(n.activeAction="planting",n.target=a,o.autopilotControls.activeAutopilotAction=void 0,o.hasPlayerPlantedBush=!0,E.RUNNING):(n.activeAction="moving",n.target=a,n.direction=qt(n.position,a,o.mapDimensions),E.RUNNING)}case Te.AutopilotFeedChild:{const a=o.entities.entities[l.targetEntityId];return!a||a.type!=="human"||a.isAdult||n.food.length===0?(o.autopilotControls.activeAutopilotAction=void 0,E.FAILURE):K(n.position,a.position,o.mapDimensions.width,o.mapDimensions.height)<=zl?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction="feeding",E.SUCCESS):(n.activeAction="moving",n.target=a.id,n.direction=qt(n.position,a.position,o.mapDimensions),E.RUNNING)}case Te.AutopilotFollowMe:{const a=o.entities.entities[l.targetEntityId];return!a||a.type!=="human"||a.id!==a.leaderId?(o.autopilotControls.activeAutopilotAction=void 0,E.FAILURE):K(n.position,a.position,o.mapDimensions.width,o.mapDimensions.height)<=W0?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction==="moving"&&(n.activeAction="idle"),E.SUCCESS):(n.activeAction="moving",n.target=a.id,n.direction=qt(n.position,a.position,o.mapDimensions),E.RUNNING)}default:return o.autopilotControls.activeAutopilotAction=void 0,E.FAILURE}},"Execute Player Command",e+1)],"Player Command Handler",e)}function PC(e){return new ye([new oe(n=>!!n.leaderId&&n.leaderId!==n.id,"Is Follower",e+1),new oe((n,r)=>{if(!n.leaderId)return!1;const o=r.gameState.entities.entities[n.leaderId];return!!o&&o.isCallingToFollow===!0},"Is Leader Calling To Follow",e+1),new oe(n=>n.hunger<jA,"Is Not Critically Hungry",e+1),new ue((n,r)=>{if(!n.leaderId)return E.FAILURE;const o=r.gameState.entities.entities[n.leaderId];return o?K(n.position,o.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>YA?(n.activeAction="moving",n.target=o.id,n.direction=qt(n.position,o.position,r.gameState.mapDimensions),E.RUNNING):(n.activeAction==="moving"&&n.target===o.id&&(n.activeAction="idle",n.target=void 0),E.SUCCESS):E.FAILURE},"Execute Follow Leader",e+1)],"Follow Leader Command",e)}const Xm="tribeMigrationCheckCooldown";function NC(e){const n=new ye([new oe(o=>!!o.leaderId&&o.leaderId===o.id,"Is Tribe Leader",e+2),new oe((o,l)=>{const a=N.get(o.aiBlackboard,Xm);return a?l.gameState.time-a>=vm:!0},"Is Migration Check Cooldown Over",e+2),new ue((o,l)=>{o.aiBlackboard&&N.set(o.aiBlackboard,Xm,l.gameState.time);const a=Tw(o,l.gameState);return a?(o.isCallingToFollow=!0,o.callToFollowEndTime=l.gameState.time+Ks,o.target=a,o.activeAction="moving",E.SUCCESS):E.FAILURE},"Execute Tribe Migration",e+2)],"Tribe Migration Strategy",e+1),r=new ta(n,of,"Cache Tribe Migration",e+1);return new kr(vm,r,"Tribe Migration Cooldown",e)}function OC(e){const n=new oe(o=>o.id===o.leaderId,"Is Leader?",e+1),r=new ue((o,l)=>{var g;const{gameState:a}=l,u=Xs(o.id,a),d=ql(u),h=rv(a).filter(m=>m.leaderId!==o.id);for(const m of h){const y=Xs(m.leaderId,a),S=ql(y),w=((g=o.diplomacy)==null?void 0:g[m.leaderId])||xt.Friendly;d>S*hI?w!==xt.Hostile&&o.diplomacy&&(o.diplomacy[m.leaderId]=xt.Hostile):w!==xt.Friendly&&o.diplomacy&&(o.diplomacy[m.leaderId]=xt.Friendly)}return E.SUCCESS},"Evaluate Diplomacy",e+2);return new ye([n,new kr(aI,r,"Diplomacy Cooldown",e+1)],"Manage Diplomacy",e)}const Ol="huntTarget";function DC(e){return new ye([new ta(new oe((r,o,l)=>{var h;if(!r.isAdult)return[!1,"Not an adult"];if(!r.leaderId)return[!1,"Not in a tribe"];const a=Dr(r.leaderId,o.gameState),u=((h=ov(a,o.gameState,"berryBush",mm))==null?void 0:h.map(g=>g.id))||[],d=Fe(a,o.gameState,"prey",mm,g=>typeof g.target=="number"&&u.includes(g.target));return d?(N.set(l,Ol,d.id),!0):!1},"Find Prey Target",e+2),sI,"Cache Find Prey",e+1),new Jl(new ue((r,o,l)=>{if(!r.leaderId)return E.FAILURE;const a=N.get(l,Ol);if(!a)return E.FAILURE;const u=o.gameState.entities.entities[a];if(!u||u.hitpoints<=0)return N.delete(l,Ol),r.activeAction="idle",r.attackTargetId=void 0,E.SUCCESS;const{gameState:d}=o,h=Dr(r.leaderId,d);return K(r.position,h,d.mapDimensions.width,d.mapDimensions.height)>WA?(N.delete(l,Ol),r.activeAction="idle",r.attackTargetId=void 0,E.FAILURE):(r.activeAction="attacking",r.attackTargetId=u.id,E.RUNNING)},"Hunt Prey Action",e+2),rf,"Hunt Prey Timeout",e+1)],"Human Hunt Prey Sequence",e)}const Dl="defendTarget",Ld=150;function MC(e){return new ye([new oe((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult - children flee instead"];const{gameState:l}=r;if(n.activeAction==="attacking"&&n.attackTargetId){const u=l.entities.entities[n.attackTargetId];if(u&&u.type==="predator"&&u.hitpoints>0&&K(n.position,u.position,l.mapDimensions.width,l.mapDimensions.height)<=Ld)return N.set(o,Dl,u.id),[!0,"Continuing defense"]}const a=Fe(n,l,"predator",Ld,u=>u.hitpoints>0&&(u.isAdult||!1));if(a){const u=K(n.position,a.position,l.mapDimensions.width,l.mapDimensions.height),d=a.attackTargetId===n.id,h=u<80;if(d||h)return N.set(o,Dl,a.id),[!0,"Predator threat detected"]}return N.set(o,Dl,void 0),[!1,"No predator threat"]},"Detect Predator Threat",e+1),new ue((n,r,o)=>{const l=N.get(o,Dl),a=l&&r.gameState.entities.entities[l];if(!a)return E.FAILURE;const{gameState:u}=r,d=K(n.position,a.position,u.mapDimensions.width,u.mapDimensions.height);return a.hitpoints<=0||d>Ld*1.5?(n.activeAction="idle",n.attackTargetId=void 0,E.SUCCESS):(n.activeAction="attacking",n.attackTargetId=a.id,E.RUNNING)},"Defend Against Predator",e+1)],"Human Defend Against Predator",e)}function kC(e){return new ye([new oe((n,r,o)=>{const l=Fe(n,r.gameState,"predator",$t*2,()=>!0),a=Fe(n,r.gameState,"human",$t*2,()=>!0);let u=null,d=1/0;if(l){const h=K(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);h<d&&(d=h,u=l)}if(a){const h=K(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);h<d&&(d=h,u=a)}return u&&d<$t*1.5?(N.set(o,"fleeThreat",u.id),N.set(o,"fleeDistance",d),!0):!1},"Detect Threat",e+1),new ue((n,r,o)=>{const l=N.get(o,"fleeThreat"),a=l&&r.gameState.entities.entities[l];if(!a)return E.FAILURE;n.activeAction="moving";const u=ze(a.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),d=nt(u),h=Nn(n.position,Rt(d,E_));return n.target={x:(h.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(h.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},n.direction=d,n.fleeCooldown=r.gameState.time+2,E.RUNNING},"Execute Flee",e+1)],"Prey Flee",e)}function FC(e){return new ye([new oe((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];if(n.hunger<=30||n.eatingCooldownTime&&n.eatingCooldownTime>r.gameState.time)return!1;const l=Fe(n,r.gameState,"berryBush",$t*10,a=>a.food.length>0);return l?K(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=$t?(N.set(o,"grazingTarget",l.id),!0):(N.set(o,"grazingTarget",l.id),N.set(o,"needToMoveToTarget",!0),!0):!1},"Find Berry Bush",e+1),new ue((n,r,o)=>{const l=N.get(o,"grazingTarget"),a=l&&r.gameState.entities.entities[l],u=N.get(o,"needToMoveToTarget");if(!a)return E.FAILURE;const d=K(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(d<=$t)return n.activeAction="grazing",n.target=a.id,n.direction={x:0,y:0},N.delete(o,"needToMoveToTarget"),E.RUNNING;if(u||d>$t){n.activeAction="moving",n.target=a.id;const h=qt(n.position,a.position,r.gameState.mapDimensions);return n.direction=h,E.RUNNING}return E.FAILURE},"Move to Bush or Graze",e+1)],"Prey Graze",e)}function UC(e){const n=new oe((a,u,d)=>{const h=Fe(a,u.gameState,"prey",$t,g=>g.id!==a.id&&g.gender!==a.gender&&!!g.isAdult&&g.age>=bs&&g.age<=Rd&&!g.isPregnant&&(!g.procreationCooldown||g.procreationCooldown<=0)&&g.hunger<200);return h?(N.set(d,"procreationPartner",h.id),!0):!1},"Find Immediate Partner",e+2),r=new ue((a,u,d)=>{const h=N.get(d,"procreationPartner"),g=h&&u.gameState.entities.entities[h];return g?(a.activeAction="procreating",a.target=g.id,a.direction={x:0,y:0},N.delete(d,"procreationPartner"),E.SUCCESS):E.FAILURE},"Start Procreating",e+2),o=new oe((a,u,d)=>{const h=Fe(a,u.gameState,"prey",$t*10,g=>g.id!==a.id&&g.gender!==a.gender&&!!g.isAdult&&g.age>=bs&&g.age<=Rd&&!g.isPregnant&&(!g.procreationCooldown||g.procreationCooldown<=0)&&g.hunger<200);return h?(N.set(d,"procreationPartner",h.id),!0):!1},"Locate Distant Partner",e+2),l=new ue((a,u,d)=>{const h=N.get(d,"procreationPartner"),g=h&&u.gameState.entities.entities[h];if(!g)return E.FAILURE;if(K(a.position,g.position,u.gameState.mapDimensions.width,u.gameState.mapDimensions.height)<=$t)return E.SUCCESS;a.activeAction="moving",a.target=g.id;const y=ze(a.position,g.position,u.gameState.mapDimensions.width,u.gameState.mapDimensions.height);return a.direction=nt(y),E.RUNNING},"Move Towards Partner",e+2);return new ye([new oe(a=>!!(a.isAdult&&!a.isPregnant&&a.age>=bs&&a.age<=Rd&&a.hunger<200&&(!a.procreationCooldown||a.procreationCooldown<=0)),"Is Fertile and Ready",e+1),new Mn([new ye([n,r],"Procreate With Immediate Partner",e+2),new ye([o,l],"Seek Distant Partner",e+2)],"Find Partner And Procreate",e+1)],"Prey Procreate",e)}const LC=(e,n,r)=>{const o=n.gameState.search.prey.byProperty("motherId",e.id).filter(u=>!u.isAdult&&u.type==="prey");if(o.length===0)return E.FAILURE;let l=null,a=pu;for(const u of o)u.hunger>=a&&(a=u.hunger,l=u);return l?(N.set(r,"targetChild",l.id),E.SUCCESS):E.FAILURE},BC=(e,n,r)=>{const o=N.get(r,"targetChild"),l=o&&n.gameState.entities.entities[o];return l?K(e.position,l.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>Uo?(e.activeAction="moving",e.target=l.id,e.direction=qt(e.position,l.position,n.gameState.mapDimensions),E.RUNNING):(e.activeAction="feeding",e.target=void 0,N.set(r,"targetChild",void 0),E.SUCCESS):E.FAILURE};function HC(e){return new ye([new oe(n=>(n.isAdult&&n.gender==="female"&&n.hunger<80&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child (Female Only)",e+1),new ue(LC,"Find Hungriest Prey Child",e+1),new ue(BC,"Move To Child and Feed",e+1)],"Feed Prey Child",e)}function GC(e){return new ye([new oe(n=>!n.isAdult&&n.hunger>=pu,"Is Hungry Prey Child",e+1),new ue((n,r,o)=>{if(!n.motherId)return E.FAILURE;const l=r.gameState.entities.entities[n.motherId];return l?(N.set(o,"targetParent",l.id),E.SUCCESS):E.FAILURE},"Find Female Parent",e+1),new ue((n,r,o)=>{const l=N.get(o,"targetParent"),a=l&&r.gameState.entities.entities[l];if(!a)return E.FAILURE;const u=K(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",u<=Uo?(n.target=void 0,E.SUCCESS):(n.target=a.id,n.activeAction="moving",E.RUNNING)},"Move To Female Parent",e+1)],"Seek Food From Female Parent",e)}function bC(e){return new ye([new oe((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];if(n.hunger<=50||n.huntCooldown&&n.huntCooldown>0)return!1;const l=Fe(n,r.gameState,"prey",co*10,a=>a.hitpoints>0);if(l){const a=K(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(a<=co)return N.set(o,"huntTarget",l.id),!0;if(a<=co*10)return N.set(o,"huntTarget",l.id),N.set(o,"needToApproach",!0),!0}return!1},"Find Prey Target",e+1),new Jl(new ue((n,r,o)=>{const l=N.get(o,"huntTarget"),a=l&&r.gameState.entities.entities[l],u=N.get(o,"needToApproach");if(!a||a.hitpoints<=0)return E.FAILURE;const d=K(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(d<=co)return n.activeAction="attacking",n.attackTargetId=a.id,n.target=a.id,n.direction={x:0,y:0},N.delete(o,"needToApproach"),E.RUNNING;if(u||d>co){n.activeAction="moving",n.target=a.id;const h=ze(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=nt(h),E.RUNNING}return E.FAILURE},"Hunt or Approach Prey",e+2),10,"Hunt Timeout (10 hour)",e+1)],"Predator Hunt",e)}function xC(e){return new ye([new oe((n,r,o)=>{const l=n.hunger>100,a=n.hitpoints<n.maxHitpoints*.5;if(!l&&!a||n.attackCooldown&&n.attackCooldown>0)return!1;const u=Fe(n,r.gameState,"human",Rn*2,d=>d.hitpoints>0);if(u){const d=K(n.position,u.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(d<=Rn)return N.set(o,"attackTarget",u.id),!0;if(l&&d<=Rn*2)return N.set(o,"attackTarget",u.id),N.set(o,"needToApproach",!0),!0}return!1},"Find Human Target",e+1),new ue((n,r,o)=>{const l=N.get(o,"attackTarget"),a=l&&r.gameState.entities.entities[l],u=N.get(o,"needToApproach");if(!a||a.hitpoints<=0)return E.FAILURE;const d=K(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(d<=Rn)return n.activeAction="attacking",n.attackTargetId=a.id,n.target=a.id,n.direction={x:0,y:0},N.delete(o,"needToApproach"),E.RUNNING;if(u||d>Rn){n.activeAction="moving",n.target=a.id;const h=ze(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=nt(h),E.RUNNING}return E.FAILURE},"Attack or Approach Human",e+1)],"Predator Attack Human",e)}function $C(e){const n=new oe((a,u,d)=>{const h=Fe(a,u.gameState,"predator",Vi,g=>g.id!==a.id&&g.gender!==a.gender&&!!g.isAdult&&g.age>=xs&&g.age<=Pd&&!g.isPregnant&&(!g.procreationCooldown||g.procreationCooldown<=0)&&g.hunger<200);return h?(N.set(d,"procreationPartner",h.id),!0):!1},"Find Immediate Partner",e+2),r=new ue((a,u,d)=>{const h=N.get(d,"procreationPartner"),g=h&&u.gameState.entities.entities[h];return g?(a.activeAction="procreating",a.target=g.id,a.direction={x:0,y:0},N.delete(d,"procreationPartner"),E.SUCCESS):E.FAILURE},"Start Procreating",e+2),o=new oe((a,u,d)=>{const h=Fe(a,u.gameState,"predator",Vi*10,g=>g.id!==a.id&&g.gender!==a.gender&&!!g.isAdult&&g.age>=xs&&g.age<=Pd&&!g.isPregnant&&(!g.procreationCooldown||g.procreationCooldown<=0)&&g.hunger<200);return h?(N.set(d,"procreationPartner",h.id),!0):!1},"Locate Distant Partner",e+2),l=new ue((a,u,d)=>{const h=N.get(d,"procreationPartner"),g=h&&u.gameState.entities.entities[h];if(!g)return E.FAILURE;if(K(a.position,g.position,u.gameState.mapDimensions.width,u.gameState.mapDimensions.height)<=Vi)return E.SUCCESS;a.activeAction="moving",a.target=g.id;const y=ze(a.position,g.position,u.gameState.mapDimensions.width,u.gameState.mapDimensions.height);return a.direction=nt(y),E.RUNNING},"Move Towards Partner",e+2);return new ye([new oe(a=>!!(a.isAdult&&!a.isPregnant&&a.age>=xs&&a.age<=Pd&&a.hunger<200&&(!a.procreationCooldown||a.procreationCooldown<=0)),"Is Fertile and Ready",e+1),new Mn([new ye([n,r],"Procreate With Immediate Partner",e+2),new ye([o,l],"Seek Distant Partner",e+2)],"Find Partner And Procreate",e+1)],"Predator Procreate",e)}const zC=(e,n,r)=>{const o=n.gameState.search.predator.byProperty("motherId",e.id).filter(u=>!u.isAdult&&u.type==="predator");if(o.length===0)return E.FAILURE;let l=null,a=pu;for(const u of o)u.hunger>=a&&(a=u.hunger,l=u);return l?(N.set(r,"targetChild",l.id),E.SUCCESS):E.FAILURE},WC=(e,n,r)=>{const o=N.get(r,"targetChild"),l=o&&n.gameState.entities.entities[o];return l?K(e.position,l.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>Uo?(e.activeAction="moving",e.target=l.id,e.direction=qt(e.position,l.position,n.gameState.mapDimensions),E.RUNNING):(e.activeAction="feeding",e.target=void 0,N.set(r,"targetChild",void 0),E.SUCCESS):E.FAILURE};function YC(e){return new ye([new oe(n=>(n.isAdult&&n.gender==="female"&&n.hunger<90&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child (Female Only)",e+1),new ue(zC,"Find Hungriest Predator Child",e+1),new ue(WC,"Move To Child and Feed",e+1)],"Feed Predator Child",e)}function jC(e){return new ye([new oe(n=>!n.isAdult&&n.hunger>=pu,"Is Hungry Predator Child",e+1),new ue((n,r,o)=>{if(!n.motherId)return E.FAILURE;const l=r.gameState.entities.entities[n.motherId];return l?(N.set(o,"targetParent",l.id),E.SUCCESS):E.FAILURE},"Find Female Parent",e+1),new ue((n,r,o)=>{const l=N.get(o,"targetParent"),a=l&&r.gameState.entities.entities[l];if(!a)return E.FAILURE;const u=K(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",u<=Uo?(n.target=void 0,E.SUCCESS):(n.target=a.id,n.activeAction="moving",E.RUNNING)},"Move To Female Parent",e+1)],"Seek Food From Female Parent",e)}function zv(e){return new ue((n,r,o)=>{n.activeAction="idle";let l=N.get(o,"wanderTarget"),a=N.get(o,"wanderStartTime");const u=r.gameState.time;if(!l||!a||u-a>2){const d=Math.random()*2*Math.PI,h=50+Math.random()*100,g={x:Math.cos(d),y:Math.sin(d)},m=Nn(n.position,Rt(g,h));l={x:(m.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(m.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},N.set(o,"wanderTarget",l),N.set(o,"wanderStartTime",u)}if(l){n.target=l;let d=l.x-n.position.x,h=l.y-n.position.y;const g=r.gameState.mapDimensions.width,m=r.gameState.mapDimensions.height;Math.abs(d)>g/2&&(d=d>0?d-g:d+g),Math.abs(h)>m/2&&(h=h>0?h-m:h+m);const y=nt({x:d,y:h});n.direction=y}return E.SUCCESS},"Animal Wander",e)}function VC(e){return new ye([new oe((n,r,o)=>{if(n.hunger>90||n.hitpoints<n.maxHitpoints*.3||n.activeAction==="grazing"||n.activeAction==="procreating")return!1;const l=Object.values(r.gameState.entities.entities),a=[];for(const u of l)if(u.type==="prey"&&u.id!==n.id){const d=u;d.hitpoints>0&&d.isAdult&&K(n.position,d.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=$t*5&&a.push(d)}if(a.length>=2){let u=0,d=0;for(const m of a)u+=m.position.x,d+=m.position.y;u/=a.length,d/=a.length;const h={x:u,y:d};if(K(n.position,h,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>$t*2)return N.set(o,"herdCenter",h),N.set(o,"herdSize",a.length),!0}return!1},"Find Herd",e+1),new ue((n,r,o)=>{const l=N.get(o,"herdCenter");if(!l)return E.FAILURE;if(K(n.position,l,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>$t*2){n.activeAction="moving",n.target=l;const u=ze(n.position,l,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=nt(u),E.RUNNING}else return n.activeAction="idle",n.direction={x:0,y:0},E.SUCCESS},"Join Herd",e+1)],"Prey Herd Behavior",e)}function XC(e){return new ye([new oe((n,r,o)=>{if(n.hunger>100||n.hitpoints<n.maxHitpoints*.4||n.activeAction==="attacking"||n.activeAction==="procreating")return!1;const l=Fe(n,r.gameState,"predator",Vi*4,a=>a.id!==n.id&&a.hitpoints>0&&a.isAdult&&n.fatherId!==void 0&&a.fatherId===n.fatherId&&a.age>=n.age||a.hitpoints>n.hitpoints);return l&&K(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Vi*2?(N.set(o,"packLeader",l.id),!0):!1},"Find Pack Leader",e+1),new ue((n,r,o)=>{const l=N.get(o,"packLeader"),a=l&&r.gameState.entities.entities[l];if(!a||a.hitpoints<=0)return E.FAILURE;if(K(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Vi*2){n.activeAction="moving",n.target=a.id;const d=ze(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=nt(d),E.RUNNING}else return n.activeAction="idle",n.direction={x:0,y:0},E.SUCCESS},"Follow Pack Leader",e+1)],"Predator Pack Behavior",e)}function KC(e){return new ye([new oe((n,r,o)=>{if(!n.isAdult||n.hitpoints<n.maxHitpoints*.6||n.hunger>120||n.attackCooldown&&n.attackCooldown>0)return!1;const l=Fe(n,r.gameState,"predator",Wm,a=>!!(a.id!==n.id&&a.hitpoints>0&&a.isAdult&&n.fatherId!==a.fatherId&&n.gender===a.gender&&n.fatherId!==void 0&&a.fatherId!==void 0));if(l){const a=K(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(a<=Rn)return N.set(o,"territorialTarget",l.id),!0;if(a<=Wm)return N.set(o,"territorialTarget",l.id),N.set(o,"needToApproach",!0),!0}return!1},"Find Territorial Rival",e+1),new ue((n,r,o)=>{const l=N.get(o,"territorialTarget"),a=l&&r.gameState.entities.entities[l],u=N.get(o,"needToApproach");if(!a||a.hitpoints<=0)return E.FAILURE;const d=K(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(d<=Rn)return n.activeAction="attacking",n.attackTargetId=a.id,n.target=a.id,n.direction={x:0,y:0},N.delete(o,"needToApproach"),E.RUNNING;if(u||d>Rn){n.activeAction="moving",n.target=a.id;const h=ze(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=nt(h),E.RUNNING}return E.FAILURE},"Territorial Fight or Approach",e+1)],"Predator Territorial Defense",e)}function qC(){const e=new Mn([sC(2),wC(2),MC(2),IC(2),EC(2),_C(2),RC(2),new Rs(vC(3),"Gated Leader Combat Strategy",2),new Rs(OC(3),"Gated Diplomacy",2),yC(2),new gr(cC(3),"attack","Gated Attacking",2),oC(2),new Jl(new gr(aC(4),"gathering","Gated Gathering",3),rf,"Timeout Gathering",2),new gr(hC(3),"feedChildren","Gated Feed Child",2),pC(2),new Jl(new gr(mC(4),"planting","Gated Planting",3),rf,"Timeout Planting",2),new gr(DC(3),"attack","Gated Hunt Prey",2),new gr(uC(3),"procreation","Gated Procreation",2),new ta(AC(3),of,"Cache Tribe Split",2),new Rs(NC(3),"Gated Tribe Migration",2),new ta(SC(3),of,"Cache Establish Territory",2),new gr(PC(3),"followLeader","Gated Follow Leader",2),new Rs(TC(2),"Gated Follow Patriarch",2),new Rs(lC(2),"Gated Idle Wander",2)],"AI Root Selector",1);return new rC(e,"Manual Control Gate",0)}const Wv=qC();function ZC(e,n){e.aiBlackboard&&N.cleanupOldEntries(e.aiBlackboard,n.gameState.time);const r=performance.now();switch(e.aiType){case oa.BehaviorTreeBased:default:Xf(e,n,Wv);break}n.gameState.performanceMetrics.currentBucket.aiUpdateTime+=performance.now()-r}function QC(){return new Mn([kC(1),HC(1),GC(1),FC(1),UC(1),VC(1),zv(1)],"Prey Behavior Root",0)}function JC(){return new Mn([bC(1),xC(1),YC(1),jC(1),KC(1),$C(1),XC(1),zv(1)],"Predator Behavior Root",0)}const Yv=QC();function e1(e,n){e.aiBlackboard?Xf(e,n,Yv):(console.warn(`Behavior Tree AI ticked for prey ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle")}const jv=JC();function t1(e,n){e.aiBlackboard?Xf(e,n,jv):(console.warn(`Behavior Tree AI ticked for predator ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle")}function n1(e,n){const{gameState:r,deltaTime:o}=n,l=o*(yt/St);if(e.isBeingDestroyed){const a=hw(e.buildingType);if(a>0?e.destructionProgress+=l/a:e.destructionProgress=1,e.destructionProgress>=1){Bo(r.entities,e.id);return}}if(!e.isConstructed&&!e.isBeingDestroyed){const a=fw(e.buildingType);a>0?e.constructionProgress+=l/a:e.constructionProgress=1,e.constructionProgress>=1&&(e.constructionProgress=1,e.isConstructed=!0)}}function i1(e,n){e.forces.push(Rt(e.velocity,-.1));const r=Rt(nt(e.direction),e.acceleration);e.forces.push(r),e.debuffs.forEach(o=>{n.gameState.time-o.startTime<o.duration&&o.type==="slow"&&(e.velocity=Rt(e.velocity,.5))}),e.debuffs=e.debuffs.filter(o=>n.gameState.time-o.startTime<o.duration),e.velocity=Nn(e.velocity,e.forces.reduce(Nn,{x:0,y:0})),Co(e.velocity)<.001&&(e.velocity={x:0,y:0}),e.position=Nn(e.position,Rt(e.velocity,n.deltaTime)),e.position.x=(e.position.x%n.gameState.mapDimensions.width+n.gameState.mapDimensions.width)%n.gameState.mapDimensions.width,e.position.y=(e.position.y%n.gameState.mapDimensions.height+n.gameState.mapDimensions.height)%n.gameState.mapDimensions.height,e.forces=[],e.type==="human"?Q_(e,n,n.deltaTime):e.type==="corpse"?J_(e,n):e.type==="prey"?eC(e,n,n.deltaTime):e.type==="predator"?tC(e,n,n.deltaTime):e.type==="building"&&n1(e,n),e.type==="human"&&ZC(e,n),e.type==="prey"?e1(e,n):e.type==="predator"&&t1(e,n),e.stateMachine&&(e.stateMachine=Z_(...e.stateMachine,{entity:e,updateContext:n}))}function r1(e){const n=e.gameState.entities;Object.values(n.entities).forEach(r=>{i1(r,e)})}function Vv(){return{entities:{},nextEntityId:1}}function Lo(e,n,r){const o={id:e.nextEntityId++,type:n,velocity:{x:0,y:0},direction:{x:0,y:0},acceleration:0,forces:[],debuffs:[],...r};return e.entities[o.id]=o,o}function sa(e,n,r){return Lo(e,"berryBush",{position:n,radius:nf,food:Array.from({length:kA},()=>({type:Xn.Berry})).map(l=>({...l,id:e.nextEntityId++})),maxFood:MA,lifespan:UA,age:0,spreadRadius:nf,timeSinceLastBerryRegen:0,timeSinceLastSpreadAttempt:0,timeSinceLastHarvest:0,stateMachine:[Bs,{enteredAt:r,previousState:void 0}]})}function eu(e,n,r,o,l=!1,a=NI,u=q0,d,h,g=[],m,y){const S=a>=Rf;return Lo(e,"human",{position:n,radius:S?It:ko,hunger:u,hitpoints:Tm,maxHitpoints:Tm,age:a,gender:o,isPlayer:l,food:[],maxFood:K0,maxAge:Vs,isAdult:S,isPregnant:!1,gestationTime:0,procreationCooldown:0,attackCooldown:0,motherId:d,fatherId:h,ancestorIds:g,stateMachine:[Ct,{enteredAt:r,previousState:void 0}],leaderId:m,tribeBadge:y,aiType:oa.BehaviorTreeBased,aiBlackboard:N.create()})}function Kf(e,n,r,o,l,a,u,d,h,g,m){let y,S;switch(u){case"human":y=J0,S=Nr;break;case"prey":y=2,S=120;break;case"predator":y=4,S=140;break}return Lo(e,"corpse",{position:n,radius:l,gender:r,age:o,originalEntityId:a,originalEntityType:u,timeOfDeath:d,decayProgress:0,geneCode:m,food:[...Array.from({length:Math.max(y*Math.max(S-g,0)/S,0)},()=>({type:Xn.Meat})),...h].map(I=>({...I,id:e.nextEntityId++})),stateMachine:void 0})}function o1(e,n,r,o,l,a,u,d,h){return Kf(e,n,r,o,l,a,"human",u,d,h)}function s1(e,n,r,o,l,a,u,d){return Kf(e,n,r,o,l,a,"prey",u,[],0,d)}function a1(e,n,r,o,l,a,u,d){return Kf(e,n,r,o,l,a,"predator",u,[],0,d)}function l1(e,n,r){const o=n?r.gameState.entities.entities[n]:void 0,l=[...e.ancestorIds||[],e.id],a=o?[...o.ancestorIds||[],o.id]:[],u=[...l,...a],d=[...new Set(u)],h=d.slice(Math.max(d.length-_I,0)),g=Math.random()<.5?"male":"female",m=Nn(e.position,{x:5,y:5}),y=eu(r.gameState.entities,m,r.gameState.time,g,!1,0,q0/2,e.id,n,h,(o==null?void 0:o.leaderId)??e.leaderId,(o==null?void 0:o.tribeBadge)??e.tribeBadge);return Ne(r,ve.Birth,e.position),y}function Bo(e,n){return e.entities[n]?(delete e.entities[n],!0):!1}function No(e,n,r,o=w_,l=Uv,a,u,d){const h=o>=bs,g=Date.now();return Lo(e,"prey",{position:n,radius:h?It*.7:ko*.7,hunger:l,hitpoints:$m,maxHitpoints:$m,age:o,maxAge:Fv,gender:r,isAdult:h,isPregnant:!1,gestationTime:0,procreationCooldown:0,geneCode:a,motherId:u,fatherId:d,stateMachine:[Cn,{enteredAt:g,previousState:void 0}],aiType:oa.BehaviorTreeBased,aiBlackboard:N.create()})}function Oo(e,n,r,o=D_,l=Bv,a,u,d){const h=o>=xs,g=Date.now();return Lo(e,"predator",{position:n,radius:h?It*.9:ko*.9,hunger:l,hitpoints:zm,maxHitpoints:zm,age:o,maxAge:Lv,gender:r,isAdult:h,isPregnant:!1,gestationTime:0,procreationCooldown:0,geneCode:a,motherId:u,fatherId:d,stateMachine:[bt,{enteredAt:g,previousState:void 0}],aiType:oa.BehaviorTreeBased,aiBlackboard:N.create()})}function u1(e,n,r,o){const l=lv(r);return Lo(e,"building",{position:n,radius:Math.max(l.width,l.height)/2,buildingType:r,ownerId:o,width:l.width,height:l.height,constructionProgress:0,destructionProgress:0,isConstructed:!1,isBeingDestroyed:!1})}var Ht=(e=>(e.MOVE="MOVE",e.HUNGER="HUNGER",e.EAT="EAT",e.FIND_BUSH="FIND_BUSH",e.GATHER="GATHER",e.PROCREATE="PROCREATE",e.PLANT_BUSH="PLANT_BUSH",e.AUTOPILOT="AUTOPILOT",e.ANIMALS_INTRODUCTION="ANIMALS_INTRODUCTION",e.HUNT_PREY="HUNT_PREY",e.DEFEND_FROM_PREDATORS="DEFEND_FROM_PREDATORS",e))(Ht||{}),Rr=(e=>(e.HUNGER_BAR="HUNGER_BAR",e.FOOD_BAR="FOOD_BAR",e.COMMAND_BUTTONS="COMMAND_BUTTONS",e))(Rr||{}),Gt=(e=>(e[e.FADING_IN=0]="FADING_IN",e[e.ACTIVE=1]="ACTIVE",e[e.FADING_OUT=2]="FADING_OUT",e[e.INACTIVE=3]="INACTIVE",e))(Gt||{});const df={},ff={},c1=[{key:Ht.MOVE,title:"Movement",text:"Use WASD or Arrow Keys to move your character around the world.",condition:e=>e.hasPlayerMovedEver||e.hasPlayerEnabledAutopilot>2,isCompleted:!1},{key:Ht.HUNGER,title:"Hunger",text:"Your character gets hungry over time. Watch the hunger bar!",condition:(e,n)=>n.hunger>CI,isCompleted:!1,minDisplayTime:Um,highlightedUIElements:[Rr.HUNGER_BAR]},{key:Ht.FIND_BUSH,title:"Find Food",text:"Look for berry bushes. They are your primary source of food.",condition:(e,n)=>!!Fe(n,e,"berryBush",Tt*5,o=>o.food.length>0),getTargets:(e,n)=>{const r=[];for(const o of Object.values(e.entities.entities))o.type==="berryBush"&&o.food.length>0&&K(n.position,o.position,e.mapDimensions.width,e.mapDimensions.height)<500&&r.push(o);return r.map(o=>o.id)},isCompleted:!1,minDisplayTime:Um},{key:Ht.GATHER,title:"Gather Berries",text:"Get close to a bush and press 'E' to gather berries.",condition:(e,n)=>n.food.length>0,getTargets:(e,n)=>{const r=Fe(n,e,"berryBush",Tt,o=>o.food.length>0);return r?[r.id]:[]},isCompleted:!1},{key:Ht.EAT,title:"Eat",text:"When you are hungry and have food, press 'F' to eat.",condition:(e,n)=>n.activeAction==="eating",isCompleted:!1,highlightedUIElements:[Rr.FOOD_BAR]},{key:Ht.PROCREATE,title:"Procreate",text:"Find a mate and press 'R' to start a family. This is how you continue your lineage.",condition:(e,n)=>Pt(e,n).length>0,getTargets:(e,n)=>{const r=Fe(n,e,"human",Tt,o=>Mr(n,o,e));return r?[r.id]:[]},isCompleted:!1},{key:Ht.PLANT_BUSH,title:"Farming",text:"You can plant new berry bushes. Carry some berries and press 'B' to plant.",condition:(e,n)=>jf(e,n).some(o=>o.type===Te.Plant)||e.hasPlayerPlantedBush===!0,isCompleted:!1},{key:Ht.AUTOPILOT,title:"Autopilot!",text:"You can turn autopilot for specific actions, press Shift and click on the action button to enable it.",condition:e=>e.hasPlayerEnabledAutopilot>2,highlightedUIElements:[Rr.COMMAND_BUTTONS],isCompleted:!1},{key:Ht.ANIMALS_INTRODUCTION,title:"Wild Animals!",text:"Your world now has wild animals! Prey provide meat when hunted, but beware of predators that may attack.",condition:e=>Object.values(e.entities.entities).some(r=>r.type==="prey"||r.type==="predator"),isCompleted:!1,dependsOn:Ht.AUTOPILOT},{key:Ht.HUNT_PREY,title:"Hunt for Meat",text:"Click on prey animals to hunt them for meat. Hunting provides more food than gathering berries!",condition:(e,n)=>{const r=Fe(n,e,"prey",150);return n.hunger>40&&!!r},getTargets:(e,n)=>{const r=Fe(n,e,"prey",150);return r?[r.id]:[]},isCompleted:!1,dependsOn:Ht.ANIMALS_INTRODUCTION},{key:Ht.DEFEND_FROM_PREDATORS,title:"Predators",text:"Predators may attack when hungry! Click on them to fight back. Fighting together with family is more effective.",condition:(e,n)=>!!Fe(n,e,"predator",120),getTargets:(e,n)=>{const r=Fe(n,e,"predator",120);return r?[r.id]:[]},isCompleted:!1,dependsOn:Ht.HUNT_PREY}].map(e=>({...e,condition:e.condition?h1(e.condition):void 0,getTargets:e.getTargets?p1(e.getTargets):void 0}));function Xv(){return{steps:c1.map(e=>({...e,isCompleted:!1}))}}function Kv(){return{currentStepIndex:0,completedSteps:[],isActive:!0,transitionState:Gt.FADING_IN,transitionAlpha:0,highlightedEntityIds:[],stepStartTime:null,activeUIHighlights:[]}}function d1(e){for(let n=0;n<e.tutorial.steps.length;n++){const r=e.tutorial.steps[n];if(!r.isCompleted)if(r.dependsOn){if(e.tutorialState.completedSteps.includes(r.dependsOn))return n}else return n}return null}function f1(e,n){const r=e.tutorialState;if(!r.isActive){r.transitionState=Gt.INACTIVE,r.highlightedEntityIds=[],r.activeUIHighlights=[];return}const o=At(e);if(!o){r.isActive=!1,r.transitionState=Gt.INACTIVE,r.highlightedEntityIds=[],r.activeUIHighlights=[];return}const l=e.tutorial.steps[r.currentStepIndex];if(!l){r.isActive=!1,r.transitionState=Gt.INACTIVE,r.highlightedEntityIds=[],r.activeUIHighlights=[];return}const a=1/pE;switch(r.transitionState){case Gt.FADING_IN:r.stepStartTime===null&&(r.stepStartTime=e.time),r.transitionAlpha+=a*n,r.transitionAlpha>=1&&(r.transitionAlpha=1,r.transitionState=Gt.ACTIVE);break;case Gt.ACTIVE:{const h=e.time-(r.stepStartTime||e.time)>=(l.minDisplayTime||0),g=df[l.condition];g&&h&&g(e,o)&&(l.isCompleted=!0,r.completedSteps.includes(l.key)||r.completedSteps.push(l.key),r.transitionState=Gt.FADING_OUT);break}case Gt.FADING_OUT:if(r.transitionAlpha-=a*n,r.transitionAlpha<=0){r.transitionAlpha=0,r.stepStartTime=null;const d=d1(e);d!==null?(r.currentStepIndex=d,r.transitionState=Gt.FADING_IN):(r.isActive=!1,r.transitionState=Gt.INACTIVE)}break}if(r.transitionState!==Gt.FADING_OUT&&r.transitionState!==Gt.INACTIVE){const d=ff[l.getTargets||""];d?r.highlightedEntityIds=[...d(e,o)]:r.highlightedEntityIds=[],l.highlightedUIElements?r.activeUIHighlights=[...l.highlightedUIElements]:r.activeUIHighlights=[]}else r.highlightedEntityIds=[],r.activeUIHighlights=[]}function h1(e){const n=`condition_${Object.keys(df).length+1}`;return df[n]=e,n}function p1(e){const n=`getTargets_${Object.keys(ff).length+1}`;return ff[n]=e,n}function g1(){const e=Vv(),n=0;for(let y=0;y<x0;y++){const S={x:Math.random()*et,y:Math.random()*tt};sa(e,S,n)}const r=et/2,o=tt/2,l=eu(e,{x:r,y:o},n,"male",!0);eu(e,{x:r+50,y:o},n,"female",!1);for(let y=0;y<bv;y++){const S={x:r+et*(Math.random()-Math.random()),y:o+tt*(Math.random()-Math.random())};No(e,S,"male",void 0,void 0,Js()),No(e,{x:S.x+20,y:S.y},"female",void 0,void 0,Js())}const a={x:r+et*(Math.random()-Math.random()),y:o+tt*(Math.random()-Math.random())};Oo(e,a,"male",void 0,void 0,ea()),Oo(e,{x:a.x+20,y:a.y},"female",void 0,void 0,ea());const u=[{id:"muteButton",action:fe.ToggleMute,currentWidth:li,rect:{x:0,y:0,width:0,height:0},text:"",backgroundColor:"",textColor:mn},{id:"pauseButton",action:fe.TogglePause,currentWidth:li,rect:{x:0,y:0,width:0,height:0},text:"",backgroundColor:"",textColor:mn},{id:"returnToIntroButton",action:fe.ReturnToIntro,currentWidth:li,rect:{x:0,y:0,width:0,height:0},text:"EXIT",backgroundColor:"",textColor:mn}],d=Xv(),h=Kv(),g={time:n,entities:e,mapDimensions:{width:et,height:tt},generationCount:1,gameOver:!1,visualEffects:[],nextVisualEffectId:0,viewportCenter:{...l.position},isPaused:!1,exitConfirmation:"inactive",autopilotControls:{behaviors:{procreation:!1,planting:!1,gathering:!1,attack:!1,feedChildren:!0,followLeader:!1},hoveredAutopilotAction:void 0,activeAutopilotAction:void 0,isManuallyMoving:!1},buildMenuOpen:!1,selectedBuildingType:null,selectedBuildingForRemoval:null,hasPlayerMovedEver:!1,hasPlayerPlantedBush:!1,hasPlayerEnabledAutopilot:0,masterVolume:Ov,isMuted:!1,uiButtons:u,tutorial:d,tutorialState:h,debugPanel:_t.None,performanceMetrics:{currentBucket:{renderTime:0,worldUpdateTime:0,aiUpdateTime:0},history:[]},hoveredButtonId:void 0,mousePosition:{x:0,y:0},notifications:[{id:"welcome",type:qs.Hello,message:"Welcome to the game!",duration:50,targetEntityIds:[l.id],highlightedEntityIds:[l.id],timestamp:0,isDismissed:!1,creationTime:Date.now()}],ecosystem:{preyGestationPeriod:Ir,preyProcreationCooldown:wr,predatorGestationPeriod:Er,predatorProcreationCooldown:_r,preyHungerIncreasePerHour:zi,predatorHungerIncreasePerHour:Wi,berryBushSpreadChance:fi},autosaveIntervalSeconds:5,lastAutosaveTime:Date.now()},m=nu(g);return console.log("Game world initialized:",m),m}function m1(){const e=Vv(),n=0;for(let u=0;u<x0;u++){const d={x:Math.random()*et,y:Math.random()*tt};sa(e,d,n)}for(let u=0;u<NA;u++){const d={x:Math.random()*et,y:Math.random()*tt},h=Math.random()<.5?"male":"female";eu(e,d,n,h,!1)}for(let u=0;u<bv;u++){const d={x:Math.random()*et,y:Math.random()*tt};No(e,d,"male",void 0,void 0,Js()),No(e,{x:d.x+20,y:d.y},"female",void 0,void 0,Js())}const r={x:Math.random()*et,y:Math.random()*tt};Oo(e,r,"male",void 0,void 0,ea()),Oo(e,{x:r.x+20,y:r.y},"female",void 0,void 0,ea());const o=Xv(),l=Kv(),a={time:n,entities:e,mapDimensions:{width:et,height:tt},generationCount:0,gameOver:!1,visualEffects:[],nextVisualEffectId:0,viewportCenter:{x:et/2,y:tt/2},isPaused:!1,exitConfirmation:"inactive",autopilotControls:{behaviors:{procreation:!1,planting:!1,gathering:!1,attack:!1,feedChildren:!0,followLeader:!1},hoveredAutopilotAction:void 0,activeAutopilotAction:void 0,isManuallyMoving:!1},buildMenuOpen:!1,selectedBuildingType:null,selectedBuildingForRemoval:null,hasPlayerMovedEver:!1,hasPlayerPlantedBush:!1,hasPlayerEnabledAutopilot:0,masterVolume:Ov,isMuted:!0,uiButtons:[],tutorial:o,tutorialState:l,debugPanel:_t.None,performanceMetrics:{currentBucket:{renderTime:0,worldUpdateTime:0,aiUpdateTime:0},history:[]},hoveredButtonId:void 0,mousePosition:{x:0,y:0},notifications:[],ecosystem:{preyGestationPeriod:Ir,preyProcreationCooldown:wr,predatorGestationPeriod:Er,predatorProcreationCooldown:_r,preyHungerIncreasePerHour:zi,predatorHungerIncreasePerHour:Wi,berryBushSpreadChance:fi},lastAutosaveTime:0};return nu(a)}const v1="humanProcreation",y1="human",S1="human",T1=Tt,A1=(e,n,r)=>Mr(e,n,r.gameState)?e.gender==="male"?e.activeAction==="procreating":e.activeAction==="procreating"&&n.activeAction==="procreating":!1,I1=(e,n,r)=>{var h,g;const{gameState:o}=r,l={x:(e.position.x+n.position.x)/2,y:(e.position.y+n.position.y)/2},a=e.gender==="male"?e:n,u=e.gender==="female"?e:n,d=(a.partnerIds||[]).length===0;if(e.stateMachine=[Qs,{partnerId:n.id,previousState:(h=e.stateMachine)==null?void 0:h[0]}],n.stateMachine=[Qs,{partnerId:e.id,previousState:(g=n.stateMachine)==null?void 0:g[0]}],e.partnerIds||(e.partnerIds=[]),e.partnerIds.includes(n.id)||e.partnerIds.push(n.id),n.partnerIds||(n.partnerIds=[]),n.partnerIds.includes(e.id)||n.partnerIds.push(e.id),d&&a.leaderId&&a.leaderId!==a.id){const m=o.entities.entities[a.leaderId];if(m){const y=sf(a,m),S=sf(u,m);if(!y&&!S){const w=uf();a.leaderId=a.id,a.tribeBadge=w,a.diplomacy={},u.leaderId=a.id,u.tribeBadge=w}}}else if(!e.leaderId&&!n.leaderId&&a&&u){const m=uf();a.leaderId=a.id,a.tribeBadge=m,a.diplomacy={},u.leaderId=a.id,u.tribeBadge=m}e.activeAction=void 0,Oe(o,le.Procreation,l,Tr),Oe(o,le.Partnered,e.position,Ge,e.id),Oe(o,le.Partnered,n.position,Ge,n.id),e.lastPartneredEffectTime=o.time,n.lastPartneredEffectTime=o.time,n.activeAction=void 0,Ne(r,ve.Procreate,l)},w1={id:v1,sourceType:y1,targetType:S1,maxDistance:T1,checker:A1,perform:I1},E1={id:"humanChildFeeding",sourceType:"human",targetType:"human",maxDistance:Nf,checker:(e,n)=>e.isAdult===!0&&e.food.length>0&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=qi&&e.activeAction==="feeding",perform:(e,n,r)=>{e.food.pop(),n.hunger=Math.max(0,n.hunger-qi),e.feedChildCooldownTime=BI,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(Oe(r.gameState,le.ChildFed,n.position,Ge,n.id),n.lastChildFedEffectTime=r.gameState.time),Ne(r,ve.ChildFed,n.position)}},_1={id:"human-attack",sourceType:"human",targetType:"human",maxDistance:Vn,checker:(e,n,r)=>{var a;if(((a=e.stateMachine)==null?void 0:a[0])!==Zi||e.attackTargetId!==n.id||(e.attackCooldown||0)>0)return!1;const o=e.stateMachine[1];return r.gameState.time-o.attackStartTime>=ev},perform:(e,n,r)=>{const o=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),l=JI(nt(o),n.direction);if(Math.abs(l)<KI*Math.PI/180&&Math.random()<qI)Oe(r.gameState,le.AttackDeflected,n.position,Ge,n.id);else{let d=Of;e.gender==="male"&&(d*=jI),e.isAdult||(d*=VI),(!n.isAdult||n.age>=Q0)&&e.isAdult&&(d*=XI),n.hitpoints-=d,n.movementSlowdown={modifier:Df,endTime:r.gameState.time+Mf},Oe(r.gameState,le.Hit,n.position,Ge,n.id);const g=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),m=Rt(g,zI);n.forces.push(m),n.hitpoints<=0?Ne(r,ve.HumanDeath,n.position):Ne(r,ve.Attack,e.position)}e.attackCooldown=cu;const u=e.stateMachine[1];u.attackStartTime=r.gameState.time,Oe(r.gameState,le.Attack,e.position,Ge,e.id)}},C1={id:"human-collision",sourceType:"human",targetType:"human",maxDistance:It*2,checker:(e,n,{gameState:r})=>K(e.position,n.position,r.mapDimensions.width,r.mapDimensions.height)<(e.radius+n.radius)/3,perform:(e,n,{gameState:r})=>{const o=K(e.position,n.position,r.mapDimensions.width,r.mapDimensions.height);if(o===0){e.forces.push({x:.1,y:0}),n.forces.push({x:-.1,y:0});return}const a=(e.radius+n.radius-o)*.05,u=nt(tv(e.position,n.position)),d=Rt(u,a);e.forces.push(d),n.forces.push(Rt(d,-1))}},R1={id:"humanBerryBushGather",sourceType:"human",targetType:"berryBush",maxDistance:Tt,checker:(e,n,r)=>{var o;return e.isAdult&&n.food.length>0&&((o=e.stateMachine)==null?void 0:o[0])===hu&&e.food.length<e.maxFood&&(!e.gatheringCooldownTime||e.gatheringCooldownTime<r.gameState.time)||!1},perform:(e,n,r)=>{const o=n.food.pop();o&&e.food.push(o),e.gatheringCooldownTime=r.gameState.time+1,n.timeSinceLastHarvest=r.gameState.time,n.ownerId=e.id,n.claimedUntil=r.gameState.time+$0,Oe(r.gameState,le.BushClaimed,n.position,Ge),Ne(r,ve.Gather,e.position)}},P1={id:"corpseGather",sourceType:"human",targetType:"corpse",maxDistance:Tt,checker:(e,n,r)=>{var o;return e.isAdult&&n.food.length>0&&((o=e.stateMachine)==null?void 0:o[0])===hu&&e.food.length<e.maxFood&&(!e.gatheringCooldownTime||e.gatheringCooldownTime<r.gameState.time)||!1},perform:(e,n,r)=>{const o=n.food.pop();o&&e.food.push(o),e.gatheringCooldownTime=r.gameState.time+1,Ne(r,ve.Gather,e.position)}},N1=[R1,P1],O1={id:"prey-eat-berry-bush",sourceType:"prey",targetType:"berryBush",maxDistance:$t,checker:(e,n,r)=>!!(e.isAdult&&n.food.length>0&&e.hunger>30&&(!e.eatingCooldownTime||e.eatingCooldownTime<r.gameState.time)),perform:(e,n,r)=>{n.food.pop()&&(e.hunger=Math.max(0,e.hunger-25),n.lifespan-=C_,n.timeSinceLastHarvest=r.gameState.time,e.eatingCooldownTime=r.gameState.time+__,Oe(r.gameState,le.BushClaimed,n.position,Ge,e.id),Ne(r,ve.Gather,e.position))}},D1={id:"predator-hunt-prey",sourceType:"predator",targetType:"prey",maxDistance:co,checker:(e,n,r)=>!!(e.isAdult&&e.hunger>50&&(!e.huntCooldown||e.huntCooldown<=0)&&n.hitpoints>0),perform:(e,n,r)=>{n.hitpoints-=M_;const o=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),l=Rt(o,8);n.forces.push(l),e.huntCooldown=U_,n.hitpoints<=0?(Ne(r,ve.HumanDeath,n.position),Oe(r.gameState,le.Hit,n.position,Ge,n.id)):(Oe(r.gameState,le.Hit,n.position,Ge,n.id),n.fleeCooldown=5,Ne(r,ve.Attack,e.position)),Oe(r.gameState,le.Attack,e.position,Ge,e.id)}},M1={id:"human-hunt-prey",sourceType:"human",targetType:"prey",maxDistance:Vn,checker:(e,n,r)=>{var o;return!!(((o=e.stateMachine)==null?void 0:o[0])===Zi&&e.attackTargetId===n.id&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&e.isAdult)},perform:(e,n,r)=>{let o=Of*1.2;e.gender==="male"&&(o*=1.3),n.hitpoints-=o;const l=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),a=Rt(l,6);n.forces.push(a),e.attackCooldown=cu,n.hitpoints<=0?(Ne(r,ve.HumanDeath,n.position),Oe(r.gameState,le.Hit,n.position,Ge,n.id)):(Oe(r.gameState,le.Hit,n.position,Ge,n.id),n.fleeCooldown=8,Ne(r,ve.Attack,e.position)),Oe(r.gameState,le.Attack,e.position,Ge,e.id)}},k1={id:"predator-attack-human",sourceType:"predator",targetType:"human",maxDistance:Rn,checker:(e,n,r)=>{var o;return!!(e.isAdult&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&(e.hunger>100||n.attackTargetId===e.id||n.attackTargetId&&((o=r.gameState.entities.entities[n.attackTargetId])==null?void 0:o.type)==="predator"))},perform:(e,n,r)=>{let o=Hv;e.hunger>120&&(o*=1.3),n.hitpoints-=o,n.movementSlowdown={modifier:Df,endTime:r.gameState.time+Mf};const l=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),a=Rt(l,7);n.forces.push(a),e.attackCooldown=Gv,n.hitpoints<=0?(e.hunger=Math.max(0,e.hunger-Vf),Ne(r,ve.HumanDeath,n.position),Oe(r.gameState,le.Hit,n.position,Ge,n.id)):(Oe(r.gameState,le.Hit,n.position,Ge,n.id),Ne(r,ve.Attack,e.position)),Oe(r.gameState,le.Attack,e.position,Ge,e.id)}},F1={id:"human-attack-predator",sourceType:"human",targetType:"predator",maxDistance:Vn,checker:(e,n,r)=>{var o;return!!(((o=e.stateMachine)==null?void 0:o[0])===Zi&&e.attackTargetId===n.id&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&e.isAdult)},perform:(e,n,r)=>{let o=Of*.8;e.gender==="male"&&(o*=1.2);const l=Object.values(r.gameState.entities.entities).filter(d=>d.type==="human"&&d.id!==e.id).filter(d=>{const h=d;return Math.sqrt(Math.pow(h.position.x-e.position.x,2)+Math.pow(h.position.y-e.position.y,2))<100&&h.activeAction==="attacking"&&h.attackTargetId===n.id}).length;l>0&&(o*=1+l*.2),n.hitpoints-=o;const a=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),u=Rt(a,8);n.forces.push(u),e.attackCooldown=cu,n.hitpoints<=0?(Ne(r,ve.HumanDeath,n.position),Oe(r.gameState,le.Hit,n.position,Ge,n.id)):(Oe(r.gameState,le.Hit,n.position,Ge,n.id),n.hitpoints<n.maxHitpoints*.3&&(n.hunger+=20),Ne(r,ve.Attack,e.position)),Oe(r.gameState,le.Attack,e.position,Ge,e.id)}},U1={id:"prey-procreation",sourceType:"prey",targetType:"prey",maxDistance:$t,checker:(e,n,r)=>!!(e.isAdult&&n.isAdult&&e.gender!==n.gender&&e.id!==n.id&&!e.isPregnant&&!n.isPregnant&&e.hunger<200&&n.hunger<200&&(!e.procreationCooldown||e.procreationCooldown<=0)&&(!n.procreationCooldown||n.procreationCooldown<=0)),perform:(e,n,r)=>{const o=e.gender==="female"?e:n;o.isPregnant=!0,o.gestationTime=r.gameState.ecosystem.preyGestationPeriod,e.procreationCooldown=r.gameState.ecosystem.preyProcreationCooldown,n.procreationCooldown=r.gameState.ecosystem.preyProcreationCooldown,Oe(r.gameState,le.Procreation,o.position,Ge,o.id),Ne(r,ve.Procreate,o.position)}},L1={id:"predator-procreation",sourceType:"predator",targetType:"predator",maxDistance:Vi,checker:(e,n,r)=>!!(e.isAdult&&n.isAdult&&e.gender!==n.gender&&e.id!==n.id&&!e.isPregnant&&!n.isPregnant&&e.hunger<200&&n.hunger<200&&(!e.procreationCooldown||e.procreationCooldown<=0)&&(!n.procreationCooldown||n.procreationCooldown<=0)),perform:(e,n,r)=>{const o=e.gender==="female"?e:n;o.isPregnant=!0,o.pregnancyFatherId=e.gender==="male"?e.id:n.id,o.gestationTime=r.gameState.ecosystem.predatorGestationPeriod,e.procreationCooldown=r.gameState.ecosystem.predatorProcreationCooldown,n.procreationCooldown=r.gameState.ecosystem.predatorProcreationCooldown,Oe(r.gameState,le.Procreation,o.position,Ge,o.id),Ne(r,ve.Procreate,o.position)}},B1={id:"preyChildFeeding",sourceType:"prey",targetType:"prey",maxDistance:Uo,checker:(e,n)=>e.isAdult===!0&&e.gender==="female"&&e.hunger<80&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=Ql&&e.activeAction==="feeding",perform:(e,n,r)=>{e.hunger=Math.min(120,e.hunger+10),n.hunger=Math.max(0,n.hunger-Ql),e.feedChildCooldownTime=xv,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(Oe(r.gameState,le.ChildFed,n.position,Ge,n.id),n.lastChildFedEffectTime=r.gameState.time),Ne(r,ve.ChildFed,n.position)}},H1={id:"predatorChildFeeding",sourceType:"predator",targetType:"predator",maxDistance:Uo,checker:(e,n)=>e.isAdult===!0&&e.gender==="female"&&e.hunger<90&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=Ql&&e.activeAction==="feeding",perform:(e,n,r)=>{e.hunger=Math.min(140,e.hunger+15),n.hunger=Math.max(0,n.hunger-Ql),e.feedChildCooldownTime=xv,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(Oe(r.gameState,le.ChildFed,n.position,Ge,n.id),n.lastChildFedEffectTime=r.gameState.time),Ne(r,ve.ChildFed,n.position)}},G1={id:"predator-eat-corpse",sourceType:"predator",targetType:"corpse",maxDistance:Vi,checker:(e,n,r)=>!!(e.isAdult&&e.hunger>30&&n.food.length>0&&(!e.eatingCooldownTime||e.eatingCooldownTime<=r.gameState.time)),perform:(e,n,r)=>{n.food.pop()&&(e.hunger=Math.max(0,e.hunger-Vf),e.eatingCooldownTime=r.gameState.time+2,Oe(r.gameState,le.Eating,e.position,Ge,e.id),Ne(r,ve.Gather,e.position))}},b1={id:"predator-attack-rival",sourceType:"predator",targetType:"predator",maxDistance:Rn,checker:(e,n,r)=>{var o;return!!(e.isAdult&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&(e.hunger>100||n.attackTargetId===e.id||n.attackTargetId&&((o=r.gameState.entities.entities[n.attackTargetId])==null?void 0:o.type)==="predator"))},perform:(e,n,r)=>{let o=Hv;e.hunger>120&&(o*=1.3),n.hitpoints-=o,n.movementSlowdown={modifier:Df,endTime:r.gameState.time+Mf};const l=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),a=Rt(l,7);n.forces.push(a),e.attackCooldown=Gv,n.hitpoints<=0?(e.hunger=Math.max(0,e.hunger-Vf),Ne(r,ve.HumanDeath,n.position),Oe(r.gameState,le.Hit,n.position,Ge,n.id)):(Oe(r.gameState,le.Hit,n.position,Ge,n.id),Ne(r,ve.Attack,e.position)),Oe(r.gameState,le.Attack,e.position,Ge,e.id)}},x1=[C1,...N1,w1,E1,_1,O1,B1,H1,G1,D1,M1,F1,k1,b1,U1,L1];function $1(e){const{gameState:n}=e,r=n,o=Object.values(n.entities.entities);for(const l of x1)for(const a of o){if(l.sourceType&&a.type!==l.sourceType)continue;const u=r.search[l.targetType].byRadius(a.position,l.maxDistance);for(const d of u){if(a.id===d.id)continue;K(a.position,d.position,n.mapDimensions.width,n.mapDimensions.height)<=l.maxDistance&&l.checker(a,d,e)&&l.perform(a,d,e)}}}function z1(e){e.visualEffects=e.visualEffects.filter(n=>e.time-n.startTime<=n.duration)}function W1(e){const n=e.search.berryBush.byProperty("type","berryBush"),r=e.search.predator.byProperty("type","predator"),o=e.search.human.byProperty("type","human");for(let l=0;l<20;l++){let a;if(n.length>0&&l<15){const h=n[Math.floor(Math.random()*n.length)],g=Math.random()*2*Math.PI,m=50+Math.random()*100;a={x:Math.max(50,Math.min(et-50,h.position.x+Math.cos(g)*m)),y:Math.max(50,Math.min(tt-50,h.position.y+Math.sin(g)*m))}}else a={x:50+Math.random()*(et-100),y:50+Math.random()*(tt-100)};let u=!0;const d=100;for(const h of r)if(Math.sqrt((a.x-h.position.x)**2+(a.y-h.position.y)**2)<d){u=!1;break}if(u){for(const h of o)if(Math.sqrt((a.x-h.position.x)**2+(a.y-h.position.y)**2)<d){u=!1;break}}if(u)return a}return{x:et*.3+Math.random()*et*.4,y:tt*.3+Math.random()*tt*.4}}function Y1(e){const n=e.search.prey.byProperty("type","prey"),r=e.search.human.byProperty("type","human");for(let l=0;l<15;l++){let a;if(n.length>0&&l<10){const h=n[Math.floor(Math.random()*n.length)],g=Math.random()*2*Math.PI,m=100+Math.random()*150;a={x:Math.max(50,Math.min(et-50,h.position.x+Math.cos(g)*m)),y:Math.max(50,Math.min(tt-50,h.position.y+Math.sin(g)*m))}}else a={x:50+Math.random()*(et-100),y:50+Math.random()*(tt-100)};let u=!0;const d=150;for(const h of r)if(Math.sqrt((a.x-h.position.x)**2+(a.y-h.position.y)**2)<d){u=!1;break}if(u)return a}switch(Math.floor(Math.random()*4)){case 0:return{x:Math.random()*et,y:50+Math.random()*100};case 1:return{x:et-150+Math.random()*100,y:Math.random()*tt};case 2:return{x:Math.random()*et,y:tt-150+Math.random()*100};default:return{x:50+Math.random()*100,y:Math.random()*tt}}}function j1(e){const n=e.search.human.byProperty("type","human"),r=e.search.berryBush.byProperty("type","berryBush");for(let o=0;o<20;o++){const l={x:50+Math.random()*(et-100),y:50+Math.random()*(tt-100)};let a=!0;const u=80,d=60;for(const h of n)if(Math.sqrt((l.x-h.position.x)**2+(l.y-h.position.y)**2)<u){a=!1;break}if(a){for(const h of r)if(Math.sqrt((l.x-h.position.x)**2+(l.y-h.position.y)**2)<d){a=!1;break}}if(a)return l}return{x:Math.random()*et,y:Math.random()*tt}}function qv(e,n=4){console.log(` Respawning ${n} prey to prevent extinction`);const r=e;for(let o=0;o<n;o++){const l=W1(r),a=o%2===0?"male":"female";No(e.entities,l,a,void 0,void 0,Js())}}function Zv(e,n=2){console.log(` Respawning ${n} predators to prevent extinction`);const r=e;for(let o=0;o<n;o++){const l=Y1(r),a=o%2===0?"male":"female";Oo(e.entities,l,a,void 0,void 0,ea())}}function V1(e){const n=e,r=n.search.prey.count(),o=n.search.predator.count();let l=!1;return r===0&&(qv(e,6),l=!0),o===0&&(Zv(e,3),l=!0),l}function X1(e){const n=e,r=n.search.prey.count(),o=n.search.predator.count(),l=n.search.berryBush.count();let a=!1;if(r>0&&r<5){const u=Math.max(2,Math.floor(8-r));qv(e,u),a=!0}if(o>0&&o<2){const u=Math.max(1,Math.floor(3-o));Zv(e,u),a=!0}if(l<5){console.log(` Boosting bush count from ${l} to help ecosystem`);for(let u=0;u<5;u++){const d=j1(n);sa(e.entities,d,e.time)}a=!0}return a}const K1=1,q1=.3,Z1=.8,Km=.8,Q1=.99,J1=.05;var Qv=(e=>(e[e.INCREASE_PREY_GESTATION=0]="INCREASE_PREY_GESTATION",e[e.DECREASE_PREY_GESTATION=1]="DECREASE_PREY_GESTATION",e[e.INCREASE_PREY_PROCREATION_COOLDOWN=2]="INCREASE_PREY_PROCREATION_COOLDOWN",e[e.DECREASE_PREY_PROCREATION_COOLDOWN=3]="DECREASE_PREY_PROCREATION_COOLDOWN",e[e.INCREASE_PREY_HUNGER=4]="INCREASE_PREY_HUNGER",e[e.DECREASE_PREY_HUNGER=5]="DECREASE_PREY_HUNGER",e[e.INCREASE_PREDATOR_GESTATION=6]="INCREASE_PREDATOR_GESTATION",e[e.DECREASE_PREDATOR_GESTATION=7]="DECREASE_PREDATOR_GESTATION",e[e.INCREASE_PREDATOR_PROCREATION_COOLDOWN=8]="INCREASE_PREDATOR_PROCREATION_COOLDOWN",e[e.DECREASE_PREDATOR_PROCREATION_COOLDOWN=9]="DECREASE_PREDATOR_PROCREATION_COOLDOWN",e[e.INCREASE_PREDATOR_HUNGER=10]="INCREASE_PREDATOR_HUNGER",e[e.DECREASE_PREDATOR_HUNGER=11]="DECREASE_PREDATOR_HUNGER",e[e.INCREASE_BUSH_SPREAD=12]="INCREASE_BUSH_SPREAD",e[e.DECREASE_BUSH_SPREAD=13]="DECREASE_BUSH_SPREAD",e[e.NO_ACTION=14]="NO_ACTION",e))(Qv||{});const Bd=Object.keys(Qv).length/2;class eR{constructor(){De(this,"qTable",new Map);De(this,"epsilon",Km);De(this,"lastState",null);De(this,"lastAction",null)}discretizeState(n,r,o){const l=Math.min(4,Math.floor(n/25)),a=Math.min(4,Math.floor(r/5)),u=Math.min(4,Math.floor(o/15));return`${l}-${a}-${u}`}getQValue(n,r){return this.qTable.has(n)||this.qTable.set(n,new Map),this.qTable.get(n).get(r)||0}setQValue(n,r,o){this.qTable.has(n)||this.qTable.set(n,new Map),this.qTable.get(n).set(r,o)}getBestAction(n){let r=0,o=this.getQValue(n,0);for(let l=1;l<Bd;l++){const a=this.getQValue(n,l);a>o&&(o=a,r=l)}return r}chooseAction(n){return Math.random()<this.epsilon?Math.floor(Math.random()*Bd):this.getBestAction(n)}applyEmergencyCorrections(n,r,o,l){n<ui*.5&&(l.ecosystem.preyGestationPeriod=Math.max(po,l.ecosystem.preyGestationPeriod*.8),l.ecosystem.preyProcreationCooldown=Math.max(go,l.ecosystem.preyProcreationCooldown*.8),l.ecosystem.preyHungerIncreasePerHour=Math.max(yo,l.ecosystem.preyHungerIncreasePerHour*.9)),r<ci*.6&&(l.ecosystem.predatorGestationPeriod=Math.max(mo,l.ecosystem.predatorGestationPeriod*.75),l.ecosystem.predatorProcreationCooldown=Math.max(vo,l.ecosystem.predatorProcreationCooldown*.75),l.ecosystem.predatorHungerIncreasePerHour=Math.max(So,l.ecosystem.predatorHungerIncreasePerHour*.85)),o<di*.5&&(l.ecosystem.berryBushSpreadChance=Math.min(Ms,l.ecosystem.berryBushSpreadChance*1.2)),n>ui*1.4&&(l.ecosystem.preyHungerIncreasePerHour=Math.min(zi,l.ecosystem.preyHungerIncreasePerHour*1.05)),r>ci*1.4&&(l.ecosystem.predatorHungerIncreasePerHour=Math.min(Wi,l.ecosystem.predatorHungerIncreasePerHour*1.05)),o>di*1.4&&(l.ecosystem.berryBushSpreadChance=Math.max(fi,l.ecosystem.berryBushSpreadChance*.95))}calculateReward(n,r,o){const l=Math.abs(n-ui),a=Math.abs(r-ci),u=Math.abs(o-di),d=l/ui,h=a/ci,g=u/di,m=d+h+g;return 100*Math.exp(-m*2)-50}applyAction(n,r){switch(n){case 0:r.ecosystem.preyGestationPeriod=Math.min(Ir,r.ecosystem.preyGestationPeriod+.2*(Ir-po));break;case 1:r.ecosystem.preyGestationPeriod=Math.max(po,r.ecosystem.preyGestationPeriod-.2*(Ir-po));break;case 2:r.ecosystem.preyProcreationCooldown=Math.min(wr,r.ecosystem.preyProcreationCooldown+.2*(wr-go));break;case 3:r.ecosystem.preyProcreationCooldown=Math.max(go,r.ecosystem.preyProcreationCooldown-.2*(wr-go));break;case 4:r.ecosystem.preyHungerIncreasePerHour=Math.min(zi,r.ecosystem.preyHungerIncreasePerHour+.2*(zi-yo));break;case 5:r.ecosystem.preyHungerIncreasePerHour=Math.max(yo,r.ecosystem.preyHungerIncreasePerHour-.2*(zi-yo));break;case 6:r.ecosystem.predatorGestationPeriod=Math.min(Er,r.ecosystem.predatorGestationPeriod+.2*(Er-mo));break;case 7:r.ecosystem.predatorGestationPeriod=Math.max(mo,r.ecosystem.predatorGestationPeriod-.2*(Er-mo));break;case 8:r.ecosystem.predatorProcreationCooldown=Math.min(_r,r.ecosystem.predatorProcreationCooldown+.2*(_r-vo));break;case 9:r.ecosystem.predatorProcreationCooldown=Math.max(vo,r.ecosystem.predatorProcreationCooldown-.2*(_r-vo));break;case 10:r.ecosystem.predatorHungerIncreasePerHour=Math.min(Wi,r.ecosystem.predatorHungerIncreasePerHour+.2*(Wi-So));break;case 11:r.ecosystem.predatorHungerIncreasePerHour=Math.max(So,r.ecosystem.predatorHungerIncreasePerHour-.2*(Wi-So));break;case 12:r.ecosystem.berryBushSpreadChance=Math.min(Ms,r.ecosystem.berryBushSpreadChance+.2*(Ms-fi));break;case 13:r.ecosystem.berryBushSpreadChance=Math.max(fi,r.ecosystem.berryBushSpreadChance-.2*(Ms-fi));break}}updateQTable(n,r,o,l){const a=this.getQValue(n,r),u=Math.max(...Array.from({length:Bd},(h,g)=>this.getQValue(l,g))),d=a+q1*(o+Z1*u-a);this.setQValue(n,r,d)}step(n){const r=n,o=r.search.prey.count(),l=r.search.predator.count(),a=r.search.berryBush.count();this.applyEmergencyCorrections(o,l,a,n);const u=this.discretizeState(o,l,a);if(this.lastState!==null&&this.lastAction!==null){const h=this.calculateReward(o,l,a);this.updateQTable(this.lastState,this.lastAction,h,u)}const d=this.chooseAction(u);this.applyAction(d,n),this.epsilon=Math.max(J1,this.epsilon*Q1),this.lastState=u,this.lastAction=d}reset(){this.qTable.clear(),this.epsilon=Km,this.lastState=null,this.lastAction=null}getStats(){return{qTableSize:this.qTable.size,explorationRate:this.epsilon}}}let Jv=new eR;function tR(e){V1(e),X1(e),e.ecosystem.lastUpdateTime||(e.ecosystem.preyGestationPeriod=po+(Ir-po)*.3,e.ecosystem.preyProcreationCooldown=go+(wr-go)*.3,e.ecosystem.preyHungerIncreasePerHour=yo+(zi-yo)*.3,e.ecosystem.predatorGestationPeriod=mo+(Er-mo)*.3,e.ecosystem.predatorProcreationCooldown=vo+(_r-vo)*.3,e.ecosystem.predatorHungerIncreasePerHour=So+(Wi-So)*.3,e.ecosystem.berryBushSpreadChance=fi+(Ms-fi)*.7),Jv.step(e)}function nR(e){e.ecosystem.lastUpdateTime||(e.ecosystem.lastUpdateTime=0),!(e.time-e.ecosystem.lastUpdateTime<K1)&&(e.ecosystem.lastUpdateTime=e.time,tR(e))}function iR(){return Jv.getStats()}function rR(e,n){e.selectedBuildingType&&e.selectedBuildingType!=="removal"&&(e.autopilotControls.activeAutopilotAction=void 0,e.autopilotControls.hoveredAutopilotAction=void 0)}const oR=1/60;function sR(e,n){const r=At(e);r&&(e.viewportCenter=kf(e.viewportCenter,r.position,Cf*n))}function gu(e,n){if(e.isPaused)return e;if(e.autosaveIntervalSeconds){const r=Date.now();r-e.lastAutosaveTime>e.autosaveIntervalSeconds*1e3&&(yf(e),e.lastAutosaveTime=r)}for(;n>0;){const r=nu(e),o=Math.min(n,oR),l=o*(yt/St);r.time+=l,sR(r,o),xE(r),nR(r),$E(r),r1({gameState:r,deltaTime:o}),$1({gameState:r,deltaTime:o}),z1(r),f1(r,o),rR(r),e=r,n-=o}return e}function Hd(e,n,r){e.save();const{x:o,y:l,width:a,height:u}=n.rect,d=mv;if(e.beginPath(),e.moveTo(o+d,l),e.lineTo(o+a-d,l),e.quadraticCurveTo(o+a,l,o+a,l+d),e.lineTo(o+a,l+u-d),e.quadraticCurveTo(o+a,l+u,o+a-d,l+u),e.lineTo(o+d,l+u),e.quadraticCurveTo(o,l+u,o,l+u-d),e.lineTo(o,l+d),e.quadraticCurveTo(o,l,o+d,l),e.closePath(),e.fillStyle=n.isDisabled?vv:n.backgroundColor,e.fill(),n.activated){e.save();const h=(Math.sin(Date.now()/1e3*Av)+1)/2;e.strokeStyle=Tv,e.lineWidth=2+h*2,e.globalAlpha=.7+h*.3,e.stroke(),e.restore()}if(n.lastActivated){const h=Date.now()-n.lastActivated;if(h<Zl){const g=1-h/Zl;e.fillStyle=Sv,e.globalAlpha=g,e.fill(),e.globalAlpha=1}}r&&!n.isDisabled&&(e.fillStyle=bf,e.globalAlpha=.5,e.fill(),e.globalAlpha=1),e.fillStyle=n.isDisabled?yv:n.textColor,n.icon?(e.font=`${u*.55}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(n.icon,o+a/2,l+u/2),n.text&&(e.font=`${u*.18}px "Press Start 2P", Arial`,e.textAlign="right",e.textBaseline="bottom",e.fillText(n.text,o+a-4,l+u-2))):(e.textAlign="center",e.textBaseline="middle",e.fillText(n.text,o+a/2,l+u/2)),e.restore()}function aR(e,n,r,o){e.save(),e.font=`${Pm}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="bottom";const a=e.measureText(r).width,u=Pm,d=a+Nm*2,h=u+Nm*2,g=o.x-d/2,m=e.canvas.height,y=n.y<m/2?n.y+n.height-Om:n.y-h+Om;e.fillStyle=Xw,e.fillRect(g,y,d,h),e.fillStyle=Kw,e.fillText(r,o.x,y+h/2+u/2),e.restore()}function lR(e,n,r){e.save();const o=At(n),l=[{id:"fastForwardButton",action:fe.FastForward,text:"FFWD [T]",currentWidth:li*1.3,backgroundColor:bi,textColor:mn,tooltip:"Fast-forward time",rect:{x:0,y:0,width:0,height:0}},{id:"pauseButton",action:fe.TogglePause,text:n.isPaused?"UN[P]AUSE":"[P]AUSE",backgroundColor:n.isPaused?Al:bi,currentWidth:n.isPaused?li*1.4:li*1.1,tooltip:n.isPaused?"Resume Game":"Pause Game",rect:{x:0,y:0,width:0,height:0},textColor:mn},{id:"muteButton",action:fe.ToggleMute,text:n.isMuted?"UN[M]UTE":"[M]UTE",backgroundColor:n.isMuted?Al:bi,tooltip:`Toggle Sound (${n.isMuted?"Muted":"Enabled"})`,currentWidth:li,rect:{x:0,y:0,width:0,height:0},textColor:mn},{id:"returnToIntroButton",action:fe.ReturnToIntro,text:"EXIT",backgroundColor:bi,tooltip:"Return to Main Menu [ESC]",currentWidth:li*.9,rect:{x:0,y:0,width:0,height:0},textColor:mn}];if(n.uiButtons.push(...l),o){const g=jf(n,o),m=new Set(g.map(B=>B.type));let y=[{playerAction:Te.Gather,buttonAction:fe.CommandGather,shortcut:"E",name:"Gather",toggleKey:"gathering",condition:()=>o.isAdult===!0},{playerAction:Te.Eat,buttonAction:fe.CommandEat,shortcut:"F",name:"Eat"},{playerAction:Te.Plant,buttonAction:fe.CommandPlant,shortcut:"B",name:"Plant",toggleKey:"planting",condition:()=>o.isAdult===!0},{playerAction:Te.Procreate,buttonAction:fe.ToggleProcreationBehavior,shortcut:"R",name:"Procreation",toggleKey:"procreation",condition:()=>o.isAdult===!0},{playerAction:Te.FeedChild,buttonAction:fe.ToggleFeedChildBehavior,shortcut:"H",name:"Feed Child",toggleKey:"feedChildren",condition:()=>o.isAdult===!0},{playerAction:Te.Attack,buttonAction:fe.ToggleAttackBehavior,shortcut:"Q",name:"Attack",toggleKey:"attack",condition:()=>o.isAdult===!0&&o.leaderId===o.id},{playerAction:Te.FollowMe,buttonAction:fe.CommandFollowMe,shortcut:"C",name:"Follow Me",toggleKey:"followLeader",condition:()=>o.isAdult===!0&&o.leaderId===o.id},{playerAction:Te.CallToAttack,buttonAction:fe.CommandCallToAttack,shortcut:"V",name:"Call to Attack",condition:()=>o.isAdult===!0&&o.leaderId===o.id},{playerAction:Te.TribeSplit,buttonAction:fe.CommandTribeSplit,shortcut:"K",name:"Split Tribe",condition:()=>o.leaderId!==void 0&&o.leaderId!==o.id&&o.isAdult===!0},{playerAction:Te.Build,buttonAction:fe.CommandBuild,shortcut:"L",name:"Build",condition:()=>o.isAdult===!0&&o.leaderId===o.id}];y=y.filter(B=>B.condition?B.condition():!0);const S=1,w=y.length,I=w*nn+(w-1)*hr,A=S*nn+(S-1)*hr,_=(r-I)/2,F=e.canvas.height-A-20;if(y.forEach((B,O)=>{const H=O%w,x=Math.floor(O/w),U=_+H*(nn+hr),$=F+x*(nn+hr),J=!!B.toggleKey,Ee=J&&n.autopilotControls.behaviors[B.toggleKey],_e=!m.has(B.playerAction),Pe=B.playerAction===Te.Build&&n.buildMenuOpen,Re=!n.hasPlayerEnabledAutopilot||n.hasPlayerEnabledAutopilot<3?" (Press Shift to toggle Auto)":"",ce=J?`${B.name}${Re}`:B.name,Ue=Ee||Pe?Al:bi,Se={id:`commandButton_${B.name}`,action:B.buttonAction,rect:{x:U,y:$,width:nn,height:nn},icon:fu[B.playerAction],text:B.shortcut,backgroundColor:Ue,textColor:mn,currentWidth:nn,tooltip:ce,isDisabled:_e,activated:Ee||Pe};n.uiButtons.push(Se)}),n.buildMenuOpen){const B=[{id:"buildMenu_storageSpot",action:fe.SelectStorageSpot,icon:"",shortcut:"1",name:"Storage Spot"},{id:"buildMenu_plantingZone",action:fe.SelectPlantingZone,icon:"",shortcut:"2",name:"Planting Zone"},{id:"buildMenu_removal",action:fe.SelectRemovalTool,icon:"",shortcut:"3",name:"Remove Building"}],O=B.length,H=O*nn+(O-1)*hr,x=(r-H)/2,U=F-nn-hr;B.forEach(($,J)=>{const Ee=x+J*(nn+hr),_e=U,be=$.action===fe.SelectStorageSpot&&n.selectedBuildingType==="storageSpot"||$.action===fe.SelectPlantingZone&&n.selectedBuildingType==="plantingZone"||$.action===fe.SelectRemovalTool&&n.selectedBuildingType==="removal",Pe={id:$.id,action:$.action,rect:{x:Ee,y:_e,width:nn,height:nn},icon:$.icon,text:$.shortcut,backgroundColor:be?Al:bi,textColor:mn,currentWidth:nn,tooltip:$.name,activated:be};n.uiButtons.push(Pe),Hd(e,Pe,n.hoveredButtonId===Pe.id)})}}let a=r-qe;l.forEach(g=>{const m=qe,y=a-g.currentWidth;g.rect={x:y,y:m,width:g.currentWidth,height:gv},Hd(e,g,n.hoveredButtonId===g.id),a-=g.currentWidth+Vw});let u=null;n.uiButtons.filter(g=>g.id.startsWith("commandButton_")||g.id.startsWith("buildMenu_")).forEach(g=>{u||(u={x:g.rect.x,y:g.rect.y,width:g.rect.width,height:g.rect.height}),u.x=Math.min(u.x,g.rect.x),u.y=Math.min(u.y,g.rect.y),u.width=Math.max(u.width,g.rect.x+g.rect.width-u.x),u.height=Math.max(u.height,g.rect.y+g.rect.height-u.y),g.id.startsWith("commandButton_")&&Hd(e,g,n.hoveredButtonId===g.id)});const h=n.hoveredButtonId?n.uiButtons.find(g=>g.id===n.hoveredButtonId):void 0;return h&&h.tooltip&&n.mousePosition&&aR(e,h.rect,h.tooltip,n.mousePosition),e.restore(),{commandButtonsRect:u}}function uR(e){e.save(),e.fillStyle=sE,e.fillRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle=aE,e.font=`${lE}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("PAUSED",e.canvas.width/2,e.canvas.height/2),e.restore()}function hf(e,n,r,o){const l=n.x-r.width/2,a=n.y-r.height/2,u=l+e.x,d=a+e.y,h=(u%o.width+o.width)%o.width,g=(d%o.height+o.height)%o.height;return{x:h,y:g}}function mu(e,n,r,o){let l=e.x-n.x,a=e.y-n.y;return Math.abs(l)>o.width/2&&(l=l-Math.sign(l)*o.width),Math.abs(a)>o.height/2&&(a=a-Math.sign(a)*o.height),{x:l+r.width/2,y:a+r.height/2}}function Ml(e,n,r,o){const l=mu(e.position,n,r,o),u=("radius"in e?e.radius:20)+20;return l.x>=-u&&l.x<=r.width+u&&l.y>=-u&&l.y<=r.height+u}function on(e,n,r,o,l,...a){const u={...l.position};for(let d=-r;d<=r;d+=r)for(let h=-n;h<=n;h+=n)l.position.x=u.x+h,l.position.y=u.y+d,o(e,l,...a);l.position=u}const cR=25,dR=0,qm=28;function ey(e,n,r,o,l,a,u,d,h,g){e.save();const{x:m,y}=mu(n,u,{width:d,height:h},g);e.strokeStyle=o,e.lineWidth=a,e.setLineDash(l),e.beginPath(),e.arc(m,y,r+du,0,2*Math.PI),e.stroke(),e.restore()}function fR(e,n,r,o,l,a,u){if(n=n.filter(y=>y.type!==Te.FollowMe),n.length===0)return;e.save(),n.forEach(y=>{y.targetEntity&&ey(e,y.targetEntity.position,y.targetEntity.radius,Hf,Gf,2,o,l,a,u)}),e.font=`${Ro}px "Press Start 2P", Arial`,e.fillStyle="white",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=5;const{x:d,y:h}=mu(r.position,o,{width:l,height:a},u);let g=0,m={};n.forEach(y=>{const S=fu[y.type];if(y.targetEntity){m[y.targetEntity.id]=(m[y.targetEntity.id]||0)+1;const w=y.targetEntity.position.x-o.x+l/2,I=y.targetEntity.position.y-o.y+a/2,A=`${S}${y.key.toUpperCase()}`,_=I-y.targetEntity.radius-du-Ro/2-(m[y.targetEntity.id]-1)*qm;e.fillText(A,w,_)}else{e.textAlign="left";const w=`${S}${y.key.toUpperCase()}`,I=d+cR,_=h+dR+g*qm;e.fillText(w,I,_),g++,e.textAlign="center"}}),e.restore()}const me=(e,n,r,o,l,a,u)=>{a==="transparent"||o<=0||l<=0||(e.fillStyle=a,e.fillRect(Math.floor(n*u),Math.floor(r*u),Math.ceil(o*u),Math.ceil(l*u)))},Zm=10,Qm=10,Wn=6,oi=4,kl=2,hR=5,pn=4,pR=2,kt=4,gR=2,Je=3,ao=2,Gi=0,$s=Gi+oi-1,Bt=$s,lt=$s+pn-1,mR="rgba(0, 0, 0, 0.4)",vR=4,yR=1,qf={name:"tribe-human-2d",referenceImage:"swos.png",description:`A 2D human character asset for the Tribe game. This includes ensuring that the unique animations for stances like 'eat' and 'procreate' do not erroneously appear in other stances, such as 'walk', which was observed in the provided rendered media. The 'idle' animation was updated to a leg sway to better match the provided video for that stance, replacing a simpler body bob.

# Visual style

Human characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like people from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the character to give it a sense of depth.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 1 and 60, with 20 being the average age.
- gender: 
  - The male characters should have only pants, while female cover their breasts with a top. The clothing should be simple and muted, reflecting a stone-age style.
  - Female characters should have long hair, while male should have short hair and beard.
  - Male characters should have a more robust, muscular build
  - Female characters should have thinner arms and legs, with a more pronounced waist and hips.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'gathering': The character is gathering food from berry bushes, with arms reaching out and a slight bend at the knees.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or dust particles to indicate movement.
- 'attacking': The character performs an attack animation, with arms raised and a forward motion.
- 'defending': The character takes a defensive stance, with arms raised and a slight bend at the knees.
- 'stunned': The character is stunned and laying on the ground, with limbs relaxed and a neutral expression.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a skeleton over time.

`,stances:["idle","walk","gathering","eat","procreate","dead","attacking","defending","stunned"],render(e,n,r,o,l,a,u,d="male",h=20,g=[1,0],m=!1,y=0){const S=["dead","stunned"].includes(u),w=S?Qm+4:Zm,I=S?Zm+4:Qm+Je,A=.15,_=Math.min(o*(1-2*A)/w,l*(1-2*A)/I),F=w*_,B=I*_,O=n+(o-F)/2,H=r+(l-B)/2;e.save(),g[0]<0&&!S?(e.translate(O+F,H),e.scale(-1,1)):e.translate(O,H);const U="#D09A5A",$=h>50?"#BDBDBD":"#281808",J="#7F5C4A",Ee="#6B4F3A",_e="#E0D8C0",be="#A0522D",Pe=1-Math.max(0,Math.min(100,y))/100*.2,Re=d==="male"?1.1:.9,ce=.8+(Math.max(1,Math.min(h,60))-1)/59*.2;let Ue=hR*Pe*Re*ce,Se=pR*Pe*Re*ce,te=gR*Pe*ce;m&&d==="female"&&(Ue*=1.5);const W=Math.round((w-Ue)/2),V=Math.round((w-Wn)/2),Y=W-Se,R=W+Ue,L=1,X=W+(Ue/2-L/2)-te,ne=W+(Ue/2+L/2),ge=g[1]<-.2&&Math.abs(g[0])<.7,se=q=>{e.fillStyle=mR,e.beginPath();const ie=w/2,Le=q;e.ellipse(Math.floor(ie*_),Math.floor(Le*_),Math.max(1,Math.floor(vR*_)),Math.max(1,Math.floor(yR*_)),0,0,2*Math.PI),e.fill()},Ie=(q,ie)=>{d==="male"?(me(e,W,$s+q,Ue,pn-ao,ie,_),me(e,W,$s+pn-ao+q,Ue,ao,J,_)):me(e,W,$s+q,Ue,pn,Ee,_)},Ae=(q,ie)=>{ge?me(e,V,Gi+q,Wn,oi,$,_):(me(e,V,Gi+q,Wn,oi,ie,_),me(e,V,Gi+q,Wn,kl,$,_),d==="female"?(me(e,V-1,Gi+kl+q,1,oi,$,_),me(e,V+Wn,Gi+kl+q,1,oi,$,_)):me(e,V+1,Gi+2+q,Wn-2,oi-2,$,_))};switch(u){case"idle":{const q=a*Math.PI*2,ie=Math.sin(q)*.5,de=(Math.cos(q*2)+1)*.25;se(lt+Je+1),me(e,X+ie,lt+de,te,Je,U,_),me(e,ne-ie,lt+de,te,Je,U,_),Ie(de,U),me(e,Y,Bt+de,Se,kt,U,_),me(e,R,Bt+de,Se,kt,U,_),Ae(de,U);break}case"walk":{const q=a*Math.PI*2,ie=Math.sin(q)*2,de=Math.abs(Math.cos(q))*1;se(lt+Je+1),me(e,X+ie,lt+de,te,Je,U,_),me(e,ne-ie,lt+de,te,Je,U,_),Ie(de,U),me(e,Y-ie,Bt+de,Se,kt,U,_),me(e,R+ie,Bt+de,Se,kt,U,_),Ae(de,U);break}case"gathering":{const q=a*Math.PI*2,ie=1,Le=(Math.sin(q)+1)/2*2,de=ie+Math.abs(Math.cos(q))*.5;se(lt+Je+1),me(e,X,lt+de,te,Je-ie,U,_),me(e,ne,lt+de,te,Je-ie,U,_),Ie(de,U),me(e,Y+1,Bt+de-Le,Se,kt,U,_),me(e,R-1,Bt+de-Le,Se,kt,U,_),Ae(de,U);break}case"eat":{se(lt+Je+1),me(e,X,lt+1,te,Je-1,U,_),me(e,ne,lt+1,te,Je-1,U,_),Ie(1,U);const Le=(Math.sin(a*Math.PI*4)+1)/2,de=V+Wn/2,kn=Gi+oi/2,Ze=R+(de-R)*Le,je=Bt+1+(kn-(Bt+1))*Le;me(e,Y,Bt+1,Se,kt,U,_),me(e,Ze,je,Se,kt,U,_),me(e,Ze,je-1,1,1,be,_),Ae(1,U);break}case"procreate":{const q=(Math.sin(a*Math.PI*8)+1)/4,ie=(Math.sin(a*Math.PI*6)+1)*.5,Le=1.5,de=Le-ie;se(lt+Je+1),me(e,X,lt+de,te,Je-Le,U,_),me(e,ne,lt+de,te,Je-Le,U,_),Ie(de,U),me(e,Y,Bt+de,Se,kt,U,_),me(e,R,Bt+de,Se,kt,U,_),Ae(de,U),e.globalAlpha=q,Ie(de,"white"),e.globalAlpha=1;break}case"attacking":{const q=Math.sin(a*Math.PI)*1.5,ie=Math.abs(Math.sin(a*Math.PI));se(lt+Je+1),me(e,X-q,lt+ie,te,Je,U,_),me(e,ne+q*.5,lt+ie,te,Je,U,_),Ie(ie,U),me(e,Y,Bt+ie-2,Se,kt,U,_),me(e,R,Bt+ie-2.5,Se,kt,U,_),Ae(ie,U);break}case"defending":{se(lt+Je+1),me(e,X,lt+1,te,Je-1,U,_),me(e,ne,lt+1,te,Je-1,U,_),Ie(1,U),me(e,Y-1,Bt+1-1,Se,kt,U,_),me(e,R+1,Bt+1-1,Se,kt,U,_),Ae(1,U);break}case"stunned":case"dead":{const q=u==="dead",ie=q?Math.min(1,a):0,Le=ie>.5?_e:U,de=d==="male"?J:Ee,kn=ie>.8?"transparent":$,Ze=w/2,je=I/2,Fn=2;se(I-1),me(e,Ze-te-Fn,je,te,Je,Le,_),me(e,Ze+Fn,je,te,Je,Le,_),me(e,Ze-Se-Fn,je-pn+1,Se,kt,Le,_),me(e,Ze+Fn,je-pn+1,Se,kt,Le,_);const zt=Ze-Ue/2,sn=je-pn/2;d==="male"?(ie<.7&&me(e,zt,sn+pn-ao,Ue,ao,de,_),me(e,zt,sn,Ue,pn-ao,Le,_)):ie<.7?me(e,zt,sn,Ue,pn,de,_):me(e,zt,sn,Ue,pn,Le,_);const Un=Ze-Wn/2,Ln=je-pn/2-oi+1;if(me(e,Un,Ln,Wn,oi,Le,_),kn!=="transparent"&&me(e,Un,Ln,Wn,kl,kn,_),q&&ie>.6){const pi="#B0A890";for(let Qi=0;Qi<3;Qi++)me(e,zt+1,sn+Qi*1+1,Ue-2,.5,pi,_)}break}default:me(e,0,0,w,I,"magenta",_);break}e.restore()}};function SR(e,n,r,o,l){const a=n.x,u=n.y-r-o/2;e.save(),e.fillStyle=l,e.strokeStyle=l,e.lineWidth=1.5,e.beginPath(),e.rect(a-o/2,u,o,o/2),e.fill(),e.beginPath(),e.moveTo(a-o/2,u),e.lineTo(a-o/4,u-o/3),e.lineTo(a-o/6,u),e.moveTo(a-o/6,u),e.lineTo(a,u-o/2),e.lineTo(a+o/6,u),e.moveTo(a+o/6,u),e.lineTo(a+o/4,u-o/3),e.lineTo(a+o/2,u),e.stroke(),e.restore()}function na(e,n,r,o,l,a=!1,u=!1,d=!1,h=!1){o<Rf&&(r=r*.75),qf.render(e,n.x-r/2,n.y-r/2,r,r,0,"idle",l,o,[0,0],!1,0);let g,m;a?(g=Hw,m=Bf):u?(g=Gw,m=hv):d?(g=bw,m=fv):h&&(g=xw,m=dv),g&&m&&SR(e,n,r/2,g,m)}function TR(e,n,r,o,l,a){if(e.save(),o.length===0){e.restore();return}const u=o.length*l,d=4;let h;const g=u+(o.length-1)*d;o.length>1&&g>a?h=(a-u)/(o.length-1):h=d,o.length<=1&&(h=0);for(let m=0;m<o.length;m++){const{member:y,isPlayer:S,isHeir:w,isPartner:I,isParent:A}=o[m],_=n+m*(l+h)+l/2,F=r+l/4;na(e,{x:_,y:F},l,y.age,y.gender,S,w,I,A)}e.restore()}function AR(e,n,r,o,l){if(r.length===0)return;e.save();const a=$n,u=" 00",d=" 00";e.font=`${vd}px "Press Start 2P", Arial`;const h=e.measureText(u).width,g=e.measureText(d).width,m=$n+hn+$n+hn+$n+Ui+h+$n/2+Ui+g,y=r.length*Tl+(r.length-1)*Cm,S=l-y-$n;e.fillStyle=zw,e.fillRect(a,S,m,y);for(let w=0;w<r.length;w++){const I=r[w],A=S+w*(Tl+Cm),_=A+Tl/2;I.isPlayerTribe&&(e.fillStyle=$w,e.fillRect(a,A,m,Tl));let F=a+$n;if(e.font=`${hn}px "Press Start 2P", Arial`,e.textBaseline="middle",e.textAlign="left",e.fillText(I.tribeBadge,F,_-hn/4),F+=hn+$n,!I.isPlayerTribe){const B=I.diplomacyStatus===xt.Friendly?"":"",O=`diplomacyButton_${I.leaderId}`,H={x:F-2,y:_-hn/2-2,width:hn+4,height:hn+4},x={id:O,action:fe.ToggleDiplomacy,rect:H,text:"",icon:B,backgroundColor:"transparent",textColor:"white",currentWidth:hn,tooltip:`Toggle diplomacy with this tribe (Currently: ${I.diplomacyStatus})`,targetTribeId:I.leaderId};n.uiButtons.push(x),n.hoveredButtonId===O&&(e.fillStyle=bf,e.globalAlpha=.5,e.fillRect(H.x,H.y,H.width,H.height),e.globalAlpha=1),e.font=`${hn*.8}px "Press Start 2P", Arial`,e.textBaseline="middle",e.textAlign="center",e.fillText(B,F+hn/2,_)}F+=hn+$n,I.adultCount>0&&(na(e,{x:F+Ui/2,y:_},Ui,25,"male"),F+=Ui/2,e.font=`${vd}px "Press Start 2P", Arial`,e.fillStyle="white",e.textBaseline="middle",e.textAlign="left",e.fillText(` ${I.adultCount}`,F,_),F+=e.measureText(` ${I.adultCount}`).width+$n/2),I.childCount>0&&(na(e,{x:F+Ui/2,y:_},Ui,1,"female"),F+=Ui/2,e.font=`${vd}px "Press Start 2P", Arial`,e.fillStyle="white",e.textBaseline="middle",e.textAlign="left",e.fillText(` ${I.childCount}`,F,_))}e.restore()}function IR(e,n,r,o,l){const a=_v,u=Cv,d=n+o-a-u,h=r+u;e.save(),e.lineWidth=2,e.strokeStyle=l?yE:vE,e.beginPath();const g=5;e.moveTo(d+g,h+g),e.lineTo(d+a-g,h+a-g),e.moveTo(d+a-g,h+g),e.lineTo(d+g,h+a-g),e.stroke(),e.restore()}function wR(e,n,r,o){const{tutorialState:l,tutorial:a}=n;if(l.transitionState===Gt.INACTIVE)return;const u=a.steps[l.currentStepIndex];if(!u)return;e.save(),e.globalAlpha=l.transitionAlpha;const d=uE,h=cE,g=dE,m=`${Td}px "Press Start 2P", Arial`,y=`${Fm}px "Press Start 2P", Arial`,S=hE,w=Fm*1.5;e.font=y;const I=u.text.split(" ");let A="";const _=[];for(let _e=0;_e<I.length;_e++){const be=A+I[_e]+" ";e.measureText(be).width>d-h*2&&_e>0?(_.push(A),A=I[_e]+" "):A=be}_.push(A);const F=h*2+Td+h/2+_.length*w,B=(r-d)/2,O=o-F-160;e.fillStyle=fE,e.beginPath(),e.moveTo(B+g,O),e.lineTo(B+d-g,O),e.quadraticCurveTo(B+d,O,B+d,O+g),e.lineTo(B+d,O+F-g),e.quadraticCurveTo(B+d,O+F,B+d-g,O+F),e.lineTo(B+g,O+F),e.quadraticCurveTo(B,O+F,B,O+F-g),e.lineTo(B,O+g),e.quadraticCurveTo(B,O,B+g,O),e.closePath(),e.fill(),e.fillStyle=S,e.textAlign="center",e.textBaseline="top",e.font=m,e.fillText(u.title,B+d/2,O+h),e.font=y;let H=O+h+Td+h/2;for(const _e of _)e.fillText(_e,B+d/2,H),H+=w;const x=n.hoveredButtonId==="tutorial-dismiss";IR(e,B,O,d,x),e.restore();const U=_v,$=Cv,J=B+d-U-$,Ee=O+$;return{x:J,y:Ee,width:U,height:U}}function Gd(e,n,r){e.save();const o=mE,l={x:n.x-o,y:n.y-o,width:n.width+o*2,height:n.height+o*2};e.strokeStyle=wv,e.lineWidth=Ev+Math.sin(r*xf)*1.5,e.setLineDash([8,8]),e.strokeRect(l.x,l.y,l.width,l.height),e.restore()}function ER(e,n){e.fillStyle="white",e.font='30px "Press Start 2P", Arial',e.textAlign="center",e.fillText("Game Over!",e.canvas.width/2,e.canvas.height/2-60),e.font='20px "Press Start 2P", Arial',e.fillText("Lineage Extinct.",e.canvas.width/2,e.canvas.height/2-20),e.fillText(`Cause: ${n.causeOfGameOver||"Unknown"}`,e.canvas.width/2,e.canvas.height/2+20)}const pf=10,_R=3,Jm=pf*.7;function CR(e,n,r,o,l){const{position:a,food:u,maxFood:d,ownerId:h,claimedUntil:g}=n;if(e.beginPath(),e.arc(a.x,a.y,pf,0,Math.PI*2),e.fillStyle="#228B22",e.fill(),e.strokeStyle="#006400",e.lineWidth=1,e.stroke(),h&&g&&g>l&&o){const m=r.entities.entities[h];if(m){let y;m.id===o.id?y=Bf:nv(o,m,r)?y=_w:y=pv,y&&(e.strokeStyle=y,e.lineWidth=1+Math.sin(l*2)*.5,e.beginPath(),e.arc(a.x,a.y,pf+2,0,Math.PI*2),e.stroke())}}if(u.length>0){const m=Math.PI*2/Math.min(u.length,d);for(let y=0;y<u.length;y++){const S=y*m,w=a.x+Jm*Math.cos(S),I=a.y+Jm*Math.sin(S);e.beginPath(),e.arc(w,I,_R,0,Math.PI*2),e.fillStyle="#FF0000",e.fill()}}}const e0=(e,n,r=70,o=50)=>{const l=e>>n&255;return`hsl(${Math.floor(l/255*360)}, ${r}%, ${o}%)`},RR=(e,n)=>{const r=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(!r)return e;const[o,l,a]=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])];return`hsl(${o}, ${l}%, ${Math.max(0,a-n)}%)`},Fl=(e,n,r,o,l,a,u,d=!1)=>{e.save(),e.translate(n,r),e.rotate(a),e.fillStyle=d?RR(u,15):u,e.beginPath(),e.roundRect(-o/2,0,o,l,o/2),e.fill(),e.restore()},bd=(e,n)=>{const r=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/),o=75;if(!r)return`hsl(0, 0%, ${o}%)`;const[,l,a,u]=r.map(Number),d=a*(1-n),h=u+(o-u)*n;return`hsl(${l}, ${d}%, ${h}%)`},ty={name:"tribe-prey-2d",referenceImage:"swos.png",description:`A 2D prey asset for the Tribe game, featuring various stances and animations.

Prey is an animal which can be hunted by predators or humans in the Tribe game.

Preys look like small 4 leg mammals, with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Visual style

Prey characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like creatures from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in away that conveys their actions clearly.

Prey walks on all fours, unlike human (two legs).

Each prey is described by a unique gene code, which is a number that defines its appearance, size, and other characteristics. The gene code is used to generate the character's appearance, including body proportions, color, and other visual features. The gene code is a 32-bit integer, with each bit representing a specific characteristic of the character.

Prey should have should have visible body parts, such as head, torso, arms, and legs. The body parts should be connected and should not overlap. The character's body parts should be simple shapes, such as circles and rectangles, with solid colors and no gradients or patterns.

Preys are supposed to be sympathetic and friendly, so the character's face should have a friendly expression, with a smile and bright eyes. The character's eyes should be large and expressive, with a simple design.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the a character to give it a sense of depth.

IMPORTANT: The character is visible from the side, just like in Sensible Soccer.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 0 and 12, with 2 being the average age.
- gender:
  - 'male': Male prey are larger and more robust, with a more pronounced musculature.
  - 'female': Female prey are smaller and more agile, with a leaner build.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or a dust particles to indicate movement.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a grey skeleton over time. The character pose and body parts should not be animated in this stance, as the character is dead so it should not move.`,stances:["idle","walk","eat","dead","procreate"],render(e,n,r,o,l,a,u,d={gender:"male",age:2,direction:[1,0],isPregnant:!1,hungryLevel:0,geneCode:8405024}){e.save(),e.imageSmoothingEnabled=!1;const h=o*.15,g=n+o/2,m=r+l/2,y=o-h*2,S=l-h*2,{gender:w,age:I,direction:A,isPregnant:_,hungryLevel:F,geneCode:B}=d,O=.8+Math.min(I,10)/10*.4,H=w==="male"?1.05:.95,x=1-F/100*.3,U=y*.5*x*O*H;let $=S*.3*O*H;const J=y*.15*O*H,Ee=U*.2,_e=S*.3,be=e0(B,0,30,50);let Pe=e0(B,8,50,40);if(I>45){const se=Math.min(1,(I-45)/15);Pe=bd(Pe,se)}e.translate(g,m),A[0]<0&&e.scale(-1,1);const Re=Math.sin(a*Math.PI*2),ce=Math.cos(a*Math.PI*2),Ue=_e+$*.2;if(u==="dead"){const se=Math.min(a,1);e.translate(0,S*.2),e.rotate(Math.PI/2);const Ie=bd(Pe,se),Ae=bd(be,se);e.globalAlpha=.5+se*.5,e.strokeStyle=Ie,e.lineWidth=Ee*.5,e.beginPath(),e.moveTo(-U*.4,0),e.lineTo(U*.4,0),e.stroke();for(let q=-1;q<=1;q+=1)e.beginPath(),e.arc(0,0,$*.4,Math.PI*.4*q-Math.PI*.2,Math.PI*.4*q+Math.PI*.2),e.stroke();e.fillStyle=Ae,e.beginPath(),e.arc(U*.5,0,J,0,Math.PI*2),e.fill(),e.fillStyle="black",e.beginPath(),e.arc(U*.55,0,J*.3,0,Math.PI*2),e.fill(),e.restore();return}e.fillStyle="rgba(0, 0, 0, 0.1)",e.beginPath(),e.ellipse(0,Ue,U*.7,U*.25,0,0,2*Math.PI),e.fill();let Se=0,te=0,W=0,V=0,Y=0,R=0;switch(u){case"idle":te=Re*(S*.02),W=Re*.05,V=-Re*.05,Y=-Re*.05,R=Re*.05;break;case"walk":te=Math.abs(ce)*(S*-.04),W=Re*.7,V=-Re*.7,Y=-Re*.7,R=Re*.7;break;case"eat":Se=S*.1,te=S*.05,Se+=Re*(S*.02);break;case"procreate":te=S*.05;const se=(1-ce)*-y*.05;e.translate(se,0),e.shadowColor="rgba(255, 182, 193, 0.9)",e.shadowBlur=10;break}_&&w==="female"&&($*=1.6);const L=te,X=L-$*.2;Fl(e,U*-.35,X,Ee,_e,Y,Pe,!0),Fl(e,U*.35,X,Ee,_e,R,Pe,!0),e.fillStyle=Pe,e.beginPath(),e.ellipse(0,L,U/2,$/2,0,0,2*Math.PI),e.fill();const ne=U*.45,ge=X+Se;e.fillStyle=be,e.beginPath(),e.arc(ne,ge,J,0,Math.PI*2),e.fill(),A[1]>=0&&(e.fillStyle="black",e.beginPath(),e.arc(ne+J*.3,ge-J*.2,J*.15,0,Math.PI*2),e.fill()),Fl(e,U*-.35,X,Ee,_e,W,Pe),Fl(e,U*.35,X,Ee,_e,V,Pe),e.restore()}};function PR(e,n){let[r,o,l]=e.match(/\d+/g).map(Number);return r=Math.max(0,r-n),o=Math.max(0,o-n),l=Math.max(0,l-n),`rgb(${r}, ${o}, ${l})`}function NR(e){const n=(e&16711680)>>16,r=(e&65280)>>8,o=e&255,l=`rgb(${n}, ${r}, ${o})`,a=PR(l,40),u=(e&255)%100+50,d=(e>>8&255)%100,h=(e>>16&255)%100,g=`rgb(${u}, ${d}, ${h})`,m=(e&8388608)!==0?"#00aaff":"#ffaa00";return{furColor:l,darkerFurColor:a,skinColor:g,eyeColor:m}}const ny={name:"tribe-predator-2d",referenceImage:"swos.png",description:`A 2D predator asset for the Tribe game, featuring various stances and animations.

Predator is an animal which can hunt and attack humans in the Tribe game. It is designed to be a threat to the player, adding an element of danger and challenge to the game world.

Predator look like bears or wolves, with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Visual style

Predator characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like creatures from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in away that conveys their actions clearly.

Predator walks on arms and legs, unlike human (two legs).

Each predator is described by a unique gene code, which is a number that defines its appearance, size, and other characteristics. The gene code is used to generate the character's appearance, including body proportions, color, and other visual features. The gene code is a 32-bit integer, with each bit representing a specific characteristic of the character.

Predator should have visible ears, eyes, and mouth with teeth. It must have a tail. Front legs should be shorter than back legs, and they should be positioned closer to the body. The character's body should be wider at the top and narrower at the bottom, with a slight curve to the back. The character's head should be larger than the body, with a pronounced jaw and sharp teeth.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the a character to give it a sense of depth.

IMPORTANT: The character is visible from the side, just like in Sensible Soccer.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 1 and 20, with 3 being the average age.
- gender:
  - 'male': Male predators are larger and more robust, with a more pronounced musculature.
  - 'female': Female predators are smaller and more agile, with a leaner build.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or a dust particles to indicate movement.
- 'attacking': The character performs an attack animation, with arms raised and a forward motion.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a grey skeleton over time. The character pose and body parts should not be animated in this stance, as the character is dead so it should not move.`,stances:["idle","walk","eat","dead","attacking","procreate"],render(e,n,r,o,l,a,u,d={gender:"male",age:20,direction:[1,0],isPregnant:!1,hungryLevel:0,geneCode:8405024}){const{gender:h,age:g,direction:m,isPregnant:y,hungryLevel:S,geneCode:w}=d;e.save();const I=o*.15,A=Math.max(1,Math.floor((o-I*2)/10)),_=m[0]<0;e.translate(n+o/2,r+l/2),_&&e.scale(-1,1);const F=NR(w),B=.8+Math.min(g,20)/20*.4,O=h==="male"?1.05:.95,H=1-S/100*.25,x=B*O*H,U=Math.max(0,Math.min(1,(g-15)/5));e.filter=`grayscale(${U})`;const $=F.furColor,J=F.darkerFurColor,Ee=F.eyeColor,_e="#FFFFFF",be="#c75c5c",Pe="#E0E0E0",Re="#A0A0A0",ce=l/2-2*A,Ue=Math.sin(a*Math.PI*2),Se=Math.abs(Ue);if(e.fillStyle="rgba(0,0,0,0.15)",e.beginPath(),e.ellipse(0,ce,A*4,A,0,0,2*Math.PI),e.fill(),e.filter="none",u==="dead"){const Ze=Math.min(1,a*2);e.save(),e.translate(0,ce-A*3),e.rotate(-Math.PI/2);const je=(Fn,zt,sn,Un,Ln=!1)=>{e.fillStyle=Ln?Re:Pe,e.fillRect(Fn*A,zt*A,sn*A,Un*A)};Ze<1&&(e.globalAlpha=1-Ze,e.fillStyle=$,e.beginPath(),e.ellipse(0,0,A*3,A*5,0,0,Math.PI*2),e.fill(),e.globalAlpha=1),Ze>0&&(e.globalAlpha=Ze,je(-1,-4,2,2),je(1,-3.5,1,1,!0),je(-.5,-2,1,5,!0),je(-2.5,-1,5,.5),je(-2.5,0,5,.5),je(-2.5,1,5,.5),je(-3,-2,-1,2,!0),je(3,-2,1,2),je(-3,2,-1,2,!0),je(3,2,1,2),e.globalAlpha=1),e.restore(),e.restore();return}e.fillStyle=$;let te=0,W=0,V=0,Y=[0,0,0,0];switch(u){case"idle":te=Ue*A*.1;break;case"walk":const Ze=Math.sin(a*Math.PI*4);te=Math.abs(Ze)*-A*.5,Y=[Ze*A,-Ze*A,-Ze*A,Ze*A];break;case"attacking":const je=Math.sin(a*Math.PI*4);W=A*2+je*A,V=A*2,te=A;break;case"eat":V=A*3+Se*A,te=A*1.5,e.fillStyle=be,e.fillRect(-A,ce-A,A*2,A);break;case"procreate":te=Math.sin(a*Math.PI*8)*A*.3,e.fillStyle="rgba(139, 69, 19, 0.5)";for(let zt=0;zt<5;zt++){const sn=(Math.random()-.5)*A*8,Un=ce+(Math.random()-.5)*A*2;Se>.5&&e.fillRect(sn,Un,A*.5,A*.5)}break}const R=A*3*x*(y?1.3:1),L=A*5*x,X=-L/1.5,ne=ce-R-A*2.5+te;e.fillStyle=$,e.beginPath(),e.moveTo(X-A*.5,ne+R*.5),e.quadraticCurveTo(X-A*3,ne-A,X-A*2+Ue*A,ne+R+A),e.fill();const ge=A*1.2*x,se=A*3*x,Ie=A*2.5*x,Ae=X+L*.8,q=X+L*.2;e.fillStyle=J,e.fillRect(q,ce-Ie,ge,Ie+Y[2]),e.fillRect(Ae,ce-se,ge,se+Y[0]),e.fillStyle=$,e.beginPath(),e.moveTo(X,ne+R),e.lineTo(X,ne+A),e.quadraticCurveTo(X+L/2,ne,X+L,ne+A),e.lineTo(X+L,ne+R),e.fill(),e.fillStyle=$,e.fillRect(q+A/2,ce-Ie,ge,Ie+Y[3]),e.fillRect(Ae+A/2,ce-se,ge,se+Y[1]);const ie=A*3.5*x,Le=X+L-ie*.3+W,de=ne-ie*.3+V;e.fillStyle=$,e.beginPath(),e.arc(Le,de,ie/2,0,Math.PI*2),e.fill(),e.beginPath(),e.ellipse(Le+ie*.4,de+ie*.2,A*1.5,A,0,0,Math.PI*2),e.fill(),m[1]>=0&&(e.fillStyle=Ee,e.fillRect(Le+A*.5,de-A*.5,A*.5,A*.5),u==="attacking"&&(e.fillStyle=_e,e.fillRect(Le+ie*.5,de+ie*.4,A,A*.4))),e.fillStyle=J,e.beginPath(),e.moveTo(Le-ie*.4,de-ie*.3),e.lineTo(Le,de-ie*.7),e.lineTo(Le,de-ie*.2),e.fill(),e.restore()}},OR=9;function DR(e,n){const{position:r,gender:o,age:l,decayProgress:a,food:u,radius:d,originalEntityType:h,geneCode:g}=n;if(e.save(),e.globalAlpha=1-a,h==="human"?qf.render(e,r.x-d,r.y-d,d*2,d*2,a,"dead",o,l,[0,0],!1,0):h==="prey"?ty.render(e,r.x-d,r.y-d,d*2,d*2,a,"dead",{gender:o,age:l,direction:[0,0],isPregnant:!1,hungryLevel:0,geneCode:g||8405024}):h==="predator"&&ny.render(e,r.x-d,r.y-d,d*2,d*2,a,"dead",{gender:o,age:l,direction:[0,0],isPregnant:!1,hungryLevel:0,geneCode:g||8405024}),e.restore(),u.length>0){e.save(),e.font=`${OR}px Arial`,e.textAlign="center",e.textBaseline="middle";const m=It*.9,y=Math.PI/K0*3;u.forEach((S,w)=>{const I=w*y,A=r.x+m*Math.cos(I)*Math.atan2(w,w),_=r.y+m*Math.sin(I)*Math.atan2(w,w),F=z0[S.type];e.fillText(F,A,_)}),e.restore()}}function Yi(e,n,r,o,l,a,u,d){e.save(),e.fillStyle=u,e.fillRect(n,r,o,l),e.fillStyle=d,e.fillRect(n,r,o*Math.max(0,a),l),e.restore()}function MR(e,n,r,o,l,a){if(e.save(),o.length===0){e.restore();return}const u=o.length*l;let d;u>a||u+(o.length-1)*4>a?d=(a-u)/(o.length-1):d=4,o.length===1&&(d=0);for(let h=0;h<o.length;h++){const g=z0[o[h].type];e.fillText(g,n+h*(l+d),r)}e.restore()}function kR(e,n,r,o,l){const a=n.autopilotControls.hoveredAutopilotAction;if(!a)return;let u,d=It/2;const h=fu[a.action],g=Nv[a.action],m=`${h} ${g}`;if("targetEntityId"in a){const y=n.entities.entities[a.targetEntityId];y&&(u=y.position,d=y.radius)}else"position"in a&&(u=a.position);if(u){ey(e,u,d,Hf,Gf,2,r,o,l,n.mapDimensions),e.save(),e.font=`${Ro}px "Press Start 2P", Arial`,e.fillStyle="white",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=5;const{x:y,y:S}=mu(u,r,{width:o,height:l},n.mapDimensions),w=S-d-du-Ro/2;e.fillText(m,y,w),e.restore()}}function FR(e,n,r,o,l){e.save();const a=(Math.sin(l*xf)+1)/2,u=r+du+a*5;e.strokeStyle=Hf,e.lineWidth=2,e.setLineDash(Gf),e.beginPath(),e.arc(n.x,n.y,u,0,Math.PI*2),e.stroke(),e.setLineDash([]);const d=fu[o],h=Nv[o];if(d){e.font=`${Ro*1.5}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle";const g=n.y-u-25;e.fillText(d,n.x,g),e.font=`${Ro*.8}px "Press Start 2P", Arial`,e.fillText(h,n.x,g+25)}e.restore()}function UR(e,n,r){e.save();const o=30,l=70,a=3,u=l/a;for(let d=0;d<a;d++){const h=d*u,g=(r*o+h)%l,m=1-g/l;e.strokeStyle=`rgba(255, 215, 0, ${m*.7})`,e.lineWidth=1+(1-m)*2,e.beginPath(),e.arc(n.x,n.y,g,0,Math.PI*2),e.stroke()}e.restore()}function LR(e,n){const{activeAutopilotAction:r,behaviors:o}=n.autopilotControls,l=At(n);if(!l)return;const a=(u,d)=>{UR(u,d.position,n.time)};if(l.isCallingToFollow&&on(e,n.mapDimensions.width,n.mapDimensions.height,a,{position:l.position}),o.followLeader&&!r&&on(e,n.mapDimensions.width,n.mapDimensions.height,a,{position:l.position},70),r){let u,d=15;if("position"in r)u=r.position;else if("targetEntityId"in r){const h=n.entities.entities[r.targetEntityId];h&&(u=h.position,d=h.radius||30)}if(u&&r.action!==Te.AutopilotFollowMe&&!l.isCallingToFollow){const h=(g,m)=>{FR(g,m.position,d,r.action,n.time)};on(e,n.mapDimensions.width,n.mapDimensions.height,h,{position:{...u}},u,d+30)}}}function t0(e,n,r,o,l,a,u=!0){const d=n.split(" ");let h="";const g=[];for(let m=0;m<d.length;m++){const y=h+d[m]+" ";e.measureText(y).width>l&&m>0?(g.push(h),h=d[m]+" "):h=y}if(g.push(h),u)for(let m=0;m<g.length;m++)e.fillText(g[m],r,o+m*a);return g.length*a}function BR(e){return 1-Math.pow(1-e,3)}function HR(e,n,r,o){n.notificationButtonRects={dismiss:{},view:{}};const l=n.notifications.filter(u=>!u.isDismissed);if(l.length===0)return;e.save();let a=o-RE;for(const u of l){const d=r-wl-pr;e.font=`${Ad}px "Press Start 2P", Arial`;const h=d+pr,g=wl-pr*2,m=t0(e,u.message,-9999,-9999,g,Ad*1.2,!1),y=pr*2+m+zn,S=a-y,w=Date.now()-u.creationTime,I=Math.min(w/CE,1),A=BR(I),_=o,F=_+(S-_)*A;e.fillStyle=TE,e.beginPath(),e.roundRect(d,F,wl,y,SE),e.fill(),e.fillStyle=AE,e.textBaseline="top",t0(e,u.message,h,F+pr,g,Ad*1.2,!0);const B=F+y-zn-pr/2,O=d+wl-zn-pr/2,H={x:O,y:B,width:zn,height:zn};n.notificationButtonRects&&(n.notificationButtonRects.dismiss[u.id]=H);const x=n.hoveredButtonId===`notification-dismiss-${u.id}`;if(e.fillStyle=x?Bm:IE,e.font=`${zn}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("",H.x+H.width/2,H.y+H.height/2),u.targetEntityIds||u.targetPosition||u.targetArea||u.targetRadius){const J={x:O-zn-Lm,y:B,width:zn,height:zn};n.notificationButtonRects&&(n.notificationButtonRects.view[u.id]=J);const Ee=n.hoveredButtonId===`notification-view-${u.id}`;e.fillStyle=Ee?Bm:wE,e.font=`${zn*(Ee?1.5:1.2)}px Arial`,e.fillText("",J.x+J.width/2,J.y+J.height/2)}a-=y+Lm}e.restore()}function GR(e){return e.length===0?0:e.reduce((r,o)=>r+o,0)/e.length}function xd(e,n,r,o,l,a,u,d){e.save(),e.fillStyle="rgba(255, 255, 255, 0.1)",e.fillRect(o,l,a,u),e.strokeStyle="#555",e.lineWidth=1,e.strokeRect(o,l,a,u);const h=GR(r);e.fillStyle="white",e.font="11px monospace",e.textAlign="left",e.fillText(`${n}: ${h.toFixed(2)}ms`,o+qe,l+qe+8);const g=Math.max(...r,1),m=r.map(y=>y/g*u);if(e.beginPath(),e.strokeStyle=d,e.lineWidth=2,m.length>1){e.moveTo(o,l+u-m[0]);for(let y=1;y<m.length;y++){const S=o+y/(m.length-1)*a,w=l+u-m[y];e.lineTo(S,w)}}else if(m.length===1){const y=l+u-m[0];e.moveTo(o,y),e.lineTo(o+a,y)}e.stroke(),e.fillStyle="rgba(255, 255, 255, 0.7)",e.font="10px monospace",e.textAlign="right",e.fillText(`${g.toFixed(2)}ms`,o+a-qe,l+qe+8),e.restore()}function bR(e,n,r){const{performanceMetrics:o}=n;if(!o)return;const l=280,a=240,u=r-l-qe,d=qe+gn*2;e.save(),e.fillStyle="rgba(0, 0, 0, 0.8)",e.fillRect(u,d,l,a),e.strokeStyle="#444",e.lineWidth=2,e.strokeRect(u,d,l,a),e.fillStyle="white",e.font="12px monospace",e.textAlign="left";let h=d+qe+5;const g=u+qe;e.fillStyle="#66ccff",e.font="bold 14px monospace",e.fillText(" Performance Debugger",g,h),h+=25,e.fillStyle="white",e.font="12px monospace";const m=xR(n);e.fillText(`FPS: ${m.toFixed(1)}`,g,h),h+=20;const y=l-qe*2,S=45,w=10;xd(e,"Render",$d(n,"renderTime"),g,h,y,S,"#4CAF50"),h+=S+w,xd(e,"World Update",$d(n,"worldUpdateTime"),g,h,y,S,"#2196F3"),h+=S+w,xd(e,"AI Update",$d(n,"aiUpdateTime"),g,h,y,S,"#FFC107"),e.fillStyle="#888",e.font="10px monospace",e.textAlign="center",e.fillText("Press '2' to toggle this panel",u+l/2,d+a-10),e.restore()}function xR(e){const{performanceMetrics:n}=e;if(!n||n.history.length===0)return 0;const r=n.history[n.history.length-1].bucketTime/(yt/St);return n.history.filter(a=>r-a.bucketTime/(yt/St)<1).length}function $R(e,n){if(e.length===0)return[];const r=new Map;for(const a of e){const u=Math.floor(a.bucketTime/(yt/St));r.set(u,(r.get(u)||0)+a[n])}return Array.from(r.keys()).sort().map(a=>r.get(a)).slice(0,-1).slice(1).reverse()}function $d(e,n){return $R(e.performanceMetrics.history,n)}function Zf(e,n,r){if(!n.aiBlackboard)return;const o=n.aiBlackboard.nodeExecutionData,l=n.type==="human"?Wv:n.type==="predator"?jv:n.type==="prey"?Yv:null;if(!l)return;e.save(),e.font=`${Qw}px Arial`,e.textAlign="left",e.textBaseline="top";const a=S=>{switch(S){case E.SUCCESS:return eE;case E.FAILURE:return tE;case E.RUNNING:return nE;case E.NOT_EVALUATED:case null:default:return iE}},u=S=>{if(!S.name||!o[S.name])return{width:0,height:0};let w=0,I=0;const A=o[S.name],_=` ${S.name}`+(A!=null&&A.debugInfo?`: ${A.debugInfo}`:""),F=e.measureText(_).width,B=(S.depth??0)*Dm+8+F+km+Es+20;if(w=Math.max(w,B),I+=Sd,S.children)for(const O of S.children){const H=u(O);w=Math.max(w,H.width),I+=H.height}else if(S.child){const O=u(S.child);w=Math.max(w,O.width),I+=O.height}return{width:w,height:I}},d=(S,w,I,A)=>{if(!S.name||!o[S.name])return w;let _=w;const F=o[S.name],B=I+2+(S.depth??0)*Dm;let O=E.NOT_EVALUATED,H=Mm,x="";if(F){O=F.status,x=F.debugInfo;const J=oE/St*yt,Ee=r-F.lastExecuted,_e=Math.max(0,1-Ee/J);H=ew(Mm,rE,_e),Ee>js&&(O=E.NOT_EVALUATED)}const U=a(O);e.fillStyle=U,e.fillText("",B,_),e.fillStyle=H;const $=` ${S.name}`+(x?`: ${x}`:"");if(e.fillText($,B+8,_),F&&F.executionHistory.length>0){const{executionHistory:J}=F,Ee=Iv/St*yt,_e=r,be=_e-Ee,Pe=I+A-Es-km;let Re=Pe;const ce=_+(Sd-Il)/2,Ue=J.filter(X=>X.time<be);let Se=Ue.length>0?Ue[Ue.length-1].status:null,te=be;const W=J.filter(X=>X.time>=be&&X.time<=_e),V=Es/Ee;e.fillStyle="rgba(255, 255, 255, 0.1)",e.fillRect(Pe,ce,Es,Il);for(const X of W){const ge=(X.time-te)*V;ge>0&&(e.fillStyle=a(Se),e.fillRect(Re,ce,ge,Il),Re+=ge),Se=X.status,te=X.time}r-te>js&&(Se=E.NOT_EVALUATED);const R=(_e-te)*V;e.fillStyle=a(Se);const L=Pe+Es-Re;e.fillRect(Re,ce,Math.min(R,L),Il)}if(_+=Sd,S.children)for(const J of S.children)_=d(J,_,I,A);else S.child&&(_=d(S.child,_,I,A));return _},{width:h,height:g}=u(l);if(g===0){e.restore();return}const m=n.position.x+qw,y=n.position.y+Zw-g/2;e.fillStyle=Jw,e.fillRect(m,y,h,g+4),d(l,y+2,m,h),e.restore()}const zR={moving:"walk",gathering:"gathering",eating:"eat",feeding:"eat",procreating:"procreate",idle:"idle",attacking:"attacking",planting:"gathering"};function WR(e,n){var d;const{radius:r,position:o,activeAction:l="idle"}=n,a=((d=n.stateMachine)==null?void 0:d[0])||"N/A",u=n.isAdult?It+20:It*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${l}`,o.x,o.y-u),e.fillText(`State: ${a}`,o.x,o.y-u+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-u+20),e.fillText(`Cooldown: ${n.attackCooldown||"N/A"}`,o.x,o.y-u+30),e.fillText(`Tribe: ${n.leaderId||"N/A"}`,o.x,o.y-u+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(255, 0, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function YR(e,n,r,o,l){e.save(),e.font=`${lf}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(r,n.x,n.y-(o?It:ko)-lf-l),e.restore()}function jR(e,n,r,o,l){const a=n.x,u=n.y-r-o/2;e.save(),e.fillStyle=l,e.strokeStyle=l,e.lineWidth=1.5,e.beginPath(),e.rect(a-o/2,u,o,o/2),e.fill(),e.beginPath(),e.moveTo(a-o/2,u),e.lineTo(a-o/4,u-o/3),e.lineTo(a-o/6,u),e.moveTo(a-o/6,u),e.lineTo(a,u-o/2),e.lineTo(a+o/6,u),e.moveTo(a+o/6,u),e.lineTo(a+o/4,u-o/3),e.lineTo(a+o/2,u),e.stroke(),e.restore()}function VR(e,n,r){var d;const{position:o,radius:l}=n,a=o.x-yd/2,u=o.y-l-Ww;if(((d=n.stateMachine)==null?void 0:d[0])===Zi){const h=n.stateMachine[1],g=r-h.attackStartTime,m=Math.min(g/ev,1);Yi(e,a,u,yd,Rm,m,$i,Yw)}else if(n.attackCooldown&&n.attackCooldown>0){const h=1-n.attackCooldown/cu;Yi(e,a,u,yd,Rm,h,$i,jw)}}function XR(e,n,r){const l="";e.save(),e.font="15px Arial",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=3,e.fillText(l,n.x,n.y-r),e.restore()}function KR(e,n,r=!1,o=!1,l=!1,a=!1,u=!1,d=!1,h=!1,g=!1,m,y){const{position:S,activeAction:w="idle"}=n,I=n.isAdult?It:It*.6,A=zR[w]||"idle";qf.render(e,S.x-I,S.y-I,I*2,I*2,n.animationProgress||0,A,n.gender,n.age,[n.direction.x,n.direction.y],n.isPregnant??!1,n.hunger),d&&(e.save(),e.strokeStyle=pv,e.lineWidth=2,e.beginPath(),e.arc(S.x,S.y,I+3,0,2*Math.PI),e.stroke(),e.restore());let _,F;if(u?(_=Rw,F=hv):r?(_=Cw,F=Bf):l?(_=Pw,F=Ew):o?(_=Nw,F=dv):a&&(_=Ow,F=fv),_&&F&&jR(e,S,I,_,F),n.tribeBadge&&YR(e,S,n.tribeBadge,n.isAdult??!1,_??0),h){let O=(n.isAdult?It:ko)+5;_&&(O+=_),n.tribeBadge&&(O+=lf),XR(e,S,O)}const B=g&&(y===void 0||n.id===y);B&&n.aiBlackboard&&Zf(e,n,m),VR(e,n,m),B&&WR(e,n)}const qR={grazing:"eat",moving:"walk",procreating:"procreate",feeding:"eat",idle:"idle"};function ZR(e,n){var d;const{radius:r,position:o,activeAction:l="idle"}=n,a=((d=n.stateMachine)==null?void 0:d[0])||"N/A",u=n.isAdult?It+20:It*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${l}`,o.x,o.y-u),e.fillText(`State: ${a}`,o.x,o.y-u+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-u+20),e.fillText(`Hunger: ${Math.round(n.hunger)}`,o.x,o.y-u+30),e.fillText(`Age: ${Math.round(n.age)}`,o.x,o.y-u+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(0, 255, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function QR(e,n,r=!1,o=0,l){var m,y;const{position:a,activeAction:u="idle"}=n,d=n.isAdult?n.radius:n.radius*.6,h=qR[u]||"idle";if(ty.render(e,a.x-d,a.y-d,d*2,d*2,n.animationProgress||0,h,{gender:n.gender,age:n.age,direction:[((m=n.direction)==null?void 0:m.x)||1,((y=n.direction)==null?void 0:y.y)||0],isPregnant:n.isPregnant??!1,hungryLevel:n.hunger,geneCode:n.geneCode}),n.hitpoints<n.maxHitpoints){const S=d*1.5,w=3,I=a.x-S/2,A=a.y-d-8;e.fillStyle="#555",e.fillRect(I,A,S,w);const _=n.hitpoints/n.maxHitpoints;e.fillStyle=_>.5?"#4CAF50":_>.25?"#FFC107":"#F44336",e.fillRect(I,A,S*_,w)}const g=r&&(l===void 0||n.id===l);g&&n.aiBlackboard&&Zf(e,n,o),g&&ZR(e,n)}const JR={attacking:"attacking",eating:"eat",moving:"walk",procreating:"procreate",feeding:"eat",idle:"idle"};function eP(e,n){var d;const{radius:r,position:o,activeAction:l="idle"}=n,a=((d=n.stateMachine)==null?void 0:d[0])||"N/A",u=n.isAdult?It+20:It*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${l}`,o.x,o.y-u),e.fillText(`State: ${a}`,o.x,o.y-u+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-u+20),e.fillText(`Hunger: ${Math.round(n.hunger)}`,o.x,o.y-u+30),e.fillText(`Age: ${Math.round(n.age)}`,o.x,o.y-u+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(255, 0, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function tP(e,n,r=!1,o=0,l){var m,y;const{position:a,activeAction:u="idle"}=n,d=n.isAdult?n.radius:n.radius*.6,h=JR[u]||"idle";if(ny.render(e,a.x-d,a.y-d,d*2,d*2,n.animationProgress||0,h,{gender:n.gender,age:n.age,direction:[((m=n.direction)==null?void 0:m.x)||1,((y=n.direction)==null?void 0:y.y)||0],isPregnant:n.isPregnant??!1,hungryLevel:n.hunger,geneCode:n.geneCode}),n.hitpoints<n.maxHitpoints){const S=d*1.5,w=3,I=a.x-S/2,A=a.y-d-8;e.fillStyle="#555",e.fillRect(I,A,S,w);const _=n.hitpoints/n.maxHitpoints;e.fillStyle=_>.5?"#4CAF50":_>.25?"#FFC107":"#F44336",e.fillRect(I,A,S*_,w)}(n.attackCooldown&&n.attackCooldown>0||n.huntCooldown&&n.huntCooldown>0)&&(e.strokeStyle="#FF8C00",e.lineWidth=3,e.beginPath(),e.arc(a.x,a.y,d+3,0,2*Math.PI),e.stroke());const g=r&&(l===void 0||n.id===l);g&&n.aiBlackboard&&Zf(e,n,o),g&&eP(e,n)}const iy=15;function n0(e,n,r,o,l=1.5){const a=r-n.startTime,u=Math.min(a/n.duration,1),d=1-u,g=1+Math.sin(u*Math.PI*2)*(l-1),m=iy*g;e.save(),e.globalAlpha=d,e.beginPath(),e.arc(n.position.x,n.position.y,Math.max(0,m),0,Math.PI*2),e.fillStyle=o,e.fill(),e.restore()}function lo(e,n,r,o,l=2){const a=r-n.startTime,u=Math.min(a/n.duration,1),d=1-u,h=iy*2*u;e.save(),e.globalAlpha=d,e.beginPath(),e.arc(n.position.x,n.position.y,h,0,Math.PI*2),e.strokeStyle=o,e.lineWidth=l,e.stroke(),e.restore()}function Li(e,n,r,o){const l=r-n.startTime,a=Math.min(l/n.duration,1),u=1-a,d=-20*a;e.save(),e.globalAlpha=u,e.font="20px Arial",e.textAlign="center",e.fillText(o,n.position.x,n.position.y+d),e.restore()}function nP(e,n,r){switch(n.type){case le.Hunger:n0(e,n,r,"rgba(255, 165, 0, 0.7)",1);break;case le.Procreation:Li(e,n,r,"");break;case le.Pregnant:n0(e,n,r,"rgba(255, 105, 180, 0.7)",1.2);break;case le.TargetAcquired:lo(e,n,r,"rgba(255, 0, 0, 0.8)",3);break;case le.Attack:Li(e,n,r,"");break;case le.Partnered:Li(e,n,r,"");break;case le.BushClaimed:lo(e,n,r,"rgba(0, 255, 0, 0.7)",2);break;case le.BushClaimLost:lo(e,n,r,"rgba(128, 128, 128, 0.7)",2);break;case le.Eating:Li(e,n,r,"");break;case le.ChildFed:Li(e,n,r,"");break;case le.AttackDeflected:Li(e,n,r,"");break;case le.AttackResisted:Li(e,n,r,"");break;case le.Hit:Li(e,n,r,"");break;case le.SeizeBuildup:lo(e,n,r,"rgba(255, 215, 0, 0.8)",4);break;case le.Seize:lo(e,n,r,"rgba(148, 0, 211, 0.8)",4);break;case le.CallToAttack:lo(e,n,r,"rgba(255, 255, 0, 0.8)",4);break}}function i0(e,n,r,o,l,a,u){e.save();const{position:d}=n;e.strokeStyle=o,e.lineWidth=l+Math.sin(u*a)*(l/2),e.setLineDash([8,8]),e.beginPath(),e.arc(d.x,d.y,r,0,2*Math.PI),e.stroke(),e.restore()}const r0=8,iP=1.5,rP=.5,o0=2,oP="#5a5a5a",sP="#7e7e7e";function zd(e){const n=Math.sin(e)*1e4;return n-Math.floor(n)}function ry(e,n,r,o,l){const a=(n+r)*2,u=Math.floor(a/r0),d=-n/2,h=n/2,g=-r/2,m=r/2;for(let y=0;y<u;y++){const S=o+y*13,w=zd(S),I=zd(S+1);let A=y*r0,_=0,F=0;A<n?(_=d+A,F=g):A<n+r?(_=h,F=g+(A-n)):A<n*2+r?(_=h-(A-(n+r)),F=m):(_=d,F=m-(A-(n*2+r)));const B=(I-.5)*o0,O=(zd(S+2)-.5)*o0;e.beginPath();const H=iP+w*rP;e.fillStyle=l||(w>.5?sP:oP),e.ellipse(_+B,F+O,H,H*.85,I*Math.PI,0,Math.PI*2),e.fill(),l||(e.strokeStyle="#2b2b2b",e.lineWidth=1,e.stroke())}}function aP(e,n,r){const{position:o,width:l,height:a,constructionProgress:u,destructionProgress:d,isConstructed:h,isBeingDestroyed:g,id:m}=n,y=ra[n.buildingType];e.save(),e.translate(o.x,o.y),h||(e.globalAlpha=.3+u*.7),ry(e,l,a,m),e.globalAlpha=.5,e.font=`${Math.min(l,a,30)*.5}px Arial`,e.textAlign="center",e.textBaseline="middle",e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=4,e.fillStyle="#FFFFFF",e.fillText(y.icon,0,0),e.shadowBlur=0,e.restore();const S=l,w=o.x-S/2,I=o.y+a/2+dw;h?g&&Yi(e,w,I,S,wm,1-d,$i,cw):Yi(e,w,I,S,wm,u,$i,uw)}function lP(e,n,r,o,l){const a=ra[r],{width:u,height:d}=a.dimensions,h=(m,y)=>{m.save(),m.translate(y.x,y.y),m.globalAlpha=lw;const S=o?"#4CAF50":"#F44336";ry(m,u,d,9999,S),m.font=`${Math.min(u,d)*.5}px Arial`,m.textAlign="center",m.textBaseline="middle",m.fillStyle=S,m.fillText(a.icon,0,0),m.restore()},g={position:{...n},radius:Math.max(u,d)/2,id:0,type:"building",direction:{x:0,y:0},acceleration:0,forces:[],velocity:{x:0,y:0},debuffs:[]};on(e,l.width,l.height,(m,y)=>h(m,y.position),g)}function uP(e,n,r,o,l){const a=At(n),u=a?Pt(n,a):[],d=hi(u),{width:h,height:g}=n.mapDimensions;Object.values(n.entities.entities).sort((I,A)=>I.position.y-A.position.y||I.id-A.id||I.type==="building"?-1:1).filter(I=>Ml(I,o,l,n.mapDimensions)).forEach(I=>{var A,_;if(I.type==="building")on(e,h,g,aP,I,n,a,n.time);else if(I.type==="berryBush")on(e,h,g,CR,I,n,a,n.time);else if(I.type==="human"){const F=I,B=F.id===(a==null?void 0:a.id),O=u.some(_e=>_e.id===F.id),H=F.id===(d==null?void 0:d.id),x=a&&(F.id===a.motherId||F.id===a.fatherId),U=a&&(((A=F.partnerIds)==null?void 0:A.includes(a.id))||((_=a.partnerIds)==null?void 0:_.includes(F.id))),$=(a==null?void 0:a.attackTargetId)===F.id,J=F.leaderId?n.entities.entities[F.leaderId]:void 0,Ee=a?F.leaderId===a.id&&F.activeAction==="moving"&&F.target===F.leaderId&&(J==null?void 0:J.isCallingToFollow):!1;on(e,h,g,KR,F,B,x,O,U,H,$,Ee,r,n.time,n.debugCharacterId)}else I.type==="corpse"?on(e,h,g,DR,I):I.type==="prey"?on(e,h,g,QR,I,r,n.time,n.debugCharacterId):I.type==="predator"&&on(e,h,g,tP,I,r,n.time,n.debugCharacterId)}),n.visualEffects.filter(I=>Ml(I,o,l,n.mapDimensions)).forEach(I=>{on(e,h,g,nP,I,n.time)});const w=n.notifications.filter(I=>!I.isDismissed);for(const I of w)if(I.highlightedEntityIds&&I.renderHighlights)for(const A of I.highlightedEntityIds){const _=n.entities.entities[A];_&&Ml(_,o,l,n.mapDimensions)&&on(e,h,g,i0,_,PE,NE,DE,OE,n.time)}if(n.tutorialState.isActive&&n.tutorialState.highlightedEntityIds.length>0)for(const I of n.tutorialState.highlightedEntityIds){const A=n.entities.entities[I];A&&Ml(A,o,l,n.mapDimensions)&&on(e,h,g,i0,A,gE,wv,Ev,xf,n.time)}}function cP(e,n,r,o,l,a){let u=null,d=null;e.textAlign="left";let h=qe+gn;const m=n.time/(yt/St)/uu%1,y=_s[uo.Time],S=25,w=qe+S;e.fillText(y,qe,h+tn/2+gn/3),Yi(e,w,h,Fi,tn,m,$i,Bw),h+=tn+ri;const I=h+fr/2,A=h+(fr-tn)/2,_=5;na(e,{x:qe*2,y:I},fr,5,r.gender,!1,!1,!1);const F=qe+fr+_,B=Fi+S-(fr+_)*2;Yi(e,F,A,B,tn,Math.floor(r.age)/Vs,$i,Lw),na(e,{x:F+B+_+fr/2,y:I},fr,Vs,r.gender,!1,!1,!1),h+=tn+ri*2;const O=[],H=new Set;if(O.push({member:r,isPlayer:!0,isHeir:!1,isPartner:!1,isParent:!1}),H.add(r.id),o&&!H.has(o.id)&&(O.push({member:o,isPlayer:!1,isHeir:!0,isPartner:!1,isParent:!1}),H.add(o.id)),l.forEach(ce=>{H.has(ce.id)||(O.push({member:ce,isPlayer:!1,isHeir:!1,isPartner:!0,isParent:!1}),H.add(ce.id))}),a.forEach(ce=>{H.has(ce.id)||(O.push({member:ce,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!1}),H.add(ce.id))}),r.motherId&&!H.has(r.motherId)){const ce=n.entities.entities[r.motherId];ce&&(O.push({member:ce,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!0}),H.add(ce.id))}if(r.fatherId&&!H.has(r.fatherId)){const ce=n.entities.entities[r.fatherId];ce&&(O.push({member:ce,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!0}),H.add(ce.id))}const x=_s[uo.Family],U=10,$=qe+gn+U,J=Fi+S-(gn+U),Ee=h+Sl/2;e.font=`${gn}px "Press Start 2P", Arial`,e.textBaseline="middle",e.fillText(x,qe,Ee);const _e=h+Sl/2;TR(e,$,_e,O,Sl,J),h+=Sl+ri,e.textBaseline="alphabetic";const be=_s[uo.Hitpoints];e.fillText(be,qe,h+tn/2+gn/3),Yi(e,w,h,Fi,tn,r.hitpoints/r.maxHitpoints,$i,Uw),h+=tn+ri;const Pe=_s[uo.Hunger];e.fillText(Pe,qe,h+tn/2+gn/3),Yi(e,w,h,Fi,tn,(Pr-r.hunger)/Pr,$i,Fw),u={x:qe,y:h-ri/2,width:Fi+S,height:tn+ri},h+=tn+ri,e.textBaseline="middle";const Re=_s[uo.Food];return e.fillText(Re,qe,h+yl/2),MR(e,w,h+yl/2,r.food,yl,Fi),d={x:qe,y:h-ri/5,width:Fi+S,height:yl+ri},e.textBaseline="alphabetic",{hungerBarRect:u,foodBarRect:d}}let Os=[],s0=0;const dP=36,fP=200;function hP(e,n,r,o){const l=n.search.prey.count(),a=n.search.predator.count(),u=n.search.berryBush.count();n.time-s0>=dP&&(Os.push({time:n.time,prey:l,predators:a,bushes:u}),Os.length>fP&&(Os=Os.slice(-200)),s0=n.time);const d=et*tt,h=l/d*1e6,g=a/d*1e6,m=u/d*1e6,y=iR(),S=Math.floor(n.time/(24*365)),w=Math.floor(n.time%(24*365)/24),I=Math.floor(n.time%24),A=400,_=Math.min(o*.8,600),F=r-A-10,B=qe+gn*2;e.save(),e.fillStyle="rgba(0, 0, 0, 0.9)",e.fillRect(F,B,A,_),e.strokeStyle="#444",e.lineWidth=2,e.strokeRect(F,B,A,_),e.fillStyle="white",e.font="12px monospace",e.textAlign="left";let O=B+20;const H=14,x=F+15;e.fillStyle="#66ccff",e.font="bold 14px monospace",e.fillText(" Ecosystem Debugger",x,O),O+=25,e.fillStyle="white",e.font="12px monospace",e.fillText(`Game Time: Year ${S}, Day ${w}, Hour ${I}`,x,O),O+=H,e.fillText(`Map Size: ${et}  ${tt} pixels`,x,O),O+=20,e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Q-Learning Status",x,O),O+=18,y&&(e.fillText(`Q-Table Size: ${y.qTableSize} entries`,x,O),O+=H,e.fillText(`Exploration Rate: ${(y.explorationRate*100).toFixed(1)}%`,x,O),O+=H);const U=Os.slice(-20);U.length>1&&(e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Population Trends (Last 20 Points)",x,O),O+=30,pP(e,x,O,U),O+=50),e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Density (per 1000 px)",x,O),O+=18,e.fillStyle="white",e.font="12px monospace";const $=(ui/d*1e6).toFixed(2),J=(ci/d*1e6).toFixed(2),Ee=(di/d*1e6).toFixed(2);e.fillText(`Prey: ${h.toFixed(2)} (target: ${$})`,x,O),O+=H,e.fillText(`Predators: ${g.toFixed(2)} (target: ${J})`,x,O),O+=H,e.fillText(`Bushes: ${m.toFixed(2)} (target: ${Ee})`,x,O),O+=20,e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Current Population Status",x,O),O+=18,e.fillStyle="white",e.font="12px monospace";const _e=Math.round(l/ui*100),be=Math.round(a/ci*100),Pe=Math.round(u/di*100),Re=ce=>ce<50?"#ff4444":ce<80?"#ffaa44":ce>120?"#44aaff":"#44ff44";e.fillStyle=Re(_e),e.fillText(`Prey: ${l}/${ui} (${_e}%)`,x,O),O+=H,e.fillStyle=Re(be),e.fillText(`Predators: ${a}/${ci} (${be}%)`,x,O),O+=H,e.fillStyle=Re(Pe),e.fillText(`Bushes: ${u}/${di} (${Pe}%)`,x,O),O+=20,e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Current Parameters",x,O),O+=18,e.fillStyle="white",e.font="10px monospace",e.fillText("Prey:",x,O),O+=13,e.fillText(` Gestation: ${n.ecosystem.preyGestationPeriod.toFixed(1)}h`,x,O),O+=11,e.fillText(` Procreation: ${n.ecosystem.preyProcreationCooldown.toFixed(1)}h`,x,O),O+=11,e.fillText(` Hunger: ${n.ecosystem.preyHungerIncreasePerHour.toFixed(1)}/h`,x,O),O+=13,e.fillText("Predators:",x,O),O+=13,e.fillText(` Gestation: ${n.ecosystem.predatorGestationPeriod.toFixed(1)}h`,x,O),O+=11,e.fillText(` Procreation: ${n.ecosystem.predatorProcreationCooldown.toFixed(1)}h`,x,O),O+=11,e.fillText(` Hunger: ${n.ecosystem.predatorHungerIncreasePerHour.toFixed(1)}/h`,x,O),O+=13,e.fillText("Bushes:",x,O),O+=13,e.fillText(` Spread Chance: ${(n.ecosystem.berryBushSpreadChance*100).toFixed(1)}%`,x,O),O+=15,e.fillStyle="#888",e.font="10px monospace",e.textAlign="center",e.fillText("Press '1' to toggle this debugger",F+A/2,B+_-10),e.restore()}function pP(e,n,r,o){if(o.length<2)return;const d={prey:Math.max(...o.map(g=>g.prey),ui),predators:Math.max(...o.map(g=>g.predators),ci),bushes:Math.max(...o.map(g=>g.bushes),di)};[{data:o.map(g=>g.prey),color:"#44ff44",label:"Prey",target:ui,max:d.prey},{data:o.map(g=>g.predators),color:"#ff4444",label:"Predators",target:ci,max:d.predators},{data:o.map(g=>g.bushes),color:"#ffaa44",label:"Bushes",target:di,max:d.bushes}].forEach((g,m)=>{const y=n+m*115,S=r;e.fillStyle=g.color,e.font="10px monospace",e.fillText(g.label,y,S-5),e.strokeStyle="#333",e.lineWidth=1,e.strokeRect(y,S,100,30),e.beginPath(),e.strokeStyle=g.color;for(let I=0;I<g.data.length;I++){const A=y+I/(g.data.length-1)*100,_=S+30-g.data[I]/g.max*30;I===0?e.moveTo(A,_):e.lineTo(A,_)}e.stroke(),e.beginPath(),e.strokeStyle="#888",e.setLineDash([2,2]);const w=S+30-g.target/g.max*30;e.moveTo(y,w),e.lineTo(y+100,w),e.stroke(),e.setLineDash([])})}function a0(e,n,r){e.save();const{x:o,y:l,width:a,height:u}=n.rect,d=mv;if(e.beginPath(),e.moveTo(o+d,l),e.lineTo(o+a-d,l),e.quadraticCurveTo(o+a,l,o+a,l+d),e.lineTo(o+a,l+u-d),e.quadraticCurveTo(o+a,l+u,o+a-d,l+u),e.lineTo(o+d,l+u),e.quadraticCurveTo(o,l+u,o,l+u-d),e.lineTo(o,l+d),e.quadraticCurveTo(o,l,o+d,l),e.closePath(),e.fillStyle=n.isDisabled?vv:n.backgroundColor,e.fill(),n.activated){e.save();const h=(Math.sin(Date.now()/1e3*Av)+1)/2;e.strokeStyle=Tv,e.lineWidth=2+h*2,e.globalAlpha=.7+h*.3,e.stroke(),e.restore()}if(n.lastActivated){const h=Date.now()-n.lastActivated;if(h<Zl){const g=1-h/Zl;e.fillStyle=Sv,e.globalAlpha=g,e.fill(),e.globalAlpha=1}}r&&!n.isDisabled&&(e.fillStyle=bf,e.globalAlpha=.5,e.fill(),e.globalAlpha=1),e.fillStyle=n.isDisabled?yv:n.textColor,n.icon?(e.font=`${u*.55}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(n.icon,o+a/2,l+u/2),n.text&&(e.font=`${u*.18}px "Press Start 2P", Arial`,e.textAlign="right",e.textBaseline="bottom",e.fillText(n.text,o+a-4,l+u-2))):(e.font=`${gn*1.5}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(n.text,o+a/2,l+u/2)),e.restore()}function gP(e,n,r,o){e.save(),e.fillStyle="rgba(0, 0, 0, 0.6)",e.fillRect(0,0,r,o);const l=500,a=150,u=(r-l)/2,d=(o-a)/2;e.fillStyle=mn,e.font=`${gn*1.1}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("Are you sure you want to exit",r/2,d+a/3-10),e.fillText("to the main menu?",r/2,d+a/3+10);const h=li*1.5,g=gv,m=d+a-g-qe*2,y=20,S=h*2+y,w=u+(l-S)/2,I={id:"confirmExitYes",action:fe.ConfirmExitYes,rect:{x:w,y:m,width:h,height:g},text:"Yes",backgroundColor:bi,textColor:mn,currentWidth:h},A=w+h+y,_={id:"confirmExitNo",action:fe.ConfirmExitNo,rect:{x:A,y:m,width:h,height:g},text:"No",backgroundColor:bi,textColor:mn,currentWidth:h};n.uiButtons.push(I,_),a0(e,I,n.hoveredButtonId===I.id),a0(e,_,n.hoveredButtonId===_.id),e.restore()}function tu(e,n,r,o,l,a=!1){var h;if(e.save(),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="#2c5234",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.translate(e.canvas.width/2-r.x,e.canvas.height/2-r.y),!a&&n.gameOver){e.restore(),ER(e,n);return}uP(e,n,n.debugPanel===_t.General,r,l);const u=At(n);if(u&&n.selectedBuildingType&&n.selectedBuildingType!=="removal"&&n.mousePosition){const g=hf(n.mousePosition,r,l,n.mapDimensions),m=Mv(g,n.selectedBuildingType,u.leaderId,n);lP(e,g,n.selectedBuildingType,m,n.mapDimensions)}const d=n.notifications.filter(g=>!g.isDismissed);for(const g of d){const m=(Math.sin(n.time*_E)+1)/2;e.globalAlpha=m*.5+.25,e.fillStyle=EE,g.targetArea&&e.fillRect(g.targetArea.x,g.targetArea.y,g.targetArea.width,g.targetArea.height),g.targetRadius&&(e.beginPath(),e.arc(g.targetRadius.x,g.targetRadius.y,g.targetRadius.radius,0,Math.PI*2),e.fill())}if(e.globalAlpha=1,LR(e,n),e.restore(),!a){e.fillStyle=Dw,e.font=`${gn}px "Press Start 2P", Arial`,e.shadowColor=Mw,e.shadowBlur=kw,n.uiButtons=[];let g=null,m=null;if(u){const w=Pt(n,u),I=hi(w),A=((h=u.partnerIds)==null?void 0:h.map(F=>n.entities.entities[F]).filter(F=>F!==void 0))||[],_=cP(e,n,u,I,A,w);g=_.hungerBarRect,m=_.foodBarRect}const y=rv(n,u==null?void 0:u.leaderId);AR(e,n,y,e.canvas.width,e.canvas.height);const{commandButtonsRect:S}=lR(e,n,e.canvas.width);if(e.shadowColor="transparent",e.shadowBlur=0,u&&(kR(e,n,r,e.canvas.width,e.canvas.height),o.length>0&&fR(e,o,u,r,e.canvas.width,e.canvas.height,n.mapDimensions)),n.tutorialState.activeUIHighlights.length>0){const{activeUIHighlights:w}=n.tutorialState;w.includes(Rr.HUNGER_BAR)&&g&&Gd(e,g,n.time),w.includes(Rr.FOOD_BAR)&&m&&Gd(e,m,n.time),w.includes(Rr.COMMAND_BUTTONS)&&S&&Gd(e,S,n.time)}if(n.tutorialState.isActive){const w=wR(e,n,e.canvas.width,e.canvas.height);w&&n.uiButtons.push({id:"tutorial-dismiss",action:fe.DismissTutorial,rect:w,text:"",currentWidth:w.width,backgroundColor:"transparent",textColor:"transparent"})}switch(HR(e,n,e.canvas.width,e.canvas.height),n.debugPanel){case _t.Ecosystem:hP(e,n,e.canvas.width,e.canvas.height);break;case _t.Performance:bR(e,n,l.width);break}n.isPaused&&n.exitConfirmation!=="pending"&&uR(e),n.exitConfirmation==="pending"&&gP(e,n,e.canvas.width,e.canvas.height)}}const mP=yn.div`
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
`,vP=yn.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #2c5234;
`,yP=yn.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  z-index: 1;
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0.7) 100%);
`,SP=yn.h1`
  font-family: 'Press Start 2P', cursive;
  font-size: 4rem;
  color: #fff;
  text-shadow: 4px 4px 0px #ff0000;
  margin-bottom: 2rem;
`,l0=yn.button`
  font-family: 'Press Start 2P', cursive;
  font-size: 1.5rem;
  padding: 1rem 2rem;
  color: #fff;
  background-color: #ff0000;
  border: 2px solid #fff;
  box-shadow: 4px 4px 0px #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;

  &:hover {
    background-color: #fff;
    color: #ff0000;
    box-shadow: 4px 4px 0px #ff0000;
  }
`,TP=yn.div`
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  align-items: center;
`,AP=yn.div`
  position: absolute;
  bottom: 1rem;
  font-family: 'Press Start 2P', cursive;
  font-size: 0.8rem;
  color: #fff;
  text-shadow: 2px 2px 0px #000;
  a {
    color: #fff;
    text-decoration: none;
    &:hover {
      text-decoration: underline;
    }
  }
`,Ul="intro-soundtrack",u0=()=>{const{setAppState:e,savedGameState:n,clearCurrentSave:r}=Do(),o=Ce.useRef(null),l=Ce.useRef(null),a=Ce.useRef(m1()),u=Ce.useRef(),d=Ce.useRef(a.current.viewportCenter),h=Ce.useRef(),g=Ce.useCallback(()=>{_d(Ul,2),r(),e("game")},[e,r]),m=Ce.useCallback(()=>{n&&(_d(Ul,2),e("game"))},[e,n]);Ce.useEffect(()=>{const w=I=>{(I.key==="Enter"||I.key===" ")&&(n?m():g())};return window.addEventListener("keydown",w),()=>{window.removeEventListener("keydown",w)}},[g,m,n]),Ce.useEffect(()=>(zf(ve.SoundTrack1,{loop:!0,trackId:Ul}),()=>{_d(Ul,2)}),[]),Ce.useEffect(()=>{const w=o.current;if(!w)return;l.current=w.getContext("2d");const I=()=>{w&&l.current&&(w.width=window.innerWidth,w.height=window.innerHeight,tu(l.current,a.current,d.current,[],{width:w.width,height:w.height},!0))};return I(),window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]),Ce.useEffect(()=>{const w=()=>{const A=ow(a.current);if(A.length>0){const _=Math.floor(Math.random()*A.length);h.current=A[_].id}};w();const I=setInterval(w,OA);return()=>clearInterval(I)},[]);const[y,S]=b0(w=>{var _,F;if(!l.current)return;if(u.current===void 0){u.current=w;return}const I=Math.min((w-u.current)/1e3,1);a.current=gu(a.current,I);const A=h.current?a.current.entities.entities[h.current]:void 0;if(A){const{mapDimensions:B}=a.current,{width:O,height:H}=B;let x={...A.position};const U=x.x-d.current.x;Math.abs(U)>O/2&&(U>0?x.x-=O:x.x+=O);const $=x.y-d.current.y;Math.abs($)>H/2&&($>0?x.y-=H:x.y+=H);let J=kf(d.current,x,Cf*I);J={x:(J.x%O+O)%O,y:(J.y%H+H)%H},d.current=J}tu(l.current,a.current,d.current,[],{width:((_=o.current)==null?void 0:_.width)||800,height:((F=o.current)==null?void 0:F.height)||600},!0),u.current=w});return Ce.useEffect(()=>(S(),y),[S,y]),ke.jsxs(mP,{children:[ke.jsx(vP,{ref:o}),ke.jsxs(yP,{children:[ke.jsx(SP,{children:"Tribe2"}),ke.jsxs(TP,{children:[ke.jsx(l0,{onClick:g,children:"New Game"}),n&&ke.jsx(l0,{onClick:m,children:"Load Game"})]}),ke.jsxs(AP,{children:["by"," ",ke.jsx("a",{href:"https://github.com/gtanczyk",target:"_blank",rel:"noopener noreferrer",children:"gtanczyk"})]})]})]})};function IP(){console.log("Tribe game initialized with detailed 2D world state.");const e=g1();return e.ecosystem={preyGestationPeriod:Ir,preyProcreationCooldown:wr,predatorGestationPeriod:Er,predatorProcreationCooldown:_r,preyHungerIncreasePerHour:zi,predatorHungerIncreasePerHour:Wi,berryBushSpreadChance:fi},e.debugPanel=_t.None,e.performanceMetrics={currentBucket:{renderTime:0,worldUpdateTime:0,aiUpdateTime:0},history:[]},e}const wP=({canvasRef:e,ctxRef:n,gameStateRef:r,viewportCenterRef:o,playerActionHintsRef:l})=>(Ce.useEffect(()=>{const a=e.current;if(!a)return;n.current=a.getContext("2d");const u=()=>{a&&n.current&&r.current&&(a.width=window.innerWidth,a.height=window.innerHeight,tu(n.current,r.current,o.current,l.current,{width:a.width,height:a.height},!1))};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]),ke.jsx("canvas",{ref:e,style:{display:"block",background:"#2c5234"}})),EP=(e,n,r)=>{let o;const l=sw(e,r);if(l)if(n.isAdult&&l.type==="berryBush"&&l.food.length>0)o={action:Te.AutopilotGather,targetEntityId:l.id};else if(n.isAdult&&l.type==="corpse"&&l.food.length>0)o={action:Te.AutopilotGather,targetEntityId:l.id};else if(l.type==="human"){const a=l;n.isAdult&&Fo(n,a,r)?o={action:Te.AutopilotAttack,targetEntityId:a.id}:Mr(n,a,r)?o={action:Te.AutopilotProcreate,targetEntityId:a.id}:n.food.length>0&&!a.isAdult&&(a.motherId===n.id||a.fatherId===n.id)&&(o={action:Te.AutopilotFeedChild,targetEntityId:a.id})}else l.type==="prey"?o={action:Te.AutopilotAttack,targetEntityId:l.id}:l.type==="predator"?o={action:Te.AutopilotAttack,targetEntityId:l.id}:l.type==="building"&&(r.selectedBuildingType==="removal"?o={action:Te.Removal,position:l.position}:l.buildingType==="plantingZone"&&n.food.filter(a=>a.type===Xn.Berry).length>=_o&&!On(e,r,Ki)?o={action:Te.AutopilotPlant,position:e}:o={action:Te.AutopilotMove,position:e});else n.food.filter(a=>a.type===Xn.Berry).length>=_o&&(r.autopilotControls.isManuallyPlanting||aw(e,n,r))?o={action:Te.AutopilotPlant,position:e}:o={action:Te.AutopilotMove,position:e};return o},_P=(e,n)=>{if(e.isPaused)return;const r=At(e);if(!r)return;if(e.selectedBuildingType&&e.selectedBuildingType!=="removal"){Mv(n,e.selectedBuildingType,r.leaderId,e)&&(n_(n,e.selectedBuildingType,r.leaderId,e),e.selectedBuildingType=null);return}if(e.selectedBuildingType==="removal"){const l=r_(n,e);l&&i_(l.id,e);return}const o=e.autopilotControls.hoveredAutopilotAction;e.autopilotControls.activeAutopilotAction=void 0,o?(e.autopilotControls.activeAutopilotAction=o,(o.action===Te.AutopilotMove||o.action===Te.AutopilotGather)&&(e.hasPlayerMovedEver=!0),o.action===Te.AutopilotPlant&&(e.hasPlayerPlantedBush=!0)):e.autopilotControls.activeAutopilotAction={action:Te.AutopilotMove,position:n},e.autopilotControls.isManuallyMoving=!1,e.autopilotControls.isManuallyPlanting=!1},CP=(e,n)=>{var u,d,h,g;const r=e.key.toLowerCase(),o=e.ctrlKey||e.metaKey;let l=!0,a=n;if(o){switch(r){case"s":yf(n);break;default:l=!1;break}return{newState:a,handled:l}}switch(r){case"escape":const{autopilotControls:m}=n;m.activeAutopilotAction||m.isManuallyMoving||m.isManuallyPlanting||n.buildMenuOpen||n.selectedBuildingType?(m.activeAutopilotAction=void 0,m.isManuallyMoving=!1,m.isManuallyPlanting=!1,n.buildMenuOpen=!1,n.selectedBuildingType=null):a.exitConfirmation==="pending"?(a.exitConfirmation="inactive",a.isPaused=!1):(a.exitConfirmation="pending",a.isPaused=!0);break;case"m":n.isMuted=!n.isMuted,Hs(n.masterVolume,n.isMuted);break;case"=":case"+":const y=Math.min(1,n.masterVolume+.1);n.masterVolume=parseFloat(y.toFixed(1)),Hs(n.masterVolume,n.isMuted);break;case"-":const S=Math.max(0,n.masterVolume-.1);n.masterVolume=parseFloat(S.toFixed(1)),Hs(n.masterVolume,n.isMuted);break;case"t":a=gu(n,Pv);break;case" ":case"p":n.isPaused=!n.isPaused;break;case"":case"`":a.debugPanel===_t.General?(a.debugPanel=_t.None,a.debugCharacterId=void 0):(a.debugPanel=_t.General,a.debugCharacterId||(a.debugCharacterId=((u=At(a))==null?void 0:u.id)??((d=Object.values(a.entities.entities).find(I=>I.type==="human"||I.type==="prey"||I.type==="predator"))==null?void 0:d.id)));break;case"!":if(e.shiftKey){if(a.debugPanel===_t.Ecosystem){a.debugPanel=_t.None;break}a.debugPanel=_t.Ecosystem,a.debugCharacterId||(a.debugCharacterId=((h=At(a))==null?void 0:h.id)??((g=Object.values(a.entities.entities).find(I=>I.type==="human"||I.type==="prey"||I.type==="predator"))==null?void 0:g.id))}else l=!1;break;case"@":if(e.shiftKey){if(a.debugPanel===_t.Performance){a.debugPanel=_t.None;break}a.debugPanel=_t.Performance}else l=!1;break;case"tab":a.debugPanel=_t.General;const w=Object.values(a.entities.entities).filter(I=>I.type==="human"||I.type==="prey"||I.type==="predator");if(w.length>0){const I=w.sort((B,O)=>{if(B.type==="human"&&B.isPlayer)return-1;if(O.type==="human"&&O.isPlayer)return 1;if(B.type!==O.type){const H={human:0,prey:1,predator:2},x=H[B.type]??999,U=H[O.type]??999;return x-U}return B.id-O.id}),A=a.debugCharacterId,F=((A?I.findIndex(B=>B.id===A):-1)+1)%I.length;a.debugCharacterId=I[F].id}else a.debugCharacterId=void 0;break;default:l=!1;break}return{newState:a,handled:l}},RP=(e,n,r,o,l)=>{const a={gameState:r};if(n&&["e","b","r","h"].includes(e)&&r.hasPlayerEnabledAutopilot++,r.buildMenuOpen){if(e==="1"){r.selectedBuildingType="storageSpot",Ne(a,ve.ButtonClick,o.position);return}else if(e==="2"){r.selectedBuildingType="plantingZone",Ne(a,ve.ButtonClick,o.position);return}else if(e==="3"){r.selectedBuildingType="removal",Ne(a,ve.ButtonClick,o.position);return}}if(e==="escape"&&r.selectedBuildingType){r.selectedBuildingType=null;return}if(e==="e"){if(n){r.autopilotControls.behaviors.gathering=!r.autopilotControls.behaviors.gathering;return}const u=Fe(o,r,"berryBush",Tt,g=>g.food.length>0&&o.food.length<o.maxFood),d=Fe(o,r,"corpse",Tt,g=>g.food.length>0&&o.food.length<o.maxFood);let h=null;u&&d?h=K(o.position,u.position,r.mapDimensions.width,r.mapDimensions.height)<=K(o.position,d.position,r.mapDimensions.width,r.mapDimensions.height)?u:d:h=u||d,h&&(o.activeAction="gathering",Ne(a,ve.Gather,o.position))}else if(e==="r"){if(n){r.autopilotControls.behaviors.procreation=!r.autopilotControls.behaviors.procreation;return}Fe(o,r,"human",Tt,d=>Mr(o,d,r))&&(o.activeAction="procreating",Ne(a,ve.Procreate,o.position))}else if(e==="f")o.food.length>0&&(o.activeAction="eating",Ne(a,ve.Eat,o.position));else if(e==="h"){if(n){r.autopilotControls.behaviors.feedChildren=!r.autopilotControls.behaviors.feedChildren;return}const u=l.find(d=>d.type===Te.FeedChild);u&&u.targetEntity&&(o.activeAction="feeding",o.target=u.targetEntity.id)}else if(e==="arrowup"||e==="w")o.direction.y=-1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowdown"||e==="s")o.direction.y=1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowleft"||e==="a")o.direction.x=-1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowright"||e==="d")o.direction.x=1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="q"){if(n){r.autopilotControls.behaviors.attack=!r.autopilotControls.behaviors.attack;return}const u=Fe(o,r,"human",Vn,d=>Fo(o,d,r))??Fe(o,r,"predator",Vn)??Fe(o,r,"prey",Vn);u&&(o.activeAction="attacking",o.attackTargetId=u.id)}else if(e==="b"){if(n){r.autopilotControls.behaviors.planting=!r.autopilotControls.behaviors.planting;return}if(l.find(d=>d.type===Te.Plant)){const d=av(o.position,r,50,nf);d&&(o.activeAction="planting",o.target=d,r.hasPlayerPlantedBush=!0)}}else e==="v"?(o.isCallingToAttack=!0,o.callToAttackEndTime=r.time+Po,Oe(r,le.CallToAttack,o.position,Po),Ne(a,ve.CallToAttack,o.position)):e==="c"?(o.isCallingToFollow=!0,o.callToFollowEndTime=r.time+Ks,Oe(r,le.CallToFollow,o.position,Ks),Ne(a,ve.CallToFollow,o.position)):e==="k"?Yf(o,r):e==="l"&&(r.buildMenuOpen=!r.buildMenuOpen,Ne(a,ve.ButtonClick,o.position))},PP=(e,n,r,o)=>{e==="arrowup"||e==="w"||e==="arrowdown"||e==="s"?n.direction.y=0:(e==="arrowleft"||e==="a"||e==="arrowright"||e==="d")&&(n.direction.x=0),!o.current.has("arrowup")&&!o.current.has("arrowdown")&&!o.current.has("arrowleft")&&!o.current.has("arrowright")&&!o.current.has("w")&&!o.current.has("a")&&!o.current.has("s")&&!o.current.has("d")&&(n.activeAction==="moving"&&(n.activeAction="idle"),r.autopilotControls.isManuallyMoving=!1),!o.current.has("e")&&n.activeAction==="gathering"&&(n.activeAction="idle"),!o.current.has("f")&&n.activeAction==="eating"&&(n.activeAction="idle"),!o.current.has("r")&&n.activeAction==="procreating"&&(n.activeAction="idle"),!o.current.has("h")&&n.activeAction==="feeding"&&(n.activeAction="idle")},NP=(e,n,r)=>{let l=At(e);if(e.debugCharacterId){const a=e.entities.entities[e.debugCharacterId];a&&"position"in a&&(l=a)}if(l){const{mapDimensions:a}=e,{width:u,height:d}=a;let h={...l.position};const g=h.x-n.x;Math.abs(g)>u/2&&(g>0?h.x-=u:h.x+=u);const m=h.y-n.y;Math.abs(m)>d/2&&(m>0?h.y-=d:h.y+=d);let y=kf(n,h,Cf*r);return y={x:(y.x%u+u)%u,y:(y.y%d+d)%d},y}return e.viewportCenter};function OP(e,n){const{width:r,height:o}=e.mapDimensions;e.viewportCenter={x:(n.x%r+r)%r,y:(n.y%o+o)%o}}const DP=(e,n,r,o)=>{const l={gameState:r},a=At(r);a&&Ne(l,ve.ButtonClick,a.position);const u=r.uiButtons.find(h=>h.id===e.id);u&&(u.lastActivated=Date.now()),n&&[fe.CommandGather,fe.CommandPlant,fe.ToggleProcreationBehavior].includes(e.action)&&r.hasPlayerEnabledAutopilot++;const{behaviors:d}=r.autopilotControls;switch(e.action){case fe.ReturnToIntro:r.exitConfirmation="pending",r.isPaused=!0;break;case fe.ConfirmExitYes:o(),r.exitConfirmation="inactive";break;case fe.ConfirmExitNo:r.exitConfirmation="inactive",r.isPaused=!1;break;case fe.ToggleMute:r.isMuted=!r.isMuted,Hs(r.masterVolume,r.isMuted);break;case fe.TogglePause:r.isPaused=!r.isPaused;break;case fe.FastForward:return gu(r,Pv);case fe.DismissTutorial:r.tutorialState.isActive=!1;break;case fe.CommandEat:a&&a.food.length>0&&(a.activeAction="eating");break;case fe.CommandGather:n?d.gathering=!d.gathering:a&&(a.activeAction="gathering");break;case fe.CommandPlant:n?d.planting=!d.planting:a&&(r.autopilotControls.isManuallyPlanting=!0);break;case fe.ToggleProcreationBehavior:d.procreation=!d.procreation;break;case fe.ToggleAttackBehavior:d.attack=!d.attack;break;case fe.ToggleFeedChildBehavior:d.feedChildren=!d.feedChildren;break;case fe.ToggleAutopilotFollowLeaderBehavior:d.followLeader=!d.followLeader;break;case fe.CommandCallToAttack:a&&a.leaderId===a.id&&(a.isCallingToAttack=!0,a.callToAttackEndTime=r.time+Po,Oe(r,le.CallToAttack,a.position,Po),Ne(l,ve.CallToAttack,a.position));break;case fe.CommandFollowMe:n?d.followLeader=!d.followLeader:a&&a.leaderId===a.id&&(a.isCallingToFollow=!0,a.callToFollowEndTime=r.time+Ks,Oe(r,le.CallToFollow,a.position,Ks),Ne(l,ve.CallToFollow,a.position));break;case fe.CommandTribeSplit:a&&Yf(a,r);break;case fe.CommandBuild:r.buildMenuOpen=!r.buildMenuOpen;break;case fe.SelectStorageSpot:r.selectedBuildingType="storageSpot";break;case fe.SelectPlantingZone:r.selectedBuildingType="plantingZone";break;case fe.SelectRemovalTool:r.selectedBuildingType="removal";break;case fe.ToggleDiplomacy:if(a&&a.leaderId&&e.targetTribeId){const h=a.leaderId,g=e.targetTribeId,m=r.entities.entities[g],y=a.diplomacy,S=m==null?void 0:m.diplomacy;if(y&&S){const I=(y[g]||xt.Friendly)===xt.Friendly?xt.Hostile:xt.Friendly;y[g]=I,S[h]=I}}break}return r};function MP(e,n,r){if(!e.notificationButtonRects)return!1;const o=At(e);for(const[l,a]of Object.entries(e.notificationButtonRects.dismiss))if(n>=a.x&&n<=a.x+a.width&&r>=a.y&&r<=a.y+a.height)return bE(e,l),o&&Ne({gameState:e},ve.ButtonClick,o.position),!0;for(const[l,a]of Object.entries(e.notificationButtonRects.view))if(n>=a.x&&n<=a.x+a.width&&r>=a.y&&r<=a.y+a.height){const u=e.notifications.find(d=>d.id===l);if(u){let d=u.targetPosition;if(!d&&u.targetEntityIds&&u.targetEntityIds.length>0){const h=e.entities.entities[u.targetEntityIds[0]];h&&(d=h.position)}return d&&OP(e,d),o&&Ne({gameState:e},ve.ButtonClick,o.position),u.highlightedEntityIds&&(u.renderHighlights=!u.renderHighlights),!0}}return!1}const kP=({isActive:e,gameStateRef:n,canvasRef:r,viewportCenterRef:o,playerActionHintsRef:l,keysPressed:a,returnToIntro:u})=>(Ce.useEffect(()=>{const d=h=>{if(!e()||n.current.gameOver||!r.current||!h.target||h.target!==r.current)return;const g=r.current.getBoundingClientRect(),m=h.clientX-g.left,y=h.clientY-g.top;if(MP(n.current,m,y))return;const w=n.current.uiButtons.find(A=>m>=A.rect.x&&m<=A.rect.x+A.rect.width&&y>=A.rect.y&&y<=A.rect.y+A.rect.height);if(w){n.current=DP(w,h.shiftKey,n.current,u);return}const I=hf({x:m,y},o.current,{width:r.current.width,height:r.current.height},n.current.mapDimensions);_P(n.current,I)};return window.addEventListener("mousedown",d),()=>{window.removeEventListener("mousedown",d)}},[e,r,n,o,u]),Ce.useEffect(()=>{const d=h=>{if(!e()||!r.current)return;const g=r.current.getBoundingClientRect(),m=h.clientX-g.left,y=h.clientY-g.top;n.current.mousePosition={x:m,y};let S;if(n.current.notificationButtonRects){for(const[I,A]of Object.entries(n.current.notificationButtonRects.dismiss))if(m>=A.x&&m<=A.x+A.width&&y>=A.y&&y<=A.y+A.height){S=`notification-dismiss-${I}`;break}if(!S){for(const[I,A]of Object.entries(n.current.notificationButtonRects.view))if(m>=A.x&&m<=A.x+A.width&&y>=A.y&&y<=A.y+A.height){S=`notification-view-${I}`;break}}}if(!S)for(let I=n.current.uiButtons.length-1;I>=0;I--){const A=n.current.uiButtons[I];if(m>=A.rect.x&&m<=A.rect.x+A.rect.width&&y>=A.rect.y&&y<=A.rect.y+A.rect.height){S=A.id;break}}if(n.current.hoveredButtonId=S,S){n.current.autopilotControls.hoveredAutopilotAction=void 0;return}const w=At(n.current);if(w){const I=hf({x:m,y},o.current,{width:r.current.width,height:r.current.height},n.current.mapDimensions);n.current.autopilotControls.hoveredAutopilotAction=EP(I,w,n.current)}else n.current.autopilotControls.hoveredAutopilotAction=void 0};return window.addEventListener("mousemove",d),()=>{window.removeEventListener("mousemove",d)}},[e,r,n,o]),Ce.useEffect(()=>{const d=g=>{if(!e()||n.current.gameOver)return;const m=g.key.toLowerCase();(m===" "||m==="p"||m==="tab"||(g.ctrlKey||g.metaKey)&&(m==="s"||m==="a"))&&g.preventDefault();const y=CP(g,n.current);if(n.current=y.newState,y.handled)return;const S=At(n.current);S&&(a.current.add(m),RP(m,g.shiftKey,n.current,S,l.current))},h=g=>{if(!e()||n.current.gameOver)return;const m=g.key.toLowerCase();a.current.delete(m);const y=At(n.current);y&&PP(m,y,n.current,a)};return window.addEventListener("keydown",d),window.addEventListener("keyup",h),()=>{window.removeEventListener("keydown",d),window.removeEventListener("keyup",h)}},[e,n,l,a,u]),null),FP=({gameStateRef:e,ctxRef:n,debugPanelTypeRef:r,viewportCenterRef:o,playerActionHintsRef:l,keysPressed:a,canvasRef:u,setAppState:d,appState:h})=>{const g=Ce.useRef(),{returnToIntro:m}=Do(),[y,S,w]=b0(I=>{var H,x;if(!n.current||!g.current){g.current=I;return}const A=Math.min(I-g.current,1e3)/1e3,{performanceMetrics:_}=e.current;_.currentBucket={renderTime:0,worldUpdateTime:0,aiUpdateTime:0};const F=performance.now();e.current=gu(e.current,A),_.currentBucket.worldUpdateTime=performance.now()-F;const B=At(e.current);B?l.current=jf(e.current,B):l.current=[],o.current=NP(e.current,o.current,A);const O=performance.now();tu(n.current,e.current,o.current,l.current,{width:((H=u.current)==null?void 0:H.width)||800,height:((x=u.current)==null?void 0:x.height)||600},!1),_.currentBucket.renderTime=performance.now()-O,_.history.push({bucketTime:e.current.time,..._.currentBucket}),_.history.length>DA&&_.history.shift(),g.current=I,e.current.gameOver&&h!=="gameOver"&&(zf(ve.GameOver,{masterVolume:e.current.masterVolume,isMuted:e.current.isMuted}),d("gameOver",{generations:e.current.generationCount,cause:e.current.causeOfGameOver||"Unknown"}))});return Ce.useEffect(()=>(S(),y),[S,y]),ke.jsx(kP,{isActive:w,gameStateRef:e,canvasRef:u,viewportCenterRef:o,playerActionHintsRef:l,debugPanelTypeRef:r,keysPressed:a,returnToIntro:m})},c0=()=>{const{savedGameState:e,contextReady:n}=Do(),[r,o]=Ce.useState(null);return Ce.useEffect(()=>{n&&(e?(console.log("Loading saved game state..."),o(e)):(console.log("Initializing new game state..."),o(IP())))},[n,e]),!n||!r?ke.jsx("div",{children:"Loading..."}):ke.jsx(UP,{initialState:r})},UP=({initialState:e})=>{const n=Ce.useRef(null),r=Ce.useRef(null),o=Ce.useRef(e),l=Ce.useRef(new Set),a=Ce.useRef(e.debugPanel),u=Ce.useRef(e.viewportCenter),d=Ce.useRef([]),{appState:h,setAppState:g}=Do();return ke.jsxs(ke.Fragment,{children:[ke.jsx(wP,{canvasRef:n,ctxRef:r,gameStateRef:o,debugPanelTypeRef:a,viewportCenterRef:u,playerActionHintsRef:d}),ke.jsx(FP,{gameStateRef:o,ctxRef:r,debugPanelTypeRef:a,viewportCenterRef:u,playerActionHintsRef:d,keysPressed:l,canvasRef:n,setAppState:g,appState:h})]})},LP=yn.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  background-color: rgba(0, 0, 0, 0.75); // Semi-transparent overlay
  color: #fff;
  padding: 20px;
  z-index: 10; // Ensure it's on top
`,BP=yn.h1`
  font-family: 'Press Start 2P', cursive;
  font-size: 4rem;
  color: #ff4136; // Red for emphasis
  text-shadow: 4px 4px 0px #000;
  margin-bottom: 1.5rem;
`,Ll=yn.p`
  font-family: 'Press Start 2P', cursive;
  font-size: 1.2rem;
  margin: 0.5em 0;
  color: #fff;
  text-shadow: 2px 2px 0px #000;
`,HP=yn.button`
  font-family: 'Press Start 2P', cursive;
  font-size: 1rem;
  padding: 1rem 2rem;
  margin-top: 2em;
  color: #fff;
  background-color: #ff4136; // Red button
  border: 2px solid #fff;
  box-shadow: 4px 4px 0px #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  text-transform: uppercase;

  &:hover {
    background-color: #fff;
    color: #ff4136;
    box-shadow: 4px 4px 0px #ff4136;
  }
`,GP=()=>{const{setAppState:e,gameOverDetails:n}=Do(),r=()=>{e("intro")};return ke.jsxs(LP,{children:[ke.jsx(BP,{children:"Game Over"}),ke.jsx(Ll,{children:"Your tribe's lineage has ended."}),n&&ke.jsxs(ke.Fragment,{children:[ke.jsxs(Ll,{children:["Generations Survived: ",n.generations]}),ke.jsxs(Ll,{children:["Cause of Extinction: ",n.cause]})]}),!n&&ke.jsx(Ll,{children:"Game details are unavailable."}),ke.jsx(HP,{onClick:r,children:"Return to Menu"})]})},bP=EA`
  /* CSS Reset */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    padding: 0;
    font-family: 'Press Start 2P', 'Arial', sans-serif;
    background-color: #121212;
    color: #f0f0f0;
    line-height: 1.6;
  }

  /* Additional global styles */
  h1, h2, h3, h4, h5, h6 {
    margin-top: 0;
  }

  button {
    cursor: pointer;
    font-family: inherit;
  }

  /* Prevent overflow issues */
  html, body {
    height: 100%;
    overflow-x: hidden;
  }

  /* Root element for React app */
  #root {
    height: 100%;
  }
`;function xP(e,n){Ce.useEffect(()=>{const r=()=>{const o=document.location.hash==="#game"?"game":"intro";n(o)};return window.addEventListener("hashchange",r),r(),()=>{window.removeEventListener("hashchange",r)}},[]),Ce.useEffect(()=>{e==="game"?document.location.hash="#game":e==="intro"&&(document.location.hash="")},[e])}const $P=()=>{const{appState:e,setAppState:n}=Do();xP(e,n);const r=()=>{switch(e){case"intro":return ke.jsx(u0,{});case"game":return ke.jsx(c0,{});case"gameOver":return ke.jsxs(ke.Fragment,{children:[ke.jsx(c0,{}),ke.jsx(GP,{})]});default:return ke.jsx(u0,{})}};return ke.jsxs(ke.Fragment,{children:[ke.jsx(bP,{}),r()]})},d0=document.getElementById("root");d0?e_().then(()=>{fT.createRoot(d0).render(ke.jsx(jn.StrictMode,{children:ke.jsx(wT,{initialAppState:document.location.hash==="#game"?"game":"intro",children:ke.jsx($P,{})})}))}):console.error("Failed to find the root element");
