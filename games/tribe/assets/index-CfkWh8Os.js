var VS=Object.defineProperty;var XS=(e,n,r)=>n in e?VS(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var Te=(e,n,r)=>XS(e,typeof n!="symbol"?n+"":n,r);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function wm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Dc={exports:{}},Yo={},kc={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qg;function KS(){if(qg)return De;qg=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),S=Symbol.iterator;function A(_){return _===null||typeof _!="object"?null:(_=S&&_[S]||_["@@iterator"],typeof _=="function"?_:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,I={};function R(_,O,j){this.props=_,this.context=O,this.refs=I,this.updater=j||E}R.prototype.isReactComponent={},R.prototype.setState=function(_,O){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,O,"setState")},R.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function F(){}F.prototype=R.prototype;function B(_,O,j){this.props=_,this.context=O,this.refs=I,this.updater=j||E}var H=B.prototype=new F;H.constructor=B,P(H,R.prototype),H.isPureReactComponent=!0;var $=Array.isArray,oe=Object.prototype.hasOwnProperty,M={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function fe(_,O,j){var J,he={},ie=null,Se=null;if(O!=null)for(J in O.ref!==void 0&&(Se=O.ref),O.key!==void 0&&(ie=""+O.key),O)oe.call(O,J)&&!W.hasOwnProperty(J)&&(he[J]=O[J]);var me=arguments.length-2;if(me===1)he.children=j;else if(1<me){for(var X=Array(me),ee=0;ee<me;ee++)X[ee]=arguments[ee+2];he.children=X}if(_&&_.defaultProps)for(J in me=_.defaultProps,me)he[J]===void 0&&(he[J]=me[J]);return{$$typeof:e,type:_,key:ie,ref:Se,props:he,_owner:M.current}}function Ee(_,O){return{$$typeof:e,type:_.type,key:O,ref:_.ref,props:_.props,_owner:_._owner}}function Ce(_){return typeof _=="object"&&_!==null&&_.$$typeof===e}function $e(_){var O={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(j){return O[j]})}var Fe=/\/+/g;function we(_,O){return typeof _=="object"&&_!==null&&_.key!=null?$e(""+_.key):O.toString(36)}function ue(_,O,j,J,he){var ie=typeof _;(ie==="undefined"||ie==="boolean")&&(_=null);var Se=!1;if(_===null)Se=!0;else switch(ie){case"string":case"number":Se=!0;break;case"object":switch(_.$$typeof){case e:case n:Se=!0}}if(Se)return Se=_,he=he(Se),_=J===""?"."+we(Se,0):J,$(he)?(j="",_!=null&&(j=_.replace(Fe,"$&/")+"/"),ue(he,O,j,"",function(ee){return ee})):he!=null&&(Ce(he)&&(he=Ee(he,j+(!he.key||Se&&Se.key===he.key?"":(""+he.key).replace(Fe,"$&/")+"/")+_)),O.push(he)),1;if(Se=0,J=J===""?".":J+":",$(_))for(var me=0;me<_.length;me++){ie=_[me];var X=J+we(ie,me);Se+=ue(ie,O,j,X,he)}else if(X=A(_),typeof X=="function")for(_=X.call(_),me=0;!(ie=_.next()).done;)ie=ie.value,X=J+we(ie,me++),Se+=ue(ie,O,j,X,he);else if(ie==="object")throw O=String(_),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return Se}function Oe(_,O,j){if(_==null)return _;var J=[],he=0;return ue(_,J,"","",function(ie){return O.call(j,ie,he++)}),J}function ve(_){if(_._status===-1){var O=_._result;O=O(),O.then(function(j){(_._status===0||_._status===-1)&&(_._status=1,_._result=j)},function(j){(_._status===0||_._status===-1)&&(_._status=2,_._result=j)}),_._status===-1&&(_._status=0,_._result=O)}if(_._status===1)return _._result.default;throw _._result}var q={current:null},x={transition:null},Y={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:x,ReactCurrentOwner:M};function b(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:Oe,forEach:function(_,O,j){Oe(_,function(){O.apply(this,arguments)},j)},count:function(_){var O=0;return Oe(_,function(){O++}),O},toArray:function(_){return Oe(_,function(O){return O})||[]},only:function(_){if(!Ce(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},De.Component=R,De.Fragment=r,De.Profiler=a,De.PureComponent=B,De.StrictMode=o,De.Suspense=g,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,De.act=b,De.cloneElement=function(_,O,j){if(_==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_+".");var J=P({},_.props),he=_.key,ie=_.ref,Se=_._owner;if(O!=null){if(O.ref!==void 0&&(ie=O.ref,Se=M.current),O.key!==void 0&&(he=""+O.key),_.type&&_.type.defaultProps)var me=_.type.defaultProps;for(X in O)oe.call(O,X)&&!W.hasOwnProperty(X)&&(J[X]=O[X]===void 0&&me!==void 0?me[X]:O[X])}var X=arguments.length-2;if(X===1)J.children=j;else if(1<X){me=Array(X);for(var ee=0;ee<X;ee++)me[ee]=arguments[ee+2];J.children=me}return{$$typeof:e,type:_.type,key:he,ref:ie,props:J,_owner:Se}},De.createContext=function(_){return _={$$typeof:c,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_.Provider={$$typeof:l,_context:_},_.Consumer=_},De.createElement=fe,De.createFactory=function(_){var O=fe.bind(null,_);return O.type=_,O},De.createRef=function(){return{current:null}},De.forwardRef=function(_){return{$$typeof:f,render:_}},De.isValidElement=Ce,De.lazy=function(_){return{$$typeof:m,_payload:{_status:-1,_result:_},_init:ve}},De.memo=function(_,O){return{$$typeof:p,type:_,compare:O===void 0?null:O}},De.startTransition=function(_){var O=x.transition;x.transition={};try{_()}finally{x.transition=O}},De.unstable_act=b,De.useCallback=function(_,O){return q.current.useCallback(_,O)},De.useContext=function(_){return q.current.useContext(_)},De.useDebugValue=function(){},De.useDeferredValue=function(_){return q.current.useDeferredValue(_)},De.useEffect=function(_,O){return q.current.useEffect(_,O)},De.useId=function(){return q.current.useId()},De.useImperativeHandle=function(_,O,j){return q.current.useImperativeHandle(_,O,j)},De.useInsertionEffect=function(_,O){return q.current.useInsertionEffect(_,O)},De.useLayoutEffect=function(_,O){return q.current.useLayoutEffect(_,O)},De.useMemo=function(_,O){return q.current.useMemo(_,O)},De.useReducer=function(_,O,j){return q.current.useReducer(_,O,j)},De.useRef=function(_){return q.current.useRef(_)},De.useState=function(_){return q.current.useState(_)},De.useSyncExternalStore=function(_,O,j){return q.current.useSyncExternalStore(_,O,j)},De.useTransition=function(){return q.current.useTransition()},De.version="18.3.1",De}var Jg;function Pd(){return Jg||(Jg=1,kc.exports=KS()),kc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ep;function QS(){if(ep)return Yo;ep=1;var e=Pd(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,g,p){var m,S={},A=null,E=null;p!==void 0&&(A=""+p),g.key!==void 0&&(A=""+g.key),g.ref!==void 0&&(E=g.ref);for(m in g)o.call(g,m)&&!l.hasOwnProperty(m)&&(S[m]=g[m]);if(f&&f.defaultProps)for(m in g=f.defaultProps,g)S[m]===void 0&&(S[m]=g[m]);return{$$typeof:n,type:f,key:A,ref:E,props:S,_owner:a.current}}return Yo.Fragment=r,Yo.jsx=c,Yo.jsxs=c,Yo}var tp;function ZS(){return tp||(tp=1,Dc.exports=QS()),Dc.exports}var Le=ZS(),Pe=Pd();const Bn=wm(Pe);var Ha={},Oc={exports:{}},zt={},Mc={exports:{}},Fc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var np;function qS(){return np||(np=1,function(e){function n(x,Y){var b=x.length;x.push(Y);e:for(;0<b;){var _=b-1>>>1,O=x[_];if(0<a(O,Y))x[_]=Y,x[b]=O,b=_;else break e}}function r(x){return x.length===0?null:x[0]}function o(x){if(x.length===0)return null;var Y=x[0],b=x.pop();if(b!==Y){x[0]=b;e:for(var _=0,O=x.length,j=O>>>1;_<j;){var J=2*(_+1)-1,he=x[J],ie=J+1,Se=x[ie];if(0>a(he,b))ie<O&&0>a(Se,he)?(x[_]=Se,x[ie]=b,_=ie):(x[_]=he,x[J]=b,_=J);else if(ie<O&&0>a(Se,b))x[_]=Se,x[ie]=b,_=ie;else break e}}return Y}function a(x,Y){var b=x.sortIndex-Y.sortIndex;return b!==0?b:x.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();e.unstable_now=function(){return c.now()-f}}var g=[],p=[],m=1,S=null,A=3,E=!1,P=!1,I=!1,R=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(x){for(var Y=r(p);Y!==null;){if(Y.callback===null)o(p);else if(Y.startTime<=x)o(p),Y.sortIndex=Y.expirationTime,n(g,Y);else break;Y=r(p)}}function $(x){if(I=!1,H(x),!P)if(r(g)!==null)P=!0,ve(oe);else{var Y=r(p);Y!==null&&q($,Y.startTime-x)}}function oe(x,Y){P=!1,I&&(I=!1,F(fe),fe=-1),E=!0;var b=A;try{for(H(Y),S=r(g);S!==null&&(!(S.expirationTime>Y)||x&&!$e());){var _=S.callback;if(typeof _=="function"){S.callback=null,A=S.priorityLevel;var O=_(S.expirationTime<=Y);Y=e.unstable_now(),typeof O=="function"?S.callback=O:S===r(g)&&o(g),H(Y)}else o(g);S=r(g)}if(S!==null)var j=!0;else{var J=r(p);J!==null&&q($,J.startTime-Y),j=!1}return j}finally{S=null,A=b,E=!1}}var M=!1,W=null,fe=-1,Ee=5,Ce=-1;function $e(){return!(e.unstable_now()-Ce<Ee)}function Fe(){if(W!==null){var x=e.unstable_now();Ce=x;var Y=!0;try{Y=W(!0,x)}finally{Y?we():(M=!1,W=null)}}else M=!1}var we;if(typeof B=="function")we=function(){B(Fe)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,Oe=ue.port2;ue.port1.onmessage=Fe,we=function(){Oe.postMessage(null)}}else we=function(){R(Fe,0)};function ve(x){W=x,M||(M=!0,we())}function q(x,Y){fe=R(function(){x(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(x){x.callback=null},e.unstable_continueExecution=function(){P||E||(P=!0,ve(oe))},e.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ee=0<x?Math.floor(1e3/x):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_getFirstCallbackNode=function(){return r(g)},e.unstable_next=function(x){switch(A){case 1:case 2:case 3:var Y=3;break;default:Y=A}var b=A;A=Y;try{return x()}finally{A=b}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(x,Y){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var b=A;A=x;try{return Y()}finally{A=b}},e.unstable_scheduleCallback=function(x,Y,b){var _=e.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?_+b:_):b=_,x){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=b+O,x={id:m++,callback:Y,priorityLevel:x,startTime:b,expirationTime:O,sortIndex:-1},b>_?(x.sortIndex=b,n(p,x),r(g)===null&&x===r(p)&&(I?(F(fe),fe=-1):I=!0,q($,b-_))):(x.sortIndex=O,n(g,x),P||E||(P=!0,ve(oe))),x},e.unstable_shouldYield=$e,e.unstable_wrapCallback=function(x){var Y=A;return function(){var b=A;A=Y;try{return x.apply(this,arguments)}finally{A=b}}}}(Fc)),Fc}var ip;function JS(){return ip||(ip=1,Mc.exports=qS()),Mc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp;function ey(){if(rp)return zt;rp=1;var e=Pd(),n=JS();function r(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(t,i){c(t,i),c(t+"Capture",i)}function c(t,i){for(a[t]=i,t=0;t<i.length;t++)o.add(i[t])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},S={};function A(t){return g.call(S,t)?!0:g.call(m,t)?!1:p.test(t)?S[t]=!0:(m[t]=!0,!1)}function E(t,i,s,u){if(s!==null&&s.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function P(t,i,s,u){if(i===null||typeof i>"u"||E(t,i,s,u))return!0;if(u)return!1;if(s!==null)switch(s.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function I(t,i,s,u,d,h,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=s,this.propertyName=t,this.type=i,this.sanitizeURL=h,this.removeEmptyString=v}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){R[t]=new I(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];R[i]=new I(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){R[t]=new I(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){R[t]=new I(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){R[t]=new I(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){R[t]=new I(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){R[t]=new I(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){R[t]=new I(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){R[t]=new I(t,5,!1,t.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function B(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(F,B);R[i]=new I(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(F,B);R[i]=new I(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(F,B);R[i]=new I(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){R[t]=new I(t,1,!1,t.toLowerCase(),null,!1,!1)}),R.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){R[t]=new I(t,1,!1,t.toLowerCase(),null,!0,!0)});function H(t,i,s,u){var d=R.hasOwnProperty(i)?R[i]:null;(d!==null?d.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(P(i,s,d,u)&&(s=null),u||d===null?A(i)&&(s===null?t.removeAttribute(i):t.setAttribute(i,""+s)):d.mustUseProperty?t[d.propertyName]=s===null?d.type===3?!1:"":s:(i=d.attributeName,u=d.attributeNamespace,s===null?t.removeAttribute(i):(d=d.type,s=d===3||d===4&&s===!0?"":""+s,u?t.setAttributeNS(u,i,s):t.setAttribute(i,s))))}var $=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oe=Symbol.for("react.element"),M=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),fe=Symbol.for("react.strict_mode"),Ee=Symbol.for("react.profiler"),Ce=Symbol.for("react.provider"),$e=Symbol.for("react.context"),Fe=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),Oe=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),x=Symbol.iterator;function Y(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}var b=Object.assign,_;function O(t){if(_===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);_=i&&i[1]||""}return`
`+_+t}var j=!1;function J(t,i){if(!t||j)return"";j=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(k){var u=k}Reflect.construct(t,[],i)}else{try{i.call()}catch(k){u=k}t.call(i.prototype)}else{try{throw Error()}catch(k){u=k}t()}}catch(k){if(k&&u&&typeof k.stack=="string"){for(var d=k.stack.split(`
`),h=u.stack.split(`
`),v=d.length-1,y=h.length-1;1<=v&&0<=y&&d[v]!==h[y];)y--;for(;1<=v&&0<=y;v--,y--)if(d[v]!==h[y]){if(v!==1||y!==1)do if(v--,y--,0>y||d[v]!==h[y]){var w=`
`+d[v].replace(" at new "," at ");return t.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",t.displayName)),w}while(1<=v&&0<=y);break}}}finally{j=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?O(t):""}function he(t){switch(t.tag){case 5:return O(t.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return t=J(t.type,!1),t;case 11:return t=J(t.type.render,!1),t;case 1:return t=J(t.type,!0),t;default:return""}}function ie(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case W:return"Fragment";case M:return"Portal";case Ee:return"Profiler";case fe:return"StrictMode";case we:return"Suspense";case ue:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $e:return(t.displayName||"Context")+".Consumer";case Ce:return(t._context.displayName||"Context")+".Provider";case Fe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Oe:return i=t.displayName||null,i!==null?i:ie(t.type)||"Memo";case ve:i=t._payload,t=t._init;try{return ie(t(i))}catch{}}return null}function Se(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(i);case 8:return i===fe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function me(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function X(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ee(t){var i=X(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),u=""+t[i];if(!t.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,h=s.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){u=""+v,h.call(this,v)}}),Object.defineProperty(t,i,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Re(t){t._valueTracker||(t._valueTracker=ee(t))}function le(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),u="";return t&&(u=X(t)?t.checked?"true":"false":t.value),t=u,t!==s?(i.setValue(t),!0):!1}function En(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ke(t,i){var s=i.checked;return b({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Ye(t,i){var s=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;s=me(i.value!=null?i.value:s),t._wrapperState={initialChecked:u,initialValue:s,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function _n(t,i){i=i.checked,i!=null&&H(t,"checked",i,!1)}function Lt(t,i){_n(t,i);var s=me(i.value),u=i.type;if(s!=null)u==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?Cn(t,i.type,s):i.hasOwnProperty("defaultValue")&&Cn(t,i.type,me(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function en(t,i,s){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,s||i===t.value||(t.value=i),t.defaultValue=i}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Cn(t,i,s){(i!=="number"||En(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Rn=Array.isArray;function ni(t,i,s,u){if(t=t.options,i){i={};for(var d=0;d<s.length;d++)i["$"+s[d]]=!0;for(s=0;s<t.length;s++)d=i.hasOwnProperty("$"+t[s].value),t[s].selected!==d&&(t[s].selected=d),d&&u&&(t[s].defaultSelected=!0)}else{for(s=""+me(s),i=null,d=0;d<t.length;d++){if(t[d].value===s){t[d].selected=!0,u&&(t[d].defaultSelected=!0);return}i!==null||t[d].disabled||(i=t[d])}i!==null&&(i.selected=!0)}}function Li(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return b({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lf(t,i){var s=i.value;if(s==null){if(s=i.children,i=i.defaultValue,s!=null){if(i!=null)throw Error(r(92));if(Rn(s)){if(1<s.length)throw Error(r(93));s=s[0]}i=s}i==null&&(i=""),s=i}t._wrapperState={initialValue:me(s)}}function uf(t,i){var s=me(i.value),u=me(i.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),i.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),u!=null&&(t.defaultValue=""+u)}function cf(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function df(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bl(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?df(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ns,ff=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,s,u,d){MSApp.execUnsafeLocalFunction(function(){return t(i,s,u,d)})}:t}(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(Ns=Ns||document.createElement("div"),Ns.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Ns.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function so(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var ao={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Z0=["Webkit","ms","Moz","O"];Object.keys(ao).forEach(function(t){Z0.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),ao[i]=ao[t]})});function hf(t,i,s){return i==null||typeof i=="boolean"||i===""?"":s||typeof i!="number"||i===0||ao.hasOwnProperty(t)&&ao[t]?(""+i).trim():i+"px"}function gf(t,i){t=t.style;for(var s in i)if(i.hasOwnProperty(s)){var u=s.indexOf("--")===0,d=hf(s,i[s],u);s==="float"&&(s="cssFloat"),u?t.setProperty(s,d):t[s]=d}}var q0=b({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zl(t,i){if(i){if(q0[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function $l(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wl=null;function Yl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jl=null,dr=null,fr=null;function pf(t){if(t=Do(t)){if(typeof jl!="function")throw Error(r(280));var i=t.stateNode;i&&(i=qs(i),jl(t.stateNode,t.type,i))}}function mf(t){dr?fr?fr.push(t):fr=[t]:dr=t}function vf(){if(dr){var t=dr,i=fr;if(fr=dr=null,pf(t),i)for(t=0;t<i.length;t++)pf(i[t])}}function Sf(t,i){return t(i)}function yf(){}var Vl=!1;function Af(t,i,s){if(Vl)return t(i,s);Vl=!0;try{return Sf(t,i,s)}finally{Vl=!1,(dr!==null||fr!==null)&&(yf(),vf())}}function lo(t,i){var s=t.stateNode;if(s===null)return null;var u=qs(s);if(u===null)return null;s=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(r(231,i,typeof s));return s}var Xl=!1;if(f)try{var uo={};Object.defineProperty(uo,"passive",{get:function(){Xl=!0}}),window.addEventListener("test",uo,uo),window.removeEventListener("test",uo,uo)}catch{Xl=!1}function J0(t,i,s,u,d,h,v,y,w){var k=Array.prototype.slice.call(arguments,3);try{i.apply(s,k)}catch(L){this.onError(L)}}var co=!1,Ds=null,ks=!1,Kl=null,ev={onError:function(t){co=!0,Ds=t}};function tv(t,i,s,u,d,h,v,y,w){co=!1,Ds=null,J0.apply(ev,arguments)}function nv(t,i,s,u,d,h,v,y,w){if(tv.apply(this,arguments),co){if(co){var k=Ds;co=!1,Ds=null}else throw Error(r(198));ks||(ks=!0,Kl=k)}}function Hi(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function Tf(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function If(t){if(Hi(t)!==t)throw Error(r(188))}function iv(t){var i=t.alternate;if(!i){if(i=Hi(t),i===null)throw Error(r(188));return i!==t?null:t}for(var s=t,u=i;;){var d=s.return;if(d===null)break;var h=d.alternate;if(h===null){if(u=d.return,u!==null){s=u;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===s)return If(d),t;if(h===u)return If(d),i;h=h.sibling}throw Error(r(188))}if(s.return!==u.return)s=d,u=h;else{for(var v=!1,y=d.child;y;){if(y===s){v=!0,s=d,u=h;break}if(y===u){v=!0,u=d,s=h;break}y=y.sibling}if(!v){for(y=h.child;y;){if(y===s){v=!0,s=h,u=d;break}if(y===u){v=!0,u=h,s=d;break}y=y.sibling}if(!v)throw Error(r(189))}}if(s.alternate!==u)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?t:i}function wf(t){return t=iv(t),t!==null?Ef(t):null}function Ef(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=Ef(t);if(i!==null)return i;t=t.sibling}return null}var _f=n.unstable_scheduleCallback,Cf=n.unstable_cancelCallback,rv=n.unstable_shouldYield,ov=n.unstable_requestPaint,nt=n.unstable_now,sv=n.unstable_getCurrentPriorityLevel,Ql=n.unstable_ImmediatePriority,Rf=n.unstable_UserBlockingPriority,Os=n.unstable_NormalPriority,av=n.unstable_LowPriority,Pf=n.unstable_IdlePriority,Ms=null,Pn=null;function lv(t){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(Ms,t,void 0,(t.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:dv,uv=Math.log,cv=Math.LN2;function dv(t){return t>>>=0,t===0?32:31-(uv(t)/cv|0)|0}var Fs=64,Us=4194304;function fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ls(t,i){var s=t.pendingLanes;if(s===0)return 0;var u=0,d=t.suspendedLanes,h=t.pingedLanes,v=s&268435455;if(v!==0){var y=v&~d;y!==0?u=fo(y):(h&=v,h!==0&&(u=fo(h)))}else v=s&~d,v!==0?u=fo(v):h!==0&&(u=fo(h));if(u===0)return 0;if(i!==0&&i!==u&&(i&d)===0&&(d=u&-u,h=i&-i,d>=h||d===16&&(h&4194240)!==0))return i;if((u&4)!==0&&(u|=s&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=u;0<i;)s=31-dn(i),d=1<<s,u|=t[s],i&=~d;return u}function fv(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hv(t,i){for(var s=t.suspendedLanes,u=t.pingedLanes,d=t.expirationTimes,h=t.pendingLanes;0<h;){var v=31-dn(h),y=1<<v,w=d[v];w===-1?((y&s)===0||(y&u)!==0)&&(d[v]=fv(y,i)):w<=i&&(t.expiredLanes|=y),h&=~y}}function Zl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nf(){var t=Fs;return Fs<<=1,(Fs&4194240)===0&&(Fs=64),t}function ql(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function ho(t,i,s){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-dn(i),t[i]=s}function gv(t,i){var s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<s;){var d=31-dn(s),h=1<<d;i[d]=0,u[d]=-1,t[d]=-1,s&=~h}}function Jl(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var u=31-dn(s),d=1<<u;d&i|t[u]&i&&(t[u]|=i),s&=~d}}var be=0;function Df(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var kf,eu,Of,Mf,Ff,tu=!1,Hs=[],ii=null,ri=null,oi=null,go=new Map,po=new Map,si=[],pv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uf(t,i){switch(t){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":oi=null;break;case"pointerover":case"pointerout":go.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(i.pointerId)}}function mo(t,i,s,u,d,h){return t===null||t.nativeEvent!==h?(t={blockedOn:i,domEventName:s,eventSystemFlags:u,nativeEvent:h,targetContainers:[d]},i!==null&&(i=Do(i),i!==null&&eu(i)),t):(t.eventSystemFlags|=u,i=t.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),t)}function mv(t,i,s,u,d){switch(i){case"focusin":return ii=mo(ii,t,i,s,u,d),!0;case"dragenter":return ri=mo(ri,t,i,s,u,d),!0;case"mouseover":return oi=mo(oi,t,i,s,u,d),!0;case"pointerover":var h=d.pointerId;return go.set(h,mo(go.get(h)||null,t,i,s,u,d)),!0;case"gotpointercapture":return h=d.pointerId,po.set(h,mo(po.get(h)||null,t,i,s,u,d)),!0}return!1}function Lf(t){var i=Bi(t.target);if(i!==null){var s=Hi(i);if(s!==null){if(i=s.tag,i===13){if(i=Tf(s),i!==null){t.blockedOn=i,Ff(t.priority,function(){Of(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bs(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=iu(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var u=new s.constructor(s.type,s);Wl=u,s.target.dispatchEvent(u),Wl=null}else return i=Do(s),i!==null&&eu(i),t.blockedOn=s,!1;i.shift()}return!0}function Hf(t,i,s){Bs(t)&&s.delete(i)}function vv(){tu=!1,ii!==null&&Bs(ii)&&(ii=null),ri!==null&&Bs(ri)&&(ri=null),oi!==null&&Bs(oi)&&(oi=null),go.forEach(Hf),po.forEach(Hf)}function vo(t,i){t.blockedOn===i&&(t.blockedOn=null,tu||(tu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,vv)))}function So(t){function i(d){return vo(d,t)}if(0<Hs.length){vo(Hs[0],t);for(var s=1;s<Hs.length;s++){var u=Hs[s];u.blockedOn===t&&(u.blockedOn=null)}}for(ii!==null&&vo(ii,t),ri!==null&&vo(ri,t),oi!==null&&vo(oi,t),go.forEach(i),po.forEach(i),s=0;s<si.length;s++)u=si[s],u.blockedOn===t&&(u.blockedOn=null);for(;0<si.length&&(s=si[0],s.blockedOn===null);)Lf(s),s.blockedOn===null&&si.shift()}var hr=$.ReactCurrentBatchConfig,Gs=!0;function Sv(t,i,s,u){var d=be,h=hr.transition;hr.transition=null;try{be=1,nu(t,i,s,u)}finally{be=d,hr.transition=h}}function yv(t,i,s,u){var d=be,h=hr.transition;hr.transition=null;try{be=4,nu(t,i,s,u)}finally{be=d,hr.transition=h}}function nu(t,i,s,u){if(Gs){var d=iu(t,i,s,u);if(d===null)Au(t,i,u,xs,s),Uf(t,u);else if(mv(d,t,i,s,u))u.stopPropagation();else if(Uf(t,u),i&4&&-1<pv.indexOf(t)){for(;d!==null;){var h=Do(d);if(h!==null&&kf(h),h=iu(t,i,s,u),h===null&&Au(t,i,u,xs,s),h===d)break;d=h}d!==null&&u.stopPropagation()}else Au(t,i,u,null,s)}}var xs=null;function iu(t,i,s,u){if(xs=null,t=Yl(u),t=Bi(t),t!==null)if(i=Hi(t),i===null)t=null;else if(s=i.tag,s===13){if(t=Tf(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return xs=t,null}function Bf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sv()){case Ql:return 1;case Rf:return 4;case Os:case av:return 16;case Pf:return 536870912;default:return 16}default:return 16}}var ai=null,ru=null,bs=null;function Gf(){if(bs)return bs;var t,i=ru,s=i.length,u,d="value"in ai?ai.value:ai.textContent,h=d.length;for(t=0;t<s&&i[t]===d[t];t++);var v=s-t;for(u=1;u<=v&&i[s-u]===d[h-u];u++);return bs=d.slice(t,1<u?1-u:void 0)}function zs(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function $s(){return!0}function xf(){return!1}function Vt(t){function i(s,u,d,h,v){this._reactName=s,this._targetInst=d,this.type=u,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var y in t)t.hasOwnProperty(y)&&(s=t[y],this[y]=s?s(h):h[y]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?$s:xf,this.isPropagationStopped=xf,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=$s)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=$s)},persist:function(){},isPersistent:$s}),i}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ou=Vt(gr),yo=b({},gr,{view:0,detail:0}),Av=Vt(yo),su,au,Ao,Ws=b({},yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ao&&(Ao&&t.type==="mousemove"?(su=t.screenX-Ao.screenX,au=t.screenY-Ao.screenY):au=su=0,Ao=t),su)},movementY:function(t){return"movementY"in t?t.movementY:au}}),bf=Vt(Ws),Tv=b({},Ws,{dataTransfer:0}),Iv=Vt(Tv),wv=b({},yo,{relatedTarget:0}),lu=Vt(wv),Ev=b({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),_v=Vt(Ev),Cv=b({},gr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Rv=Vt(Cv),Pv=b({},gr,{data:0}),zf=Vt(Pv),Nv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ov(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=kv[t])?!!i[t]:!1}function uu(){return Ov}var Mv=b({},yo,{key:function(t){if(t.key){var i=Nv[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=zs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Dv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uu,charCode:function(t){return t.type==="keypress"?zs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fv=Vt(Mv),Uv=b({},Ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$f=Vt(Uv),Lv=b({},yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uu}),Hv=Vt(Lv),Bv=b({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gv=Vt(Bv),xv=b({},Ws,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bv=Vt(xv),zv=[9,13,27,32],cu=f&&"CompositionEvent"in window,To=null;f&&"documentMode"in document&&(To=document.documentMode);var $v=f&&"TextEvent"in window&&!To,Wf=f&&(!cu||To&&8<To&&11>=To),Yf=" ",jf=!1;function Vf(t,i){switch(t){case"keyup":return zv.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pr=!1;function Wv(t,i){switch(t){case"compositionend":return Xf(i);case"keypress":return i.which!==32?null:(jf=!0,Yf);case"textInput":return t=i.data,t===Yf&&jf?null:t;default:return null}}function Yv(t,i){if(pr)return t==="compositionend"||!cu&&Vf(t,i)?(t=Gf(),bs=ru=ai=null,pr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Wf&&i.locale!=="ko"?null:i.data;default:return null}}var jv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!jv[t.type]:i==="textarea"}function Qf(t,i,s,u){mf(u),i=Ks(i,"onChange"),0<i.length&&(s=new ou("onChange","change",null,s,u),t.push({event:s,listeners:i}))}var Io=null,wo=null;function Vv(t){gh(t,0)}function Ys(t){var i=Ar(t);if(le(i))return t}function Xv(t,i){if(t==="change")return i}var Zf=!1;if(f){var du;if(f){var fu="oninput"in document;if(!fu){var qf=document.createElement("div");qf.setAttribute("oninput","return;"),fu=typeof qf.oninput=="function"}du=fu}else du=!1;Zf=du&&(!document.documentMode||9<document.documentMode)}function Jf(){Io&&(Io.detachEvent("onpropertychange",eh),wo=Io=null)}function eh(t){if(t.propertyName==="value"&&Ys(wo)){var i=[];Qf(i,wo,t,Yl(t)),Af(Vv,i)}}function Kv(t,i,s){t==="focusin"?(Jf(),Io=i,wo=s,Io.attachEvent("onpropertychange",eh)):t==="focusout"&&Jf()}function Qv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ys(wo)}function Zv(t,i){if(t==="click")return Ys(i)}function qv(t,i){if(t==="input"||t==="change")return Ys(i)}function Jv(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var fn=typeof Object.is=="function"?Object.is:Jv;function Eo(t,i){if(fn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),u=Object.keys(i);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var d=s[u];if(!g.call(i,d)||!fn(t[d],i[d]))return!1}return!0}function th(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nh(t,i){var s=th(t);t=0;for(var u;s;){if(s.nodeType===3){if(u=t+s.textContent.length,t<=i&&u>=i)return{node:s,offset:i-t};t=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=th(s)}}function ih(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?ih(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function rh(){for(var t=window,i=En();i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=En(t.document)}return i}function hu(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function eS(t){var i=rh(),s=t.focusedElem,u=t.selectionRange;if(i!==s&&s&&s.ownerDocument&&ih(s.ownerDocument.documentElement,s)){if(u!==null&&hu(s)){if(i=u.start,t=u.end,t===void 0&&(t=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(t,s.value.length);else if(t=(i=s.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var d=s.textContent.length,h=Math.min(u.start,d);u=u.end===void 0?h:Math.min(u.end,d),!t.extend&&h>u&&(d=u,u=h,h=d),d=nh(s,h);var v=nh(s,u);d&&v&&(t.rangeCount!==1||t.anchorNode!==d.node||t.anchorOffset!==d.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),t.removeAllRanges(),h>u?(t.addRange(i),t.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),t.addRange(i)))}}for(i=[],t=s;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)t=i[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tS=f&&"documentMode"in document&&11>=document.documentMode,mr=null,gu=null,_o=null,pu=!1;function oh(t,i,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;pu||mr==null||mr!==En(u)||(u=mr,"selectionStart"in u&&hu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),_o&&Eo(_o,u)||(_o=u,u=Ks(gu,"onSelect"),0<u.length&&(i=new ou("onSelect","select",null,i,s),t.push({event:i,listeners:u}),i.target=mr)))}function js(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var vr={animationend:js("Animation","AnimationEnd"),animationiteration:js("Animation","AnimationIteration"),animationstart:js("Animation","AnimationStart"),transitionend:js("Transition","TransitionEnd")},mu={},sh={};f&&(sh=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function Vs(t){if(mu[t])return mu[t];if(!vr[t])return t;var i=vr[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in sh)return mu[t]=i[s];return t}var ah=Vs("animationend"),lh=Vs("animationiteration"),uh=Vs("animationstart"),ch=Vs("transitionend"),dh=new Map,fh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function li(t,i){dh.set(t,i),l(i,[t])}for(var vu=0;vu<fh.length;vu++){var Su=fh[vu],nS=Su.toLowerCase(),iS=Su[0].toUpperCase()+Su.slice(1);li(nS,"on"+iS)}li(ah,"onAnimationEnd"),li(lh,"onAnimationIteration"),li(uh,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(ch,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Co));function hh(t,i,s){var u=t.type||"unknown-event";t.currentTarget=s,nv(u,i,void 0,t),t.currentTarget=null}function gh(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var u=t[s],d=u.event;u=u.listeners;e:{var h=void 0;if(i)for(var v=u.length-1;0<=v;v--){var y=u[v],w=y.instance,k=y.currentTarget;if(y=y.listener,w!==h&&d.isPropagationStopped())break e;hh(d,y,k),h=w}else for(v=0;v<u.length;v++){if(y=u[v],w=y.instance,k=y.currentTarget,y=y.listener,w!==h&&d.isPropagationStopped())break e;hh(d,y,k),h=w}}}if(ks)throw t=Kl,ks=!1,Kl=null,t}function je(t,i){var s=i[Cu];s===void 0&&(s=i[Cu]=new Set);var u=t+"__bubble";s.has(u)||(ph(i,t,2,!1),s.add(u))}function yu(t,i,s){var u=0;i&&(u|=4),ph(s,t,u,i)}var Xs="_reactListening"+Math.random().toString(36).slice(2);function Ro(t){if(!t[Xs]){t[Xs]=!0,o.forEach(function(s){s!=="selectionchange"&&(rS.has(s)||yu(s,!1,t),yu(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Xs]||(i[Xs]=!0,yu("selectionchange",!1,i))}}function ph(t,i,s,u){switch(Bf(i)){case 1:var d=Sv;break;case 4:d=yv;break;default:d=nu}s=d.bind(null,i,s,t),d=void 0,!Xl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),u?d!==void 0?t.addEventListener(i,s,{capture:!0,passive:d}):t.addEventListener(i,s,!0):d!==void 0?t.addEventListener(i,s,{passive:d}):t.addEventListener(i,s,!1)}function Au(t,i,s,u,d){var h=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var y=u.stateNode.containerInfo;if(y===d||y.nodeType===8&&y.parentNode===d)break;if(v===4)for(v=u.return;v!==null;){var w=v.tag;if((w===3||w===4)&&(w=v.stateNode.containerInfo,w===d||w.nodeType===8&&w.parentNode===d))return;v=v.return}for(;y!==null;){if(v=Bi(y),v===null)return;if(w=v.tag,w===5||w===6){u=h=v;continue e}y=y.parentNode}}u=u.return}Af(function(){var k=h,L=Yl(s),G=[];e:{var U=dh.get(t);if(U!==void 0){var K=ou,Z=t;switch(t){case"keypress":if(zs(s)===0)break e;case"keydown":case"keyup":K=Fv;break;case"focusin":Z="focus",K=lu;break;case"focusout":Z="blur",K=lu;break;case"beforeblur":case"afterblur":K=lu;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=bf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Iv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Hv;break;case ah:case lh:case uh:K=_v;break;case ch:K=Gv;break;case"scroll":K=Av;break;case"wheel":K=bv;break;case"copy":case"cut":case"paste":K=Rv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=$f}var te=(i&4)!==0,it=!te&&t==="scroll",N=te?U!==null?U+"Capture":null:U;te=[];for(var C=k,D;C!==null;){D=C;var z=D.stateNode;if(D.tag===5&&z!==null&&(D=z,N!==null&&(z=lo(C,N),z!=null&&te.push(Po(C,z,D)))),it)break;C=C.return}0<te.length&&(U=new K(U,Z,null,s,L),G.push({event:U,listeners:te}))}}if((i&7)===0){e:{if(U=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",U&&s!==Wl&&(Z=s.relatedTarget||s.fromElement)&&(Bi(Z)||Z[zn]))break e;if((K||U)&&(U=L.window===L?L:(U=L.ownerDocument)?U.defaultView||U.parentWindow:window,K?(Z=s.relatedTarget||s.toElement,K=k,Z=Z?Bi(Z):null,Z!==null&&(it=Hi(Z),Z!==it||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(K=null,Z=k),K!==Z)){if(te=bf,z="onMouseLeave",N="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(te=$f,z="onPointerLeave",N="onPointerEnter",C="pointer"),it=K==null?U:Ar(K),D=Z==null?U:Ar(Z),U=new te(z,C+"leave",K,s,L),U.target=it,U.relatedTarget=D,z=null,Bi(L)===k&&(te=new te(N,C+"enter",Z,s,L),te.target=D,te.relatedTarget=it,z=te),it=z,K&&Z)t:{for(te=K,N=Z,C=0,D=te;D;D=Sr(D))C++;for(D=0,z=N;z;z=Sr(z))D++;for(;0<C-D;)te=Sr(te),C--;for(;0<D-C;)N=Sr(N),D--;for(;C--;){if(te===N||N!==null&&te===N.alternate)break t;te=Sr(te),N=Sr(N)}te=null}else te=null;K!==null&&mh(G,U,K,te,!1),Z!==null&&it!==null&&mh(G,it,Z,te,!0)}}e:{if(U=k?Ar(k):window,K=U.nodeName&&U.nodeName.toLowerCase(),K==="select"||K==="input"&&U.type==="file")var re=Xv;else if(Kf(U))if(Zf)re=qv;else{re=Qv;var ce=Kv}else(K=U.nodeName)&&K.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(re=Zv);if(re&&(re=re(t,k))){Qf(G,re,s,L);break e}ce&&ce(t,U,k),t==="focusout"&&(ce=U._wrapperState)&&ce.controlled&&U.type==="number"&&Cn(U,"number",U.value)}switch(ce=k?Ar(k):window,t){case"focusin":(Kf(ce)||ce.contentEditable==="true")&&(mr=ce,gu=k,_o=null);break;case"focusout":_o=gu=mr=null;break;case"mousedown":pu=!0;break;case"contextmenu":case"mouseup":case"dragend":pu=!1,oh(G,s,L);break;case"selectionchange":if(tS)break;case"keydown":case"keyup":oh(G,s,L)}var de;if(cu)e:{switch(t){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else pr?Vf(t,s)&&(ye="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(ye="onCompositionStart");ye&&(Wf&&s.locale!=="ko"&&(pr||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&pr&&(de=Gf()):(ai=L,ru="value"in ai?ai.value:ai.textContent,pr=!0)),ce=Ks(k,ye),0<ce.length&&(ye=new zf(ye,t,null,s,L),G.push({event:ye,listeners:ce}),de?ye.data=de:(de=Xf(s),de!==null&&(ye.data=de)))),(de=$v?Wv(t,s):Yv(t,s))&&(k=Ks(k,"onBeforeInput"),0<k.length&&(L=new zf("onBeforeInput","beforeinput",null,s,L),G.push({event:L,listeners:k}),L.data=de))}gh(G,i)})}function Po(t,i,s){return{instance:t,listener:i,currentTarget:s}}function Ks(t,i){for(var s=i+"Capture",u=[];t!==null;){var d=t,h=d.stateNode;d.tag===5&&h!==null&&(d=h,h=lo(t,s),h!=null&&u.unshift(Po(t,h,d)),h=lo(t,i),h!=null&&u.push(Po(t,h,d))),t=t.return}return u}function Sr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mh(t,i,s,u,d){for(var h=i._reactName,v=[];s!==null&&s!==u;){var y=s,w=y.alternate,k=y.stateNode;if(w!==null&&w===u)break;y.tag===5&&k!==null&&(y=k,d?(w=lo(s,h),w!=null&&v.unshift(Po(s,w,y))):d||(w=lo(s,h),w!=null&&v.push(Po(s,w,y)))),s=s.return}v.length!==0&&t.push({event:i,listeners:v})}var oS=/\r\n?/g,sS=/\u0000|\uFFFD/g;function vh(t){return(typeof t=="string"?t:""+t).replace(oS,`
`).replace(sS,"")}function Qs(t,i,s){if(i=vh(i),vh(t)!==i&&s)throw Error(r(425))}function Zs(){}var Tu=null,Iu=null;function wu(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Eu=typeof setTimeout=="function"?setTimeout:void 0,aS=typeof clearTimeout=="function"?clearTimeout:void 0,Sh=typeof Promise=="function"?Promise:void 0,lS=typeof queueMicrotask=="function"?queueMicrotask:typeof Sh<"u"?function(t){return Sh.resolve(null).then(t).catch(uS)}:Eu;function uS(t){setTimeout(function(){throw t})}function _u(t,i){var s=i,u=0;do{var d=s.nextSibling;if(t.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(u===0){t.removeChild(d),So(i);return}u--}else s!=="$"&&s!=="$?"&&s!=="$!"||u++;s=d}while(s);So(i)}function ui(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function yh(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return t;i--}else s==="/$"&&i++}t=t.previousSibling}return null}var yr=Math.random().toString(36).slice(2),Nn="__reactFiber$"+yr,No="__reactProps$"+yr,zn="__reactContainer$"+yr,Cu="__reactEvents$"+yr,cS="__reactListeners$"+yr,dS="__reactHandles$"+yr;function Bi(t){var i=t[Nn];if(i)return i;for(var s=t.parentNode;s;){if(i=s[zn]||s[Nn]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=yh(t);t!==null;){if(s=t[Nn])return s;t=yh(t)}return i}t=s,s=t.parentNode}return null}function Do(t){return t=t[Nn]||t[zn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ar(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function qs(t){return t[No]||null}var Ru=[],Tr=-1;function ci(t){return{current:t}}function Ve(t){0>Tr||(t.current=Ru[Tr],Ru[Tr]=null,Tr--)}function We(t,i){Tr++,Ru[Tr]=t.current,t.current=i}var di={},Tt=ci(di),Ht=ci(!1),Gi=di;function Ir(t,i){var s=t.type.contextTypes;if(!s)return di;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var d={},h;for(h in s)d[h]=i[h];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=d),d}function Bt(t){return t=t.childContextTypes,t!=null}function Js(){Ve(Ht),Ve(Tt)}function Ah(t,i,s){if(Tt.current!==di)throw Error(r(168));We(Tt,i),We(Ht,s)}function Th(t,i,s){var u=t.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return s;u=u.getChildContext();for(var d in u)if(!(d in i))throw Error(r(108,Se(t)||"Unknown",d));return b({},s,u)}function ea(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||di,Gi=Tt.current,We(Tt,t),We(Ht,Ht.current),!0}function Ih(t,i,s){var u=t.stateNode;if(!u)throw Error(r(169));s?(t=Th(t,i,Gi),u.__reactInternalMemoizedMergedChildContext=t,Ve(Ht),Ve(Tt),We(Tt,t)):Ve(Ht),We(Ht,s)}var $n=null,ta=!1,Pu=!1;function wh(t){$n===null?$n=[t]:$n.push(t)}function fS(t){ta=!0,wh(t)}function fi(){if(!Pu&&$n!==null){Pu=!0;var t=0,i=be;try{var s=$n;for(be=1;t<s.length;t++){var u=s[t];do u=u(!0);while(u!==null)}$n=null,ta=!1}catch(d){throw $n!==null&&($n=$n.slice(t+1)),_f(Ql,fi),d}finally{be=i,Pu=!1}}return null}var wr=[],Er=0,na=null,ia=0,tn=[],nn=0,xi=null,Wn=1,Yn="";function bi(t,i){wr[Er++]=ia,wr[Er++]=na,na=t,ia=i}function Eh(t,i,s){tn[nn++]=Wn,tn[nn++]=Yn,tn[nn++]=xi,xi=t;var u=Wn;t=Yn;var d=32-dn(u)-1;u&=~(1<<d),s+=1;var h=32-dn(i)+d;if(30<h){var v=d-d%5;h=(u&(1<<v)-1).toString(32),u>>=v,d-=v,Wn=1<<32-dn(i)+d|s<<d|u,Yn=h+t}else Wn=1<<h|s<<d|u,Yn=t}function Nu(t){t.return!==null&&(bi(t,1),Eh(t,1,0))}function Du(t){for(;t===na;)na=wr[--Er],wr[Er]=null,ia=wr[--Er],wr[Er]=null;for(;t===xi;)xi=tn[--nn],tn[nn]=null,Yn=tn[--nn],tn[nn]=null,Wn=tn[--nn],tn[nn]=null}var Xt=null,Kt=null,Qe=!1,hn=null;function _h(t,i){var s=an(5,null,null,0);s.elementType="DELETED",s.stateNode=i,s.return=t,i=t.deletions,i===null?(t.deletions=[s],t.flags|=16):i.push(s)}function Ch(t,i){switch(t.tag){case 5:var s=t.type;return i=i.nodeType!==1||s.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,Xt=t,Kt=ui(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,Xt=t,Kt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(s=xi!==null?{id:Wn,overflow:Yn}:null,t.memoizedState={dehydrated:i,treeContext:s,retryLane:1073741824},s=an(18,null,null,0),s.stateNode=i,s.return=t,t.child=s,Xt=t,Kt=null,!0):!1;default:return!1}}function ku(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ou(t){if(Qe){var i=Kt;if(i){var s=i;if(!Ch(t,i)){if(ku(t))throw Error(r(418));i=ui(s.nextSibling);var u=Xt;i&&Ch(t,i)?_h(u,s):(t.flags=t.flags&-4097|2,Qe=!1,Xt=t)}}else{if(ku(t))throw Error(r(418));t.flags=t.flags&-4097|2,Qe=!1,Xt=t}}}function Rh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function ra(t){if(t!==Xt)return!1;if(!Qe)return Rh(t),Qe=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!wu(t.type,t.memoizedProps)),i&&(i=Kt)){if(ku(t))throw Ph(),Error(r(418));for(;i;)_h(t,i),i=ui(i.nextSibling)}if(Rh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(i===0){Kt=ui(t.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++}t=t.nextSibling}Kt=null}}else Kt=Xt?ui(t.stateNode.nextSibling):null;return!0}function Ph(){for(var t=Kt;t;)t=ui(t.nextSibling)}function _r(){Kt=Xt=null,Qe=!1}function Mu(t){hn===null?hn=[t]:hn.push(t)}var hS=$.ReactCurrentBatchConfig;function ko(t,i,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var u=s.stateNode}if(!u)throw Error(r(147,t));var d=u,h=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===h?i.ref:(i=function(v){var y=d.refs;v===null?delete y[h]:y[h]=v},i._stringRef=h,i)}if(typeof t!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,t))}return t}function oa(t,i){throw t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function Nh(t){var i=t._init;return i(t._payload)}function Dh(t){function i(N,C){if(t){var D=N.deletions;D===null?(N.deletions=[C],N.flags|=16):D.push(C)}}function s(N,C){if(!t)return null;for(;C!==null;)i(N,C),C=C.sibling;return null}function u(N,C){for(N=new Map;C!==null;)C.key!==null?N.set(C.key,C):N.set(C.index,C),C=C.sibling;return N}function d(N,C){return N=Ai(N,C),N.index=0,N.sibling=null,N}function h(N,C,D){return N.index=D,t?(D=N.alternate,D!==null?(D=D.index,D<C?(N.flags|=2,C):D):(N.flags|=2,C)):(N.flags|=1048576,C)}function v(N){return t&&N.alternate===null&&(N.flags|=2),N}function y(N,C,D,z){return C===null||C.tag!==6?(C=Ec(D,N.mode,z),C.return=N,C):(C=d(C,D),C.return=N,C)}function w(N,C,D,z){var re=D.type;return re===W?L(N,C,D.props.children,z,D.key):C!==null&&(C.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===ve&&Nh(re)===C.type)?(z=d(C,D.props),z.ref=ko(N,C,D),z.return=N,z):(z=Na(D.type,D.key,D.props,null,N.mode,z),z.ref=ko(N,C,D),z.return=N,z)}function k(N,C,D,z){return C===null||C.tag!==4||C.stateNode.containerInfo!==D.containerInfo||C.stateNode.implementation!==D.implementation?(C=_c(D,N.mode,z),C.return=N,C):(C=d(C,D.children||[]),C.return=N,C)}function L(N,C,D,z,re){return C===null||C.tag!==7?(C=Ki(D,N.mode,z,re),C.return=N,C):(C=d(C,D),C.return=N,C)}function G(N,C,D){if(typeof C=="string"&&C!==""||typeof C=="number")return C=Ec(""+C,N.mode,D),C.return=N,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case oe:return D=Na(C.type,C.key,C.props,null,N.mode,D),D.ref=ko(N,null,C),D.return=N,D;case M:return C=_c(C,N.mode,D),C.return=N,C;case ve:var z=C._init;return G(N,z(C._payload),D)}if(Rn(C)||Y(C))return C=Ki(C,N.mode,D,null),C.return=N,C;oa(N,C)}return null}function U(N,C,D,z){var re=C!==null?C.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return re!==null?null:y(N,C,""+D,z);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case oe:return D.key===re?w(N,C,D,z):null;case M:return D.key===re?k(N,C,D,z):null;case ve:return re=D._init,U(N,C,re(D._payload),z)}if(Rn(D)||Y(D))return re!==null?null:L(N,C,D,z,null);oa(N,D)}return null}function K(N,C,D,z,re){if(typeof z=="string"&&z!==""||typeof z=="number")return N=N.get(D)||null,y(C,N,""+z,re);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case oe:return N=N.get(z.key===null?D:z.key)||null,w(C,N,z,re);case M:return N=N.get(z.key===null?D:z.key)||null,k(C,N,z,re);case ve:var ce=z._init;return K(N,C,D,ce(z._payload),re)}if(Rn(z)||Y(z))return N=N.get(D)||null,L(C,N,z,re,null);oa(C,z)}return null}function Z(N,C,D,z){for(var re=null,ce=null,de=C,ye=C=0,ft=null;de!==null&&ye<D.length;ye++){de.index>ye?(ft=de,de=null):ft=de.sibling;var Be=U(N,de,D[ye],z);if(Be===null){de===null&&(de=ft);break}t&&de&&Be.alternate===null&&i(N,de),C=h(Be,C,ye),ce===null?re=Be:ce.sibling=Be,ce=Be,de=ft}if(ye===D.length)return s(N,de),Qe&&bi(N,ye),re;if(de===null){for(;ye<D.length;ye++)de=G(N,D[ye],z),de!==null&&(C=h(de,C,ye),ce===null?re=de:ce.sibling=de,ce=de);return Qe&&bi(N,ye),re}for(de=u(N,de);ye<D.length;ye++)ft=K(de,N,ye,D[ye],z),ft!==null&&(t&&ft.alternate!==null&&de.delete(ft.key===null?ye:ft.key),C=h(ft,C,ye),ce===null?re=ft:ce.sibling=ft,ce=ft);return t&&de.forEach(function(Ti){return i(N,Ti)}),Qe&&bi(N,ye),re}function te(N,C,D,z){var re=Y(D);if(typeof re!="function")throw Error(r(150));if(D=re.call(D),D==null)throw Error(r(151));for(var ce=re=null,de=C,ye=C=0,ft=null,Be=D.next();de!==null&&!Be.done;ye++,Be=D.next()){de.index>ye?(ft=de,de=null):ft=de.sibling;var Ti=U(N,de,Be.value,z);if(Ti===null){de===null&&(de=ft);break}t&&de&&Ti.alternate===null&&i(N,de),C=h(Ti,C,ye),ce===null?re=Ti:ce.sibling=Ti,ce=Ti,de=ft}if(Be.done)return s(N,de),Qe&&bi(N,ye),re;if(de===null){for(;!Be.done;ye++,Be=D.next())Be=G(N,Be.value,z),Be!==null&&(C=h(Be,C,ye),ce===null?re=Be:ce.sibling=Be,ce=Be);return Qe&&bi(N,ye),re}for(de=u(N,de);!Be.done;ye++,Be=D.next())Be=K(de,N,ye,Be.value,z),Be!==null&&(t&&Be.alternate!==null&&de.delete(Be.key===null?ye:Be.key),C=h(Be,C,ye),ce===null?re=Be:ce.sibling=Be,ce=Be);return t&&de.forEach(function(jS){return i(N,jS)}),Qe&&bi(N,ye),re}function it(N,C,D,z){if(typeof D=="object"&&D!==null&&D.type===W&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case oe:e:{for(var re=D.key,ce=C;ce!==null;){if(ce.key===re){if(re=D.type,re===W){if(ce.tag===7){s(N,ce.sibling),C=d(ce,D.props.children),C.return=N,N=C;break e}}else if(ce.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===ve&&Nh(re)===ce.type){s(N,ce.sibling),C=d(ce,D.props),C.ref=ko(N,ce,D),C.return=N,N=C;break e}s(N,ce);break}else i(N,ce);ce=ce.sibling}D.type===W?(C=Ki(D.props.children,N.mode,z,D.key),C.return=N,N=C):(z=Na(D.type,D.key,D.props,null,N.mode,z),z.ref=ko(N,C,D),z.return=N,N=z)}return v(N);case M:e:{for(ce=D.key;C!==null;){if(C.key===ce)if(C.tag===4&&C.stateNode.containerInfo===D.containerInfo&&C.stateNode.implementation===D.implementation){s(N,C.sibling),C=d(C,D.children||[]),C.return=N,N=C;break e}else{s(N,C);break}else i(N,C);C=C.sibling}C=_c(D,N.mode,z),C.return=N,N=C}return v(N);case ve:return ce=D._init,it(N,C,ce(D._payload),z)}if(Rn(D))return Z(N,C,D,z);if(Y(D))return te(N,C,D,z);oa(N,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,C!==null&&C.tag===6?(s(N,C.sibling),C=d(C,D),C.return=N,N=C):(s(N,C),C=Ec(D,N.mode,z),C.return=N,N=C),v(N)):s(N,C)}return it}var Cr=Dh(!0),kh=Dh(!1),sa=ci(null),aa=null,Rr=null,Fu=null;function Uu(){Fu=Rr=aa=null}function Lu(t){var i=sa.current;Ve(sa),t._currentValue=i}function Hu(t,i,s){for(;t!==null;){var u=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),t===s)break;t=t.return}}function Pr(t,i){aa=t,Fu=Rr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(Gt=!0),t.firstContext=null)}function rn(t){var i=t._currentValue;if(Fu!==t)if(t={context:t,memoizedValue:i,next:null},Rr===null){if(aa===null)throw Error(r(308));Rr=t,aa.dependencies={lanes:0,firstContext:t}}else Rr=Rr.next=t;return i}var zi=null;function Bu(t){zi===null?zi=[t]:zi.push(t)}function Oh(t,i,s,u){var d=i.interleaved;return d===null?(s.next=s,Bu(i)):(s.next=d.next,d.next=s),i.interleaved=s,jn(t,u)}function jn(t,i){t.lanes|=i;var s=t.alternate;for(s!==null&&(s.lanes|=i),s=t,t=t.return;t!==null;)t.childLanes|=i,s=t.alternate,s!==null&&(s.childLanes|=i),s=t,t=t.return;return s.tag===3?s.stateNode:null}var hi=!1;function Gu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mh(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vn(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function gi(t,i,s){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(He&2)!==0){var d=u.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),u.pending=i,jn(t,s)}return d=u.interleaved,d===null?(i.next=i,Bu(u)):(i.next=d.next,d.next=i),u.interleaved=i,jn(t,s)}function la(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194240)!==0)){var u=i.lanes;u&=t.pendingLanes,s|=u,i.lanes=s,Jl(t,s)}}function Fh(t,i){var s=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var d=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var v={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};h===null?d=h=v:h=h.next=v,s=s.next}while(s!==null);h===null?d=h=i:h=h.next=i}else d=h=i;s={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:u.shared,effects:u.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}function ua(t,i,s,u){var d=t.updateQueue;hi=!1;var h=d.firstBaseUpdate,v=d.lastBaseUpdate,y=d.shared.pending;if(y!==null){d.shared.pending=null;var w=y,k=w.next;w.next=null,v===null?h=k:v.next=k,v=w;var L=t.alternate;L!==null&&(L=L.updateQueue,y=L.lastBaseUpdate,y!==v&&(y===null?L.firstBaseUpdate=k:y.next=k,L.lastBaseUpdate=w))}if(h!==null){var G=d.baseState;v=0,L=k=w=null,y=h;do{var U=y.lane,K=y.eventTime;if((u&U)===U){L!==null&&(L=L.next={eventTime:K,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var Z=t,te=y;switch(U=i,K=s,te.tag){case 1:if(Z=te.payload,typeof Z=="function"){G=Z.call(K,G,U);break e}G=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=te.payload,U=typeof Z=="function"?Z.call(K,G,U):Z,U==null)break e;G=b({},G,U);break e;case 2:hi=!0}}y.callback!==null&&y.lane!==0&&(t.flags|=64,U=d.effects,U===null?d.effects=[y]:U.push(y))}else K={eventTime:K,lane:U,tag:y.tag,payload:y.payload,callback:y.callback,next:null},L===null?(k=L=K,w=G):L=L.next=K,v|=U;if(y=y.next,y===null){if(y=d.shared.pending,y===null)break;U=y,y=U.next,U.next=null,d.lastBaseUpdate=U,d.shared.pending=null}}while(!0);if(L===null&&(w=G),d.baseState=w,d.firstBaseUpdate=k,d.lastBaseUpdate=L,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else h===null&&(d.shared.lanes=0);Yi|=v,t.lanes=v,t.memoizedState=G}}function Uh(t,i,s){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var u=t[i],d=u.callback;if(d!==null){if(u.callback=null,u=s,typeof d!="function")throw Error(r(191,d));d.call(u)}}}var Oo={},Dn=ci(Oo),Mo=ci(Oo),Fo=ci(Oo);function $i(t){if(t===Oo)throw Error(r(174));return t}function xu(t,i){switch(We(Fo,i),We(Mo,t),We(Dn,Oo),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:bl(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=bl(i,t)}Ve(Dn),We(Dn,i)}function Nr(){Ve(Dn),Ve(Mo),Ve(Fo)}function Lh(t){$i(Fo.current);var i=$i(Dn.current),s=bl(i,t.type);i!==s&&(We(Mo,t),We(Dn,s))}function bu(t){Mo.current===t&&(Ve(Dn),Ve(Mo))}var Je=ci(0);function ca(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var zu=[];function $u(){for(var t=0;t<zu.length;t++)zu[t]._workInProgressVersionPrimary=null;zu.length=0}var da=$.ReactCurrentDispatcher,Wu=$.ReactCurrentBatchConfig,Wi=0,et=null,lt=null,ct=null,fa=!1,Uo=!1,Lo=0,gS=0;function It(){throw Error(r(321))}function Yu(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!fn(t[s],i[s]))return!1;return!0}function ju(t,i,s,u,d,h){if(Wi=h,et=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,da.current=t===null||t.memoizedState===null?SS:yS,t=s(u,d),Uo){h=0;do{if(Uo=!1,Lo=0,25<=h)throw Error(r(301));h+=1,ct=lt=null,i.updateQueue=null,da.current=AS,t=s(u,d)}while(Uo)}if(da.current=pa,i=lt!==null&&lt.next!==null,Wi=0,ct=lt=et=null,fa=!1,i)throw Error(r(300));return t}function Vu(){var t=Lo!==0;return Lo=0,t}function kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?et.memoizedState=ct=t:ct=ct.next=t,ct}function on(){if(lt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var i=ct===null?et.memoizedState:ct.next;if(i!==null)ct=i,lt=t;else{if(t===null)throw Error(r(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ct===null?et.memoizedState=ct=t:ct=ct.next=t}return ct}function Ho(t,i){return typeof i=="function"?i(t):i}function Xu(t){var i=on(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var u=lt,d=u.baseQueue,h=s.pending;if(h!==null){if(d!==null){var v=d.next;d.next=h.next,h.next=v}u.baseQueue=d=h,s.pending=null}if(d!==null){h=d.next,u=u.baseState;var y=v=null,w=null,k=h;do{var L=k.lane;if((Wi&L)===L)w!==null&&(w=w.next={lane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),u=k.hasEagerState?k.eagerState:t(u,k.action);else{var G={lane:L,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null};w===null?(y=w=G,v=u):w=w.next=G,et.lanes|=L,Yi|=L}k=k.next}while(k!==null&&k!==h);w===null?v=u:w.next=y,fn(u,i.memoizedState)||(Gt=!0),i.memoizedState=u,i.baseState=v,i.baseQueue=w,s.lastRenderedState=u}if(t=s.interleaved,t!==null){d=t;do h=d.lane,et.lanes|=h,Yi|=h,d=d.next;while(d!==t)}else d===null&&(s.lanes=0);return[i.memoizedState,s.dispatch]}function Ku(t){var i=on(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var u=s.dispatch,d=s.pending,h=i.memoizedState;if(d!==null){s.pending=null;var v=d=d.next;do h=t(h,v.action),v=v.next;while(v!==d);fn(h,i.memoizedState)||(Gt=!0),i.memoizedState=h,i.baseQueue===null&&(i.baseState=h),s.lastRenderedState=h}return[h,u]}function Hh(){}function Bh(t,i){var s=et,u=on(),d=i(),h=!fn(u.memoizedState,d);if(h&&(u.memoizedState=d,Gt=!0),u=u.queue,Qu(bh.bind(null,s,u,t),[t]),u.getSnapshot!==i||h||ct!==null&&ct.memoizedState.tag&1){if(s.flags|=2048,Bo(9,xh.bind(null,s,u,d,i),void 0,null),dt===null)throw Error(r(349));(Wi&30)!==0||Gh(s,i,d)}return d}function Gh(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=et.updateQueue,i===null?(i={lastEffect:null,stores:null},et.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function xh(t,i,s,u){i.value=s,i.getSnapshot=u,zh(i)&&$h(t)}function bh(t,i,s){return s(function(){zh(i)&&$h(t)})}function zh(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!fn(t,s)}catch{return!0}}function $h(t){var i=jn(t,1);i!==null&&vn(i,t,1,-1)}function Wh(t){var i=kn();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:t},i.queue=t,t=t.dispatch=vS.bind(null,et,t),[i.memoizedState,t]}function Bo(t,i,s,u){return t={tag:t,create:i,destroy:s,deps:u,next:null},i=et.updateQueue,i===null?(i={lastEffect:null,stores:null},et.updateQueue=i,i.lastEffect=t.next=t):(s=i.lastEffect,s===null?i.lastEffect=t.next=t:(u=s.next,s.next=t,t.next=u,i.lastEffect=t)),t}function Yh(){return on().memoizedState}function ha(t,i,s,u){var d=kn();et.flags|=t,d.memoizedState=Bo(1|i,s,void 0,u===void 0?null:u)}function ga(t,i,s,u){var d=on();u=u===void 0?null:u;var h=void 0;if(lt!==null){var v=lt.memoizedState;if(h=v.destroy,u!==null&&Yu(u,v.deps)){d.memoizedState=Bo(i,s,h,u);return}}et.flags|=t,d.memoizedState=Bo(1|i,s,h,u)}function jh(t,i){return ha(8390656,8,t,i)}function Qu(t,i){return ga(2048,8,t,i)}function Vh(t,i){return ga(4,2,t,i)}function Xh(t,i){return ga(4,4,t,i)}function Kh(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Qh(t,i,s){return s=s!=null?s.concat([t]):null,ga(4,4,Kh.bind(null,i,t),s)}function Zu(){}function Zh(t,i){var s=on();i=i===void 0?null:i;var u=s.memoizedState;return u!==null&&i!==null&&Yu(i,u[1])?u[0]:(s.memoizedState=[t,i],t)}function qh(t,i){var s=on();i=i===void 0?null:i;var u=s.memoizedState;return u!==null&&i!==null&&Yu(i,u[1])?u[0]:(t=t(),s.memoizedState=[t,i],t)}function Jh(t,i,s){return(Wi&21)===0?(t.baseState&&(t.baseState=!1,Gt=!0),t.memoizedState=s):(fn(s,i)||(s=Nf(),et.lanes|=s,Yi|=s,t.baseState=!0),i)}function pS(t,i){var s=be;be=s!==0&&4>s?s:4,t(!0);var u=Wu.transition;Wu.transition={};try{t(!1),i()}finally{be=s,Wu.transition=u}}function eg(){return on().memoizedState}function mS(t,i,s){var u=Si(t);if(s={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null},tg(t))ng(i,s);else if(s=Oh(t,i,s,u),s!==null){var d=Nt();vn(s,t,u,d),ig(s,i,u)}}function vS(t,i,s){var u=Si(t),d={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null};if(tg(t))ng(i,d);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=i.lastRenderedReducer,h!==null))try{var v=i.lastRenderedState,y=h(v,s);if(d.hasEagerState=!0,d.eagerState=y,fn(y,v)){var w=i.interleaved;w===null?(d.next=d,Bu(i)):(d.next=w.next,w.next=d),i.interleaved=d;return}}catch{}finally{}s=Oh(t,i,d,u),s!==null&&(d=Nt(),vn(s,t,u,d),ig(s,i,u))}}function tg(t){var i=t.alternate;return t===et||i!==null&&i===et}function ng(t,i){Uo=fa=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function ig(t,i,s){if((s&4194240)!==0){var u=i.lanes;u&=t.pendingLanes,s|=u,i.lanes=s,Jl(t,s)}}var pa={readContext:rn,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},SS={readContext:rn,useCallback:function(t,i){return kn().memoizedState=[t,i===void 0?null:i],t},useContext:rn,useEffect:jh,useImperativeHandle:function(t,i,s){return s=s!=null?s.concat([t]):null,ha(4194308,4,Kh.bind(null,i,t),s)},useLayoutEffect:function(t,i){return ha(4194308,4,t,i)},useInsertionEffect:function(t,i){return ha(4,2,t,i)},useMemo:function(t,i){var s=kn();return i=i===void 0?null:i,t=t(),s.memoizedState=[t,i],t},useReducer:function(t,i,s){var u=kn();return i=s!==void 0?s(i):i,u.memoizedState=u.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},u.queue=t,t=t.dispatch=mS.bind(null,et,t),[u.memoizedState,t]},useRef:function(t){var i=kn();return t={current:t},i.memoizedState=t},useState:Wh,useDebugValue:Zu,useDeferredValue:function(t){return kn().memoizedState=t},useTransition:function(){var t=Wh(!1),i=t[0];return t=pS.bind(null,t[1]),kn().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,s){var u=et,d=kn();if(Qe){if(s===void 0)throw Error(r(407));s=s()}else{if(s=i(),dt===null)throw Error(r(349));(Wi&30)!==0||Gh(u,i,s)}d.memoizedState=s;var h={value:s,getSnapshot:i};return d.queue=h,jh(bh.bind(null,u,h,t),[t]),u.flags|=2048,Bo(9,xh.bind(null,u,h,s,i),void 0,null),s},useId:function(){var t=kn(),i=dt.identifierPrefix;if(Qe){var s=Yn,u=Wn;s=(u&~(1<<32-dn(u)-1)).toString(32)+s,i=":"+i+"R"+s,s=Lo++,0<s&&(i+="H"+s.toString(32)),i+=":"}else s=gS++,i=":"+i+"r"+s.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},yS={readContext:rn,useCallback:Zh,useContext:rn,useEffect:Qu,useImperativeHandle:Qh,useInsertionEffect:Vh,useLayoutEffect:Xh,useMemo:qh,useReducer:Xu,useRef:Yh,useState:function(){return Xu(Ho)},useDebugValue:Zu,useDeferredValue:function(t){var i=on();return Jh(i,lt.memoizedState,t)},useTransition:function(){var t=Xu(Ho)[0],i=on().memoizedState;return[t,i]},useMutableSource:Hh,useSyncExternalStore:Bh,useId:eg,unstable_isNewReconciler:!1},AS={readContext:rn,useCallback:Zh,useContext:rn,useEffect:Qu,useImperativeHandle:Qh,useInsertionEffect:Vh,useLayoutEffect:Xh,useMemo:qh,useReducer:Ku,useRef:Yh,useState:function(){return Ku(Ho)},useDebugValue:Zu,useDeferredValue:function(t){var i=on();return lt===null?i.memoizedState=t:Jh(i,lt.memoizedState,t)},useTransition:function(){var t=Ku(Ho)[0],i=on().memoizedState;return[t,i]},useMutableSource:Hh,useSyncExternalStore:Bh,useId:eg,unstable_isNewReconciler:!1};function gn(t,i){if(t&&t.defaultProps){i=b({},i),t=t.defaultProps;for(var s in t)i[s]===void 0&&(i[s]=t[s]);return i}return i}function qu(t,i,s,u){i=t.memoizedState,s=s(u,i),s=s==null?i:b({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var ma={isMounted:function(t){return(t=t._reactInternals)?Hi(t)===t:!1},enqueueSetState:function(t,i,s){t=t._reactInternals;var u=Nt(),d=Si(t),h=Vn(u,d);h.payload=i,s!=null&&(h.callback=s),i=gi(t,h,d),i!==null&&(vn(i,t,d,u),la(i,t,d))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var u=Nt(),d=Si(t),h=Vn(u,d);h.tag=1,h.payload=i,s!=null&&(h.callback=s),i=gi(t,h,d),i!==null&&(vn(i,t,d,u),la(i,t,d))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=Nt(),u=Si(t),d=Vn(s,u);d.tag=2,i!=null&&(d.callback=i),i=gi(t,d,u),i!==null&&(vn(i,t,u,s),la(i,t,u))}};function rg(t,i,s,u,d,h,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,h,v):i.prototype&&i.prototype.isPureReactComponent?!Eo(s,u)||!Eo(d,h):!0}function og(t,i,s){var u=!1,d=di,h=i.contextType;return typeof h=="object"&&h!==null?h=rn(h):(d=Bt(i)?Gi:Tt.current,u=i.contextTypes,h=(u=u!=null)?Ir(t,d):di),i=new i(s,h),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=ma,t.stateNode=i,i._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=h),i}function sg(t,i,s,u){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,u),i.state!==t&&ma.enqueueReplaceState(i,i.state,null)}function Ju(t,i,s,u){var d=t.stateNode;d.props=s,d.state=t.memoizedState,d.refs={},Gu(t);var h=i.contextType;typeof h=="object"&&h!==null?d.context=rn(h):(h=Bt(i)?Gi:Tt.current,d.context=Ir(t,h)),d.state=t.memoizedState,h=i.getDerivedStateFromProps,typeof h=="function"&&(qu(t,i,h,s),d.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&ma.enqueueReplaceState(d,d.state,null),ua(t,s,d,u),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function Dr(t,i){try{var s="",u=i;do s+=he(u),u=u.return;while(u);var d=s}catch(h){d=`
Error generating stack: `+h.message+`
`+h.stack}return{value:t,source:i,stack:d,digest:null}}function ec(t,i,s){return{value:t,source:null,stack:s??null,digest:i??null}}function tc(t,i){try{console.error(i.value)}catch(s){setTimeout(function(){throw s})}}var TS=typeof WeakMap=="function"?WeakMap:Map;function ag(t,i,s){s=Vn(-1,s),s.tag=3,s.payload={element:null};var u=i.value;return s.callback=function(){wa||(wa=!0,mc=u),tc(t,i)},s}function lg(t,i,s){s=Vn(-1,s),s.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var d=i.value;s.payload=function(){return u(d)},s.callback=function(){tc(t,i)}}var h=t.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(s.callback=function(){tc(t,i),typeof u!="function"&&(mi===null?mi=new Set([this]):mi.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),s}function ug(t,i,s){var u=t.pingCache;if(u===null){u=t.pingCache=new TS;var d=new Set;u.set(i,d)}else d=u.get(i),d===void 0&&(d=new Set,u.set(i,d));d.has(s)||(d.add(s),t=US.bind(null,t,i,s),i.then(t,t))}function cg(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function dg(t,i,s,u,d){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(i=Vn(-1,1),i.tag=2,gi(s,i,1))),s.lanes|=1),t):(t.flags|=65536,t.lanes=d,t)}var IS=$.ReactCurrentOwner,Gt=!1;function Pt(t,i,s,u){i.child=t===null?kh(i,null,s,u):Cr(i,t.child,s,u)}function fg(t,i,s,u,d){s=s.render;var h=i.ref;return Pr(i,d),u=ju(t,i,s,u,h,d),s=Vu(),t!==null&&!Gt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~d,Xn(t,i,d)):(Qe&&s&&Nu(i),i.flags|=1,Pt(t,i,u,d),i.child)}function hg(t,i,s,u,d){if(t===null){var h=s.type;return typeof h=="function"&&!wc(h)&&h.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(i.tag=15,i.type=h,gg(t,i,h,u,d)):(t=Na(s.type,null,u,i,i.mode,d),t.ref=i.ref,t.return=i,i.child=t)}if(h=t.child,(t.lanes&d)===0){var v=h.memoizedProps;if(s=s.compare,s=s!==null?s:Eo,s(v,u)&&t.ref===i.ref)return Xn(t,i,d)}return i.flags|=1,t=Ai(h,u),t.ref=i.ref,t.return=i,i.child=t}function gg(t,i,s,u,d){if(t!==null){var h=t.memoizedProps;if(Eo(h,u)&&t.ref===i.ref)if(Gt=!1,i.pendingProps=u=h,(t.lanes&d)!==0)(t.flags&131072)!==0&&(Gt=!0);else return i.lanes=t.lanes,Xn(t,i,d)}return nc(t,i,s,u,d)}function pg(t,i,s){var u=i.pendingProps,d=u.children,h=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Or,Qt),Qt|=s;else{if((s&1073741824)===0)return t=h!==null?h.baseLanes|s:s,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,We(Or,Qt),Qt|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=h!==null?h.baseLanes:s,We(Or,Qt),Qt|=u}else h!==null?(u=h.baseLanes|s,i.memoizedState=null):u=s,We(Or,Qt),Qt|=u;return Pt(t,i,d,s),i.child}function mg(t,i){var s=i.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(i.flags|=512,i.flags|=2097152)}function nc(t,i,s,u,d){var h=Bt(s)?Gi:Tt.current;return h=Ir(i,h),Pr(i,d),s=ju(t,i,s,u,h,d),u=Vu(),t!==null&&!Gt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~d,Xn(t,i,d)):(Qe&&u&&Nu(i),i.flags|=1,Pt(t,i,s,d),i.child)}function vg(t,i,s,u,d){if(Bt(s)){var h=!0;ea(i)}else h=!1;if(Pr(i,d),i.stateNode===null)Sa(t,i),og(i,s,u),Ju(i,s,u,d),u=!0;else if(t===null){var v=i.stateNode,y=i.memoizedProps;v.props=y;var w=v.context,k=s.contextType;typeof k=="object"&&k!==null?k=rn(k):(k=Bt(s)?Gi:Tt.current,k=Ir(i,k));var L=s.getDerivedStateFromProps,G=typeof L=="function"||typeof v.getSnapshotBeforeUpdate=="function";G||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(y!==u||w!==k)&&sg(i,v,u,k),hi=!1;var U=i.memoizedState;v.state=U,ua(i,u,v,d),w=i.memoizedState,y!==u||U!==w||Ht.current||hi?(typeof L=="function"&&(qu(i,s,L,u),w=i.memoizedState),(y=hi||rg(i,s,y,u,U,w,k))?(G||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=w),v.props=u,v.state=w,v.context=k,u=y):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{v=i.stateNode,Mh(t,i),y=i.memoizedProps,k=i.type===i.elementType?y:gn(i.type,y),v.props=k,G=i.pendingProps,U=v.context,w=s.contextType,typeof w=="object"&&w!==null?w=rn(w):(w=Bt(s)?Gi:Tt.current,w=Ir(i,w));var K=s.getDerivedStateFromProps;(L=typeof K=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(y!==G||U!==w)&&sg(i,v,u,w),hi=!1,U=i.memoizedState,v.state=U,ua(i,u,v,d);var Z=i.memoizedState;y!==G||U!==Z||Ht.current||hi?(typeof K=="function"&&(qu(i,s,K,u),Z=i.memoizedState),(k=hi||rg(i,s,k,u,U,Z,w)||!1)?(L||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,Z,w),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,Z,w)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||y===t.memoizedProps&&U===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&U===t.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Z),v.props=u,v.state=Z,v.context=w,u=k):(typeof v.componentDidUpdate!="function"||y===t.memoizedProps&&U===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&U===t.memoizedState||(i.flags|=1024),u=!1)}return ic(t,i,s,u,h,d)}function ic(t,i,s,u,d,h){mg(t,i);var v=(i.flags&128)!==0;if(!u&&!v)return d&&Ih(i,s,!1),Xn(t,i,h);u=i.stateNode,IS.current=i;var y=v&&typeof s.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,t!==null&&v?(i.child=Cr(i,t.child,null,h),i.child=Cr(i,null,y,h)):Pt(t,i,y,h),i.memoizedState=u.state,d&&Ih(i,s,!0),i.child}function Sg(t){var i=t.stateNode;i.pendingContext?Ah(t,i.pendingContext,i.pendingContext!==i.context):i.context&&Ah(t,i.context,!1),xu(t,i.containerInfo)}function yg(t,i,s,u,d){return _r(),Mu(d),i.flags|=256,Pt(t,i,s,u),i.child}var rc={dehydrated:null,treeContext:null,retryLane:0};function oc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ag(t,i,s){var u=i.pendingProps,d=Je.current,h=!1,v=(i.flags&128)!==0,y;if((y=v)||(y=t!==null&&t.memoizedState===null?!1:(d&2)!==0),y?(h=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),We(Je,d&1),t===null)return Ou(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=u.children,t=u.fallback,h?(u=i.mode,h=i.child,v={mode:"hidden",children:v},(u&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=v):h=Da(v,u,0,null),t=Ki(t,u,s,null),h.return=i,t.return=i,h.sibling=t,i.child=h,i.child.memoizedState=oc(s),i.memoizedState=rc,t):sc(i,v));if(d=t.memoizedState,d!==null&&(y=d.dehydrated,y!==null))return wS(t,i,v,u,y,d,s);if(h){h=u.fallback,v=i.mode,d=t.child,y=d.sibling;var w={mode:"hidden",children:u.children};return(v&1)===0&&i.child!==d?(u=i.child,u.childLanes=0,u.pendingProps=w,i.deletions=null):(u=Ai(d,w),u.subtreeFlags=d.subtreeFlags&14680064),y!==null?h=Ai(y,h):(h=Ki(h,v,s,null),h.flags|=2),h.return=i,u.return=i,u.sibling=h,i.child=u,u=h,h=i.child,v=t.child.memoizedState,v=v===null?oc(s):{baseLanes:v.baseLanes|s,cachePool:null,transitions:v.transitions},h.memoizedState=v,h.childLanes=t.childLanes&~s,i.memoizedState=rc,u}return h=t.child,t=h.sibling,u=Ai(h,{mode:"visible",children:u.children}),(i.mode&1)===0&&(u.lanes=s),u.return=i,u.sibling=null,t!==null&&(s=i.deletions,s===null?(i.deletions=[t],i.flags|=16):s.push(t)),i.child=u,i.memoizedState=null,u}function sc(t,i){return i=Da({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function va(t,i,s,u){return u!==null&&Mu(u),Cr(i,t.child,null,s),t=sc(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function wS(t,i,s,u,d,h,v){if(s)return i.flags&256?(i.flags&=-257,u=ec(Error(r(422))),va(t,i,v,u)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(h=u.fallback,d=i.mode,u=Da({mode:"visible",children:u.children},d,0,null),h=Ki(h,d,v,null),h.flags|=2,u.return=i,h.return=i,u.sibling=h,i.child=u,(i.mode&1)!==0&&Cr(i,t.child,null,v),i.child.memoizedState=oc(v),i.memoizedState=rc,h);if((i.mode&1)===0)return va(t,i,v,null);if(d.data==="$!"){if(u=d.nextSibling&&d.nextSibling.dataset,u)var y=u.dgst;return u=y,h=Error(r(419)),u=ec(h,u,void 0),va(t,i,v,u)}if(y=(v&t.childLanes)!==0,Gt||y){if(u=dt,u!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(u.suspendedLanes|v))!==0?0:d,d!==0&&d!==h.retryLane&&(h.retryLane=d,jn(t,d),vn(u,t,d,-1))}return Ic(),u=ec(Error(r(421))),va(t,i,v,u)}return d.data==="$?"?(i.flags|=128,i.child=t.child,i=LS.bind(null,t),d._reactRetry=i,null):(t=h.treeContext,Kt=ui(d.nextSibling),Xt=i,Qe=!0,hn=null,t!==null&&(tn[nn++]=Wn,tn[nn++]=Yn,tn[nn++]=xi,Wn=t.id,Yn=t.overflow,xi=i),i=sc(i,u.children),i.flags|=4096,i)}function Tg(t,i,s){t.lanes|=i;var u=t.alternate;u!==null&&(u.lanes|=i),Hu(t.return,i,s)}function ac(t,i,s,u,d){var h=t.memoizedState;h===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:d}:(h.isBackwards=i,h.rendering=null,h.renderingStartTime=0,h.last=u,h.tail=s,h.tailMode=d)}function Ig(t,i,s){var u=i.pendingProps,d=u.revealOrder,h=u.tail;if(Pt(t,i,u.children,s),u=Je.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tg(t,s,i);else if(t.tag===19)Tg(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(We(Je,u),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(s=i.child,d=null;s!==null;)t=s.alternate,t!==null&&ca(t)===null&&(d=s),s=s.sibling;s=d,s===null?(d=i.child,i.child=null):(d=s.sibling,s.sibling=null),ac(i,!1,d,s,h);break;case"backwards":for(s=null,d=i.child,i.child=null;d!==null;){if(t=d.alternate,t!==null&&ca(t)===null){i.child=d;break}t=d.sibling,d.sibling=s,s=d,d=t}ac(i,!0,s,null,h);break;case"together":ac(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Sa(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function Xn(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),Yi|=i.lanes,(s&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,s=Ai(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=Ai(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function ES(t,i,s){switch(i.tag){case 3:Sg(i),_r();break;case 5:Lh(i);break;case 1:Bt(i.type)&&ea(i);break;case 4:xu(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,d=i.memoizedProps.value;We(sa,u._currentValue),u._currentValue=d;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(We(Je,Je.current&1),i.flags|=128,null):(s&i.child.childLanes)!==0?Ag(t,i,s):(We(Je,Je.current&1),t=Xn(t,i,s),t!==null?t.sibling:null);We(Je,Je.current&1);break;case 19:if(u=(s&i.childLanes)!==0,(t.flags&128)!==0){if(u)return Ig(t,i,s);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),We(Je,Je.current),u)break;return null;case 22:case 23:return i.lanes=0,pg(t,i,s)}return Xn(t,i,s)}var wg,lc,Eg,_g;wg=function(t,i){for(var s=i.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},lc=function(){},Eg=function(t,i,s,u){var d=t.memoizedProps;if(d!==u){t=i.stateNode,$i(Dn.current);var h=null;switch(s){case"input":d=Ke(t,d),u=Ke(t,u),h=[];break;case"select":d=b({},d,{value:void 0}),u=b({},u,{value:void 0}),h=[];break;case"textarea":d=Li(t,d),u=Li(t,u),h=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Zs)}zl(s,u);var v;s=null;for(k in d)if(!u.hasOwnProperty(k)&&d.hasOwnProperty(k)&&d[k]!=null)if(k==="style"){var y=d[k];for(v in y)y.hasOwnProperty(v)&&(s||(s={}),s[v]="")}else k!=="dangerouslySetInnerHTML"&&k!=="children"&&k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(a.hasOwnProperty(k)?h||(h=[]):(h=h||[]).push(k,null));for(k in u){var w=u[k];if(y=d!=null?d[k]:void 0,u.hasOwnProperty(k)&&w!==y&&(w!=null||y!=null))if(k==="style")if(y){for(v in y)!y.hasOwnProperty(v)||w&&w.hasOwnProperty(v)||(s||(s={}),s[v]="");for(v in w)w.hasOwnProperty(v)&&y[v]!==w[v]&&(s||(s={}),s[v]=w[v])}else s||(h||(h=[]),h.push(k,s)),s=w;else k==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,y=y?y.__html:void 0,w!=null&&y!==w&&(h=h||[]).push(k,w)):k==="children"?typeof w!="string"&&typeof w!="number"||(h=h||[]).push(k,""+w):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&(a.hasOwnProperty(k)?(w!=null&&k==="onScroll"&&je("scroll",t),h||y===w||(h=[])):(h=h||[]).push(k,w))}s&&(h=h||[]).push("style",s);var k=h;(i.updateQueue=k)&&(i.flags|=4)}},_g=function(t,i,s,u){s!==u&&(i.flags|=4)};function Go(t,i){if(!Qe)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function wt(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,u=0;if(i)for(var d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=u,t.childLanes=s,i}function _S(t,i,s){var u=i.pendingProps;switch(Du(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(i),null;case 1:return Bt(i.type)&&Js(),wt(i),null;case 3:return u=i.stateNode,Nr(),Ve(Ht),Ve(Tt),$u(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(ra(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,hn!==null&&(yc(hn),hn=null))),lc(t,i),wt(i),null;case 5:bu(i);var d=$i(Fo.current);if(s=i.type,t!==null&&i.stateNode!=null)Eg(t,i,s,u,d),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(r(166));return wt(i),null}if(t=$i(Dn.current),ra(i)){u=i.stateNode,s=i.type;var h=i.memoizedProps;switch(u[Nn]=i,u[No]=h,t=(i.mode&1)!==0,s){case"dialog":je("cancel",u),je("close",u);break;case"iframe":case"object":case"embed":je("load",u);break;case"video":case"audio":for(d=0;d<Co.length;d++)je(Co[d],u);break;case"source":je("error",u);break;case"img":case"image":case"link":je("error",u),je("load",u);break;case"details":je("toggle",u);break;case"input":Ye(u,h),je("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!h.multiple},je("invalid",u);break;case"textarea":lf(u,h),je("invalid",u)}zl(s,h),d=null;for(var v in h)if(h.hasOwnProperty(v)){var y=h[v];v==="children"?typeof y=="string"?u.textContent!==y&&(h.suppressHydrationWarning!==!0&&Qs(u.textContent,y,t),d=["children",y]):typeof y=="number"&&u.textContent!==""+y&&(h.suppressHydrationWarning!==!0&&Qs(u.textContent,y,t),d=["children",""+y]):a.hasOwnProperty(v)&&y!=null&&v==="onScroll"&&je("scroll",u)}switch(s){case"input":Re(u),en(u,h,!0);break;case"textarea":Re(u),cf(u);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(u.onclick=Zs)}u=d,i.updateQueue=u,u!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=df(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=v.createElement(s,{is:u.is}):(t=v.createElement(s),s==="select"&&(v=t,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):t=v.createElementNS(t,s),t[Nn]=i,t[No]=u,wg(t,i,!1,!1),i.stateNode=t;e:{switch(v=$l(s,u),s){case"dialog":je("cancel",t),je("close",t),d=u;break;case"iframe":case"object":case"embed":je("load",t),d=u;break;case"video":case"audio":for(d=0;d<Co.length;d++)je(Co[d],t);d=u;break;case"source":je("error",t),d=u;break;case"img":case"image":case"link":je("error",t),je("load",t),d=u;break;case"details":je("toggle",t),d=u;break;case"input":Ye(t,u),d=Ke(t,u),je("invalid",t);break;case"option":d=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},d=b({},u,{value:void 0}),je("invalid",t);break;case"textarea":lf(t,u),d=Li(t,u),je("invalid",t);break;default:d=u}zl(s,d),y=d;for(h in y)if(y.hasOwnProperty(h)){var w=y[h];h==="style"?gf(t,w):h==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&ff(t,w)):h==="children"?typeof w=="string"?(s!=="textarea"||w!=="")&&so(t,w):typeof w=="number"&&so(t,""+w):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(a.hasOwnProperty(h)?w!=null&&h==="onScroll"&&je("scroll",t):w!=null&&H(t,h,w,v))}switch(s){case"input":Re(t),en(t,u,!1);break;case"textarea":Re(t),cf(t);break;case"option":u.value!=null&&t.setAttribute("value",""+me(u.value));break;case"select":t.multiple=!!u.multiple,h=u.value,h!=null?ni(t,!!u.multiple,h,!1):u.defaultValue!=null&&ni(t,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(t.onclick=Zs)}switch(s){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return wt(i),null;case 6:if(t&&i.stateNode!=null)_g(t,i,t.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=$i(Fo.current),$i(Dn.current),ra(i)){if(u=i.stateNode,s=i.memoizedProps,u[Nn]=i,(h=u.nodeValue!==s)&&(t=Xt,t!==null))switch(t.tag){case 3:Qs(u.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qs(u.nodeValue,s,(t.mode&1)!==0)}h&&(i.flags|=4)}else u=(s.nodeType===9?s:s.ownerDocument).createTextNode(u),u[Nn]=i,i.stateNode=u}return wt(i),null;case 13:if(Ve(Je),u=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&Kt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Ph(),_r(),i.flags|=98560,h=!1;else if(h=ra(i),u!==null&&u.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Nn]=i}else _r(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;wt(i),h=!1}else hn!==null&&(yc(hn),hn=null),h=!0;if(!h)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=s,i):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(Je.current&1)!==0?ut===0&&(ut=3):Ic())),i.updateQueue!==null&&(i.flags|=4),wt(i),null);case 4:return Nr(),lc(t,i),t===null&&Ro(i.stateNode.containerInfo),wt(i),null;case 10:return Lu(i.type._context),wt(i),null;case 17:return Bt(i.type)&&Js(),wt(i),null;case 19:if(Ve(Je),h=i.memoizedState,h===null)return wt(i),null;if(u=(i.flags&128)!==0,v=h.rendering,v===null)if(u)Go(h,!1);else{if(ut!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(v=ca(t),v!==null){for(i.flags|=128,Go(h,!1),u=v.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=s,s=i.child;s!==null;)h=s,t=u,h.flags&=14680066,v=h.alternate,v===null?(h.childLanes=0,h.lanes=t,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=v.childLanes,h.lanes=v.lanes,h.child=v.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=v.memoizedProps,h.memoizedState=v.memoizedState,h.updateQueue=v.updateQueue,h.type=v.type,t=v.dependencies,h.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return We(Je,Je.current&1|2),i.child}t=t.sibling}h.tail!==null&&nt()>Mr&&(i.flags|=128,u=!0,Go(h,!1),i.lanes=4194304)}else{if(!u)if(t=ca(v),t!==null){if(i.flags|=128,u=!0,s=t.updateQueue,s!==null&&(i.updateQueue=s,i.flags|=4),Go(h,!0),h.tail===null&&h.tailMode==="hidden"&&!v.alternate&&!Qe)return wt(i),null}else 2*nt()-h.renderingStartTime>Mr&&s!==1073741824&&(i.flags|=128,u=!0,Go(h,!1),i.lanes=4194304);h.isBackwards?(v.sibling=i.child,i.child=v):(s=h.last,s!==null?s.sibling=v:i.child=v,h.last=v)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=nt(),i.sibling=null,s=Je.current,We(Je,u?s&1|2:s&1),i):(wt(i),null);case 22:case 23:return Tc(),u=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(i.flags|=8192),u&&(i.mode&1)!==0?(Qt&1073741824)!==0&&(wt(i),i.subtreeFlags&6&&(i.flags|=8192)):wt(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function CS(t,i){switch(Du(i),i.tag){case 1:return Bt(i.type)&&Js(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Nr(),Ve(Ht),Ve(Tt),$u(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return bu(i),null;case 13:if(Ve(Je),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));_r()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Ve(Je),null;case 4:return Nr(),null;case 10:return Lu(i.type._context),null;case 22:case 23:return Tc(),null;case 24:return null;default:return null}}var ya=!1,Et=!1,RS=typeof WeakSet=="function"?WeakSet:Set,Q=null;function kr(t,i){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(u){tt(t,i,u)}else s.current=null}function uc(t,i,s){try{s()}catch(u){tt(t,i,u)}}var Cg=!1;function PS(t,i){if(Tu=Gs,t=rh(),hu(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var d=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var v=0,y=-1,w=-1,k=0,L=0,G=t,U=null;t:for(;;){for(var K;G!==s||d!==0&&G.nodeType!==3||(y=v+d),G!==h||u!==0&&G.nodeType!==3||(w=v+u),G.nodeType===3&&(v+=G.nodeValue.length),(K=G.firstChild)!==null;)U=G,G=K;for(;;){if(G===t)break t;if(U===s&&++k===d&&(y=v),U===h&&++L===u&&(w=v),(K=G.nextSibling)!==null)break;G=U,U=G.parentNode}G=K}s=y===-1||w===-1?null:{start:y,end:w}}else s=null}s=s||{start:0,end:0}}else s=null;for(Iu={focusedElem:t,selectionRange:s},Gs=!1,Q=i;Q!==null;)if(i=Q,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Q=t;else for(;Q!==null;){i=Q;try{var Z=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var te=Z.memoizedProps,it=Z.memoizedState,N=i.stateNode,C=N.getSnapshotBeforeUpdate(i.elementType===i.type?te:gn(i.type,te),it);N.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var D=i.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(z){tt(i,i.return,z)}if(t=i.sibling,t!==null){t.return=i.return,Q=t;break}Q=i.return}return Z=Cg,Cg=!1,Z}function xo(t,i,s){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&t)===t){var h=d.destroy;d.destroy=void 0,h!==void 0&&uc(i,s,h)}d=d.next}while(d!==u)}}function Aa(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var u=s.create;s.destroy=u()}s=s.next}while(s!==i)}}function cc(t){var i=t.ref;if(i!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof i=="function"?i(t):i.current=t}}function Rg(t){var i=t.alternate;i!==null&&(t.alternate=null,Rg(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[Nn],delete i[No],delete i[Cu],delete i[cS],delete i[dS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Pg(t){return t.tag===5||t.tag===3||t.tag===4}function Ng(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dc(t,i,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?s.nodeType===8?s.parentNode.insertBefore(t,i):s.insertBefore(t,i):(s.nodeType===8?(i=s.parentNode,i.insertBefore(t,s)):(i=s,i.appendChild(t)),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Zs));else if(u!==4&&(t=t.child,t!==null))for(dc(t,i,s),t=t.sibling;t!==null;)dc(t,i,s),t=t.sibling}function fc(t,i,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(fc(t,i,s),t=t.sibling;t!==null;)fc(t,i,s),t=t.sibling}var mt=null,pn=!1;function pi(t,i,s){for(s=s.child;s!==null;)Dg(t,i,s),s=s.sibling}function Dg(t,i,s){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(Ms,s)}catch{}switch(s.tag){case 5:Et||kr(s,i);case 6:var u=mt,d=pn;mt=null,pi(t,i,s),mt=u,pn=d,mt!==null&&(pn?(t=mt,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):mt.removeChild(s.stateNode));break;case 18:mt!==null&&(pn?(t=mt,s=s.stateNode,t.nodeType===8?_u(t.parentNode,s):t.nodeType===1&&_u(t,s),So(t)):_u(mt,s.stateNode));break;case 4:u=mt,d=pn,mt=s.stateNode.containerInfo,pn=!0,pi(t,i,s),mt=u,pn=d;break;case 0:case 11:case 14:case 15:if(!Et&&(u=s.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var h=d,v=h.destroy;h=h.tag,v!==void 0&&((h&2)!==0||(h&4)!==0)&&uc(s,i,v),d=d.next}while(d!==u)}pi(t,i,s);break;case 1:if(!Et&&(kr(s,i),u=s.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=s.memoizedProps,u.state=s.memoizedState,u.componentWillUnmount()}catch(y){tt(s,i,y)}pi(t,i,s);break;case 21:pi(t,i,s);break;case 22:s.mode&1?(Et=(u=Et)||s.memoizedState!==null,pi(t,i,s),Et=u):pi(t,i,s);break;default:pi(t,i,s)}}function kg(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new RS),i.forEach(function(u){var d=HS.bind(null,t,u);s.has(u)||(s.add(u),u.then(d,d))})}}function mn(t,i){var s=i.deletions;if(s!==null)for(var u=0;u<s.length;u++){var d=s[u];try{var h=t,v=i,y=v;e:for(;y!==null;){switch(y.tag){case 5:mt=y.stateNode,pn=!1;break e;case 3:mt=y.stateNode.containerInfo,pn=!0;break e;case 4:mt=y.stateNode.containerInfo,pn=!0;break e}y=y.return}if(mt===null)throw Error(r(160));Dg(h,v,d),mt=null,pn=!1;var w=d.alternate;w!==null&&(w.return=null),d.return=null}catch(k){tt(d,i,k)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Og(i,t),i=i.sibling}function Og(t,i){var s=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mn(i,t),On(t),u&4){try{xo(3,t,t.return),Aa(3,t)}catch(te){tt(t,t.return,te)}try{xo(5,t,t.return)}catch(te){tt(t,t.return,te)}}break;case 1:mn(i,t),On(t),u&512&&s!==null&&kr(s,s.return);break;case 5:if(mn(i,t),On(t),u&512&&s!==null&&kr(s,s.return),t.flags&32){var d=t.stateNode;try{so(d,"")}catch(te){tt(t,t.return,te)}}if(u&4&&(d=t.stateNode,d!=null)){var h=t.memoizedProps,v=s!==null?s.memoizedProps:h,y=t.type,w=t.updateQueue;if(t.updateQueue=null,w!==null)try{y==="input"&&h.type==="radio"&&h.name!=null&&_n(d,h),$l(y,v);var k=$l(y,h);for(v=0;v<w.length;v+=2){var L=w[v],G=w[v+1];L==="style"?gf(d,G):L==="dangerouslySetInnerHTML"?ff(d,G):L==="children"?so(d,G):H(d,L,G,k)}switch(y){case"input":Lt(d,h);break;case"textarea":uf(d,h);break;case"select":var U=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!h.multiple;var K=h.value;K!=null?ni(d,!!h.multiple,K,!1):U!==!!h.multiple&&(h.defaultValue!=null?ni(d,!!h.multiple,h.defaultValue,!0):ni(d,!!h.multiple,h.multiple?[]:"",!1))}d[No]=h}catch(te){tt(t,t.return,te)}}break;case 6:if(mn(i,t),On(t),u&4){if(t.stateNode===null)throw Error(r(162));d=t.stateNode,h=t.memoizedProps;try{d.nodeValue=h}catch(te){tt(t,t.return,te)}}break;case 3:if(mn(i,t),On(t),u&4&&s!==null&&s.memoizedState.isDehydrated)try{So(i.containerInfo)}catch(te){tt(t,t.return,te)}break;case 4:mn(i,t),On(t);break;case 13:mn(i,t),On(t),d=t.child,d.flags&8192&&(h=d.memoizedState!==null,d.stateNode.isHidden=h,!h||d.alternate!==null&&d.alternate.memoizedState!==null||(pc=nt())),u&4&&kg(t);break;case 22:if(L=s!==null&&s.memoizedState!==null,t.mode&1?(Et=(k=Et)||L,mn(i,t),Et=k):mn(i,t),On(t),u&8192){if(k=t.memoizedState!==null,(t.stateNode.isHidden=k)&&!L&&(t.mode&1)!==0)for(Q=t,L=t.child;L!==null;){for(G=Q=L;Q!==null;){switch(U=Q,K=U.child,U.tag){case 0:case 11:case 14:case 15:xo(4,U,U.return);break;case 1:kr(U,U.return);var Z=U.stateNode;if(typeof Z.componentWillUnmount=="function"){u=U,s=U.return;try{i=u,Z.props=i.memoizedProps,Z.state=i.memoizedState,Z.componentWillUnmount()}catch(te){tt(u,s,te)}}break;case 5:kr(U,U.return);break;case 22:if(U.memoizedState!==null){Ug(G);continue}}K!==null?(K.return=U,Q=K):Ug(G)}L=L.sibling}e:for(L=null,G=t;;){if(G.tag===5){if(L===null){L=G;try{d=G.stateNode,k?(h=d.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(y=G.stateNode,w=G.memoizedProps.style,v=w!=null&&w.hasOwnProperty("display")?w.display:null,y.style.display=hf("display",v))}catch(te){tt(t,t.return,te)}}}else if(G.tag===6){if(L===null)try{G.stateNode.nodeValue=k?"":G.memoizedProps}catch(te){tt(t,t.return,te)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===t)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===t)break e;for(;G.sibling===null;){if(G.return===null||G.return===t)break e;L===G&&(L=null),G=G.return}L===G&&(L=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:mn(i,t),On(t),u&4&&kg(t);break;case 21:break;default:mn(i,t),On(t)}}function On(t){var i=t.flags;if(i&2){try{e:{for(var s=t.return;s!==null;){if(Pg(s)){var u=s;break e}s=s.return}throw Error(r(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(so(d,""),u.flags&=-33);var h=Ng(t);fc(t,h,d);break;case 3:case 4:var v=u.stateNode.containerInfo,y=Ng(t);dc(t,y,v);break;default:throw Error(r(161))}}catch(w){tt(t,t.return,w)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function NS(t,i,s){Q=t,Mg(t)}function Mg(t,i,s){for(var u=(t.mode&1)!==0;Q!==null;){var d=Q,h=d.child;if(d.tag===22&&u){var v=d.memoizedState!==null||ya;if(!v){var y=d.alternate,w=y!==null&&y.memoizedState!==null||Et;y=ya;var k=Et;if(ya=v,(Et=w)&&!k)for(Q=d;Q!==null;)v=Q,w=v.child,v.tag===22&&v.memoizedState!==null?Lg(d):w!==null?(w.return=v,Q=w):Lg(d);for(;h!==null;)Q=h,Mg(h),h=h.sibling;Q=d,ya=y,Et=k}Fg(t)}else(d.subtreeFlags&8772)!==0&&h!==null?(h.return=d,Q=h):Fg(t)}}function Fg(t){for(;Q!==null;){var i=Q;if((i.flags&8772)!==0){var s=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Et||Aa(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!Et)if(s===null)u.componentDidMount();else{var d=i.elementType===i.type?s.memoizedProps:gn(i.type,s.memoizedProps);u.componentDidUpdate(d,s.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var h=i.updateQueue;h!==null&&Uh(i,h,u);break;case 3:var v=i.updateQueue;if(v!==null){if(s=null,i.child!==null)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}Uh(i,v,s)}break;case 5:var y=i.stateNode;if(s===null&&i.flags&4){s=y;var w=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&s.focus();break;case"img":w.src&&(s.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var k=i.alternate;if(k!==null){var L=k.memoizedState;if(L!==null){var G=L.dehydrated;G!==null&&So(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Et||i.flags&512&&cc(i)}catch(U){tt(i,i.return,U)}}if(i===t){Q=null;break}if(s=i.sibling,s!==null){s.return=i.return,Q=s;break}Q=i.return}}function Ug(t){for(;Q!==null;){var i=Q;if(i===t){Q=null;break}var s=i.sibling;if(s!==null){s.return=i.return,Q=s;break}Q=i.return}}function Lg(t){for(;Q!==null;){var i=Q;try{switch(i.tag){case 0:case 11:case 15:var s=i.return;try{Aa(4,i)}catch(w){tt(i,s,w)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var d=i.return;try{u.componentDidMount()}catch(w){tt(i,d,w)}}var h=i.return;try{cc(i)}catch(w){tt(i,h,w)}break;case 5:var v=i.return;try{cc(i)}catch(w){tt(i,v,w)}}}catch(w){tt(i,i.return,w)}if(i===t){Q=null;break}var y=i.sibling;if(y!==null){y.return=i.return,Q=y;break}Q=i.return}}var DS=Math.ceil,Ta=$.ReactCurrentDispatcher,hc=$.ReactCurrentOwner,sn=$.ReactCurrentBatchConfig,He=0,dt=null,ot=null,vt=0,Qt=0,Or=ci(0),ut=0,bo=null,Yi=0,Ia=0,gc=0,zo=null,xt=null,pc=0,Mr=1/0,Kn=null,wa=!1,mc=null,mi=null,Ea=!1,vi=null,_a=0,$o=0,vc=null,Ca=-1,Ra=0;function Nt(){return(He&6)!==0?nt():Ca!==-1?Ca:Ca=nt()}function Si(t){return(t.mode&1)===0?1:(He&2)!==0&&vt!==0?vt&-vt:hS.transition!==null?(Ra===0&&(Ra=Nf()),Ra):(t=be,t!==0||(t=window.event,t=t===void 0?16:Bf(t.type)),t)}function vn(t,i,s,u){if(50<$o)throw $o=0,vc=null,Error(r(185));ho(t,s,u),((He&2)===0||t!==dt)&&(t===dt&&((He&2)===0&&(Ia|=s),ut===4&&yi(t,vt)),bt(t,u),s===1&&He===0&&(i.mode&1)===0&&(Mr=nt()+500,ta&&fi()))}function bt(t,i){var s=t.callbackNode;hv(t,i);var u=Ls(t,t===dt?vt:0);if(u===0)s!==null&&Cf(s),t.callbackNode=null,t.callbackPriority=0;else if(i=u&-u,t.callbackPriority!==i){if(s!=null&&Cf(s),i===1)t.tag===0?fS(Bg.bind(null,t)):wh(Bg.bind(null,t)),lS(function(){(He&6)===0&&fi()}),s=null;else{switch(Df(u)){case 1:s=Ql;break;case 4:s=Rf;break;case 16:s=Os;break;case 536870912:s=Pf;break;default:s=Os}s=jg(s,Hg.bind(null,t))}t.callbackPriority=i,t.callbackNode=s}}function Hg(t,i){if(Ca=-1,Ra=0,(He&6)!==0)throw Error(r(327));var s=t.callbackNode;if(Fr()&&t.callbackNode!==s)return null;var u=Ls(t,t===dt?vt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||i)i=Pa(t,u);else{i=u;var d=He;He|=2;var h=xg();(dt!==t||vt!==i)&&(Kn=null,Mr=nt()+500,Vi(t,i));do try{MS();break}catch(y){Gg(t,y)}while(!0);Uu(),Ta.current=h,He=d,ot!==null?i=0:(dt=null,vt=0,i=ut)}if(i!==0){if(i===2&&(d=Zl(t),d!==0&&(u=d,i=Sc(t,d))),i===1)throw s=bo,Vi(t,0),yi(t,u),bt(t,nt()),s;if(i===6)yi(t,u);else{if(d=t.current.alternate,(u&30)===0&&!kS(d)&&(i=Pa(t,u),i===2&&(h=Zl(t),h!==0&&(u=h,i=Sc(t,h))),i===1))throw s=bo,Vi(t,0),yi(t,u),bt(t,nt()),s;switch(t.finishedWork=d,t.finishedLanes=u,i){case 0:case 1:throw Error(r(345));case 2:Xi(t,xt,Kn);break;case 3:if(yi(t,u),(u&130023424)===u&&(i=pc+500-nt(),10<i)){if(Ls(t,0)!==0)break;if(d=t.suspendedLanes,(d&u)!==u){Nt(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=Eu(Xi.bind(null,t,xt,Kn),i);break}Xi(t,xt,Kn);break;case 4:if(yi(t,u),(u&4194240)===u)break;for(i=t.eventTimes,d=-1;0<u;){var v=31-dn(u);h=1<<v,v=i[v],v>d&&(d=v),u&=~h}if(u=d,u=nt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*DS(u/1960))-u,10<u){t.timeoutHandle=Eu(Xi.bind(null,t,xt,Kn),u);break}Xi(t,xt,Kn);break;case 5:Xi(t,xt,Kn);break;default:throw Error(r(329))}}}return bt(t,nt()),t.callbackNode===s?Hg.bind(null,t):null}function Sc(t,i){var s=zo;return t.current.memoizedState.isDehydrated&&(Vi(t,i).flags|=256),t=Pa(t,i),t!==2&&(i=xt,xt=s,i!==null&&yc(i)),t}function yc(t){xt===null?xt=t:xt.push.apply(xt,t)}function kS(t){for(var i=t;;){if(i.flags&16384){var s=i.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var u=0;u<s.length;u++){var d=s[u],h=d.getSnapshot;d=d.value;try{if(!fn(h(),d))return!1}catch{return!1}}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function yi(t,i){for(i&=~gc,i&=~Ia,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var s=31-dn(i),u=1<<s;t[s]=-1,i&=~u}}function Bg(t){if((He&6)!==0)throw Error(r(327));Fr();var i=Ls(t,0);if((i&1)===0)return bt(t,nt()),null;var s=Pa(t,i);if(t.tag!==0&&s===2){var u=Zl(t);u!==0&&(i=u,s=Sc(t,u))}if(s===1)throw s=bo,Vi(t,0),yi(t,i),bt(t,nt()),s;if(s===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,Xi(t,xt,Kn),bt(t,nt()),null}function Ac(t,i){var s=He;He|=1;try{return t(i)}finally{He=s,He===0&&(Mr=nt()+500,ta&&fi())}}function ji(t){vi!==null&&vi.tag===0&&(He&6)===0&&Fr();var i=He;He|=1;var s=sn.transition,u=be;try{if(sn.transition=null,be=1,t)return t()}finally{be=u,sn.transition=s,He=i,(He&6)===0&&fi()}}function Tc(){Qt=Or.current,Ve(Or)}function Vi(t,i){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,aS(s)),ot!==null)for(s=ot.return;s!==null;){var u=s;switch(Du(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Js();break;case 3:Nr(),Ve(Ht),Ve(Tt),$u();break;case 5:bu(u);break;case 4:Nr();break;case 13:Ve(Je);break;case 19:Ve(Je);break;case 10:Lu(u.type._context);break;case 22:case 23:Tc()}s=s.return}if(dt=t,ot=t=Ai(t.current,null),vt=Qt=i,ut=0,bo=null,gc=Ia=Yi=0,xt=zo=null,zi!==null){for(i=0;i<zi.length;i++)if(s=zi[i],u=s.interleaved,u!==null){s.interleaved=null;var d=u.next,h=s.pending;if(h!==null){var v=h.next;h.next=d,u.next=v}s.pending=u}zi=null}return t}function Gg(t,i){do{var s=ot;try{if(Uu(),da.current=pa,fa){for(var u=et.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}fa=!1}if(Wi=0,ct=lt=et=null,Uo=!1,Lo=0,hc.current=null,s===null||s.return===null){ut=1,bo=i,ot=null;break}e:{var h=t,v=s.return,y=s,w=i;if(i=vt,y.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var k=w,L=y,G=L.tag;if((L.mode&1)===0&&(G===0||G===11||G===15)){var U=L.alternate;U?(L.updateQueue=U.updateQueue,L.memoizedState=U.memoizedState,L.lanes=U.lanes):(L.updateQueue=null,L.memoizedState=null)}var K=cg(v);if(K!==null){K.flags&=-257,dg(K,v,y,h,i),K.mode&1&&ug(h,k,i),i=K,w=k;var Z=i.updateQueue;if(Z===null){var te=new Set;te.add(w),i.updateQueue=te}else Z.add(w);break e}else{if((i&1)===0){ug(h,k,i),Ic();break e}w=Error(r(426))}}else if(Qe&&y.mode&1){var it=cg(v);if(it!==null){(it.flags&65536)===0&&(it.flags|=256),dg(it,v,y,h,i),Mu(Dr(w,y));break e}}h=w=Dr(w,y),ut!==4&&(ut=2),zo===null?zo=[h]:zo.push(h),h=v;do{switch(h.tag){case 3:h.flags|=65536,i&=-i,h.lanes|=i;var N=ag(h,w,i);Fh(h,N);break e;case 1:y=w;var C=h.type,D=h.stateNode;if((h.flags&128)===0&&(typeof C.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(mi===null||!mi.has(D)))){h.flags|=65536,i&=-i,h.lanes|=i;var z=lg(h,y,i);Fh(h,z);break e}}h=h.return}while(h!==null)}zg(s)}catch(re){i=re,ot===s&&s!==null&&(ot=s=s.return);continue}break}while(!0)}function xg(){var t=Ta.current;return Ta.current=pa,t===null?pa:t}function Ic(){(ut===0||ut===3||ut===2)&&(ut=4),dt===null||(Yi&268435455)===0&&(Ia&268435455)===0||yi(dt,vt)}function Pa(t,i){var s=He;He|=2;var u=xg();(dt!==t||vt!==i)&&(Kn=null,Vi(t,i));do try{OS();break}catch(d){Gg(t,d)}while(!0);if(Uu(),He=s,Ta.current=u,ot!==null)throw Error(r(261));return dt=null,vt=0,ut}function OS(){for(;ot!==null;)bg(ot)}function MS(){for(;ot!==null&&!rv();)bg(ot)}function bg(t){var i=Yg(t.alternate,t,Qt);t.memoizedProps=t.pendingProps,i===null?zg(t):ot=i,hc.current=null}function zg(t){var i=t;do{var s=i.alternate;if(t=i.return,(i.flags&32768)===0){if(s=_S(s,i,Qt),s!==null){ot=s;return}}else{if(s=CS(s,i),s!==null){s.flags&=32767,ot=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,ot=null;return}}if(i=i.sibling,i!==null){ot=i;return}ot=i=t}while(i!==null);ut===0&&(ut=5)}function Xi(t,i,s){var u=be,d=sn.transition;try{sn.transition=null,be=1,FS(t,i,s,u)}finally{sn.transition=d,be=u}return null}function FS(t,i,s,u){do Fr();while(vi!==null);if((He&6)!==0)throw Error(r(327));s=t.finishedWork;var d=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var h=s.lanes|s.childLanes;if(gv(t,h),t===dt&&(ot=dt=null,vt=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Ea||(Ea=!0,jg(Os,function(){return Fr(),null})),h=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||h){h=sn.transition,sn.transition=null;var v=be;be=1;var y=He;He|=4,hc.current=null,PS(t,s),Og(s,t),eS(Iu),Gs=!!Tu,Iu=Tu=null,t.current=s,NS(s),ov(),He=y,be=v,sn.transition=h}else t.current=s;if(Ea&&(Ea=!1,vi=t,_a=d),h=t.pendingLanes,h===0&&(mi=null),lv(s.stateNode),bt(t,nt()),i!==null)for(u=t.onRecoverableError,s=0;s<i.length;s++)d=i[s],u(d.value,{componentStack:d.stack,digest:d.digest});if(wa)throw wa=!1,t=mc,mc=null,t;return(_a&1)!==0&&t.tag!==0&&Fr(),h=t.pendingLanes,(h&1)!==0?t===vc?$o++:($o=0,vc=t):$o=0,fi(),null}function Fr(){if(vi!==null){var t=Df(_a),i=sn.transition,s=be;try{if(sn.transition=null,be=16>t?16:t,vi===null)var u=!1;else{if(t=vi,vi=null,_a=0,(He&6)!==0)throw Error(r(331));var d=He;for(He|=4,Q=t.current;Q!==null;){var h=Q,v=h.child;if((Q.flags&16)!==0){var y=h.deletions;if(y!==null){for(var w=0;w<y.length;w++){var k=y[w];for(Q=k;Q!==null;){var L=Q;switch(L.tag){case 0:case 11:case 15:xo(8,L,h)}var G=L.child;if(G!==null)G.return=L,Q=G;else for(;Q!==null;){L=Q;var U=L.sibling,K=L.return;if(Rg(L),L===k){Q=null;break}if(U!==null){U.return=K,Q=U;break}Q=K}}}var Z=h.alternate;if(Z!==null){var te=Z.child;if(te!==null){Z.child=null;do{var it=te.sibling;te.sibling=null,te=it}while(te!==null)}}Q=h}}if((h.subtreeFlags&2064)!==0&&v!==null)v.return=h,Q=v;else e:for(;Q!==null;){if(h=Q,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:xo(9,h,h.return)}var N=h.sibling;if(N!==null){N.return=h.return,Q=N;break e}Q=h.return}}var C=t.current;for(Q=C;Q!==null;){v=Q;var D=v.child;if((v.subtreeFlags&2064)!==0&&D!==null)D.return=v,Q=D;else e:for(v=C;Q!==null;){if(y=Q,(y.flags&2048)!==0)try{switch(y.tag){case 0:case 11:case 15:Aa(9,y)}}catch(re){tt(y,y.return,re)}if(y===v){Q=null;break e}var z=y.sibling;if(z!==null){z.return=y.return,Q=z;break e}Q=y.return}}if(He=d,fi(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(Ms,t)}catch{}u=!0}return u}finally{be=s,sn.transition=i}}return!1}function $g(t,i,s){i=Dr(s,i),i=ag(t,i,1),t=gi(t,i,1),i=Nt(),t!==null&&(ho(t,1,i),bt(t,i))}function tt(t,i,s){if(t.tag===3)$g(t,t,s);else for(;i!==null;){if(i.tag===3){$g(i,t,s);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(mi===null||!mi.has(u))){t=Dr(s,t),t=lg(i,t,1),i=gi(i,t,1),t=Nt(),i!==null&&(ho(i,1,t),bt(i,t));break}}i=i.return}}function US(t,i,s){var u=t.pingCache;u!==null&&u.delete(i),i=Nt(),t.pingedLanes|=t.suspendedLanes&s,dt===t&&(vt&s)===s&&(ut===4||ut===3&&(vt&130023424)===vt&&500>nt()-pc?Vi(t,0):gc|=s),bt(t,i)}function Wg(t,i){i===0&&((t.mode&1)===0?i=1:(i=Us,Us<<=1,(Us&130023424)===0&&(Us=4194304)));var s=Nt();t=jn(t,i),t!==null&&(ho(t,i,s),bt(t,s))}function LS(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),Wg(t,s)}function HS(t,i){var s=0;switch(t.tag){case 13:var u=t.stateNode,d=t.memoizedState;d!==null&&(s=d.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(i),Wg(t,s)}var Yg;Yg=function(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps||Ht.current)Gt=!0;else{if((t.lanes&s)===0&&(i.flags&128)===0)return Gt=!1,ES(t,i,s);Gt=(t.flags&131072)!==0}else Gt=!1,Qe&&(i.flags&1048576)!==0&&Eh(i,ia,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;Sa(t,i),t=i.pendingProps;var d=Ir(i,Tt.current);Pr(i,s),d=ju(null,i,u,t,d,s);var h=Vu();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Bt(u)?(h=!0,ea(i)):h=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Gu(i),d.updater=ma,i.stateNode=d,d._reactInternals=i,Ju(i,u,t,s),i=ic(null,i,u,!0,h,s)):(i.tag=0,Qe&&h&&Nu(i),Pt(null,i,d,s),i=i.child),i;case 16:u=i.elementType;e:{switch(Sa(t,i),t=i.pendingProps,d=u._init,u=d(u._payload),i.type=u,d=i.tag=GS(u),t=gn(u,t),d){case 0:i=nc(null,i,u,t,s);break e;case 1:i=vg(null,i,u,t,s);break e;case 11:i=fg(null,i,u,t,s);break e;case 14:i=hg(null,i,u,gn(u.type,t),s);break e}throw Error(r(306,u,""))}return i;case 0:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:gn(u,d),nc(t,i,u,d,s);case 1:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:gn(u,d),vg(t,i,u,d,s);case 3:e:{if(Sg(i),t===null)throw Error(r(387));u=i.pendingProps,h=i.memoizedState,d=h.element,Mh(t,i),ua(i,u,null,s);var v=i.memoizedState;if(u=v.element,h.isDehydrated)if(h={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=h,i.memoizedState=h,i.flags&256){d=Dr(Error(r(423)),i),i=yg(t,i,u,s,d);break e}else if(u!==d){d=Dr(Error(r(424)),i),i=yg(t,i,u,s,d);break e}else for(Kt=ui(i.stateNode.containerInfo.firstChild),Xt=i,Qe=!0,hn=null,s=kh(i,null,u,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(_r(),u===d){i=Xn(t,i,s);break e}Pt(t,i,u,s)}i=i.child}return i;case 5:return Lh(i),t===null&&Ou(i),u=i.type,d=i.pendingProps,h=t!==null?t.memoizedProps:null,v=d.children,wu(u,d)?v=null:h!==null&&wu(u,h)&&(i.flags|=32),mg(t,i),Pt(t,i,v,s),i.child;case 6:return t===null&&Ou(i),null;case 13:return Ag(t,i,s);case 4:return xu(i,i.stateNode.containerInfo),u=i.pendingProps,t===null?i.child=Cr(i,null,u,s):Pt(t,i,u,s),i.child;case 11:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:gn(u,d),fg(t,i,u,d,s);case 7:return Pt(t,i,i.pendingProps,s),i.child;case 8:return Pt(t,i,i.pendingProps.children,s),i.child;case 12:return Pt(t,i,i.pendingProps.children,s),i.child;case 10:e:{if(u=i.type._context,d=i.pendingProps,h=i.memoizedProps,v=d.value,We(sa,u._currentValue),u._currentValue=v,h!==null)if(fn(h.value,v)){if(h.children===d.children&&!Ht.current){i=Xn(t,i,s);break e}}else for(h=i.child,h!==null&&(h.return=i);h!==null;){var y=h.dependencies;if(y!==null){v=h.child;for(var w=y.firstContext;w!==null;){if(w.context===u){if(h.tag===1){w=Vn(-1,s&-s),w.tag=2;var k=h.updateQueue;if(k!==null){k=k.shared;var L=k.pending;L===null?w.next=w:(w.next=L.next,L.next=w),k.pending=w}}h.lanes|=s,w=h.alternate,w!==null&&(w.lanes|=s),Hu(h.return,s,i),y.lanes|=s;break}w=w.next}}else if(h.tag===10)v=h.type===i.type?null:h.child;else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=s,y=v.alternate,y!==null&&(y.lanes|=s),Hu(v,s,i),v=h.sibling}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===i){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}Pt(t,i,d.children,s),i=i.child}return i;case 9:return d=i.type,u=i.pendingProps.children,Pr(i,s),d=rn(d),u=u(d),i.flags|=1,Pt(t,i,u,s),i.child;case 14:return u=i.type,d=gn(u,i.pendingProps),d=gn(u.type,d),hg(t,i,u,d,s);case 15:return gg(t,i,i.type,i.pendingProps,s);case 17:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:gn(u,d),Sa(t,i),i.tag=1,Bt(u)?(t=!0,ea(i)):t=!1,Pr(i,s),og(i,u,d),Ju(i,u,d,s),ic(null,i,u,!0,t,s);case 19:return Ig(t,i,s);case 22:return pg(t,i,s)}throw Error(r(156,i.tag))};function jg(t,i){return _f(t,i)}function BS(t,i,s,u){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(t,i,s,u){return new BS(t,i,s,u)}function wc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function GS(t){if(typeof t=="function")return wc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fe)return 11;if(t===Oe)return 14}return 2}function Ai(t,i){var s=t.alternate;return s===null?(s=an(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Na(t,i,s,u,d,h){var v=2;if(u=t,typeof t=="function")wc(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case W:return Ki(s.children,d,h,i);case fe:v=8,d|=8;break;case Ee:return t=an(12,s,i,d|2),t.elementType=Ee,t.lanes=h,t;case we:return t=an(13,s,i,d),t.elementType=we,t.lanes=h,t;case ue:return t=an(19,s,i,d),t.elementType=ue,t.lanes=h,t;case q:return Da(s,d,h,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ce:v=10;break e;case $e:v=9;break e;case Fe:v=11;break e;case Oe:v=14;break e;case ve:v=16,u=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return i=an(v,s,i,d),i.elementType=t,i.type=u,i.lanes=h,i}function Ki(t,i,s,u){return t=an(7,t,u,i),t.lanes=s,t}function Da(t,i,s,u){return t=an(22,t,u,i),t.elementType=q,t.lanes=s,t.stateNode={isHidden:!1},t}function Ec(t,i,s){return t=an(6,t,null,i),t.lanes=s,t}function _c(t,i,s){return i=an(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function xS(t,i,s,u,d){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ql(0),this.expirationTimes=ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ql(0),this.identifierPrefix=u,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Cc(t,i,s,u,d,h,v,y,w){return t=new xS(t,i,s,y,w),i===1?(i=1,h===!0&&(i|=8)):i=0,h=an(3,null,null,i),t.current=h,h.stateNode=t,h.memoizedState={element:u,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gu(h),t}function bS(t,i,s){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:u==null?null:""+u,children:t,containerInfo:i,implementation:s}}function Vg(t){if(!t)return di;t=t._reactInternals;e:{if(Hi(t)!==t||t.tag!==1)throw Error(r(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Bt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(t.tag===1){var s=t.type;if(Bt(s))return Th(t,s,i)}return i}function Xg(t,i,s,u,d,h,v,y,w){return t=Cc(s,u,!0,t,d,h,v,y,w),t.context=Vg(null),s=t.current,u=Nt(),d=Si(s),h=Vn(u,d),h.callback=i??null,gi(s,h,d),t.current.lanes=d,ho(t,d,u),bt(t,u),t}function ka(t,i,s,u){var d=i.current,h=Nt(),v=Si(d);return s=Vg(s),i.context===null?i.context=s:i.pendingContext=s,i=Vn(h,v),i.payload={element:t},u=u===void 0?null:u,u!==null&&(i.callback=u),t=gi(d,i,v),t!==null&&(vn(t,d,v,h),la(t,d,v)),v}function Oa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Kg(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function Rc(t,i){Kg(t,i),(t=t.alternate)&&Kg(t,i)}function zS(){return null}var Qg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Pc(t){this._internalRoot=t}Ma.prototype.render=Pc.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));ka(t,i,null,null)},Ma.prototype.unmount=Pc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;ji(function(){ka(null,t,null,null)}),i[zn]=null}};function Ma(t){this._internalRoot=t}Ma.prototype.unstable_scheduleHydration=function(t){if(t){var i=Mf();t={blockedOn:null,target:t,priority:i};for(var s=0;s<si.length&&i!==0&&i<si[s].priority;s++);si.splice(s,0,t),s===0&&Lf(t)}};function Nc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zg(){}function $S(t,i,s,u,d){if(d){if(typeof u=="function"){var h=u;u=function(){var k=Oa(v);h.call(k)}}var v=Xg(i,u,t,0,null,!1,!1,"",Zg);return t._reactRootContainer=v,t[zn]=v.current,Ro(t.nodeType===8?t.parentNode:t),ji(),v}for(;d=t.lastChild;)t.removeChild(d);if(typeof u=="function"){var y=u;u=function(){var k=Oa(w);y.call(k)}}var w=Cc(t,0,!1,null,null,!1,!1,"",Zg);return t._reactRootContainer=w,t[zn]=w.current,Ro(t.nodeType===8?t.parentNode:t),ji(function(){ka(i,w,s,u)}),w}function Ua(t,i,s,u,d){var h=s._reactRootContainer;if(h){var v=h;if(typeof d=="function"){var y=d;d=function(){var w=Oa(v);y.call(w)}}ka(i,v,t,d)}else v=$S(s,i,t,d,u);return Oa(v)}kf=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var s=fo(i.pendingLanes);s!==0&&(Jl(i,s|1),bt(i,nt()),(He&6)===0&&(Mr=nt()+500,fi()))}break;case 13:ji(function(){var u=jn(t,1);if(u!==null){var d=Nt();vn(u,t,1,d)}}),Rc(t,1)}},eu=function(t){if(t.tag===13){var i=jn(t,134217728);if(i!==null){var s=Nt();vn(i,t,134217728,s)}Rc(t,134217728)}},Of=function(t){if(t.tag===13){var i=Si(t),s=jn(t,i);if(s!==null){var u=Nt();vn(s,t,i,u)}Rc(t,i)}},Mf=function(){return be},Ff=function(t,i){var s=be;try{return be=t,i()}finally{be=s}},jl=function(t,i,s){switch(i){case"input":if(Lt(t,s),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<s.length;i++){var u=s[i];if(u!==t&&u.form===t.form){var d=qs(u);if(!d)throw Error(r(90));le(u),Lt(u,d)}}}break;case"textarea":uf(t,s);break;case"select":i=s.value,i!=null&&ni(t,!!s.multiple,i,!1)}},Sf=Ac,yf=ji;var WS={usingClientEntryPoint:!1,Events:[Do,Ar,qs,mf,vf,Ac]},Wo={findFiberByHostInstance:Bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YS={bundleType:Wo.bundleType,version:Wo.version,rendererPackageName:Wo.rendererPackageName,rendererConfig:Wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wf(t),t===null?null:t.stateNode},findFiberByHostInstance:Wo.findFiberByHostInstance||zS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var La=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!La.isDisabled&&La.supportsFiber)try{Ms=La.inject(YS),Pn=La}catch{}}return zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WS,zt.createPortal=function(t,i){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nc(i))throw Error(r(200));return bS(t,i,null,s)},zt.createRoot=function(t,i){if(!Nc(t))throw Error(r(299));var s=!1,u="",d=Qg;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Cc(t,1,!1,null,null,s,!1,u,d),t[zn]=i.current,Ro(t.nodeType===8?t.parentNode:t),new Pc(i)},zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=wf(i),t=t===null?null:t.stateNode,t},zt.flushSync=function(t){return ji(t)},zt.hydrate=function(t,i,s){if(!Fa(i))throw Error(r(200));return Ua(null,t,i,!0,s)},zt.hydrateRoot=function(t,i,s){if(!Nc(t))throw Error(r(405));var u=s!=null&&s.hydratedSources||null,d=!1,h="",v=Qg;if(s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),i=Xg(i,null,t,1,s??null,d,!1,h,v),t[zn]=i.current,Ro(t),u)for(t=0;t<u.length;t++)s=u[t],d=s._getVersion,d=d(s._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[s,d]:i.mutableSourceEagerHydrationData.push(s,d);return new Ma(i)},zt.render=function(t,i,s){if(!Fa(i))throw Error(r(200));return Ua(null,t,i,!1,s)},zt.unmountComponentAtNode=function(t){if(!Fa(t))throw Error(r(40));return t._reactRootContainer?(ji(function(){Ua(null,null,t,!1,function(){t._reactRootContainer=null,t[zn]=null})}),!0):!1},zt.unstable_batchedUpdates=Ac,zt.unstable_renderSubtreeIntoContainer=function(t,i,s,u){if(!Fa(s))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return Ua(t,i,s,!1,u)},zt.version="18.3.1-next-f1338f8080-20240426",zt}var op;function ty(){if(op)return Oc.exports;op=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Oc.exports=ey(),Oc.exports}var sp;function ny(){if(sp)return Ha;sp=1;var e=ty();return Ha.createRoot=e.createRoot,Ha.hydrateRoot=e.hydrateRoot,Ha}var iy=ny();const ry=wm(iy),Em=Pe.createContext(void 0),oy=({initialAppState:e,children:n})=>{const[r,o]=Pe.useState(e),[a,l]=Pe.useState(void 0),c=(f,g)=>{o(f),f==="gameOver"&&g?l(g):f!=="gameOver"&&l(void 0)};return Le.jsx(Em.Provider,{value:{appState:r,setAppState:c,gameOverDetails:a},children:n})},_l=()=>{const e=Pe.useContext(Em);if(e===void 0)throw new Error("useGameContext must be used within a GameProvider");return e};var Ct=function(){return Ct=Object.assign||function(n){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])}return n},Ct.apply(this,arguments)};function cs(e,n,r){if(r||arguments.length===2)for(var o=0,a=n.length,l;o<a;o++)(l||!(o in n))&&(l||(l=Array.prototype.slice.call(n,0,o)),l[o]=n[o]);return e.concat(l||Array.prototype.slice.call(n))}var Xe="-ms-",is="-moz-",Ge="-webkit-",_m="comm",Cl="rule",Nd="decl",sy="@import",Cm="@keyframes",ay="@layer",Rm=Math.abs,Dd=String.fromCharCode,dd=Object.assign;function ly(e,n){return ht(e,0)^45?(((n<<2^ht(e,0))<<2^ht(e,1))<<2^ht(e,2))<<2^ht(e,3):0}function Pm(e){return e.trim()}function qn(e,n){return(e=n.exec(e))?e[0]:e}function _e(e,n,r){return e.replace(n,r)}function ol(e,n,r){return e.indexOf(n,r)}function ht(e,n){return e.charCodeAt(n)|0}function Vr(e,n,r){return e.slice(n,r)}function Ln(e){return e.length}function Nm(e){return e.length}function Jo(e,n){return n.push(e),e}function uy(e,n){return e.map(n).join("")}function ap(e,n){return e.filter(function(r){return!qn(r,n)})}var Rl=1,Xr=1,Dm=0,cn=0,st=0,no="";function Pl(e,n,r,o,a,l,c,f){return{value:e,root:n,parent:r,type:o,props:a,children:l,line:Rl,column:Xr,length:c,return:"",siblings:f}}function Ci(e,n){return dd(Pl("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},n)}function Ur(e){for(;e.root;)e=Ci(e.root,{children:[e]});Jo(e,e.siblings)}function cy(){return st}function dy(){return st=cn>0?ht(no,--cn):0,Xr--,st===10&&(Xr=1,Rl--),st}function Tn(){return st=cn<Dm?ht(no,cn++):0,Xr++,st===10&&(Xr=1,Rl++),st}function or(){return ht(no,cn)}function sl(){return cn}function Nl(e,n){return Vr(no,e,n)}function fd(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function fy(e){return Rl=Xr=1,Dm=Ln(no=e),cn=0,[]}function hy(e){return no="",e}function Uc(e){return Pm(Nl(cn-1,hd(e===91?e+2:e===40?e+1:e)))}function gy(e){for(;(st=or())&&st<33;)Tn();return fd(e)>2||fd(st)>3?"":" "}function py(e,n){for(;--n&&Tn()&&!(st<48||st>102||st>57&&st<65||st>70&&st<97););return Nl(e,sl()+(n<6&&or()==32&&Tn()==32))}function hd(e){for(;Tn();)switch(st){case e:return cn;case 34:case 39:e!==34&&e!==39&&hd(st);break;case 40:e===41&&hd(e);break;case 92:Tn();break}return cn}function my(e,n){for(;Tn()&&e+st!==57;)if(e+st===84&&or()===47)break;return"/*"+Nl(n,cn-1)+"*"+Dd(e===47?e:Tn())}function vy(e){for(;!fd(or());)Tn();return Nl(e,cn)}function Sy(e){return hy(al("",null,null,null,[""],e=fy(e),0,[0],e))}function al(e,n,r,o,a,l,c,f,g){for(var p=0,m=0,S=c,A=0,E=0,P=0,I=1,R=1,F=1,B=0,H="",$=a,oe=l,M=o,W=H;R;)switch(P=B,B=Tn()){case 40:if(P!=108&&ht(W,S-1)==58){ol(W+=_e(Uc(B),"&","&\f"),"&\f",Rm(p?f[p-1]:0))!=-1&&(F=-1);break}case 34:case 39:case 91:W+=Uc(B);break;case 9:case 10:case 13:case 32:W+=gy(P);break;case 92:W+=py(sl()-1,7);continue;case 47:switch(or()){case 42:case 47:Jo(yy(my(Tn(),sl()),n,r,g),g);break;default:W+="/"}break;case 123*I:f[p++]=Ln(W)*F;case 125*I:case 59:case 0:switch(B){case 0:case 125:R=0;case 59+m:F==-1&&(W=_e(W,/\f/g,"")),E>0&&Ln(W)-S&&Jo(E>32?up(W+";",o,r,S-1,g):up(_e(W," ","")+";",o,r,S-2,g),g);break;case 59:W+=";";default:if(Jo(M=lp(W,n,r,p,m,a,f,H,$=[],oe=[],S,l),l),B===123)if(m===0)al(W,n,M,M,$,l,S,f,oe);else switch(A===99&&ht(W,3)===110?100:A){case 100:case 108:case 109:case 115:al(e,M,M,o&&Jo(lp(e,M,M,0,0,a,f,H,a,$=[],S,oe),oe),a,oe,S,f,o?$:oe);break;default:al(W,M,M,M,[""],oe,0,f,oe)}}p=m=E=0,I=F=1,H=W="",S=c;break;case 58:S=1+Ln(W),E=P;default:if(I<1){if(B==123)--I;else if(B==125&&I++==0&&dy()==125)continue}switch(W+=Dd(B),B*I){case 38:F=m>0?1:(W+="\f",-1);break;case 44:f[p++]=(Ln(W)-1)*F,F=1;break;case 64:or()===45&&(W+=Uc(Tn())),A=or(),m=S=Ln(H=W+=vy(sl())),B++;break;case 45:P===45&&Ln(W)==2&&(I=0)}}return l}function lp(e,n,r,o,a,l,c,f,g,p,m,S){for(var A=a-1,E=a===0?l:[""],P=Nm(E),I=0,R=0,F=0;I<o;++I)for(var B=0,H=Vr(e,A+1,A=Rm(R=c[I])),$=e;B<P;++B)($=Pm(R>0?E[B]+" "+H:_e(H,/&\f/g,E[B])))&&(g[F++]=$);return Pl(e,n,r,a===0?Cl:f,g,p,m,S)}function yy(e,n,r,o){return Pl(e,n,r,_m,Dd(cy()),Vr(e,2,-2),0,o)}function up(e,n,r,o,a){return Pl(e,n,r,Nd,Vr(e,0,o),Vr(e,o+1,-1),o,a)}function km(e,n,r){switch(ly(e,n)){case 5103:return Ge+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ge+e+e;case 4789:return is+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ge+e+is+e+Xe+e+e;case 5936:switch(ht(e,n+11)){case 114:return Ge+e+Xe+_e(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ge+e+Xe+_e(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ge+e+Xe+_e(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Ge+e+Xe+e+e;case 6165:return Ge+e+Xe+"flex-"+e+e;case 5187:return Ge+e+_e(e,/(\w+).+(:[^]+)/,Ge+"box-$1$2"+Xe+"flex-$1$2")+e;case 5443:return Ge+e+Xe+"flex-item-"+_e(e,/flex-|-self/g,"")+(qn(e,/flex-|baseline/)?"":Xe+"grid-row-"+_e(e,/flex-|-self/g,""))+e;case 4675:return Ge+e+Xe+"flex-line-pack"+_e(e,/align-content|flex-|-self/g,"")+e;case 5548:return Ge+e+Xe+_e(e,"shrink","negative")+e;case 5292:return Ge+e+Xe+_e(e,"basis","preferred-size")+e;case 6060:return Ge+"box-"+_e(e,"-grow","")+Ge+e+Xe+_e(e,"grow","positive")+e;case 4554:return Ge+_e(e,/([^-])(transform)/g,"$1"+Ge+"$2")+e;case 6187:return _e(_e(_e(e,/(zoom-|grab)/,Ge+"$1"),/(image-set)/,Ge+"$1"),e,"")+e;case 5495:case 3959:return _e(e,/(image-set\([^]*)/,Ge+"$1$`$1");case 4968:return _e(_e(e,/(.+:)(flex-)?(.*)/,Ge+"box-pack:$3"+Xe+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ge+e+e;case 4200:if(!qn(e,/flex-|baseline/))return Xe+"grid-column-align"+Vr(e,n)+e;break;case 2592:case 3360:return Xe+_e(e,"template-","")+e;case 4384:case 3616:return r&&r.some(function(o,a){return n=a,qn(o.props,/grid-\w+-end/)})?~ol(e+(r=r[n].value),"span",0)?e:Xe+_e(e,"-start","")+e+Xe+"grid-row-span:"+(~ol(r,"span",0)?qn(r,/\d+/):+qn(r,/\d+/)-+qn(e,/\d+/))+";":Xe+_e(e,"-start","")+e;case 4896:case 4128:return r&&r.some(function(o){return qn(o.props,/grid-\w+-start/)})?e:Xe+_e(_e(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return _e(e,/(.+)-inline(.+)/,Ge+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ln(e)-1-n>6)switch(ht(e,n+1)){case 109:if(ht(e,n+4)!==45)break;case 102:return _e(e,/(.+:)(.+)-([^]+)/,"$1"+Ge+"$2-$3$1"+is+(ht(e,n+3)==108?"$3":"$2-$3"))+e;case 115:return~ol(e,"stretch",0)?km(_e(e,"stretch","fill-available"),n,r)+e:e}break;case 5152:case 5920:return _e(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(o,a,l,c,f,g,p){return Xe+a+":"+l+p+(c?Xe+a+"-span:"+(f?g:+g-+l)+p:"")+e});case 4949:if(ht(e,n+6)===121)return _e(e,":",":"+Ge)+e;break;case 6444:switch(ht(e,ht(e,14)===45?18:11)){case 120:return _e(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ge+(ht(e,14)===45?"inline-":"")+"box$3$1"+Ge+"$2$3$1"+Xe+"$2box$3")+e;case 100:return _e(e,":",":"+Xe)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return _e(e,"scroll-","scroll-snap-")+e}return e}function hl(e,n){for(var r="",o=0;o<e.length;o++)r+=n(e[o],o,e,n)||"";return r}function Ay(e,n,r,o){switch(e.type){case ay:if(e.children.length)break;case sy:case Nd:return e.return=e.return||e.value;case _m:return"";case Cm:return e.return=e.value+"{"+hl(e.children,o)+"}";case Cl:if(!Ln(e.value=e.props.join(",")))return""}return Ln(r=hl(e.children,o))?e.return=e.value+"{"+r+"}":""}function Ty(e){var n=Nm(e);return function(r,o,a,l){for(var c="",f=0;f<n;f++)c+=e[f](r,o,a,l)||"";return c}}function Iy(e){return function(n){n.root||(n=n.return)&&e(n)}}function wy(e,n,r,o){if(e.length>-1&&!e.return)switch(e.type){case Nd:e.return=km(e.value,e.length,r);return;case Cm:return hl([Ci(e,{value:_e(e.value,"@","@"+Ge)})],o);case Cl:if(e.length)return uy(r=e.props,function(a){switch(qn(a,o=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Ur(Ci(e,{props:[_e(a,/:(read-\w+)/,":"+is+"$1")]})),Ur(Ci(e,{props:[a]})),dd(e,{props:ap(r,o)});break;case"::placeholder":Ur(Ci(e,{props:[_e(a,/:(plac\w+)/,":"+Ge+"input-$1")]})),Ur(Ci(e,{props:[_e(a,/:(plac\w+)/,":"+is+"$1")]})),Ur(Ci(e,{props:[_e(a,/:(plac\w+)/,Xe+"input-$1")]})),Ur(Ci(e,{props:[a]})),dd(e,{props:ap(r,o)});break}return""})}}var Ey={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},qt={},Kr=typeof process<"u"&&qt!==void 0&&(qt.REACT_APP_SC_ATTR||qt.SC_ATTR)||"data-styled",Om="active",Mm="data-styled-version",Dl="6.1.13",kd=`/*!sc*/
`,gl=typeof window<"u"&&"HTMLElement"in window,_y=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&qt!==void 0&&qt.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&qt.REACT_APP_SC_DISABLE_SPEEDY!==""?qt.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&qt.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&qt!==void 0&&qt.SC_DISABLE_SPEEDY!==void 0&&qt.SC_DISABLE_SPEEDY!==""&&qt.SC_DISABLE_SPEEDY!=="false"&&qt.SC_DISABLE_SPEEDY),Cy={},kl=Object.freeze([]),Qr=Object.freeze({});function Fm(e,n,r){return r===void 0&&(r=Qr),e.theme!==r.theme&&e.theme||n||r.theme}var Um=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Ry=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Py=/(^-|-$)/g;function cp(e){return e.replace(Ry,"-").replace(Py,"")}var Ny=/(a)(d)/gi,Ba=52,dp=function(e){return String.fromCharCode(e+(e>25?39:97))};function gd(e){var n,r="";for(n=Math.abs(e);n>Ba;n=n/Ba|0)r=dp(n%Ba)+r;return(dp(n%Ba)+r).replace(Ny,"$1-$2")}var Lc,Lm=5381,zr=function(e,n){for(var r=n.length;r;)e=33*e^n.charCodeAt(--r);return e},Hm=function(e){return zr(Lm,e)};function Bm(e){return gd(Hm(e)>>>0)}function Dy(e){return e.displayName||e.name||"Component"}function Hc(e){return typeof e=="string"&&!0}var Gm=typeof Symbol=="function"&&Symbol.for,xm=Gm?Symbol.for("react.memo"):60115,ky=Gm?Symbol.for("react.forward_ref"):60112,Oy={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},My={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},bm={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Fy=((Lc={})[ky]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Lc[xm]=bm,Lc);function fp(e){return("type"in(n=e)&&n.type.$$typeof)===xm?bm:"$$typeof"in e?Fy[e.$$typeof]:Oy;var n}var Uy=Object.defineProperty,Ly=Object.getOwnPropertyNames,hp=Object.getOwnPropertySymbols,Hy=Object.getOwnPropertyDescriptor,By=Object.getPrototypeOf,gp=Object.prototype;function zm(e,n,r){if(typeof n!="string"){if(gp){var o=By(n);o&&o!==gp&&zm(e,o,r)}var a=Ly(n);hp&&(a=a.concat(hp(n)));for(var l=fp(e),c=fp(n),f=0;f<a.length;++f){var g=a[f];if(!(g in My||r&&r[g]||c&&g in c||l&&g in l)){var p=Hy(n,g);try{Uy(e,g,p)}catch{}}}}return e}function Zr(e){return typeof e=="function"}function Od(e){return typeof e=="object"&&"styledComponentId"in e}function ir(e,n){return e&&n?"".concat(e," ").concat(n):e||n||""}function pd(e,n){if(e.length===0)return"";for(var r=e[0],o=1;o<e.length;o++)r+=e[o];return r}function ds(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function md(e,n,r){if(r===void 0&&(r=!1),!r&&!ds(e)&&!Array.isArray(e))return n;if(Array.isArray(n))for(var o=0;o<n.length;o++)e[o]=md(e[o],n[o]);else if(ds(n))for(var o in n)e[o]=md(e[o],n[o]);return e}function Md(e,n){Object.defineProperty(e,"toString",{value:n})}function _s(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(n.length>0?" Args: ".concat(n.join(", ")):""))}var Gy=function(){function e(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}return e.prototype.indexOfGroup=function(n){for(var r=0,o=0;o<n;o++)r+=this.groupSizes[o];return r},e.prototype.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var o=this.groupSizes,a=o.length,l=a;n>=l;)if((l<<=1)<0)throw _s(16,"".concat(n));this.groupSizes=new Uint32Array(l),this.groupSizes.set(o),this.length=l;for(var c=a;c<l;c++)this.groupSizes[c]=0}for(var f=this.indexOfGroup(n+1),g=(c=0,r.length);c<g;c++)this.tag.insertRule(f,r[c])&&(this.groupSizes[n]++,f++)},e.prototype.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],o=this.indexOfGroup(n),a=o+r;this.groupSizes[n]=0;for(var l=o;l<a;l++)this.tag.deleteRule(o)}},e.prototype.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var o=this.groupSizes[n],a=this.indexOfGroup(n),l=a+o,c=a;c<l;c++)r+="".concat(this.tag.getRule(c)).concat(kd);return r},e}(),ll=new Map,pl=new Map,ul=1,Ga=function(e){if(ll.has(e))return ll.get(e);for(;pl.has(ul);)ul++;var n=ul++;return ll.set(e,n),pl.set(n,e),n},xy=function(e,n){ul=n+1,ll.set(e,n),pl.set(n,e)},by="style[".concat(Kr,"][").concat(Mm,'="').concat(Dl,'"]'),zy=new RegExp("^".concat(Kr,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),$y=function(e,n,r){for(var o,a=r.split(","),l=0,c=a.length;l<c;l++)(o=a[l])&&e.registerName(n,o)},Wy=function(e,n){for(var r,o=((r=n.textContent)!==null&&r!==void 0?r:"").split(kd),a=[],l=0,c=o.length;l<c;l++){var f=o[l].trim();if(f){var g=f.match(zy);if(g){var p=0|parseInt(g[1],10),m=g[2];p!==0&&(xy(m,p),$y(e,m,g[3]),e.getTag().insertRules(p,a)),a.length=0}else a.push(f)}}},pp=function(e){for(var n=document.querySelectorAll(by),r=0,o=n.length;r<o;r++){var a=n[r];a&&a.getAttribute(Kr)!==Om&&(Wy(e,a),a.parentNode&&a.parentNode.removeChild(a))}};function Yy(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var $m=function(e){var n=document.head,r=e||n,o=document.createElement("style"),a=function(f){var g=Array.from(f.querySelectorAll("style[".concat(Kr,"]")));return g[g.length-1]}(r),l=a!==void 0?a.nextSibling:null;o.setAttribute(Kr,Om),o.setAttribute(Mm,Dl);var c=Yy();return c&&o.setAttribute("nonce",c),r.insertBefore(o,l),o},jy=function(){function e(n){this.element=$m(n),this.element.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var o=document.styleSheets,a=0,l=o.length;a<l;a++){var c=o[a];if(c.ownerNode===r)return c}throw _s(17)}(this.element),this.length=0}return e.prototype.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},e.prototype.getRule=function(n){var r=this.sheet.cssRules[n];return r&&r.cssText?r.cssText:""},e}(),Vy=function(){function e(n){this.element=$m(n),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(n,r){if(n<=this.length&&n>=0){var o=document.createTextNode(r);return this.element.insertBefore(o,this.nodes[n]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},e.prototype.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},e}(),Xy=function(){function e(n){this.rules=[],this.length=0}return e.prototype.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},e.prototype.deleteRule=function(n){this.rules.splice(n,1),this.length--},e.prototype.getRule=function(n){return n<this.length?this.rules[n]:""},e}(),mp=gl,Ky={isServer:!gl,useCSSOMInjection:!_y},ml=function(){function e(n,r,o){n===void 0&&(n=Qr),r===void 0&&(r={});var a=this;this.options=Ct(Ct({},Ky),n),this.gs=r,this.names=new Map(o),this.server=!!n.isServer,!this.server&&gl&&mp&&(mp=!1,pp(this)),Md(this,function(){return function(l){for(var c=l.getTag(),f=c.length,g="",p=function(S){var A=function(F){return pl.get(F)}(S);if(A===void 0)return"continue";var E=l.names.get(A),P=c.getGroup(S);if(E===void 0||!E.size||P.length===0)return"continue";var I="".concat(Kr,".g").concat(S,'[id="').concat(A,'"]'),R="";E!==void 0&&E.forEach(function(F){F.length>0&&(R+="".concat(F,","))}),g+="".concat(P).concat(I,'{content:"').concat(R,'"}').concat(kd)},m=0;m<f;m++)p(m);return g}(a)})}return e.registerId=function(n){return Ga(n)},e.prototype.rehydrate=function(){!this.server&&gl&&pp(this)},e.prototype.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new e(Ct(Ct({},this.options),n),this.gs,r&&this.names||void 0)},e.prototype.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(n=function(r){var o=r.useCSSOMInjection,a=r.target;return r.isServer?new Xy(a):o?new jy(a):new Vy(a)}(this.options),new Gy(n)));var n},e.prototype.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},e.prototype.registerName=function(n,r){if(Ga(n),this.names.has(n))this.names.get(n).add(r);else{var o=new Set;o.add(r),this.names.set(n,o)}},e.prototype.insertRules=function(n,r,o){this.registerName(n,r),this.getTag().insertRules(Ga(n),o)},e.prototype.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},e.prototype.clearRules=function(n){this.getTag().clearGroup(Ga(n)),this.clearNames(n)},e.prototype.clearTag=function(){this.tag=void 0},e}(),Qy=/&/g,Zy=/^\s*\/\/.*$/gm;function Wm(e,n){return e.map(function(r){return r.type==="rule"&&(r.value="".concat(n," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(n," ")),r.props=r.props.map(function(o){return"".concat(n," ").concat(o)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=Wm(r.children,n)),r})}function qy(e){var n,r,o,a=Qr,l=a.options,c=l===void 0?Qr:l,f=a.plugins,g=f===void 0?kl:f,p=function(A,E,P){return P.startsWith(r)&&P.endsWith(r)&&P.replaceAll(r,"").length>0?".".concat(n):A},m=g.slice();m.push(function(A){A.type===Cl&&A.value.includes("&")&&(A.props[0]=A.props[0].replace(Qy,r).replace(o,p))}),c.prefix&&m.push(wy),m.push(Ay);var S=function(A,E,P,I){E===void 0&&(E=""),P===void 0&&(P=""),I===void 0&&(I="&"),n=I,r=E,o=new RegExp("\\".concat(r,"\\b"),"g");var R=A.replace(Zy,""),F=Sy(P||E?"".concat(P," ").concat(E," { ").concat(R," }"):R);c.namespace&&(F=Wm(F,c.namespace));var B=[];return hl(F,Ty(m.concat(Iy(function(H){return B.push(H)})))),B};return S.hash=g.length?g.reduce(function(A,E){return E.name||_s(15),zr(A,E.name)},Lm).toString():"",S}var Jy=new ml,vd=qy(),Ym=Bn.createContext({shouldForwardProp:void 0,styleSheet:Jy,stylis:vd});Ym.Consumer;Bn.createContext(void 0);function Sd(){return Pe.useContext(Ym)}var eA=function(){function e(n,r){var o=this;this.inject=function(a,l){l===void 0&&(l=vd);var c=o.name+l.hash;a.hasNameForId(o.id,c)||a.insertRules(o.id,c,l(o.rules,c,"@keyframes"))},this.name=n,this.id="sc-keyframes-".concat(n),this.rules=r,Md(this,function(){throw _s(12,String(o.name))})}return e.prototype.getName=function(n){return n===void 0&&(n=vd),this.name+n.hash},e}(),tA=function(e){return e>="A"&&e<="Z"};function vp(e){for(var n="",r=0;r<e.length;r++){var o=e[r];if(r===1&&o==="-"&&e[0]==="-")return e;tA(o)?n+="-"+o.toLowerCase():n+=o}return n.startsWith("ms-")?"-"+n:n}var jm=function(e){return e==null||e===!1||e===""},Vm=function(e){var n,r,o=[];for(var a in e){var l=e[a];e.hasOwnProperty(a)&&!jm(l)&&(Array.isArray(l)&&l.isCss||Zr(l)?o.push("".concat(vp(a),":"),l,";"):ds(l)?o.push.apply(o,cs(cs(["".concat(a," {")],Vm(l),!1),["}"],!1)):o.push("".concat(vp(a),": ").concat((n=a,(r=l)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||n in Ey||n.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return o};function ki(e,n,r,o){if(jm(e))return[];if(Od(e))return[".".concat(e.styledComponentId)];if(Zr(e)){if(!Zr(l=e)||l.prototype&&l.prototype.isReactComponent||!n)return[e];var a=e(n);return ki(a,n,r,o)}var l;return e instanceof eA?r?(e.inject(r,o),[e.getName(o)]):[e]:ds(e)?Vm(e):Array.isArray(e)?Array.prototype.concat.apply(kl,e.map(function(c){return ki(c,n,r,o)})):[e.toString()]}function Xm(e){for(var n=0;n<e.length;n+=1){var r=e[n];if(Zr(r)&&!Od(r))return!1}return!0}var nA=Hm(Dl),iA=function(){function e(n,r,o){this.rules=n,this.staticRulesId="",this.isStatic=(o===void 0||o.isStatic)&&Xm(n),this.componentId=r,this.baseHash=zr(nA,r),this.baseStyle=o,ml.registerId(r)}return e.prototype.generateAndInjectStyles=function(n,r,o){var a=this.baseStyle?this.baseStyle.generateAndInjectStyles(n,r,o):"";if(this.isStatic&&!o.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))a=ir(a,this.staticRulesId);else{var l=pd(ki(this.rules,n,r,o)),c=gd(zr(this.baseHash,l)>>>0);if(!r.hasNameForId(this.componentId,c)){var f=o(l,".".concat(c),void 0,this.componentId);r.insertRules(this.componentId,c,f)}a=ir(a,c),this.staticRulesId=c}else{for(var g=zr(this.baseHash,o.hash),p="",m=0;m<this.rules.length;m++){var S=this.rules[m];if(typeof S=="string")p+=S;else if(S){var A=pd(ki(S,n,r,o));g=zr(g,A+m),p+=A}}if(p){var E=gd(g>>>0);r.hasNameForId(this.componentId,E)||r.insertRules(this.componentId,E,o(p,".".concat(E),void 0,this.componentId)),a=ir(a,E)}}return a},e}(),Fd=Bn.createContext(void 0);Fd.Consumer;var Bc={};function rA(e,n,r){var o=Od(e),a=e,l=!Hc(e),c=n.attrs,f=c===void 0?kl:c,g=n.componentId,p=g===void 0?function($,oe){var M=typeof $!="string"?"sc":cp($);Bc[M]=(Bc[M]||0)+1;var W="".concat(M,"-").concat(Bm(Dl+M+Bc[M]));return oe?"".concat(oe,"-").concat(W):W}(n.displayName,n.parentComponentId):g,m=n.displayName,S=m===void 0?function($){return Hc($)?"styled.".concat($):"Styled(".concat(Dy($),")")}(e):m,A=n.displayName&&n.componentId?"".concat(cp(n.displayName),"-").concat(n.componentId):n.componentId||p,E=o&&a.attrs?a.attrs.concat(f).filter(Boolean):f,P=n.shouldForwardProp;if(o&&a.shouldForwardProp){var I=a.shouldForwardProp;if(n.shouldForwardProp){var R=n.shouldForwardProp;P=function($,oe){return I($,oe)&&R($,oe)}}else P=I}var F=new iA(r,A,o?a.componentStyle:void 0);function B($,oe){return function(M,W,fe){var Ee=M.attrs,Ce=M.componentStyle,$e=M.defaultProps,Fe=M.foldedComponentIds,we=M.styledComponentId,ue=M.target,Oe=Bn.useContext(Fd),ve=Sd(),q=M.shouldForwardProp||ve.shouldForwardProp,x=Fm(W,Oe,$e)||Qr,Y=function(he,ie,Se){for(var me,X=Ct(Ct({},ie),{className:void 0,theme:Se}),ee=0;ee<he.length;ee+=1){var Re=Zr(me=he[ee])?me(X):me;for(var le in Re)X[le]=le==="className"?ir(X[le],Re[le]):le==="style"?Ct(Ct({},X[le]),Re[le]):Re[le]}return ie.className&&(X.className=ir(X.className,ie.className)),X}(Ee,W,x),b=Y.as||ue,_={};for(var O in Y)Y[O]===void 0||O[0]==="$"||O==="as"||O==="theme"&&Y.theme===x||(O==="forwardedAs"?_.as=Y.forwardedAs:q&&!q(O,b)||(_[O]=Y[O]));var j=function(he,ie){var Se=Sd(),me=he.generateAndInjectStyles(ie,Se.styleSheet,Se.stylis);return me}(Ce,Y),J=ir(Fe,we);return j&&(J+=" "+j),Y.className&&(J+=" "+Y.className),_[Hc(b)&&!Um.has(b)?"class":"className"]=J,_.ref=fe,Pe.createElement(b,_)}(H,$,oe)}B.displayName=S;var H=Bn.forwardRef(B);return H.attrs=E,H.componentStyle=F,H.displayName=S,H.shouldForwardProp=P,H.foldedComponentIds=o?ir(a.foldedComponentIds,a.styledComponentId):"",H.styledComponentId=A,H.target=o?a.target:e,Object.defineProperty(H,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function($){this._foldedDefaultProps=o?function(oe){for(var M=[],W=1;W<arguments.length;W++)M[W-1]=arguments[W];for(var fe=0,Ee=M;fe<Ee.length;fe++)md(oe,Ee[fe],!0);return oe}({},a.defaultProps,$):$}}),Md(H,function(){return".".concat(H.styledComponentId)}),l&&zm(H,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),H}function Sp(e,n){for(var r=[e[0]],o=0,a=n.length;o<a;o+=1)r.push(n[o],e[o+1]);return r}var yp=function(e){return Object.assign(e,{isCss:!0})};function Km(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(Zr(e)||ds(e))return yp(ki(Sp(kl,cs([e],n,!0))));var o=e;return n.length===0&&o.length===1&&typeof o[0]=="string"?ki(o):yp(ki(Sp(o,n)))}function yd(e,n,r){if(r===void 0&&(r=Qr),!n)throw _s(1,n);var o=function(a){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];return e(n,r,Km.apply(void 0,cs([a],l,!1)))};return o.attrs=function(a){return yd(e,n,Ct(Ct({},r),{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},o.withConfig=function(a){return yd(e,n,Ct(Ct({},r),a))},o}var Qm=function(e){return yd(rA,e)},bn=Qm;Um.forEach(function(e){bn[e]=Qm(e)});var oA=function(){function e(n,r){this.rules=n,this.componentId=r,this.isStatic=Xm(n),ml.registerId(this.componentId+1)}return e.prototype.createStyles=function(n,r,o,a){var l=a(pd(ki(this.rules,r,o,a)),""),c=this.componentId+n;o.insertRules(c,c,l)},e.prototype.removeStyles=function(n,r){r.clearRules(this.componentId+n)},e.prototype.renderStyles=function(n,r,o,a){n>2&&ml.registerId(this.componentId+n),this.removeStyles(n,o),this.createStyles(n,r,o,a)},e}();function sA(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=Km.apply(void 0,cs([e],n,!1)),a="sc-global-".concat(Bm(JSON.stringify(o))),l=new oA(o,a),c=function(g){var p=Sd(),m=Bn.useContext(Fd),S=Bn.useRef(p.styleSheet.allocateGSInstance(a)).current;return p.styleSheet.server&&f(S,g,p.styleSheet,m,p.stylis),Bn.useLayoutEffect(function(){if(!p.styleSheet.server)return f(S,g,p.styleSheet,m,p.stylis),function(){return l.removeStyles(S,p.styleSheet)}},[S,g,p.styleSheet,m,p.stylis]),null};function f(g,p,m,S,A){if(l.isStatic)l.renderStyles(g,Cy,m,A);else{var E=Ct(Ct({},p),{theme:Fm(p,S,c.defaultProps)});l.renderStyles(g,E,m,A)}}return Bn.memo(c)}function Zm(e,n){var r=Pe.useRef(null),o=Pe.useRef(!1),a=Pe.useRef(e);a.current=e;var l=Pe.useCallback(function(f){o.current&&(a.current(f),r.current=requestAnimationFrame(l))},[]),c=Pe.useMemo(function(){return[function(){o.current&&(o.current=!1,r.current&&cancelAnimationFrame(r.current))},function(){o.current||(o.current=!0,r.current=requestAnimationFrame(l))},function(){return o.current}]},[]);return Pe.useEffect(function(){return c[0]},[]),c}function aA(e,n,r,o,a){var c;(c=e.onExit)==null||c.call(e,o,n);const l=a.find(({id:f})=>f===n);return l!=null&&l.onEnter?l.onEnter(o,r):{...r,enteredAt:o.updateContext.gameState.time}}function lA(e,n){return n.find(({id:r})=>r===e)}function uA(e,n){return e!==n}function cA(e){console.warn(`No handler found for state: ${e}`)}const rs="bushGrowing",nr="bushFull",cl="bushSpreading",fs="bushDying",Yt=24,jt=10,Sn=3e3,yn=3e3,Ud=2,dA=5,fA=3,hA=12,gA=940,pA=.7,Ad=20,Ap=90,qm=45,Jm=240,Ol=10,hs=80,mA=3,jo=5,Jt=150,e0=Jt*.8,vA=Jt*.2,lr=Jt*.95,Fi=30,t0=10,SA=10,yA=.5,gt=30,Ui=gt*.75,n0=50,AA=20,TA=hs*.8,IA=.7,wA=16,i0=40,EA=24,Ld=16,_A=72/3,Tp=24,CA=1.25,RA=1.5,Hd=Jt*.6,Bd=50,PA=1,NA=350,r0=hs*.65,DA=80,kA=50,OA=1,MA=128,o0=10,Ip=100,Gd=35,Oi=gt,s0=.5,Ml=2.5,FA=5,a0=.5,l0=1.5,UA=.1,LA=.5,HA=1.5,BA=.25,GA=2.5,xA=45,bA=.05,gs=5,zA=.5,wp=100,$A=300,Fl=30,ps=1,Ep=Jt*.6,WA=Jt*.25,YA=Jt*.7,jA=Jt*.8,u0=100,VA=250,XA=120,KA=2,QA=400,ZA=1e3,qA=Jt*.85,JA=100,eT=3,tT=96,nT=24,iT=600,c0=600,rT=1,oT=24,sT=1,aT=.5,_p=24,Td=12,Cp=40,lT=.3,uT=24,Rp=500,cT=24,Pp=24,dT=1500,Gc=500,fT=400,hT=10,gT=-5,pT=1.5,mT=1.5,vT=1.2,ST=10,yT=150,AT=200,TT=100,IT=100,wT=.7,ET=300,_T=100,CT=120,Np=400,qr=10,d0=250,ms=12,dl=Ui*1.2,f0=10,RT=20,h0=.15,g0=200,pt=30,io=pt*.6,xd="#4CAF50",p0="#FF5722",m0="#9C27B0",PT="#2196F3",v0="#FFC107",NT="#FFD700",S0="#DC143C",bd="#FFFFFF",zd=[5,5],Ul=5,Jr=15,DT=20,kT=16,OT=10,MT=16,FT=16,Dp=["👑","💀","🔥","💧","☘️","☀️","🌙","⭐","⚡","⚜️"],Id=8,UT="#FFFFFF",Ri=18,$t=15,LT="rgba(0, 0, 0, 0.7)",HT=4,Ii=150,Zt=15,Qn=10,$r="#555",BT="#f44336",GT="#4CAF50",xT="#2196F3",bT="#FFC107",xa=16,zT=9,Qi=32,ba=28,$T=10,WT=8,YT=8,jT=8,ln=28,za=40,VT="rgba(255, 215, 0, 0.7)",XT="rgba(0, 0, 0, 0.3)",Mn=10,kp=8,xc=11,wi=20,bc=40,Op=5,KT=10,QT="#FFA500",ZT="#808080",Wr=120,qT=30,JT=20,$a="#2d3748",Yr="#ffffff",zc="#4a5568",eI=5,y0="#bdc9f792",tI="#272c36ff",nI="#a0aec0",Mp=300,iI="rgba(255, 255, 255, 0.5)",rI="rgba(0, 0, 0, 0.8)",oI="#FFFFFF",Fp=14,Up=8,Lp=-15,sI="#FFD700",aI=5,lI=60,uI=-50,cI=10,$c=12,Hp=10,dI="rgba(0, 0, 0, 0.5)",fI="#4CAF50",hI="#F44336",gI="#FFC107",pI="rgba(255, 255, 255, 0.2)",Bp="#FFFFFF",mI="#FF6B6B",vI=5,A0=30,Vo=50,Wa=8,Gp=10,SI="rgba(0, 0, 0, 0.5)",yI="#FFFFFF",AI=33,TI=400,II=20,wI=10,EI="rgba(0, 0, 0, 0.7)",_I="#FFFFFF",Wc=20,xp=16,CI=.5,bp=5,T0="#FFD700",RI=40,$d=4,I0=3,PI=5,w0=20,E0=5,NI="#FFFFFF",DI="#FF6B6B",xe=1,rr=3,kI=70,zp=600,OI=1.5,_0=.1,MI=15,FI=5e3,Zi=80,Ya=10,UI=12,LI=24,HI=Jt*.9,BI=24,ja=300,qi=15,GI=8,xI="rgba(0, 0, 0, 0.8)",bI="#FFFFFF",Yc=14,$p=10,Fn=20,zI="#FF6B6B",$I="#4CAF50",Wp="#FFD700",WI="rgba(255, 255, 0, 0.3)",YI=2,jI=500,VI=120,XI=45,KI="#FFD700",QI=3,ZI=4,C0=12,qI=2,JI=120,Yp=50,ew=15,R0=30,tw=2,Ut=50,nw=150,iw=12,jp=3,os=2,jc=8,rw=.5,ow=1,sw=80,aw=.7,P0=20,lw=2,uw=140,Vp=80,cw=12,N0=40,dw=3,Mi=60,Hn=40,Gr=50,Xp=120,fw=45,hw=60,gw=2,pw=90,mw=.7,vw=1.5,Sw=12,Kp=6,ss=3,Vc=15,D0=50,k0=20,Ll=80,ro=40,O0=2,vl=30;function Ne(e,n,r,o,a){const l={id:e.nextVisualEffectId,type:n,position:r,startTime:e.time,duration:o,entityId:a};return e.visualEffects.push(l),e.nextVisualEffectId++,l.id}var ae=(e=>(e[e.Hunger=0]="Hunger",e[e.Procreation=1]="Procreation",e[e.Pregnant=2]="Pregnant",e[e.TargetAcquired=3]="TargetAcquired",e[e.Attack=4]="Attack",e[e.Partnered=5]="Partnered",e[e.BushClaimed=6]="BushClaimed",e[e.BushClaimLost=7]="BushClaimLost",e[e.Eating=8]="Eating",e[e.ChildFed=9]="ChildFed",e[e.AttackDeflected=10]="AttackDeflected",e[e.AttackResisted=11]="AttackResisted",e[e.Hit=12]="Hit",e[e.SeizeBuildup=13]="SeizeBuildup",e[e.Seize=14]="Seize",e[e.CallToAttack=15]="CallToAttack",e[e.CallToFollow=16]="CallToFollow",e[e.AutopilotMoveTarget=17]="AutopilotMoveTarget",e))(ae||{}),ei=(e=>(e.Berry="berry",e.Meat="meat",e))(ei||{});const M0={berry:"🍓",meat:"🥩"},yw={id:rs,update:(e,n)=>{const{entity:r,updateContext:o}=n,a=o.deltaTime*(Yt/jt);return r.age+=a,r.age>=r.lifespan?{nextState:fs,data:{...e,enteredAt:o.gameState.time}}:(r.ownerId&&r.claimedUntil&&o.gameState.time>r.claimedUntil&&(Ne(o.gameState,ae.BushClaimLost,r.position,xe),r.ownerId=void 0,r.claimedUntil=void 0),r.timeSinceLastBerryRegen+=a,r.timeSinceLastBerryRegen>=hA&&r.food.length<r.maxFood&&(r.food.push({type:ei.Berry}),r.timeSinceLastBerryRegen=0),r.food.length>=r.maxFood?{nextState:nr,data:{...e,enteredAt:o.gameState.time,previousState:rs}}:{nextState:rs,data:e})},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},Aw={id:nr,update:(e,n)=>{const{entity:r,updateContext:o}=n,a=o.deltaTime*(Yt/jt);return r.age+=a,r.age>=r.lifespan?{nextState:fs,data:{...e,enteredAt:o.gameState.time,previousState:nr}}:r.food.length<r.maxFood?{nextState:rs,data:{...e,enteredAt:o.gameState.time,previousState:nr}}:(r.ownerId&&r.claimedUntil&&o.gameState.time>r.claimedUntil&&(Ne(o.gameState,ae.BushClaimLost,r.position,xe),r.ownerId=void 0,r.claimedUntil=void 0),r.timeSinceLastSpreadAttempt+=a,r.timeSinceLastSpreadAttempt>=Ap&&(r.timeSinceLastSpreadAttempt=0,o.gameState.time-r.timeSinceLastHarvest>=Ap&&Math.random()<r.spreadChance)?{nextState:cl,data:{...e,enteredAt:o.gameState.time,previousState:nr}}:{nextState:nr,data:e})},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})};function Gn(e,n){return{x:e.x+n.x,y:e.y+n.y}}function F0(e,n){return{x:e.x-n.x,y:e.y-n.y}}function Rt(e,n){return{x:e.x*n,y:e.y*n}}function eo(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function qe(e){const n=eo(e);return n===0?{x:0,y:0}:Rt(e,1/n)}function Tw(e,n){return eo(F0(e,n))}function Wd(e,n,r){return{x:e.x+(n.x-e.x)*r,y:e.y+(n.y-e.y)*r}}function Yd(e){if(e.length===0)return{x:0,y:0};const n=e.reduce((r,o)=>({x:r.x+o.x,y:r.y+o.y}),{x:0,y:0});return{x:n.x/e.length,y:n.y/e.length}}function ze(e,n,r,o){let a=n.x-e.x,l=n.y-e.y;return Math.abs(a)>r/2&&(a=a-Math.sign(a)*r),Math.abs(l)>o/2&&(l=l-Math.sign(l)*o),{x:a,y:l}}function Wt(e,n,r){const o=ze(e,n,r.width,r.height);return qe(o)}function V(e,n,r,o){const a=ze(e,n,r,o);return eo(a)}function Iw(e,n){return e.x*n.x+e.y*n.y}function ww(e,n){const r=Iw(e,n),o=eo(e),a=eo(n);if(o===0||a===0)return 0;const l=Math.max(-1,Math.min(1,r/(o*a)));return Math.acos(l)}function Ew(e,n,r){const o=Math.max(0,Math.min(1,r)),a={r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)},l={r:parseInt(n.substring(1,3),16),g:parseInt(n.substring(3,5),16),b:parseInt(n.substring(5,7),16)},c=Math.round(a.r+(l.r-a.r)*o),f=Math.round(a.g+(l.g-a.g)*o),g=Math.round(a.b+(l.b-a.b)*o),p=m=>("00"+m.toString(16)).slice(-2);return`#${p(c)}${p(f)}${p(g)}`}var Ft=(e=>(e.Friendly="Friendly",e.Hostile="Hostile",e))(Ft||{});function Qp(e,n,r){return n.search.human.byRadius(e.position,r).filter(l=>{if(l.id===e.id||l.gender===e.gender||!l.isAdult||l.hunger>=lr||(l.procreationCooldown||0)>0||l.gender==="female"&&l.isPregnant)return!1;const c=l.id===e.motherId||l.id===e.fatherId,f=e.id===l.motherId||e.id===l.fatherId;return!c&&!f})}function ti(e){if(e.length===0)return;const n=e.filter(a=>a.gender==="male"),r=e.filter(a=>a.gender==="female"),o=(a,l)=>a.age!==l.age?l.age-a.age:a.id-l.id;if(n.sort(o),n.length>0)return n[0];if(r.sort(o),r.length>0)return r[0]}function yt(e,n){const r=e,o=r.search.human.byProperty("motherId",n.id),a=r.search.human.byProperty("fatherId",n.id);return[...o,...a]}function U0(e,n,r){var a;if(e.id===n.id||e.motherId===n.id||e.fatherId===n.id||n.motherId===e.id||n.fatherId===e.id||e.motherId&&e.motherId===n.motherId||e.fatherId&&e.fatherId===n.fatherId||(a=e.partnerIds)!=null&&a.includes(n.id))return!0;if(e.motherId){const l=r.entities.entities.get(e.motherId);if(l&&(l.motherId===n.id||l.fatherId===n.id))return!0}if(e.fatherId){const l=r.entities.entities.get(e.fatherId);if(l&&(l.motherId===n.id||l.fatherId===n.id))return!0}if(n.motherId){const l=r.entities.entities.get(n.motherId);if(l&&(l.motherId===e.id||l.fatherId===e.id))return!0}if(n.fatherId){const l=r.entities.entities.get(n.fatherId);if(l&&(l.motherId===e.id||l.fatherId===e.id))return!0}return!1}function wd(e,n){var l,c,f,g;if(e.id===n.id||e.motherId===n.id||e.fatherId===n.id||n.motherId===e.id||n.fatherId===e.id||(l=e.partnerIds)!=null&&l.includes(n.id)||(c=n.partnerIds)!=null&&c.includes(e.id))return!0;if(e.fatherId===void 0&&e.motherId===void 0||n.fatherId===void 0&&n.motherId===void 0)return!1;const r=e.motherId===n.motherId||e.fatherId===n.fatherId,o=n.motherId===e.motherId||n.fatherId===e.fatherId,a=((f=e.ancestorIds)==null?void 0:f.some(p=>n.ancestorIds.includes(p)))||((g=n.ancestorIds)==null?void 0:g.some(p=>e.ancestorIds.includes(p)));return r||o||a}function _w(e,n){const r=[];if(e.motherId){const o=n.entities.entities.get(e.motherId);o&&r.push(o)}if(e.fatherId){const o=n.entities.entities.get(e.fatherId);o&&r.push(o)}return r}function Cw(e,n){if(e.gender!=="female"||!e.partnerIds||e.partnerIds.length===0)return null;for(const r of e.partnerIds){const o=n.entities.entities.get(r);if(o&&o.gender==="male")return o}return null}function Rw(e,n){var r;if(!e.isAdult&&e.fatherId){const o=n.entities.entities.get(e.fatherId);if(o&&o.type==="human")return o}if(e.isAdult&&e.fatherId){const o=n.entities.entities.get(e.fatherId);if(o&&o.type==="human"&&((r=ti(yt(n,o)))==null?void 0:r.id)===e.id)return o}return e.isAdult&&e.gender==="female"&&e.partnerIds&&e.partnerIds.length>0?Cw(e,n):null}function Sl(e,n){var o;const r=new Set;if(e.motherId){const a=n.entities.entities.get(e.motherId);a&&r.add(a)}if(e.fatherId){const a=n.entities.entities.get(e.fatherId);a&&r.add(a)}return(o=e.partnerIds)==null||o.forEach(a=>{const l=n.entities.entities.get(a);l&&r.add(l)}),yt(n,e).forEach(a=>r.add(a)),Array.from(r)}function L0(e,n){const r=new Map;function o(a){const l=yt(n,a);for(const c of l)r.has(c.id)||(r.set(c.id,c),o(c))}return o(e),Array.from(r.values())}function vs(e,n){return n.search.human.byProperty("leaderId",e)}function H0(e,n){var c,f;const r=new Map,o=Array.from(e.entities.entities.values()).filter(g=>g.type==="human");for(const g of o)g.leaderId&&(r.has(g.leaderId)||r.set(g.leaderId,{leaderId:g.leaderId,tribeBadge:g.tribeBadge||"?",members:[]}),(c=r.get(g.leaderId))==null||c.members.push(g));const a=n?(f=e.entities.entities.get(n))==null?void 0:f.diplomacy:void 0,l=Array.from(r.values()).map(g=>{const p=e.entities.entities.get(g.leaderId),m=g.members.filter(A=>A.isAdult).length,S=g.members.length-m;return{leaderId:g.leaderId,tribeBadge:g.tribeBadge,adultCount:m,childCount:S,isPlayerTribe:g.leaderId===n,leaderAge:(p==null?void 0:p.age)??0,leaderGender:(p==null?void 0:p.gender)??"male",diplomacyStatus:(a==null?void 0:a.get(g.leaderId??-1))??Ft.Friendly}});return l.sort((g,p)=>g.isPlayerTribe?-1:p.isPlayerTribe?1:p.adultCount+p.childCount-(g.adultCount+g.childCount)),l}function ke(e,n,r,o,a){const l=n,c=o,f=l.search[r].byRadius(e.position,c);let g=null,p=c;for(const m of f){if(m.id===e.id||a&&!a(m))continue;const S=V(e.position,m.position,n.mapDimensions.width,n.mapDimensions.height);S<p&&(p=S,g=m)}return g}function B0(e,n,r,o){return n.search[r].byRadius(e,o).length}function At(e){const r=e.search.human.byProperty("isPlayer",!0);return r.length>0?r[0]:void 0}function Pw(e,n){var c;const o=n.search.human.byProperty("activeAction","attacking");let a=null,l=1/0;for(const f of o){if(f.attackTargetId!==e)continue;const g=V(f.position,((c=n.entities.entities.get(e))==null?void 0:c.position)||{x:0,y:0},n.mapDimensions.width,n.mapDimensions.height);g<l&&(a=f,l=g)}return a}function Nw(e){return Array.from(e.entities.entities.values()).filter(n=>n.type==="human")}function Dw(e,n,r){const o=Array.from(n.entities.entities.values()).reverse();for(const a of o)if(Tw(e,a.position)<a.radius)return a}function jd(e,n,r,o){const a=Math.random()*Math.PI*2,l=Math.sqrt(Math.random())*n,c={x:Math.cos(a)*l,y:Math.sin(a)*l},f=Gn(e,c);return{x:(f.x%r+r)%r,y:(f.y%o+o)%o}}function to(e,n,r,o){const a=n,l={left:e.x-r,top:e.y-r,right:e.x+r,bottom:e.y+r},c=[...a.search.human.byRect(l),...a.search.berryBush.byRect(l),...a.search.corpse.byRect(l)];for(const f of c){if(o!==void 0&&f.id===o)continue;if(V(e,f.position,n.mapDimensions.width,n.mapDimensions.height)<r+f.radius)return!0}return!1}function Vd(e,n,r,o,a){const l=n.mapDimensions.width,c=n.mapDimensions.height;if(!to(e,n,o,a))return e;const f=o;for(let g=f;g<=r;g+=f){const p=Math.ceil(2*Math.PI*g/f);for(let m=0;m<p;m++){const S=m/p*2*Math.PI,A={x:Math.cos(S)*g,y:Math.sin(S)*g},E=Gn(e,A),P={x:(E.x%l+l)%l,y:(E.y%c+c)%c};if(!to(P,n,o,a))return P}}return null}function Ss(e,n){const r=vs(e,n);if(r.length===0){const a=n.entities.entities.get(e);return a?a.position:{x:0,y:0}}const o=r.map(a=>a.position);return Yd(o)}function Zp(e,n){const o=[...Sl(e,n),e].map(a=>a.position);return Yd(o)}function qp(e,n,r,o){const a=n.x-r.width/2,l=n.y-r.height/2,c=a+e.x,f=l+e.y,g=(c%o.width+o.width)%o.width,p=(f%o.height+o.height)%o.height;return{x:g,y:p}}function kw(e,n,r){return n.search.human.byRadius(e.position,r).filter(a=>{var l;return a.activeAction==="procreating"&&a.gender===e.gender&&typeof a.target=="number"&&((l=e.partnerIds)==null?void 0:l.includes(a.target))})[0]}function Ow(e,n,r){if(!e.leaderId)return;const o=n,a=o.search.berryBush.byRadius(e.position,r).filter(l=>l.ownerId===e.id);for(const l of a)if(l.claimedUntil&&n.time<l.claimedUntil){const c=o.search.human.byRadius(l.position,gt);for(const f of c)if(!wd(f,e)&&f.activeAction==="gathering"&&f.target===l.id)return f}}function Mw(e,n,r){const o=Sl(e,n),a=n;for(const l of o){if(V(e.position,l.position,n.mapDimensions.width,n.mapDimensions.height)>r)continue;const f=a.search.human.byProperty("attackTargetId",l.id);for(const g of f)if(g.leaderId!==e.leaderId)return{familyMember:l,aggressor:g}}}function Fw(e,n){const o=n.search.human.byRadius(e.position,ET);let a,l=1/0;for(const c of o){if(c.id===e.id||c.hitpoints<=0||c.hitpoints/c.maxHitpoints>wT||U0(e,c,n))continue;const f=V(e.position,c.position,n.mapDimensions.width,n.mapDimensions.height);f<l&&(l=f,a=c)}return a}function Uw(e,n){const r=ke(e,n,"berryBush",wp,a=>a.ownerId===e.id);return r?Vd(r.position,n,wp,Fl,r.id):null}function Xd(e,n,r){return n.search.human.byRadius(e.position,r).filter(a=>oo(e,a,n))}function Lw(e,n,r){const o=r.search.human.byProperty("leaderId",e);let a=0;for(const l of o)l.attackTargetId===n&&a++;return a}function Jp(e,n,r,o){const a=r.search.berryBush.byRadius(e,n),l=r.search.human.byRadius(e,n).filter(g=>g.leaderId!==o);let c=a.length*hT;c+=l.length*gT;let f;if(l.length>0){const g={};for(const m of l)m.leaderId&&(g[m.leaderId]=(g[m.leaderId]||0)+1);let p=0;for(const m in g)g[m]>p&&(p=g[m],f=parseInt(m,10))}return{score:c,occupyingTribeId:f}}function yl(e){return e.filter(n=>n.isAdult).reduce((n,r)=>{let o=r.hitpoints;return o+=(r.maxAge-r.age)*.5,o+=r.food.length*2,n+o},0)}function Hw(e,n){if(e.id!==e.leaderId)return null;const r=n,o=Ss(e.id,n),{score:a}=Jp(o,Gc/2,r,e.id);let l=null,c=a;const f=fT,g=dT;for(let p=e.position.x-g;p<e.position.x+g;p+=f)for(let m=e.position.y-g;m<e.position.y+g;m+=f){const S={x:(p%n.mapDimensions.width+n.mapDimensions.width)%n.mapDimensions.width,y:(m%n.mapDimensions.height+n.mapDimensions.height)%n.mapDimensions.height};if(V(o,S,n.mapDimensions.width,n.mapDimensions.height)<Gc*2)continue;const{score:E}=Jp(S,Gc/2,r,e.id);E>c*pT&&(c=E,l=S)}return l}let Xc=0;function Ed(){const e=Dp[Xc];return Xc=(Xc+1)%Dp.length,e}var Ae=(e=>(e.Gather="Gather",e.Eat="Eat",e.Procreate="Procreate",e.Attack="Attack",e.Plant="Plant",e.CallToAttack="CallToAttack",e.TribeSplit="TribeSplit",e.FollowMe="FollowMe",e.FeedChild="FeedChild",e.HuntPrey="HuntPrey",e.DefendAgainstPredator="DefendAgainstPredator",e.AutopilotMove="AutopilotMove",e.AutopilotGather="AutopilotGather",e.AutopilotAttack="AutopilotAttack",e.AutopilotProcreate="AutopilotProcreate",e.AutopilotPlant="AutopilotPlant",e.AutopilotFeedChild="AutopilotFeedChild",e.AutopilotFollowMe="AutopilotFollowMe",e))(Ae||{});const Hl={Gather:"✋",Eat:"🍖",Procreate:"❤️",Attack:"⚔️",Plant:"🌱",CallToAttack:"📢",TribeSplit:"🔱",FollowMe:"➡️",FeedChild:"👨‍👧",HuntPrey:"🏹",DefendAgainstPredator:"🛡️",AutopilotMove:"🎯",AutopilotGather:"✋",AutopilotAttack:"⚔️",AutopilotProcreate:"❤️",AutopilotPlant:"🌱",AutopilotFeedChild:"👨‍👧",AutopilotFollowMe:"➡️"},G0={Gather:"Gather",Eat:"Eat",Procreate:"Procreate",Attack:"Attack",Plant:"Plant",CallToAttack:"Call to Attack",TribeSplit:"Split Tribe",FollowMe:"Follow Me",FeedChild:"Feed Child",HuntPrey:"Hunt Prey",DefendAgainstPredator:"Defend",AutopilotMove:"Walk",AutopilotGather:"Gather",AutopilotAttack:"Attack",AutopilotProcreate:"Procreate",AutopilotPlant:"Plant",AutopilotFeedChild:"Feed",AutopilotFollowMe:"Follow"};var xr=(e=>(e.Time="Time",e.Hunger="Hunger",e.Hitpoints="Hitpoints",e.Food="Food",e.Autopilot="Autopilot",e.Muted="Muted",e.Family="Family",e.Tribes="Tribes",e))(xr||{});const Xo={Time:"🗓️",Hunger:"🍖",Hitpoints:"❤️",Food:"🍓",Autopilot:"🤖",Muted:"🔇",Family:"👨‍👩‍👧‍👦",Tribes:"🛖"};var Ue=(e=>(e.ToggleMute="ToggleMute",e.TogglePause="TogglePause",e.FastForward="FastForward",e.DismissTutorial="DismissTutorial",e.CommandEat="CommandEat",e.CommandPlant="CommandPlant",e.CommandCallToAttack="CommandCallToAttack",e.CommandFollowMe="CommandFollowMe",e.CommandGather="CommandGather",e.CommandTribeSplit="CommandTribeSplit",e.ToggleProcreationBehavior="ToggleProcreationBehavior",e.ToggleAttackBehavior="ToggleAttackBehavior",e.ToggleFeedChildBehavior="ToggleFeedChildBehavior",e.TogglePlantingBehavior="TogglePlantingBehavior",e.ToggleGatheringBehavior="ToggleGatheringBehavior",e.ToggleAutopilotFollowLeaderBehavior="ToggleAutopilotFollowLeaderBehavior",e.ToggleDiplomacy="ToggleDiplomacy",e))(Ue||{}),ys=(e=>(e.Hello="HELLO",e.NewTribeFormed="NEW_TRIBE_FORMED",e.NoHeir="NO_HEIR",e.ChildrenStarving="CHILDREN_STARVING",e))(ys||{});let Bw=0;function Gw(){return`notification-${Date.now()}-${Bw++}`}function _d(e,n){if(n.identifier){const o=e.notifications.find(a=>a.identifier===n.identifier);if(o){if(o.dismissedUntil&&e.time<o.dismissedUntil)return;o.message=n.message,o.timestamp=e.time,o.creationTime=Date.now(),o.duration=n.duration,o.targetEntityIds=n.targetEntityIds,o.highlightedEntityIds=n.highlightedEntityIds,o.targetPosition=n.targetPosition,o.targetArea=n.targetArea,o.targetRadius=n.targetRadius,o.isDismissed=!1,o.dismissedUntil=void 0;return}}const r={...n,id:Gw(),timestamp:e.time,creationTime:Date.now(),isDismissed:!1};e.notifications.push(r)}function xw(e,n){const r=e.notifications.find(o=>o.id===n);r&&(r.isDismissed=!0,r.identifier&&(r.dismissedUntil=e.time+BI))}function bw(e){const n=e.time;e.notifications=e.notifications.filter(r=>r.duration===0?!0:!(n-r.timestamp>r.duration))}const Kc=""+new URL("attack-D4MA8VWK.mp3",import.meta.url).href,zw=""+new URL("gather-CU75596W.mp3",import.meta.url).href,$w=""+new URL("eat-DCjHq2QD.mp3",import.meta.url).href,Qc=""+new URL("procreate-CfE4r5Cp.mp3",import.meta.url).href,Ww=""+new URL("birth-Cbd67GHT.mp3",import.meta.url).href,Yw=""+new URL("child-fed-DzEPuMid.mp3",import.meta.url).href,jw=""+new URL("human-death-B6HFLXES.mp3",import.meta.url).href,Vw=""+new URL("game-over-C5dqkyER.mp3",import.meta.url).href,Xw=""+new URL("button-click-DomLUeaU.mp3",import.meta.url).href,Kw=""+new URL("soundtrack-1-BdlYUGye.mp3",import.meta.url).href;var Ie=(e=>(e[e.Attack=0]="Attack",e[e.Gather=1]="Gather",e[e.Eat=2]="Eat",e[e.Procreate=3]="Procreate",e[e.Birth=4]="Birth",e[e.ChildFed=5]="ChildFed",e[e.HumanDeath=6]="HumanDeath",e[e.Seize=7]="Seize",e[e.CallToAttack=8]="CallToAttack",e[e.TribeSplit=9]="TribeSplit",e[e.CallToFollow=10]="CallToFollow",e[e.GameOver=11]="GameOver",e[e.ButtonClick=12]="ButtonClick",e[e.SoundTrack1=13]="SoundTrack1",e))(Ie||{});const Qw=new Map([[0,Kc],[1,zw],[2,$w],[3,Qc],[4,Ww],[5,Yw],[6,jw],[11,Vw],[12,Xw],[7,Kc],[8,Kc],[9,Qc],[10,Qc],[13,Kw]]);let Ko,As;function Zw(){if(!(typeof window>"u"))return As}function Kd(){if(!(typeof window>"u"))return!Ko&&typeof window.AudioContext=="function"&&(Ko=new window.AudioContext,As=Ko.createGain(),As.connect(Ko.destination),as(.1,!1)),Ko}function as(e,n){As&&(As.gain.value=n?0:e/10)}const x0=new Map;let Va=!1,em=!1;async function qw(){if(em||Va)return;const e=Kd();if(!e){console.error("AudioContext not supported. Cannot load sounds.");return}e.state==="suspended"&&e.resume(),Va=!0,console.log("Starting sound loading...");const n=[];Qw.forEach((r,o)=>{const a=fetch(r).then(l=>{if(!l.ok)throw new Error(`Failed to fetch sound: ${r}`);return l.arrayBuffer()}).then(l=>e.decodeAudioData(l)).then(l=>{x0.set(o,l)}).catch(l=>{console.error(`Error loading sound ${Ie[o]} from ${r}:`,l)});n.push(a)});try{await Promise.all(n),em=!0,Va=!1,console.log("All sounds loaded successfully.")}catch(r){Va=!1,console.error("An error occurred while loading sounds:",r)}}const ls=new Map;function Qd(e,n){const r=Kd(),o=Zw();if(!r||!o||o.gain.value===0&&(n==null?void 0:n.trackId)===void 0)return;r.state==="suspended"&&r.resume();const a=x0.get(e);if(!a){console.warn(`Sound buffer not found for type: ${Ie[e]}`);return}if(n!=null&&n.trackId&&ls.has(n.trackId))return;const l=r.createBufferSource();l.buffer=a,l.loop=(n==null?void 0:n.loop)??!1;const c=r.createGain(),f=r.createStereoPanner();let g=c;if(n!=null&&n.position&&(n!=null&&n.listenerPosition)&&(n!=null&&n.worldDimensions)){const p=ze(n.listenerPosition,n.position,n.worldDimensions.width,n.worldDimensions.height),m=V(n.listenerPosition,n.position,n.worldDimensions.width,n.worldDimensions.height);if(m>zp)return;const S=1-Math.pow(m/zp,OI);c.gain.value=Math.max(0,S);const A=Math.sin(p.x/m*(Math.PI/2));f.pan.value=isNaN(A)?0:A,c.connect(f),g=f}else{const p=e===Ie.GameOver?.4:e===Ie.SoundTrack1?1:.2;c.gain.value=p}l.connect(g),g.connect(o),l.start(0),n!=null&&n.trackId&&(ls.set(n.trackId,{sourceNode:l,gainNode:c}),l.onended=()=>{ls.delete(n.trackId)})}function tm(e,n=1){const r=ls.get(e),o=Kd();if(r&&o){const{sourceNode:a,gainNode:l}=r,c=o.currentTime;l.gain.setValueAtTime(l.gain.value,c),l.gain.linearRampToValueAtTime(0,c+n),a.stop(c+n),a.onended=null,ls.delete(e)}}function Me(e,n,r){const o=At(e.gameState);o&&Qd(n,{position:r,listenerPosition:o.position,worldDimensions:e.gameState.mapDimensions,masterVolume:e.gameState.masterVolume,isMuted:e.gameState.isMuted})}function Jw(e,n,r){const o=r.mapDimensions.width,a=r.mapDimensions.height,l=n.radius*2;for(let c=Rp;c<o/2;c+=50)for(let f=0;f<10;f++){const g=jd(e,c,o,a);if(!(V(e,g,o,a)<Rp)&&!to(g,r,l,n.id))return g}return null}function Zd(e,n){if(!e.isAdult||e.gender!=="male"||e.leaderId===e.id||!e.leaderId)return{canSplit:!1};if(!e.leaderId)return{canSplit:!1};const r=n.entities.entities.get(e.leaderId);if(!r||r.type!=="human")return{canSplit:!1};const o=ti(yt(n,r));if(o&&o.id===e.id)return{canSplit:!1};const a=vs(e.leaderId,n);if(a.length<Cp)return{canSplit:!1};const c=L0(e,n).length+1,f=Math.min(a.length*lT,Cp);return{canSplit:c>=f,progress:c/f}}function qd(e,n){var c;if(!Zd(e,n).canSplit)return;const r=e.leaderId?n.entities.entities.get(e.leaderId):void 0,o=Ed(),a=L0(e,n);e.leaderId=e.id,e.tribeBadge=o,e.diplomacy=new Map,r&&((c=r.diplomacy)==null||c.set(e.id,Ft.Hostile));for(const f of a)f.leaderId=e.id,f.tribeBadge=o;_d(n,{type:ys.NewTribeFormed,message:`A new tribe has formed! ${o}`,duration:LI,targetEntityIds:[e.id],highlightedEntityIds:[e.id,...a.map(f=>f.id)]}),Me({gameState:n},Ie.TribeSplit,e.position)}function Jd(e,n){const r=[];if(n.food.length>0&&n.hunger>Fi&&r.push({type:Ae.Eat,action:"eating",key:"f"}),n.food.length<n.maxFood){const f=ke(n,e,"berryBush",gt,m=>m.food.length>0),g=ke(n,e,"corpse",gt,m=>m.food.length>0);let p=null;f&&g?p=V(n.position,f.position,e.mapDimensions.width,e.mapDimensions.height)<=V(n.position,g.position,e.mapDimensions.width,e.mapDimensions.height)?f:g:p=f||g,p&&r.push({type:Ae.Gather,action:"gathering",key:"e",targetEntity:p})}const o=ke(n,e,"human",gt,f=>ur(n,f,e));if(o&&r.push({type:Ae.Procreate,action:"procreating",key:"r",targetEntity:o}),n.food.length>0&&n.isAdult){const f=ke(n,e,"human",gt,g=>{const p=g;return!p.isAdult&&(p.motherId===n.id||p.fatherId===n.id)&&p.hunger>=Fi});f&&r.push({type:Ae.FeedChild,action:"feeding",key:"h",targetEntity:f})}const a=ke(n,e,"human",Oi,f=>oo(n,f,e));a&&r.push({type:Ae.Attack,action:"attacking",key:"q",targetEntity:a});const l=ke(n,e,"prey",Oi,()=>!0);l&&r.push({type:Ae.HuntPrey,action:"attacking",key:"q",targetEntity:l});const c=ke(n,e,"predator",Oi,()=>!0);return c&&r.push({type:Ae.DefendAgainstPredator,action:"attacking",key:"q",targetEntity:c}),n.food.filter(f=>f.type===ei.Berry).length>=gs&&r.push({type:Ae.Plant,action:"planting",key:"b"}),n.leaderId===n.id&&!n.isCallingToAttack&&Xd(n,e,d0).length>0&&r.push({type:Ae.CallToAttack,action:"idle",key:"v"}),Zd(n,e).canSplit&&r.push({type:Ae.TribeSplit,action:"idle",key:"k"}),n.leaderId===n.id&&!n.isCallingToFollow&&r.push({type:Ae.FollowMe,action:"idle",key:"c"}),r}const oo=(e,n,r)=>{var o,a,l,c;if(e.id===n.id)return!1;if(e.leaderId&&!n.leaderId)return!0;if(e.leaderId===n.leaderId)return!1;if(e.leaderId&&n.leaderId){const f=(a=(o=r.entities.entities.get(e.leaderId))==null?void 0:o.diplomacy)==null?void 0:a.get(n.leaderId),g=(c=(l=r.entities.entities.get(n.leaderId))==null?void 0:l.diplomacy)==null?void 0:c.get(e.leaderId);return f===Ft.Hostile||g===Ft.Hostile}return!1},ur=(e,n,r)=>{if(e.id===n.id||e.gender===n.gender||!e.isAdult||!n.isAdult||e.hunger>=lr||n.hunger>=lr||(e.procreationCooldown||0)>0||(n.procreationCooldown||0)>0||oo(e,n,r))return!1;const o=e.gender==="female"?e:n;return!(o.isPregnant||o.age>i0)},eE={id:cl,update:(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:a}=o,l=o.deltaTime*(Yt/jt);if(r.age+=l,r.age>=r.lifespan)return{nextState:fs,data:{...e,enteredAt:a.time,previousState:cl}};const c=jd(r.position,r.spreadRadius,a.mapDimensions.width,a.mapDimensions.height);return to(c,a,15)||Gl(a.entities,c,a.time),{nextState:nr,data:{...e,enteredAt:a.time,previousState:cl}}},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},tE={id:fs,update:e=>({nextState:fs,data:e}),onEnter:(e,n)=>(Ps(e.updateContext.gameState.entities,e.entity.id),{...n,enteredAt:e.updateContext.gameState.time})},nE=[yw,Aw,eE,tE],St="humanIdle",tr="humanMoving",es="humanEating",Bl="humanGathering",Ts="humanProcreating",xn="humanAttacking",fl="humanPlanting",iE={id:St,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="attacking"&&r.attackTargetId?{nextState:xn,data:{...e,enteredAt:o.gameState.time,previousState:St,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:(r.hunger>=e0?(r.debuffs=r.debuffs.filter(a=>a.type!=="slow"),r.debuffs.push({type:"slow",startTime:o.gameState.time,duration:.1})):r.debuffs=r.debuffs.filter(a=>a.type!=="slow"),r.activeAction==="moving"?{nextState:tr,data:{...e,enteredAt:o.gameState.time,previousState:St,target:r.target}}:r.activeAction==="gathering"?{nextState:Bl,data:{...e,enteredAt:o.gameState.time,previousState:St,target:r.target}}:r.activeAction==="eating"?{nextState:es,data:{...e,enteredAt:o.gameState.time,previousState:St}}:r.activeAction==="planting"&&r.target?{nextState:fl,data:{...e,enteredAt:o.gameState.time,previousState:St,plantingSpot:r.target}}:{nextState:St,data:e})},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function b0(e){let n=SA;return e.hunger>=e0&&(n*=yA),e.age>=TA&&(n*=IA),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}const Zc=7.5;class rE{constructor(){Te(this,"id",tr)}update(n,r){var g;const{entity:o,updateContext:a}=r;if(o.activeAction==="attacking"&&o.attackTargetId)return{nextState:xn,data:{...n,enteredAt:a.gameState.time,previousState:tr,attackTargetId:o.attackTargetId,attackStartTime:a.gameState.time}};if(o.activeAction!=="moving")return{nextState:St,data:{...n,enteredAt:a.gameState.time,previousState:tr}};let l;if(typeof o.target=="object"?l=o.target:typeof o.target=="number"&&(l=(g=r.updateContext.gameState.entities.entities.get(o.target))==null?void 0:g.position),!l&&(o.direction.x!==0||o.direction.y!==0)&&(l={x:o.position.x+o.direction.x*Zc*2,y:o.position.y+o.direction.y*Zc*2}),!l)return{nextState:St,data:{...n,enteredAt:a.gameState.time,previousState:tr}};const c=ze(o.position,l,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=qe(c),o.acceleration=b0(o),V(o.position,l,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)<Zc?{nextState:St,data:{...n,enteredAt:a.gameState.time,previousState:tr}}:{nextState:tr,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}}const oE=new rE,sE={id:es,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction!=="eating"?{nextState:St,data:{...e,enteredAt:o.gameState.time,previousState:es}}:(r.food.length>0&&(!r.eatingCooldownTime||o.gameState.time>=r.eatingCooldownTime)&&r.hunger>Fi&&(r.hunger=Math.max(0,r.hunger-Fi),r.food.pop(),r.eatingCooldownTime=o.gameState.time+1,Me(o,Ie.Eat,r.position),(!r.lastEatingEffectTime||o.gameState.time-r.lastEatingEffectTime>2)&&(Ne(o.gameState,ae.Eating,r.position,xe,r.id),r.lastEatingEffectTime=o.gameState.time)),r.hunger<=0||r.food.length<=0?{nextState:St,data:{...e,enteredAt:o.gameState.time,previousState:es}}:{nextState:es,data:e})},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};class aE{constructor(){Te(this,"id",Bl)}update(n,r){return r.entity.activeAction!=="gathering"?{nextState:"humanIdle",data:{...n,enteredAt:r.updateContext.gameState.time,previousState:this.id}}:{nextState:this.id,data:n}}}const lE=new aE,uE=(e,n)=>(n.procreationEndTime=e.updateContext.gameState.time+(n.duration||2),n),cE=(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:a}=o;if(a.time<(e.procreationEndTime||0))return{nextState:Ts,data:e};const l=a.entities.entities.get(e.partnerId);if(l&&l.type==="human"&&!l.isPregnant&&r.hunger<lr&&l.hunger<lr&&!r.procreationCooldown&&!l.procreationCooldown){const c=r.gender==="female"?r:l.gender==="female"?l:void 0,f=r.gender==="male"?r:l.gender==="male"?l:void 0;c&&f&&(c.isPregnant=!0,c.gestationTime=_A,c.fatherId=f.id,r.procreationCooldown=Tp,l.procreationCooldown=Tp,Me(o,Ie.Procreate,c.position))}return r.activeAction="idle",l&&(l.activeAction="idle"),{nextState:St,data:{...e,enteredAt:a.time,previousState:Ts}}},dE={id:Ts,onEnter:uE,update:cE},fE={id:xn,onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time,attackStartTime:e.updateContext.gameState.time}),update:(e,n)=>{if(n.entity.activeAction!=="attacking"||!n.entity.attackTargetId)return n.entity.activeAction="idle",{nextState:St,data:{...e}};const r=n.updateContext.gameState.entities.entities.get(n.entity.attackTargetId);if(!r||r.type!=="human")return n.entity.activeAction="idle",{nextState:St,data:{...e}};const o=V(n.entity.position,r.position,n.updateContext.gameState.mapDimensions.width,n.updateContext.gameState.mapDimensions.height),a=ze(n.entity.position,r.position,n.updateContext.gameState.mapDimensions.width,n.updateContext.gameState.mapDimensions.height);return n.entity.direction=qe(a),o>Oi?n.entity.acceleration=b0(n.entity):n.entity.acceleration=0,{nextState:xn,data:e}}},hE={id:fl,update:(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:a}=o;if(a.time-e.enteredAt>=zA){if(r.food.filter(f=>f.type===ei.Berry).length>=gs){for(let g=0;g<gs;g++){const p=r.food.findIndex(m=>m.type===ei.Berry);p>-1&&r.food.splice(p,1)}const f=Gl(a.entities,e.plantingSpot,a.time);f.ownerId=r.id,f.claimedUntil=a.time+Jm}return{nextState:St,data:{...e,enteredAt:a.time,previousState:fl}}}return{nextState:fl,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},gE=[iE,oE,sE,lE,dE,fE,hE],An="preyIdle",Di="preyMoving",ts="preyGrazing",ns="preyProcreating",pE={id:An,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:Di,data:{...e,enteredAt:o.gameState.time,previousState:An,target:r.target}}:r.activeAction==="grazing"?{nextState:ts,data:{...e,enteredAt:o.gameState.time,previousState:An}}:r.activeAction==="procreating"?{nextState:ns,data:{...e,enteredAt:o.gameState.time,previousState:An}}:{nextState:An,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function mE(e){let n=ew;return e.isAdult||(n*=.7),e.hunger>=sw&&(n*=aw),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}function vE(e,n){const r=e>>16&255,o=e>>8&255,a=e&255,l=n>>16&255,c=n>>8&255,f=n&255;let g=Math.floor((r+l)/2),p=Math.floor((o+c)/2),m=Math.floor((a+f)/2);return Math.random()<.05&&(g=Math.max(0,Math.min(255,g+(Math.random()-.5)*60))),Math.random()<.05&&(p=Math.max(0,Math.min(255,p+(Math.random()-.5)*60))),Math.random()<.05&&(m=Math.max(0,Math.min(255,m+(Math.random()-.5)*60))),g<<16|p<<8|m}function Al(){const e=Math.floor(Math.random()*100)+100,n=Math.floor(Math.random()*80)+60,r=Math.floor(Math.random()*60)+20;return e<<16|n<<8|r}const qc=10;class SE{constructor(){Te(this,"id",Di)}update(n,r){var g;const{entity:o,updateContext:a}=r;if(o.activeAction!=="moving")return{nextState:An,data:{...n,enteredAt:a.gameState.time,previousState:Di}};let l;if(typeof o.target=="object"?l=o.target:typeof o.target=="number"&&(l=(g=r.updateContext.gameState.entities.entities.get(o.target))==null?void 0:g.position),!l&&(o.direction.x!==0||o.direction.y!==0)&&(l={x:o.position.x+o.direction.x*qc*2,y:o.position.y+o.direction.y*qc*2}),!l)return{nextState:An,data:{...n,enteredAt:a.gameState.time,previousState:Di}};const c=ze(o.position,l,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=qe(c),o.acceleration=mE(o),V(o.position,l,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)<qc?{nextState:An,data:{...n,enteredAt:a.gameState.time,previousState:Di}}:{nextState:Di,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}onEnter(n,r){return{...r,enteredAt:n.updateContext.gameState.time}}}const yE=new SE,AE={id:ts,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:Di,data:{...e,enteredAt:o.gameState.time,previousState:ts,target:r.target}}:r.activeAction!=="grazing"?{nextState:An,data:{...e,enteredAt:o.gameState.time,previousState:ts}}:{nextState:ts,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},TE={id:ns,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:Di,data:{...e,enteredAt:o.gameState.time,previousState:ns,target:r.target}}:r.activeAction!=="procreating"?{nextState:An,data:{...e,enteredAt:o.gameState.time,previousState:ns}}:{nextState:ns,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},IE=[pE,yE,AE,TE],Mt="predatorIdle",Pi="predatorMoving",Jn="predatorAttacking",br="predatorProcreating",sr="predatorEating",wE={id:Mt,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="eating"?{nextState:sr,data:{...e,enteredAt:o.gameState.time,previousState:Mt,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}}:r.activeAction==="attacking"&&r.attackTargetId?{nextState:Jn,data:{...e,enteredAt:o.gameState.time,previousState:Mt,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:r.activeAction==="moving"?{nextState:Pi,data:{...e,enteredAt:o.gameState.time,previousState:Mt,target:r.target}}:r.activeAction==="procreating"?{nextState:br,data:{...e,enteredAt:o.gameState.time,previousState:Mt}}:{nextState:Mt,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function z0(e){let n=cw;return e.hunger>=pw&&(n*=mw),e.isAdult||(n*=.7),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}function EE(e,n){const r=e>>16&255,o=e>>8&255,a=e&255,l=n>>16&255,c=n>>8&255,f=n&255;let g=Math.floor((r+l)/2),p=Math.floor((o+c)/2),m=Math.floor((a+f)/2);return Math.random()<.05&&(g=Math.max(0,Math.min(255,g+(Math.random()-.5)*60))),Math.random()<.05&&(p=Math.max(0,Math.min(255,p+(Math.random()-.5)*60))),Math.random()<.05&&(m=Math.max(0,Math.min(255,m+(Math.random()-.5)*60))),g<<16|p<<8|m}function Tl(){const e=Math.floor(Math.random()*60)+60,n=Math.floor(Math.random()*50)+40,r=Math.floor(Math.random()*40)+20;return e<<16|n<<8|r}const Jc=12;class _E{constructor(){Te(this,"id",Pi)}update(n,r){var g;const{entity:o,updateContext:a}=r;if(o.activeAction==="eating")return{nextState:sr,data:{...n,enteredAt:a.gameState.time,previousState:Pi,preyId:o.attackTargetId,eatingStartTime:a.gameState.time}};if(o.activeAction==="attacking"&&o.attackTargetId)return{nextState:Jn,data:{...n,enteredAt:a.gameState.time,previousState:Pi,attackTargetId:o.attackTargetId,attackStartTime:a.gameState.time}};if(o.activeAction!=="moving")return{nextState:Mt,data:{...n,enteredAt:a.gameState.time,previousState:Pi}};let l;if(typeof o.target=="object"?l=o.target:typeof o.target=="number"&&(l=(g=r.updateContext.gameState.entities.entities.get(o.target))==null?void 0:g.position),!l&&(o.direction.x!==0||o.direction.y!==0)&&(l={x:o.position.x+o.direction.x*Jc*2,y:o.position.y+o.direction.y*Jc*2}),!l)return{nextState:Mt,data:{...n,enteredAt:a.gameState.time,previousState:Pi}};const c=ze(o.position,l,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=qe(c),o.acceleration=z0(o),V(o.position,l,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)<Jc?{nextState:Mt,data:{...n,enteredAt:a.gameState.time,previousState:Pi}}:{nextState:Pi,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}onEnter(n,r){return{...r,enteredAt:n.updateContext.gameState.time}}}const CE=new _E,RE={id:Jn,update:(e,n)=>{const{entity:r,updateContext:o}=n;if(r.activeAction==="eating")return{nextState:sr,data:{...e,enteredAt:o.gameState.time,previousState:Jn,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}};if(r.activeAction!=="attacking"||!r.attackTargetId)return r.activeAction="idle",{nextState:Mt,data:{...e,enteredAt:o.gameState.time,previousState:Jn}};const a=o.gameState.entities.entities.get(r.attackTargetId);if(!a)return r.activeAction="idle",{nextState:Mt,data:{...e,enteredAt:o.gameState.time,previousState:Jn}};if(a.type==="prey"&&a.hitpoints<=0||a.type==="predator"&&a.hitpoints<=0||a.type==="human"&&a.hitpoints<=0)return r.activeAction="idle",{nextState:Mt,data:{...e,enteredAt:o.gameState.time,previousState:Jn}};const c=V(r.position,a.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height),f=ze(r.position,a.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height);return r.direction=qe(f),c>Hn?r.acceleration=z0(r):r.acceleration=0,{nextState:Jn,data:e}},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},PE={id:br,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="eating"?{nextState:sr,data:{...e,enteredAt:o.gameState.time,previousState:br,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}}:r.activeAction==="attacking"&&r.attackTargetId?{nextState:Jn,data:{...e,enteredAt:o.gameState.time,previousState:br,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:r.activeAction!=="procreating"?{nextState:Mt,data:{...e,enteredAt:o.gameState.time,previousState:br}}:{nextState:br,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},NE={id:sr,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction!=="eating"?{nextState:Mt,data:{...e,enteredAt:o.gameState.time,previousState:sr}}:{nextState:sr,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},DE=[wE,CE,RE,PE,NE],nm=[...nE,...gE,...IE,...DE];function kE(e,n,r){const o=lA(e,nm);if(!o)return cA(e),[e,n];const{nextState:a,data:l}=o.update(n,r);return uA(e,a)?[a,aA(o,a,l,r,nm)]:[a,l]}function OE(e,n,r){const{gameState:o}=n,a=r*(Yt/jt);if(e.isAdult=e.age>=Ld,e.isCallingToAttack&&e.callToAttackEndTime&&o.time>e.callToAttackEndTime&&(e.isCallingToAttack=!1,e.callToAttackEndTime=void 0),e.isCallingToFollow&&e.callToFollowEndTime&&o.time>e.callToFollowEndTime&&(e.isCallingToFollow=!1,e.callToFollowEndTime=void 0),e.movementSlowdown&&o.time>e.movementSlowdown.endTime&&(e.movementSlowdown=void 0),e.hitpoints<e.maxHitpoints){const c=1-e.hunger/100*LA,f=UA*c*a;e.hitpoints=Math.min(e.maxHitpoints,e.hitpoints+f)}if(e.hunger+=r*(jo/(Yt/jt)),e.hunger>kI&&(!e.lastHungerEffectTime||o.time-e.lastHungerEffectTime>rr*2)&&(Ne(o,ae.Hunger,e.position,rr,e.id),e.lastHungerEffectTime=o.time),e.age+=r/Ol,e.isPlayer){const c=yt(o,e).filter(f=>f.hunger>=HI);if(c.length>0){const f=c.map(g=>g.id);_d(o,{identifier:"children_starving",type:ys.ChildrenStarving,message:"Your children are starving!",duration:UI,targetEntityIds:f,highlightedEntityIds:f})}}if(e.gender==="female"&&e.isPregnant&&e.gestationTime&&(e.gestationTime-=a,e.hunger+=r*((jo*CA-jo)/(Yt/jt)),(!e.lastPregnantEffectTime||o.time-e.lastPregnantEffectTime>rr*3)&&(Ne(o,ae.Pregnant,e.position,rr,e.id),e.lastPregnantEffectTime=o.time),e.gestationTime<=0&&(x_(e,e.fatherId,n),e.isPregnant=!1,e.gestationTime=0,e.fatherId=void 0)),e.procreationCooldown&&(e.procreationCooldown-=a,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.attackCooldown&&(e.attackCooldown-=a,e.attackCooldown<0&&(e.attackCooldown=0)),e.feedParentCooldownTime&&(e.feedParentCooldownTime-=a,e.feedParentCooldownTime<0&&(e.feedParentCooldownTime=0)),e.feedChildCooldownTime&&(e.feedChildCooldownTime-=a,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0)),e.leaderMetaStrategyCooldown&&(e.leaderMetaStrategyCooldown-=a,e.leaderMetaStrategyCooldown<0&&(e.leaderMetaStrategyCooldown=0)),e.isAdult?e.radius===io&&(e.radius=pt):e.hunger+=r*((jo*RA-jo)/(Yt/jt)),e.isAdult&&e.food.length>0&&(!e.feedParentCooldownTime||e.feedParentCooldownTime<=0)){const c=[];if(e.motherId){const f=o.entities.entities.get(e.motherId);f&&c.push(f)}if(e.fatherId){const f=o.entities.entities.get(e.fatherId);f&&c.push(f)}for(const f of c)if(f.age>=r0&&f.hunger>=DA&&V(e.position,f.position,o.mapDimensions.width,o.mapDimensions.height)<=kA){e.food.pop(),f.hunger=Math.max(0,f.hunger-Fi),e.feedParentCooldownTime=OA;break}}let l;if(e.hitpoints<=0?l="killed":e.hunger>=Jt?e.food.length>0&&e.isAdult?(e.food.pop(),e.hunger=Math.max(0,e.hunger-Fi)):l="hunger":e.age>=e.maxAge&&(l="oldAge"),l){if(e.leaderId===e.id){const c=ti(yt(o,e));c?(c.leaderId=c.id,c.tribeBadge=e.tribeBadge,c.diplomacy=new Map(e.diplomacy),o.entities.entities.forEach(f=>{if(f.type==="human"&&f.leaderId===e.id){const g=f;g.leaderId=c.id}})):o.entities.entities.forEach(f=>{if(f.type==="human"&&f.leaderId===e.id){const g=f;g.leaderId=void 0,g.tribeBadge=void 0}})}if(e.isPlayer){const c=ti(yt(o,e));c?(c.isPlayer=!0,o.generationCount++):(o.gameOver=!0,o.causeOfGameOver=l,_d(o,{identifier:"no_heir",type:ys.NoHeir,message:"Your lineage has ended. You have no heir.",duration:0}))}H_(o.entities,e.position,e.gender,e.age,e.radius,e.id,o.time,e.food,e.hunger),Ps(o.entities,e.id);return}e.animationProgress===void 0&&(e.animationProgress=0),e.animationSpeed===void 0&&(e.animationSpeed=1),e.animationProgress+=r*e.animationSpeed,e.animationProgress>=1&&(e.animationProgress=0)}function ME(e,n){const r=n.gameState.time-e.timeOfDeath;e.decayProgress=Math.min(1,r/MA);const o=Math.floor(o0*(1-e.decayProgress));e.food.length>o&&e.food.splice(o),e.decayProgress>=1&&e.food.length<=0&&Ps(n.gameState.entities,e.id)}function FE(e,n,r){const o=r*(Yt/jt);e.age+=r/Ol,e.isAdult=e.age>=os;let a=qI*o;if(e.isPregnant&&(a*=1.2),e.hunger+=a,e.isPregnant&&e.gestationTime!==void 0&&(e.gestationTime-=o,e.gestationTime<=0)){const c={x:e.position.x+(Math.random()-.5)*40,y:e.position.y+(Math.random()-.5)*40};c.x=Math.max(20,Math.min(n.gameState.mapDimensions.width-20,c.x)),c.y=Math.max(20,Math.min(n.gameState.mapDimensions.height-20,c.y));const f=Math.random()<.5?"male":"female",g=e,p=e.fatherId?n.gameState.entities.entities.get(e.fatherId):void 0;let m;if(p)m=vE(g.geneCode,p.geneCode);else{m=g.geneCode;const S=Math.floor((Math.random()-.5)*4096);m=Math.max(0,Math.min(16777215,m+S))}Is(n.gameState.entities,c,f,0,R0*.5,m,e.id,e.fatherId),Ne(n.gameState,ae.Procreation,e.position,rr,e.id),Me(n,Ie.Birth,e.position),e.isPregnant=!1,e.gestationTime=0,e.procreationCooldown=12,e.fatherId=void 0}e.procreationCooldown&&e.procreationCooldown>0&&(e.procreationCooldown-=o,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.eatingCooldownTime&&e.eatingCooldownTime>n.gameState.time||(e.eatingCooldownTime=void 0),e.fleeCooldown&&e.fleeCooldown>0&&(e.fleeCooldown-=o,e.fleeCooldown<0&&(e.fleeCooldown=0)),e.feedChildCooldownTime&&e.feedChildCooldownTime>0&&(e.feedChildCooldownTime-=o,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0));let l=!1;e.hunger>=JI&&(l=!0),e.hitpoints<=0&&(l=!0),e.age>=C0&&(l=!0),l&&(B_(n.gameState.entities,e.position,e.gender,e.age,e.radius,e.id,n.gameState.time,e.geneCode),Ps(n.gameState.entities,e.id))}function UE(e,n,r){const o=r*(Yt/jt);e.age+=r/Ol,e.isAdult=e.age>=ss;let a=lw*o;if(e.isPregnant&&(a*=1.3),e.hunger+=a,e.isPregnant&&e.gestationTime!==void 0&&(e.gestationTime-=o,e.gestationTime<=0)){const c={x:e.position.x+(Math.random()-.5)*50,y:e.position.y+(Math.random()-.5)*50};c.x=Math.max(25,Math.min(n.gameState.mapDimensions.width-25,c.x)),c.y=Math.max(25,Math.min(n.gameState.mapDimensions.height-25,c.y));const f=Math.random()<.5?"male":"female",g=e,p=e.fatherId?n.gameState.entities.entities.get(e.fatherId):void 0;let m;if(p)m=EE(g.geneCode,p.geneCode);else{m=g.geneCode;const S=Math.floor((Math.random()-.5)*4096);m=Math.max(0,Math.min(16777215,m+S))}ws(n.gameState.entities,c,f,0,N0*.6,m,e.id,e.fatherId),Ne(n.gameState,ae.Procreation,e.position,rr,e.id),Me(n,Ie.Birth,e.position),e.isPregnant=!1,e.gestationTime=0,e.procreationCooldown=18,e.fatherId=void 0}e.procreationCooldown&&e.procreationCooldown>0&&(e.procreationCooldown-=o,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.attackCooldown&&e.attackCooldown>0&&(e.attackCooldown-=o,e.attackCooldown<0&&(e.attackCooldown=0)),e.huntCooldown&&e.huntCooldown>0&&(e.huntCooldown-=o,e.huntCooldown<0&&(e.huntCooldown=0)),e.feedChildCooldownTime&&e.feedChildCooldownTime>0&&(e.feedChildCooldownTime-=o,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0));let l=!1;e.hunger>=uw&&(l=!0),e.hitpoints<=0&&(l=!0),e.age>=P0&&(l=!0),l&&(G_(n.gameState.entities,e.position,e.gender,e.age,e.radius,e.id,n.gameState.time,e.geneCode),Ps(n.gameState.entities,e.id))}var Cs=(e=>(e[e.BehaviorTreeBased=0]="BehaviorTreeBased",e))(Cs||{});function ef(e,n){if(e.aiBehaviorTree&&e.aiBlackboard){const r=e.aiBlackboard.get("lastAiUpdateTime")??0;n.gameState.time-r>=ps&&(e.aiBehaviorTree.execute(e,n,e.aiBlackboard),e.aiBlackboard.set("lastAiUpdateTime",n.gameState.time))}else console.warn(`Behavior Tree AI ticked for human ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle"}function LE(e,n){switch(e.aiBlackboard&&e.aiBlackboard.cleanupOldEntries(n.gameState.time),e.aiType){case Cs.BehaviorTreeBased:default:ef(e,n);break}}function HE(e,n){e.aiBehaviorTree&&e.aiBlackboard?ef(e,n):(console.warn(`Behavior Tree AI ticked for prey ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle")}function BE(e,n){e.aiBehaviorTree&&e.aiBlackboard?ef(e,n):(console.warn(`Behavior Tree AI ticked for predator ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle")}function GE(e,n){e.forces.push(Rt(e.velocity,-.1));const r=Rt(qe(e.direction),e.acceleration);e.forces.push(r),e.debuffs.forEach(o=>{n.gameState.time-o.startTime<o.duration&&o.type==="slow"&&(e.velocity=Rt(e.velocity,.5))}),e.debuffs=e.debuffs.filter(o=>n.gameState.time-o.startTime<o.duration),e.velocity=Gn(e.velocity,e.forces.reduce(Gn,{x:0,y:0})),eo(e.velocity)<.001&&(e.velocity={x:0,y:0}),e.position=Gn(e.position,Rt(e.velocity,n.deltaTime)),e.position.x=(e.position.x%n.gameState.mapDimensions.width+n.gameState.mapDimensions.width)%n.gameState.mapDimensions.width,e.position.y=(e.position.y%n.gameState.mapDimensions.height+n.gameState.mapDimensions.height)%n.gameState.mapDimensions.height,e.forces=[],e.type==="human"?OE(e,n,n.deltaTime):e.type==="corpse"?ME(e,n):e.type==="prey"?FE(e,n,n.deltaTime):e.type==="predator"&&UE(e,n,n.deltaTime),e.type==="human"&&LE(e,n),e.type==="prey"?HE(e,n):e.type==="predator"&&BE(e,n),e.stateMachine&&(e.stateMachine=kE(...e.stateMachine,{entity:e,updateContext:n}))}var T=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.FAILURE=1]="FAILURE",e[e.RUNNING=2]="RUNNING",e[e.NOT_EVALUATED=3]="NOT_EVALUATED",e))(T||{});const im="Human Behavior",xE=1;class bE{constructor(){Te(this,"nodeData",new Map);Te(this,"pathStack",[]);Te(this,"startTimeStack",[])}nodeStart(n){this.pathStack.push(n),this.startTimeStack.push(performance.now())}nodeEnd(){if(this.startTimeStack.length===0||this.pathStack.length===0){console.error("BTProfiler: nodeEnd() called without a matching nodeStart().");return}const n=performance.now(),r=this.startTimeStack.pop(),o=n-r,a=this.pathStack.join(" > "),l=this.nodeData.get(a)??{path:a,totalTime:0,callCount:0,minTime:1/0,maxTime:-1/0};l.totalTime+=o,l.callCount++,l.minTime=Math.min(l.minTime,o),l.maxTime=Math.max(l.maxTime,o),this.nodeData.set(a,l),this.pathStack.pop()}report(n={}){const{showAll:r=!1}=n,o=Array.from(this.nodeData.values());if(o.length===0){console.log("--- Behavior Tree Profiler: No data collected. ---");return}let a=o,l="--- Behavior Tree Full Report ---";if(!r){const f=this.nodeData.get(im);if(f){const g=f.totalTime*xE/100;a=o.filter(p=>p.totalTime>g&&p.path!==im),l="--- Behavior Tree Problem Report ---"}else console.log('BTProfiler: Root node "Human Behavior" not found. Showing full report.'),l="--- Behavior Tree Full Report (Root Not Found) ---"}const c=a.sort((f,g)=>g.totalTime-f.totalTime);console.log(l),c.length>0?console.table(c.map(f=>({Path:f.path,"Total Time (ms)":f.totalTime.toFixed(3),Calls:f.callCount,"Avg Time (ms)":(f.totalTime/f.callCount).toFixed(3),"Min Time (ms)":f.minTime.toFixed(3),"Max Time (ms)":f.maxTime.toFixed(3)}))):console.log("No significant performance problems detected."),console.log("------------------------------------")}reset(){this.nodeData.clear(),this.pathStack=[],this.startTimeStack=[]}}const at=new bE;function In(e){return Array.isArray(e)?e:[e,""]}class pe{constructor(n,r,o=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");this.children=n,this.name=r,this.depth=o,this.children.forEach(a=>{a.depth=(this.depth??0)+1})}execute(n,r,o){this.name&&at.nodeStart(this.name);try{for(const a of this.children){const[l,c]=In(a.execute(n,r,o));if(l!==T.SUCCESS)return this.lastStatus=l,this.name&&o.recordNodeExecution(this.name,l,r.gameState.time,this.depth,c),l}return this.lastStatus=T.SUCCESS,this.name&&o.recordNodeExecution(this.name,T.SUCCESS,r.gameState.time,this.depth,""),T.SUCCESS}finally{this.name&&at.nodeEnd()}}}class wn{constructor(n,r,o=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");Te(this,"runningChildIndex");this.children=n,this.name=r,this.depth=o,this.children.forEach(a=>{a.depth=(this.depth??0)+1})}execute(n,r,o){this.name&&at.nodeStart(this.name);try{const a=this.runningChildIndex??0;for(let l=a;l<this.children.length;l++){const c=this.children[l],[f,g]=In(c.execute(n,r,o));if(f!==T.FAILURE){if(f===T.SUCCESS)return delete this.runningChildIndex,this.lastStatus=T.SUCCESS,this.name&&o.recordNodeExecution(this.name,T.SUCCESS,r.gameState.time,this.depth,g),T.SUCCESS;if(f===T.RUNNING)return this.runningChildIndex=l,this.lastStatus=T.RUNNING,this.name&&o.recordNodeExecution(this.name,T.RUNNING,r.gameState.time,this.depth,g),T.RUNNING}}return delete this.runningChildIndex,this.lastStatus=T.FAILURE,this.name&&o.recordNodeExecution(this.name,T.FAILURE,r.gameState.time,this.depth,""),T.FAILURE}finally{this.name&&at.nodeEnd()}}}class se{constructor(n,r,o=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");this.action=n,this.name=r,this.depth=o}execute(n,r,o){this.name&&at.nodeStart(this.name);try{const[a,l]=In(this.action(n,r,o));return this.lastStatus=a,this.name&&o.recordNodeExecution(this.name,a,r.gameState.time,this.depth,l),a}finally{this.name&&at.nodeEnd()}}}class ne{constructor(n,r,o=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");this.condition=n,this.name=r,this.depth=o}execute(n,r,o){this.name&&at.nodeStart(this.name);try{const[a,l]=In(this.condition(n,r,o)),c=a?T.SUCCESS:T.FAILURE;return this.lastStatus=c,this.name&&o.recordNodeExecution(this.name,c,r.gameState.time,this.depth,l),c}finally{this.name&&at.nodeEnd()}}}class rm{constructor(n,r,o,a=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");Te(this,"startTimeKey");this.child=n,this.timeoutDurationHours=r,this.name=o,this.depth=a,this.child.depth=(this.depth??0)+1,this.startTimeKey=`timeout_${this.name}_startTime`}execute(n,r,o){at.nodeStart(this.name);try{const a=r.gameState.time;let l=o.get(this.startTimeKey);const[c,f]=In(this.child.execute(n,r,o));if(c===T.RUNNING){l===void 0&&(o.set(this.startTimeKey,a),l=a);const g=a-l;if(g>this.timeoutDurationHours){o.delete(this.startTimeKey),this.lastStatus=T.FAILURE;const m=`Timed out after ${g.toFixed(2)}h.`;return o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,m),this.lastStatus}this.lastStatus=T.RUNNING;const p=`Running for ${g.toFixed(2)}h. ${f}`;return o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,p),this.lastStatus}return l!==void 0&&o.delete(this.startTimeKey),this.lastStatus=c,o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,f),this.lastStatus}finally{at.nodeEnd()}}}class Il{constructor(n,r,o,a=0,l){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");Te(this,"statusKey");Te(this,"timestampKey");this.child=n,this.cacheDurationHours=r,this.validityCheck=l,this.name=o,this.depth=a,this.child.depth=(this.depth??0)+1,this.statusKey=`caching_${this.name}_status`,this.timestampKey=`caching_${this.name}_timestamp`}execute(n,r,o){at.nodeStart(this.name);try{const a=r.gameState.time,l=o.get(this.statusKey),c=o.get(this.timestampKey);if(l!==void 0&&c!==void 0){const m=a-c>this.cacheDurationHours,S=this.validityCheck?this.validityCheck(n,r,o):!0;if(!m&&S){const A=(c+this.cacheDurationHours-a).toFixed(2),E=`Cache hit. Status: ${T[l]}. ${A}h left.`;return this.lastStatus=l,o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,E),this.lastStatus}}const[f,g]=In(this.child.execute(n,r,o));(f===T.SUCCESS||f===T.FAILURE)&&(o.set(this.statusKey,f),o.set(this.timestampKey,a)),this.lastStatus=f;const p=`Cache miss. Child returned ${T[f]}. ${g}`;return o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,p),this.lastStatus}finally{at.nodeEnd()}}}class cr{constructor(n,r,o,a=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");Te(this,"cooldownKey");this.cooldownDurationHours=n,this.child=r,this.name=o,this.depth=a,this.child.depth=(this.depth??0)+1,this.cooldownKey=`cooldown_${this.name}`}execute(n,r,o){at.nodeStart(this.name);try{const a=r.gameState.time,l=o.get(this.cooldownKey);if(this.child.lastStatus===T.RUNNING){const[g,p]=In(this.child.execute(n,r,o));if(this.lastStatus=g,this.name){const m=`Continuing running child. ${p}`;o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,m)}return this.lastStatus}if(l!==void 0&&a<l){const p=`Cooldown active, ${(l-a).toFixed(2)}h left`;return this.lastStatus=T.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,p),this.lastStatus}const[c,f]=In(this.child.execute(n,r,o));return(c===T.SUCCESS||c===T.RUNNING)&&o.set(this.cooldownKey,a+this.cooldownDurationHours),this.lastStatus=c,this.name&&o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,f),this.lastStatus}finally{at.nodeEnd()}}}class Ji{constructor(n,r,o,a=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");this.child=n,this.behaviorKey=r,this.name=o,this.depth=a;const l=(c,f)=>{c.depth=f,c.children?c.children.forEach(g=>l(g,f+1)):c.child&&l(c.child,f+1)};l(this.child,(this.depth??0)+1)}execute(n,r,o){this.name&&at.nodeStart(this.name);try{if(n.isPlayer&&!r.gameState.autopilotControls.behaviors[this.behaviorKey]){const f=`Player autopilot for '${this.behaviorKey}' is disabled.`;return this.lastStatus=T.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,f),this.lastStatus}const[l,c]=In(this.child.execute(n,r,o));return this.lastStatus=l,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,c),this.lastStatus}finally{this.name&&at.nodeEnd()}}}class zE{constructor(n,r,o=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");this.child=n,this.name=r,this.depth=o;const a=(l,c)=>{l.depth=c,l.children?l.children.forEach(f=>a(f,c+1)):l.child&&a(l.child,c+1)};a(this.child,(this.depth??0)+1)}execute(n,r,o){this.name&&at.nodeStart(this.name);try{if(n.isPlayer&&r.gameState.autopilotControls.isManuallyMoving)return this.lastStatus=T.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,"Manual movement active, AI blocked."),this.lastStatus;const[a,l]=In(this.child.execute(n,r,o));return this.lastStatus=a,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,l),this.lastStatus}finally{this.name&&at.nodeEnd()}}}class Qo{constructor(n,r,o=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");this.child=n,this.name=r,this.depth=o;const a=(l,c)=>{l.depth=c,l.children?l.children.forEach(f=>a(f,c+1)):l.child&&a(l.child,c+1)};a(this.child,(this.depth??0)+1)}execute(n,r,o){this.name&&at.nodeStart(this.name);try{if(n.isPlayer)return this.lastStatus=T.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,"Player controlled, AI blocked."),this.lastStatus;const[a,l]=In(this.child.execute(n,r,o));return this.lastStatus=a,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,l),this.lastStatus}finally{this.name&&at.nodeEnd()}}}function $E(e){return new pe([new ne((n,r)=>{const o=n.hunger>=Ep,a=n.food.length>0,l=!n.eatingCooldownTime||r.gameState.time>=n.eatingCooldownTime;return[!!(n.isAdult&&o&&a&&l),`${Math.floor(n.hunger-Ep)}, ${n.food.length}, ${n.eatingCooldownTime?Math.floor(n.eatingCooldownTime-r.gameState.time):""}`]},"Can Eat",e+1),new se(n=>(n.direction={x:0,y:0},n.target=void 0,n.activeAction="eating",T.RUNNING),"Eat",e+1)],"Eating",e)}function WE(e){return new pe([new ne((n,r,o)=>{if(n.isAdult&&n.hitpoints>n.maxHitpoints*h0||n.isAdult&&n.hunger>qA)return!1;const a=Pw(n.id,r.gameState);return a?(o.set("fleeThreat",a),!0):!1},"Should Flee",e+1),new se((n,r,o)=>{const a=o.get("fleeThreat");if(!a)return T.FAILURE;n.activeAction="moving";const l=ze(a.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),c=qe(l),f=Gn(n.position,Rt(c,g0));return n.target={x:(f.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(f.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},n.direction=c,T.RUNNING},"Execute Flee",e+1)],"Flee",e)}const Zo="foodSource";function YE(e){const n=new se((o,a,l)=>{const c=new Map,f=ke(o,a.gameState,"berryBush",Np,m=>{if(m.food.length===0)return!1;if(!m.ownerId||!m.claimedUntil||a.gameState.time>=m.claimedUntil)return!0;const S=a.gameState.entities.entities.get(m.ownerId);if(!S||S.leaderId===o.leaderId)return!0;const A=c.get(S.id)??V(o.position,S.position,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height);return c.set(S.id,A),A>CT}),g=ke(o,a.gameState,"corpse",Np,m=>m.food.length>0);let p=null;if(f&&g){const m=V(o.position,f.position,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height),S=V(o.position,g.position,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height);p=m<=S?f:g}else p=f||g;return p?(l.set(Zo,p),[T.SUCCESS,`Found food: ${p.type} at ${p.position.x.toFixed(0)},${p.position.y.toFixed(0)}`]):[T.FAILURE,"No food source found"]},"Find Closest Food Source",e+4),r=new se((o,a,l)=>{const c=l.get(Zo);return!c||c.food.length===0?(l.delete(Zo),[T.FAILURE,"Food source is invalid or depleted"]):V(o.position,c.position,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)<Ui?(o.activeAction="gathering",o.direction={x:0,y:0},o.target=c.id,l.delete(Zo),[T.SUCCESS,`Gathering from ${c.type}`]):(o.activeAction="moving",o.target=c.id,o.direction=Wt(o.position,c.position,a.gameState.mapDimensions),[T.RUNNING,`Moving to ${c.type}`])},"Move To Food and Gather",e+3);return new pe([new ne((o,a)=>{const l=o.food.length<o.maxFood,c=o.hunger>WA,f=yt(a.gameState,o).filter(g=>g.hunger>Hd);return[(o.isAdult&&l&&(c||f.length>0))??!1,`${c?"H":""}, ${f.length>0?" HC("+f.length+")":""}`]},"Should Gather Food",e+1),new wn([new pe([new ne((o,a,l)=>l.has(Zo),"Has Food Source?",e+2),r],"Continue Gathering Action",e+2),new pe([new Il(n,aT,"Cache Food Source Search",e+3),r],"Find New Food Source and Gather",e+2)],"Perform or Start Gathering",e+1)],"Gather Food",e)}function jE(e){return new se((n,r,o)=>(n.activeAction="idle",n.direction={x:0,y:0},n.target=void 0,o.set("wanderTarget",void 0),T.SUCCESS),"Idle",e)}const Xa="procreationWanderStartTime",om=(e,n,r)=>n.find(o=>ur(e,o,r));function VE(e){const n=new ne((l,c,f)=>{const g=Qp(l,c.gameState,Ui),p=om(l,g,c.gameState);return p?(f.set("procreationPartner",p),!0):!1},"Find Immediate Partner"),r=new se((l,c,f)=>{var p;const g=f.get("procreationPartner");return g?(l.activeAction="procreating",l.target=void 0,f.delete("procreationPartner"),f.delete(Xa),(p=l.partnerIds)!=null&&p.includes(g.id)||(l.partnerIds=l.partnerIds?[...l.partnerIds,g.id]:[g.id]),T.SUCCESS):T.FAILURE},"Start Procreating"),o=new ne((l,c,f)=>{const g=Qp(l,c.gameState,ZA),p=om(l,g,c.gameState);return p?(f.set("procreationPartner",p),!0):!1},"Locate Distant Partner"),a=new se((l,c,f)=>{const g=f.get("procreationPartner");if(!g)return T.FAILURE;if(V(l.position,g.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<Ui)return T.SUCCESS;l.activeAction="moving",l.target=g.id;const m=ze(l.position,g.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height);return l.direction=qe(m),T.RUNNING},"Move Towards Partner");return new pe([new ne(l=>!(!l.isAdult||l.gender==="female"&&l.isPregnant||l.age<wA||l.gender==="female"&&l.age>i0),"Is Fertile (age, not pregnant)",e+1),new ne(l=>l.hunger<lr,"Is Healthy (hunger)",e+1),new ne(l=>(l.procreationCooldown||0)<=0,"Is Ready (cooldown)",e+1),new wn([new pe([new ne((l,c)=>B0(l.position,c.gameState,"berryBush",QA)>=KA,"Is Environment Viable (food)",e+3),new se((l,c,f)=>(f.delete(Xa),T.SUCCESS),"Clear Wander Timer",e+3)],"Sufficient Food Path",e+2),new pe([new ne((l,c)=>{if(l.gender==="male"){const f=yt(c.gameState,l);return!ti(f)}return!1},"Is Male Without Heir",e+3),new se((l,c,f)=>{const g=f.get(Xa);if(g===void 0)return f.set(Xa,c.gameState.time),[T.FAILURE,"Starting heirless wander timer"];const p=c.gameState.time-g;return p>=EA?[T.SUCCESS,`Wandered for ${p.toFixed(1)}h, proceeding without food`]:[T.FAILURE,`Wandering for heir, ${p.toFixed(1)}h elapsed`]},"Check Wander Timer",e+3)],"Heirless Desperation Path",e+2)],"Check Environment Or Desperation",e+1),new ne((l,c,f)=>{var p;const g=f.get("procreationPartner");return g&&((p=g.partnerIds)!=null&&p.length)&&!g.partnerIds.includes(l.id)&&g.partnerIds.map(m=>c.gameState.entities.entities.get(m)).filter(m=>!!m).some(m=>V(l.position,m.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<_T)?[!1,"Partner's primary partner is too close"]:!0},"Is Partner's Primary Partner Nearby",e+1),new wn([new pe([n,r],"Procreate With Immediate Partner",e+2),new cr(rT,new pe([o,a],"Seek Distant Partner Action",e+3),"Seek Distant Partner Cooldown",e+2)],"Find Partner And Procreate",e+1)],"Procreate",e)}const Lr="attackTarget",er="homeCenter",ed=150;function XE(e){return new pe([new ne((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const{gameState:a}=r;if(n.activeAction==="attacking"&&n.attackTargetId){const c=a.entities.entities.get(n.attackTargetId);if(c&&c.hitpoints>0&&V(n.position,c.position,a.mapDimensions.width,a.mapDimensions.height)<=ed){if(o.set(Lr,c),!o.get(er)){const f=n.leaderId?Ss(n.leaderId,a):Sl(n,a).length>0?Zp(n,a):n.position;o.set(er,f)}return!0}}const l=ke(n,a,"human",ed,c=>c.hitpoints>0&&oo(n,c,a));if(l){o.set(Lr,l);const c=n.leaderId?Ss(n.leaderId,a):Sl(n,a).length>0?Zp(n,a):n.position;return o.set(er,c),!0}return o.set(Lr,void 0),o.set(er,void 0),!1},"Find Attack Target",e+1),new se((n,r,o)=>{const a=o.get(Lr),l=o.get(er);if(!a||!l)return T.FAILURE;const{gameState:c}=r;return V(n.position,l,c.mapDimensions.width,c.mapDimensions.height)>c0?(n.activeAction="idle",n.attackTargetId=void 0,o.set(Lr,void 0),o.set(er,void 0),T.FAILURE):a.hitpoints<=0||V(n.position,a.position,c.mapDimensions.width,c.mapDimensions.height)>ed?(n.activeAction==="attacking"&&(n.activeAction="idle",n.attackTargetId=void 0),o.set(Lr,void 0),o.set(er,void 0),T.SUCCESS):(n.activeAction==="attacking"&&n.attackTargetId===a.id||(n.activeAction="attacking",n.attackTargetId=a.id),T.RUNNING)},"Execute Attack",e+1)],"Attack",e)}const KE=(e,n,r)=>{const o=yt(n.gameState,e).filter(c=>!c.isAdult);if(o.length===0)return T.FAILURE;let a=null,l=Hd;for(const c of o)c.hunger>=l&&(l=c.hunger,a=c);return a?(r.set("targetChild",a),T.SUCCESS):T.FAILURE},QE=(e,n,r)=>{const o=r.get("targetChild");return o?V(e.position,o.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>Bd?(e.activeAction="moving",e.target=o.id,e.direction=Wt(e.position,o.position,n.gameState.mapDimensions),T.RUNNING):(e.activeAction="feeding",e.target=void 0,r.set("targetChild",void 0),T.SUCCESS):T.FAILURE};function ZE(e){return new pe([new ne(n=>(n.isAdult&&n.food.length>0&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child",e+1),new se(KE,"Find Hungriest Child",e+1),new se(QE,"Move To Child and Feed",e+1)],"Feed Child",e)}function qE(e){return new pe([new ne(n=>!n.isAdult&&n.hunger>=Hd,"Is Hungry Child",e+1),new se((n,r,o)=>{const a=_w(n,r.gameState);if(a.length===0)return T.FAILURE;const l=ke(n,r.gameState,"human",NA,c=>a.some(f=>f.id===c.id)&&c.food.length>0);return l?(o.set("targetParent",l),T.SUCCESS):T.FAILURE},"Find Parent With Food",e+1),new se((n,r,o)=>{const a=o.get("targetParent");if(!a)return T.FAILURE;const l=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",l<=Bd?(n.target=void 0,T.SUCCESS):(n.target=a.id,n.activeAction="moving",T.RUNNING)},"Move To Parent",e+1)],"Seek Food From Parent",e)}const Ka="plantingSpot";function JE(e){const n=new se((o,a,l)=>{const c=l.get(Ka);return!c||to(c,a.gameState,Fl,o.id)?(l.delete(Ka),[T.FAILURE,"Planting spot is invalid or now occupied"]):V(o.position,c,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)>Ui?(o.activeAction="moving",o.target=c,o.direction=Wt(o.position,c,a.gameState.mapDimensions),[T.RUNNING,"Moving to planting spot"]):(o.activeAction="planting",o.target=c,[T.RUNNING,"Planting state initiated"])},"Move To Spot and Plant",e+3),r=new se((o,a,l)=>{const c=Uw(o,a.gameState);return c?(l.set(Ka,c),[T.SUCCESS,`Found new spot at ${c.x.toFixed(0)}, ${c.y.toFixed(0)}`]):[T.FAILURE,"No suitable planting spot found"]},"Find Optimal Planting Spot",e+3);return new pe([new ne(o=>{const a=o.food.filter(c=>c.type===ei.Berry).length>=gs,l=o.hunger<YA;return(o.isAdult&&a&&l)??!1},"Can Plant",e+1),new ne((o,a)=>{const l=B0(o.position,a.gameState,"berryBush",$A),c=yt(a.gameState,o);return!(c.length===0||l>=c.length*5)},"Has Not Enough Nearby Bushes",e+1),new wn([new pe([new ne((o,a,l)=>l.has(Ka),"Has Planting Spot?",e+2),n],"Continue Planting Action",e+2),new cr(sT,r,"Find Planting Spot Cooldown",e+2)],"Perform or Start Planting",e+1)],"Plant Bush",e)}const td="enemiesNearby";function e_(e){const n=new ne(l=>l.id===l.leaderId,"Is Leader?",e+1),r=new ne(l=>!l.isCallingToAttack,"Is Not Already Calling?",e+1),o=new se((l,c,f)=>{const g=Xd(l,c.gameState,d0);return g.length>0?(f.set(td,g),T.SUCCESS):T.FAILURE},"Find Nearby Enemies",e+1),a=new wn([new pe([new ne((l,c,f)=>{const g=f.get(td);if(!g||g.length===0)return!1;const p=vs(l.id,c.gameState),m=yl(p),S=yl(g);return m>S*vT},"Is Strong Enough?",e+3),new se((l,c)=>(l.isCallingToAttack=!0,l.callToAttackEndTime=c.gameState.time+qr,Ne(c.gameState,ae.CallToAttack,l.position,qr),Me(c,Ie.CallToAttack,l.position),l.activeAction="idle",l.target=void 0,T.SUCCESS),"Issue Call to Attack",e+3)],"Attack",e+2),new se((l,c,f)=>{const g=f.get(td);if(!g||g.length===0)return T.FAILURE;const p=g.map(P=>P.position),m=Yd(p),S=ze(m,l.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height),A=qe(S),E=Gn(l.position,Rt(A,g0*2));return l.activeAction="moving",l.target={x:(E.x%c.gameState.mapDimensions.width+c.gameState.mapDimensions.width)%c.gameState.mapDimensions.width,y:(E.y%c.gameState.mapDimensions.height+c.gameState.mapDimensions.height)%c.gameState.mapDimensions.height},l.direction=A,T.SUCCESS},"Retreat",e+2)],"Attack or Retreat",e+2);return new pe([n,r,o,new cr(ST,a,"Leader Combat Cooldown",e+1)],"Leader Combat Strategy",e)}const nd="combatTarget",id="homeCenter";function t_(e){const n=new ne(c=>c.isAdult&&c.leaderId?c.id!==c.leaderId:!1,"Is Tribe Follower?",e+1),r=new ne(c=>c.hunger<jA&&c.hitpoints>=c.maxHitpoints*h0,"Is Fit for Combat?",e+1),o=new ne((c,f)=>{const g=f.gameState.entities.entities.get(c.leaderId);return!!(g!=null&&g.isCallingToAttack)},"Is Leader Calling to Attack?",e+1),a=new se((c,f,g)=>{const{gameState:p}=f,m=p.entities.entities.get(c.leaderId);if(!m)return T.FAILURE;const S=Xd(m,p,JA);if(S.length===0)return T.FAILURE;S.sort((A,E)=>{const P=V(c.position,A.position,p.mapDimensions.width,p.mapDimensions.height),I=V(c.position,E.position,p.mapDimensions.width,p.mapDimensions.height);return P-I});for(const A of S)if(Lw(m.id,A.id,p)<eT){g.set(nd,A);const P=Ss(m.id,p);return g.set(id,P),T.SUCCESS}return T.FAILURE},"Find Best Target",e+1),l=new se((c,f,g)=>{const p=g.get(nd),m=g.get(id);if(!p||!m)return T.FAILURE;const{gameState:S}=f;return V(c.position,m,S.mapDimensions.width,S.mapDimensions.height)>c0?(c.activeAction==="attacking"&&c.attackTargetId===p.id&&(c.activeAction="idle",c.attackTargetId=void 0),g.set(nd,void 0),g.set(id,void 0),T.FAILURE):((!c.lastTargetAcquiredEffectTime||f.gameState.time-c.lastTargetAcquiredEffectTime>xe*5)&&(Ne(f.gameState,ae.TargetAcquired,c.position,xe,c.id),c.lastTargetAcquiredEffectTime=f.gameState.time),c.activeAction="attacking",c.attackTargetId=p.id,c.target=void 0,T.RUNNING)},"Attack Target",e+1);return new pe([n,r,o,a,l],"Tribe Member Combat",e)}function n_(e){const n=new ne((m,S)=>{if(!m.isAdult||m.gender!=="male")return!1;const A=m.partnerIds&&m.partnerIds.length>0,E=yt(S.gameState,m).length>0;return A||E},"Is Adult Male With Family?",e+1),r=new ne((m,S)=>{var I;const A=At(S.gameState);if(A){const R=ti(yt(S.gameState,A));if((R==null?void 0:R.id)===m.id)return!1}if(!m.fatherId)return!1;const E=S.gameState.entities.entities.get(m.fatherId);return!E||((I=ti(yt(S.gameState,E)))==null?void 0:I.id)===m.id?!1:V(m.position,E.position,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height)<iT},"Is Too Close To Father?",e+1),o=new ne((m,S,A)=>A.get("territoryMoveTarget")!==void 0,"Is Moving To Territory?",e+3),a=new se((m,S,A)=>{const E=A.get("territoryMoveTarget"),P=A.get("territoryMoveStartTime");if(!E||!P)return[T.FAILURE,"Missing move data"];if(S.gameState.time-P>tT)return A.delete("territoryMoveTarget"),A.delete("territoryMoveStartTime"),[T.FAILURE,"Territory move timed out"];if(V(m.position,E,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height)<Ui)return A.delete("territoryMoveTarget"),A.delete("territoryMoveStartTime"),[T.SUCCESS,"Arrived at new territory"];m.activeAction="moving",m.target=E;const F=ze(m.position,m.target,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height);return m.direction=qe(F),[T.RUNNING,"Continuing move to territory"]},"Check Timeout & Arrival",e+3),l=new pe([o,a],"Handle In-Progress Move",e+2),c=new ne((m,S,A)=>A.get("territoryMoveTarget")===void 0,"Should Start New Move?",e+4),f=new se((m,S,A)=>{const E=jd(m.position,S.gameState.mapDimensions.width/4,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height);A.set("territoryMoveTarget",E),A.set("territoryMoveStartTime",S.gameState.time),m.activeAction="moving",m.target=E;const P=ze(m.position,m.target,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height);return m.direction=qe(P),[T.RUNNING,"Started moving to new territory"]},"Start New Territory Move",e+4),g=new pe([c,f],"Start New Territory Move Action",e+3),p=new wn([l,new cr(oT,g,"Establish Territory Cooldown",e+2)],"Establish or Continue Move",e+1);return new pe([n,r,p],"Establish Family Territory",e)}function i_(e){return new pe([new se((n,r,o)=>{const a=Rw(n,r.gameState);return a?(o.set("patriarchTarget",a),[T.SUCCESS,`Found patriarch: ${a.id}`]):(o.delete("patriarchTarget"),[T.FAILURE,"No patriarch found"])},"Find Patriarch",e+1),new se((n,r,o)=>{const a=o.get("patriarchTarget");if(!a)return[T.FAILURE,"Patriarch target missing from blackboard"];const l=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(l>u0){n.activeAction="moving",n.target=a.id;const c=ze(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(c),[T.RUNNING,`Moving to patriarch at ${l.toFixed(0)}`]}return n.activeAction="idle",n.target=void 0,n.direction={x:0,y:0},[T.SUCCESS,`Arrived at patriarch at ${l.toFixed(0)}`]},"Move Towards Patriarch",e+1)],"Follow Patriarch",e)}const rd="tribeSplitMigrationTarget";function r_(e){const n=new pe([new ne((r,o)=>{const{canSplit:a,progress:l}=Zd(r,o.gameState);return a?[!0,`Progress: ${(l??0)*100}%`]:[!1,"Cannot split"]},"Can Split Tribe?",e+2),new se((r,o,a)=>{const{gameState:l}=o;let c=a.get(rd);if(!c){if(!r.leaderId)return T.FAILURE;const g=Ss(r.leaderId,l),p=Jw(g,r,l);if(p)a.set(rd,p),c=p;else return T.FAILURE}return V(r.position,c,l.mapDimensions.width,l.mapDimensions.height)<Ui?(a.delete(rd),r.activeAction="idle",r.target=void 0,T.SUCCESS):(r.activeAction="moving",r.target=c,T.RUNNING)},"Move to New Territory",e+2),new se((r,o)=>(qd(r,o.gameState),T.SUCCESS),"Perform Tribe Split",e+2)],"Tribe Split Action",e+1);return new cr(uT,n,"Tribe Split Cooldown",e)}const Qa="jealousyAttackTarget";function o_(e){return new pe([new ne((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const a=kw(n,r.gameState,yT);return a?(o.set(Qa,a),[!0,`Partner cheating with ${a.id}`]):(o.delete(Qa),!1)},"Check for Infidelity",e+1),new se((n,r,o)=>{const a=o.get(Qa);return!a||a.hitpoints<=0?(o.delete(Qa),[T.FAILURE,"Target is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?T.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[T.RUNNING,`Attacking ${a.id}`])},"Execute Jealousy Attack",e+1)],"Jealousy Attack",e)}const Za="defendAggressor";function s_(e){return new pe([new ne((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const a=Mw(n,r.gameState,AT);return a?(o.set(Za,a),[!0,`Family member ${a.familyMember.id} attacked by ${a.aggressor.id}`]):(o.delete(Za),!1)},"Check Family Under Attack",e+1),new se((n,r,o)=>{const a=o.get(Za);return!a||a.hitpoints<=0?(o.delete(Za),[T.FAILURE,"Target invalid/dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?T.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[T.RUNNING,`Attacking aggressor ${a.id}`])},"Execute Family Defense Attack",e+1)],"Defend Family",e)}const qa="bushIntruder";function a_(e){return new pe([new ne((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const a=Ow(n,r.gameState,TT);return a?(o.set(qa,a),[!0,`Intruder ${a.id} stealing berries`]):(o.delete(qa),!1)},"Check For Intruders on Bushes",e+1),new se((n,r,o)=>{const a=o.get(qa);return!a||a.hitpoints<=0?(o.delete(qa),[T.FAILURE,"Intruder is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?T.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[T.RUNNING,`Attacking intruder ${a.id}`])},"Execute Bush Defense Attack",e+1)],"Defend Claimed Bush",e)}const Ja="desperateAttackTarget";function l_(e){return new pe([new ne(n=>n.hunger>IT,"Is Starving",e+1),new ne((n,r)=>{if(!n.isAdult)return[!1,"Not an adult"];const o=ke(n,r.gameState,"berryBush",gt,l=>l.food.length>0),a=ke(n,r.gameState,"corpse",gt,l=>l.food.length>0);return!o&&!a},"No Other Food Available",e+1),new ne((n,r,o)=>{const a=Fw(n,r.gameState);return a?(o.set(Ja,a),[!0,`Found weak target ${a.id}`]):(o.delete(Ja),!1)},"Find Weak Target",e+1),new se((n,r,o)=>{const a=o.get(Ja);return!a||a.hitpoints<=0?(o.delete(Ja),[T.FAILURE,"Target is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?T.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[T.RUNNING,`Desperately attacking ${a.id}`])},"Execute Desperate Attack",e+1)],"Desperate Attack",e)}function u_(e,n,r,o){const a=e.entities.entities.get(r.targetEntityId);return!a||!("hitpoints"in a)||a.hitpoints<=0?(e.autopilotControls.activeAutopilotAction=void 0,T.FAILURE):V(n.position,a.position,e.mapDimensions.width,e.mapDimensions.height)<=dl?(n.activeAction="attacking",n.attackTargetId=a.id,e.autopilotControls.activeAutopilotAction=void 0,T.SUCCESS):(n.activeAction="moving",n.target=a.id,n.direction=Wt(n.position,a.position,e.mapDimensions),T.RUNNING)}function c_(e){return new pe([new ne((n,r)=>n.isPlayer===!0&&!!r.gameState.autopilotControls.activeAutopilotAction,"Has Player Command",e+1),new se((n,r)=>{const{gameState:o}=r,a=o.autopilotControls.activeAutopilotAction;if(!a)return T.FAILURE;switch(a.action){case Ae.AutopilotMove:{const l=a.position;return V(n.position,l,o.mapDimensions.width,o.mapDimensions.height)<RT?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction==="moving"&&(n.activeAction="idle",n.target=void 0),T.SUCCESS):(n.activeAction="moving",n.target=l,n.direction=Wt(n.position,l,o.mapDimensions),T.RUNNING)}case Ae.AutopilotGather:{const l=o.entities.entities.get(a.targetEntityId);return!l||l.food.length===0?(o.autopilotControls.activeAutopilotAction=void 0,T.FAILURE):V(n.position,l.position,o.mapDimensions.width,o.mapDimensions.height)>Ui?(n.activeAction="moving",n.target=l.id,n.direction=Wt(n.position,l.position,o.mapDimensions),T.RUNNING):(n.activeAction="gathering",n.target=l.id,o.autopilotControls.activeAutopilotAction=void 0,T.SUCCESS)}case Ae.AutopilotAttack:return u_(o,n,a);case Ae.AutopilotProcreate:{const l=o.entities.entities.get(a.targetEntityId);return!l||l.type!=="human"||!ur(n,l,r.gameState)?(o.autopilotControls.activeAutopilotAction=void 0,T.FAILURE):V(n.position,l.position,o.mapDimensions.width,o.mapDimensions.height)<=dl?(n.activeAction="procreating",o.autopilotControls.activeAutopilotAction=void 0,T.SUCCESS):(n.activeAction="moving",n.target=l.id,n.direction=Wt(n.position,l.position,o.mapDimensions),T.RUNNING)}case Ae.AutopilotPlant:{if(n.activeAction==="planting")return T.RUNNING;const l=a.position;return to(l,o,Fl,n.id)?(o.autopilotControls.activeAutopilotAction=void 0,T.FAILURE):V(n.position,l,o.mapDimensions.width,o.mapDimensions.height)<=dl?(n.activeAction="planting",n.target=l,o.autopilotControls.activeAutopilotAction=void 0,o.hasPlayerPlantedBush=!0,T.RUNNING):(n.activeAction="moving",n.target=l,n.direction=Wt(n.position,l,o.mapDimensions),T.RUNNING)}case Ae.AutopilotFeedChild:{const l=o.entities.entities.get(a.targetEntityId);return!l||l.type!=="human"||l.isAdult||n.food.length===0?(o.autopilotControls.activeAutopilotAction=void 0,T.FAILURE):V(n.position,l.position,o.mapDimensions.width,o.mapDimensions.height)<=dl?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction="feeding",T.SUCCESS):(n.activeAction="moving",n.target=l.id,n.direction=Wt(n.position,l.position,o.mapDimensions),T.RUNNING)}case Ae.AutopilotFollowMe:{const l=o.entities.entities.get(a.targetEntityId);return!l||l.type!=="human"||l.id!==l.leaderId?(o.autopilotControls.activeAutopilotAction=void 0,T.FAILURE):V(n.position,l.position,o.mapDimensions.width,o.mapDimensions.height)<=u0?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction==="moving"&&(n.activeAction="idle"),T.SUCCESS):(n.activeAction="moving",n.target=l.id,n.direction=Wt(n.position,l.position,o.mapDimensions),T.RUNNING)}default:return o.autopilotControls.activeAutopilotAction=void 0,T.FAILURE}},"Execute Player Command",e+1)],"Player Command Handler",e)}function d_(e){return new pe([new ne(n=>!!n.leaderId&&n.leaderId!==n.id,"Is Follower",e+1),new ne((n,r)=>{if(!n.leaderId)return!1;const o=r.gameState.entities.entities.get(n.leaderId);return!!o&&o.isCallingToFollow===!0},"Is Leader Calling To Follow",e+1),new ne(n=>n.hunger<XA,"Is Not Critically Hungry",e+1),new se((n,r)=>{if(!n.leaderId)return T.FAILURE;const o=r.gameState.entities.entities.get(n.leaderId);return o?V(n.position,o.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>VA?(n.activeAction="moving",n.target=o.id,n.direction=Wt(n.position,o.position,r.gameState.mapDimensions),T.RUNNING):(n.activeAction==="moving"&&n.target===o.id&&(n.activeAction="idle",n.target=void 0),T.SUCCESS):T.FAILURE},"Execute Follow Leader",e+1)],"Follow Leader Command",e)}const sm="tribeMigrationCheckCooldown";function f_(e){const n=new pe([new ne(o=>!!o.leaderId&&o.leaderId===o.id,"Is Tribe Leader",e+2),new ne((o,a)=>{var c;const l=(c=o.aiBlackboard)==null?void 0:c.get(sm);return l?a.gameState.time-l>=Pp:!0},"Is Migration Check Cooldown Over",e+2),new se((o,a)=>{var c;(c=o.aiBlackboard)==null||c.set(sm,a.gameState.time);const l=Hw(o,a.gameState);return l?(o.isCallingToFollow=!0,o.callToFollowEndTime=a.gameState.time+ms,o.target=l,o.activeAction="moving",T.SUCCESS):T.FAILURE},"Execute Tribe Migration",e+2)],"Tribe Migration Strategy",e+1),r=new Il(n,Td,"Cache Tribe Migration",e+1);return new cr(Pp,r,"Tribe Migration Cooldown",e)}function h_(e){const n=new ne(o=>o.id===o.leaderId,"Is Leader?",e+1),r=new se((o,a)=>{var p,m,S;const{gameState:l}=a,c=vs(o.id,l),f=yl(c),g=H0(l).filter(A=>A.leaderId!==o.id);for(const A of g){const E=vs(A.leaderId,l),P=yl(E),I=((p=o.diplomacy)==null?void 0:p.get(A.leaderId))||Ft.Friendly;f>P*mT?I!==Ft.Hostile&&((m=o.diplomacy)==null||m.set(A.leaderId,Ft.Hostile)):I!==Ft.Friendly&&((S=o.diplomacy)==null||S.set(A.leaderId,Ft.Friendly))}return T.SUCCESS},"Evaluate Diplomacy",e+2);return new pe([n,new cr(cT,r,"Diplomacy Cooldown",e+1)],"Manage Diplomacy",e)}const el="huntTarget",od=120;function g_(e){return new pe([new ne((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];if(n.hunger<60)return[!1,"Not hungry enough to hunt"];if(n.food.length>=n.maxFood-2)return[!1,"Already carrying enough food"];const{gameState:a}=r;if(n.activeAction==="attacking"&&n.attackTargetId){const c=a.entities.entities.get(n.attackTargetId);if(c&&c.type==="prey"&&c.hitpoints>0&&V(n.position,c.position,a.mapDimensions.width,a.mapDimensions.height)<=od)return o.set(el,c),[!0,"Continuing hunt"]}const l=ke(n,a,"prey",od,c=>c.hitpoints>0&&(c.isAdult||!1));return l?(o.set(el,l),[!0,"Found prey to hunt"]):(o.set(el,void 0),[!1,"No prey in range"])},"Should Hunt Prey",e+1),new se((n,r,o)=>{const a=o.get(el);if(!a)return T.FAILURE;const{gameState:l}=r,c=V(n.position,a.position,l.mapDimensions.width,l.mapDimensions.height);return a.hitpoints<=0?(n.activeAction="idle",n.attackTargetId=void 0,T.SUCCESS):c>od?T.FAILURE:(n.activeAction="attacking",n.attackTargetId=a.id,n.stateMachine=[xn,{enteredAt:r.gameState.time}],T.RUNNING)},"Hunt Prey",e+1)],"Human Hunt Prey",e)}const tl="defendTarget",sd=150;function p_(e){return new pe([new ne((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult - children flee instead"];const{gameState:a}=r;if(n.activeAction==="attacking"&&n.attackTargetId){const c=a.entities.entities.get(n.attackTargetId);if(c&&c.type==="predator"&&c.hitpoints>0&&V(n.position,c.position,a.mapDimensions.width,a.mapDimensions.height)<=sd)return o.set(tl,c),[!0,"Continuing defense"]}const l=ke(n,a,"predator",sd,c=>c.hitpoints>0&&(c.isAdult||!1));if(l){const c=V(n.position,l.position,a.mapDimensions.width,a.mapDimensions.height),f=l.attackTargetId===n.id,g=c<80;if(f||g)return o.set(tl,l),[!0,"Predator threat detected"]}return o.set(tl,void 0),[!1,"No predator threat"]},"Detect Predator Threat",e+1),new se((n,r,o)=>{const a=o.get(tl);if(!a)return T.FAILURE;const{gameState:l}=r,c=V(n.position,a.position,l.mapDimensions.width,l.mapDimensions.height);return a.hitpoints<=0||c>sd*1.5?(n.activeAction="idle",n.attackTargetId=void 0,T.SUCCESS):(n.activeAction="attacking",n.attackTargetId=a.id,n.stateMachine=[xn,{enteredAt:r.gameState.time}],T.RUNNING)},"Defend Against Predator",e+1)],"Human Defend Against Predator",e)}function m_(e){return new pe([new ne((n,r,o)=>{const a=ke(n,r.gameState,"predator",Ut*2,()=>!0),l=ke(n,r.gameState,"human",Ut*2,()=>!0);let c=null,f=1/0;if(a){const g=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);g<f&&(f=g,c=a)}if(l){const g=V(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);g<f&&(f=g,c=l)}return c&&f<Ut*1.5?(o.set("fleeThreat",c),o.set("fleeDistance",f),!0):!1},"Detect Threat",e+1),new se((n,r,o)=>{const a=o.get("fleeThreat");if(!a)return T.FAILURE;n.activeAction="moving";const l=ze(a.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),c=qe(l),f=Gn(n.position,Rt(c,nw));return n.target={x:(f.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(f.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},n.direction=c,n.fleeCooldown=r.gameState.time+2,T.RUNNING},"Execute Flee",e+1)],"Prey Flee",e)}function v_(e){return new pe([new ne((n,r,o)=>{if(n.hunger<=30||n.eatingCooldownTime&&n.eatingCooldownTime>r.gameState.time)return!1;const a=ke(n,r.gameState,"berryBush",Ut*10,l=>l.food.length>0);return a?V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=Ut?(o.set("grazingTarget",a),!0):(o.set("grazingTarget",a),o.set("needToMoveToTarget",!0),!0):!1},"Find Berry Bush",e+1),new se((n,r,o)=>{const a=o.get("grazingTarget"),l=o.get("needToMoveToTarget");if(!a)return T.FAILURE;const c=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Ut)return n.activeAction="grazing",n.target=a.id,n.direction={x:0,y:0},o.delete("needToMoveToTarget"),T.RUNNING;if(l||c>Ut){n.activeAction="moving",n.target=a.id;const f=Wt(n.position,a.position,r.gameState.mapDimensions);return n.direction=f,T.RUNNING}return T.FAILURE},"Move to Bush or Graze",e+1)],"Prey Graze",e)}function S_(e){const n=new ne((l,c,f)=>{const g=ke(l,c.gameState,"prey",Ut,p=>p.id!==l.id&&p.gender!==l.gender&&!!p.isAdult&&p.age>=os&&p.age<=jc&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return g?(f.set("procreationPartner",g),!0):!1},"Find Immediate Partner",e+2),r=new se((l,c,f)=>{const g=f.get("procreationPartner");return g?(l.activeAction="procreating",l.target=g.id,l.direction={x:0,y:0},f.delete("procreationPartner"),T.SUCCESS):T.FAILURE},"Start Procreating",e+2),o=new ne((l,c,f)=>{const g=ke(l,c.gameState,"prey",Ut*10,p=>p.id!==l.id&&p.gender!==l.gender&&!!p.isAdult&&p.age>=os&&p.age<=jc&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return g?(f.set("procreationPartner",g),!0):!1},"Locate Distant Partner",e+2),a=new se((l,c,f)=>{const g=f.get("procreationPartner");if(!g)return T.FAILURE;if(V(l.position,g.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<=Ut)return T.SUCCESS;l.activeAction="moving",l.target=g.id;const m=ze(l.position,g.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height);return l.direction=qe(m),T.RUNNING},"Move Towards Partner",e+2);return new pe([new ne(l=>!!(l.isAdult&&!l.isPregnant&&l.age>=os&&l.age<=jc&&l.hunger<200&&(!l.procreationCooldown||l.procreationCooldown<=0)),"Is Fertile and Ready",e+1),new wn([new pe([n,r],"Procreate With Immediate Partner",e+2),new pe([o,a],"Seek Distant Partner",e+2)],"Find Partner And Procreate",e+1)],"Prey Procreate",e)}const y_=(e,n,r)=>{const o=n.gameState.search.prey.byProperty("motherId",e.id).filter(c=>!c.isAdult&&c.type==="prey");if(o.length===0)return T.FAILURE;let a=null,l=Ll;for(const c of o)c.hunger>=l&&(l=c.hunger,a=c);return a?(r.set("targetChild",a),T.SUCCESS):T.FAILURE},A_=(e,n,r)=>{const o=r.get("targetChild");return o?V(e.position,o.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>ro?(e.activeAction="moving",e.target=o.id,e.direction=Wt(e.position,o.position,n.gameState.mapDimensions),T.RUNNING):(e.activeAction="feeding",e.target=void 0,r.set("targetChild",void 0),T.SUCCESS):T.FAILURE};function T_(e){return new pe([new ne(n=>(n.isAdult&&n.gender==="female"&&n.hunger<80&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child (Female Only)",e+1),new se(y_,"Find Hungriest Prey Child",e+1),new se(A_,"Move To Child and Feed",e+1)],"Feed Prey Child",e)}function I_(e){return new pe([new ne(n=>!n.isAdult&&n.hunger>=Ll,"Is Hungry Prey Child",e+1),new se((n,r,o)=>{if(!n.motherId)return T.FAILURE;const a=r.gameState.entities.entities.get(n.motherId);return a?(o.set("targetParent",a),T.SUCCESS):T.FAILURE},"Find Female Parent",e+1),new se((n,r,o)=>{const a=o.get("targetParent");if(!a)return T.FAILURE;const l=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",l<=ro?(n.target=void 0,T.SUCCESS):(n.target=a.id,n.activeAction="moving",T.RUNNING)},"Move To Female Parent",e+1)],"Seek Food From Female Parent",e)}function w_(e){return new pe([new ne((n,r,o)=>{if(n.hunger<=50||n.huntCooldown&&n.huntCooldown>0)return!1;const a=ke(n,r.gameState,"prey",Gr*10,l=>l.hitpoints>0);if(a){const l=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(l<=Gr)return o.set("huntTarget",a),!0;if(l<=Gr*10)return o.set("huntTarget",a),o.set("needToApproach",!0),!0}return!1},"Find Prey Target",e+1),new se((n,r,o)=>{const a=o.get("huntTarget"),l=o.get("needToApproach");if(!a||a.hitpoints<=0)return T.FAILURE;const c=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Gr)return n.activeAction="attacking",n.attackTargetId=a.id,n.target=a.id,n.direction={x:0,y:0},o.delete("needToApproach"),T.RUNNING;if(l||c>Gr){n.activeAction="moving",n.target=a.id;const f=ze(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(f),T.RUNNING}return T.FAILURE},"Hunt or Approach Prey",e+1)],"Predator Hunt",e)}function E_(e){return new pe([new ne((n,r,o)=>{const a=n.hunger>100,l=n.hitpoints<n.maxHitpoints*.5;if(!a&&!l||n.attackCooldown&&n.attackCooldown>0)return!1;const c=ke(n,r.gameState,"human",Hn*2,f=>f.hitpoints>0);if(c){const f=V(n.position,c.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(f<=Hn)return o.set("attackTarget",c),!0;if(a&&f<=Hn*2)return o.set("attackTarget",c),o.set("needToApproach",!0),!0}return!1},"Find Human Target",e+1),new se((n,r,o)=>{const a=o.get("attackTarget"),l=o.get("needToApproach");if(!a||a.hitpoints<=0)return T.FAILURE;const c=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Hn)return n.activeAction="attacking",n.attackTargetId=a.id,n.target=a.id,n.direction={x:0,y:0},o.delete("needToApproach"),T.RUNNING;if(l||c>Hn){n.activeAction="moving",n.target=a.id;const f=ze(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(f),T.RUNNING}return T.FAILURE},"Attack or Approach Human",e+1)],"Predator Attack Human",e)}function __(e){const n=new ne((l,c,f)=>{const g=ke(l,c.gameState,"predator",Mi,p=>p.id!==l.id&&p.gender!==l.gender&&!!p.isAdult&&p.age>=ss&&p.age<=Vc&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return g?(f.set("procreationPartner",g),!0):!1},"Find Immediate Partner",e+2),r=new se((l,c,f)=>{const g=f.get("procreationPartner");return g?(l.activeAction="procreating",l.target=g.id,l.direction={x:0,y:0},f.delete("procreationPartner"),T.SUCCESS):T.FAILURE},"Start Procreating",e+2),o=new ne((l,c,f)=>{const g=ke(l,c.gameState,"predator",Mi*10,p=>p.id!==l.id&&p.gender!==l.gender&&!!p.isAdult&&p.age>=ss&&p.age<=Vc&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return g?(f.set("procreationPartner",g),!0):!1},"Locate Distant Partner",e+2),a=new se((l,c,f)=>{const g=f.get("procreationPartner");if(!g)return T.FAILURE;if(V(l.position,g.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<=Mi)return T.SUCCESS;l.activeAction="moving",l.target=g.id;const m=ze(l.position,g.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height);return l.direction=qe(m),T.RUNNING},"Move Towards Partner",e+2);return new pe([new ne(l=>!!(l.isAdult&&!l.isPregnant&&l.age>=ss&&l.age<=Vc&&l.hunger<200&&(!l.procreationCooldown||l.procreationCooldown<=0)),"Is Fertile and Ready",e+1),new wn([new pe([n,r],"Procreate With Immediate Partner",e+2),new pe([o,a],"Seek Distant Partner",e+2)],"Find Partner And Procreate",e+1)],"Predator Procreate",e)}const C_=(e,n,r)=>{const o=n.gameState.search.predator.byProperty("motherId",e.id).filter(c=>!c.isAdult&&c.type==="predator");if(o.length===0)return T.FAILURE;let a=null,l=Ll;for(const c of o)c.hunger>=l&&(l=c.hunger,a=c);return a?(r.set("targetChild",a),T.SUCCESS):T.FAILURE},R_=(e,n,r)=>{const o=r.get("targetChild");return o?V(e.position,o.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>ro?(e.activeAction="moving",e.target=o.id,e.direction=Wt(e.position,o.position,n.gameState.mapDimensions),T.RUNNING):(e.activeAction="feeding",e.target=void 0,r.set("targetChild",void 0),T.SUCCESS):T.FAILURE};function P_(e){return new pe([new ne(n=>(n.isAdult&&n.gender==="female"&&n.hunger<90&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child (Female Only)",e+1),new se(C_,"Find Hungriest Predator Child",e+1),new se(R_,"Move To Child and Feed",e+1)],"Feed Predator Child",e)}function N_(e){return new pe([new ne(n=>!n.isAdult&&n.hunger>=Ll,"Is Hungry Predator Child",e+1),new se((n,r,o)=>{if(!n.motherId)return T.FAILURE;const a=r.gameState.entities.entities.get(n.motherId);return a?(o.set("targetParent",a),T.SUCCESS):T.FAILURE},"Find Female Parent",e+1),new se((n,r,o)=>{const a=o.get("targetParent");if(!a)return T.FAILURE;const l=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",l<=ro?(n.target=void 0,T.SUCCESS):(n.target=a.id,n.activeAction="moving",T.RUNNING)},"Move To Female Parent",e+1)],"Seek Food From Female Parent",e)}function $0(e){return new se((n,r,o)=>{n.activeAction="idle";let a=o.get("wanderTarget"),l=o.get("wanderStartTime");const c=r.gameState.time;if(!a||!l||c-l>2){const f=Math.random()*2*Math.PI,g=50+Math.random()*100,p={x:Math.cos(f),y:Math.sin(f)},m=Gn(n.position,Rt(p,g));a={x:(m.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(m.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},o.set("wanderTarget",a),o.set("wanderStartTime",c)}if(a){n.target=a;let f=a.x-n.position.x,g=a.y-n.position.y;const p=r.gameState.mapDimensions.width,m=r.gameState.mapDimensions.height;Math.abs(f)>p/2&&(f=f>0?f-p:f+p),Math.abs(g)>m/2&&(g=g>0?g-m:g+m);const S=qe({x:f,y:g});n.direction=S}return T.SUCCESS},"Animal Wander",e)}function D_(e){return new pe([new ne((n,r,o)=>{if(n.hunger>90||n.hitpoints<n.maxHitpoints*.3||n.activeAction==="grazing"||n.activeAction==="procreating")return!1;const a=r.gameState.entities.entities.values(),l=[];for(const c of a)if(c.type==="prey"&&c.id!==n.id){const f=c;f.hitpoints>0&&f.isAdult&&V(n.position,f.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=Ut*5&&l.push(f)}if(l.length>=2){let c=0,f=0;for(const m of l)c+=m.position.x,f+=m.position.y;c/=l.length,f/=l.length;const g={x:c,y:f};if(V(n.position,g,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Ut*2)return o.set("herdCenter",g),o.set("herdSize",l.length),!0}return!1},"Find Herd",e+1),new se((n,r,o)=>{const a=o.get("herdCenter");if(!a)return T.FAILURE;if(V(n.position,a,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Ut*2){n.activeAction="moving",n.target=a;const c=ze(n.position,a,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(c),T.RUNNING}else return n.activeAction="idle",n.direction={x:0,y:0},T.SUCCESS},"Join Herd",e+1)],"Prey Herd Behavior",e)}function k_(e){return new pe([new ne((n,r,o)=>{if(n.hunger>100||n.hitpoints<n.maxHitpoints*.4||n.activeAction==="attacking"||n.activeAction==="procreating")return!1;const a=ke(n,r.gameState,"predator",Mi*4,l=>l.id!==n.id&&l.hitpoints>0&&l.isAdult&&n.fatherId!==void 0&&l.fatherId===n.fatherId&&l.age>=n.age||l.hitpoints>n.hitpoints);return a&&V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Mi*2?(o.set("packLeader",a),!0):!1},"Find Pack Leader",e+1),new se((n,r,o)=>{const a=o.get("packLeader");if(!a||a.hitpoints<=0)return T.FAILURE;if(V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Mi*2){n.activeAction="moving",n.target=a.id;const c=ze(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(c),T.RUNNING}else return n.activeAction="idle",n.direction={x:0,y:0},T.SUCCESS},"Follow Pack Leader",e+1)],"Predator Pack Behavior",e)}function O_(e){return new pe([new ne((n,r,o)=>{if(!n.isAdult||n.hitpoints<n.maxHitpoints*.6||n.hunger>120||n.attackCooldown&&n.attackCooldown>0)return!1;const a=ke(n,r.gameState,"predator",Xp,l=>!!(l.id!==n.id&&l.hitpoints>0&&l.isAdult&&n.fatherId!==l.fatherId&&n.fatherId!==void 0&&l.fatherId!==void 0));if(a){const l=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(l<=Hn)return o.set("territorialTarget",a),!0;if(l<=Xp)return o.set("territorialTarget",a),o.set("needToApproach",!0),!0}return!1},"Find Territorial Rival",e+1),new se((n,r,o)=>{const a=o.get("territorialTarget"),l=o.get("needToApproach");if(!a||a.hitpoints<=0)return T.FAILURE;const c=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Hn)return n.activeAction="attacking",n.attackTargetId=a.id,n.target=a.id,n.direction={x:0,y:0},o.delete("needToApproach"),T.RUNNING;if(l||c>Hn){n.activeAction="moving",n.target=a.id;const f=ze(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(f),T.RUNNING}return T.FAILURE},"Territorial Fight or Approach",e+1)],"Predator Territorial Defense",e)}function M_(){const e=new wn([WE(2),s_(2),p_(2),o_(2),a_(2),l_(2),c_(2),new Qo(e_(3),"Gated Leader Combat Strategy",2),new Qo(h_(3),"Gated Diplomacy",2),t_(2),new Ji(XE(3),"attack","Gated Attacking",2),$E(2),new Ji(g_(3),"attack","Gated Hunt Prey",2),new rm(new Ji(YE(4),"gathering","Gated Gathering",3),_p,"Timeout Gathering",2),new Ji(ZE(3),"feedChildren","Gated Feed Child",2),qE(2),new rm(new Ji(JE(4),"planting","Gated Planting",3),_p,"Timeout Planting",2),new Ji(VE(3),"procreation","Gated Procreation",2),new Il(r_(3),Td,"Cache Tribe Split",2),new Qo(f_(3),"Gated Tribe Migration",2),new Il(n_(3),Td,"Cache Establish Territory",2),new Ji(d_(3),"followLeader","Gated Follow Leader",2),new Qo(i_(2),"Gated Follow Patriarch",2),new Qo(jE(2),"Gated Idle Wander",2)],"AI Root Selector",1);return new zE(e,"Manual Control Gate",0)}function F_(){return new wn([m_(1),T_(1),I_(1),v_(1),S_(1),D_(1),$0(1)],"Prey Behavior Root",0)}function U_(){return new wn([w_(1),E_(1),P_(1),N_(1),O_(1),__(1),k_(1),$0(1)],"Predator Behavior Root",0)}class tf{constructor(){Te(this,"data",new Map);Te(this,"nodeExecutionData",new Map)}set(n,r){this.data.set(n,r)}get(n){return this.data.get(n)}delete(n){this.data.delete(n)}has(n){return this.data.has(n)}recordNodeExecution(n,r,o,a,l){const c=this.nodeExecutionData.get(n)||{lastExecuted:0,status:T.FAILURE,depth:0,debugInfo:"",executionHistory:[]},f=c.executionHistory[c.executionHistory.length-1];f&&o-(f==null?void 0:f.time)>ps&&c.executionHistory.push({time:f.time+ps,status:T.NOT_EVALUATED}),c.executionHistory.push({time:o,status:r});const g=A0/jt*Yt,p=o-g;c.executionHistory=c.executionHistory.filter(S=>S.time>=p);const m={...c,lastExecuted:o,status:r,depth:a,debugInfo:l};this.nodeExecutionData.set(n,m)}getNodeExecutionData(){return this.nodeExecutionData}cleanupOldEntries(n){const r=nT,o=[];for(const[a,l]of this.nodeExecutionData.entries())n-l.lastExecuted>r&&o.push(a);for(const a of o)this.nodeExecutionData.delete(a)}}function L_(e){e.gameState.entities.entities.forEach(r=>{GE(r,e)})}function W0(){return{entities:new Map,nextEntityId:1}}function Rs(e,n,r){const o={id:e.nextEntityId++,type:n,velocity:{x:0,y:0},direction:{x:0,y:0},acceleration:0,forces:[],debuffs:[],...r};return e.entities.set(o.id,o),o}function Gl(e,n,r){return Rs(e,"berryBush",{position:n,radius:Ad,food:Array.from({length:fA},()=>({type:ei.Berry})).map(a=>({...a,id:e.nextEntityId++})),maxFood:dA,lifespan:gA,age:0,spreadChance:pA,spreadRadius:Ad,timeSinceLastBerryRegen:0,timeSinceLastSpreadAttempt:0,timeSinceLastHarvest:0,stateMachine:[rs,{enteredAt:r,previousState:void 0}]})}function wl(e,n,r,o,a=!1,l=AA,c=n0,f,g,p=[],m,S){const A=l>=Ld;return Rs(e,"human",{position:n,radius:A?pt:io,hunger:c,hitpoints:Ip,maxHitpoints:Ip,age:l,gender:o,isPlayer:a,food:[],maxFood:t0,maxAge:hs,isAdult:A,isPregnant:!1,gestationTime:0,procreationCooldown:0,attackCooldown:0,motherId:f,fatherId:g,ancestorIds:p,stateMachine:[St,{enteredAt:r,previousState:void 0}],leaderId:m,tribeBadge:S,aiType:Cs.BehaviorTreeBased,aiBehaviorTree:M_(),aiBlackboard:new tf})}function nf(e,n,r,o,a,l,c,f,g,p,m){let S,A;switch(c){case"human":S=o0,A=lr;break;case"prey":S=2,A=120;break;case"predator":S=4,A=140;break}return Rs(e,"corpse",{position:n,radius:a,gender:r,age:o,originalEntityId:l,originalEntityType:c,timeOfDeath:f,decayProgress:0,geneCode:m,food:[...Array.from({length:Math.max(S*Math.max(A-p,0)/A,1)},()=>({type:ei.Meat})),...g].map(P=>({...P,id:e.nextEntityId++})),stateMachine:void 0})}function H_(e,n,r,o,a,l,c,f,g){return nf(e,n,r,o,a,l,"human",c,f,g)}function B_(e,n,r,o,a,l,c,f){return nf(e,n,r,o,a,l,"prey",c,[],0,f)}function G_(e,n,r,o,a,l,c,f){return nf(e,n,r,o,a,l,"predator",c,[],0,f)}function x_(e,n,r){const o=n?r.gameState.entities.entities.get(n):void 0,a=[...e.ancestorIds||[],e.id],l=o?[...o.ancestorIds||[],o.id]:[],c=[...a,...l],f=[...new Set(c)],g=f.slice(Math.max(f.length-mA,0)),p=Math.random()<.5?"male":"female",m=Gn(e.position,{x:5,y:5}),S=wl(r.gameState.entities,m,r.gameState.time,p,!1,0,n0/2,e.id,n,g,(o==null?void 0:o.leaderId)??e.leaderId,(o==null?void 0:o.tribeBadge)??e.tribeBadge);return Me(r,Ie.Birth,e.position),S}function Ps(e,n){return e.entities.get(n)?(e.entities.delete(n),!0):!1}function Is(e,n,r,o=tw,a=R0,l,c,f){const g=o>=os,p=Date.now();return Rs(e,"prey",{position:n,radius:g?pt*.7:io*.7,hunger:a,hitpoints:Yp,maxHitpoints:Yp,age:o,maxAge:C0,gender:r,isAdult:g,isPregnant:!1,gestationTime:0,procreationCooldown:0,geneCode:l,motherId:c,fatherId:f,stateMachine:[An,{enteredAt:p,previousState:void 0}],aiType:Cs.BehaviorTreeBased,aiBehaviorTree:F_(),aiBlackboard:new tf})}function ws(e,n,r,o=dw,a=N0,l,c,f){const g=o>=ss,p=Date.now();return Rs(e,"predator",{position:n,radius:g?pt*.9:io*.9,hunger:a,hitpoints:Vp,maxHitpoints:Vp,age:o,maxAge:P0,gender:r,isAdult:g,isPregnant:!1,gestationTime:0,procreationCooldown:0,geneCode:l,motherId:c,fatherId:f,stateMachine:[Mt,{enteredAt:p,previousState:void 0}],aiType:Cs.BehaviorTreeBased,aiBehaviorTree:U_(),aiBlackboard:new tf})}class b_{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(n,r){let o=this.length++;for(;o>0;){const a=o-1>>1,l=this.values[a];if(r>=l)break;this.ids[o]=this.ids[a],this.values[o]=l,o=a}this.ids[o]=n,this.values[o]=r}pop(){if(this.length===0)return;const n=this.ids[0];if(this.length--,this.length>0){const r=this.ids[0]=this.ids[this.length],o=this.values[0]=this.values[this.length],a=this.length>>1;let l=0;for(;l<a;){let c=(l<<1)+1;const f=c+1;let g=this.ids[c],p=this.values[c];const m=this.values[f];if(f<this.length&&m<p&&(c=f,g=this.ids[f],p=m),p>=o)break;this.ids[l]=g,this.values[l]=p,l=c}this.ids[l]=r,this.values[l]=o}return n}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}const am=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],ad=3;class rf{static from(n,r=0){if(r%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!n||n.byteLength===void 0||n.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[o,a]=new Uint8Array(n,r+0,2);if(o!==251)throw new Error("Data does not appear to be in a Flatbush format.");const l=a>>4;if(l!==ad)throw new Error(`Got v${l} data when expected v${ad}.`);const c=am[a&15];if(!c)throw new Error("Unrecognized array type.");const[f]=new Uint16Array(n,r+2,1),[g]=new Uint32Array(n,r+4,1);return new rf(g,f,c,void 0,n,r)}constructor(n,r=16,o=Float64Array,a=ArrayBuffer,l,c=0){if(n===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(n)||n<=0)throw new Error(`Unexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+r,2),65535),this.byteOffset=c;let f=n,g=f;this._levelBounds=[f*4];do f=Math.ceil(f/this.nodeSize),g+=f,this._levelBounds.push(g*4);while(f!==1);this.ArrayType=o,this.IndexArrayType=g<16384?Uint16Array:Uint32Array;const p=am.indexOf(this.ArrayType),m=g*4*this.ArrayType.BYTES_PER_ELEMENT;if(p<0)throw new Error(`Unexpected typed array class: ${o}.`);l&&l.byteLength!==void 0&&!l.buffer?(this.data=l,this._boxes=new this.ArrayType(this.data,c+8,g*4),this._indices=new this.IndexArrayType(this.data,c+8+m,g),this._pos=g*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1]):(this.data=new a(8+m+g*this.IndexArrayType.BYTES_PER_ELEMENT),this._boxes=new this.ArrayType(this.data,8,g*4),this._indices=new this.IndexArrayType(this.data,8+m,g),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(this.data,0,2).set([251,(ad<<4)+p]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=n),this._queue=new b_}add(n,r,o=n,a=r){const l=this._pos>>2,c=this._boxes;return this._indices[l]=l,c[this._pos++]=n,c[this._pos++]=r,c[this._pos++]=o,c[this._pos++]=a,n<this.minX&&(this.minX=n),r<this.minY&&(this.minY=r),o>this.maxX&&(this.maxX=o),a>this.maxY&&(this.maxY=a),l}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const n=this._boxes;if(this.numItems<=this.nodeSize){n[this._pos++]=this.minX,n[this._pos++]=this.minY,n[this._pos++]=this.maxX,n[this._pos++]=this.maxY;return}const r=this.maxX-this.minX||1,o=this.maxY-this.minY||1,a=new Uint32Array(this.numItems),l=65535;for(let c=0,f=0;c<this.numItems;c++){const g=n[f++],p=n[f++],m=n[f++],S=n[f++],A=Math.floor(l*((g+m)/2-this.minX)/r),E=Math.floor(l*((p+S)/2-this.minY)/o);a[c]=$_(A,E)}Cd(a,n,this._indices,0,this.numItems-1,this.nodeSize);for(let c=0,f=0;c<this._levelBounds.length-1;c++){const g=this._levelBounds[c];for(;f<g;){const p=f;let m=n[f++],S=n[f++],A=n[f++],E=n[f++];for(let P=1;P<this.nodeSize&&f<g;P++)m=Math.min(m,n[f++]),S=Math.min(S,n[f++]),A=Math.max(A,n[f++]),E=Math.max(E,n[f++]);this._indices[this._pos>>2]=p,n[this._pos++]=m,n[this._pos++]=S,n[this._pos++]=A,n[this._pos++]=E}}}search(n,r,o,a,l){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let c=this._boxes.length-4;const f=[],g=[];for(;c!==void 0;){const p=Math.min(c+this.nodeSize*4,um(c,this._levelBounds));for(let m=c;m<p;m+=4){if(o<this._boxes[m]||a<this._boxes[m+1]||n>this._boxes[m+2]||r>this._boxes[m+3])continue;const S=this._indices[m>>2]|0;c>=this.numItems*4?f.push(S):(l===void 0||l(S))&&g.push(S)}c=f.pop()}return g}neighbors(n,r,o=1/0,a=1/0,l){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let c=this._boxes.length-4;const f=this._queue,g=[],p=a*a;e:for(;c!==void 0;){const m=Math.min(c+this.nodeSize*4,um(c,this._levelBounds));for(let S=c;S<m;S+=4){const A=this._indices[S>>2]|0,E=lm(n,this._boxes[S],this._boxes[S+2]),P=lm(r,this._boxes[S+1],this._boxes[S+3]),I=E*E+P*P;I>p||(c>=this.numItems*4?f.push(A<<1,I):(l===void 0||l(A))&&f.push((A<<1)+1,I))}for(;f.length&&f.peek()&1;)if(f.peekValue()>p||(g.push(f.pop()>>1),g.length===o))break e;c=f.length?f.pop()>>1:void 0}return f.clear(),g}}function lm(e,n,r){return e<n?n-e:e<=r?0:e-r}function um(e,n){let r=0,o=n.length-1;for(;r<o;){const a=r+o>>1;n[a]>e?o=a:r=a+1}return n[r]}function Cd(e,n,r,o,a,l){if(Math.floor(o/l)>=Math.floor(a/l))return;const c=e[o+a>>1];let f=o-1,g=a+1;for(;;){do f++;while(e[f]<c);do g--;while(e[g]>c);if(f>=g)break;z_(e,n,r,f,g)}Cd(e,n,r,o,g,l),Cd(e,n,r,g+1,a,l)}function z_(e,n,r,o,a){const l=e[o];e[o]=e[a],e[a]=l;const c=4*o,f=4*a,g=n[c],p=n[c+1],m=n[c+2],S=n[c+3];n[c]=n[f],n[c+1]=n[f+1],n[c+2]=n[f+2],n[c+3]=n[f+3],n[f]=g,n[f+1]=p,n[f+2]=m,n[f+3]=S;const A=r[o];r[o]=r[a],r[a]=A}function $_(e,n){let r=e^n,o=65535^r,a=65535^(e|n),l=e&(n^65535),c=r|o>>1,f=r>>1^r,g=a>>1^o&l>>1^a,p=r&a>>1^l>>1^l;r=c,o=f,a=g,l=p,c=r&r>>2^o&o>>2,f=r&o>>2^o&(r^o)>>2,g^=r&a>>2^o&l>>2,p^=o&a>>2^(r^o)&l>>2,r=c,o=f,a=g,l=p,c=r&r>>4^o&o>>4,f=r&o>>4^o&(r^o)>>4,g^=r&a>>4^o&l>>4,p^=o&a>>4^(r^o)&l>>4,r=c,o=f,a=g,l=p,g^=r&a>>8^o&l>>8,p^=o&a>>8^(r^o)&l>>8,r=g^g>>1,o=p^p>>1;let m=e^n,S=o|65535^(m|r);return m=(m|m<<8)&16711935,m=(m|m<<4)&252645135,m=(m|m<<2)&858993459,m=(m|m<<1)&1431655765,S=(S|S<<8)&16711935,S=(S|S<<4)&252645135,S=(S|S<<2)&858993459,S=(S|S<<1)&1431655765,(S<<1|m)>>>0}function qo(e,n){if(e.length===0)return{byRect:()=>[],byRadius:()=>[],byProperty:()=>[],resetPropertyCache:()=>{}};const r=new rf(e.length),o=new Map;for(const l of e)r.add(l.position.x,l.position.y,l.position.x,l.position.y);return r.finish(),{byRect(l){return r.search(l.left,l.top,l.right,l.bottom).map(f=>e[f])},byRadius(l,c){return r.neighbors(l.x,l.y,void 0,c).map(g=>e[g])},byProperty(l,c){var f;if(!o.has(l)){const g=new Map;for(const p of e){const m=p[l];g.has(m)||g.set(m,[]),g.get(m).push(p)}o.set(l,g)}return((f=o.get(l))==null?void 0:f.get(c))||[]},resetPropertyCache(){o.clear()}}}function of(e){const n=Array.from(e.entities.entities.values()),r=n.filter(g=>g.type==="human"),o=n.filter(g=>g.type==="berryBush"),a=n.filter(g=>g.type==="corpse"),l=n.filter(g=>g.type==="prey"),c=n.filter(g=>g.type==="predator");return{...e,search:{human:qo(r),berryBush:qo(o),corpse:qo(a),prey:qo(l),predator:qo(c)}}}var kt=(e=>(e.MOVE="MOVE",e.HUNGER="HUNGER",e.EAT="EAT",e.FIND_BUSH="FIND_BUSH",e.GATHER="GATHER",e.PROCREATE="PROCREATE",e.PLANT_BUSH="PLANT_BUSH",e.AUTOPILOT="AUTOPILOT",e.ANIMALS_INTRODUCTION="ANIMALS_INTRODUCTION",e.HUNT_PREY="HUNT_PREY",e.DEFEND_FROM_PREDATORS="DEFEND_FROM_PREDATORS",e))(kt||{}),ar=(e=>(e.HUNGER_BAR="HUNGER_BAR",e.FOOD_BAR="FOOD_BAR",e.COMMAND_BUTTONS="COMMAND_BUTTONS",e))(ar||{}),Ot=(e=>(e[e.FADING_IN=0]="FADING_IN",e[e.ACTIVE=1]="ACTIVE",e[e.FADING_OUT=2]="FADING_OUT",e[e.INACTIVE=3]="INACTIVE",e))(Ot||{});const W_=[{key:kt.MOVE,title:"Movement",text:"Use WASD or Arrow Keys to move your character around the world.",condition:e=>e.hasPlayerMovedEver||e.hasPlayerEnabledAutopilot>2,isCompleted:!1},{key:kt.HUNGER,title:"Hunger",text:"Your character gets hungry over time. Watch the hunger bar!",condition:(e,n)=>n.hunger>vA,isCompleted:!1,minDisplayTime:bp,highlightedUIElements:[ar.HUNGER_BAR]},{key:kt.FIND_BUSH,title:"Find Food",text:"Look for berry bushes. They are your primary source of food.",condition:(e,n)=>!!ke(n,e,"berryBush",gt*5,o=>o.food.length>0),getTargets:(e,n)=>{const r=[];for(const o of e.entities.entities.values())o.type==="berryBush"&&o.food.length>0&&V(n.position,o.position,e.mapDimensions.width,e.mapDimensions.height)<500&&r.push(o);return r.map(o=>o.id)},isCompleted:!1,minDisplayTime:bp},{key:kt.GATHER,title:"Gather Berries",text:"Get close to a bush and press 'E' to gather berries.",condition:(e,n)=>n.food.length>0,getTargets:(e,n)=>{const r=ke(n,e,"berryBush",gt,o=>o.food.length>0);return r?[r.id]:[]},isCompleted:!1},{key:kt.EAT,title:"Eat",text:"When you are hungry and have food, press 'F' to eat.",condition:(e,n)=>n.activeAction==="eating",isCompleted:!1,highlightedUIElements:[ar.FOOD_BAR]},{key:kt.PROCREATE,title:"Procreate",text:"Find a mate and press 'R' to start a family. This is how you continue your lineage.",condition:(e,n)=>yt(e,n).length>0,getTargets:(e,n)=>{const r=ke(n,e,"human",gt,o=>ur(n,o,e));return r?[r.id]:[]},isCompleted:!1},{key:kt.PLANT_BUSH,title:"Farming",text:"You can plant new berry bushes. Carry some berries and press 'B' to plant.",condition:(e,n)=>Jd(e,n).some(o=>o.type===Ae.Plant)||e.hasPlayerPlantedBush===!0,isCompleted:!1},{key:kt.AUTOPILOT,title:"Autopilot!",text:"You can turn autopilot for specific actions, press Shift and click on the action button to enable it.",condition:e=>e.hasPlayerEnabledAutopilot>2,highlightedUIElements:[ar.COMMAND_BUTTONS],isCompleted:!1},{key:kt.ANIMALS_INTRODUCTION,title:"Wild Animals!",text:"Your world now has wild animals! Prey provide meat when hunted, but beware of predators that may attack.",condition:e=>Array.from(e.entities.entities.values()).some(r=>r.type==="prey"||r.type==="predator"),isCompleted:!1,dependsOn:kt.AUTOPILOT},{key:kt.HUNT_PREY,title:"Hunt for Meat",text:"Click on prey animals to hunt them for meat. Hunting provides more food than gathering berries!",condition:(e,n)=>{const r=ke(n,e,"prey",150);return n.hunger>40&&!!r},getTargets:(e,n)=>{const r=ke(n,e,"prey",150);return r?[r.id]:[]},isCompleted:!1,dependsOn:kt.ANIMALS_INTRODUCTION},{key:kt.DEFEND_FROM_PREDATORS,title:"Defend Against Predators",text:"Predators may attack when hungry! Click on them to fight back. Fighting together with family is more effective.",condition:(e,n)=>!!ke(n,e,"predator",120),getTargets:(e,n)=>{const r=ke(n,e,"predator",120);return r?[r.id]:[]},isCompleted:!1,dependsOn:kt.HUNT_PREY}];function Y0(){return{steps:W_.map(e=>({...e,isCompleted:!1}))}}function j0(){return{currentStepIndex:0,completedSteps:new Set,isActive:!0,transitionState:Ot.FADING_IN,transitionAlpha:0,highlightedEntityIds:new Set,stepStartTime:null,activeUIHighlights:new Set}}function Y_(e){for(let n=0;n<e.tutorial.steps.length;n++){const r=e.tutorial.steps[n];if(!r.isCompleted)if(r.dependsOn){if(e.tutorialState.completedSteps.has(r.dependsOn))return n}else return n}return null}function j_(e,n){const r=e.tutorialState;if(!r.isActive){r.transitionState=Ot.INACTIVE,r.highlightedEntityIds.clear(),r.activeUIHighlights.clear();return}const o=At(e);if(!o){r.isActive=!1,r.transitionState=Ot.INACTIVE,r.highlightedEntityIds.clear(),r.activeUIHighlights.clear();return}const a=e.tutorial.steps[r.currentStepIndex];if(!a){r.isActive=!1,r.transitionState=Ot.INACTIVE,r.highlightedEntityIds.clear(),r.activeUIHighlights.clear();return}const l=1/CI;switch(r.transitionState){case Ot.FADING_IN:r.stepStartTime===null&&(r.stepStartTime=e.time),r.transitionAlpha+=l*n,r.transitionAlpha>=1&&(r.transitionAlpha=1,r.transitionState=Ot.ACTIVE);break;case Ot.ACTIVE:{e.time-(r.stepStartTime||e.time)>=(a.minDisplayTime||0)&&a.condition(e,o)&&(a.isCompleted=!0,r.completedSteps.add(a.key),r.transitionState=Ot.FADING_OUT);break}case Ot.FADING_OUT:if(r.transitionAlpha-=l*n,r.transitionAlpha<=0){r.transitionAlpha=0,r.stepStartTime=null;const f=Y_(e);f!==null?(r.currentStepIndex=f,r.transitionState=Ot.FADING_IN):(r.isActive=!1,r.transitionState=Ot.INACTIVE)}break}r.transitionState!==Ot.FADING_OUT&&r.transitionState!==Ot.INACTIVE?(a.getTargets?r.highlightedEntityIds=new Set(a.getTargets(e,o)):r.highlightedEntityIds.clear(),a.highlightedUIElements?r.activeUIHighlights=new Set(a.highlightedUIElements):r.activeUIHighlights.clear()):(r.highlightedEntityIds.clear(),r.activeUIHighlights.clear())}function V_(){const e=W0(),n=0;for(let S=0;S<qm;S++){const A={x:Math.random()*Sn,y:Math.random()*yn};Gl(e,A,n)}const r=Sn/2,o=yn/2,a=wl(e,{x:r,y:o},n,"male",!0);wl(e,{x:r+50,y:o},n,"female",!1);for(let S=0;S<k0;S++){const A={x:r+Sn*(Math.random()-Math.random()),y:o+yn*(Math.random()-Math.random())};Is(e,A,"male",void 0,void 0,Al()),Is(e,{x:A.x+20,y:A.y},"female",void 0,void 0,Al())}const l={x:r+Sn*(Math.random()-Math.random()),y:o+yn*(Math.random()-Math.random())};ws(e,l,"male",void 0,void 0,Tl()),ws(e,{x:l.x+20,y:l.y},"female",void 0,void 0,Tl());const c=[{id:"muteButton",action:Ue.ToggleMute,currentWidth:Wr,rect:{x:0,y:0,width:0,height:0},text:"",backgroundColor:"",textColor:Yr},{id:"pauseButton",action:Ue.TogglePause,currentWidth:Wr,rect:{x:0,y:0,width:0,height:0},text:"",backgroundColor:"",textColor:Yr}],f=Y0(),g=j0(),p={time:n,entities:e,mapDimensions:{width:Sn,height:yn},generationCount:1,gameOver:!1,visualEffects:[],nextVisualEffectId:0,viewportCenter:{...a.position},isPaused:!1,autopilotControls:{behaviors:{procreation:!1,planting:!1,gathering:!1,attack:!1,feedChildren:!0,followLeader:!1},hoveredAutopilotAction:void 0,activeAutopilotAction:void 0,isManuallyMoving:!1},hasPlayerMovedEver:!1,hasPlayerPlantedBush:!1,hasPlayerEnabledAutopilot:0,masterVolume:_0,isMuted:!1,uiButtons:c,tutorial:f,tutorialState:g,hoveredButtonId:void 0,mousePosition:{x:0,y:0},notifications:[{id:"welcome",type:ys.Hello,message:"Welcome to the game!",duration:50,targetEntityIds:[a.id],highlightedEntityIds:[a.id],timestamp:0,isDismissed:!1,creationTime:Date.now()}]},m=of(p);return console.log("Game world initialized:",m),m}function X_(){const e=W0(),n=0;for(let c=0;c<qm;c++){const f={x:Math.random()*Sn,y:Math.random()*yn};Gl(e,f,n)}for(let c=0;c<MI;c++){const f={x:Math.random()*Sn,y:Math.random()*yn},g=Math.random()<.5?"male":"female";wl(e,f,n,g,!1)}for(let c=0;c<k0;c++){const f={x:Math.random()*Sn,y:Math.random()*yn};Is(e,f,"male",void 0,void 0,Al()),Is(e,{x:f.x+20,y:f.y},"female",void 0,void 0,Al())}const r={x:Math.random()*Sn,y:Math.random()*yn};ws(e,r,"male",void 0,void 0,Tl()),ws(e,{x:r.x+20,y:r.y},"female",void 0,void 0,Tl());const o=Y0(),a=j0(),l={time:n,entities:e,mapDimensions:{width:Sn,height:yn},generationCount:0,gameOver:!1,visualEffects:[],nextVisualEffectId:0,viewportCenter:{x:Sn/2,y:yn/2},isPaused:!1,autopilotControls:{behaviors:{procreation:!1,planting:!1,gathering:!1,attack:!1,feedChildren:!0,followLeader:!1},hoveredAutopilotAction:void 0,activeAutopilotAction:void 0,isManuallyMoving:!1},hasPlayerMovedEver:!1,hasPlayerPlantedBush:!1,hasPlayerEnabledAutopilot:0,masterVolume:_0,isMuted:!0,uiButtons:[],tutorial:o,tutorialState:a,hoveredButtonId:void 0,mousePosition:{x:0,y:0},notifications:[]};return of(l)}const K_="humanProcreation",Q_="human",Z_="human",q_=gt,J_=(e,n,r)=>ur(e,n,r.gameState)?e.gender==="male"?e.activeAction==="procreating":e.activeAction==="procreating"&&n.activeAction==="procreating":!1,eC=(e,n,r)=>{var g,p;const{gameState:o}=r,a={x:(e.position.x+n.position.x)/2,y:(e.position.y+n.position.y)/2},l=e.gender==="male"?e:n,c=e.gender==="female"?e:n,f=(l.partnerIds||[]).length===0;if(e.stateMachine=[Ts,{partnerId:n.id,previousState:(g=e.stateMachine)==null?void 0:g[0]}],n.stateMachine=[Ts,{partnerId:e.id,previousState:(p=n.stateMachine)==null?void 0:p[0]}],e.partnerIds||(e.partnerIds=[]),e.partnerIds.includes(n.id)||e.partnerIds.push(n.id),n.partnerIds||(n.partnerIds=[]),n.partnerIds.includes(e.id)||n.partnerIds.push(e.id),f&&l.leaderId&&l.leaderId!==l.id){const m=o.entities.entities.get(l.leaderId);if(m){const S=wd(l,m),A=wd(c,m);if(!S&&!A){const E=Ed();l.leaderId=l.id,l.tribeBadge=E,l.diplomacy=new Map,c.leaderId=l.id,c.tribeBadge=E}}}else if(!e.leaderId&&!n.leaderId&&l&&c){const m=Ed();l.leaderId=l.id,l.tribeBadge=m,l.diplomacy=new Map,c.leaderId=l.id,c.tribeBadge=m}e.activeAction=void 0,Ne(o,ae.Procreation,a,rr),Ne(o,ae.Partnered,e.position,xe,e.id),Ne(o,ae.Partnered,n.position,xe,n.id),e.lastPartneredEffectTime=o.time,n.lastPartneredEffectTime=o.time,n.activeAction=void 0,Me(r,Ie.Procreate,a)},tC={id:K_,sourceType:Q_,targetType:Z_,maxDistance:q_,checker:J_,perform:eC},nC={id:"humanChildFeeding",sourceType:"human",targetType:"human",maxDistance:Bd,checker:(e,n)=>e.isAdult===!0&&e.food.length>0&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=Fi&&e.activeAction==="feeding",perform:(e,n,r)=>{e.food.pop(),n.hunger=Math.max(0,n.hunger-Fi),e.feedChildCooldownTime=PA,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(Ne(r.gameState,ae.ChildFed,n.position,xe,n.id),n.lastChildFedEffectTime=r.gameState.time),Me(r,Ie.ChildFed,n.position)}},iC={id:"human-attack",sourceType:"human",targetType:"human",maxDistance:Oi,checker:(e,n,r)=>{var l;if(((l=e.stateMachine)==null?void 0:l[0])!==xn||e.attackTargetId!==n.id||(e.attackCooldown||0)>0)return!1;const o=e.stateMachine[1];return r.gameState.time-o.attackStartTime>=s0},perform:(e,n,r)=>{const o=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),a=ww(qe(o),n.direction);if(Math.abs(a)<xA*Math.PI/180&&Math.random()<bA)Ne(r.gameState,ae.AttackDeflected,n.position,xe,n.id);else{let f=Gd;e.gender==="male"&&(f*=HA),e.isAdult||(f*=BA),(!n.isAdult||n.age>=r0)&&e.isAdult&&(f*=GA),n.hitpoints-=f,n.movementSlowdown={modifier:a0,endTime:r.gameState.time+l0},Ne(r.gameState,ae.Hit,n.position,xe,n.id);const p=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),m=Rt(p,FA);n.forces.push(m),n.hitpoints<=0?Me(r,Ie.HumanDeath,n.position):Me(r,Ie.Attack,e.position)}e.attackCooldown=Ml;const c=e.stateMachine[1];c.attackStartTime=r.gameState.time,Ne(r.gameState,ae.Attack,e.position,xe,e.id)}},rC={id:"human-collision",sourceType:"human",targetType:"human",maxDistance:pt*2,checker:(e,n,{gameState:r})=>V(e.position,n.position,r.mapDimensions.width,r.mapDimensions.height)<(e.radius+n.radius)/3,perform:(e,n,{gameState:r})=>{const o=V(e.position,n.position,r.mapDimensions.width,r.mapDimensions.height);if(o===0){e.forces.push({x:.1,y:0}),n.forces.push({x:-.1,y:0});return}const l=(e.radius+n.radius-o)*.05,c=qe(F0(e.position,n.position)),f=Rt(c,l);e.forces.push(f),n.forces.push(Rt(f,-1))}},oC={id:"humanBerryBushGather",sourceType:"human",targetType:"berryBush",maxDistance:gt,checker:(e,n,r)=>{var o;return e.isAdult&&n.food.length>0&&((o=e.stateMachine)==null?void 0:o[0])===Bl&&e.food.length<e.maxFood&&(!e.gatheringCooldownTime||e.gatheringCooldownTime<r.gameState.time)||!1},perform:(e,n,r)=>{const o=n.food.pop();o&&e.food.push(o),e.gatheringCooldownTime=r.gameState.time+1,n.timeSinceLastHarvest=r.gameState.time,n.ownerId=e.id,n.claimedUntil=r.gameState.time+Jm,Ne(r.gameState,ae.BushClaimed,n.position,xe),Me(r,Ie.Gather,e.position)}},sC={id:"corpseGather",sourceType:"human",targetType:"corpse",maxDistance:gt,checker:(e,n,r)=>{var o;return e.isAdult&&n.food.length>0&&((o=e.stateMachine)==null?void 0:o[0])===Bl&&e.food.length<e.maxFood&&(!e.gatheringCooldownTime||e.gatheringCooldownTime<r.gameState.time)||!1},perform:(e,n,r)=>{const o=n.food.pop();o&&e.food.push(o),e.gatheringCooldownTime=r.gameState.time+1,Me(r,Ie.Gather,e.position)}},aC=[oC,sC],lC={id:"prey-eat-berry-bush",sourceType:"prey",targetType:"berryBush",maxDistance:Ut,checker:(e,n,r)=>!!(e.isAdult&&n.food.length>0&&e.hunger>30&&(!e.eatingCooldownTime||e.eatingCooldownTime<r.gameState.time)),perform:(e,n,r)=>{n.food.pop()&&(e.hunger=Math.max(0,e.hunger-25),n.lifespan-=ow,n.timeSinceLastHarvest=r.gameState.time,e.eatingCooldownTime=r.gameState.time+rw,Ne(r.gameState,ae.BushClaimed,n.position,xe,e.id),Me(r,Ie.Gather,e.position))}},uC={id:"predator-hunt-prey",sourceType:"predator",targetType:"prey",maxDistance:Gr,checker:(e,n,r)=>!!(e.isAdult&&e.hunger>50&&(!e.huntCooldown||e.huntCooldown<=0)&&n.hitpoints>0),perform:(e,n,r)=>{n.hitpoints-=hw;const o=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),a=Rt(o,8);n.forces.push(a),e.huntCooldown=vw,n.hitpoints<=0?(Me(r,Ie.HumanDeath,n.position),Ne(r.gameState,ae.Hit,n.position,xe,n.id)):(Ne(r.gameState,ae.Hit,n.position,xe,n.id),n.fleeCooldown=5,Me(r,Ie.Attack,e.position)),Ne(r.gameState,ae.Attack,e.position,xe,e.id)}},cC={id:"human-hunt-prey",sourceType:"human",targetType:"prey",maxDistance:Oi,checker:(e,n,r)=>{var o;return!!(((o=e.stateMachine)==null?void 0:o[0])===xn&&e.attackTargetId===n.id&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&e.isAdult)},perform:(e,n,r)=>{let o=Gd*1.2;e.gender==="male"&&(o*=1.3),n.hitpoints-=o;const a=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),l=Rt(a,6);n.forces.push(l),e.attackCooldown=Ml,n.hitpoints<=0?(Me(r,Ie.HumanDeath,n.position),Ne(r.gameState,ae.Hit,n.position,xe,n.id)):(Ne(r.gameState,ae.Hit,n.position,xe,n.id),n.fleeCooldown=8,Me(r,Ie.Attack,e.position)),Ne(r.gameState,ae.Attack,e.position,xe,e.id)}},dC={id:"predator-attack-human",sourceType:"predator",targetType:"human",maxDistance:Hn,checker:(e,n,r)=>{var o;return!!(e.isAdult&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&(e.hunger>100||n.attackTargetId===e.id||n.attackTargetId&&((o=r.gameState.entities.entities.get(n.attackTargetId))==null?void 0:o.type)==="predator"))},perform:(e,n,r)=>{let o=fw;e.hunger>120&&(o*=1.3),n.hitpoints-=o,n.movementSlowdown={modifier:a0,endTime:r.gameState.time+l0};const a=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),l=Rt(a,7);n.forces.push(l),e.attackCooldown=gw,n.hitpoints<=0?(e.hunger=Math.max(0,e.hunger-D0),Me(r,Ie.HumanDeath,n.position),Ne(r.gameState,ae.Hit,n.position,xe,n.id)):(Ne(r.gameState,ae.Hit,n.position,xe,n.id),Me(r,Ie.Attack,e.position)),Ne(r.gameState,ae.Attack,e.position,xe,e.id)}},fC={id:"human-attack-predator",sourceType:"human",targetType:"predator",maxDistance:Oi,checker:(e,n,r)=>{var o;return!!(((o=e.stateMachine)==null?void 0:o[0])===xn&&e.attackTargetId===n.id&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&e.isAdult)},perform:(e,n,r)=>{let o=Gd*.8;e.gender==="male"&&(o*=1.2);const a=Array.from(r.gameState.entities.entities.values()).filter(f=>f.type==="human"&&f.id!==e.id).filter(f=>{const g=f;return Math.sqrt(Math.pow(g.position.x-e.position.x,2)+Math.pow(g.position.y-e.position.y,2))<100&&g.activeAction==="attacking"&&g.attackTargetId===n.id}).length;a>0&&(o*=1+a*.2),n.hitpoints-=o;const l=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),c=Rt(l,8);n.forces.push(c),e.attackCooldown=Ml,n.hitpoints<=0?(Me(r,Ie.HumanDeath,n.position),Ne(r.gameState,ae.Hit,n.position,xe,n.id)):(Ne(r.gameState,ae.Hit,n.position,xe,n.id),n.hitpoints<n.maxHitpoints*.3&&(n.hunger+=20),Me(r,Ie.Attack,e.position)),Ne(r.gameState,ae.Attack,e.position,xe,e.id)}},hC={id:"prey-procreation",sourceType:"prey",targetType:"prey",maxDistance:Ut,checker:(e,n,r)=>!!(e.isAdult&&n.isAdult&&e.gender!==n.gender&&e.id!==n.id&&!e.isPregnant&&!n.isPregnant&&e.hunger<200&&n.hunger<200&&(!e.procreationCooldown||e.procreationCooldown<=0)&&(!n.procreationCooldown||n.procreationCooldown<=0)),perform:(e,n,r)=>{const o=e.gender==="female"?e:n;o.isPregnant=!0,o.gestationTime=iw,e.procreationCooldown=jp,n.procreationCooldown=jp,Ne(r.gameState,ae.Procreation,o.position,xe,o.id),Me(r,Ie.Procreate,o.position)}},gC={id:"predator-procreation",sourceType:"predator",targetType:"predator",maxDistance:Mi,checker:(e,n,r)=>!!(e.isAdult&&n.isAdult&&e.gender!==n.gender&&e.id!==n.id&&!e.isPregnant&&!n.isPregnant&&e.hunger<200&&n.hunger<200&&(!e.procreationCooldown||e.procreationCooldown<=0)&&(!n.procreationCooldown||n.procreationCooldown<=0)),perform:(e,n,r)=>{const o=e.gender==="female"?e:n;o.isPregnant=!0,o.gestationTime=Sw,e.procreationCooldown=Kp,n.procreationCooldown=Kp,Ne(r.gameState,ae.Procreation,o.position,xe,o.id),Me(r,Ie.Procreate,o.position)}},pC={id:"preyChildFeeding",sourceType:"prey",targetType:"prey",maxDistance:ro,checker:(e,n)=>e.isAdult===!0&&e.gender==="female"&&e.hunger<80&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=vl&&e.activeAction==="feeding",perform:(e,n,r)=>{e.hunger=Math.min(120,e.hunger+10),n.hunger=Math.max(0,n.hunger-vl),e.feedChildCooldownTime=O0,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(Ne(r.gameState,ae.ChildFed,n.position,xe,n.id),n.lastChildFedEffectTime=r.gameState.time),Me(r,Ie.ChildFed,n.position)}},mC={id:"predatorChildFeeding",sourceType:"predator",targetType:"predator",maxDistance:ro,checker:(e,n)=>e.isAdult===!0&&e.gender==="female"&&e.hunger<90&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=vl&&e.activeAction==="feeding",perform:(e,n,r)=>{e.hunger=Math.min(140,e.hunger+15),n.hunger=Math.max(0,n.hunger-vl),e.feedChildCooldownTime=O0,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(Ne(r.gameState,ae.ChildFed,n.position,xe,n.id),n.lastChildFedEffectTime=r.gameState.time),Me(r,Ie.ChildFed,n.position)}},vC={id:"predator-eat-corpse",sourceType:"predator",targetType:"corpse",maxDistance:Mi,checker:(e,n,r)=>!!(e.isAdult&&e.hunger>30&&n.food.length>0&&(!e.eatingCooldownTime||e.eatingCooldownTime<=r.gameState.time)),perform:(e,n,r)=>{n.food.pop()&&(e.hunger=Math.max(0,e.hunger-D0),e.eatingCooldownTime=r.gameState.time+2,Ne(r.gameState,ae.Eating,e.position,xe,e.id),Me(r,Ie.Gather,e.position))}},SC=[rC,...aC,tC,nC,iC,lC,pC,mC,vC,uC,cC,fC,dC,hC,gC];function yC(e){const{gameState:n}=e,r=n,o=Array.from(n.entities.entities.values());for(const a of SC)for(const l of o){if(a.sourceType&&l.type!==a.sourceType)continue;const c=r.search[a.targetType].byRadius(l.position,a.maxDistance);for(const f of c){if(l.id===f.id)continue;V(l.position,f.position,n.mapDimensions.width,n.mapDimensions.height)<=a.maxDistance&&a.checker(l,f,e)&&a.perform(l,f,e)}}}function AC(e){e.visualEffects=e.visualEffects.filter(n=>e.time-n.startTime<=n.duration)}const TC=1/60;function IC(e,n){const r=At(e);r&&(e.viewportCenter=Wd(e.viewportCenter,r.position,Ud*n))}function wC(e){for(const r of e.entities.entities.values())r.isHighlighted=!1;const n=e.notifications.filter(r=>!r.isDismissed);for(const r of n)if(r.highlightedEntityIds)for(const o of r.highlightedEntityIds){const a=e.entities.entities.get(o);a&&(a.isHighlighted=!0)}}function xl(e,n){if(e.isPaused)return e;for(;n>0;){const r=of(e),o=Math.min(n,TC);if(r.gameOver)return r;const a=o*(Yt/jt);r.time+=a,IC(r,o),bw(r),wC(r),L_({gameState:r,deltaTime:o}),yC({gameState:r,deltaTime:o}),AC(r),j_(r,o),e=r,n-=o}return e}function cm(e,n,r){e.save();const{x:o,y:a,width:l,height:c}=n.rect,f=eI;if(e.beginPath(),e.moveTo(o+f,a),e.lineTo(o+l-f,a),e.quadraticCurveTo(o+l,a,o+l,a+f),e.lineTo(o+l,a+c-f),e.quadraticCurveTo(o+l,a+c,o+l-f,a+c),e.lineTo(o+f,a+c),e.quadraticCurveTo(o,a+c,o,a+c-f),e.lineTo(o,a+f),e.quadraticCurveTo(o,a,o+f,a),e.closePath(),e.fillStyle=n.isDisabled?tI:n.backgroundColor,e.fill(),n.activated){e.save();const g=(Math.sin(Date.now()/1e3*aI)+1)/2;e.strokeStyle=sI,e.lineWidth=2+g*2,e.globalAlpha=.7+g*.3,e.stroke(),e.restore()}if(n.lastActivated){const g=Date.now()-n.lastActivated;if(g<Mp){const p=1-g/Mp;e.fillStyle=iI,e.globalAlpha=p,e.fill(),e.globalAlpha=1}}r&&!n.isDisabled&&(e.fillStyle=y0,e.globalAlpha=.5,e.fill(),e.globalAlpha=1),e.fillStyle=n.isDisabled?nI:n.textColor,n.icon?(e.font=`${c*.55}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(n.icon,o+l/2,a+c/2),n.text&&(e.font=`${c*.18}px "Press Start 2P", Arial`,e.textAlign="right",e.textBaseline="bottom",e.fillText(n.text,o+l-4,a+c-2))):(e.textAlign="center",e.textBaseline="middle",e.fillText(n.text,o+l/2,a+c/2)),e.restore()}function EC(e,n,r,o){e.save(),e.font=`${Fp}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="bottom";const l=e.measureText(r).width,c=Fp,f=l+Up*2,g=c+Up*2,p=o.x-f/2,m=e.canvas.height,S=n.y<m/2?n.y+n.height-Lp:n.y-g+Lp;e.fillStyle=rI,e.fillRect(p,S,f,g),e.fillStyle=oI,e.fillText(r,o.x,S+g/2+c/2),e.restore()}function _C(e,n,r){e.save();const o=At(n),a=[{id:"fastForwardButton",action:Ue.FastForward,text:"FFWD [T]",currentWidth:Wr*1.3,backgroundColor:$a,textColor:Yr,tooltip:"Fast-forward time",rect:{x:0,y:0,width:0,height:0}},{id:"pauseButton",action:Ue.TogglePause,text:n.isPaused?"UN[P]AUSE":"[P]AUSE",backgroundColor:n.isPaused?zc:$a,currentWidth:n.isPaused?Wr*1.4:Wr*1.1,tooltip:n.isPaused?"Resume Game":"Pause Game",rect:{x:0,y:0,width:0,height:0},textColor:Yr},{id:"muteButton",action:Ue.ToggleMute,text:n.isMuted?"UN[M]UTE":"[M]UTE",backgroundColor:n.isMuted?zc:$a,tooltip:`Toggle Sound (${n.isMuted?"Muted":"Enabled"})`,currentWidth:Wr,rect:{x:0,y:0,width:0,height:0},textColor:Yr}];if(n.uiButtons.push(...a),o){const p=Jd(n,o),m=new Set(p.map(B=>B.type));let S=[{playerAction:Ae.Gather,buttonAction:Ue.CommandGather,shortcut:"E",name:"Gather",toggleKey:"gathering",condition:()=>o.isAdult===!0},{playerAction:Ae.Eat,buttonAction:Ue.CommandEat,shortcut:"F",name:"Eat"},{playerAction:Ae.Plant,buttonAction:Ue.CommandPlant,shortcut:"B",name:"Plant",toggleKey:"planting",condition:()=>o.isAdult===!0},{playerAction:Ae.Procreate,buttonAction:Ue.ToggleProcreationBehavior,shortcut:"R",name:"Procreation",toggleKey:"procreation",condition:()=>o.isAdult===!0},{playerAction:Ae.FeedChild,buttonAction:Ue.ToggleFeedChildBehavior,shortcut:"H",name:"Feed Child",toggleKey:"feedChildren",condition:()=>o.isAdult===!0},{playerAction:Ae.Attack,buttonAction:Ue.ToggleAttackBehavior,shortcut:"Q",name:"Attack",toggleKey:"attack",condition:()=>o.isAdult===!0},{playerAction:Ae.FollowMe,buttonAction:Ue.CommandFollowMe,shortcut:"C",name:"Follow Me",toggleKey:"followLeader",condition:()=>o.isAdult===!0},{playerAction:Ae.CallToAttack,buttonAction:Ue.CommandCallToAttack,shortcut:"V",name:"Call to Attack",condition:()=>o.isAdult===!0},{playerAction:Ae.TribeSplit,buttonAction:Ue.CommandTribeSplit,shortcut:"K",name:"Split Tribe",condition:()=>o.leaderId!==void 0&&o.leaderId!==o.id&&o.isAdult===!0}];S=S.filter(B=>B.condition?B.condition():!0);const A=1,E=S.length,P=E*Zi+(E-1)*Ya,I=A*Zi+(A-1)*Ya,R=(r-P)/2,F=e.canvas.height-I-20;S.forEach((B,H)=>{const $=H%E,oe=Math.floor(H/E),M=R+$*(Zi+Ya),W=F+oe*(Zi+Ya),fe=!!B.toggleKey,Ee=fe&&n.autopilotControls.behaviors[B.toggleKey],Ce=!m.has(B.playerAction),$e=!n.hasPlayerEnabledAutopilot||n.hasPlayerEnabledAutopilot<3?" (Press Shift to toggle Auto)":"",Fe=fe?`${B.name}${$e}`:B.name,we=Ee?zc:$a,ue={id:`commandButton_${B.name}`,action:B.buttonAction,rect:{x:M,y:W,width:Zi,height:Zi},icon:Hl[B.playerAction],text:B.shortcut,backgroundColor:we,textColor:Yr,currentWidth:Zi,tooltip:Fe,isDisabled:Ce,activated:Ee};n.uiButtons.push(ue)})}let l=r-$t;a.forEach(p=>{const m=$t,S=l-p.currentWidth;p.rect={x:S,y:m,width:p.currentWidth,height:qT},cm(e,p,n.hoveredButtonId===p.id),l-=p.currentWidth+JT});let c=null;n.uiButtons.filter(p=>p.id.startsWith("commandButton_")).forEach(p=>{c||(c={x:p.rect.x,y:p.rect.y,width:p.rect.width,height:p.rect.height}),c.x=Math.min(c.x,p.rect.x),c.y=Math.min(c.y,p.rect.y),c.width=Math.max(c.width,p.rect.x+p.rect.width-c.x),c.height=Math.max(c.height,p.rect.y+p.rect.height-c.y),cm(e,p,n.hoveredButtonId===p.id)});const g=n.hoveredButtonId?n.uiButtons.find(p=>p.id===n.hoveredButtonId):void 0;return g&&g.tooltip&&n.mousePosition&&EC(e,g.rect,g.tooltip,n.mousePosition),e.restore(),{commandButtonsRect:c}}function CC(e){e.save(),e.fillStyle=SI,e.fillRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle=yI,e.font=`${AI}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("PAUSED",e.canvas.width/2,e.canvas.height/2),e.restore()}const RC=25,PC=0,dm=28;function V0(e,n,r,o,a,l,c,f,g){e.save();const p=n.x-c.x+f/2,m=n.y-c.y+g/2;e.strokeStyle=o,e.lineWidth=l,e.setLineDash(a),e.beginPath(),e.arc(p,m,r+Ul,0,2*Math.PI),e.stroke(),e.restore()}function NC(e,n,r,o,a,l){if(n=n.filter(m=>m.type!==Ae.FollowMe),n.length===0)return;e.save(),n.forEach(m=>{m.targetEntity&&V0(e,m.targetEntity.position,m.targetEntity.radius,bd,zd,2,o,a,l)}),e.font=`${Jr}px "Press Start 2P", Arial`,e.fillStyle="white",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=5;const c=r.position.x-o.x+a/2,f=r.position.y-o.y+l/2;let g=0,p={};n.forEach(m=>{const S=Hl[m.type];if(m.targetEntity){p[m.targetEntity.id]=(p[m.targetEntity.id]||0)+1;const A=m.targetEntity.position.x-o.x+a/2,E=m.targetEntity.position.y-o.y+l/2,P=`${S}${m.key.toUpperCase()}`,I=E-m.targetEntity.radius-Ul-Jr/2-(p[m.targetEntity.id]-1)*dm;e.fillText(P,A,I)}else{e.textAlign="left";const A=`${S}${m.key.toUpperCase()}`,E=c+RC,I=f+PC+g*dm;e.fillText(A,E,I),g++,e.textAlign="center"}}),e.restore()}const ge=(e,n,r,o,a,l,c)=>{l==="transparent"||o<=0||a<=0||(e.fillStyle=l,e.fillRect(Math.floor(n*c),Math.floor(r*c),Math.ceil(o*c),Math.ceil(a*c)))},fm=10,hm=10,Un=6,Zn=4,nl=2,DC=5,un=4,kC=2,_t=4,OC=2,Ze=3,Hr=2,Ni=0,us=Ni+Zn-1,Dt=us,rt=us+un-1,MC="rgba(0, 0, 0, 0.4)",FC=4,UC=1,sf={name:"tribe-human-2d",referenceImage:"swos.png",description:`A 2D human character asset for the Tribe game. This includes ensuring that the unique animations for stances like 'eat' and 'procreate' do not erroneously appear in other stances, such as 'walk', which was observed in the provided rendered media. The 'idle' animation was updated to a leg sway to better match the provided video for that stance, replacing a simpler body bob.

# Visual style

Human characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like people from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the character to give it a sense of depth.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 1 and 60, with 20 being the average age.
- gender: 
  - The male characters should have only pants, while female cover their breasts with a top. The clothing should be simple and muted, reflecting a stone-age style.
  - Female characters should have long hair, while male should have short hair and beard.
  - Male characters should have a more robust, muscular build
  - Female characters should have thinner arms and legs, with a more pronounced waist and hips.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'gathering': The character is gathering food from berry bushes, with arms reaching out and a slight bend at the knees.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or dust particles to indicate movement.
- 'attacking': The character performs an attack animation, with arms raised and a forward motion.
- 'defending': The character takes a defensive stance, with arms raised and a slight bend at the knees.
- 'stunned': The character is stunned and laying on the ground, with limbs relaxed and a neutral expression.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a skeleton over time.

`,stances:["idle","walk","gathering","eat","procreate","dead","attacking","defending","stunned"],render(e,n,r,o,a,l,c,f="male",g=20,p=[1,0],m=!1,S=0){const A=["dead","stunned"].includes(c),E=A?hm+4:fm,P=A?fm+4:hm+Ze,I=.15,R=Math.min(o*(1-2*I)/E,a*(1-2*I)/P),F=E*R,B=P*R,H=n+(o-F)/2,$=r+(a-B)/2;e.save(),p[0]<0&&!A?(e.translate(H+F,$),e.scale(-1,1)):e.translate(H,$);const M="#D09A5A",W=g>50?"#BDBDBD":"#281808",fe="#7F5C4A",Ee="#6B4F3A",Ce="#E0D8C0",$e="#A0522D",Fe=1-Math.max(0,Math.min(100,S))/100*.2,we=f==="male"?1.1:.9,ue=.8+(Math.max(1,Math.min(g,60))-1)/59*.2;let Oe=DC*Fe*we*ue,ve=kC*Fe*we*ue,q=OC*Fe*ue;m&&f==="female"&&(Oe*=1.5);const x=Math.round((E-Oe)/2),Y=Math.round((E-Un)/2),b=x-ve,_=x+Oe,O=1,j=x+(Oe/2-O/2)-q,J=x+(Oe/2+O/2),he=p[1]<-.2&&Math.abs(p[0])<.7,ie=X=>{e.fillStyle=MC,e.beginPath();const ee=E/2,Re=X;e.ellipse(Math.floor(ee*R),Math.floor(Re*R),Math.max(1,Math.floor(FC*R)),Math.max(1,Math.floor(UC*R)),0,0,2*Math.PI),e.fill()},Se=(X,ee)=>{f==="male"?(ge(e,x,us+X,Oe,un-Hr,ee,R),ge(e,x,us+un-Hr+X,Oe,Hr,fe,R)):ge(e,x,us+X,Oe,un,Ee,R)},me=(X,ee)=>{he?ge(e,Y,Ni+X,Un,Zn,W,R):(ge(e,Y,Ni+X,Un,Zn,ee,R),ge(e,Y,Ni+X,Un,nl,W,R),f==="female"?(ge(e,Y-1,Ni+nl+X,1,Zn,W,R),ge(e,Y+Un,Ni+nl+X,1,Zn,W,R)):ge(e,Y+1,Ni+2+X,Un-2,Zn-2,W,R))};switch(c){case"idle":{const X=l*Math.PI*2,ee=Math.sin(X)*.5,le=(Math.cos(X*2)+1)*.25;ie(rt+Ze+1),ge(e,j+ee,rt+le,q,Ze,M,R),ge(e,J-ee,rt+le,q,Ze,M,R),Se(le,M),ge(e,b,Dt+le,ve,_t,M,R),ge(e,_,Dt+le,ve,_t,M,R),me(le,M);break}case"walk":{const X=l*Math.PI*2,ee=Math.sin(X)*2,le=Math.abs(Math.cos(X))*1;ie(rt+Ze+1),ge(e,j+ee,rt+le,q,Ze,M,R),ge(e,J-ee,rt+le,q,Ze,M,R),Se(le,M),ge(e,b-ee,Dt+le,ve,_t,M,R),ge(e,_+ee,Dt+le,ve,_t,M,R),me(le,M);break}case"gathering":{const X=l*Math.PI*2,ee=1,Re=(Math.sin(X)+1)/2*2,le=ee+Math.abs(Math.cos(X))*.5;ie(rt+Ze+1),ge(e,j,rt+le,q,Ze-ee,M,R),ge(e,J,rt+le,q,Ze-ee,M,R),Se(le,M),ge(e,b+1,Dt+le-Re,ve,_t,M,R),ge(e,_-1,Dt+le-Re,ve,_t,M,R),me(le,M);break}case"eat":{ie(rt+Ze+1),ge(e,j,rt+1,q,Ze-1,M,R),ge(e,J,rt+1,q,Ze-1,M,R),Se(1,M);const Re=(Math.sin(l*Math.PI*4)+1)/2,le=Y+Un/2,En=Ni+Zn/2,Ke=_+(le-_)*Re,Ye=Dt+1+(En-(Dt+1))*Re;ge(e,b,Dt+1,ve,_t,M,R),ge(e,Ke,Ye,ve,_t,M,R),ge(e,Ke,Ye-1,1,1,$e,R),me(1,M);break}case"procreate":{const X=(Math.sin(l*Math.PI*8)+1)/4,ee=(Math.sin(l*Math.PI*6)+1)*.5,Re=1.5,le=Re-ee;ie(rt+Ze+1),ge(e,j,rt+le,q,Ze-Re,M,R),ge(e,J,rt+le,q,Ze-Re,M,R),Se(le,M),ge(e,b,Dt+le,ve,_t,M,R),ge(e,_,Dt+le,ve,_t,M,R),me(le,M),e.globalAlpha=X,Se(le,"white"),e.globalAlpha=1;break}case"attacking":{const X=Math.sin(l*Math.PI)*1.5,ee=Math.abs(Math.sin(l*Math.PI));ie(rt+Ze+1),ge(e,j-X,rt+ee,q,Ze,M,R),ge(e,J+X*.5,rt+ee,q,Ze,M,R),Se(ee,M),ge(e,b,Dt+ee-2,ve,_t,M,R),ge(e,_,Dt+ee-2.5,ve,_t,M,R),me(ee,M);break}case"defending":{ie(rt+Ze+1),ge(e,j,rt+1,q,Ze-1,M,R),ge(e,J,rt+1,q,Ze-1,M,R),Se(1,M),ge(e,b-1,Dt+1-1,ve,_t,M,R),ge(e,_+1,Dt+1-1,ve,_t,M,R),me(1,M);break}case"stunned":case"dead":{const X=c==="dead",ee=X?Math.min(1,l):0,Re=ee>.5?Ce:M,le=f==="male"?fe:Ee,En=ee>.8?"transparent":W,Ke=E/2,Ye=P/2,_n=2;ie(P-1),ge(e,Ke-q-_n,Ye,q,Ze,Re,R),ge(e,Ke+_n,Ye,q,Ze,Re,R),ge(e,Ke-ve-_n,Ye-un+1,ve,_t,Re,R),ge(e,Ke+_n,Ye-un+1,ve,_t,Re,R);const Lt=Ke-Oe/2,en=Ye-un/2;f==="male"?(ee<.7&&ge(e,Lt,en+un-Hr,Oe,Hr,le,R),ge(e,Lt,en,Oe,un-Hr,Re,R)):ee<.7?ge(e,Lt,en,Oe,un,le,R):ge(e,Lt,en,Oe,un,Re,R);const Cn=Ke-Un/2,Rn=Ye-un/2-Zn+1;if(ge(e,Cn,Rn,Un,Zn,Re,R),En!=="transparent"&&ge(e,Cn,Rn,Un,nl,En,R),X&&ee>.6){const ni="#B0A890";for(let Li=0;Li<3;Li++)ge(e,Lt+1,en+Li*1+1,Oe-2,.5,ni,R)}break}default:ge(e,0,0,E,P,"magenta",R);break}e.restore()}};function LC(e,n,r,o,a){const l=n.x,c=n.y-r-o/2;e.save(),e.fillStyle=a,e.strokeStyle=a,e.lineWidth=1.5,e.beginPath(),e.rect(l-o/2,c,o,o/2),e.fill(),e.beginPath(),e.moveTo(l-o/2,c),e.lineTo(l-o/4,c-o/3),e.lineTo(l-o/6,c),e.moveTo(l-o/6,c),e.lineTo(l,c-o/2),e.lineTo(l+o/6,c),e.moveTo(l+o/6,c),e.lineTo(l+o/4,c-o/3),e.lineTo(l+o/2,c),e.stroke(),e.restore()}function Es(e,n,r,o,a,l=!1,c=!1,f=!1,g=!1){o<Ld&&(r=r*.75),sf.render(e,n.x-r/2,n.y-r/2,r,r,0,"idle",a,o,[0,0],!1,0);let p,m;l?(p=$T,m=xd):c?(p=WT,m=v0):f?(p=YT,m=m0):g&&(p=jT,m=p0),p&&m&&LC(e,n,r/2,p,m)}function HC(e,n,r,o,a,l){if(e.save(),o.length===0){e.restore();return}const c=o.length*a,f=4;let g;const p=c+(o.length-1)*f;o.length>1&&p>l?g=(l-c)/(o.length-1):g=f,o.length<=1&&(g=0);for(let m=0;m<o.length;m++){const{member:S,isPlayer:A,isHeir:E,isPartner:P,isParent:I}=o[m],R=n+m*(a+g)+a/2,F=r+a/4;Es(e,{x:R,y:F},a,S.age,S.gender,A,E,P,I)}e.restore()}function BC(e,n,r,o,a){if(r.length===0)return;e.save();const l=Mn,c=" 00",f=" 00";e.font=`${xc}px "Press Start 2P", Arial`;const g=e.measureText(c).width,p=e.measureText(f).width,m=Mn+ln+Mn+ln+Mn+wi+g+Mn/2+wi+p,S=r.length*za+(r.length-1)*kp,A=a-S-Mn;e.fillStyle=XT,e.fillRect(l,A,m,S);for(let E=0;E<r.length;E++){const P=r[E],I=A+E*(za+kp),R=I+za/2;P.isPlayerTribe&&(e.fillStyle=VT,e.fillRect(l,I,m,za));let F=l+Mn;if(e.font=`${ln}px "Press Start 2P", Arial`,e.textBaseline="middle",e.textAlign="left",e.fillText(P.tribeBadge,F,R-ln/4),F+=ln+Mn,!P.isPlayerTribe){const B=P.diplomacyStatus===Ft.Friendly?"🤝":"⚔️",H=`diplomacyButton_${P.leaderId}`,$={x:F,y:R-ln/2,width:ln,height:ln},oe={id:H,action:Ue.ToggleDiplomacy,rect:$,text:"",icon:B,backgroundColor:"transparent",textColor:"white",currentWidth:ln,tooltip:`Toggle diplomacy with this tribe (Currently: ${P.diplomacyStatus})`,targetTribeId:P.leaderId};n.uiButtons.push(oe),n.hoveredButtonId===H&&(e.fillStyle=y0,e.globalAlpha=.5,e.fillRect($.x,$.y,$.width,$.height),e.globalAlpha=1),e.font=`${ln*.8}px "Press Start 2P", Arial`,e.textBaseline="middle",e.textAlign="center",e.fillText(B,F+ln/2,R)}F+=ln+Mn,P.adultCount>0&&(Es(e,{x:F+wi/2,y:R},wi,25,"male"),F+=wi/2,e.font=`${xc}px "Press Start 2P", Arial`,e.fillStyle="white",e.textBaseline="middle",e.textAlign="left",e.fillText(` ${P.adultCount}`,F,R),F+=e.measureText(` ${P.adultCount}`).width+Mn/2),P.childCount>0&&(Es(e,{x:F+wi/2,y:R},wi,1,"female"),F+=wi/2,e.font=`${xc}px "Press Start 2P", Arial`,e.fillStyle="white",e.textBaseline="middle",e.textAlign="left",e.fillText(` ${P.childCount}`,F,R))}e.restore()}function GC(e,n,r,o,a){const l=w0,c=E0,f=n+o-l-c,g=r+c;e.save(),e.lineWidth=2,e.strokeStyle=a?DI:NI,e.beginPath();const p=5;e.moveTo(f+p,g+p),e.lineTo(f+l-p,g+l-p),e.moveTo(f+l-p,g+p),e.lineTo(f+p,g+l-p),e.stroke(),e.restore()}function xC(e,n,r,o){const{tutorialState:a,tutorial:l}=n;if(a.transitionState===Ot.INACTIVE)return;const c=l.steps[a.currentStepIndex];if(!c)return;e.save(),e.globalAlpha=a.transitionAlpha;const f=TI,g=II,p=wI,m=`${Wc}px "Press Start 2P", Arial`,S=`${xp}px "Press Start 2P", Arial`,A=_I,E=xp*1.5;e.font=S;const P=c.text.split(" ");let I="";const R=[];for(let Ce=0;Ce<P.length;Ce++){const $e=I+P[Ce]+" ";e.measureText($e).width>f-g*2&&Ce>0?(R.push(I),I=P[Ce]+" "):I=$e}R.push(I);const F=g*2+Wc+g/2+R.length*E,B=(r-f)/2,H=o-F-160;e.fillStyle=EI,e.beginPath(),e.moveTo(B+p,H),e.lineTo(B+f-p,H),e.quadraticCurveTo(B+f,H,B+f,H+p),e.lineTo(B+f,H+F-p),e.quadraticCurveTo(B+f,H+F,B+f-p,H+F),e.lineTo(B+p,H+F),e.quadraticCurveTo(B,H+F,B,H+F-p),e.lineTo(B,H+p),e.quadraticCurveTo(B,H,B+p,H),e.closePath(),e.fill(),e.fillStyle=A,e.textAlign="center",e.textBaseline="top",e.font=m,e.fillText(c.title,B+f/2,H+g),e.font=S;let $=H+g+Wc+g/2;for(const Ce of R)e.fillText(Ce,B+f/2,$),$+=E;const oe=n.hoveredButtonId==="tutorial-dismiss";GC(e,B,H,f,oe),e.restore();const M=w0,W=E0,fe=B+f-M-W,Ee=H+W;return{x:fe,y:Ee,width:M,height:M}}function ld(e,n,r){e.save();const o=PI,a={x:n.x-o,y:n.y-o,width:n.width+o*2,height:n.height+o*2};e.strokeStyle=T0,e.lineWidth=I0+Math.sin(r*$d)*1.5,e.setLineDash([8,8]),e.strokeRect(a.x,a.y,a.width,a.height),e.restore()}function bC(e,n){e.fillStyle="white",e.font='30px "Press Start 2P", Arial',e.textAlign="center",e.fillText("Game Over!",e.canvas.width/2,e.canvas.height/2-60),e.font='20px "Press Start 2P", Arial',e.fillText("Lineage Extinct.",e.canvas.width/2,e.canvas.height/2-20),e.fillText(`Cause: ${n.causeOfGameOver||"Unknown"}`,e.canvas.width/2,e.canvas.height/2+20)}const Rd=10,zC=3,gm=Rd*.7;function $C(e,n,r,o,a){const{position:l,food:c,maxFood:f,ownerId:g,claimedUntil:p}=n;if(e.beginPath(),e.arc(l.x,l.y,Rd,0,Math.PI*2),e.fillStyle="#228B22",e.fill(),e.strokeStyle="#006400",e.lineWidth=1,e.stroke(),g&&p&&p>a&&o){const m=r.entities.entities.get(g);if(m){let S;m.id===o.id?S=xd:U0(o,m,r)?S=NT:S=S0,S&&(e.strokeStyle=S,e.lineWidth=1+Math.sin(a*2)*.5,e.beginPath(),e.arc(l.x,l.y,Rd+2,0,Math.PI*2),e.stroke())}}if(c.length>0){const m=Math.PI*2/Math.min(c.length,f);for(let S=0;S<c.length;S++){const A=S*m,E=l.x+gm*Math.cos(A),P=l.y+gm*Math.sin(A);e.beginPath(),e.arc(E,P,zC,0,Math.PI*2),e.fillStyle="#FF0000",e.fill()}}}const pm=(e,n,r=70,o=50)=>{const a=e>>n&255;return`hsl(${Math.floor(a/255*360)}, ${r}%, ${o}%)`},WC=(e,n)=>{const r=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(!r)return e;const[o,a,l]=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])];return`hsl(${o}, ${a}%, ${Math.max(0,l-n)}%)`},il=(e,n,r,o,a,l,c,f=!1)=>{e.save(),e.translate(n,r),e.rotate(l),e.fillStyle=f?WC(c,15):c,e.beginPath(),e.roundRect(-o/2,0,o,a,o/2),e.fill(),e.restore()},ud=(e,n)=>{const r=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/),o=75;if(!r)return`hsl(0, 0%, ${o}%)`;const[,a,l,c]=r.map(Number),f=l*(1-n),g=c+(o-c)*n;return`hsl(${a}, ${f}%, ${g}%)`},X0={name:"tribe-prey-2d",referenceImage:"swos.png",description:`A 2D prey asset for the Tribe game, featuring various stances and animations.

Prey is an animal which can be hunted by predators or humans in the Tribe game.

Preys look like small 4 leg mammals, with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Visual style

Prey characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like creatures from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in away that conveys their actions clearly.

Prey walks on all fours, unlike human (two legs).

Each prey is described by a unique gene code, which is a number that defines its appearance, size, and other characteristics. The gene code is used to generate the character's appearance, including body proportions, color, and other visual features. The gene code is a 32-bit integer, with each bit representing a specific characteristic of the character.

Prey should have should have visible body parts, such as head, torso, arms, and legs. The body parts should be connected and should not overlap. The character's body parts should be simple shapes, such as circles and rectangles, with solid colors and no gradients or patterns.

Preys are supposed to be sympathetic and friendly, so the character's face should have a friendly expression, with a smile and bright eyes. The character's eyes should be large and expressive, with a simple design.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the a character to give it a sense of depth.

IMPORTANT: The character is visible from the side, just like in Sensible Soccer.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 0 and 12, with 2 being the average age.
- gender:
  - 'male': Male prey are larger and more robust, with a more pronounced musculature.
  - 'female': Female prey are smaller and more agile, with a leaner build.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or a dust particles to indicate movement.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a grey skeleton over time. The character pose and body parts should not be animated in this stance, as the character is dead so it should not move.`,stances:["idle","walk","eat","dead","procreate"],render(e,n,r,o,a,l,c,f={gender:"male",age:2,direction:[1,0],isPregnant:!1,hungryLevel:0,geneCode:8405024}){e.save(),e.imageSmoothingEnabled=!1;const g=o*.15,p=n+o/2,m=r+a/2,S=o-g*2,A=a-g*2,{gender:E,age:P,direction:I,isPregnant:R,hungryLevel:F,geneCode:B}=f,H=.8+Math.min(P,10)/10*.4,$=E==="male"?1.05:.95,oe=1-F/100*.3,M=S*.5*oe*H*$;let W=A*.3*H*$;const fe=S*.15*H*$,Ee=M*.2,Ce=A*.3,$e=pm(B,0,30,50);let Fe=pm(B,8,50,40);if(P>45){const ie=Math.min(1,(P-45)/15);Fe=ud(Fe,ie)}e.translate(p,m),I[0]<0&&e.scale(-1,1);const we=Math.sin(l*Math.PI*2),ue=Math.cos(l*Math.PI*2),Oe=Ce+W*.2;if(c==="dead"){const ie=Math.min(l,1);e.translate(0,A*.2),e.rotate(Math.PI/2);const Se=ud(Fe,ie),me=ud($e,ie);e.globalAlpha=.5+ie*.5,e.strokeStyle=Se,e.lineWidth=Ee*.5,e.beginPath(),e.moveTo(-M*.4,0),e.lineTo(M*.4,0),e.stroke();for(let X=-1;X<=1;X+=1)e.beginPath(),e.arc(0,0,W*.4,Math.PI*.4*X-Math.PI*.2,Math.PI*.4*X+Math.PI*.2),e.stroke();e.fillStyle=me,e.beginPath(),e.arc(M*.5,0,fe,0,Math.PI*2),e.fill(),e.fillStyle="black",e.beginPath(),e.arc(M*.55,0,fe*.3,0,Math.PI*2),e.fill(),e.restore();return}e.fillStyle="rgba(0, 0, 0, 0.1)",e.beginPath(),e.ellipse(0,Oe,M*.7,M*.25,0,0,2*Math.PI),e.fill();let ve=0,q=0,x=0,Y=0,b=0,_=0;switch(c){case"idle":q=we*(A*.02),x=we*.05,Y=-we*.05,b=-we*.05,_=we*.05;break;case"walk":q=Math.abs(ue)*(A*-.04),x=we*.7,Y=-we*.7,b=-we*.7,_=we*.7;break;case"eat":ve=A*.1,q=A*.05,ve+=we*(A*.02);break;case"procreate":q=A*.05;const ie=(1-ue)*-S*.05;e.translate(ie,0),e.shadowColor="rgba(255, 182, 193, 0.9)",e.shadowBlur=10;break}R&&E==="female"&&(W*=1.6);const O=q,j=O-W*.2;il(e,M*-.35,j,Ee,Ce,b,Fe,!0),il(e,M*.35,j,Ee,Ce,_,Fe,!0),e.fillStyle=Fe,e.beginPath(),e.ellipse(0,O,M/2,W/2,0,0,2*Math.PI),e.fill();const J=M*.45,he=j+ve;e.fillStyle=$e,e.beginPath(),e.arc(J,he,fe,0,Math.PI*2),e.fill(),I[1]>=0&&(e.fillStyle="black",e.beginPath(),e.arc(J+fe*.3,he-fe*.2,fe*.15,0,Math.PI*2),e.fill()),il(e,M*-.35,j,Ee,Ce,x,Fe),il(e,M*.35,j,Ee,Ce,Y,Fe),e.restore()}};function YC(e,n){let[r,o,a]=e.match(/\d+/g).map(Number);return r=Math.max(0,r-n),o=Math.max(0,o-n),a=Math.max(0,a-n),`rgb(${r}, ${o}, ${a})`}function jC(e){const n=(e&16711680)>>16,r=(e&65280)>>8,o=e&255,a=`rgb(${n}, ${r}, ${o})`,l=YC(a,40),c=(e&255)%100+50,f=(e>>8&255)%100,g=(e>>16&255)%100,p=`rgb(${c}, ${f}, ${g})`,m=(e&8388608)!==0?"#00aaff":"#ffaa00";return{furColor:a,darkerFurColor:l,skinColor:p,eyeColor:m}}const K0={name:"tribe-predator-2d",referenceImage:"swos.png",description:`A 2D predator asset for the Tribe game, featuring various stances and animations.

Predator is an animal which can hunt and attack humans in the Tribe game. It is designed to be a threat to the player, adding an element of danger and challenge to the game world.

Predator look like bears or wolves, with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Visual style

Predator characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like creatures from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in away that conveys their actions clearly.

Predator walks on arms and legs, unlike human (two legs).

Each predator is described by a unique gene code, which is a number that defines its appearance, size, and other characteristics. The gene code is used to generate the character's appearance, including body proportions, color, and other visual features. The gene code is a 32-bit integer, with each bit representing a specific characteristic of the character.

Predator should have visible ears, eyes, and mouth with teeth. It must have a tail. Front legs should be shorter than back legs, and they should be positioned closer to the body. The character's body should be wider at the top and narrower at the bottom, with a slight curve to the back. The character's head should be larger than the body, with a pronounced jaw and sharp teeth.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the a character to give it a sense of depth.

IMPORTANT: The character is visible from the side, just like in Sensible Soccer.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 1 and 20, with 3 being the average age.
- gender:
  - 'male': Male predators are larger and more robust, with a more pronounced musculature.
  - 'female': Female predators are smaller and more agile, with a leaner build.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or a dust particles to indicate movement.
- 'attacking': The character performs an attack animation, with arms raised and a forward motion.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a grey skeleton over time. The character pose and body parts should not be animated in this stance, as the character is dead so it should not move.`,stances:["idle","walk","eat","dead","attacking","procreate"],render(e,n,r,o,a,l,c,f={gender:"male",age:20,direction:[1,0],isPregnant:!1,hungryLevel:0,geneCode:8405024}){const{gender:g,age:p,direction:m,isPregnant:S,hungryLevel:A,geneCode:E}=f;e.save();const P=o*.15,I=Math.max(1,Math.floor((o-P*2)/10)),R=m[0]<0;e.translate(n+o/2,r+a/2),R&&e.scale(-1,1);const F=jC(E),B=.8+Math.min(p,20)/20*.4,H=g==="male"?1.05:.95,$=1-A/100*.25,oe=B*H*$,M=Math.max(0,Math.min(1,(p-15)/5));e.filter=`grayscale(${M})`;const W=F.furColor,fe=F.darkerFurColor,Ee=F.eyeColor,Ce="#FFFFFF",$e="#c75c5c",Fe="#E0E0E0",we="#A0A0A0",ue=a/2-2*I,Oe=Math.sin(l*Math.PI*2),ve=Math.abs(Oe);if(e.fillStyle="rgba(0,0,0,0.15)",e.beginPath(),e.ellipse(0,ue,I*4,I,0,0,2*Math.PI),e.fill(),e.filter="none",c==="dead"){const Ke=Math.min(1,l*2);e.save(),e.translate(0,ue-I*3),e.rotate(-Math.PI/2);const Ye=(_n,Lt,en,Cn,Rn=!1)=>{e.fillStyle=Rn?we:Fe,e.fillRect(_n*I,Lt*I,en*I,Cn*I)};Ke<1&&(e.globalAlpha=1-Ke,e.fillStyle=W,e.beginPath(),e.ellipse(0,0,I*3,I*5,0,0,Math.PI*2),e.fill(),e.globalAlpha=1),Ke>0&&(e.globalAlpha=Ke,Ye(-1,-4,2,2),Ye(1,-3.5,1,1,!0),Ye(-.5,-2,1,5,!0),Ye(-2.5,-1,5,.5),Ye(-2.5,0,5,.5),Ye(-2.5,1,5,.5),Ye(-3,-2,-1,2,!0),Ye(3,-2,1,2),Ye(-3,2,-1,2,!0),Ye(3,2,1,2),e.globalAlpha=1),e.restore(),e.restore();return}e.fillStyle=W;let q=0,x=0,Y=0,b=[0,0,0,0];switch(c){case"idle":q=Oe*I*.1;break;case"walk":const Ke=Math.sin(l*Math.PI*4);q=Math.abs(Ke)*-I*.5,b=[Ke*I,-Ke*I,-Ke*I,Ke*I];break;case"attacking":const Ye=Math.sin(l*Math.PI*4);x=I*2+Ye*I,Y=I*2,q=I;break;case"eat":Y=I*3+ve*I,q=I*1.5,e.fillStyle=$e,e.fillRect(-I,ue-I,I*2,I);break;case"procreate":q=Math.sin(l*Math.PI*8)*I*.3,e.fillStyle="rgba(139, 69, 19, 0.5)";for(let Lt=0;Lt<5;Lt++){const en=(Math.random()-.5)*I*8,Cn=ue+(Math.random()-.5)*I*2;ve>.5&&e.fillRect(en,Cn,I*.5,I*.5)}break}const _=I*3*oe*(S?1.3:1),O=I*5*oe,j=-O/1.5,J=ue-_-I*2.5+q;e.fillStyle=W,e.beginPath(),e.moveTo(j-I*.5,J+_*.5),e.quadraticCurveTo(j-I*3,J-I,j-I*2+Oe*I,J+_+I),e.fill();const he=I*1.2*oe,ie=I*3*oe,Se=I*2.5*oe,me=j+O*.8,X=j+O*.2;e.fillStyle=fe,e.fillRect(X,ue-Se,he,Se+b[2]),e.fillRect(me,ue-ie,he,ie+b[0]),e.fillStyle=W,e.beginPath(),e.moveTo(j,J+_),e.lineTo(j,J+I),e.quadraticCurveTo(j+O/2,J,j+O,J+I),e.lineTo(j+O,J+_),e.fill(),e.fillStyle=W,e.fillRect(X+I/2,ue-Se,he,Se+b[3]),e.fillRect(me+I/2,ue-ie,he,ie+b[1]);const ee=I*3.5*oe,Re=j+O-ee*.3+x,le=J-ee*.3+Y;e.fillStyle=W,e.beginPath(),e.arc(Re,le,ee/2,0,Math.PI*2),e.fill(),e.beginPath(),e.ellipse(Re+ee*.4,le+ee*.2,I*1.5,I,0,0,Math.PI*2),e.fill(),m[1]>=0&&(e.fillStyle=Ee,e.fillRect(Re+I*.5,le-I*.5,I*.5,I*.5),c==="attacking"&&(e.fillStyle=Ce,e.fillRect(Re+ee*.5,le+ee*.4,I,I*.4))),e.fillStyle=fe,e.beginPath(),e.moveTo(Re-ee*.4,le-ee*.3),e.lineTo(Re,le-ee*.7),e.lineTo(Re,le-ee*.2),e.fill(),e.restore()}};function VC(e,n){const{position:r,gender:o,age:a,decayProgress:l,food:c,radius:f,originalEntityType:g,geneCode:p}=n;if(e.save(),e.globalAlpha=1-l,g==="human"?sf.render(e,r.x-f,r.y-f,f*2,f*2,l,"dead",o,a,[0,0],!1,0):g==="prey"?X0.render(e,r.x-f,r.y-f,f*2,f*2,l,"dead",{gender:o,age:a,direction:[0,0],isPregnant:!1,hungryLevel:0,geneCode:p||8405024}):g==="predator"&&K0.render(e,r.x-f,r.y-f,f*2,f*2,l,"dead",{gender:o,age:a,direction:[0,0],isPregnant:!1,hungryLevel:0,geneCode:p||8405024}),e.restore(),c.length>0){e.save(),e.font=`${zT}px Arial`,e.textAlign="center",e.textBaseline="middle";const m=pt*.9,S=Math.PI/t0*3;c.forEach((A,E)=>{const P=E*S,I=r.x+m*Math.cos(P)*Math.atan2(E,E),R=r.y+m*Math.sin(P)*Math.atan2(E,E),F=M0[A.type];e.fillText(F,I,R)}),e.restore()}}function jr(e,n,r,o,a,l,c,f){e.save(),e.fillStyle=c,e.fillRect(n,r,o,a),e.fillStyle=f,e.fillRect(n,r,o*Math.max(0,l),a),e.restore()}function XC(e,n,r,o,a,l){if(e.save(),o.length===0){e.restore();return}const c=o.length*a;let f;c>l||c+(o.length-1)*4>l?f=(l-c)/(o.length-1):f=4,o.length===1&&(f=0);for(let g=0;g<o.length;g++){const p=M0[o[g].type];e.fillText(p,n+g*(a+f),r)}e.restore()}function KC(e,n,r,o,a){const l=n.autopilotControls.hoveredAutopilotAction;if(!l)return;let c,f=pt/2;const g=Hl[l.action],p=G0[l.action],m=`${g} ${p}`;if("targetEntityId"in l){const S=n.entities.entities.get(l.targetEntityId);S&&(c=S.position,f=S.radius)}else"position"in l&&(c=l.position);if(c){V0(e,c,f,bd,zd,2,r,o,a),e.save(),e.font=`${Jr}px "Press Start 2P", Arial`,e.fillStyle="white",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=5;const S=c.x-r.x+o/2,E=c.y-r.y+a/2-f-Ul-Jr/2;e.fillText(m,S,E),e.restore()}}function QC(e,n,r,o,a){e.save();const l=(Math.sin(a*$d)+1)/2,c=r+Ul+l*5;e.strokeStyle=bd,e.lineWidth=2,e.setLineDash(zd),e.beginPath(),e.arc(n.x,n.y,c,0,Math.PI*2),e.stroke(),e.setLineDash([]);const f=Hl[o],g=G0[o];if(f){e.font=`${Jr*1.5}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle";const p=n.y-c-25;e.fillText(f,n.x,p),e.font=`${Jr*.8}px "Press Start 2P", Arial`,e.fillText(g,n.x,p+25)}e.restore()}function mm(e,n,r){e.save();const o=30,a=70,l=3,c=a/l;for(let f=0;f<l;f++){const g=f*c,p=(r*o+g)%a,m=1-p/a;e.strokeStyle=`rgba(255, 215, 0, ${m*.7})`,e.lineWidth=1+(1-m)*2,e.beginPath(),e.arc(n.x,n.y,p,0,Math.PI*2),e.stroke()}e.restore()}function ZC(e,n){const{activeAutopilotAction:r,behaviors:o}=n.autopilotControls,a=At(n);if(a&&(a.isCallingToFollow&&mm(e,a.position,n.time),o.followLeader&&!r&&mm(e,a.position,n.time),r)){let l,c=15;if("position"in r)l=r.position;else if("targetEntityId"in r){const f=n.entities.entities.get(r.targetEntityId);f&&(l=f.position,c=f.radius||30)}l&&r.action!==Ae.AutopilotFollowMe&&!a.isCallingToFollow&&QC(e,l,c,r.action,n.time)}}function vm(e,n,r,o,a,l,c=!0){const f=n.split(" ");let g="";const p=[];for(let m=0;m<f.length;m++){const S=g+f[m]+" ";e.measureText(S).width>a&&m>0?(p.push(g),g=f[m]+" "):g=S}if(p.push(g),c)for(let m=0;m<p.length;m++)e.fillText(p[m],r,o+m*l);return p.length*l}function qC(e){return 1-Math.pow(1-e,3)}function JC(e,n,r,o){n.notificationButtonRects={dismiss:new Map,view:new Map};const a=n.notifications.filter(c=>!c.isDismissed);if(a.length===0)return;e.save();let l=o-VI;for(const c of a){const f=r-ja-qi;e.font=`${Yc}px "Press Start 2P", Arial`;const g=f+qi,p=ja-qi*2,m=vm(e,c.message,-9999,-9999,p,Yc*1.2,!1),S=qi*2+m+Fn,A=l-S,E=Date.now()-c.creationTime,P=Math.min(E/jI,1),I=qC(P),R=o,F=R+(A-R)*I;e.fillStyle=xI,e.beginPath(),e.roundRect(f,F,ja,S,GI),e.fill(),e.fillStyle=bI,e.textBaseline="top",vm(e,c.message,g,F+qi,p,Yc*1.2,!0);const B=F+S-Fn-qi/2,H=f+ja-Fn-qi/2,$={x:H,y:B,width:Fn,height:Fn};n.notificationButtonRects.dismiss.set(c.id,$);const oe=n.hoveredButtonId===`notification-dismiss-${c.id}`;if(e.fillStyle=oe?Wp:zI,e.font=`${Fn}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("✖",$.x+$.width/2,$.y+$.height/2),c.targetEntityIds||c.targetPosition||c.targetArea||c.targetRadius){const fe={x:H-Fn-$p,y:B,width:Fn,height:Fn};n.notificationButtonRects.view.set(c.id,fe);const Ee=n.hoveredButtonId===`notification-view-${c.id}`;e.fillStyle=Ee?Wp:$I,e.font=`${Fn*(Ee?1.5:1.2)}px Arial`,e.fillText("👁️",fe.x+fe.width/2,fe.y+fe.height/2)}l-=S+$p}e.restore()}function af(e,n,r){if(!n.aiBehaviorTree||!n.aiBlackboard)return;const o=n.aiBlackboard.getNodeExecutionData(),a=n.aiBehaviorTree;e.save(),e.font=`${cI}px Arial`,e.textAlign="left",e.textBaseline="top";const l=A=>{switch(A){case T.SUCCESS:return fI;case T.FAILURE:return hI;case T.RUNNING:return gI;case T.NOT_EVALUATED:case null:default:return pI}},c=A=>{if(!A.name||!o.has(A.name))return{width:0,height:0};let E=0,P=0;const I=o.get(A.name),R=` ${A.name}`+(I!=null&&I.debugInfo?`: ${I.debugInfo}`:""),F=e.measureText(R).width,B=(A.depth??0)*Hp+8+F+Gp+Vo+20;if(E=Math.max(E,B),P+=$c,A.children)for(const H of A.children){const $=c(H);E=Math.max(E,$.width),P+=$.height}else if(A.child){const H=c(A.child);E=Math.max(E,H.width),P+=H.height}return{width:E,height:P}},f=(A,E,P,I)=>{if(!A.name||!o.has(A.name))return E;let R=E;const F=o.get(A.name),B=P+2+(A.depth??0)*Hp;let H=T.NOT_EVALUATED,$=Bp,oe="";if(F){H=F.status,oe=F.debugInfo;const fe=vI/jt*Yt,Ee=r-F.lastExecuted,Ce=Math.max(0,1-Ee/fe);$=Ew(Bp,mI,Ce),Ee>ps&&(H=T.NOT_EVALUATED)}const M=l(H);e.fillStyle=M,e.fillText("●",B,R),e.fillStyle=$;const W=` ${A.name}`+(oe?`: ${oe}`:"");if(e.fillText(W,B+8,R),F&&F.executionHistory.length>0){const{executionHistory:fe}=F,Ee=A0/jt*Yt,Ce=r,$e=Ce-Ee,Fe=P+I-Vo-Gp;let we=Fe;const ue=R+($c-Wa)/2,Oe=fe.filter(j=>j.time<$e);let ve=Oe.length>0?Oe[Oe.length-1].status:null,q=$e;const x=fe.filter(j=>j.time>=$e&&j.time<=Ce),Y=Vo/Ee;e.fillStyle="rgba(255, 255, 255, 0.1)",e.fillRect(Fe,ue,Vo,Wa);for(const j of x){const he=(j.time-q)*Y;he>0&&(e.fillStyle=l(ve),e.fillRect(we,ue,he,Wa),we+=he),ve=j.status,q=j.time}r-q>ps&&(ve=T.NOT_EVALUATED);const _=(Ce-q)*Y;e.fillStyle=l(ve);const O=Fe+Vo-we;e.fillRect(we,ue,Math.min(_,O),Wa)}if(R+=$c,A.children)for(const fe of A.children)R=f(fe,R,P,I);else A.child&&(R=f(A.child,R,P,I));return R},{width:g,height:p}=c(a);if(p===0){e.restore();return}const m=n.position.x+lI,S=n.position.y+uI-p/2;e.fillStyle=dI,e.fillRect(m,S,g,p+4),f(a,S+2,m,g),e.restore()}const e1={moving:"walk",gathering:"gathering",eating:"eat",feeding:"eat",procreating:"procreate",idle:"idle",attacking:"attacking",planting:"gathering"};function t1(e,n){var f;const{radius:r,position:o,activeAction:a="idle"}=n,l=((f=n.stateMachine)==null?void 0:f[0])||"N/A",c=n.isAdult?pt+20:pt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${a}`,o.x,o.y-c),e.fillText(`State: ${l}`,o.x,o.y-c+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-c+20),e.fillText(`Cooldown: ${n.attackCooldown||"N/A"}`,o.x,o.y-c+30),e.fillText(`Tribe: ${n.leaderId||"N/A"}`,o.x,o.y-c+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(255, 0, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function n1(e,n,r,o,a){e.save(),e.font=`${Id}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(r,n.x,n.y-(o?pt:io)-Id-a),e.restore()}function i1(e,n,r,o,a){const l=n.x,c=n.y-r-o/2;e.save(),e.fillStyle=a,e.strokeStyle=a,e.lineWidth=1.5,e.beginPath(),e.rect(l-o/2,c,o,o/2),e.fill(),e.beginPath(),e.moveTo(l-o/2,c),e.lineTo(l-o/4,c-o/3),e.lineTo(l-o/6,c),e.moveTo(l-o/6,c),e.lineTo(l,c-o/2),e.lineTo(l+o/6,c),e.moveTo(l+o/6,c),e.lineTo(l+o/4,c-o/3),e.lineTo(l+o/2,c),e.stroke(),e.restore()}function r1(e,n,r){var f;const{position:o,radius:a}=n,l=o.x-bc/2,c=o.y-a-KT;if(((f=n.stateMachine)==null?void 0:f[0])===xn){const g=n.stateMachine[1],p=r-g.attackStartTime,m=Math.min(p/s0,1);jr(e,l,c,bc,Op,m,$r,QT)}else if(n.attackCooldown&&n.attackCooldown>0){const g=1-n.attackCooldown/Ml;jr(e,l,c,bc,Op,g,$r,ZT)}}function o1(e,n,r){const a="➡️";e.save(),e.font="15px Arial",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=3,e.fillText(a,n.x,n.y-r),e.restore()}function s1(e,n,r=!1,o=!1,a=!1,l=!1,c=!1,f=!1,g=!1,p=!1,m,S){const{position:A,activeAction:E="idle"}=n,P=n.isAdult?pt:pt*.6,I=e1[E]||"idle";sf.render(e,A.x-P,A.y-P,P*2,P*2,n.animationProgress||0,I,n.gender,n.age,[n.direction.x,n.direction.y],n.isPregnant??!1,n.hunger),f&&(e.save(),e.strokeStyle=S0,e.lineWidth=2,e.beginPath(),e.arc(A.x,A.y,P+3,0,2*Math.PI),e.stroke(),e.restore());let R,F;if(c?(R=kT,F=v0):r?(R=DT,F=xd):a?(R=OT,F=PT):o?(R=MT,F=p0):l&&(R=FT,F=m0),R&&F&&i1(e,A,P,R,F),n.tribeBadge&&n1(e,A,n.tribeBadge,n.isAdult??!1,R??0),g){let H=(n.isAdult?pt:io)+5;R&&(H+=R),n.tribeBadge&&(H+=Id),o1(e,A,H)}const B=p&&(S===void 0||n.id===S);B&&n.aiBlackboard&&af(e,n,m),r1(e,n,m),B&&t1(e,n)}const a1={grazing:"eat",moving:"walk",procreating:"procreate",feeding:"eat",idle:"idle"};function l1(e,n){var f;const{radius:r,position:o,activeAction:a="idle"}=n,l=((f=n.stateMachine)==null?void 0:f[0])||"N/A",c=n.isAdult?pt+20:pt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${a}`,o.x,o.y-c),e.fillText(`State: ${l}`,o.x,o.y-c+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-c+20),e.fillText(`Hunger: ${Math.round(n.hunger)}`,o.x,o.y-c+30),e.fillText(`Age: ${Math.round(n.age)}`,o.x,o.y-c+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(0, 255, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function u1(e,n,r=!1,o=0,a){var m,S;const{position:l,activeAction:c="idle"}=n,f=n.isAdult?n.radius:n.radius*.6,g=a1[c]||"idle";if(X0.render(e,l.x-f,l.y-f,f*2,f*2,n.animationProgress||0,g,{gender:n.gender,age:n.age,direction:[((m=n.direction)==null?void 0:m.x)||1,((S=n.direction)==null?void 0:S.y)||0],isPregnant:n.isPregnant??!1,hungryLevel:n.hunger,geneCode:n.geneCode}),n.hitpoints<n.maxHitpoints){const A=f*1.5,E=3,P=l.x-A/2,I=l.y-f-8;e.fillStyle="#555",e.fillRect(P,I,A,E);const R=n.hitpoints/n.maxHitpoints;e.fillStyle=R>.5?"#4CAF50":R>.25?"#FFC107":"#F44336",e.fillRect(P,I,A*R,E)}const p=r&&(a===void 0||n.id===a);p&&n.aiBlackboard&&af(e,n,o),p&&l1(e,n)}const c1={attacking:"attacking",eating:"eat",moving:"walk",procreating:"procreate",feeding:"eat",idle:"idle"};function d1(e,n){var f;const{radius:r,position:o,activeAction:a="idle"}=n,l=((f=n.stateMachine)==null?void 0:f[0])||"N/A",c=n.isAdult?pt+20:pt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${a}`,o.x,o.y-c),e.fillText(`State: ${l}`,o.x,o.y-c+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-c+20),e.fillText(`Hunger: ${Math.round(n.hunger)}`,o.x,o.y-c+30),e.fillText(`Age: ${Math.round(n.age)}`,o.x,o.y-c+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(255, 0, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function f1(e,n,r=!1,o=0,a){var m,S;const{position:l,activeAction:c="idle"}=n,f=n.isAdult?n.radius:n.radius*.6,g=c1[c]||"idle";if(K0.render(e,l.x-f,l.y-f,f*2,f*2,n.animationProgress||0,g,{gender:n.gender,age:n.age,direction:[((m=n.direction)==null?void 0:m.x)||1,((S=n.direction)==null?void 0:S.y)||0],isPregnant:n.isPregnant??!1,hungryLevel:n.hunger,geneCode:n.geneCode}),n.hitpoints<n.maxHitpoints){const A=f*1.5,E=3,P=l.x-A/2,I=l.y-f-8;e.fillStyle="#555",e.fillRect(P,I,A,E);const R=n.hitpoints/n.maxHitpoints;e.fillStyle=R>.5?"#4CAF50":R>.25?"#FFC107":"#F44336",e.fillRect(P,I,A*R,E)}(n.attackCooldown&&n.attackCooldown>0||n.huntCooldown&&n.huntCooldown>0)&&(e.strokeStyle="#FF8C00",e.lineWidth=3,e.beginPath(),e.arc(l.x,l.y,f+3,0,2*Math.PI),e.stroke());const p=r&&(a===void 0||n.id===a);p&&n.aiBlackboard&&af(e,n,o),p&&d1(e,n)}const Q0=15;function Sm(e,n,r,o,a=1.5){const l=r-n.startTime,c=Math.min(l/n.duration,1),f=1-c,p=1+Math.sin(c*Math.PI*2)*(a-1),m=Q0*p;e.save(),e.globalAlpha=f,e.beginPath(),e.arc(n.position.x,n.position.y,Math.max(0,m),0,Math.PI*2),e.fillStyle=o,e.fill(),e.restore()}function Br(e,n,r,o,a=2){const l=r-n.startTime,c=Math.min(l/n.duration,1),f=1-c,g=Q0*2*c;e.save(),e.globalAlpha=f,e.beginPath(),e.arc(n.position.x,n.position.y,g,0,Math.PI*2),e.strokeStyle=o,e.lineWidth=a,e.stroke(),e.restore()}function Ei(e,n,r,o){const a=r-n.startTime,l=Math.min(a/n.duration,1),c=1-l,f=-20*l;e.save(),e.globalAlpha=c,e.font="20px Arial",e.textAlign="center",e.fillText(o,n.position.x,n.position.y+f),e.restore()}function h1(e,n,r){switch(n.type){case ae.Hunger:Sm(e,n,r,"rgba(255, 165, 0, 0.7)",1);break;case ae.Procreation:Ei(e,n,r,"❤️");break;case ae.Pregnant:Sm(e,n,r,"rgba(255, 105, 180, 0.7)",1.2);break;case ae.TargetAcquired:Br(e,n,r,"rgba(255, 0, 0, 0.8)",3);break;case ae.Attack:Ei(e,n,r,"⚔️");break;case ae.Partnered:Ei(e,n,r,"🤝");break;case ae.BushClaimed:Br(e,n,r,"rgba(0, 255, 0, 0.7)",2);break;case ae.BushClaimLost:Br(e,n,r,"rgba(128, 128, 128, 0.7)",2);break;case ae.Eating:Ei(e,n,r,"🍖");break;case ae.ChildFed:Ei(e,n,r,"🍼");break;case ae.AttackDeflected:Ei(e,n,r,"🛡️");break;case ae.AttackResisted:Ei(e,n,r,"💪");break;case ae.Hit:Ei(e,n,r,"💥");break;case ae.SeizeBuildup:Br(e,n,r,"rgba(255, 215, 0, 0.8)",4);break;case ae.Seize:Br(e,n,r,"rgba(148, 0, 211, 0.8)",4);break;case ae.CallToAttack:Br(e,n,r,"rgba(255, 255, 0, 0.8)",4);break}}function ym(e,n,r,o,a,l,c){e.save();const{position:f}=n;e.strokeStyle=o,e.lineWidth=a+Math.sin(c*l)*(a/2),e.setLineDash([8,8]),e.beginPath(),e.arc(f.x,f.y,r,0,2*Math.PI),e.stroke(),e.restore()}function _i(e,n,r,o,a,...l){const c={...a.position};for(let f=-r;f<=r;f+=r)for(let g=-n;g<=n;g+=n)a.position.x=c.x+g,a.position.y=c.y+f,o(e,a,...l);a.position=c}function g1(e,n,r){const o=At(n),a=o?yt(n,o):[],l=ti(a),{width:c,height:f}=n.mapDimensions;Array.from(n.entities.entities.values()).sort((m,S)=>m.position.y-S.position.y||m.id-S.id).forEach(m=>{var S,A;if(m.type==="berryBush")_i(e,c,f,$C,m,n,o,n.time);else if(m.type==="human"){const E=m,P=E.id===(o==null?void 0:o.id),I=a.some(M=>M.id===E.id),R=E.id===(l==null?void 0:l.id),F=o&&(E.id===o.motherId||E.id===o.fatherId),B=o&&(((S=E.partnerIds)==null?void 0:S.includes(o.id))||((A=o.partnerIds)==null?void 0:A.includes(E.id))),H=(o==null?void 0:o.attackTargetId)===E.id,$=E.leaderId?n.entities.entities.get(E.leaderId):void 0,oe=o?E.leaderId===o.id&&E.activeAction==="moving"&&E.target===E.leaderId&&($==null?void 0:$.isCallingToFollow):!1;_i(e,c,f,s1,E,P,F,I,B,R,H,oe,r,n.time,n.debugCharacterId)}else m.type==="corpse"?_i(e,c,f,VC,m):m.type==="prey"?_i(e,c,f,u1,m,r,n.time,n.debugCharacterId):m.type==="predator"&&_i(e,c,f,f1,m,r,n.time,n.debugCharacterId)}),n.visualEffects.forEach(m=>{_i(e,c,f,h1,m,n.time)});const p=n.notifications.filter(m=>!m.isDismissed);for(const m of p)if(m.highlightedEntityIds&&m.renderHighlights)for(const S of m.highlightedEntityIds){const A=n.entities.entities.get(S);A&&_i(e,c,f,ym,A,XI,KI,ZI,QI,n.time)}if(n.tutorialState.isActive&&n.tutorialState.highlightedEntityIds.size>0)for(const m of n.tutorialState.highlightedEntityIds){const S=n.entities.entities.get(m);S&&_i(e,c,f,ym,S,RI,T0,I0,$d,n.time)}}function p1(e,n,r,o,a,l){let c=null,f=null;e.textAlign="left";let g=$t+Ri;const m=n.time/(Yt/jt)/Ol%1,S=Xo[xr.Time],A=25,E=$t+A;e.fillText(S,$t,g+Zt/2+Ri/3),jr(e,E,g,Ii,Zt,m,$r,bT),g+=Zt+Qn;const P=g+Qi/2,I=g+(Qi-Zt)/2,R=5;Es(e,{x:$t*2,y:P},Qi,5,r.gender,!1,!1,!1);const F=$t+Qi+R,B=Ii+A-(Qi+R)*2;jr(e,F,I,B,Zt,Math.floor(r.age)/hs,$r,xT),Es(e,{x:F+B+R+Qi/2,y:P},Qi,hs,r.gender,!1,!1,!1),g+=Zt+Qn*2;const H=[],$=new Set;if(H.push({member:r,isPlayer:!0,isHeir:!1,isPartner:!1,isParent:!1}),$.add(r.id),o&&!$.has(o.id)&&(H.push({member:o,isPlayer:!1,isHeir:!0,isPartner:!1,isParent:!1}),$.add(o.id)),a.forEach(ue=>{$.has(ue.id)||(H.push({member:ue,isPlayer:!1,isHeir:!1,isPartner:!0,isParent:!1}),$.add(ue.id))}),l.forEach(ue=>{$.has(ue.id)||(H.push({member:ue,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!1}),$.add(ue.id))}),r.motherId&&!$.has(r.motherId)){const ue=n.entities.entities.get(r.motherId);ue&&(H.push({member:ue,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!0}),$.add(ue.id))}if(r.fatherId&&!$.has(r.fatherId)){const ue=n.entities.entities.get(r.fatherId);ue&&(H.push({member:ue,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!0}),$.add(ue.id))}const oe=Xo[xr.Family],M=10,W=$t+Ri+M,fe=Ii+A-(Ri+M),Ee=g+ba/2;e.font=`${Ri}px "Press Start 2P", Arial`,e.textBaseline="middle",e.fillText(oe,$t,Ee);const Ce=g+ba/2;HC(e,W,Ce,H,ba,fe),g+=ba+Qn,e.textBaseline="alphabetic";const $e=Xo[xr.Hitpoints];e.fillText($e,$t,g+Zt/2+Ri/3),jr(e,E,g,Ii,Zt,r.hitpoints/r.maxHitpoints,$r,GT),g+=Zt+Qn;const Fe=Xo[xr.Hunger];e.fillText(Fe,$t,g+Zt/2+Ri/3),jr(e,E,g,Ii,Zt,(Jt-r.hunger)/Jt,$r,BT),c={x:$t,y:g-Qn/2,width:Ii+A,height:Zt+Qn},g+=Zt+Qn,e.textBaseline="middle";const we=Xo[xr.Food];return e.fillText(we,$t,g+xa/2),XC(e,E,g+xa/2,r.food,xa,Ii),f={x:$t,y:g-Qn/5,width:Ii+A,height:xa+Qn},e.textBaseline="alphabetic",{hungerBarRect:c,foodBarRect:f}}function El(e,n,r,o,a,l=!1){var f;if(e.save(),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="#2c5234",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.translate(e.canvas.width/2-o.x,e.canvas.height/2-o.y),!l&&n.gameOver){e.restore(),bC(e,n);return}g1(e,n,r);const c=n.notifications.filter(g=>!g.isDismissed);for(const g of c){const p=(Math.sin(n.time*YI)+1)/2;e.globalAlpha=p*.5+.25,e.fillStyle=WI,g.targetArea&&e.fillRect(g.targetArea.x,g.targetArea.y,g.targetArea.width,g.targetArea.height),g.targetRadius&&(e.beginPath(),e.arc(g.targetRadius.x,g.targetRadius.y,g.targetRadius.radius,0,Math.PI*2),e.fill())}if(e.globalAlpha=1,ZC(e,n),e.restore(),!l){e.fillStyle=UT,e.font=`${Ri}px "Press Start 2P", Arial`,e.shadowColor=LT,e.shadowBlur=HT,n.uiButtons=[];const g=At(n);let p=null,m=null;if(g){const E=yt(n,g),P=ti(E),I=((f=g.partnerIds)==null?void 0:f.map(F=>n.entities.entities.get(F)).filter(F=>F!==void 0))||[],R=p1(e,n,g,P,I,E);p=R.hungerBarRect,m=R.foodBarRect}const S=H0(n,g==null?void 0:g.leaderId);BC(e,n,S,e.canvas.width,e.canvas.height);const{commandButtonsRect:A}=_C(e,n,e.canvas.width);if(e.shadowColor="transparent",e.shadowBlur=0,g&&(KC(e,n,o,e.canvas.width,e.canvas.height),a.length>0&&NC(e,a,g,o,e.canvas.width,e.canvas.height)),n.tutorialState.activeUIHighlights.size>0){const{activeUIHighlights:E}=n.tutorialState;E.has(ar.HUNGER_BAR)&&p&&ld(e,p,n.time),E.has(ar.FOOD_BAR)&&m&&ld(e,m,n.time),E.has(ar.COMMAND_BUTTONS)&&A&&ld(e,A,n.time)}if(n.tutorialState.isActive){const E=xC(e,n,e.canvas.width,e.canvas.height);E&&n.uiButtons.push({id:"tutorial-dismiss",action:Ue.DismissTutorial,rect:E,text:"",currentWidth:E.width,backgroundColor:"transparent",textColor:"transparent"})}JC(e,n,e.canvas.width,e.canvas.height),n.isPaused&&CC(e)}}const m1=bn.div`
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
`,v1=bn.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #2c5234;
`,S1=bn.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  z-index: 1;
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0.7) 100%);
`,y1=bn.h1`
  font-family: 'Press Start 2P', cursive;
  font-size: 4rem;
  color: #fff;
  text-shadow: 4px 4px 0px #ff0000;
  margin-bottom: 2rem;
`,A1=bn.button`
  font-family: 'Press Start 2P', cursive;
  font-size: 1.5rem;
  padding: 1rem 2rem;
  color: #fff;
  background-color: #ff0000;
  border: 2px solid #fff;
  box-shadow: 4px 4px 0px #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;

  &:hover {
    background-color: #fff;
    color: #ff0000;
    box-shadow: 4px 4px 0px #ff0000;
  }
`,cd="intro-soundtrack",Am=()=>{const{setAppState:e}=_l(),n=Pe.useRef(null),r=Pe.useRef(null),o=Pe.useRef(X_()),a=Pe.useRef(),l=Pe.useRef(o.current.viewportCenter),c=Pe.useRef();Pe.useEffect(()=>(Qd(Ie.SoundTrack1,{loop:!0,trackId:cd}),()=>{tm(cd,2)}),[]),Pe.useEffect(()=>{const m=n.current;if(!m)return;r.current=m.getContext("2d");const S=()=>{m&&r.current&&(m.width=window.innerWidth,m.height=window.innerHeight,El(r.current,o.current,!1,l.current,[],!0))};return S(),window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]),Pe.useEffect(()=>{const m=()=>{const A=Nw(o.current);if(A.length>0){const E=Math.floor(Math.random()*A.length);c.current=A[E].id}};m();const S=setInterval(m,FI);return()=>clearInterval(S)},[]);const[f,g]=Zm(m=>{if(!r.current)return;if(a.current===void 0){a.current=m;return}const S=Math.min((m-a.current)/1e3,1);o.current=xl(o.current,S);const A=c.current?o.current.entities.entities.get(c.current):void 0;if(A){const{mapDimensions:E}=o.current,{width:P,height:I}=E;let R={...A.position};const F=R.x-l.current.x;Math.abs(F)>P/2&&(F>0?R.x-=P:R.x+=P);const B=R.y-l.current.y;Math.abs(B)>I/2&&(B>0?R.y-=I:R.y+=I);let H=Wd(l.current,R,Ud*S);H={x:(H.x%P+P)%P,y:(H.y%I+I)%I},l.current=H}El(r.current,o.current,!1,l.current,[],!0),a.current=m});Pe.useEffect(()=>(g(),f),[g,f]);const p=()=>{tm(cd,2),e("game")};return Le.jsxs(m1,{children:[Le.jsx(v1,{ref:n}),Le.jsxs(S1,{children:[Le.jsx(y1,{children:"Tribe"}),Le.jsx(A1,{onClick:p,children:"Start Game"})]})]})};function T1(){return console.log("Tribe game initialized with detailed 2D world state."),V_()}const I1=({canvasRef:e,ctxRef:n,gameStateRef:r,isDebugOnRef:o,viewportCenterRef:a,playerActionHintsRef:l})=>(Pe.useEffect(()=>{const c=e.current;if(!c)return;n.current=c.getContext("2d");const f=()=>{c&&n.current&&r.current&&(c.width=window.innerWidth,c.height=window.innerHeight,El(n.current,r.current,o.current===!0,a.current,l.current,!1))};return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),Le.jsx("canvas",{ref:e,style:{display:"block",background:"#2c5234"}})),w1=(e,n,r)=>{let o;const a=Dw(e,r);if(a)if(n.isAdult&&a.type==="berryBush"&&a.food.length>0)o={action:Ae.AutopilotGather,targetEntityId:a.id};else if(n.isAdult&&a.type==="corpse"&&a.food.length>0)o={action:Ae.AutopilotGather,targetEntityId:a.id};else if(a.type==="human"){const l=a;n.isAdult&&oo(n,l,r)?o={action:Ae.AutopilotAttack,targetEntityId:l.id}:ur(n,l,r)?o={action:Ae.AutopilotProcreate,targetEntityId:l.id}:n.food.length>0&&!l.isAdult&&(l.motherId===n.id||l.fatherId===n.id)&&(o={action:Ae.AutopilotFeedChild,targetEntityId:l.id})}else a.type==="prey"?o={action:Ae.AutopilotAttack,targetEntityId:a.id}:a.type==="predator"&&(o={action:Ae.AutopilotAttack,targetEntityId:a.id});else r.autopilotControls.isManuallyPlanting&&n.food.filter(l=>l.type===ei.Berry).length>=gs&&Vd(e,r,1,Fl,n.id)?o={action:Ae.AutopilotPlant,position:e}:o={action:Ae.AutopilotMove,position:e};return o},E1=(e,n)=>{if(e.isPaused||!At(e))return;const o=e.autopilotControls.hoveredAutopilotAction;e.autopilotControls.activeAutopilotAction=void 0,o?(e.autopilotControls.activeAutopilotAction=o,(o.action===Ae.AutopilotMove||o.action===Ae.AutopilotGather)&&(e.hasPlayerMovedEver=!0),o.action===Ae.AutopilotPlant&&(e.hasPlayerPlantedBush=!0)):e.autopilotControls.activeAutopilotAction={action:Ae.AutopilotMove,position:n},e.autopilotControls.isManuallyMoving=!1,e.autopilotControls.isManuallyPlanting=!1},_1=(e,n,r)=>{var l,c;let o=!0,a=n;switch(e){case"m":n.isMuted=!n.isMuted,as(n.masterVolume,n.isMuted);break;case"=":case"+":const f=Math.min(1,n.masterVolume+.1);n.masterVolume=parseFloat(f.toFixed(1)),as(n.masterVolume,n.isMuted);break;case"-":const g=Math.max(0,n.masterVolume-.1);n.masterVolume=parseFloat(g.toFixed(1)),as(n.masterVolume,n.isMuted);break;case"t":a=xl(n,f0);break;case" ":case"p":n.isPaused=!n.isPaused;break;case"§":case"`":r.current=!r.current,r.current?a.debugCharacterId=((l=At(a))==null?void 0:l.id)??((c=Array.from(a.entities.entities.values()).find(m=>m.type==="human"||m.type==="prey"||m.type==="predator"))==null?void 0:c.id):a.debugCharacterId=void 0;break;case"tab":r.current=!0;const p=Array.from(a.entities.entities.values()).filter(m=>m.type==="human"||m.type==="prey"||m.type==="predator");if(p.length>0){const m=p.sort((P,I)=>{if(P.type==="human"&&P.isPlayer)return-1;if(I.type==="human"&&I.isPlayer)return 1;if(P.type!==I.type){const R={human:0,prey:1,predator:2},F=R[P.type]??999,B=R[I.type]??999;return F-B}return P.id-I.id}),S=a.debugCharacterId,E=((S?m.findIndex(P=>P.id===S):-1)+1)%m.length;a.debugCharacterId=m[E].id}else a.debugCharacterId=void 0;break;default:o=!1;break}return{newState:a,handled:o}},C1=(e,n,r,o,a)=>{const l={gameState:r};if(n&&["e","b","r","h"].includes(e)&&r.hasPlayerEnabledAutopilot++,e==="e"){if(n){r.autopilotControls.behaviors.gathering=!r.autopilotControls.behaviors.gathering;return}const c=ke(o,r,"berryBush",gt,p=>p.food.length>0&&o.food.length<o.maxFood),f=ke(o,r,"corpse",gt,p=>p.food.length>0&&o.food.length<o.maxFood);let g=null;c&&f?g=V(o.position,c.position,r.mapDimensions.width,r.mapDimensions.height)<=V(o.position,f.position,r.mapDimensions.width,r.mapDimensions.height)?c:f:g=c||f,g&&(o.activeAction="gathering",Me(l,Ie.Gather,o.position))}else if(e==="r"){if(n){r.autopilotControls.behaviors.procreation=!r.autopilotControls.behaviors.procreation;return}ke(o,r,"human",gt,f=>ur(o,f,r))&&(o.activeAction="procreating",Me(l,Ie.Procreate,o.position))}else if(e==="f")o.food.length>0&&(o.activeAction="eating",Me(l,Ie.Eat,o.position));else if(e==="h"){if(n){r.autopilotControls.behaviors.feedChildren=!r.autopilotControls.behaviors.feedChildren;return}const c=a.find(f=>f.type===Ae.FeedChild);c&&c.targetEntity&&(o.activeAction="feeding",o.target=c.targetEntity.id)}else if(e==="arrowup"||e==="w")o.direction.y=-1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowdown"||e==="s")o.direction.y=1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowleft"||e==="a")o.direction.x=-1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowright"||e==="d")o.direction.x=1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="q"){if(n){r.autopilotControls.behaviors.attack=!r.autopilotControls.behaviors.attack;return}const c=ke(o,r,"human",Oi,f=>oo(o,f,r));c&&(o.activeAction="attacking",o.attackTargetId=c.id)}else if(e==="b"){if(n){r.autopilotControls.behaviors.planting=!r.autopilotControls.behaviors.planting;return}if(a.find(f=>f.type===Ae.Plant)){const f=Vd(o.position,r,50,Ad);f&&(o.activeAction="planting",o.target=f,r.hasPlayerPlantedBush=!0)}}else e==="v"?(o.isCallingToAttack=!0,o.callToAttackEndTime=r.time+qr,Ne(r,ae.CallToAttack,o.position,qr),Me(l,Ie.CallToAttack,o.position)):e==="c"?(o.isCallingToFollow=!0,o.callToFollowEndTime=r.time+ms,Ne(r,ae.CallToFollow,o.position,ms),Me(l,Ie.CallToFollow,o.position)):e==="k"&&qd(o,r)},R1=(e,n,r,o)=>{e==="arrowup"||e==="w"||e==="arrowdown"||e==="s"?n.direction.y=0:(e==="arrowleft"||e==="a"||e==="arrowright"||e==="d")&&(n.direction.x=0),!o.current.has("arrowup")&&!o.current.has("arrowdown")&&!o.current.has("arrowleft")&&!o.current.has("arrowright")&&!o.current.has("w")&&!o.current.has("a")&&!o.current.has("s")&&!o.current.has("d")&&(n.activeAction==="moving"&&(n.activeAction="idle"),r.autopilotControls.isManuallyMoving=!1),!o.current.has("e")&&n.activeAction==="gathering"&&(n.activeAction="idle"),!o.current.has("f")&&n.activeAction==="eating"&&(n.activeAction="idle"),!o.current.has("r")&&n.activeAction==="procreating"&&(n.activeAction="idle"),!o.current.has("h")&&n.activeAction==="feeding"&&(n.activeAction="idle")},P1=(e,n,r)=>{let a=At(e);if(e.debugCharacterId){const l=e.entities.entities.get(e.debugCharacterId);l&&"position"in l&&(a=l)}if(a){const{mapDimensions:l}=e,{width:c,height:f}=l;let g={...a.position};const p=g.x-n.x;Math.abs(p)>c/2&&(p>0?g.x-=c:g.x+=c);const m=g.y-n.y;Math.abs(m)>f/2&&(m>0?g.y-=f:g.y+=f);let S=Wd(n,g,Ud*r);return S={x:(S.x%c+c)%c,y:(S.y%f+f)%f},S}return e.viewportCenter};function N1(e,n){const{width:r,height:o}=e.mapDimensions;e.viewportCenter={x:(n.x%r+r)%r,y:(n.y%o+o)%o}}const D1=(e,n,r)=>{const o={gameState:r},a=At(r);a&&Me(o,Ie.ButtonClick,a.position);const l=r.uiButtons.find(f=>f.id===e.id);l&&(l.lastActivated=Date.now()),n&&[Ue.CommandGather,Ue.CommandPlant,Ue.ToggleProcreationBehavior].includes(e.action)&&r.hasPlayerEnabledAutopilot++;const{behaviors:c}=r.autopilotControls;switch(e.action){case Ue.ToggleMute:r.isMuted=!r.isMuted,as(r.masterVolume,r.isMuted);break;case Ue.TogglePause:r.isPaused=!r.isPaused;break;case Ue.FastForward:return xl(r,f0);case Ue.DismissTutorial:r.tutorialState.isActive=!1;break;case Ue.CommandEat:a&&a.food.length>0&&(a.activeAction="eating");break;case Ue.CommandGather:n?c.gathering=!c.gathering:a&&(a.activeAction="gathering");break;case Ue.CommandPlant:n?c.planting=!c.planting:a&&(r.autopilotControls.isManuallyPlanting=!0);break;case Ue.ToggleProcreationBehavior:c.procreation=!c.procreation;break;case Ue.ToggleAttackBehavior:c.attack=!c.attack;break;case Ue.ToggleFeedChildBehavior:c.feedChildren=!c.feedChildren;break;case Ue.ToggleAutopilotFollowLeaderBehavior:c.followLeader=!c.followLeader;break;case Ue.CommandCallToAttack:a&&a.leaderId===a.id&&(a.isCallingToAttack=!0,a.callToAttackEndTime=r.time+qr,Ne(r,ae.CallToAttack,a.position,qr),Me(o,Ie.CallToAttack,a.position));break;case Ue.CommandFollowMe:n?c.followLeader=!c.followLeader:a&&a.leaderId===a.id&&(a.isCallingToFollow=!0,a.callToFollowEndTime=r.time+ms,Ne(r,ae.CallToFollow,a.position,ms),Me(o,Ie.CallToFollow,a.position));break;case Ue.CommandTribeSplit:a&&qd(a,r);break;case Ue.ToggleDiplomacy:if(a&&a.leaderId&&e.targetTribeId){const f=a.leaderId,g=e.targetTribeId,p=r.entities.entities.get(g),m=a.diplomacy,S=p==null?void 0:p.diplomacy;if(m&&S){const E=(m.get(g)||Ft.Friendly)===Ft.Friendly?Ft.Hostile:Ft.Friendly;m.set(g,E),S.set(f,E)}}break}return r};function k1(e,n,r){if(!e.notificationButtonRects)return!1;const o=At(e);for(const[a,l]of e.notificationButtonRects.dismiss.entries())if(n>=l.x&&n<=l.x+l.width&&r>=l.y&&r<=l.y+l.height)return xw(e,a),o&&Me({gameState:e},Ie.ButtonClick,o.position),!0;for(const[a,l]of e.notificationButtonRects.view.entries())if(n>=l.x&&n<=l.x+l.width&&r>=l.y&&r<=l.y+l.height){const c=e.notifications.find(f=>f.id===a);if(c){let f=c.targetPosition;if(!f&&c.targetEntityIds&&c.targetEntityIds.length>0){const g=e.entities.entities.get(c.targetEntityIds[0]);g&&(f=g.position)}return f&&N1(e,f),o&&Me({gameState:e},Ie.ButtonClick,o.position),c.highlightedEntityIds&&(c.renderHighlights=!c.renderHighlights),!0}}return!1}const O1=({isActive:e,gameStateRef:n,canvasRef:r,viewportCenterRef:o,playerActionHintsRef:a,isDebugOnRef:l,keysPressed:c})=>(Pe.useEffect(()=>{const f=g=>{if(!e()||n.current.gameOver||!r.current||!g.target||g.target!==r.current)return;const p=r.current.getBoundingClientRect(),m=g.clientX-p.left,S=g.clientY-p.top;if(k1(n.current,m,S))return;const E=n.current.uiButtons.find(I=>m>=I.rect.x&&m<=I.rect.x+I.rect.width&&S>=I.rect.y&&S<=I.rect.y+I.rect.height);if(E){n.current=D1(E,g.shiftKey,n.current);return}const P=qp({x:m,y:S},o.current,{width:r.current.width,height:r.current.height},n.current.mapDimensions);E1(n.current,P)};return window.addEventListener("mousedown",f),()=>{window.removeEventListener("mousedown",f)}},[e,r,n,o]),Pe.useEffect(()=>{const f=g=>{if(!e()||!r.current)return;const p=r.current.getBoundingClientRect(),m=g.clientX-p.left,S=g.clientY-p.top;n.current.mousePosition={x:m,y:S};let A;if(n.current.notificationButtonRects){for(const[P,I]of n.current.notificationButtonRects.dismiss.entries())if(m>=I.x&&m<=I.x+I.width&&S>=I.y&&S<=I.y+I.height){A=`notification-dismiss-${P}`;break}if(!A){for(const[P,I]of n.current.notificationButtonRects.view.entries())if(m>=I.x&&m<=I.x+I.width&&S>=I.y&&S<=I.y+I.height){A=`notification-view-${P}`;break}}}if(!A)for(let P=n.current.uiButtons.length-1;P>=0;P--){const I=n.current.uiButtons[P];if(m>=I.rect.x&&m<=I.rect.x+I.rect.width&&S>=I.rect.y&&S<=I.rect.y+I.rect.height){A=I.id;break}}if(n.current.hoveredButtonId=A,A){n.current.autopilotControls.hoveredAutopilotAction=void 0;return}const E=At(n.current);if(E){const P=qp({x:m,y:S},o.current,{width:r.current.width,height:r.current.height},n.current.mapDimensions);n.current.autopilotControls.hoveredAutopilotAction=w1(P,E,n.current)}else n.current.autopilotControls.hoveredAutopilotAction=void 0};return window.addEventListener("mousemove",f),()=>{window.removeEventListener("mousemove",f)}},[e,r,n,o]),Pe.useEffect(()=>{const f=p=>{if(!e()||n.current.gameOver)return;const m=p.key.toLowerCase();if((m===" "||m==="p"||m==="tab")&&p.preventDefault(),m==="escape"){n.current.autopilotControls.activeAutopilotAction=void 0;return}const S=_1(m,n.current,l);if(n.current=S.newState,S.handled)return;const A=At(n.current);A&&(c.current.add(m),C1(m,p.shiftKey,n.current,A,a.current))},g=p=>{if(!e()||n.current.gameOver)return;const m=p.key.toLowerCase();c.current.delete(m);const S=At(n.current);S&&R1(m,S,n.current,c)};return window.addEventListener("keydown",f),window.addEventListener("keyup",g),()=>{window.removeEventListener("keydown",f),window.removeEventListener("keyup",g)}},[e,n,a,l,c]),null),M1=({gameStateRef:e,ctxRef:n,isDebugOnRef:r,viewportCenterRef:o,playerActionHintsRef:a,keysPressed:l,canvasRef:c,setAppState:f,appState:g})=>{const p=Pe.useRef(),[m,S,A]=Zm(E=>{if(!n.current||!p.current){p.current=E;return}const P=Math.min(E-p.current,1e3)/1e3;e.current=xl(e.current,P);const I=At(e.current);I?a.current=Jd(e.current,I):a.current=[],o.current=P1(e.current,o.current,P),El(n.current,e.current,r.current,o.current,a.current,!1),p.current=E,e.current.gameOver&&g!=="gameOver"&&(Qd(Ie.GameOver,{masterVolume:e.current.masterVolume,isMuted:e.current.isMuted}),f("gameOver",{generations:e.current.generationCount,cause:e.current.causeOfGameOver||"Unknown"}))});return Pe.useEffect(()=>(S(),m),[S,m]),Le.jsx(O1,{isActive:A,gameStateRef:e,canvasRef:c,viewportCenterRef:o,playerActionHintsRef:a,isDebugOnRef:r,keysPressed:l})},Tm=()=>{const[e]=Pe.useState(()=>T1());return Le.jsx(F1,{initialState:e})},F1=({initialState:e})=>{const n=Pe.useRef(null),r=Pe.useRef(null),o=Pe.useRef(e),a=Pe.useRef(new Set),l=Pe.useRef(!1),c=Pe.useRef(e.viewportCenter),f=Pe.useRef([]),{appState:g,setAppState:p}=_l();return Le.jsxs(Le.Fragment,{children:[Le.jsx(I1,{canvasRef:n,ctxRef:r,gameStateRef:o,isDebugOnRef:l,viewportCenterRef:c,playerActionHintsRef:f}),Le.jsx(M1,{gameStateRef:o,ctxRef:r,isDebugOnRef:l,viewportCenterRef:c,playerActionHintsRef:f,keysPressed:a,canvasRef:n,setAppState:p,appState:g})]})},U1=bn.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  background-color: rgba(0, 0, 0, 0.75); // Semi-transparent overlay
  color: #fff;
  padding: 20px;
  z-index: 10; // Ensure it's on top
`,L1=bn.h1`
  font-family: 'Press Start 2P', cursive;
  font-size: 4rem;
  color: #ff4136; // Red for emphasis
  text-shadow: 4px 4px 0px #000;
  margin-bottom: 1.5rem;
`,rl=bn.p`
  font-family: 'Press Start 2P', cursive;
  font-size: 1.2rem;
  margin: 0.5em 0;
  color: #fff;
  text-shadow: 2px 2px 0px #000;
`,H1=bn.button`
  font-family: 'Press Start 2P', cursive;
  font-size: 1rem;
  padding: 1rem 2rem;
  margin-top: 2em;
  color: #fff;
  background-color: #ff4136; // Red button
  border: 2px solid #fff;
  box-shadow: 4px 4px 0px #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  text-transform: uppercase;

  &:hover {
    background-color: #fff;
    color: #ff4136;
    box-shadow: 4px 4px 0px #ff4136;
  }
`,B1=()=>{const{setAppState:e,gameOverDetails:n}=_l(),r=()=>{e("intro")};return Le.jsxs(U1,{children:[Le.jsx(L1,{children:"Game Over"}),Le.jsx(rl,{children:"Your tribe's lineage has ended."}),n&&Le.jsxs(Le.Fragment,{children:[Le.jsxs(rl,{children:["Generations Survived: ",n.generations]}),Le.jsxs(rl,{children:["Cause of Extinction: ",n.cause]})]}),!n&&Le.jsx(rl,{children:"Game details are unavailable."}),Le.jsx(H1,{onClick:r,children:"Return to Menu"})]})},G1=sA`
  /* CSS Reset */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    padding: 0;
    font-family: 'Press Start 2P', 'Arial', sans-serif;
    background-color: #121212;
    color: #f0f0f0;
    line-height: 1.6;
  }

  /* Additional global styles */
  h1, h2, h3, h4, h5, h6 {
    margin-top: 0;
  }

  button {
    cursor: pointer;
    font-family: inherit;
  }

  /* Prevent overflow issues */
  html, body {
    height: 100%;
    overflow-x: hidden;
  }

  /* Root element for React app */
  #root {
    height: 100%;
  }
`;function x1(e,n){Pe.useEffect(()=>{const r=()=>{const o=document.location.hash==="#game"?"game":"intro";n(o)};return window.addEventListener("hashchange",r),r(),()=>{window.removeEventListener("hashchange",r)}},[]),Pe.useEffect(()=>{e==="game"?document.location.hash="#game":e==="intro"&&(document.location.hash="")},[e])}const b1=()=>{const{appState:e,setAppState:n}=_l();x1(e,n);const r=()=>{switch(e){case"intro":return Le.jsx(Am,{});case"game":return Le.jsx(Tm,{});case"gameOver":return Le.jsxs(Le.Fragment,{children:[Le.jsx(Tm,{}),Le.jsx(B1,{})]});default:return Le.jsx(Am,{})}};return Le.jsxs(Le.Fragment,{children:[Le.jsx(G1,{}),r()]})},Im=document.getElementById("root");Im?qw().then(()=>{ry.createRoot(Im).render(Le.jsx(Bn.StrictMode,{children:Le.jsx(oy,{initialAppState:document.location.hash==="#game"?"game":"intro",children:Le.jsx(b1,{})})}))}):console.error("Failed to find the root element");
