var iy=Object.defineProperty;var ry=(e,n,r)=>n in e?iy(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var Ce=(e,n,r)=>ry(e,typeof n!="symbol"?n+"":n,r);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function Um(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fc={exports:{}},qo={},Lc={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fp;function oy(){if(fp)return Oe;fp=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),S=Symbol.iterator;function y(_){return _===null||typeof _!="object"?null:(_=S&&_[S]||_["@@iterator"],typeof _=="function"?_:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,T={};function C(_,k,K){this.props=_,this.context=k,this.refs=T,this.updater=K||w}C.prototype.isReactComponent={},C.prototype.setState=function(_,k){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,k,"setState")},C.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function F(){}F.prototype=C.prototype;function U(_,k,K){this.props=_,this.context=k,this.refs=T,this.updater=K||w}var L=U.prototype=new F;L.constructor=U,P(L,C.prototype),L.isPureReactComponent=!0;var W=Array.isArray,ae=Object.prototype.hasOwnProperty,M={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function te(_,k,K){var V,Te={},oe=null,Ie=null;if(k!=null)for(V in k.ref!==void 0&&(Ie=k.ref),k.key!==void 0&&(oe=""+k.key),k)ae.call(k,V)&&!G.hasOwnProperty(V)&&(Te[V]=k[V]);var ye=arguments.length-2;if(ye===1)Te.children=K;else if(1<ye){for(var X=Array(ye),ee=0;ee<ye;ee++)X[ee]=arguments[ee+2];Te.children=X}if(_&&_.defaultProps)for(V in ye=_.defaultProps,ye)Te[V]===void 0&&(Te[V]=ye[V]);return{$$typeof:e,type:_,key:oe,ref:Ie,props:Te,_owner:M.current}}function fe(_,k){return{$$typeof:e,type:_.type,key:k,ref:_.ref,props:_.props,_owner:_._owner}}function _e(_){return typeof _=="object"&&_!==null&&_.$$typeof===e}function Fe(_){var k={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(K){return k[K]})}var Ae=/\/+/g;function ve(_,k){return typeof _=="object"&&_!==null&&_.key!=null?Fe(""+_.key):k.toString(36)}function re(_,k,K,V,Te){var oe=typeof _;(oe==="undefined"||oe==="boolean")&&(_=null);var Ie=!1;if(_===null)Ie=!0;else switch(oe){case"string":case"number":Ie=!0;break;case"object":switch(_.$$typeof){case e:case n:Ie=!0}}if(Ie)return Ie=_,Te=Te(Ie),_=V===""?"."+ve(Ie,0):V,W(Te)?(K="",_!=null&&(K=_.replace(Ae,"$&/")+"/"),re(Te,k,K,"",function(ee){return ee})):Te!=null&&(_e(Te)&&(Te=fe(Te,K+(!Te.key||Ie&&Ie.key===Te.key?"":(""+Te.key).replace(Ae,"$&/")+"/")+_)),k.push(Te)),1;if(Ie=0,V=V===""?".":V+":",W(_))for(var ye=0;ye<_.length;ye++){oe=_[ye];var X=V+ve(oe,ye);Ie+=re(oe,k,K,X,Te)}else if(X=y(_),typeof X=="function")for(_=X.call(_),ye=0;!(oe=_.next()).done;)oe=oe.value,X=V+ve(oe,ye++),Ie+=re(oe,k,K,X,Te);else if(oe==="object")throw k=String(_),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.");return Ie}function Se(_,k,K){if(_==null)return _;var V=[],Te=0;return re(_,V,"","",function(oe){return k.call(K,oe,Te++)}),V}function le(_){if(_._status===-1){var k=_._result;k=k(),k.then(function(K){(_._status===0||_._status===-1)&&(_._status=1,_._result=K)},function(K){(_._status===0||_._status===-1)&&(_._status=2,_._result=K)}),_._status===-1&&(_._status=0,_._result=k)}if(_._status===1)return _._result.default;throw _._result}var q={current:null},x={transition:null},Y={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:x,ReactCurrentOwner:M};function z(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:Se,forEach:function(_,k,K){Se(_,function(){k.apply(this,arguments)},K)},count:function(_){var k=0;return Se(_,function(){k++}),k},toArray:function(_){return Se(_,function(k){return k})||[]},only:function(_){if(!_e(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},Oe.Component=C,Oe.Fragment=r,Oe.Profiler=a,Oe.PureComponent=U,Oe.StrictMode=o,Oe.Suspense=h,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Oe.act=z,Oe.cloneElement=function(_,k,K){if(_==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_+".");var V=P({},_.props),Te=_.key,oe=_.ref,Ie=_._owner;if(k!=null){if(k.ref!==void 0&&(oe=k.ref,Ie=M.current),k.key!==void 0&&(Te=""+k.key),_.type&&_.type.defaultProps)var ye=_.type.defaultProps;for(X in k)ae.call(k,X)&&!G.hasOwnProperty(X)&&(V[X]=k[X]===void 0&&ye!==void 0?ye[X]:k[X])}var X=arguments.length-2;if(X===1)V.children=K;else if(1<X){ye=Array(X);for(var ee=0;ee<X;ee++)ye[ee]=arguments[ee+2];V.children=ye}return{$$typeof:e,type:_.type,key:Te,ref:oe,props:V,_owner:Ie}},Oe.createContext=function(_){return _={$$typeof:c,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_.Provider={$$typeof:l,_context:_},_.Consumer=_},Oe.createElement=te,Oe.createFactory=function(_){var k=te.bind(null,_);return k.type=_,k},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(_){return{$$typeof:f,render:_}},Oe.isValidElement=_e,Oe.lazy=function(_){return{$$typeof:m,_payload:{_status:-1,_result:_},_init:le}},Oe.memo=function(_,k){return{$$typeof:p,type:_,compare:k===void 0?null:k}},Oe.startTransition=function(_){var k=x.transition;x.transition={};try{_()}finally{x.transition=k}},Oe.unstable_act=z,Oe.useCallback=function(_,k){return q.current.useCallback(_,k)},Oe.useContext=function(_){return q.current.useContext(_)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(_){return q.current.useDeferredValue(_)},Oe.useEffect=function(_,k){return q.current.useEffect(_,k)},Oe.useId=function(){return q.current.useId()},Oe.useImperativeHandle=function(_,k,K){return q.current.useImperativeHandle(_,k,K)},Oe.useInsertionEffect=function(_,k){return q.current.useInsertionEffect(_,k)},Oe.useLayoutEffect=function(_,k){return q.current.useLayoutEffect(_,k)},Oe.useMemo=function(_,k){return q.current.useMemo(_,k)},Oe.useReducer=function(_,k,K){return q.current.useReducer(_,k,K)},Oe.useRef=function(_){return q.current.useRef(_)},Oe.useState=function(_){return q.current.useState(_)},Oe.useSyncExternalStore=function(_,k,K){return q.current.useSyncExternalStore(_,k,K)},Oe.useTransition=function(){return q.current.useTransition()},Oe.version="18.3.1",Oe}var hp;function Od(){return hp||(hp=1,Lc.exports=oy()),Lc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gp;function sy(){if(gp)return qo;gp=1;var e=Od(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,h,p){var m,S={},y=null,w=null;p!==void 0&&(y=""+p),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(w=h.ref);for(m in h)o.call(h,m)&&!l.hasOwnProperty(m)&&(S[m]=h[m]);if(f&&f.defaultProps)for(m in h=f.defaultProps,h)S[m]===void 0&&(S[m]=h[m]);return{$$typeof:n,type:f,key:y,ref:w,props:S,_owner:a.current}}return qo.Fragment=r,qo.jsx=c,qo.jsxs=c,qo}var pp;function ay(){return pp||(pp=1,Fc.exports=sy()),Fc.exports}var He=ay(),De=Od();const xn=Um(De);var za={},Hc={exports:{}},Yt={},Bc={exports:{}},Gc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp;function ly(){return mp||(mp=1,function(e){function n(x,Y){var z=x.length;x.push(Y);e:for(;0<z;){var _=z-1>>>1,k=x[_];if(0<a(k,Y))x[_]=Y,x[z]=k,z=_;else break e}}function r(x){return x.length===0?null:x[0]}function o(x){if(x.length===0)return null;var Y=x[0],z=x.pop();if(z!==Y){x[0]=z;e:for(var _=0,k=x.length,K=k>>>1;_<K;){var V=2*(_+1)-1,Te=x[V],oe=V+1,Ie=x[oe];if(0>a(Te,z))oe<k&&0>a(Ie,Te)?(x[_]=Ie,x[oe]=z,_=oe):(x[_]=Te,x[V]=z,_=V);else if(oe<k&&0>a(Ie,z))x[_]=Ie,x[oe]=z,_=oe;else break e}}return Y}function a(x,Y){var z=x.sortIndex-Y.sortIndex;return z!==0?z:x.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();e.unstable_now=function(){return c.now()-f}}var h=[],p=[],m=1,S=null,y=3,w=!1,P=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(x){for(var Y=r(p);Y!==null;){if(Y.callback===null)o(p);else if(Y.startTime<=x)o(p),Y.sortIndex=Y.expirationTime,n(h,Y);else break;Y=r(p)}}function W(x){if(T=!1,L(x),!P)if(r(h)!==null)P=!0,le(ae);else{var Y=r(p);Y!==null&&q(W,Y.startTime-x)}}function ae(x,Y){P=!1,T&&(T=!1,F(te),te=-1),w=!0;var z=y;try{for(L(Y),S=r(h);S!==null&&(!(S.expirationTime>Y)||x&&!Fe());){var _=S.callback;if(typeof _=="function"){S.callback=null,y=S.priorityLevel;var k=_(S.expirationTime<=Y);Y=e.unstable_now(),typeof k=="function"?S.callback=k:S===r(h)&&o(h),L(Y)}else o(h);S=r(h)}if(S!==null)var K=!0;else{var V=r(p);V!==null&&q(W,V.startTime-Y),K=!1}return K}finally{S=null,y=z,w=!1}}var M=!1,G=null,te=-1,fe=5,_e=-1;function Fe(){return!(e.unstable_now()-_e<fe)}function Ae(){if(G!==null){var x=e.unstable_now();_e=x;var Y=!0;try{Y=G(!0,x)}finally{Y?ve():(M=!1,G=null)}}else M=!1}var ve;if(typeof U=="function")ve=function(){U(Ae)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,Se=re.port2;re.port1.onmessage=Ae,ve=function(){Se.postMessage(null)}}else ve=function(){C(Ae,0)};function le(x){G=x,M||(M=!0,ve())}function q(x,Y){te=C(function(){x(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(x){x.callback=null},e.unstable_continueExecution=function(){P||w||(P=!0,le(ae))},e.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<x?Math.floor(1e3/x):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(x){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var z=y;y=Y;try{return x()}finally{y=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(x,Y){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var z=y;y=x;try{return Y()}finally{y=z}},e.unstable_scheduleCallback=function(x,Y,z){var _=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?_+z:_):z=_,x){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=z+k,x={id:m++,callback:Y,priorityLevel:x,startTime:z,expirationTime:k,sortIndex:-1},z>_?(x.sortIndex=z,n(p,x),r(h)===null&&x===r(p)&&(T?(F(te),te=-1):T=!0,q(W,z-_))):(x.sortIndex=k,n(h,x),P||w||(P=!0,le(ae))),x},e.unstable_shouldYield=Fe,e.unstable_wrapCallback=function(x){var Y=y;return function(){var z=y;y=Y;try{return x.apply(this,arguments)}finally{y=z}}}}(Gc)),Gc}var vp;function uy(){return vp||(vp=1,Bc.exports=ly()),Bc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp;function cy(){if(Sp)return Yt;Sp=1;var e=Od(),n=uy();function r(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(t,i){c(t,i),c(t+"Capture",i)}function c(t,i){for(a[t]=i,t=0;t<i.length;t++)o.add(i[t])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},S={};function y(t){return h.call(S,t)?!0:h.call(m,t)?!1:p.test(t)?S[t]=!0:(m[t]=!0,!1)}function w(t,i,s,u){if(s!==null&&s.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function P(t,i,s,u){if(i===null||typeof i>"u"||w(t,i,s,u))return!0;if(u)return!1;if(s!==null)switch(s.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function T(t,i,s,u,d,g,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=s,this.propertyName=t,this.type=i,this.sanitizeURL=g,this.removeEmptyString=v}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){C[t]=new T(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];C[i]=new T(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){C[t]=new T(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){C[t]=new T(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){C[t]=new T(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){C[t]=new T(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){C[t]=new T(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){C[t]=new T(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){C[t]=new T(t,5,!1,t.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function U(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(F,U);C[i]=new T(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(F,U);C[i]=new T(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(F,U);C[i]=new T(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){C[t]=new T(t,1,!1,t.toLowerCase(),null,!1,!1)}),C.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){C[t]=new T(t,1,!1,t.toLowerCase(),null,!0,!0)});function L(t,i,s,u){var d=C.hasOwnProperty(i)?C[i]:null;(d!==null?d.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(P(i,s,d,u)&&(s=null),u||d===null?y(i)&&(s===null?t.removeAttribute(i):t.setAttribute(i,""+s)):d.mustUseProperty?t[d.propertyName]=s===null?d.type===3?!1:"":s:(i=d.attributeName,u=d.attributeNamespace,s===null?t.removeAttribute(i):(d=d.type,s=d===3||d===4&&s===!0?"":""+s,u?t.setAttributeNS(u,i,s):t.setAttribute(i,s))))}var W=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ae=Symbol.for("react.element"),M=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),_e=Symbol.for("react.provider"),Fe=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),x=Symbol.iterator;function Y(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}var z=Object.assign,_;function k(t){if(_===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);_=i&&i[1]||""}return`
`+_+t}var K=!1;function V(t,i){if(!t||K)return"";K=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(O){var u=O}Reflect.construct(t,[],i)}else{try{i.call()}catch(O){u=O}t.call(i.prototype)}else{try{throw Error()}catch(O){u=O}t()}}catch(O){if(O&&u&&typeof O.stack=="string"){for(var d=O.stack.split(`
`),g=u.stack.split(`
`),v=d.length-1,A=g.length-1;1<=v&&0<=A&&d[v]!==g[A];)A--;for(;1<=v&&0<=A;v--,A--)if(d[v]!==g[A]){if(v!==1||A!==1)do if(v--,A--,0>A||d[v]!==g[A]){var E=`
`+d[v].replace(" at new "," at ");return t.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",t.displayName)),E}while(1<=v&&0<=A);break}}}finally{K=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?k(t):""}function Te(t){switch(t.tag){case 5:return k(t.type);case 16:return k("Lazy");case 13:return k("Suspense");case 19:return k("SuspenseList");case 0:case 2:case 15:return t=V(t.type,!1),t;case 11:return t=V(t.type.render,!1),t;case 1:return t=V(t.type,!0),t;default:return""}}function oe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case M:return"Portal";case fe:return"Profiler";case te:return"StrictMode";case ve:return"Suspense";case re:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fe:return(t.displayName||"Context")+".Consumer";case _e:return(t._context.displayName||"Context")+".Provider";case Ae:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Se:return i=t.displayName||null,i!==null?i:oe(t.type)||"Memo";case le:i=t._payload,t=t._init;try{return oe(t(i))}catch{}}return null}function Ie(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(i);case 8:return i===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ye(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function X(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ee(t){var i=X(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),u=""+t[i];if(!t.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,g=s.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){u=""+v,g.call(this,v)}}),Object.defineProperty(t,i,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Ne(t){t._valueTracker||(t._valueTracker=ee(t))}function de(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),u="";return t&&(u=X(t)?t.checked?"true":"false":t.value),t=u,t!==s?(i.setValue(t),!0):!1}function Cn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ke(t,i){var s=i.checked;return z({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Ye(t,i){var s=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;s=ye(i.value!=null?i.value:s),t._wrapperState={initialChecked:u,initialValue:s,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Rn(t,i){i=i.checked,i!=null&&L(t,"checked",i,!1)}function Gt(t,i){Rn(t,i);var s=ye(i.value),u=i.type;if(s!=null)u==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?Pn(t,i.type,s):i.hasOwnProperty("defaultValue")&&Pn(t,i.type,ye(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function tn(t,i,s){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,s||i===t.value||(t.value=i),t.defaultValue=i}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Pn(t,i,s){(i!=="number"||Cn(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Nn=Array.isArray;function si(t,i,s,u){if(t=t.options,i){i={};for(var d=0;d<s.length;d++)i["$"+s[d]]=!0;for(s=0;s<t.length;s++)d=i.hasOwnProperty("$"+t[s].value),t[s].selected!==d&&(t[s].selected=d),d&&u&&(t[s].defaultSelected=!0)}else{for(s=""+ye(s),i=null,d=0;d<t.length;d++){if(t[d].value===s){t[d].selected=!0,u&&(t[d].defaultSelected=!0);return}i!==null||t[d].disabled||(i=t[d])}i!==null&&(i.selected=!0)}}function xi(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return z({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function If(t,i){var s=i.value;if(s==null){if(s=i.children,i=i.defaultValue,s!=null){if(i!=null)throw Error(r(92));if(Nn(s)){if(1<s.length)throw Error(r(93));s=s[0]}i=s}i==null&&(i=""),s=i}t._wrapperState={initialValue:ye(s)}}function wf(t,i){var s=ye(i.value),u=ye(i.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),i.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),u!=null&&(t.defaultValue=""+u)}function Ef(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function _f(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jl(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?_f(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Us,Cf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,s,u,d){MSApp.execUnsafeLocalFunction(function(){return t(i,s,u,d)})}:t}(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(Us=Us||document.createElement("div"),Us.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Us.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function go(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var po={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},av=["Webkit","ms","Moz","O"];Object.keys(po).forEach(function(t){av.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),po[i]=po[t]})});function Rf(t,i,s){return i==null||typeof i=="boolean"||i===""?"":s||typeof i!="number"||i===0||po.hasOwnProperty(t)&&po[t]?(""+i).trim():i+"px"}function Pf(t,i){t=t.style;for(var s in i)if(i.hasOwnProperty(s)){var u=s.indexOf("--")===0,d=Rf(s,i[s],u);s==="float"&&(s="cssFloat"),u?t.setProperty(s,d):t[s]=d}}var lv=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vl(t,i){if(i){if(lv[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function Xl(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kl=null;function Ql(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zl=null,pr=null,mr=null;function Nf(t){if(t=Ho(t)){if(typeof Zl!="function")throw Error(r(280));var i=t.stateNode;i&&(i=ia(i),Zl(t.stateNode,t.type,i))}}function Df(t){pr?mr?mr.push(t):mr=[t]:pr=t}function kf(){if(pr){var t=pr,i=mr;if(mr=pr=null,Nf(t),i)for(t=0;t<i.length;t++)Nf(i[t])}}function Of(t,i){return t(i)}function Mf(){}var ql=!1;function Uf(t,i,s){if(ql)return t(i,s);ql=!0;try{return Of(t,i,s)}finally{ql=!1,(pr!==null||mr!==null)&&(Mf(),kf())}}function mo(t,i){var s=t.stateNode;if(s===null)return null;var u=ia(s);if(u===null)return null;s=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(r(231,i,typeof s));return s}var Jl=!1;if(f)try{var vo={};Object.defineProperty(vo,"passive",{get:function(){Jl=!0}}),window.addEventListener("test",vo,vo),window.removeEventListener("test",vo,vo)}catch{Jl=!1}function uv(t,i,s,u,d,g,v,A,E){var O=Array.prototype.slice.call(arguments,3);try{i.apply(s,O)}catch(B){this.onError(B)}}var So=!1,Fs=null,Ls=!1,eu=null,cv={onError:function(t){So=!0,Fs=t}};function dv(t,i,s,u,d,g,v,A,E){So=!1,Fs=null,uv.apply(cv,arguments)}function fv(t,i,s,u,d,g,v,A,E){if(dv.apply(this,arguments),So){if(So){var O=Fs;So=!1,Fs=null}else throw Error(r(198));Ls||(Ls=!0,eu=O)}}function bi(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function Ff(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function Lf(t){if(bi(t)!==t)throw Error(r(188))}function hv(t){var i=t.alternate;if(!i){if(i=bi(t),i===null)throw Error(r(188));return i!==t?null:t}for(var s=t,u=i;;){var d=s.return;if(d===null)break;var g=d.alternate;if(g===null){if(u=d.return,u!==null){s=u;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===s)return Lf(d),t;if(g===u)return Lf(d),i;g=g.sibling}throw Error(r(188))}if(s.return!==u.return)s=d,u=g;else{for(var v=!1,A=d.child;A;){if(A===s){v=!0,s=d,u=g;break}if(A===u){v=!0,u=d,s=g;break}A=A.sibling}if(!v){for(A=g.child;A;){if(A===s){v=!0,s=g,u=d;break}if(A===u){v=!0,u=g,s=d;break}A=A.sibling}if(!v)throw Error(r(189))}}if(s.alternate!==u)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?t:i}function Hf(t){return t=hv(t),t!==null?Bf(t):null}function Bf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=Bf(t);if(i!==null)return i;t=t.sibling}return null}var Gf=n.unstable_scheduleCallback,xf=n.unstable_cancelCallback,gv=n.unstable_shouldYield,pv=n.unstable_requestPaint,nt=n.unstable_now,mv=n.unstable_getCurrentPriorityLevel,tu=n.unstable_ImmediatePriority,bf=n.unstable_UserBlockingPriority,Hs=n.unstable_NormalPriority,vv=n.unstable_LowPriority,zf=n.unstable_IdlePriority,Bs=null,Dn=null;function Sv(t){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Bs,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:Tv,yv=Math.log,Av=Math.LN2;function Tv(t){return t>>>=0,t===0?32:31-(yv(t)/Av|0)|0}var Gs=64,xs=4194304;function yo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bs(t,i){var s=t.pendingLanes;if(s===0)return 0;var u=0,d=t.suspendedLanes,g=t.pingedLanes,v=s&268435455;if(v!==0){var A=v&~d;A!==0?u=yo(A):(g&=v,g!==0&&(u=yo(g)))}else v=s&~d,v!==0?u=yo(v):g!==0&&(u=yo(g));if(u===0)return 0;if(i!==0&&i!==u&&(i&d)===0&&(d=u&-u,g=i&-i,d>=g||d===16&&(g&4194240)!==0))return i;if((u&4)!==0&&(u|=s&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=u;0<i;)s=31-hn(i),d=1<<s,u|=t[s],i&=~d;return u}function Iv(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wv(t,i){for(var s=t.suspendedLanes,u=t.pingedLanes,d=t.expirationTimes,g=t.pendingLanes;0<g;){var v=31-hn(g),A=1<<v,E=d[v];E===-1?((A&s)===0||(A&u)!==0)&&(d[v]=Iv(A,i)):E<=i&&(t.expiredLanes|=A),g&=~A}}function nu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Wf(){var t=Gs;return Gs<<=1,(Gs&4194240)===0&&(Gs=64),t}function iu(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function Ao(t,i,s){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-hn(i),t[i]=s}function Ev(t,i){var s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<s;){var d=31-hn(s),g=1<<d;i[d]=0,u[d]=-1,t[d]=-1,s&=~g}}function ru(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var u=31-hn(s),d=1<<u;d&i|t[u]&i&&(t[u]|=i),s&=~d}}var ze=0;function $f(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Yf,ou,jf,Vf,Xf,su=!1,zs=[],ai=null,li=null,ui=null,To=new Map,Io=new Map,ci=[],_v="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kf(t,i){switch(t){case"focusin":case"focusout":ai=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":To.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Io.delete(i.pointerId)}}function wo(t,i,s,u,d,g){return t===null||t.nativeEvent!==g?(t={blockedOn:i,domEventName:s,eventSystemFlags:u,nativeEvent:g,targetContainers:[d]},i!==null&&(i=Ho(i),i!==null&&ou(i)),t):(t.eventSystemFlags|=u,i=t.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),t)}function Cv(t,i,s,u,d){switch(i){case"focusin":return ai=wo(ai,t,i,s,u,d),!0;case"dragenter":return li=wo(li,t,i,s,u,d),!0;case"mouseover":return ui=wo(ui,t,i,s,u,d),!0;case"pointerover":var g=d.pointerId;return To.set(g,wo(To.get(g)||null,t,i,s,u,d)),!0;case"gotpointercapture":return g=d.pointerId,Io.set(g,wo(Io.get(g)||null,t,i,s,u,d)),!0}return!1}function Qf(t){var i=zi(t.target);if(i!==null){var s=bi(i);if(s!==null){if(i=s.tag,i===13){if(i=Ff(s),i!==null){t.blockedOn=i,Xf(t.priority,function(){jf(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ws(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=lu(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var u=new s.constructor(s.type,s);Kl=u,s.target.dispatchEvent(u),Kl=null}else return i=Ho(s),i!==null&&ou(i),t.blockedOn=s,!1;i.shift()}return!0}function Zf(t,i,s){Ws(t)&&s.delete(i)}function Rv(){su=!1,ai!==null&&Ws(ai)&&(ai=null),li!==null&&Ws(li)&&(li=null),ui!==null&&Ws(ui)&&(ui=null),To.forEach(Zf),Io.forEach(Zf)}function Eo(t,i){t.blockedOn===i&&(t.blockedOn=null,su||(su=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Rv)))}function _o(t){function i(d){return Eo(d,t)}if(0<zs.length){Eo(zs[0],t);for(var s=1;s<zs.length;s++){var u=zs[s];u.blockedOn===t&&(u.blockedOn=null)}}for(ai!==null&&Eo(ai,t),li!==null&&Eo(li,t),ui!==null&&Eo(ui,t),To.forEach(i),Io.forEach(i),s=0;s<ci.length;s++)u=ci[s],u.blockedOn===t&&(u.blockedOn=null);for(;0<ci.length&&(s=ci[0],s.blockedOn===null);)Qf(s),s.blockedOn===null&&ci.shift()}var vr=W.ReactCurrentBatchConfig,$s=!0;function Pv(t,i,s,u){var d=ze,g=vr.transition;vr.transition=null;try{ze=1,au(t,i,s,u)}finally{ze=d,vr.transition=g}}function Nv(t,i,s,u){var d=ze,g=vr.transition;vr.transition=null;try{ze=4,au(t,i,s,u)}finally{ze=d,vr.transition=g}}function au(t,i,s,u){if($s){var d=lu(t,i,s,u);if(d===null)_u(t,i,u,Ys,s),Kf(t,u);else if(Cv(d,t,i,s,u))u.stopPropagation();else if(Kf(t,u),i&4&&-1<_v.indexOf(t)){for(;d!==null;){var g=Ho(d);if(g!==null&&Yf(g),g=lu(t,i,s,u),g===null&&_u(t,i,u,Ys,s),g===d)break;d=g}d!==null&&u.stopPropagation()}else _u(t,i,u,null,s)}}var Ys=null;function lu(t,i,s,u){if(Ys=null,t=Ql(u),t=zi(t),t!==null)if(i=bi(t),i===null)t=null;else if(s=i.tag,s===13){if(t=Ff(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return Ys=t,null}function qf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mv()){case tu:return 1;case bf:return 4;case Hs:case vv:return 16;case zf:return 536870912;default:return 16}default:return 16}}var di=null,uu=null,js=null;function Jf(){if(js)return js;var t,i=uu,s=i.length,u,d="value"in di?di.value:di.textContent,g=d.length;for(t=0;t<s&&i[t]===d[t];t++);var v=s-t;for(u=1;u<=v&&i[s-u]===d[g-u];u++);return js=d.slice(t,1<u?1-u:void 0)}function Vs(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Xs(){return!0}function eh(){return!1}function Xt(t){function i(s,u,d,g,v){this._reactName=s,this._targetInst=d,this.type=u,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(s=t[A],this[A]=s?s(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Xs:eh,this.isPropagationStopped=eh,this}return z(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),i}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cu=Xt(Sr),Co=z({},Sr,{view:0,detail:0}),Dv=Xt(Co),du,fu,Ro,Ks=z({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ro&&(Ro&&t.type==="mousemove"?(du=t.screenX-Ro.screenX,fu=t.screenY-Ro.screenY):fu=du=0,Ro=t),du)},movementY:function(t){return"movementY"in t?t.movementY:fu}}),th=Xt(Ks),kv=z({},Ks,{dataTransfer:0}),Ov=Xt(kv),Mv=z({},Co,{relatedTarget:0}),hu=Xt(Mv),Uv=z({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),Fv=Xt(Uv),Lv=z({},Sr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Hv=Xt(Lv),Bv=z({},Sr,{data:0}),nh=Xt(Bv),Gv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zv(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=bv[t])?!!i[t]:!1}function gu(){return zv}var Wv=z({},Co,{key:function(t){if(t.key){var i=Gv[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Vs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gu,charCode:function(t){return t.type==="keypress"?Vs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$v=Xt(Wv),Yv=z({},Ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ih=Xt(Yv),jv=z({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gu}),Vv=Xt(jv),Xv=z({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kv=Xt(Xv),Qv=z({},Ks,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zv=Xt(Qv),qv=[9,13,27,32],pu=f&&"CompositionEvent"in window,Po=null;f&&"documentMode"in document&&(Po=document.documentMode);var Jv=f&&"TextEvent"in window&&!Po,rh=f&&(!pu||Po&&8<Po&&11>=Po),oh=" ",sh=!1;function ah(t,i){switch(t){case"keyup":return qv.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yr=!1;function eS(t,i){switch(t){case"compositionend":return lh(i);case"keypress":return i.which!==32?null:(sh=!0,oh);case"textInput":return t=i.data,t===oh&&sh?null:t;default:return null}}function tS(t,i){if(yr)return t==="compositionend"||!pu&&ah(t,i)?(t=Jf(),js=uu=di=null,yr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return rh&&i.locale!=="ko"?null:i.data;default:return null}}var nS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!nS[t.type]:i==="textarea"}function ch(t,i,s,u){Df(u),i=ea(i,"onChange"),0<i.length&&(s=new cu("onChange","change",null,s,u),t.push({event:s,listeners:i}))}var No=null,Do=null;function iS(t){Ph(t,0)}function Qs(t){var i=Er(t);if(de(i))return t}function rS(t,i){if(t==="change")return i}var dh=!1;if(f){var mu;if(f){var vu="oninput"in document;if(!vu){var fh=document.createElement("div");fh.setAttribute("oninput","return;"),vu=typeof fh.oninput=="function"}mu=vu}else mu=!1;dh=mu&&(!document.documentMode||9<document.documentMode)}function hh(){No&&(No.detachEvent("onpropertychange",gh),Do=No=null)}function gh(t){if(t.propertyName==="value"&&Qs(Do)){var i=[];ch(i,Do,t,Ql(t)),Uf(iS,i)}}function oS(t,i,s){t==="focusin"?(hh(),No=i,Do=s,No.attachEvent("onpropertychange",gh)):t==="focusout"&&hh()}function sS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qs(Do)}function aS(t,i){if(t==="click")return Qs(i)}function lS(t,i){if(t==="input"||t==="change")return Qs(i)}function uS(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var gn=typeof Object.is=="function"?Object.is:uS;function ko(t,i){if(gn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),u=Object.keys(i);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var d=s[u];if(!h.call(i,d)||!gn(t[d],i[d]))return!1}return!0}function ph(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mh(t,i){var s=ph(t);t=0;for(var u;s;){if(s.nodeType===3){if(u=t+s.textContent.length,t<=i&&u>=i)return{node:s,offset:i-t};t=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ph(s)}}function vh(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?vh(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Sh(){for(var t=window,i=Cn();i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=Cn(t.document)}return i}function Su(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function cS(t){var i=Sh(),s=t.focusedElem,u=t.selectionRange;if(i!==s&&s&&s.ownerDocument&&vh(s.ownerDocument.documentElement,s)){if(u!==null&&Su(s)){if(i=u.start,t=u.end,t===void 0&&(t=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(t,s.value.length);else if(t=(i=s.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var d=s.textContent.length,g=Math.min(u.start,d);u=u.end===void 0?g:Math.min(u.end,d),!t.extend&&g>u&&(d=u,u=g,g=d),d=mh(s,g);var v=mh(s,u);d&&v&&(t.rangeCount!==1||t.anchorNode!==d.node||t.anchorOffset!==d.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),t.removeAllRanges(),g>u?(t.addRange(i),t.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),t.addRange(i)))}}for(i=[],t=s;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)t=i[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dS=f&&"documentMode"in document&&11>=document.documentMode,Ar=null,yu=null,Oo=null,Au=!1;function yh(t,i,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Au||Ar==null||Ar!==Cn(u)||(u=Ar,"selectionStart"in u&&Su(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Oo&&ko(Oo,u)||(Oo=u,u=ea(yu,"onSelect"),0<u.length&&(i=new cu("onSelect","select",null,i,s),t.push({event:i,listeners:u}),i.target=Ar)))}function Zs(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var Tr={animationend:Zs("Animation","AnimationEnd"),animationiteration:Zs("Animation","AnimationIteration"),animationstart:Zs("Animation","AnimationStart"),transitionend:Zs("Transition","TransitionEnd")},Tu={},Ah={};f&&(Ah=document.createElement("div").style,"AnimationEvent"in window||(delete Tr.animationend.animation,delete Tr.animationiteration.animation,delete Tr.animationstart.animation),"TransitionEvent"in window||delete Tr.transitionend.transition);function qs(t){if(Tu[t])return Tu[t];if(!Tr[t])return t;var i=Tr[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in Ah)return Tu[t]=i[s];return t}var Th=qs("animationend"),Ih=qs("animationiteration"),wh=qs("animationstart"),Eh=qs("transitionend"),_h=new Map,Ch="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fi(t,i){_h.set(t,i),l(i,[t])}for(var Iu=0;Iu<Ch.length;Iu++){var wu=Ch[Iu],fS=wu.toLowerCase(),hS=wu[0].toUpperCase()+wu.slice(1);fi(fS,"on"+hS)}fi(Th,"onAnimationEnd"),fi(Ih,"onAnimationIteration"),fi(wh,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(Eh,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mo));function Rh(t,i,s){var u=t.type||"unknown-event";t.currentTarget=s,fv(u,i,void 0,t),t.currentTarget=null}function Ph(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var u=t[s],d=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var v=u.length-1;0<=v;v--){var A=u[v],E=A.instance,O=A.currentTarget;if(A=A.listener,E!==g&&d.isPropagationStopped())break e;Rh(d,A,O),g=E}else for(v=0;v<u.length;v++){if(A=u[v],E=A.instance,O=A.currentTarget,A=A.listener,E!==g&&d.isPropagationStopped())break e;Rh(d,A,O),g=E}}}if(Ls)throw t=eu,Ls=!1,eu=null,t}function je(t,i){var s=i[ku];s===void 0&&(s=i[ku]=new Set);var u=t+"__bubble";s.has(u)||(Nh(i,t,2,!1),s.add(u))}function Eu(t,i,s){var u=0;i&&(u|=4),Nh(s,t,u,i)}var Js="_reactListening"+Math.random().toString(36).slice(2);function Uo(t){if(!t[Js]){t[Js]=!0,o.forEach(function(s){s!=="selectionchange"&&(gS.has(s)||Eu(s,!1,t),Eu(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Js]||(i[Js]=!0,Eu("selectionchange",!1,i))}}function Nh(t,i,s,u){switch(qf(i)){case 1:var d=Pv;break;case 4:d=Nv;break;default:d=au}s=d.bind(null,i,s,t),d=void 0,!Jl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),u?d!==void 0?t.addEventListener(i,s,{capture:!0,passive:d}):t.addEventListener(i,s,!0):d!==void 0?t.addEventListener(i,s,{passive:d}):t.addEventListener(i,s,!1)}function _u(t,i,s,u,d){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var A=u.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(v===4)for(v=u.return;v!==null;){var E=v.tag;if((E===3||E===4)&&(E=v.stateNode.containerInfo,E===d||E.nodeType===8&&E.parentNode===d))return;v=v.return}for(;A!==null;){if(v=zi(A),v===null)return;if(E=v.tag,E===5||E===6){u=g=v;continue e}A=A.parentNode}}u=u.return}Uf(function(){var O=g,B=Ql(s),b=[];e:{var H=_h.get(t);if(H!==void 0){var Q=cu,J=t;switch(t){case"keypress":if(Vs(s)===0)break e;case"keydown":case"keyup":Q=$v;break;case"focusin":J="focus",Q=hu;break;case"focusout":J="blur",Q=hu;break;case"beforeblur":case"afterblur":Q=hu;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=th;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Ov;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Vv;break;case Th:case Ih:case wh:Q=Fv;break;case Eh:Q=Kv;break;case"scroll":Q=Dv;break;case"wheel":Q=Zv;break;case"copy":case"cut":case"paste":Q=Hv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=ih}var ne=(i&4)!==0,it=!ne&&t==="scroll",N=ne?H!==null?H+"Capture":null:H;ne=[];for(var R=O,D;R!==null;){D=R;var $=D.stateNode;if(D.tag===5&&$!==null&&(D=$,N!==null&&($=mo(R,N),$!=null&&ne.push(Fo(R,$,D)))),it)break;R=R.return}0<ne.length&&(H=new Q(H,J,null,s,B),b.push({event:H,listeners:ne}))}}if((i&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",H&&s!==Kl&&(J=s.relatedTarget||s.fromElement)&&(zi(J)||J[$n]))break e;if((Q||H)&&(H=B.window===B?B:(H=B.ownerDocument)?H.defaultView||H.parentWindow:window,Q?(J=s.relatedTarget||s.toElement,Q=O,J=J?zi(J):null,J!==null&&(it=bi(J),J!==it||J.tag!==5&&J.tag!==6)&&(J=null)):(Q=null,J=O),Q!==J)){if(ne=th,$="onMouseLeave",N="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(ne=ih,$="onPointerLeave",N="onPointerEnter",R="pointer"),it=Q==null?H:Er(Q),D=J==null?H:Er(J),H=new ne($,R+"leave",Q,s,B),H.target=it,H.relatedTarget=D,$=null,zi(B)===O&&(ne=new ne(N,R+"enter",J,s,B),ne.target=D,ne.relatedTarget=it,$=ne),it=$,Q&&J)t:{for(ne=Q,N=J,R=0,D=ne;D;D=Ir(D))R++;for(D=0,$=N;$;$=Ir($))D++;for(;0<R-D;)ne=Ir(ne),R--;for(;0<D-R;)N=Ir(N),D--;for(;R--;){if(ne===N||N!==null&&ne===N.alternate)break t;ne=Ir(ne),N=Ir(N)}ne=null}else ne=null;Q!==null&&Dh(b,H,Q,ne,!1),J!==null&&it!==null&&Dh(b,it,J,ne,!0)}}e:{if(H=O?Er(O):window,Q=H.nodeName&&H.nodeName.toLowerCase(),Q==="select"||Q==="input"&&H.type==="file")var se=rS;else if(uh(H))if(dh)se=lS;else{se=sS;var he=oS}else(Q=H.nodeName)&&Q.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(se=aS);if(se&&(se=se(t,O))){ch(b,se,s,B);break e}he&&he(t,H,O),t==="focusout"&&(he=H._wrapperState)&&he.controlled&&H.type==="number"&&Pn(H,"number",H.value)}switch(he=O?Er(O):window,t){case"focusin":(uh(he)||he.contentEditable==="true")&&(Ar=he,yu=O,Oo=null);break;case"focusout":Oo=yu=Ar=null;break;case"mousedown":Au=!0;break;case"contextmenu":case"mouseup":case"dragend":Au=!1,yh(b,s,B);break;case"selectionchange":if(dS)break;case"keydown":case"keyup":yh(b,s,B)}var ge;if(pu)e:{switch(t){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else yr?ah(t,s)&&(we="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(we="onCompositionStart");we&&(rh&&s.locale!=="ko"&&(yr||we!=="onCompositionStart"?we==="onCompositionEnd"&&yr&&(ge=Jf()):(di=B,uu="value"in di?di.value:di.textContent,yr=!0)),he=ea(O,we),0<he.length&&(we=new nh(we,t,null,s,B),b.push({event:we,listeners:he}),ge?we.data=ge:(ge=lh(s),ge!==null&&(we.data=ge)))),(ge=Jv?eS(t,s):tS(t,s))&&(O=ea(O,"onBeforeInput"),0<O.length&&(B=new nh("onBeforeInput","beforeinput",null,s,B),b.push({event:B,listeners:O}),B.data=ge))}Ph(b,i)})}function Fo(t,i,s){return{instance:t,listener:i,currentTarget:s}}function ea(t,i){for(var s=i+"Capture",u=[];t!==null;){var d=t,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=mo(t,s),g!=null&&u.unshift(Fo(t,g,d)),g=mo(t,i),g!=null&&u.push(Fo(t,g,d))),t=t.return}return u}function Ir(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Dh(t,i,s,u,d){for(var g=i._reactName,v=[];s!==null&&s!==u;){var A=s,E=A.alternate,O=A.stateNode;if(E!==null&&E===u)break;A.tag===5&&O!==null&&(A=O,d?(E=mo(s,g),E!=null&&v.unshift(Fo(s,E,A))):d||(E=mo(s,g),E!=null&&v.push(Fo(s,E,A)))),s=s.return}v.length!==0&&t.push({event:i,listeners:v})}var pS=/\r\n?/g,mS=/\u0000|\uFFFD/g;function kh(t){return(typeof t=="string"?t:""+t).replace(pS,`
`).replace(mS,"")}function ta(t,i,s){if(i=kh(i),kh(t)!==i&&s)throw Error(r(425))}function na(){}var Cu=null,Ru=null;function Pu(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Nu=typeof setTimeout=="function"?setTimeout:void 0,vS=typeof clearTimeout=="function"?clearTimeout:void 0,Oh=typeof Promise=="function"?Promise:void 0,SS=typeof queueMicrotask=="function"?queueMicrotask:typeof Oh<"u"?function(t){return Oh.resolve(null).then(t).catch(yS)}:Nu;function yS(t){setTimeout(function(){throw t})}function Du(t,i){var s=i,u=0;do{var d=s.nextSibling;if(t.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(u===0){t.removeChild(d),_o(i);return}u--}else s!=="$"&&s!=="$?"&&s!=="$!"||u++;s=d}while(s);_o(i)}function hi(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function Mh(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return t;i--}else s==="/$"&&i++}t=t.previousSibling}return null}var wr=Math.random().toString(36).slice(2),kn="__reactFiber$"+wr,Lo="__reactProps$"+wr,$n="__reactContainer$"+wr,ku="__reactEvents$"+wr,AS="__reactListeners$"+wr,TS="__reactHandles$"+wr;function zi(t){var i=t[kn];if(i)return i;for(var s=t.parentNode;s;){if(i=s[$n]||s[kn]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=Mh(t);t!==null;){if(s=t[kn])return s;t=Mh(t)}return i}t=s,s=t.parentNode}return null}function Ho(t){return t=t[kn]||t[$n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Er(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function ia(t){return t[Lo]||null}var Ou=[],_r=-1;function gi(t){return{current:t}}function Ve(t){0>_r||(t.current=Ou[_r],Ou[_r]=null,_r--)}function $e(t,i){_r++,Ou[_r]=t.current,t.current=i}var pi={},wt=gi(pi),xt=gi(!1),Wi=pi;function Cr(t,i){var s=t.type.contextTypes;if(!s)return pi;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in s)d[g]=i[g];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=d),d}function bt(t){return t=t.childContextTypes,t!=null}function ra(){Ve(xt),Ve(wt)}function Uh(t,i,s){if(wt.current!==pi)throw Error(r(168));$e(wt,i),$e(xt,s)}function Fh(t,i,s){var u=t.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return s;u=u.getChildContext();for(var d in u)if(!(d in i))throw Error(r(108,Ie(t)||"Unknown",d));return z({},s,u)}function oa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pi,Wi=wt.current,$e(wt,t),$e(xt,xt.current),!0}function Lh(t,i,s){var u=t.stateNode;if(!u)throw Error(r(169));s?(t=Fh(t,i,Wi),u.__reactInternalMemoizedMergedChildContext=t,Ve(xt),Ve(wt),$e(wt,t)):Ve(xt),$e(xt,s)}var Yn=null,sa=!1,Mu=!1;function Hh(t){Yn===null?Yn=[t]:Yn.push(t)}function IS(t){sa=!0,Hh(t)}function mi(){if(!Mu&&Yn!==null){Mu=!0;var t=0,i=ze;try{var s=Yn;for(ze=1;t<s.length;t++){var u=s[t];do u=u(!0);while(u!==null)}Yn=null,sa=!1}catch(d){throw Yn!==null&&(Yn=Yn.slice(t+1)),Gf(tu,mi),d}finally{ze=i,Mu=!1}}return null}var Rr=[],Pr=0,aa=null,la=0,nn=[],rn=0,$i=null,jn=1,Vn="";function Yi(t,i){Rr[Pr++]=la,Rr[Pr++]=aa,aa=t,la=i}function Bh(t,i,s){nn[rn++]=jn,nn[rn++]=Vn,nn[rn++]=$i,$i=t;var u=jn;t=Vn;var d=32-hn(u)-1;u&=~(1<<d),s+=1;var g=32-hn(i)+d;if(30<g){var v=d-d%5;g=(u&(1<<v)-1).toString(32),u>>=v,d-=v,jn=1<<32-hn(i)+d|s<<d|u,Vn=g+t}else jn=1<<g|s<<d|u,Vn=t}function Uu(t){t.return!==null&&(Yi(t,1),Bh(t,1,0))}function Fu(t){for(;t===aa;)aa=Rr[--Pr],Rr[Pr]=null,la=Rr[--Pr],Rr[Pr]=null;for(;t===$i;)$i=nn[--rn],nn[rn]=null,Vn=nn[--rn],nn[rn]=null,jn=nn[--rn],nn[rn]=null}var Kt=null,Qt=null,Qe=!1,pn=null;function Gh(t,i){var s=ln(5,null,null,0);s.elementType="DELETED",s.stateNode=i,s.return=t,i=t.deletions,i===null?(t.deletions=[s],t.flags|=16):i.push(s)}function xh(t,i){switch(t.tag){case 5:var s=t.type;return i=i.nodeType!==1||s.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,Kt=t,Qt=hi(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,Kt=t,Qt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(s=$i!==null?{id:jn,overflow:Vn}:null,t.memoizedState={dehydrated:i,treeContext:s,retryLane:1073741824},s=ln(18,null,null,0),s.stateNode=i,s.return=t,t.child=s,Kt=t,Qt=null,!0):!1;default:return!1}}function Lu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hu(t){if(Qe){var i=Qt;if(i){var s=i;if(!xh(t,i)){if(Lu(t))throw Error(r(418));i=hi(s.nextSibling);var u=Kt;i&&xh(t,i)?Gh(u,s):(t.flags=t.flags&-4097|2,Qe=!1,Kt=t)}}else{if(Lu(t))throw Error(r(418));t.flags=t.flags&-4097|2,Qe=!1,Kt=t}}}function bh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Kt=t}function ua(t){if(t!==Kt)return!1;if(!Qe)return bh(t),Qe=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!Pu(t.type,t.memoizedProps)),i&&(i=Qt)){if(Lu(t))throw zh(),Error(r(418));for(;i;)Gh(t,i),i=hi(i.nextSibling)}if(bh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(i===0){Qt=hi(t.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++}t=t.nextSibling}Qt=null}}else Qt=Kt?hi(t.stateNode.nextSibling):null;return!0}function zh(){for(var t=Qt;t;)t=hi(t.nextSibling)}function Nr(){Qt=Kt=null,Qe=!1}function Bu(t){pn===null?pn=[t]:pn.push(t)}var wS=W.ReactCurrentBatchConfig;function Bo(t,i,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var u=s.stateNode}if(!u)throw Error(r(147,t));var d=u,g=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(v){var A=d.refs;v===null?delete A[g]:A[g]=v},i._stringRef=g,i)}if(typeof t!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,t))}return t}function ca(t,i){throw t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function Wh(t){var i=t._init;return i(t._payload)}function $h(t){function i(N,R){if(t){var D=N.deletions;D===null?(N.deletions=[R],N.flags|=16):D.push(R)}}function s(N,R){if(!t)return null;for(;R!==null;)i(N,R),R=R.sibling;return null}function u(N,R){for(N=new Map;R!==null;)R.key!==null?N.set(R.key,R):N.set(R.index,R),R=R.sibling;return N}function d(N,R){return N=Ei(N,R),N.index=0,N.sibling=null,N}function g(N,R,D){return N.index=D,t?(D=N.alternate,D!==null?(D=D.index,D<R?(N.flags|=2,R):D):(N.flags|=2,R)):(N.flags|=1048576,R)}function v(N){return t&&N.alternate===null&&(N.flags|=2),N}function A(N,R,D,$){return R===null||R.tag!==6?(R=Nc(D,N.mode,$),R.return=N,R):(R=d(R,D),R.return=N,R)}function E(N,R,D,$){var se=D.type;return se===G?B(N,R,D.props.children,$,D.key):R!==null&&(R.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===le&&Wh(se)===R.type)?($=d(R,D.props),$.ref=Bo(N,R,D),$.return=N,$):($=Ua(D.type,D.key,D.props,null,N.mode,$),$.ref=Bo(N,R,D),$.return=N,$)}function O(N,R,D,$){return R===null||R.tag!==4||R.stateNode.containerInfo!==D.containerInfo||R.stateNode.implementation!==D.implementation?(R=Dc(D,N.mode,$),R.return=N,R):(R=d(R,D.children||[]),R.return=N,R)}function B(N,R,D,$,se){return R===null||R.tag!==7?(R=Ji(D,N.mode,$,se),R.return=N,R):(R=d(R,D),R.return=N,R)}function b(N,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Nc(""+R,N.mode,D),R.return=N,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ae:return D=Ua(R.type,R.key,R.props,null,N.mode,D),D.ref=Bo(N,null,R),D.return=N,D;case M:return R=Dc(R,N.mode,D),R.return=N,R;case le:var $=R._init;return b(N,$(R._payload),D)}if(Nn(R)||Y(R))return R=Ji(R,N.mode,D,null),R.return=N,R;ca(N,R)}return null}function H(N,R,D,$){var se=R!==null?R.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return se!==null?null:A(N,R,""+D,$);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ae:return D.key===se?E(N,R,D,$):null;case M:return D.key===se?O(N,R,D,$):null;case le:return se=D._init,H(N,R,se(D._payload),$)}if(Nn(D)||Y(D))return se!==null?null:B(N,R,D,$,null);ca(N,D)}return null}function Q(N,R,D,$,se){if(typeof $=="string"&&$!==""||typeof $=="number")return N=N.get(D)||null,A(R,N,""+$,se);if(typeof $=="object"&&$!==null){switch($.$$typeof){case ae:return N=N.get($.key===null?D:$.key)||null,E(R,N,$,se);case M:return N=N.get($.key===null?D:$.key)||null,O(R,N,$,se);case le:var he=$._init;return Q(N,R,D,he($._payload),se)}if(Nn($)||Y($))return N=N.get(D)||null,B(R,N,$,se,null);ca(R,$)}return null}function J(N,R,D,$){for(var se=null,he=null,ge=R,we=R=0,ft=null;ge!==null&&we<D.length;we++){ge.index>we?(ft=ge,ge=null):ft=ge.sibling;var Ge=H(N,ge,D[we],$);if(Ge===null){ge===null&&(ge=ft);break}t&&ge&&Ge.alternate===null&&i(N,ge),R=g(Ge,R,we),he===null?se=Ge:he.sibling=Ge,he=Ge,ge=ft}if(we===D.length)return s(N,ge),Qe&&Yi(N,we),se;if(ge===null){for(;we<D.length;we++)ge=b(N,D[we],$),ge!==null&&(R=g(ge,R,we),he===null?se=ge:he.sibling=ge,he=ge);return Qe&&Yi(N,we),se}for(ge=u(N,ge);we<D.length;we++)ft=Q(ge,N,we,D[we],$),ft!==null&&(t&&ft.alternate!==null&&ge.delete(ft.key===null?we:ft.key),R=g(ft,R,we),he===null?se=ft:he.sibling=ft,he=ft);return t&&ge.forEach(function(_i){return i(N,_i)}),Qe&&Yi(N,we),se}function ne(N,R,D,$){var se=Y(D);if(typeof se!="function")throw Error(r(150));if(D=se.call(D),D==null)throw Error(r(151));for(var he=se=null,ge=R,we=R=0,ft=null,Ge=D.next();ge!==null&&!Ge.done;we++,Ge=D.next()){ge.index>we?(ft=ge,ge=null):ft=ge.sibling;var _i=H(N,ge,Ge.value,$);if(_i===null){ge===null&&(ge=ft);break}t&&ge&&_i.alternate===null&&i(N,ge),R=g(_i,R,we),he===null?se=_i:he.sibling=_i,he=_i,ge=ft}if(Ge.done)return s(N,ge),Qe&&Yi(N,we),se;if(ge===null){for(;!Ge.done;we++,Ge=D.next())Ge=b(N,Ge.value,$),Ge!==null&&(R=g(Ge,R,we),he===null?se=Ge:he.sibling=Ge,he=Ge);return Qe&&Yi(N,we),se}for(ge=u(N,ge);!Ge.done;we++,Ge=D.next())Ge=Q(ge,N,we,Ge.value,$),Ge!==null&&(t&&Ge.alternate!==null&&ge.delete(Ge.key===null?we:Ge.key),R=g(Ge,R,we),he===null?se=Ge:he.sibling=Ge,he=Ge);return t&&ge.forEach(function(ny){return i(N,ny)}),Qe&&Yi(N,we),se}function it(N,R,D,$){if(typeof D=="object"&&D!==null&&D.type===G&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case ae:e:{for(var se=D.key,he=R;he!==null;){if(he.key===se){if(se=D.type,se===G){if(he.tag===7){s(N,he.sibling),R=d(he,D.props.children),R.return=N,N=R;break e}}else if(he.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===le&&Wh(se)===he.type){s(N,he.sibling),R=d(he,D.props),R.ref=Bo(N,he,D),R.return=N,N=R;break e}s(N,he);break}else i(N,he);he=he.sibling}D.type===G?(R=Ji(D.props.children,N.mode,$,D.key),R.return=N,N=R):($=Ua(D.type,D.key,D.props,null,N.mode,$),$.ref=Bo(N,R,D),$.return=N,N=$)}return v(N);case M:e:{for(he=D.key;R!==null;){if(R.key===he)if(R.tag===4&&R.stateNode.containerInfo===D.containerInfo&&R.stateNode.implementation===D.implementation){s(N,R.sibling),R=d(R,D.children||[]),R.return=N,N=R;break e}else{s(N,R);break}else i(N,R);R=R.sibling}R=Dc(D,N.mode,$),R.return=N,N=R}return v(N);case le:return he=D._init,it(N,R,he(D._payload),$)}if(Nn(D))return J(N,R,D,$);if(Y(D))return ne(N,R,D,$);ca(N,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,R!==null&&R.tag===6?(s(N,R.sibling),R=d(R,D),R.return=N,N=R):(s(N,R),R=Nc(D,N.mode,$),R.return=N,N=R),v(N)):s(N,R)}return it}var Dr=$h(!0),Yh=$h(!1),da=gi(null),fa=null,kr=null,Gu=null;function xu(){Gu=kr=fa=null}function bu(t){var i=da.current;Ve(da),t._currentValue=i}function zu(t,i,s){for(;t!==null;){var u=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),t===s)break;t=t.return}}function Or(t,i){fa=t,Gu=kr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(zt=!0),t.firstContext=null)}function on(t){var i=t._currentValue;if(Gu!==t)if(t={context:t,memoizedValue:i,next:null},kr===null){if(fa===null)throw Error(r(308));kr=t,fa.dependencies={lanes:0,firstContext:t}}else kr=kr.next=t;return i}var ji=null;function Wu(t){ji===null?ji=[t]:ji.push(t)}function jh(t,i,s,u){var d=i.interleaved;return d===null?(s.next=s,Wu(i)):(s.next=d.next,d.next=s),i.interleaved=s,Xn(t,u)}function Xn(t,i){t.lanes|=i;var s=t.alternate;for(s!==null&&(s.lanes|=i),s=t,t=t.return;t!==null;)t.childLanes|=i,s=t.alternate,s!==null&&(s.childLanes|=i),s=t,t=t.return;return s.tag===3?s.stateNode:null}var vi=!1;function $u(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vh(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Kn(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function Si(t,i,s){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Be&2)!==0){var d=u.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),u.pending=i,Xn(t,s)}return d=u.interleaved,d===null?(i.next=i,Wu(u)):(i.next=d.next,d.next=i),u.interleaved=i,Xn(t,s)}function ha(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194240)!==0)){var u=i.lanes;u&=t.pendingLanes,s|=u,i.lanes=s,ru(t,s)}}function Xh(t,i){var s=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var d=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var v={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};g===null?d=g=v:g=g.next=v,s=s.next}while(s!==null);g===null?d=g=i:g=g.next=i}else d=g=i;s={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:u.shared,effects:u.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}function ga(t,i,s,u){var d=t.updateQueue;vi=!1;var g=d.firstBaseUpdate,v=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var E=A,O=E.next;E.next=null,v===null?g=O:v.next=O,v=E;var B=t.alternate;B!==null&&(B=B.updateQueue,A=B.lastBaseUpdate,A!==v&&(A===null?B.firstBaseUpdate=O:A.next=O,B.lastBaseUpdate=E))}if(g!==null){var b=d.baseState;v=0,B=O=E=null,A=g;do{var H=A.lane,Q=A.eventTime;if((u&H)===H){B!==null&&(B=B.next={eventTime:Q,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var J=t,ne=A;switch(H=i,Q=s,ne.tag){case 1:if(J=ne.payload,typeof J=="function"){b=J.call(Q,b,H);break e}b=J;break e;case 3:J.flags=J.flags&-65537|128;case 0:if(J=ne.payload,H=typeof J=="function"?J.call(Q,b,H):J,H==null)break e;b=z({},b,H);break e;case 2:vi=!0}}A.callback!==null&&A.lane!==0&&(t.flags|=64,H=d.effects,H===null?d.effects=[A]:H.push(A))}else Q={eventTime:Q,lane:H,tag:A.tag,payload:A.payload,callback:A.callback,next:null},B===null?(O=B=Q,E=b):B=B.next=Q,v|=H;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;H=A,A=H.next,H.next=null,d.lastBaseUpdate=H,d.shared.pending=null}}while(!0);if(B===null&&(E=b),d.baseState=E,d.firstBaseUpdate=O,d.lastBaseUpdate=B,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else g===null&&(d.shared.lanes=0);Ki|=v,t.lanes=v,t.memoizedState=b}}function Kh(t,i,s){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var u=t[i],d=u.callback;if(d!==null){if(u.callback=null,u=s,typeof d!="function")throw Error(r(191,d));d.call(u)}}}var Go={},On=gi(Go),xo=gi(Go),bo=gi(Go);function Vi(t){if(t===Go)throw Error(r(174));return t}function Yu(t,i){switch($e(bo,i),$e(xo,t),$e(On,Go),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:jl(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=jl(i,t)}Ve(On),$e(On,i)}function Mr(){Ve(On),Ve(xo),Ve(bo)}function Qh(t){Vi(bo.current);var i=Vi(On.current),s=jl(i,t.type);i!==s&&($e(xo,t),$e(On,s))}function ju(t){xo.current===t&&(Ve(On),Ve(xo))}var Je=gi(0);function pa(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Vu=[];function Xu(){for(var t=0;t<Vu.length;t++)Vu[t]._workInProgressVersionPrimary=null;Vu.length=0}var ma=W.ReactCurrentDispatcher,Ku=W.ReactCurrentBatchConfig,Xi=0,et=null,lt=null,ct=null,va=!1,zo=!1,Wo=0,ES=0;function Et(){throw Error(r(321))}function Qu(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!gn(t[s],i[s]))return!1;return!0}function Zu(t,i,s,u,d,g){if(Xi=g,et=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ma.current=t===null||t.memoizedState===null?PS:NS,t=s(u,d),zo){g=0;do{if(zo=!1,Wo=0,25<=g)throw Error(r(301));g+=1,ct=lt=null,i.updateQueue=null,ma.current=DS,t=s(u,d)}while(zo)}if(ma.current=Aa,i=lt!==null&&lt.next!==null,Xi=0,ct=lt=et=null,va=!1,i)throw Error(r(300));return t}function qu(){var t=Wo!==0;return Wo=0,t}function Mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?et.memoizedState=ct=t:ct=ct.next=t,ct}function sn(){if(lt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var i=ct===null?et.memoizedState:ct.next;if(i!==null)ct=i,lt=t;else{if(t===null)throw Error(r(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ct===null?et.memoizedState=ct=t:ct=ct.next=t}return ct}function $o(t,i){return typeof i=="function"?i(t):i}function Ju(t){var i=sn(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var u=lt,d=u.baseQueue,g=s.pending;if(g!==null){if(d!==null){var v=d.next;d.next=g.next,g.next=v}u.baseQueue=d=g,s.pending=null}if(d!==null){g=d.next,u=u.baseState;var A=v=null,E=null,O=g;do{var B=O.lane;if((Xi&B)===B)E!==null&&(E=E.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),u=O.hasEagerState?O.eagerState:t(u,O.action);else{var b={lane:B,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};E===null?(A=E=b,v=u):E=E.next=b,et.lanes|=B,Ki|=B}O=O.next}while(O!==null&&O!==g);E===null?v=u:E.next=A,gn(u,i.memoizedState)||(zt=!0),i.memoizedState=u,i.baseState=v,i.baseQueue=E,s.lastRenderedState=u}if(t=s.interleaved,t!==null){d=t;do g=d.lane,et.lanes|=g,Ki|=g,d=d.next;while(d!==t)}else d===null&&(s.lanes=0);return[i.memoizedState,s.dispatch]}function ec(t){var i=sn(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var u=s.dispatch,d=s.pending,g=i.memoizedState;if(d!==null){s.pending=null;var v=d=d.next;do g=t(g,v.action),v=v.next;while(v!==d);gn(g,i.memoizedState)||(zt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),s.lastRenderedState=g}return[g,u]}function Zh(){}function qh(t,i){var s=et,u=sn(),d=i(),g=!gn(u.memoizedState,d);if(g&&(u.memoizedState=d,zt=!0),u=u.queue,tc(tg.bind(null,s,u,t),[t]),u.getSnapshot!==i||g||ct!==null&&ct.memoizedState.tag&1){if(s.flags|=2048,Yo(9,eg.bind(null,s,u,d,i),void 0,null),dt===null)throw Error(r(349));(Xi&30)!==0||Jh(s,i,d)}return d}function Jh(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=et.updateQueue,i===null?(i={lastEffect:null,stores:null},et.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function eg(t,i,s,u){i.value=s,i.getSnapshot=u,ng(i)&&ig(t)}function tg(t,i,s){return s(function(){ng(i)&&ig(t)})}function ng(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!gn(t,s)}catch{return!0}}function ig(t){var i=Xn(t,1);i!==null&&yn(i,t,1,-1)}function rg(t){var i=Mn();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:t},i.queue=t,t=t.dispatch=RS.bind(null,et,t),[i.memoizedState,t]}function Yo(t,i,s,u){return t={tag:t,create:i,destroy:s,deps:u,next:null},i=et.updateQueue,i===null?(i={lastEffect:null,stores:null},et.updateQueue=i,i.lastEffect=t.next=t):(s=i.lastEffect,s===null?i.lastEffect=t.next=t:(u=s.next,s.next=t,t.next=u,i.lastEffect=t)),t}function og(){return sn().memoizedState}function Sa(t,i,s,u){var d=Mn();et.flags|=t,d.memoizedState=Yo(1|i,s,void 0,u===void 0?null:u)}function ya(t,i,s,u){var d=sn();u=u===void 0?null:u;var g=void 0;if(lt!==null){var v=lt.memoizedState;if(g=v.destroy,u!==null&&Qu(u,v.deps)){d.memoizedState=Yo(i,s,g,u);return}}et.flags|=t,d.memoizedState=Yo(1|i,s,g,u)}function sg(t,i){return Sa(8390656,8,t,i)}function tc(t,i){return ya(2048,8,t,i)}function ag(t,i){return ya(4,2,t,i)}function lg(t,i){return ya(4,4,t,i)}function ug(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function cg(t,i,s){return s=s!=null?s.concat([t]):null,ya(4,4,ug.bind(null,i,t),s)}function nc(){}function dg(t,i){var s=sn();i=i===void 0?null:i;var u=s.memoizedState;return u!==null&&i!==null&&Qu(i,u[1])?u[0]:(s.memoizedState=[t,i],t)}function fg(t,i){var s=sn();i=i===void 0?null:i;var u=s.memoizedState;return u!==null&&i!==null&&Qu(i,u[1])?u[0]:(t=t(),s.memoizedState=[t,i],t)}function hg(t,i,s){return(Xi&21)===0?(t.baseState&&(t.baseState=!1,zt=!0),t.memoizedState=s):(gn(s,i)||(s=Wf(),et.lanes|=s,Ki|=s,t.baseState=!0),i)}function _S(t,i){var s=ze;ze=s!==0&&4>s?s:4,t(!0);var u=Ku.transition;Ku.transition={};try{t(!1),i()}finally{ze=s,Ku.transition=u}}function gg(){return sn().memoizedState}function CS(t,i,s){var u=Ii(t);if(s={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null},pg(t))mg(i,s);else if(s=jh(t,i,s,u),s!==null){var d=kt();yn(s,t,u,d),vg(s,i,u)}}function RS(t,i,s){var u=Ii(t),d={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null};if(pg(t))mg(i,d);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var v=i.lastRenderedState,A=g(v,s);if(d.hasEagerState=!0,d.eagerState=A,gn(A,v)){var E=i.interleaved;E===null?(d.next=d,Wu(i)):(d.next=E.next,E.next=d),i.interleaved=d;return}}catch{}finally{}s=jh(t,i,d,u),s!==null&&(d=kt(),yn(s,t,u,d),vg(s,i,u))}}function pg(t){var i=t.alternate;return t===et||i!==null&&i===et}function mg(t,i){zo=va=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function vg(t,i,s){if((s&4194240)!==0){var u=i.lanes;u&=t.pendingLanes,s|=u,i.lanes=s,ru(t,s)}}var Aa={readContext:on,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},PS={readContext:on,useCallback:function(t,i){return Mn().memoizedState=[t,i===void 0?null:i],t},useContext:on,useEffect:sg,useImperativeHandle:function(t,i,s){return s=s!=null?s.concat([t]):null,Sa(4194308,4,ug.bind(null,i,t),s)},useLayoutEffect:function(t,i){return Sa(4194308,4,t,i)},useInsertionEffect:function(t,i){return Sa(4,2,t,i)},useMemo:function(t,i){var s=Mn();return i=i===void 0?null:i,t=t(),s.memoizedState=[t,i],t},useReducer:function(t,i,s){var u=Mn();return i=s!==void 0?s(i):i,u.memoizedState=u.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},u.queue=t,t=t.dispatch=CS.bind(null,et,t),[u.memoizedState,t]},useRef:function(t){var i=Mn();return t={current:t},i.memoizedState=t},useState:rg,useDebugValue:nc,useDeferredValue:function(t){return Mn().memoizedState=t},useTransition:function(){var t=rg(!1),i=t[0];return t=_S.bind(null,t[1]),Mn().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,s){var u=et,d=Mn();if(Qe){if(s===void 0)throw Error(r(407));s=s()}else{if(s=i(),dt===null)throw Error(r(349));(Xi&30)!==0||Jh(u,i,s)}d.memoizedState=s;var g={value:s,getSnapshot:i};return d.queue=g,sg(tg.bind(null,u,g,t),[t]),u.flags|=2048,Yo(9,eg.bind(null,u,g,s,i),void 0,null),s},useId:function(){var t=Mn(),i=dt.identifierPrefix;if(Qe){var s=Vn,u=jn;s=(u&~(1<<32-hn(u)-1)).toString(32)+s,i=":"+i+"R"+s,s=Wo++,0<s&&(i+="H"+s.toString(32)),i+=":"}else s=ES++,i=":"+i+"r"+s.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},NS={readContext:on,useCallback:dg,useContext:on,useEffect:tc,useImperativeHandle:cg,useInsertionEffect:ag,useLayoutEffect:lg,useMemo:fg,useReducer:Ju,useRef:og,useState:function(){return Ju($o)},useDebugValue:nc,useDeferredValue:function(t){var i=sn();return hg(i,lt.memoizedState,t)},useTransition:function(){var t=Ju($o)[0],i=sn().memoizedState;return[t,i]},useMutableSource:Zh,useSyncExternalStore:qh,useId:gg,unstable_isNewReconciler:!1},DS={readContext:on,useCallback:dg,useContext:on,useEffect:tc,useImperativeHandle:cg,useInsertionEffect:ag,useLayoutEffect:lg,useMemo:fg,useReducer:ec,useRef:og,useState:function(){return ec($o)},useDebugValue:nc,useDeferredValue:function(t){var i=sn();return lt===null?i.memoizedState=t:hg(i,lt.memoizedState,t)},useTransition:function(){var t=ec($o)[0],i=sn().memoizedState;return[t,i]},useMutableSource:Zh,useSyncExternalStore:qh,useId:gg,unstable_isNewReconciler:!1};function mn(t,i){if(t&&t.defaultProps){i=z({},i),t=t.defaultProps;for(var s in t)i[s]===void 0&&(i[s]=t[s]);return i}return i}function ic(t,i,s,u){i=t.memoizedState,s=s(u,i),s=s==null?i:z({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Ta={isMounted:function(t){return(t=t._reactInternals)?bi(t)===t:!1},enqueueSetState:function(t,i,s){t=t._reactInternals;var u=kt(),d=Ii(t),g=Kn(u,d);g.payload=i,s!=null&&(g.callback=s),i=Si(t,g,d),i!==null&&(yn(i,t,d,u),ha(i,t,d))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var u=kt(),d=Ii(t),g=Kn(u,d);g.tag=1,g.payload=i,s!=null&&(g.callback=s),i=Si(t,g,d),i!==null&&(yn(i,t,d,u),ha(i,t,d))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=kt(),u=Ii(t),d=Kn(s,u);d.tag=2,i!=null&&(d.callback=i),i=Si(t,d,u),i!==null&&(yn(i,t,u,s),ha(i,t,u))}};function Sg(t,i,s,u,d,g,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,g,v):i.prototype&&i.prototype.isPureReactComponent?!ko(s,u)||!ko(d,g):!0}function yg(t,i,s){var u=!1,d=pi,g=i.contextType;return typeof g=="object"&&g!==null?g=on(g):(d=bt(i)?Wi:wt.current,u=i.contextTypes,g=(u=u!=null)?Cr(t,d):pi),i=new i(s,g),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ta,t.stateNode=i,i._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=g),i}function Ag(t,i,s,u){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,u),i.state!==t&&Ta.enqueueReplaceState(i,i.state,null)}function rc(t,i,s,u){var d=t.stateNode;d.props=s,d.state=t.memoizedState,d.refs={},$u(t);var g=i.contextType;typeof g=="object"&&g!==null?d.context=on(g):(g=bt(i)?Wi:wt.current,d.context=Cr(t,g)),d.state=t.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(ic(t,i,g,s),d.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&Ta.enqueueReplaceState(d,d.state,null),ga(t,s,d,u),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function Ur(t,i){try{var s="",u=i;do s+=Te(u),u=u.return;while(u);var d=s}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:t,source:i,stack:d,digest:null}}function oc(t,i,s){return{value:t,source:null,stack:s??null,digest:i??null}}function sc(t,i){try{console.error(i.value)}catch(s){setTimeout(function(){throw s})}}var kS=typeof WeakMap=="function"?WeakMap:Map;function Tg(t,i,s){s=Kn(-1,s),s.tag=3,s.payload={element:null};var u=i.value;return s.callback=function(){Pa||(Pa=!0,Tc=u),sc(t,i)},s}function Ig(t,i,s){s=Kn(-1,s),s.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var d=i.value;s.payload=function(){return u(d)},s.callback=function(){sc(t,i)}}var g=t.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(s.callback=function(){sc(t,i),typeof u!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),s}function wg(t,i,s){var u=t.pingCache;if(u===null){u=t.pingCache=new kS;var d=new Set;u.set(i,d)}else d=u.get(i),d===void 0&&(d=new Set,u.set(i,d));d.has(s)||(d.add(s),t=YS.bind(null,t,i,s),i.then(t,t))}function Eg(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function _g(t,i,s,u,d){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(i=Kn(-1,1),i.tag=2,Si(s,i,1))),s.lanes|=1),t):(t.flags|=65536,t.lanes=d,t)}var OS=W.ReactCurrentOwner,zt=!1;function Dt(t,i,s,u){i.child=t===null?Yh(i,null,s,u):Dr(i,t.child,s,u)}function Cg(t,i,s,u,d){s=s.render;var g=i.ref;return Or(i,d),u=Zu(t,i,s,u,g,d),s=qu(),t!==null&&!zt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~d,Qn(t,i,d)):(Qe&&s&&Uu(i),i.flags|=1,Dt(t,i,u,d),i.child)}function Rg(t,i,s,u,d){if(t===null){var g=s.type;return typeof g=="function"&&!Pc(g)&&g.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(i.tag=15,i.type=g,Pg(t,i,g,u,d)):(t=Ua(s.type,null,u,i,i.mode,d),t.ref=i.ref,t.return=i,i.child=t)}if(g=t.child,(t.lanes&d)===0){var v=g.memoizedProps;if(s=s.compare,s=s!==null?s:ko,s(v,u)&&t.ref===i.ref)return Qn(t,i,d)}return i.flags|=1,t=Ei(g,u),t.ref=i.ref,t.return=i,i.child=t}function Pg(t,i,s,u,d){if(t!==null){var g=t.memoizedProps;if(ko(g,u)&&t.ref===i.ref)if(zt=!1,i.pendingProps=u=g,(t.lanes&d)!==0)(t.flags&131072)!==0&&(zt=!0);else return i.lanes=t.lanes,Qn(t,i,d)}return ac(t,i,s,u,d)}function Ng(t,i,s){var u=i.pendingProps,d=u.children,g=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Lr,Zt),Zt|=s;else{if((s&1073741824)===0)return t=g!==null?g.baseLanes|s:s,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,$e(Lr,Zt),Zt|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=g!==null?g.baseLanes:s,$e(Lr,Zt),Zt|=u}else g!==null?(u=g.baseLanes|s,i.memoizedState=null):u=s,$e(Lr,Zt),Zt|=u;return Dt(t,i,d,s),i.child}function Dg(t,i){var s=i.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(i.flags|=512,i.flags|=2097152)}function ac(t,i,s,u,d){var g=bt(s)?Wi:wt.current;return g=Cr(i,g),Or(i,d),s=Zu(t,i,s,u,g,d),u=qu(),t!==null&&!zt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~d,Qn(t,i,d)):(Qe&&u&&Uu(i),i.flags|=1,Dt(t,i,s,d),i.child)}function kg(t,i,s,u,d){if(bt(s)){var g=!0;oa(i)}else g=!1;if(Or(i,d),i.stateNode===null)wa(t,i),yg(i,s,u),rc(i,s,u,d),u=!0;else if(t===null){var v=i.stateNode,A=i.memoizedProps;v.props=A;var E=v.context,O=s.contextType;typeof O=="object"&&O!==null?O=on(O):(O=bt(s)?Wi:wt.current,O=Cr(i,O));var B=s.getDerivedStateFromProps,b=typeof B=="function"||typeof v.getSnapshotBeforeUpdate=="function";b||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==u||E!==O)&&Ag(i,v,u,O),vi=!1;var H=i.memoizedState;v.state=H,ga(i,u,v,d),E=i.memoizedState,A!==u||H!==E||xt.current||vi?(typeof B=="function"&&(ic(i,s,B,u),E=i.memoizedState),(A=vi||Sg(i,s,A,u,H,E,O))?(b||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=E),v.props=u,v.state=E,v.context=O,u=A):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{v=i.stateNode,Vh(t,i),A=i.memoizedProps,O=i.type===i.elementType?A:mn(i.type,A),v.props=O,b=i.pendingProps,H=v.context,E=s.contextType,typeof E=="object"&&E!==null?E=on(E):(E=bt(s)?Wi:wt.current,E=Cr(i,E));var Q=s.getDerivedStateFromProps;(B=typeof Q=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==b||H!==E)&&Ag(i,v,u,E),vi=!1,H=i.memoizedState,v.state=H,ga(i,u,v,d);var J=i.memoizedState;A!==b||H!==J||xt.current||vi?(typeof Q=="function"&&(ic(i,s,Q,u),J=i.memoizedState),(O=vi||Sg(i,s,O,u,H,J,E)||!1)?(B||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,J,E),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,J,E)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=J),v.props=u,v.state=J,v.context=E,u=O):(typeof v.componentDidUpdate!="function"||A===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),u=!1)}return lc(t,i,s,u,g,d)}function lc(t,i,s,u,d,g){Dg(t,i);var v=(i.flags&128)!==0;if(!u&&!v)return d&&Lh(i,s,!1),Qn(t,i,g);u=i.stateNode,OS.current=i;var A=v&&typeof s.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,t!==null&&v?(i.child=Dr(i,t.child,null,g),i.child=Dr(i,null,A,g)):Dt(t,i,A,g),i.memoizedState=u.state,d&&Lh(i,s,!0),i.child}function Og(t){var i=t.stateNode;i.pendingContext?Uh(t,i.pendingContext,i.pendingContext!==i.context):i.context&&Uh(t,i.context,!1),Yu(t,i.containerInfo)}function Mg(t,i,s,u,d){return Nr(),Bu(d),i.flags|=256,Dt(t,i,s,u),i.child}var uc={dehydrated:null,treeContext:null,retryLane:0};function cc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ug(t,i,s){var u=i.pendingProps,d=Je.current,g=!1,v=(i.flags&128)!==0,A;if((A=v)||(A=t!==null&&t.memoizedState===null?!1:(d&2)!==0),A?(g=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),$e(Je,d&1),t===null)return Hu(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=u.children,t=u.fallback,g?(u=i.mode,g=i.child,v={mode:"hidden",children:v},(u&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=v):g=Fa(v,u,0,null),t=Ji(t,u,s,null),g.return=i,t.return=i,g.sibling=t,i.child=g,i.child.memoizedState=cc(s),i.memoizedState=uc,t):dc(i,v));if(d=t.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return MS(t,i,v,u,A,d,s);if(g){g=u.fallback,v=i.mode,d=t.child,A=d.sibling;var E={mode:"hidden",children:u.children};return(v&1)===0&&i.child!==d?(u=i.child,u.childLanes=0,u.pendingProps=E,i.deletions=null):(u=Ei(d,E),u.subtreeFlags=d.subtreeFlags&14680064),A!==null?g=Ei(A,g):(g=Ji(g,v,s,null),g.flags|=2),g.return=i,u.return=i,u.sibling=g,i.child=u,u=g,g=i.child,v=t.child.memoizedState,v=v===null?cc(s):{baseLanes:v.baseLanes|s,cachePool:null,transitions:v.transitions},g.memoizedState=v,g.childLanes=t.childLanes&~s,i.memoizedState=uc,u}return g=t.child,t=g.sibling,u=Ei(g,{mode:"visible",children:u.children}),(i.mode&1)===0&&(u.lanes=s),u.return=i,u.sibling=null,t!==null&&(s=i.deletions,s===null?(i.deletions=[t],i.flags|=16):s.push(t)),i.child=u,i.memoizedState=null,u}function dc(t,i){return i=Fa({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function Ia(t,i,s,u){return u!==null&&Bu(u),Dr(i,t.child,null,s),t=dc(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function MS(t,i,s,u,d,g,v){if(s)return i.flags&256?(i.flags&=-257,u=oc(Error(r(422))),Ia(t,i,v,u)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(g=u.fallback,d=i.mode,u=Fa({mode:"visible",children:u.children},d,0,null),g=Ji(g,d,v,null),g.flags|=2,u.return=i,g.return=i,u.sibling=g,i.child=u,(i.mode&1)!==0&&Dr(i,t.child,null,v),i.child.memoizedState=cc(v),i.memoizedState=uc,g);if((i.mode&1)===0)return Ia(t,i,v,null);if(d.data==="$!"){if(u=d.nextSibling&&d.nextSibling.dataset,u)var A=u.dgst;return u=A,g=Error(r(419)),u=oc(g,u,void 0),Ia(t,i,v,u)}if(A=(v&t.childLanes)!==0,zt||A){if(u=dt,u!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(u.suspendedLanes|v))!==0?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Xn(t,d),yn(u,t,d,-1))}return Rc(),u=oc(Error(r(421))),Ia(t,i,v,u)}return d.data==="$?"?(i.flags|=128,i.child=t.child,i=jS.bind(null,t),d._reactRetry=i,null):(t=g.treeContext,Qt=hi(d.nextSibling),Kt=i,Qe=!0,pn=null,t!==null&&(nn[rn++]=jn,nn[rn++]=Vn,nn[rn++]=$i,jn=t.id,Vn=t.overflow,$i=i),i=dc(i,u.children),i.flags|=4096,i)}function Fg(t,i,s){t.lanes|=i;var u=t.alternate;u!==null&&(u.lanes|=i),zu(t.return,i,s)}function fc(t,i,s,u,d){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:d}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=s,g.tailMode=d)}function Lg(t,i,s){var u=i.pendingProps,d=u.revealOrder,g=u.tail;if(Dt(t,i,u.children,s),u=Je.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fg(t,s,i);else if(t.tag===19)Fg(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if($e(Je,u),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(s=i.child,d=null;s!==null;)t=s.alternate,t!==null&&pa(t)===null&&(d=s),s=s.sibling;s=d,s===null?(d=i.child,i.child=null):(d=s.sibling,s.sibling=null),fc(i,!1,d,s,g);break;case"backwards":for(s=null,d=i.child,i.child=null;d!==null;){if(t=d.alternate,t!==null&&pa(t)===null){i.child=d;break}t=d.sibling,d.sibling=s,s=d,d=t}fc(i,!0,s,null,g);break;case"together":fc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function wa(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function Qn(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),Ki|=i.lanes,(s&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,s=Ei(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=Ei(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function US(t,i,s){switch(i.tag){case 3:Og(i),Nr();break;case 5:Qh(i);break;case 1:bt(i.type)&&oa(i);break;case 4:Yu(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,d=i.memoizedProps.value;$e(da,u._currentValue),u._currentValue=d;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?($e(Je,Je.current&1),i.flags|=128,null):(s&i.child.childLanes)!==0?Ug(t,i,s):($e(Je,Je.current&1),t=Qn(t,i,s),t!==null?t.sibling:null);$e(Je,Je.current&1);break;case 19:if(u=(s&i.childLanes)!==0,(t.flags&128)!==0){if(u)return Lg(t,i,s);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),$e(Je,Je.current),u)break;return null;case 22:case 23:return i.lanes=0,Ng(t,i,s)}return Qn(t,i,s)}var Hg,hc,Bg,Gg;Hg=function(t,i){for(var s=i.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},hc=function(){},Bg=function(t,i,s,u){var d=t.memoizedProps;if(d!==u){t=i.stateNode,Vi(On.current);var g=null;switch(s){case"input":d=Ke(t,d),u=Ke(t,u),g=[];break;case"select":d=z({},d,{value:void 0}),u=z({},u,{value:void 0}),g=[];break;case"textarea":d=xi(t,d),u=xi(t,u),g=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=na)}Vl(s,u);var v;s=null;for(O in d)if(!u.hasOwnProperty(O)&&d.hasOwnProperty(O)&&d[O]!=null)if(O==="style"){var A=d[O];for(v in A)A.hasOwnProperty(v)&&(s||(s={}),s[v]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(a.hasOwnProperty(O)?g||(g=[]):(g=g||[]).push(O,null));for(O in u){var E=u[O];if(A=d!=null?d[O]:void 0,u.hasOwnProperty(O)&&E!==A&&(E!=null||A!=null))if(O==="style")if(A){for(v in A)!A.hasOwnProperty(v)||E&&E.hasOwnProperty(v)||(s||(s={}),s[v]="");for(v in E)E.hasOwnProperty(v)&&A[v]!==E[v]&&(s||(s={}),s[v]=E[v])}else s||(g||(g=[]),g.push(O,s)),s=E;else O==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,A=A?A.__html:void 0,E!=null&&A!==E&&(g=g||[]).push(O,E)):O==="children"?typeof E!="string"&&typeof E!="number"||(g=g||[]).push(O,""+E):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(a.hasOwnProperty(O)?(E!=null&&O==="onScroll"&&je("scroll",t),g||A===E||(g=[])):(g=g||[]).push(O,E))}s&&(g=g||[]).push("style",s);var O=g;(i.updateQueue=O)&&(i.flags|=4)}},Gg=function(t,i,s,u){s!==u&&(i.flags|=4)};function jo(t,i){if(!Qe)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function _t(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,u=0;if(i)for(var d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=u,t.childLanes=s,i}function FS(t,i,s){var u=i.pendingProps;switch(Fu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(i),null;case 1:return bt(i.type)&&ra(),_t(i),null;case 3:return u=i.stateNode,Mr(),Ve(xt),Ve(wt),Xu(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(ua(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,pn!==null&&(Ec(pn),pn=null))),hc(t,i),_t(i),null;case 5:ju(i);var d=Vi(bo.current);if(s=i.type,t!==null&&i.stateNode!=null)Bg(t,i,s,u,d),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(r(166));return _t(i),null}if(t=Vi(On.current),ua(i)){u=i.stateNode,s=i.type;var g=i.memoizedProps;switch(u[kn]=i,u[Lo]=g,t=(i.mode&1)!==0,s){case"dialog":je("cancel",u),je("close",u);break;case"iframe":case"object":case"embed":je("load",u);break;case"video":case"audio":for(d=0;d<Mo.length;d++)je(Mo[d],u);break;case"source":je("error",u);break;case"img":case"image":case"link":je("error",u),je("load",u);break;case"details":je("toggle",u);break;case"input":Ye(u,g),je("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!g.multiple},je("invalid",u);break;case"textarea":If(u,g),je("invalid",u)}Vl(s,g),d=null;for(var v in g)if(g.hasOwnProperty(v)){var A=g[v];v==="children"?typeof A=="string"?u.textContent!==A&&(g.suppressHydrationWarning!==!0&&ta(u.textContent,A,t),d=["children",A]):typeof A=="number"&&u.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&ta(u.textContent,A,t),d=["children",""+A]):a.hasOwnProperty(v)&&A!=null&&v==="onScroll"&&je("scroll",u)}switch(s){case"input":Ne(u),tn(u,g,!0);break;case"textarea":Ne(u),Ef(u);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(u.onclick=na)}u=d,i.updateQueue=u,u!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_f(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=v.createElement(s,{is:u.is}):(t=v.createElement(s),s==="select"&&(v=t,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):t=v.createElementNS(t,s),t[kn]=i,t[Lo]=u,Hg(t,i,!1,!1),i.stateNode=t;e:{switch(v=Xl(s,u),s){case"dialog":je("cancel",t),je("close",t),d=u;break;case"iframe":case"object":case"embed":je("load",t),d=u;break;case"video":case"audio":for(d=0;d<Mo.length;d++)je(Mo[d],t);d=u;break;case"source":je("error",t),d=u;break;case"img":case"image":case"link":je("error",t),je("load",t),d=u;break;case"details":je("toggle",t),d=u;break;case"input":Ye(t,u),d=Ke(t,u),je("invalid",t);break;case"option":d=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},d=z({},u,{value:void 0}),je("invalid",t);break;case"textarea":If(t,u),d=xi(t,u),je("invalid",t);break;default:d=u}Vl(s,d),A=d;for(g in A)if(A.hasOwnProperty(g)){var E=A[g];g==="style"?Pf(t,E):g==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&Cf(t,E)):g==="children"?typeof E=="string"?(s!=="textarea"||E!=="")&&go(t,E):typeof E=="number"&&go(t,""+E):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(a.hasOwnProperty(g)?E!=null&&g==="onScroll"&&je("scroll",t):E!=null&&L(t,g,E,v))}switch(s){case"input":Ne(t),tn(t,u,!1);break;case"textarea":Ne(t),Ef(t);break;case"option":u.value!=null&&t.setAttribute("value",""+ye(u.value));break;case"select":t.multiple=!!u.multiple,g=u.value,g!=null?si(t,!!u.multiple,g,!1):u.defaultValue!=null&&si(t,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(t.onclick=na)}switch(s){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return _t(i),null;case 6:if(t&&i.stateNode!=null)Gg(t,i,t.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=Vi(bo.current),Vi(On.current),ua(i)){if(u=i.stateNode,s=i.memoizedProps,u[kn]=i,(g=u.nodeValue!==s)&&(t=Kt,t!==null))switch(t.tag){case 3:ta(u.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ta(u.nodeValue,s,(t.mode&1)!==0)}g&&(i.flags|=4)}else u=(s.nodeType===9?s:s.ownerDocument).createTextNode(u),u[kn]=i,i.stateNode=u}return _t(i),null;case 13:if(Ve(Je),u=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&Qt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)zh(),Nr(),i.flags|=98560,g=!1;else if(g=ua(i),u!==null&&u.dehydrated!==null){if(t===null){if(!g)throw Error(r(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[kn]=i}else Nr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;_t(i),g=!1}else pn!==null&&(Ec(pn),pn=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=s,i):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(Je.current&1)!==0?ut===0&&(ut=3):Rc())),i.updateQueue!==null&&(i.flags|=4),_t(i),null);case 4:return Mr(),hc(t,i),t===null&&Uo(i.stateNode.containerInfo),_t(i),null;case 10:return bu(i.type._context),_t(i),null;case 17:return bt(i.type)&&ra(),_t(i),null;case 19:if(Ve(Je),g=i.memoizedState,g===null)return _t(i),null;if(u=(i.flags&128)!==0,v=g.rendering,v===null)if(u)jo(g,!1);else{if(ut!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(v=pa(t),v!==null){for(i.flags|=128,jo(g,!1),u=v.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=s,s=i.child;s!==null;)g=s,t=u,g.flags&=14680066,v=g.alternate,v===null?(g.childLanes=0,g.lanes=t,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=v.childLanes,g.lanes=v.lanes,g.child=v.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=v.memoizedProps,g.memoizedState=v.memoizedState,g.updateQueue=v.updateQueue,g.type=v.type,t=v.dependencies,g.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return $e(Je,Je.current&1|2),i.child}t=t.sibling}g.tail!==null&&nt()>Hr&&(i.flags|=128,u=!0,jo(g,!1),i.lanes=4194304)}else{if(!u)if(t=pa(v),t!==null){if(i.flags|=128,u=!0,s=t.updateQueue,s!==null&&(i.updateQueue=s,i.flags|=4),jo(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Qe)return _t(i),null}else 2*nt()-g.renderingStartTime>Hr&&s!==1073741824&&(i.flags|=128,u=!0,jo(g,!1),i.lanes=4194304);g.isBackwards?(v.sibling=i.child,i.child=v):(s=g.last,s!==null?s.sibling=v:i.child=v,g.last=v)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=nt(),i.sibling=null,s=Je.current,$e(Je,u?s&1|2:s&1),i):(_t(i),null);case 22:case 23:return Cc(),u=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(i.flags|=8192),u&&(i.mode&1)!==0?(Zt&1073741824)!==0&&(_t(i),i.subtreeFlags&6&&(i.flags|=8192)):_t(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function LS(t,i){switch(Fu(i),i.tag){case 1:return bt(i.type)&&ra(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Mr(),Ve(xt),Ve(wt),Xu(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return ju(i),null;case 13:if(Ve(Je),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Nr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Ve(Je),null;case 4:return Mr(),null;case 10:return bu(i.type._context),null;case 22:case 23:return Cc(),null;case 24:return null;default:return null}}var Ea=!1,Ct=!1,HS=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Fr(t,i){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(u){tt(t,i,u)}else s.current=null}function gc(t,i,s){try{s()}catch(u){tt(t,i,u)}}var xg=!1;function BS(t,i){if(Cu=$s,t=Sh(),Su(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var d=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var v=0,A=-1,E=-1,O=0,B=0,b=t,H=null;t:for(;;){for(var Q;b!==s||d!==0&&b.nodeType!==3||(A=v+d),b!==g||u!==0&&b.nodeType!==3||(E=v+u),b.nodeType===3&&(v+=b.nodeValue.length),(Q=b.firstChild)!==null;)H=b,b=Q;for(;;){if(b===t)break t;if(H===s&&++O===d&&(A=v),H===g&&++B===u&&(E=v),(Q=b.nextSibling)!==null)break;b=H,H=b.parentNode}b=Q}s=A===-1||E===-1?null:{start:A,end:E}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ru={focusedElem:t,selectionRange:s},$s=!1,Z=i;Z!==null;)if(i=Z,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Z=t;else for(;Z!==null;){i=Z;try{var J=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(J!==null){var ne=J.memoizedProps,it=J.memoizedState,N=i.stateNode,R=N.getSnapshotBeforeUpdate(i.elementType===i.type?ne:mn(i.type,ne),it);N.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var D=i.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch($){tt(i,i.return,$)}if(t=i.sibling,t!==null){t.return=i.return,Z=t;break}Z=i.return}return J=xg,xg=!1,J}function Vo(t,i,s){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&t)===t){var g=d.destroy;d.destroy=void 0,g!==void 0&&gc(i,s,g)}d=d.next}while(d!==u)}}function _a(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var u=s.create;s.destroy=u()}s=s.next}while(s!==i)}}function pc(t){var i=t.ref;if(i!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof i=="function"?i(t):i.current=t}}function bg(t){var i=t.alternate;i!==null&&(t.alternate=null,bg(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[kn],delete i[Lo],delete i[ku],delete i[AS],delete i[TS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zg(t){return t.tag===5||t.tag===3||t.tag===4}function Wg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mc(t,i,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?s.nodeType===8?s.parentNode.insertBefore(t,i):s.insertBefore(t,i):(s.nodeType===8?(i=s.parentNode,i.insertBefore(t,s)):(i=s,i.appendChild(t)),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=na));else if(u!==4&&(t=t.child,t!==null))for(mc(t,i,s),t=t.sibling;t!==null;)mc(t,i,s),t=t.sibling}function vc(t,i,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(vc(t,i,s),t=t.sibling;t!==null;)vc(t,i,s),t=t.sibling}var St=null,vn=!1;function yi(t,i,s){for(s=s.child;s!==null;)$g(t,i,s),s=s.sibling}function $g(t,i,s){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Bs,s)}catch{}switch(s.tag){case 5:Ct||Fr(s,i);case 6:var u=St,d=vn;St=null,yi(t,i,s),St=u,vn=d,St!==null&&(vn?(t=St,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):St.removeChild(s.stateNode));break;case 18:St!==null&&(vn?(t=St,s=s.stateNode,t.nodeType===8?Du(t.parentNode,s):t.nodeType===1&&Du(t,s),_o(t)):Du(St,s.stateNode));break;case 4:u=St,d=vn,St=s.stateNode.containerInfo,vn=!0,yi(t,i,s),St=u,vn=d;break;case 0:case 11:case 14:case 15:if(!Ct&&(u=s.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var g=d,v=g.destroy;g=g.tag,v!==void 0&&((g&2)!==0||(g&4)!==0)&&gc(s,i,v),d=d.next}while(d!==u)}yi(t,i,s);break;case 1:if(!Ct&&(Fr(s,i),u=s.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=s.memoizedProps,u.state=s.memoizedState,u.componentWillUnmount()}catch(A){tt(s,i,A)}yi(t,i,s);break;case 21:yi(t,i,s);break;case 22:s.mode&1?(Ct=(u=Ct)||s.memoizedState!==null,yi(t,i,s),Ct=u):yi(t,i,s);break;default:yi(t,i,s)}}function Yg(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new HS),i.forEach(function(u){var d=VS.bind(null,t,u);s.has(u)||(s.add(u),u.then(d,d))})}}function Sn(t,i){var s=i.deletions;if(s!==null)for(var u=0;u<s.length;u++){var d=s[u];try{var g=t,v=i,A=v;e:for(;A!==null;){switch(A.tag){case 5:St=A.stateNode,vn=!1;break e;case 3:St=A.stateNode.containerInfo,vn=!0;break e;case 4:St=A.stateNode.containerInfo,vn=!0;break e}A=A.return}if(St===null)throw Error(r(160));$g(g,v,d),St=null,vn=!1;var E=d.alternate;E!==null&&(E.return=null),d.return=null}catch(O){tt(d,i,O)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)jg(i,t),i=i.sibling}function jg(t,i){var s=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sn(i,t),Un(t),u&4){try{Vo(3,t,t.return),_a(3,t)}catch(ne){tt(t,t.return,ne)}try{Vo(5,t,t.return)}catch(ne){tt(t,t.return,ne)}}break;case 1:Sn(i,t),Un(t),u&512&&s!==null&&Fr(s,s.return);break;case 5:if(Sn(i,t),Un(t),u&512&&s!==null&&Fr(s,s.return),t.flags&32){var d=t.stateNode;try{go(d,"")}catch(ne){tt(t,t.return,ne)}}if(u&4&&(d=t.stateNode,d!=null)){var g=t.memoizedProps,v=s!==null?s.memoizedProps:g,A=t.type,E=t.updateQueue;if(t.updateQueue=null,E!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&Rn(d,g),Xl(A,v);var O=Xl(A,g);for(v=0;v<E.length;v+=2){var B=E[v],b=E[v+1];B==="style"?Pf(d,b):B==="dangerouslySetInnerHTML"?Cf(d,b):B==="children"?go(d,b):L(d,B,b,O)}switch(A){case"input":Gt(d,g);break;case"textarea":wf(d,g);break;case"select":var H=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var Q=g.value;Q!=null?si(d,!!g.multiple,Q,!1):H!==!!g.multiple&&(g.defaultValue!=null?si(d,!!g.multiple,g.defaultValue,!0):si(d,!!g.multiple,g.multiple?[]:"",!1))}d[Lo]=g}catch(ne){tt(t,t.return,ne)}}break;case 6:if(Sn(i,t),Un(t),u&4){if(t.stateNode===null)throw Error(r(162));d=t.stateNode,g=t.memoizedProps;try{d.nodeValue=g}catch(ne){tt(t,t.return,ne)}}break;case 3:if(Sn(i,t),Un(t),u&4&&s!==null&&s.memoizedState.isDehydrated)try{_o(i.containerInfo)}catch(ne){tt(t,t.return,ne)}break;case 4:Sn(i,t),Un(t);break;case 13:Sn(i,t),Un(t),d=t.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(Ac=nt())),u&4&&Yg(t);break;case 22:if(B=s!==null&&s.memoizedState!==null,t.mode&1?(Ct=(O=Ct)||B,Sn(i,t),Ct=O):Sn(i,t),Un(t),u&8192){if(O=t.memoizedState!==null,(t.stateNode.isHidden=O)&&!B&&(t.mode&1)!==0)for(Z=t,B=t.child;B!==null;){for(b=Z=B;Z!==null;){switch(H=Z,Q=H.child,H.tag){case 0:case 11:case 14:case 15:Vo(4,H,H.return);break;case 1:Fr(H,H.return);var J=H.stateNode;if(typeof J.componentWillUnmount=="function"){u=H,s=H.return;try{i=u,J.props=i.memoizedProps,J.state=i.memoizedState,J.componentWillUnmount()}catch(ne){tt(u,s,ne)}}break;case 5:Fr(H,H.return);break;case 22:if(H.memoizedState!==null){Kg(b);continue}}Q!==null?(Q.return=H,Z=Q):Kg(b)}B=B.sibling}e:for(B=null,b=t;;){if(b.tag===5){if(B===null){B=b;try{d=b.stateNode,O?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=b.stateNode,E=b.memoizedProps.style,v=E!=null&&E.hasOwnProperty("display")?E.display:null,A.style.display=Rf("display",v))}catch(ne){tt(t,t.return,ne)}}}else if(b.tag===6){if(B===null)try{b.stateNode.nodeValue=O?"":b.memoizedProps}catch(ne){tt(t,t.return,ne)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===t)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;B===b&&(B=null),b=b.return}B===b&&(B=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Sn(i,t),Un(t),u&4&&Yg(t);break;case 21:break;default:Sn(i,t),Un(t)}}function Un(t){var i=t.flags;if(i&2){try{e:{for(var s=t.return;s!==null;){if(zg(s)){var u=s;break e}s=s.return}throw Error(r(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(go(d,""),u.flags&=-33);var g=Wg(t);vc(t,g,d);break;case 3:case 4:var v=u.stateNode.containerInfo,A=Wg(t);mc(t,A,v);break;default:throw Error(r(161))}}catch(E){tt(t,t.return,E)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function GS(t,i,s){Z=t,Vg(t)}function Vg(t,i,s){for(var u=(t.mode&1)!==0;Z!==null;){var d=Z,g=d.child;if(d.tag===22&&u){var v=d.memoizedState!==null||Ea;if(!v){var A=d.alternate,E=A!==null&&A.memoizedState!==null||Ct;A=Ea;var O=Ct;if(Ea=v,(Ct=E)&&!O)for(Z=d;Z!==null;)v=Z,E=v.child,v.tag===22&&v.memoizedState!==null?Qg(d):E!==null?(E.return=v,Z=E):Qg(d);for(;g!==null;)Z=g,Vg(g),g=g.sibling;Z=d,Ea=A,Ct=O}Xg(t)}else(d.subtreeFlags&8772)!==0&&g!==null?(g.return=d,Z=g):Xg(t)}}function Xg(t){for(;Z!==null;){var i=Z;if((i.flags&8772)!==0){var s=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ct||_a(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!Ct)if(s===null)u.componentDidMount();else{var d=i.elementType===i.type?s.memoizedProps:mn(i.type,s.memoizedProps);u.componentDidUpdate(d,s.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&Kh(i,g,u);break;case 3:var v=i.updateQueue;if(v!==null){if(s=null,i.child!==null)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}Kh(i,v,s)}break;case 5:var A=i.stateNode;if(s===null&&i.flags&4){s=A;var E=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&s.focus();break;case"img":E.src&&(s.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var O=i.alternate;if(O!==null){var B=O.memoizedState;if(B!==null){var b=B.dehydrated;b!==null&&_o(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ct||i.flags&512&&pc(i)}catch(H){tt(i,i.return,H)}}if(i===t){Z=null;break}if(s=i.sibling,s!==null){s.return=i.return,Z=s;break}Z=i.return}}function Kg(t){for(;Z!==null;){var i=Z;if(i===t){Z=null;break}var s=i.sibling;if(s!==null){s.return=i.return,Z=s;break}Z=i.return}}function Qg(t){for(;Z!==null;){var i=Z;try{switch(i.tag){case 0:case 11:case 15:var s=i.return;try{_a(4,i)}catch(E){tt(i,s,E)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var d=i.return;try{u.componentDidMount()}catch(E){tt(i,d,E)}}var g=i.return;try{pc(i)}catch(E){tt(i,g,E)}break;case 5:var v=i.return;try{pc(i)}catch(E){tt(i,v,E)}}}catch(E){tt(i,i.return,E)}if(i===t){Z=null;break}var A=i.sibling;if(A!==null){A.return=i.return,Z=A;break}Z=i.return}}var xS=Math.ceil,Ca=W.ReactCurrentDispatcher,Sc=W.ReactCurrentOwner,an=W.ReactCurrentBatchConfig,Be=0,dt=null,ot=null,yt=0,Zt=0,Lr=gi(0),ut=0,Xo=null,Ki=0,Ra=0,yc=0,Ko=null,Wt=null,Ac=0,Hr=1/0,Zn=null,Pa=!1,Tc=null,Ai=null,Na=!1,Ti=null,Da=0,Qo=0,Ic=null,ka=-1,Oa=0;function kt(){return(Be&6)!==0?nt():ka!==-1?ka:ka=nt()}function Ii(t){return(t.mode&1)===0?1:(Be&2)!==0&&yt!==0?yt&-yt:wS.transition!==null?(Oa===0&&(Oa=Wf()),Oa):(t=ze,t!==0||(t=window.event,t=t===void 0?16:qf(t.type)),t)}function yn(t,i,s,u){if(50<Qo)throw Qo=0,Ic=null,Error(r(185));Ao(t,s,u),((Be&2)===0||t!==dt)&&(t===dt&&((Be&2)===0&&(Ra|=s),ut===4&&wi(t,yt)),$t(t,u),s===1&&Be===0&&(i.mode&1)===0&&(Hr=nt()+500,sa&&mi()))}function $t(t,i){var s=t.callbackNode;wv(t,i);var u=bs(t,t===dt?yt:0);if(u===0)s!==null&&xf(s),t.callbackNode=null,t.callbackPriority=0;else if(i=u&-u,t.callbackPriority!==i){if(s!=null&&xf(s),i===1)t.tag===0?IS(qg.bind(null,t)):Hh(qg.bind(null,t)),SS(function(){(Be&6)===0&&mi()}),s=null;else{switch($f(u)){case 1:s=tu;break;case 4:s=bf;break;case 16:s=Hs;break;case 536870912:s=zf;break;default:s=Hs}s=sp(s,Zg.bind(null,t))}t.callbackPriority=i,t.callbackNode=s}}function Zg(t,i){if(ka=-1,Oa=0,(Be&6)!==0)throw Error(r(327));var s=t.callbackNode;if(Br()&&t.callbackNode!==s)return null;var u=bs(t,t===dt?yt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||i)i=Ma(t,u);else{i=u;var d=Be;Be|=2;var g=ep();(dt!==t||yt!==i)&&(Zn=null,Hr=nt()+500,Zi(t,i));do try{WS();break}catch(A){Jg(t,A)}while(!0);xu(),Ca.current=g,Be=d,ot!==null?i=0:(dt=null,yt=0,i=ut)}if(i!==0){if(i===2&&(d=nu(t),d!==0&&(u=d,i=wc(t,d))),i===1)throw s=Xo,Zi(t,0),wi(t,u),$t(t,nt()),s;if(i===6)wi(t,u);else{if(d=t.current.alternate,(u&30)===0&&!bS(d)&&(i=Ma(t,u),i===2&&(g=nu(t),g!==0&&(u=g,i=wc(t,g))),i===1))throw s=Xo,Zi(t,0),wi(t,u),$t(t,nt()),s;switch(t.finishedWork=d,t.finishedLanes=u,i){case 0:case 1:throw Error(r(345));case 2:qi(t,Wt,Zn);break;case 3:if(wi(t,u),(u&130023424)===u&&(i=Ac+500-nt(),10<i)){if(bs(t,0)!==0)break;if(d=t.suspendedLanes,(d&u)!==u){kt(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=Nu(qi.bind(null,t,Wt,Zn),i);break}qi(t,Wt,Zn);break;case 4:if(wi(t,u),(u&4194240)===u)break;for(i=t.eventTimes,d=-1;0<u;){var v=31-hn(u);g=1<<v,v=i[v],v>d&&(d=v),u&=~g}if(u=d,u=nt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*xS(u/1960))-u,10<u){t.timeoutHandle=Nu(qi.bind(null,t,Wt,Zn),u);break}qi(t,Wt,Zn);break;case 5:qi(t,Wt,Zn);break;default:throw Error(r(329))}}}return $t(t,nt()),t.callbackNode===s?Zg.bind(null,t):null}function wc(t,i){var s=Ko;return t.current.memoizedState.isDehydrated&&(Zi(t,i).flags|=256),t=Ma(t,i),t!==2&&(i=Wt,Wt=s,i!==null&&Ec(i)),t}function Ec(t){Wt===null?Wt=t:Wt.push.apply(Wt,t)}function bS(t){for(var i=t;;){if(i.flags&16384){var s=i.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var u=0;u<s.length;u++){var d=s[u],g=d.getSnapshot;d=d.value;try{if(!gn(g(),d))return!1}catch{return!1}}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function wi(t,i){for(i&=~yc,i&=~Ra,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var s=31-hn(i),u=1<<s;t[s]=-1,i&=~u}}function qg(t){if((Be&6)!==0)throw Error(r(327));Br();var i=bs(t,0);if((i&1)===0)return $t(t,nt()),null;var s=Ma(t,i);if(t.tag!==0&&s===2){var u=nu(t);u!==0&&(i=u,s=wc(t,u))}if(s===1)throw s=Xo,Zi(t,0),wi(t,i),$t(t,nt()),s;if(s===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,qi(t,Wt,Zn),$t(t,nt()),null}function _c(t,i){var s=Be;Be|=1;try{return t(i)}finally{Be=s,Be===0&&(Hr=nt()+500,sa&&mi())}}function Qi(t){Ti!==null&&Ti.tag===0&&(Be&6)===0&&Br();var i=Be;Be|=1;var s=an.transition,u=ze;try{if(an.transition=null,ze=1,t)return t()}finally{ze=u,an.transition=s,Be=i,(Be&6)===0&&mi()}}function Cc(){Zt=Lr.current,Ve(Lr)}function Zi(t,i){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,vS(s)),ot!==null)for(s=ot.return;s!==null;){var u=s;switch(Fu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&ra();break;case 3:Mr(),Ve(xt),Ve(wt),Xu();break;case 5:ju(u);break;case 4:Mr();break;case 13:Ve(Je);break;case 19:Ve(Je);break;case 10:bu(u.type._context);break;case 22:case 23:Cc()}s=s.return}if(dt=t,ot=t=Ei(t.current,null),yt=Zt=i,ut=0,Xo=null,yc=Ra=Ki=0,Wt=Ko=null,ji!==null){for(i=0;i<ji.length;i++)if(s=ji[i],u=s.interleaved,u!==null){s.interleaved=null;var d=u.next,g=s.pending;if(g!==null){var v=g.next;g.next=d,u.next=v}s.pending=u}ji=null}return t}function Jg(t,i){do{var s=ot;try{if(xu(),ma.current=Aa,va){for(var u=et.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}va=!1}if(Xi=0,ct=lt=et=null,zo=!1,Wo=0,Sc.current=null,s===null||s.return===null){ut=1,Xo=i,ot=null;break}e:{var g=t,v=s.return,A=s,E=i;if(i=yt,A.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var O=E,B=A,b=B.tag;if((B.mode&1)===0&&(b===0||b===11||b===15)){var H=B.alternate;H?(B.updateQueue=H.updateQueue,B.memoizedState=H.memoizedState,B.lanes=H.lanes):(B.updateQueue=null,B.memoizedState=null)}var Q=Eg(v);if(Q!==null){Q.flags&=-257,_g(Q,v,A,g,i),Q.mode&1&&wg(g,O,i),i=Q,E=O;var J=i.updateQueue;if(J===null){var ne=new Set;ne.add(E),i.updateQueue=ne}else J.add(E);break e}else{if((i&1)===0){wg(g,O,i),Rc();break e}E=Error(r(426))}}else if(Qe&&A.mode&1){var it=Eg(v);if(it!==null){(it.flags&65536)===0&&(it.flags|=256),_g(it,v,A,g,i),Bu(Ur(E,A));break e}}g=E=Ur(E,A),ut!==4&&(ut=2),Ko===null?Ko=[g]:Ko.push(g),g=v;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var N=Tg(g,E,i);Xh(g,N);break e;case 1:A=E;var R=g.type,D=g.stateNode;if((g.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Ai===null||!Ai.has(D)))){g.flags|=65536,i&=-i,g.lanes|=i;var $=Ig(g,A,i);Xh(g,$);break e}}g=g.return}while(g!==null)}np(s)}catch(se){i=se,ot===s&&s!==null&&(ot=s=s.return);continue}break}while(!0)}function ep(){var t=Ca.current;return Ca.current=Aa,t===null?Aa:t}function Rc(){(ut===0||ut===3||ut===2)&&(ut=4),dt===null||(Ki&268435455)===0&&(Ra&268435455)===0||wi(dt,yt)}function Ma(t,i){var s=Be;Be|=2;var u=ep();(dt!==t||yt!==i)&&(Zn=null,Zi(t,i));do try{zS();break}catch(d){Jg(t,d)}while(!0);if(xu(),Be=s,Ca.current=u,ot!==null)throw Error(r(261));return dt=null,yt=0,ut}function zS(){for(;ot!==null;)tp(ot)}function WS(){for(;ot!==null&&!gv();)tp(ot)}function tp(t){var i=op(t.alternate,t,Zt);t.memoizedProps=t.pendingProps,i===null?np(t):ot=i,Sc.current=null}function np(t){var i=t;do{var s=i.alternate;if(t=i.return,(i.flags&32768)===0){if(s=FS(s,i,Zt),s!==null){ot=s;return}}else{if(s=LS(s,i),s!==null){s.flags&=32767,ot=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,ot=null;return}}if(i=i.sibling,i!==null){ot=i;return}ot=i=t}while(i!==null);ut===0&&(ut=5)}function qi(t,i,s){var u=ze,d=an.transition;try{an.transition=null,ze=1,$S(t,i,s,u)}finally{an.transition=d,ze=u}return null}function $S(t,i,s,u){do Br();while(Ti!==null);if((Be&6)!==0)throw Error(r(327));s=t.finishedWork;var d=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var g=s.lanes|s.childLanes;if(Ev(t,g),t===dt&&(ot=dt=null,yt=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Na||(Na=!0,sp(Hs,function(){return Br(),null})),g=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||g){g=an.transition,an.transition=null;var v=ze;ze=1;var A=Be;Be|=4,Sc.current=null,BS(t,s),jg(s,t),cS(Ru),$s=!!Cu,Ru=Cu=null,t.current=s,GS(s),pv(),Be=A,ze=v,an.transition=g}else t.current=s;if(Na&&(Na=!1,Ti=t,Da=d),g=t.pendingLanes,g===0&&(Ai=null),Sv(s.stateNode),$t(t,nt()),i!==null)for(u=t.onRecoverableError,s=0;s<i.length;s++)d=i[s],u(d.value,{componentStack:d.stack,digest:d.digest});if(Pa)throw Pa=!1,t=Tc,Tc=null,t;return(Da&1)!==0&&t.tag!==0&&Br(),g=t.pendingLanes,(g&1)!==0?t===Ic?Qo++:(Qo=0,Ic=t):Qo=0,mi(),null}function Br(){if(Ti!==null){var t=$f(Da),i=an.transition,s=ze;try{if(an.transition=null,ze=16>t?16:t,Ti===null)var u=!1;else{if(t=Ti,Ti=null,Da=0,(Be&6)!==0)throw Error(r(331));var d=Be;for(Be|=4,Z=t.current;Z!==null;){var g=Z,v=g.child;if((Z.flags&16)!==0){var A=g.deletions;if(A!==null){for(var E=0;E<A.length;E++){var O=A[E];for(Z=O;Z!==null;){var B=Z;switch(B.tag){case 0:case 11:case 15:Vo(8,B,g)}var b=B.child;if(b!==null)b.return=B,Z=b;else for(;Z!==null;){B=Z;var H=B.sibling,Q=B.return;if(bg(B),B===O){Z=null;break}if(H!==null){H.return=Q,Z=H;break}Z=Q}}}var J=g.alternate;if(J!==null){var ne=J.child;if(ne!==null){J.child=null;do{var it=ne.sibling;ne.sibling=null,ne=it}while(ne!==null)}}Z=g}}if((g.subtreeFlags&2064)!==0&&v!==null)v.return=g,Z=v;else e:for(;Z!==null;){if(g=Z,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Vo(9,g,g.return)}var N=g.sibling;if(N!==null){N.return=g.return,Z=N;break e}Z=g.return}}var R=t.current;for(Z=R;Z!==null;){v=Z;var D=v.child;if((v.subtreeFlags&2064)!==0&&D!==null)D.return=v,Z=D;else e:for(v=R;Z!==null;){if(A=Z,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:_a(9,A)}}catch(se){tt(A,A.return,se)}if(A===v){Z=null;break e}var $=A.sibling;if($!==null){$.return=A.return,Z=$;break e}Z=A.return}}if(Be=d,mi(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Bs,t)}catch{}u=!0}return u}finally{ze=s,an.transition=i}}return!1}function ip(t,i,s){i=Ur(s,i),i=Tg(t,i,1),t=Si(t,i,1),i=kt(),t!==null&&(Ao(t,1,i),$t(t,i))}function tt(t,i,s){if(t.tag===3)ip(t,t,s);else for(;i!==null;){if(i.tag===3){ip(i,t,s);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ai===null||!Ai.has(u))){t=Ur(s,t),t=Ig(i,t,1),i=Si(i,t,1),t=kt(),i!==null&&(Ao(i,1,t),$t(i,t));break}}i=i.return}}function YS(t,i,s){var u=t.pingCache;u!==null&&u.delete(i),i=kt(),t.pingedLanes|=t.suspendedLanes&s,dt===t&&(yt&s)===s&&(ut===4||ut===3&&(yt&130023424)===yt&&500>nt()-Ac?Zi(t,0):yc|=s),$t(t,i)}function rp(t,i){i===0&&((t.mode&1)===0?i=1:(i=xs,xs<<=1,(xs&130023424)===0&&(xs=4194304)));var s=kt();t=Xn(t,i),t!==null&&(Ao(t,i,s),$t(t,s))}function jS(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),rp(t,s)}function VS(t,i){var s=0;switch(t.tag){case 13:var u=t.stateNode,d=t.memoizedState;d!==null&&(s=d.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(i),rp(t,s)}var op;op=function(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps||xt.current)zt=!0;else{if((t.lanes&s)===0&&(i.flags&128)===0)return zt=!1,US(t,i,s);zt=(t.flags&131072)!==0}else zt=!1,Qe&&(i.flags&1048576)!==0&&Bh(i,la,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;wa(t,i),t=i.pendingProps;var d=Cr(i,wt.current);Or(i,s),d=Zu(null,i,u,t,d,s);var g=qu();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,bt(u)?(g=!0,oa(i)):g=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,$u(i),d.updater=Ta,i.stateNode=d,d._reactInternals=i,rc(i,u,t,s),i=lc(null,i,u,!0,g,s)):(i.tag=0,Qe&&g&&Uu(i),Dt(null,i,d,s),i=i.child),i;case 16:u=i.elementType;e:{switch(wa(t,i),t=i.pendingProps,d=u._init,u=d(u._payload),i.type=u,d=i.tag=KS(u),t=mn(u,t),d){case 0:i=ac(null,i,u,t,s);break e;case 1:i=kg(null,i,u,t,s);break e;case 11:i=Cg(null,i,u,t,s);break e;case 14:i=Rg(null,i,u,mn(u.type,t),s);break e}throw Error(r(306,u,""))}return i;case 0:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:mn(u,d),ac(t,i,u,d,s);case 1:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:mn(u,d),kg(t,i,u,d,s);case 3:e:{if(Og(i),t===null)throw Error(r(387));u=i.pendingProps,g=i.memoizedState,d=g.element,Vh(t,i),ga(i,u,null,s);var v=i.memoizedState;if(u=v.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){d=Ur(Error(r(423)),i),i=Mg(t,i,u,s,d);break e}else if(u!==d){d=Ur(Error(r(424)),i),i=Mg(t,i,u,s,d);break e}else for(Qt=hi(i.stateNode.containerInfo.firstChild),Kt=i,Qe=!0,pn=null,s=Yh(i,null,u,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Nr(),u===d){i=Qn(t,i,s);break e}Dt(t,i,u,s)}i=i.child}return i;case 5:return Qh(i),t===null&&Hu(i),u=i.type,d=i.pendingProps,g=t!==null?t.memoizedProps:null,v=d.children,Pu(u,d)?v=null:g!==null&&Pu(u,g)&&(i.flags|=32),Dg(t,i),Dt(t,i,v,s),i.child;case 6:return t===null&&Hu(i),null;case 13:return Ug(t,i,s);case 4:return Yu(i,i.stateNode.containerInfo),u=i.pendingProps,t===null?i.child=Dr(i,null,u,s):Dt(t,i,u,s),i.child;case 11:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:mn(u,d),Cg(t,i,u,d,s);case 7:return Dt(t,i,i.pendingProps,s),i.child;case 8:return Dt(t,i,i.pendingProps.children,s),i.child;case 12:return Dt(t,i,i.pendingProps.children,s),i.child;case 10:e:{if(u=i.type._context,d=i.pendingProps,g=i.memoizedProps,v=d.value,$e(da,u._currentValue),u._currentValue=v,g!==null)if(gn(g.value,v)){if(g.children===d.children&&!xt.current){i=Qn(t,i,s);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var A=g.dependencies;if(A!==null){v=g.child;for(var E=A.firstContext;E!==null;){if(E.context===u){if(g.tag===1){E=Kn(-1,s&-s),E.tag=2;var O=g.updateQueue;if(O!==null){O=O.shared;var B=O.pending;B===null?E.next=E:(E.next=B.next,B.next=E),O.pending=E}}g.lanes|=s,E=g.alternate,E!==null&&(E.lanes|=s),zu(g.return,s,i),A.lanes|=s;break}E=E.next}}else if(g.tag===10)v=g.type===i.type?null:g.child;else if(g.tag===18){if(v=g.return,v===null)throw Error(r(341));v.lanes|=s,A=v.alternate,A!==null&&(A.lanes|=s),zu(v,s,i),v=g.sibling}else v=g.child;if(v!==null)v.return=g;else for(v=g;v!==null;){if(v===i){v=null;break}if(g=v.sibling,g!==null){g.return=v.return,v=g;break}v=v.return}g=v}Dt(t,i,d.children,s),i=i.child}return i;case 9:return d=i.type,u=i.pendingProps.children,Or(i,s),d=on(d),u=u(d),i.flags|=1,Dt(t,i,u,s),i.child;case 14:return u=i.type,d=mn(u,i.pendingProps),d=mn(u.type,d),Rg(t,i,u,d,s);case 15:return Pg(t,i,i.type,i.pendingProps,s);case 17:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:mn(u,d),wa(t,i),i.tag=1,bt(u)?(t=!0,oa(i)):t=!1,Or(i,s),yg(i,u,d),rc(i,u,d,s),lc(null,i,u,!0,t,s);case 19:return Lg(t,i,s);case 22:return Ng(t,i,s)}throw Error(r(156,i.tag))};function sp(t,i){return Gf(t,i)}function XS(t,i,s,u){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(t,i,s,u){return new XS(t,i,s,u)}function Pc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KS(t){if(typeof t=="function")return Pc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ae)return 11;if(t===Se)return 14}return 2}function Ei(t,i){var s=t.alternate;return s===null?(s=ln(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Ua(t,i,s,u,d,g){var v=2;if(u=t,typeof t=="function")Pc(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case G:return Ji(s.children,d,g,i);case te:v=8,d|=8;break;case fe:return t=ln(12,s,i,d|2),t.elementType=fe,t.lanes=g,t;case ve:return t=ln(13,s,i,d),t.elementType=ve,t.lanes=g,t;case re:return t=ln(19,s,i,d),t.elementType=re,t.lanes=g,t;case q:return Fa(s,d,g,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _e:v=10;break e;case Fe:v=9;break e;case Ae:v=11;break e;case Se:v=14;break e;case le:v=16,u=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return i=ln(v,s,i,d),i.elementType=t,i.type=u,i.lanes=g,i}function Ji(t,i,s,u){return t=ln(7,t,u,i),t.lanes=s,t}function Fa(t,i,s,u){return t=ln(22,t,u,i),t.elementType=q,t.lanes=s,t.stateNode={isHidden:!1},t}function Nc(t,i,s){return t=ln(6,t,null,i),t.lanes=s,t}function Dc(t,i,s){return i=ln(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function QS(t,i,s,u,d){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iu(0),this.expirationTimes=iu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iu(0),this.identifierPrefix=u,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function kc(t,i,s,u,d,g,v,A,E){return t=new QS(t,i,s,A,E),i===1?(i=1,g===!0&&(i|=8)):i=0,g=ln(3,null,null,i),t.current=g,g.stateNode=t,g.memoizedState={element:u,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},$u(g),t}function ZS(t,i,s){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:u==null?null:""+u,children:t,containerInfo:i,implementation:s}}function ap(t){if(!t)return pi;t=t._reactInternals;e:{if(bi(t)!==t||t.tag!==1)throw Error(r(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(bt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(t.tag===1){var s=t.type;if(bt(s))return Fh(t,s,i)}return i}function lp(t,i,s,u,d,g,v,A,E){return t=kc(s,u,!0,t,d,g,v,A,E),t.context=ap(null),s=t.current,u=kt(),d=Ii(s),g=Kn(u,d),g.callback=i??null,Si(s,g,d),t.current.lanes=d,Ao(t,d,u),$t(t,u),t}function La(t,i,s,u){var d=i.current,g=kt(),v=Ii(d);return s=ap(s),i.context===null?i.context=s:i.pendingContext=s,i=Kn(g,v),i.payload={element:t},u=u===void 0?null:u,u!==null&&(i.callback=u),t=Si(d,i,v),t!==null&&(yn(t,d,v,g),ha(t,d,v)),v}function Ha(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function up(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function Oc(t,i){up(t,i),(t=t.alternate)&&up(t,i)}function qS(){return null}var cp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mc(t){this._internalRoot=t}Ba.prototype.render=Mc.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));La(t,i,null,null)},Ba.prototype.unmount=Mc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Qi(function(){La(null,t,null,null)}),i[$n]=null}};function Ba(t){this._internalRoot=t}Ba.prototype.unstable_scheduleHydration=function(t){if(t){var i=Vf();t={blockedOn:null,target:t,priority:i};for(var s=0;s<ci.length&&i!==0&&i<ci[s].priority;s++);ci.splice(s,0,t),s===0&&Qf(t)}};function Uc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ga(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dp(){}function JS(t,i,s,u,d){if(d){if(typeof u=="function"){var g=u;u=function(){var O=Ha(v);g.call(O)}}var v=lp(i,u,t,0,null,!1,!1,"",dp);return t._reactRootContainer=v,t[$n]=v.current,Uo(t.nodeType===8?t.parentNode:t),Qi(),v}for(;d=t.lastChild;)t.removeChild(d);if(typeof u=="function"){var A=u;u=function(){var O=Ha(E);A.call(O)}}var E=kc(t,0,!1,null,null,!1,!1,"",dp);return t._reactRootContainer=E,t[$n]=E.current,Uo(t.nodeType===8?t.parentNode:t),Qi(function(){La(i,E,s,u)}),E}function xa(t,i,s,u,d){var g=s._reactRootContainer;if(g){var v=g;if(typeof d=="function"){var A=d;d=function(){var E=Ha(v);A.call(E)}}La(i,v,t,d)}else v=JS(s,i,t,d,u);return Ha(v)}Yf=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var s=yo(i.pendingLanes);s!==0&&(ru(i,s|1),$t(i,nt()),(Be&6)===0&&(Hr=nt()+500,mi()))}break;case 13:Qi(function(){var u=Xn(t,1);if(u!==null){var d=kt();yn(u,t,1,d)}}),Oc(t,1)}},ou=function(t){if(t.tag===13){var i=Xn(t,134217728);if(i!==null){var s=kt();yn(i,t,134217728,s)}Oc(t,134217728)}},jf=function(t){if(t.tag===13){var i=Ii(t),s=Xn(t,i);if(s!==null){var u=kt();yn(s,t,i,u)}Oc(t,i)}},Vf=function(){return ze},Xf=function(t,i){var s=ze;try{return ze=t,i()}finally{ze=s}},Zl=function(t,i,s){switch(i){case"input":if(Gt(t,s),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<s.length;i++){var u=s[i];if(u!==t&&u.form===t.form){var d=ia(u);if(!d)throw Error(r(90));de(u),Gt(u,d)}}}break;case"textarea":wf(t,s);break;case"select":i=s.value,i!=null&&si(t,!!s.multiple,i,!1)}},Of=_c,Mf=Qi;var ey={usingClientEntryPoint:!1,Events:[Ho,Er,ia,Df,kf,_c]},Zo={findFiberByHostInstance:zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ty={bundleType:Zo.bundleType,version:Zo.version,rendererPackageName:Zo.rendererPackageName,rendererConfig:Zo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hf(t),t===null?null:t.stateNode},findFiberByHostInstance:Zo.findFiberByHostInstance||qS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ba.isDisabled&&ba.supportsFiber)try{Bs=ba.inject(ty),Dn=ba}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ey,Yt.createPortal=function(t,i){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uc(i))throw Error(r(200));return ZS(t,i,null,s)},Yt.createRoot=function(t,i){if(!Uc(t))throw Error(r(299));var s=!1,u="",d=cp;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=kc(t,1,!1,null,null,s,!1,u,d),t[$n]=i.current,Uo(t.nodeType===8?t.parentNode:t),new Mc(i)},Yt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=Hf(i),t=t===null?null:t.stateNode,t},Yt.flushSync=function(t){return Qi(t)},Yt.hydrate=function(t,i,s){if(!Ga(i))throw Error(r(200));return xa(null,t,i,!0,s)},Yt.hydrateRoot=function(t,i,s){if(!Uc(t))throw Error(r(405));var u=s!=null&&s.hydratedSources||null,d=!1,g="",v=cp;if(s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),i=lp(i,null,t,1,s??null,d,!1,g,v),t[$n]=i.current,Uo(t),u)for(t=0;t<u.length;t++)s=u[t],d=s._getVersion,d=d(s._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[s,d]:i.mutableSourceEagerHydrationData.push(s,d);return new Ba(i)},Yt.render=function(t,i,s){if(!Ga(i))throw Error(r(200));return xa(null,t,i,!1,s)},Yt.unmountComponentAtNode=function(t){if(!Ga(t))throw Error(r(40));return t._reactRootContainer?(Qi(function(){xa(null,null,t,!1,function(){t._reactRootContainer=null,t[$n]=null})}),!0):!1},Yt.unstable_batchedUpdates=_c,Yt.unstable_renderSubtreeIntoContainer=function(t,i,s,u){if(!Ga(s))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return xa(t,i,s,!1,u)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var yp;function dy(){if(yp)return Hc.exports;yp=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Hc.exports=cy(),Hc.exports}var Ap;function fy(){if(Ap)return za;Ap=1;var e=dy();return za.createRoot=e.createRoot,za.hydrateRoot=e.hydrateRoot,za}var hy=fy();const gy=Um(hy),Fm=De.createContext(void 0),py=({initialAppState:e,children:n})=>{const[r,o]=De.useState(e),[a,l]=De.useState(void 0),c=(f,h)=>{o(f),f==="gameOver"&&h?l(h):f!=="gameOver"&&l(void 0)};return He.jsx(Fm.Provider,{value:{appState:r,setAppState:c,gameOverDetails:a},children:n})},Nl=()=>{const e=De.useContext(Fm);if(e===void 0)throw new Error("useGameContext must be used within a GameProvider");return e};var Pt=function(){return Pt=Object.assign||function(n){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])}return n},Pt.apply(this,arguments)};function ms(e,n,r){if(r||arguments.length===2)for(var o=0,a=n.length,l;o<a;o++)(l||!(o in n))&&(l||(l=Array.prototype.slice.call(n,0,o)),l[o]=n[o]);return e.concat(l||Array.prototype.slice.call(n))}var Xe="-ms-",us="-moz-",xe="-webkit-",Lm="comm",Dl="rule",Md="decl",my="@import",Hm="@keyframes",vy="@layer",Bm=Math.abs,Ud=String.fromCharCode,pd=Object.assign;function Sy(e,n){return ht(e,0)^45?(((n<<2^ht(e,0))<<2^ht(e,1))<<2^ht(e,2))<<2^ht(e,3):0}function Gm(e){return e.trim()}function ei(e,n){return(e=n.exec(e))?e[0]:e}function Pe(e,n,r){return e.replace(n,r)}function ul(e,n,r){return e.indexOf(n,r)}function ht(e,n){return e.charCodeAt(n)|0}function Zr(e,n,r){return e.slice(n,r)}function Bn(e){return e.length}function xm(e){return e.length}function os(e,n){return n.push(e),e}function yy(e,n){return e.map(n).join("")}function Tp(e,n){return e.filter(function(r){return!ei(r,n)})}var kl=1,qr=1,bm=0,fn=0,st=0,uo="";function Ol(e,n,r,o,a,l,c,f){return{value:e,root:n,parent:r,type:o,props:a,children:l,line:kl,column:qr,length:c,return:"",siblings:f}}function Di(e,n){return pd(Ol("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},n)}function Gr(e){for(;e.root;)e=Di(e.root,{children:[e]});os(e,e.siblings)}function Ay(){return st}function Ty(){return st=fn>0?ht(uo,--fn):0,qr--,st===10&&(qr=1,kl--),st}function wn(){return st=fn<bm?ht(uo,fn++):0,qr++,st===10&&(qr=1,kl++),st}function ur(){return ht(uo,fn)}function cl(){return fn}function Ml(e,n){return Zr(uo,e,n)}function md(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Iy(e){return kl=qr=1,bm=Bn(uo=e),fn=0,[]}function wy(e){return uo="",e}function xc(e){return Gm(Ml(fn-1,vd(e===91?e+2:e===40?e+1:e)))}function Ey(e){for(;(st=ur())&&st<33;)wn();return md(e)>2||md(st)>3?"":" "}function _y(e,n){for(;--n&&wn()&&!(st<48||st>102||st>57&&st<65||st>70&&st<97););return Ml(e,cl()+(n<6&&ur()==32&&wn()==32))}function vd(e){for(;wn();)switch(st){case e:return fn;case 34:case 39:e!==34&&e!==39&&vd(st);break;case 40:e===41&&vd(e);break;case 92:wn();break}return fn}function Cy(e,n){for(;wn()&&e+st!==57;)if(e+st===84&&ur()===47)break;return"/*"+Ml(n,fn-1)+"*"+Ud(e===47?e:wn())}function Ry(e){for(;!md(ur());)wn();return Ml(e,fn)}function Py(e){return wy(dl("",null,null,null,[""],e=Iy(e),0,[0],e))}function dl(e,n,r,o,a,l,c,f,h){for(var p=0,m=0,S=c,y=0,w=0,P=0,T=1,C=1,F=1,U=0,L="",W=a,ae=l,M=o,G=L;C;)switch(P=U,U=wn()){case 40:if(P!=108&&ht(G,S-1)==58){ul(G+=Pe(xc(U),"&","&\f"),"&\f",Bm(p?f[p-1]:0))!=-1&&(F=-1);break}case 34:case 39:case 91:G+=xc(U);break;case 9:case 10:case 13:case 32:G+=Ey(P);break;case 92:G+=_y(cl()-1,7);continue;case 47:switch(ur()){case 42:case 47:os(Ny(Cy(wn(),cl()),n,r,h),h);break;default:G+="/"}break;case 123*T:f[p++]=Bn(G)*F;case 125*T:case 59:case 0:switch(U){case 0:case 125:C=0;case 59+m:F==-1&&(G=Pe(G,/\f/g,"")),w>0&&Bn(G)-S&&os(w>32?wp(G+";",o,r,S-1,h):wp(Pe(G," ","")+";",o,r,S-2,h),h);break;case 59:G+=";";default:if(os(M=Ip(G,n,r,p,m,a,f,L,W=[],ae=[],S,l),l),U===123)if(m===0)dl(G,n,M,M,W,l,S,f,ae);else switch(y===99&&ht(G,3)===110?100:y){case 100:case 108:case 109:case 115:dl(e,M,M,o&&os(Ip(e,M,M,0,0,a,f,L,a,W=[],S,ae),ae),a,ae,S,f,o?W:ae);break;default:dl(G,M,M,M,[""],ae,0,f,ae)}}p=m=w=0,T=F=1,L=G="",S=c;break;case 58:S=1+Bn(G),w=P;default:if(T<1){if(U==123)--T;else if(U==125&&T++==0&&Ty()==125)continue}switch(G+=Ud(U),U*T){case 38:F=m>0?1:(G+="\f",-1);break;case 44:f[p++]=(Bn(G)-1)*F,F=1;break;case 64:ur()===45&&(G+=xc(wn())),y=ur(),m=S=Bn(L=G+=Ry(cl())),U++;break;case 45:P===45&&Bn(G)==2&&(T=0)}}return l}function Ip(e,n,r,o,a,l,c,f,h,p,m,S){for(var y=a-1,w=a===0?l:[""],P=xm(w),T=0,C=0,F=0;T<o;++T)for(var U=0,L=Zr(e,y+1,y=Bm(C=c[T])),W=e;U<P;++U)(W=Gm(C>0?w[U]+" "+L:Pe(L,/&\f/g,w[U])))&&(h[F++]=W);return Ol(e,n,r,a===0?Dl:f,h,p,m,S)}function Ny(e,n,r,o){return Ol(e,n,r,Lm,Ud(Ay()),Zr(e,2,-2),0,o)}function wp(e,n,r,o,a){return Ol(e,n,r,Md,Zr(e,0,o),Zr(e,o+1,-1),o,a)}function zm(e,n,r){switch(Sy(e,n)){case 5103:return xe+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return xe+e+e;case 4789:return us+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return xe+e+us+e+Xe+e+e;case 5936:switch(ht(e,n+11)){case 114:return xe+e+Xe+Pe(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return xe+e+Xe+Pe(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return xe+e+Xe+Pe(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return xe+e+Xe+e+e;case 6165:return xe+e+Xe+"flex-"+e+e;case 5187:return xe+e+Pe(e,/(\w+).+(:[^]+)/,xe+"box-$1$2"+Xe+"flex-$1$2")+e;case 5443:return xe+e+Xe+"flex-item-"+Pe(e,/flex-|-self/g,"")+(ei(e,/flex-|baseline/)?"":Xe+"grid-row-"+Pe(e,/flex-|-self/g,""))+e;case 4675:return xe+e+Xe+"flex-line-pack"+Pe(e,/align-content|flex-|-self/g,"")+e;case 5548:return xe+e+Xe+Pe(e,"shrink","negative")+e;case 5292:return xe+e+Xe+Pe(e,"basis","preferred-size")+e;case 6060:return xe+"box-"+Pe(e,"-grow","")+xe+e+Xe+Pe(e,"grow","positive")+e;case 4554:return xe+Pe(e,/([^-])(transform)/g,"$1"+xe+"$2")+e;case 6187:return Pe(Pe(Pe(e,/(zoom-|grab)/,xe+"$1"),/(image-set)/,xe+"$1"),e,"")+e;case 5495:case 3959:return Pe(e,/(image-set\([^]*)/,xe+"$1$`$1");case 4968:return Pe(Pe(e,/(.+:)(flex-)?(.*)/,xe+"box-pack:$3"+Xe+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+xe+e+e;case 4200:if(!ei(e,/flex-|baseline/))return Xe+"grid-column-align"+Zr(e,n)+e;break;case 2592:case 3360:return Xe+Pe(e,"template-","")+e;case 4384:case 3616:return r&&r.some(function(o,a){return n=a,ei(o.props,/grid-\w+-end/)})?~ul(e+(r=r[n].value),"span",0)?e:Xe+Pe(e,"-start","")+e+Xe+"grid-row-span:"+(~ul(r,"span",0)?ei(r,/\d+/):+ei(r,/\d+/)-+ei(e,/\d+/))+";":Xe+Pe(e,"-start","")+e;case 4896:case 4128:return r&&r.some(function(o){return ei(o.props,/grid-\w+-start/)})?e:Xe+Pe(Pe(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return Pe(e,/(.+)-inline(.+)/,xe+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Bn(e)-1-n>6)switch(ht(e,n+1)){case 109:if(ht(e,n+4)!==45)break;case 102:return Pe(e,/(.+:)(.+)-([^]+)/,"$1"+xe+"$2-$3$1"+us+(ht(e,n+3)==108?"$3":"$2-$3"))+e;case 115:return~ul(e,"stretch",0)?zm(Pe(e,"stretch","fill-available"),n,r)+e:e}break;case 5152:case 5920:return Pe(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(o,a,l,c,f,h,p){return Xe+a+":"+l+p+(c?Xe+a+"-span:"+(f?h:+h-+l)+p:"")+e});case 4949:if(ht(e,n+6)===121)return Pe(e,":",":"+xe)+e;break;case 6444:switch(ht(e,ht(e,14)===45?18:11)){case 120:return Pe(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+xe+(ht(e,14)===45?"inline-":"")+"box$3$1"+xe+"$2$3$1"+Xe+"$2box$3")+e;case 100:return Pe(e,":",":"+Xe)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Pe(e,"scroll-","scroll-snap-")+e}return e}function vl(e,n){for(var r="",o=0;o<e.length;o++)r+=n(e[o],o,e,n)||"";return r}function Dy(e,n,r,o){switch(e.type){case vy:if(e.children.length)break;case my:case Md:return e.return=e.return||e.value;case Lm:return"";case Hm:return e.return=e.value+"{"+vl(e.children,o)+"}";case Dl:if(!Bn(e.value=e.props.join(",")))return""}return Bn(r=vl(e.children,o))?e.return=e.value+"{"+r+"}":""}function ky(e){var n=xm(e);return function(r,o,a,l){for(var c="",f=0;f<n;f++)c+=e[f](r,o,a,l)||"";return c}}function Oy(e){return function(n){n.root||(n=n.return)&&e(n)}}function My(e,n,r,o){if(e.length>-1&&!e.return)switch(e.type){case Md:e.return=zm(e.value,e.length,r);return;case Hm:return vl([Di(e,{value:Pe(e.value,"@","@"+xe)})],o);case Dl:if(e.length)return yy(r=e.props,function(a){switch(ei(a,o=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Gr(Di(e,{props:[Pe(a,/:(read-\w+)/,":"+us+"$1")]})),Gr(Di(e,{props:[a]})),pd(e,{props:Tp(r,o)});break;case"::placeholder":Gr(Di(e,{props:[Pe(a,/:(plac\w+)/,":"+xe+"input-$1")]})),Gr(Di(e,{props:[Pe(a,/:(plac\w+)/,":"+us+"$1")]})),Gr(Di(e,{props:[Pe(a,/:(plac\w+)/,Xe+"input-$1")]})),Gr(Di(e,{props:[a]})),pd(e,{props:Tp(r,o)});break}return""})}}var Uy={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Jt={},Jr=typeof process<"u"&&Jt!==void 0&&(Jt.REACT_APP_SC_ATTR||Jt.SC_ATTR)||"data-styled",Wm="active",$m="data-styled-version",Ul="6.1.13",Fd=`/*!sc*/
`,Sl=typeof window<"u"&&"HTMLElement"in window,Fy=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Jt!==void 0&&Jt.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Jt.REACT_APP_SC_DISABLE_SPEEDY!==""?Jt.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Jt.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Jt!==void 0&&Jt.SC_DISABLE_SPEEDY!==void 0&&Jt.SC_DISABLE_SPEEDY!==""&&Jt.SC_DISABLE_SPEEDY!=="false"&&Jt.SC_DISABLE_SPEEDY),Ly={},Fl=Object.freeze([]),eo=Object.freeze({});function Ym(e,n,r){return r===void 0&&(r=eo),e.theme!==r.theme&&e.theme||n||r.theme}var jm=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Hy=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,By=/(^-|-$)/g;function Ep(e){return e.replace(Hy,"-").replace(By,"")}var Gy=/(a)(d)/gi,Wa=52,_p=function(e){return String.fromCharCode(e+(e>25?39:97))};function Sd(e){var n,r="";for(n=Math.abs(e);n>Wa;n=n/Wa|0)r=_p(n%Wa)+r;return(_p(n%Wa)+r).replace(Gy,"$1-$2")}var bc,Vm=5381,jr=function(e,n){for(var r=n.length;r;)e=33*e^n.charCodeAt(--r);return e},Xm=function(e){return jr(Vm,e)};function Km(e){return Sd(Xm(e)>>>0)}function xy(e){return e.displayName||e.name||"Component"}function zc(e){return typeof e=="string"&&!0}var Qm=typeof Symbol=="function"&&Symbol.for,Zm=Qm?Symbol.for("react.memo"):60115,by=Qm?Symbol.for("react.forward_ref"):60112,zy={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Wy={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},qm={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$y=((bc={})[by]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},bc[Zm]=qm,bc);function Cp(e){return("type"in(n=e)&&n.type.$$typeof)===Zm?qm:"$$typeof"in e?$y[e.$$typeof]:zy;var n}var Yy=Object.defineProperty,jy=Object.getOwnPropertyNames,Rp=Object.getOwnPropertySymbols,Vy=Object.getOwnPropertyDescriptor,Xy=Object.getPrototypeOf,Pp=Object.prototype;function Jm(e,n,r){if(typeof n!="string"){if(Pp){var o=Xy(n);o&&o!==Pp&&Jm(e,o,r)}var a=jy(n);Rp&&(a=a.concat(Rp(n)));for(var l=Cp(e),c=Cp(n),f=0;f<a.length;++f){var h=a[f];if(!(h in Wy||r&&r[h]||c&&h in c||l&&h in l)){var p=Vy(n,h);try{Yy(e,h,p)}catch{}}}}return e}function to(e){return typeof e=="function"}function Ld(e){return typeof e=="object"&&"styledComponentId"in e}function ar(e,n){return e&&n?"".concat(e," ").concat(n):e||n||""}function yd(e,n){if(e.length===0)return"";for(var r=e[0],o=1;o<e.length;o++)r+=e[o];return r}function vs(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Ad(e,n,r){if(r===void 0&&(r=!1),!r&&!vs(e)&&!Array.isArray(e))return n;if(Array.isArray(n))for(var o=0;o<n.length;o++)e[o]=Ad(e[o],n[o]);else if(vs(n))for(var o in n)e[o]=Ad(e[o],n[o]);return e}function Hd(e,n){Object.defineProperty(e,"toString",{value:n})}function Ds(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(n.length>0?" Args: ".concat(n.join(", ")):""))}var Ky=function(){function e(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}return e.prototype.indexOfGroup=function(n){for(var r=0,o=0;o<n;o++)r+=this.groupSizes[o];return r},e.prototype.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var o=this.groupSizes,a=o.length,l=a;n>=l;)if((l<<=1)<0)throw Ds(16,"".concat(n));this.groupSizes=new Uint32Array(l),this.groupSizes.set(o),this.length=l;for(var c=a;c<l;c++)this.groupSizes[c]=0}for(var f=this.indexOfGroup(n+1),h=(c=0,r.length);c<h;c++)this.tag.insertRule(f,r[c])&&(this.groupSizes[n]++,f++)},e.prototype.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],o=this.indexOfGroup(n),a=o+r;this.groupSizes[n]=0;for(var l=o;l<a;l++)this.tag.deleteRule(o)}},e.prototype.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var o=this.groupSizes[n],a=this.indexOfGroup(n),l=a+o,c=a;c<l;c++)r+="".concat(this.tag.getRule(c)).concat(Fd);return r},e}(),fl=new Map,yl=new Map,hl=1,$a=function(e){if(fl.has(e))return fl.get(e);for(;yl.has(hl);)hl++;var n=hl++;return fl.set(e,n),yl.set(n,e),n},Qy=function(e,n){hl=n+1,fl.set(e,n),yl.set(n,e)},Zy="style[".concat(Jr,"][").concat($m,'="').concat(Ul,'"]'),qy=new RegExp("^".concat(Jr,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Jy=function(e,n,r){for(var o,a=r.split(","),l=0,c=a.length;l<c;l++)(o=a[l])&&e.registerName(n,o)},eA=function(e,n){for(var r,o=((r=n.textContent)!==null&&r!==void 0?r:"").split(Fd),a=[],l=0,c=o.length;l<c;l++){var f=o[l].trim();if(f){var h=f.match(qy);if(h){var p=0|parseInt(h[1],10),m=h[2];p!==0&&(Qy(m,p),Jy(e,m,h[3]),e.getTag().insertRules(p,a)),a.length=0}else a.push(f)}}},Np=function(e){for(var n=document.querySelectorAll(Zy),r=0,o=n.length;r<o;r++){var a=n[r];a&&a.getAttribute(Jr)!==Wm&&(eA(e,a),a.parentNode&&a.parentNode.removeChild(a))}};function tA(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var e0=function(e){var n=document.head,r=e||n,o=document.createElement("style"),a=function(f){var h=Array.from(f.querySelectorAll("style[".concat(Jr,"]")));return h[h.length-1]}(r),l=a!==void 0?a.nextSibling:null;o.setAttribute(Jr,Wm),o.setAttribute($m,Ul);var c=tA();return c&&o.setAttribute("nonce",c),r.insertBefore(o,l),o},nA=function(){function e(n){this.element=e0(n),this.element.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var o=document.styleSheets,a=0,l=o.length;a<l;a++){var c=o[a];if(c.ownerNode===r)return c}throw Ds(17)}(this.element),this.length=0}return e.prototype.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},e.prototype.getRule=function(n){var r=this.sheet.cssRules[n];return r&&r.cssText?r.cssText:""},e}(),iA=function(){function e(n){this.element=e0(n),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(n,r){if(n<=this.length&&n>=0){var o=document.createTextNode(r);return this.element.insertBefore(o,this.nodes[n]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},e.prototype.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},e}(),rA=function(){function e(n){this.rules=[],this.length=0}return e.prototype.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},e.prototype.deleteRule=function(n){this.rules.splice(n,1),this.length--},e.prototype.getRule=function(n){return n<this.length?this.rules[n]:""},e}(),Dp=Sl,oA={isServer:!Sl,useCSSOMInjection:!Fy},Al=function(){function e(n,r,o){n===void 0&&(n=eo),r===void 0&&(r={});var a=this;this.options=Pt(Pt({},oA),n),this.gs=r,this.names=new Map(o),this.server=!!n.isServer,!this.server&&Sl&&Dp&&(Dp=!1,Np(this)),Hd(this,function(){return function(l){for(var c=l.getTag(),f=c.length,h="",p=function(S){var y=function(F){return yl.get(F)}(S);if(y===void 0)return"continue";var w=l.names.get(y),P=c.getGroup(S);if(w===void 0||!w.size||P.length===0)return"continue";var T="".concat(Jr,".g").concat(S,'[id="').concat(y,'"]'),C="";w!==void 0&&w.forEach(function(F){F.length>0&&(C+="".concat(F,","))}),h+="".concat(P).concat(T,'{content:"').concat(C,'"}').concat(Fd)},m=0;m<f;m++)p(m);return h}(a)})}return e.registerId=function(n){return $a(n)},e.prototype.rehydrate=function(){!this.server&&Sl&&Np(this)},e.prototype.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new e(Pt(Pt({},this.options),n),this.gs,r&&this.names||void 0)},e.prototype.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(n=function(r){var o=r.useCSSOMInjection,a=r.target;return r.isServer?new rA(a):o?new nA(a):new iA(a)}(this.options),new Ky(n)));var n},e.prototype.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},e.prototype.registerName=function(n,r){if($a(n),this.names.has(n))this.names.get(n).add(r);else{var o=new Set;o.add(r),this.names.set(n,o)}},e.prototype.insertRules=function(n,r,o){this.registerName(n,r),this.getTag().insertRules($a(n),o)},e.prototype.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},e.prototype.clearRules=function(n){this.getTag().clearGroup($a(n)),this.clearNames(n)},e.prototype.clearTag=function(){this.tag=void 0},e}(),sA=/&/g,aA=/^\s*\/\/.*$/gm;function t0(e,n){return e.map(function(r){return r.type==="rule"&&(r.value="".concat(n," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(n," ")),r.props=r.props.map(function(o){return"".concat(n," ").concat(o)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=t0(r.children,n)),r})}function lA(e){var n,r,o,a=eo,l=a.options,c=l===void 0?eo:l,f=a.plugins,h=f===void 0?Fl:f,p=function(y,w,P){return P.startsWith(r)&&P.endsWith(r)&&P.replaceAll(r,"").length>0?".".concat(n):y},m=h.slice();m.push(function(y){y.type===Dl&&y.value.includes("&")&&(y.props[0]=y.props[0].replace(sA,r).replace(o,p))}),c.prefix&&m.push(My),m.push(Dy);var S=function(y,w,P,T){w===void 0&&(w=""),P===void 0&&(P=""),T===void 0&&(T="&"),n=T,r=w,o=new RegExp("\\".concat(r,"\\b"),"g");var C=y.replace(aA,""),F=Py(P||w?"".concat(P," ").concat(w," { ").concat(C," }"):C);c.namespace&&(F=t0(F,c.namespace));var U=[];return vl(F,ky(m.concat(Oy(function(L){return U.push(L)})))),U};return S.hash=h.length?h.reduce(function(y,w){return w.name||Ds(15),jr(y,w.name)},Vm).toString():"",S}var uA=new Al,Td=lA(),n0=xn.createContext({shouldForwardProp:void 0,styleSheet:uA,stylis:Td});n0.Consumer;xn.createContext(void 0);function Id(){return De.useContext(n0)}var cA=function(){function e(n,r){var o=this;this.inject=function(a,l){l===void 0&&(l=Td);var c=o.name+l.hash;a.hasNameForId(o.id,c)||a.insertRules(o.id,c,l(o.rules,c,"@keyframes"))},this.name=n,this.id="sc-keyframes-".concat(n),this.rules=r,Hd(this,function(){throw Ds(12,String(o.name))})}return e.prototype.getName=function(n){return n===void 0&&(n=Td),this.name+n.hash},e}(),dA=function(e){return e>="A"&&e<="Z"};function kp(e){for(var n="",r=0;r<e.length;r++){var o=e[r];if(r===1&&o==="-"&&e[0]==="-")return e;dA(o)?n+="-"+o.toLowerCase():n+=o}return n.startsWith("ms-")?"-"+n:n}var i0=function(e){return e==null||e===!1||e===""},r0=function(e){var n,r,o=[];for(var a in e){var l=e[a];e.hasOwnProperty(a)&&!i0(l)&&(Array.isArray(l)&&l.isCss||to(l)?o.push("".concat(kp(a),":"),l,";"):vs(l)?o.push.apply(o,ms(ms(["".concat(a," {")],r0(l),!1),["}"],!1)):o.push("".concat(kp(a),": ").concat((n=a,(r=l)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||n in Uy||n.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return o};function Fi(e,n,r,o){if(i0(e))return[];if(Ld(e))return[".".concat(e.styledComponentId)];if(to(e)){if(!to(l=e)||l.prototype&&l.prototype.isReactComponent||!n)return[e];var a=e(n);return Fi(a,n,r,o)}var l;return e instanceof cA?r?(e.inject(r,o),[e.getName(o)]):[e]:vs(e)?r0(e):Array.isArray(e)?Array.prototype.concat.apply(Fl,e.map(function(c){return Fi(c,n,r,o)})):[e.toString()]}function o0(e){for(var n=0;n<e.length;n+=1){var r=e[n];if(to(r)&&!Ld(r))return!1}return!0}var fA=Xm(Ul),hA=function(){function e(n,r,o){this.rules=n,this.staticRulesId="",this.isStatic=(o===void 0||o.isStatic)&&o0(n),this.componentId=r,this.baseHash=jr(fA,r),this.baseStyle=o,Al.registerId(r)}return e.prototype.generateAndInjectStyles=function(n,r,o){var a=this.baseStyle?this.baseStyle.generateAndInjectStyles(n,r,o):"";if(this.isStatic&&!o.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))a=ar(a,this.staticRulesId);else{var l=yd(Fi(this.rules,n,r,o)),c=Sd(jr(this.baseHash,l)>>>0);if(!r.hasNameForId(this.componentId,c)){var f=o(l,".".concat(c),void 0,this.componentId);r.insertRules(this.componentId,c,f)}a=ar(a,c),this.staticRulesId=c}else{for(var h=jr(this.baseHash,o.hash),p="",m=0;m<this.rules.length;m++){var S=this.rules[m];if(typeof S=="string")p+=S;else if(S){var y=yd(Fi(S,n,r,o));h=jr(h,y+m),p+=y}}if(p){var w=Sd(h>>>0);r.hasNameForId(this.componentId,w)||r.insertRules(this.componentId,w,o(p,".".concat(w),void 0,this.componentId)),a=ar(a,w)}}return a},e}(),Bd=xn.createContext(void 0);Bd.Consumer;var Wc={};function gA(e,n,r){var o=Ld(e),a=e,l=!zc(e),c=n.attrs,f=c===void 0?Fl:c,h=n.componentId,p=h===void 0?function(W,ae){var M=typeof W!="string"?"sc":Ep(W);Wc[M]=(Wc[M]||0)+1;var G="".concat(M,"-").concat(Km(Ul+M+Wc[M]));return ae?"".concat(ae,"-").concat(G):G}(n.displayName,n.parentComponentId):h,m=n.displayName,S=m===void 0?function(W){return zc(W)?"styled.".concat(W):"Styled(".concat(xy(W),")")}(e):m,y=n.displayName&&n.componentId?"".concat(Ep(n.displayName),"-").concat(n.componentId):n.componentId||p,w=o&&a.attrs?a.attrs.concat(f).filter(Boolean):f,P=n.shouldForwardProp;if(o&&a.shouldForwardProp){var T=a.shouldForwardProp;if(n.shouldForwardProp){var C=n.shouldForwardProp;P=function(W,ae){return T(W,ae)&&C(W,ae)}}else P=T}var F=new hA(r,y,o?a.componentStyle:void 0);function U(W,ae){return function(M,G,te){var fe=M.attrs,_e=M.componentStyle,Fe=M.defaultProps,Ae=M.foldedComponentIds,ve=M.styledComponentId,re=M.target,Se=xn.useContext(Bd),le=Id(),q=M.shouldForwardProp||le.shouldForwardProp,x=Ym(G,Se,Fe)||eo,Y=function(Te,oe,Ie){for(var ye,X=Pt(Pt({},oe),{className:void 0,theme:Ie}),ee=0;ee<Te.length;ee+=1){var Ne=to(ye=Te[ee])?ye(X):ye;for(var de in Ne)X[de]=de==="className"?ar(X[de],Ne[de]):de==="style"?Pt(Pt({},X[de]),Ne[de]):Ne[de]}return oe.className&&(X.className=ar(X.className,oe.className)),X}(fe,G,x),z=Y.as||re,_={};for(var k in Y)Y[k]===void 0||k[0]==="$"||k==="as"||k==="theme"&&Y.theme===x||(k==="forwardedAs"?_.as=Y.forwardedAs:q&&!q(k,z)||(_[k]=Y[k]));var K=function(Te,oe){var Ie=Id(),ye=Te.generateAndInjectStyles(oe,Ie.styleSheet,Ie.stylis);return ye}(_e,Y),V=ar(Ae,ve);return K&&(V+=" "+K),Y.className&&(V+=" "+Y.className),_[zc(z)&&!jm.has(z)?"class":"className"]=V,_.ref=te,De.createElement(z,_)}(L,W,ae)}U.displayName=S;var L=xn.forwardRef(U);return L.attrs=w,L.componentStyle=F,L.displayName=S,L.shouldForwardProp=P,L.foldedComponentIds=o?ar(a.foldedComponentIds,a.styledComponentId):"",L.styledComponentId=y,L.target=o?a.target:e,Object.defineProperty(L,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(W){this._foldedDefaultProps=o?function(ae){for(var M=[],G=1;G<arguments.length;G++)M[G-1]=arguments[G];for(var te=0,fe=M;te<fe.length;te++)Ad(ae,fe[te],!0);return ae}({},a.defaultProps,W):W}}),Hd(L,function(){return".".concat(L.styledComponentId)}),l&&Jm(L,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),L}function Op(e,n){for(var r=[e[0]],o=0,a=n.length;o<a;o+=1)r.push(n[o],e[o+1]);return r}var Mp=function(e){return Object.assign(e,{isCss:!0})};function s0(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(to(e)||vs(e))return Mp(Fi(Op(Fl,ms([e],n,!0))));var o=e;return n.length===0&&o.length===1&&typeof o[0]=="string"?Fi(o):Mp(Fi(Op(o,n)))}function wd(e,n,r){if(r===void 0&&(r=eo),!n)throw Ds(1,n);var o=function(a){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];return e(n,r,s0.apply(void 0,ms([a],l,!1)))};return o.attrs=function(a){return wd(e,n,Pt(Pt({},r),{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},o.withConfig=function(a){return wd(e,n,Pt(Pt({},r),a))},o}var a0=function(e){return wd(gA,e)},Wn=a0;jm.forEach(function(e){Wn[e]=a0(e)});var pA=function(){function e(n,r){this.rules=n,this.componentId=r,this.isStatic=o0(n),Al.registerId(this.componentId+1)}return e.prototype.createStyles=function(n,r,o,a){var l=a(yd(Fi(this.rules,r,o,a)),""),c=this.componentId+n;o.insertRules(c,c,l)},e.prototype.removeStyles=function(n,r){r.clearRules(this.componentId+n)},e.prototype.renderStyles=function(n,r,o,a){n>2&&Al.registerId(this.componentId+n),this.removeStyles(n,o),this.createStyles(n,r,o,a)},e}();function mA(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=s0.apply(void 0,ms([e],n,!1)),a="sc-global-".concat(Km(JSON.stringify(o))),l=new pA(o,a),c=function(h){var p=Id(),m=xn.useContext(Bd),S=xn.useRef(p.styleSheet.allocateGSInstance(a)).current;return p.styleSheet.server&&f(S,h,p.styleSheet,m,p.stylis),xn.useLayoutEffect(function(){if(!p.styleSheet.server)return f(S,h,p.styleSheet,m,p.stylis),function(){return l.removeStyles(S,p.styleSheet)}},[S,h,p.styleSheet,m,p.stylis]),null};function f(h,p,m,S,y){if(l.isStatic)l.renderStyles(h,Ly,m,y);else{var w=Pt(Pt({},p),{theme:Ym(p,S,c.defaultProps)});l.renderStyles(h,w,m,y)}}return xn.memo(c)}function l0(e,n){var r=De.useRef(null),o=De.useRef(!1),a=De.useRef(e);a.current=e;var l=De.useCallback(function(f){o.current&&(a.current(f),r.current=requestAnimationFrame(l))},[]),c=De.useMemo(function(){return[function(){o.current&&(o.current=!1,r.current&&cancelAnimationFrame(r.current))},function(){o.current||(o.current=!0,r.current=requestAnimationFrame(l))},function(){return o.current}]},[]);return De.useEffect(function(){return c[0]},[]),c}function vA(e,n,r,o,a){var c;(c=e.onExit)==null||c.call(e,o,n);const l=a.find(({id:f})=>f===n);return l!=null&&l.onEnter?l.onEnter(o,r):{...r,enteredAt:o.updateContext.gameState.time}}function SA(e,n){return n.find(({id:r})=>r===e)}function yA(e,n){return e!==n}function AA(e){console.warn(`No handler found for state: ${e}`)}const cs="bushGrowing",sr="bushFull",gl="bushSpreading",Ss="bushDying",gt=24,pt=10,An=3e3,Tn=3e3,Gd=2,TA=5,IA=3,wA=12,EA=940,_A=.7,Ed=20,Up=90,u0=45,c0=240,Ll=10,ys=80,CA=3,Jo=5,en=150,d0=en*.8,RA=en*.2,fr=en*.95,Bi=30,f0=10,PA=10,NA=.5,mt=30,Gi=mt*.75,h0=50,DA=20,kA=ys*.8,OA=.7,MA=16,g0=40,UA=24,xd=16,FA=72/3,Fp=24,LA=1.25,HA=1.5,bd=en*.6,zd=50,BA=1,GA=350,p0=ys*.65,xA=80,bA=50,zA=1,WA=128,m0=10,Lp=100,Wd=35,Li=mt,v0=.5,Hl=2.5,$A=5,S0=.5,y0=1.5,YA=.1,jA=.5,VA=1.5,XA=.25,KA=2.5,QA=45,ZA=.05,As=5,qA=.5,Hp=100,JA=300,Bl=30,ii=1,Bp=en*.6,eT=en*.25,tT=en*.7,nT=en*.8,A0=100,iT=250,rT=120,oT=2,sT=400,aT=1e3,lT=en*.85,uT=100,cT=3,dT=96,fT=24,hT=600,T0=600,gT=1,pT=24,mT=1,vT=.5,Gp=24,_d=12,xp=40,ST=.3,yT=24,bp=500,AT=24,zp=24,TT=1500,$c=500,IT=400,wT=10,ET=-5,_T=1.5,CT=1.5,RT=1.2,PT=10,NT=150,DT=200,kT=100,OT=100,MT=.7,UT=300,FT=100,LT=120,Wp=400,no=10,I0=250,Ts=12,pl=Gi*1.2,w0=10,HT=20,E0=.15,_0=200,vt=30,co=vt*.6,$d="#4CAF50",C0="#FF5722",R0="#9C27B0",BT="#2196F3",P0="#FFC107",GT="#FFD700",N0="#DC143C",Yd="#FFFFFF",jd=[5,5],Gl=5,io=15,xT=20,bT=16,zT=10,WT=16,$T=16,$p=["","","","","","","","","",""],Cd=8,YT="#FFFFFF",ki=18,jt=15,jT="rgba(0, 0, 0, 0.7)",VT=4,Ci=150,qt=15,qn=10,Vr="#555",XT="#f44336",KT="#4CAF50",QT="#2196F3",ZT="#FFC107",Ya=16,qT=9,er=32,ja=28,JT=10,eI=8,tI=8,nI=8,un=28,Va=40,iI="rgba(255, 215, 0, 0.7)",rI="rgba(0, 0, 0, 0.3)",Fn=10,Yp=8,Yc=11,Ri=20,jc=40,jp=5,oI=10,sI="#FFA500",aI="#808080",Xr=120,lI=30,uI=20,Xa="#2d3748",Kr="#ffffff",Vc="#4a5568",cI=5,D0="#bdc9f792",dI="#272c36ff",fI="#a0aec0",Vp=300,hI="rgba(255, 255, 255, 0.5)",gI="rgba(0, 0, 0, 0.8)",pI="#FFFFFF",Xp=14,Kp=8,Qp=-15,mI="#FFD700",vI=5,Vd=60,Xd=-50,Kd=10,ni=12,ro=10,Qd="rgba(0, 0, 0, 0.5)",Zd="#4CAF50",qd="#F44336",Jd="#FFC107",ef="rgba(255, 255, 255, 0.2)",oo="#FFFFFF",tf="#FF6B6B",nf=5,xl=30,Lt=50,dn=8,so=10,SI="rgba(0, 0, 0, 0.5)",yI="#FFFFFF",AI=33,TI=400,II=20,wI=10,EI="rgba(0, 0, 0, 0.7)",_I="#FFFFFF",Xc=20,Zp=16,CI=.5,qp=5,k0="#FFD700",RI=40,rf=4,O0=3,PI=5,M0=20,U0=5,NI="#FFFFFF",DI="#FF6B6B",be=1,lr=3,kI=70,Jp=600,OI=1.5,F0=.1,MI=15,UI=5e3,tr=80,Ka=10,FI=12,LI=24,HI=en*.9,BI=24,Qa=300,nr=15,GI=8,xI="rgba(0, 0, 0, 0.8)",bI="#FFFFFF",Kc=14,em=10,Ln=20,zI="#FF6B6B",WI="#4CAF50",tm="#FFD700",$I="rgba(255, 255, 0, 0.3)",YI=2,jI=500,VI=120,XI=45,KI="#FFD700",QI=3,ZI=4,L0=12,qI=2,JI=120,nm=50,ew=15,H0=30,tw=2,Bt=50,nw=150,iw=12,im=3,ds=2,Qc=8,rw=.5,ow=1,sw=80,aw=.7,B0=20,lw=2,uw=140,rm=80,cw=12,G0=40,dw=3,Hi=60,Gn=40,Wr=50,om=120,fw=45,hw=60,gw=2,pw=90,mw=.7,vw=1.5,Sw=12,sm=6,fs=3,Zc=15,x0=50,b0=20,bl=80,fo=40,z0=2,Tl=30;function ke(e,n,r,o,a){const l={id:e.nextVisualEffectId,type:n,position:r,startTime:e.time,duration:o,entityId:a};return e.visualEffects.push(l),e.nextVisualEffectId++,l.id}var ce=(e=>(e[e.Hunger=0]="Hunger",e[e.Procreation=1]="Procreation",e[e.Pregnant=2]="Pregnant",e[e.TargetAcquired=3]="TargetAcquired",e[e.Attack=4]="Attack",e[e.Partnered=5]="Partnered",e[e.BushClaimed=6]="BushClaimed",e[e.BushClaimLost=7]="BushClaimLost",e[e.Eating=8]="Eating",e[e.ChildFed=9]="ChildFed",e[e.AttackDeflected=10]="AttackDeflected",e[e.AttackResisted=11]="AttackResisted",e[e.Hit=12]="Hit",e[e.SeizeBuildup=13]="SeizeBuildup",e[e.Seize=14]="Seize",e[e.CallToAttack=15]="CallToAttack",e[e.CallToFollow=16]="CallToFollow",e[e.AutopilotMoveTarget=17]="AutopilotMoveTarget",e))(ce||{}),ri=(e=>(e.Berry="berry",e.Meat="meat",e))(ri||{});const W0={berry:"",meat:""},yw={id:cs,update:(e,n)=>{const{entity:r,updateContext:o}=n,a=o.deltaTime*(gt/pt);return r.age+=a,r.age>=r.lifespan?{nextState:Ss,data:{...e,enteredAt:o.gameState.time}}:(r.ownerId&&r.claimedUntil&&o.gameState.time>r.claimedUntil&&(ke(o.gameState,ce.BushClaimLost,r.position,be),r.ownerId=void 0,r.claimedUntil=void 0),r.timeSinceLastBerryRegen+=a,r.timeSinceLastBerryRegen>=wA&&r.food.length<r.maxFood&&(r.food.push({type:ri.Berry}),r.timeSinceLastBerryRegen=0),r.food.length>=r.maxFood?{nextState:sr,data:{...e,enteredAt:o.gameState.time,previousState:cs}}:{nextState:cs,data:e})},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},Aw={id:sr,update:(e,n)=>{const{entity:r,updateContext:o}=n,a=o.deltaTime*(gt/pt);return r.age+=a,r.age>=r.lifespan?{nextState:Ss,data:{...e,enteredAt:o.gameState.time,previousState:sr}}:r.food.length<r.maxFood?{nextState:cs,data:{...e,enteredAt:o.gameState.time,previousState:sr}}:(r.ownerId&&r.claimedUntil&&o.gameState.time>r.claimedUntil&&(ke(o.gameState,ce.BushClaimLost,r.position,be),r.ownerId=void 0,r.claimedUntil=void 0),r.timeSinceLastSpreadAttempt+=a,r.timeSinceLastSpreadAttempt>=Up&&(r.timeSinceLastSpreadAttempt=0,o.gameState.time-r.timeSinceLastHarvest>=Up&&Math.random()<r.spreadChance)?{nextState:gl,data:{...e,enteredAt:o.gameState.time,previousState:sr}}:{nextState:sr,data:e})},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})};function bn(e,n){return{x:e.x+n.x,y:e.y+n.y}}function $0(e,n){return{x:e.x-n.x,y:e.y-n.y}}function Nt(e,n){return{x:e.x*n,y:e.y*n}}function ao(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function qe(e){const n=ao(e);return n===0?{x:0,y:0}:Nt(e,1/n)}function Tw(e,n){return ao($0(e,n))}function of(e,n,r){return{x:e.x+(n.x-e.x)*r,y:e.y+(n.y-e.y)*r}}function sf(e){if(e.length===0)return{x:0,y:0};const n=e.reduce((r,o)=>({x:r.x+o.x,y:r.y+o.y}),{x:0,y:0});return{x:n.x/e.length,y:n.y/e.length}}function We(e,n,r,o){let a=n.x-e.x,l=n.y-e.y;return Math.abs(a)>r/2&&(a=a-Math.sign(a)*r),Math.abs(l)>o/2&&(l=l-Math.sign(l)*o),{x:a,y:l}}function Vt(e,n,r){const o=We(e,n,r.width,r.height);return qe(o)}function j(e,n,r,o){const a=We(e,n,r,o);return ao(a)}function Iw(e,n){return e.x*n.x+e.y*n.y}function ww(e,n){const r=Iw(e,n),o=ao(e),a=ao(n);if(o===0||a===0)return 0;const l=Math.max(-1,Math.min(1,r/(o*a)));return Math.acos(l)}function af(e,n,r){const o=Math.max(0,Math.min(1,r)),a={r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)},l={r:parseInt(n.substring(1,3),16),g:parseInt(n.substring(3,5),16),b:parseInt(n.substring(5,7),16)},c=Math.round(a.r+(l.r-a.r)*o),f=Math.round(a.g+(l.g-a.g)*o),h=Math.round(a.b+(l.b-a.b)*o),p=m=>("00"+m.toString(16)).slice(-2);return`#${p(c)}${p(f)}${p(h)}`}var Ht=(e=>(e.Friendly="Friendly",e.Hostile="Hostile",e))(Ht||{});function am(e,n,r){return n.search.human.byRadius(e.position,r).filter(l=>{if(l.id===e.id||l.gender===e.gender||!l.isAdult||l.hunger>=fr||(l.procreationCooldown||0)>0||l.gender==="female"&&l.isPregnant)return!1;const c=l.id===e.motherId||l.id===e.fatherId,f=e.id===l.motherId||e.id===l.fatherId;return!c&&!f})}function oi(e){if(e.length===0)return;const n=e.filter(a=>a.gender==="male"),r=e.filter(a=>a.gender==="female"),o=(a,l)=>a.age!==l.age?l.age-a.age:a.id-l.id;if(n.sort(o),n.length>0)return n[0];if(r.sort(o),r.length>0)return r[0]}function Tt(e,n){const r=e,o=r.search.human.byProperty("motherId",n.id),a=r.search.human.byProperty("fatherId",n.id);return[...o,...a]}function Y0(e,n,r){var a;if(e.id===n.id||e.motherId===n.id||e.fatherId===n.id||n.motherId===e.id||n.fatherId===e.id||e.motherId&&e.motherId===n.motherId||e.fatherId&&e.fatherId===n.fatherId||(a=e.partnerIds)!=null&&a.includes(n.id))return!0;if(e.motherId){const l=r.entities.entities.get(e.motherId);if(l&&(l.motherId===n.id||l.fatherId===n.id))return!0}if(e.fatherId){const l=r.entities.entities.get(e.fatherId);if(l&&(l.motherId===n.id||l.fatherId===n.id))return!0}if(n.motherId){const l=r.entities.entities.get(n.motherId);if(l&&(l.motherId===e.id||l.fatherId===e.id))return!0}if(n.fatherId){const l=r.entities.entities.get(n.fatherId);if(l&&(l.motherId===e.id||l.fatherId===e.id))return!0}return!1}function Rd(e,n){var l,c,f,h;if(e.id===n.id||e.motherId===n.id||e.fatherId===n.id||n.motherId===e.id||n.fatherId===e.id||(l=e.partnerIds)!=null&&l.includes(n.id)||(c=n.partnerIds)!=null&&c.includes(e.id))return!0;if(e.fatherId===void 0&&e.motherId===void 0||n.fatherId===void 0&&n.motherId===void 0)return!1;const r=e.motherId===n.motherId||e.fatherId===n.fatherId,o=n.motherId===e.motherId||n.fatherId===e.fatherId,a=((f=e.ancestorIds)==null?void 0:f.some(p=>n.ancestorIds.includes(p)))||((h=n.ancestorIds)==null?void 0:h.some(p=>e.ancestorIds.includes(p)));return r||o||a}function Ew(e,n){const r=[];if(e.motherId){const o=n.entities.entities.get(e.motherId);o&&r.push(o)}if(e.fatherId){const o=n.entities.entities.get(e.fatherId);o&&r.push(o)}return r}function _w(e,n){if(e.gender!=="female"||!e.partnerIds||e.partnerIds.length===0)return null;for(const r of e.partnerIds){const o=n.entities.entities.get(r);if(o&&o.gender==="male")return o}return null}function Cw(e,n){var r;if(!e.isAdult&&e.fatherId){const o=n.entities.entities.get(e.fatherId);if(o&&o.type==="human")return o}if(e.isAdult&&e.fatherId){const o=n.entities.entities.get(e.fatherId);if(o&&o.type==="human"&&((r=oi(Tt(n,o)))==null?void 0:r.id)===e.id)return o}return e.isAdult&&e.gender==="female"&&e.partnerIds&&e.partnerIds.length>0?_w(e,n):null}function Il(e,n){var o;const r=new Set;if(e.motherId){const a=n.entities.entities.get(e.motherId);a&&r.add(a)}if(e.fatherId){const a=n.entities.entities.get(e.fatherId);a&&r.add(a)}return(o=e.partnerIds)==null||o.forEach(a=>{const l=n.entities.entities.get(a);l&&r.add(l)}),Tt(n,e).forEach(a=>r.add(a)),Array.from(r)}function j0(e,n){const r=new Map;function o(a){const l=Tt(n,a);for(const c of l)r.has(c.id)||(r.set(c.id,c),o(c))}return o(e),Array.from(r.values())}function Is(e,n){return n.search.human.byProperty("leaderId",e)}function V0(e,n){var c,f;const r=new Map,o=Array.from(e.entities.entities.values()).filter(h=>h.type==="human");for(const h of o)h.leaderId&&(r.has(h.leaderId)||r.set(h.leaderId,{leaderId:h.leaderId,tribeBadge:h.tribeBadge||"?",members:[]}),(c=r.get(h.leaderId))==null||c.members.push(h));const a=n?(f=e.entities.entities.get(n))==null?void 0:f.diplomacy:void 0,l=Array.from(r.values()).map(h=>{const p=e.entities.entities.get(h.leaderId),m=h.members.filter(y=>y.isAdult).length,S=h.members.length-m;return{leaderId:h.leaderId,tribeBadge:h.tribeBadge,adultCount:m,childCount:S,isPlayerTribe:h.leaderId===n,leaderAge:(p==null?void 0:p.age)??0,leaderGender:(p==null?void 0:p.gender)??"male",diplomacyStatus:(a==null?void 0:a.get(h.leaderId??-1))??Ht.Friendly}});return l.sort((h,p)=>h.isPlayerTribe?-1:p.isPlayerTribe?1:p.adultCount+p.childCount-(h.adultCount+h.childCount)),l}function Me(e,n,r,o,a){const l=n,c=o,f=l.search[r].byRadius(e.position,c);let h=null,p=c;for(const m of f){if(m.id===e.id||a&&!a(m))continue;const S=j(e.position,m.position,n.mapDimensions.width,n.mapDimensions.height);S<p&&(p=S,h=m)}return h}function X0(e,n,r,o){return n.search[r].byRadius(e,o).length}function It(e){const r=e.search.human.byProperty("isPlayer",!0);return r.length>0?r[0]:void 0}function Rw(e,n){var c;const o=n.search.human.byProperty("activeAction","attacking");let a=null,l=1/0;for(const f of o){if(f.attackTargetId!==e)continue;const h=j(f.position,((c=n.entities.entities.get(e))==null?void 0:c.position)||{x:0,y:0},n.mapDimensions.width,n.mapDimensions.height);h<l&&(a=f,l=h)}return a}function Pw(e){return Array.from(e.entities.entities.values()).filter(n=>n.type==="human")}function Nw(e,n,r){const o=Array.from(n.entities.entities.values()).reverse();for(const a of o)if(Tw(e,a.position)<a.radius)return a}function lf(e,n,r,o){const a=Math.random()*Math.PI*2,l=Math.sqrt(Math.random())*n,c={x:Math.cos(a)*l,y:Math.sin(a)*l},f=bn(e,c);return{x:(f.x%r+r)%r,y:(f.y%o+o)%o}}function lo(e,n,r,o){const a=n,l={left:e.x-r,top:e.y-r,right:e.x+r,bottom:e.y+r},c=[...a.search.human.byRect(l),...a.search.berryBush.byRect(l),...a.search.corpse.byRect(l)];for(const f of c){if(o!==void 0&&f.id===o)continue;if(j(e,f.position,n.mapDimensions.width,n.mapDimensions.height)<r+f.radius)return!0}return!1}function uf(e,n,r,o,a){const l=n.mapDimensions.width,c=n.mapDimensions.height;if(!lo(e,n,o,a))return e;const f=o;for(let h=f;h<=r;h+=f){const p=Math.ceil(2*Math.PI*h/f);for(let m=0;m<p;m++){const S=m/p*2*Math.PI,y={x:Math.cos(S)*h,y:Math.sin(S)*h},w=bn(e,y),P={x:(w.x%l+l)%l,y:(w.y%c+c)%c};if(!lo(P,n,o,a))return P}}return null}function ws(e,n){const r=Is(e,n);if(r.length===0){const a=n.entities.entities.get(e);return a?a.position:{x:0,y:0}}const o=r.map(a=>a.position);return sf(o)}function lm(e,n){const o=[...Il(e,n),e].map(a=>a.position);return sf(o)}function um(e,n,r,o){const a=n.x-r.width/2,l=n.y-r.height/2,c=a+e.x,f=l+e.y,h=(c%o.width+o.width)%o.width,p=(f%o.height+o.height)%o.height;return{x:h,y:p}}function Dw(e,n,r){return n.search.human.byRadius(e.position,r).filter(a=>{var l;return a.activeAction==="procreating"&&a.gender===e.gender&&typeof a.target=="number"&&((l=e.partnerIds)==null?void 0:l.includes(a.target))})[0]}function kw(e,n,r){if(!e.leaderId)return;const o=n,a=o.search.berryBush.byRadius(e.position,r).filter(l=>l.ownerId===e.id);for(const l of a)if(l.claimedUntil&&n.time<l.claimedUntil){const c=o.search.human.byRadius(l.position,mt);for(const f of c)if(!Rd(f,e)&&f.activeAction==="gathering"&&f.target===l.id)return f}}function Ow(e,n,r){const o=Il(e,n),a=n;for(const l of o){if(j(e.position,l.position,n.mapDimensions.width,n.mapDimensions.height)>r)continue;const f=a.search.human.byProperty("attackTargetId",l.id);for(const h of f)if(h.leaderId!==e.leaderId)return{familyMember:l,aggressor:h}}}function Mw(e,n){const o=n.search.human.byRadius(e.position,UT);let a,l=1/0;for(const c of o){if(c.id===e.id||c.hitpoints<=0||c.hitpoints/c.maxHitpoints>MT||Y0(e,c,n))continue;const f=j(e.position,c.position,n.mapDimensions.width,n.mapDimensions.height);f<l&&(l=f,a=c)}return a}function Uw(e,n){const r=Me(e,n,"berryBush",Hp,a=>a.ownerId===e.id);return r?uf(r.position,n,Hp,Bl,r.id):null}function cf(e,n,r){return n.search.human.byRadius(e.position,r).filter(a=>ho(e,a,n))}function Fw(e,n,r){const o=r.search.human.byProperty("leaderId",e);let a=0;for(const l of o)l.attackTargetId===n&&a++;return a}function cm(e,n,r,o){const a=r.search.berryBush.byRadius(e,n),l=r.search.human.byRadius(e,n).filter(h=>h.leaderId!==o);let c=a.length*wT;c+=l.length*ET;let f;if(l.length>0){const h={};for(const m of l)m.leaderId&&(h[m.leaderId]=(h[m.leaderId]||0)+1);let p=0;for(const m in h)h[m]>p&&(p=h[m],f=parseInt(m,10))}return{score:c,occupyingTribeId:f}}function wl(e){return e.filter(n=>n.isAdult).reduce((n,r)=>{let o=r.hitpoints;return o+=(r.maxAge-r.age)*.5,o+=r.food.length*2,n+o},0)}function Lw(e,n){if(e.id!==e.leaderId)return null;const r=n,o=ws(e.id,n),{score:a}=cm(o,$c/2,r,e.id);let l=null,c=a;const f=IT,h=TT;for(let p=e.position.x-h;p<e.position.x+h;p+=f)for(let m=e.position.y-h;m<e.position.y+h;m+=f){const S={x:(p%n.mapDimensions.width+n.mapDimensions.width)%n.mapDimensions.width,y:(m%n.mapDimensions.height+n.mapDimensions.height)%n.mapDimensions.height};if(j(o,S,n.mapDimensions.width,n.mapDimensions.height)<$c*2)continue;const{score:w}=cm(S,$c/2,r,e.id);w>c*_T&&(c=w,l=S)}return l}let qc=0;function Pd(){const e=$p[qc];return qc=(qc+1)%$p.length,e}var Ee=(e=>(e.Gather="Gather",e.Eat="Eat",e.Procreate="Procreate",e.Attack="Attack",e.Plant="Plant",e.CallToAttack="CallToAttack",e.TribeSplit="TribeSplit",e.FollowMe="FollowMe",e.FeedChild="FeedChild",e.HuntPrey="HuntPrey",e.DefendAgainstPredator="DefendAgainstPredator",e.AutopilotMove="AutopilotMove",e.AutopilotGather="AutopilotGather",e.AutopilotAttack="AutopilotAttack",e.AutopilotProcreate="AutopilotProcreate",e.AutopilotPlant="AutopilotPlant",e.AutopilotFeedChild="AutopilotFeedChild",e.AutopilotFollowMe="AutopilotFollowMe",e))(Ee||{});const zl={Gather:"",Eat:"",Procreate:"",Attack:"",Plant:"",CallToAttack:"",TribeSplit:"",FollowMe:"",FeedChild:"",HuntPrey:"",DefendAgainstPredator:"",AutopilotMove:"",AutopilotGather:"",AutopilotAttack:"",AutopilotProcreate:"",AutopilotPlant:"",AutopilotFeedChild:"",AutopilotFollowMe:""},K0={Gather:"Gather",Eat:"Eat",Procreate:"Procreate",Attack:"Attack",Plant:"Plant",CallToAttack:"Call to Attack",TribeSplit:"Split Tribe",FollowMe:"Follow Me",FeedChild:"Feed Child",HuntPrey:"Hunt Prey",DefendAgainstPredator:"Defend",AutopilotMove:"Walk",AutopilotGather:"Gather",AutopilotAttack:"Attack",AutopilotProcreate:"Procreate",AutopilotPlant:"Plant",AutopilotFeedChild:"Feed",AutopilotFollowMe:"Follow"};var $r=(e=>(e.Time="Time",e.Hunger="Hunger",e.Hitpoints="Hitpoints",e.Food="Food",e.Autopilot="Autopilot",e.Muted="Muted",e.Family="Family",e.Tribes="Tribes",e))($r||{});const es={Time:"",Hunger:"",Hitpoints:"",Food:"",Autopilot:"",Muted:"",Family:"",Tribes:""};var Le=(e=>(e.ToggleMute="ToggleMute",e.TogglePause="TogglePause",e.FastForward="FastForward",e.DismissTutorial="DismissTutorial",e.CommandEat="CommandEat",e.CommandPlant="CommandPlant",e.CommandCallToAttack="CommandCallToAttack",e.CommandFollowMe="CommandFollowMe",e.CommandGather="CommandGather",e.CommandTribeSplit="CommandTribeSplit",e.ToggleProcreationBehavior="ToggleProcreationBehavior",e.ToggleAttackBehavior="ToggleAttackBehavior",e.ToggleFeedChildBehavior="ToggleFeedChildBehavior",e.TogglePlantingBehavior="TogglePlantingBehavior",e.ToggleGatheringBehavior="ToggleGatheringBehavior",e.ToggleAutopilotFollowLeaderBehavior="ToggleAutopilotFollowLeaderBehavior",e.ToggleDiplomacy="ToggleDiplomacy",e))(Le||{}),Es=(e=>(e.Hello="HELLO",e.NewTribeFormed="NEW_TRIBE_FORMED",e.NoHeir="NO_HEIR",e.ChildrenStarving="CHILDREN_STARVING",e))(Es||{});let Hw=0;function Bw(){return`notification-${Date.now()}-${Hw++}`}function Nd(e,n){if(n.identifier){const o=e.notifications.find(a=>a.identifier===n.identifier);if(o){if(o.dismissedUntil&&e.time<o.dismissedUntil)return;o.message=n.message,o.timestamp=e.time,o.creationTime=Date.now(),o.duration=n.duration,o.targetEntityIds=n.targetEntityIds,o.highlightedEntityIds=n.highlightedEntityIds,o.targetPosition=n.targetPosition,o.targetArea=n.targetArea,o.targetRadius=n.targetRadius,o.isDismissed=!1,o.dismissedUntil=void 0;return}}const r={...n,id:Bw(),timestamp:e.time,creationTime:Date.now(),isDismissed:!1};e.notifications.push(r)}function Gw(e,n){const r=e.notifications.find(o=>o.id===n);r&&(r.isDismissed=!0,r.identifier&&(r.dismissedUntil=e.time+BI))}function xw(e){const n=e.time;e.notifications=e.notifications.filter(r=>r.duration===0?!0:!(n-r.timestamp>r.duration))}const Jc=""+new URL("attack-D4MA8VWK.mp3",import.meta.url).href,bw=""+new URL("gather-CU75596W.mp3",import.meta.url).href,zw=""+new URL("eat-DCjHq2QD.mp3",import.meta.url).href,ed=""+new URL("procreate-CfE4r5Cp.mp3",import.meta.url).href,Ww=""+new URL("birth-Cbd67GHT.mp3",import.meta.url).href,$w=""+new URL("child-fed-DzEPuMid.mp3",import.meta.url).href,Yw=""+new URL("human-death-B6HFLXES.mp3",import.meta.url).href,jw=""+new URL("game-over-C5dqkyER.mp3",import.meta.url).href,Vw=""+new URL("button-click-DomLUeaU.mp3",import.meta.url).href,Xw=""+new URL("soundtrack-1-BdlYUGye.mp3",import.meta.url).href;var Re=(e=>(e[e.Attack=0]="Attack",e[e.Gather=1]="Gather",e[e.Eat=2]="Eat",e[e.Procreate=3]="Procreate",e[e.Birth=4]="Birth",e[e.ChildFed=5]="ChildFed",e[e.HumanDeath=6]="HumanDeath",e[e.Seize=7]="Seize",e[e.CallToAttack=8]="CallToAttack",e[e.TribeSplit=9]="TribeSplit",e[e.CallToFollow=10]="CallToFollow",e[e.GameOver=11]="GameOver",e[e.ButtonClick=12]="ButtonClick",e[e.SoundTrack1=13]="SoundTrack1",e))(Re||{});const Kw=new Map([[0,Jc],[1,bw],[2,zw],[3,ed],[4,Ww],[5,$w],[6,Yw],[11,jw],[12,Vw],[7,Jc],[8,Jc],[9,ed],[10,ed],[13,Xw]]);let ts,_s;function Qw(){if(!(typeof window>"u"))return _s}function df(){if(!(typeof window>"u"))return!ts&&typeof window.AudioContext=="function"&&(ts=new window.AudioContext,_s=ts.createGain(),_s.connect(ts.destination),hs(.1,!1)),ts}function hs(e,n){_s&&(_s.gain.value=n?0:e/10)}const Q0=new Map;let Za=!1,dm=!1;async function Zw(){if(dm||Za)return;const e=df();if(!e){console.error("AudioContext not supported. Cannot load sounds.");return}e.state==="suspended"&&e.resume(),Za=!0,console.log("Starting sound loading...");const n=[];Kw.forEach((r,o)=>{const a=fetch(r).then(l=>{if(!l.ok)throw new Error(`Failed to fetch sound: ${r}`);return l.arrayBuffer()}).then(l=>e.decodeAudioData(l)).then(l=>{Q0.set(o,l)}).catch(l=>{console.error(`Error loading sound ${Re[o]} from ${r}:`,l)});n.push(a)});try{await Promise.all(n),dm=!0,Za=!1,console.log("All sounds loaded successfully.")}catch(r){Za=!1,console.error("An error occurred while loading sounds:",r)}}const gs=new Map;function ff(e,n){const r=df(),o=Qw();if(!r||!o||o.gain.value===0&&(n==null?void 0:n.trackId)===void 0)return;r.state==="suspended"&&r.resume();const a=Q0.get(e);if(!a){console.warn(`Sound buffer not found for type: ${Re[e]}`);return}if(n!=null&&n.trackId&&gs.has(n.trackId))return;const l=r.createBufferSource();l.buffer=a,l.loop=(n==null?void 0:n.loop)??!1;const c=r.createGain(),f=r.createStereoPanner();let h=c;if(n!=null&&n.position&&(n!=null&&n.listenerPosition)&&(n!=null&&n.worldDimensions)){const p=We(n.listenerPosition,n.position,n.worldDimensions.width,n.worldDimensions.height),m=j(n.listenerPosition,n.position,n.worldDimensions.width,n.worldDimensions.height);if(m>Jp)return;const S=1-Math.pow(m/Jp,OI);c.gain.value=Math.max(0,S);const y=Math.sin(p.x/m*(Math.PI/2));f.pan.value=isNaN(y)?0:y,c.connect(f),h=f}else{const p=e===Re.GameOver?.4:e===Re.SoundTrack1?1:.2;c.gain.value=p}l.connect(h),h.connect(o),l.start(0),n!=null&&n.trackId&&(gs.set(n.trackId,{sourceNode:l,gainNode:c}),l.onended=()=>{gs.delete(n.trackId)})}function fm(e,n=1){const r=gs.get(e),o=df();if(r&&o){const{sourceNode:a,gainNode:l}=r,c=o.currentTime;l.gain.setValueAtTime(l.gain.value,c),l.gain.linearRampToValueAtTime(0,c+n),a.stop(c+n),a.onended=null,gs.delete(e)}}function Ue(e,n,r){const o=It(e.gameState);o&&ff(n,{position:r,listenerPosition:o.position,worldDimensions:e.gameState.mapDimensions,masterVolume:e.gameState.masterVolume,isMuted:e.gameState.isMuted})}function qw(e,n,r){const o=r.mapDimensions.width,a=r.mapDimensions.height,l=n.radius*2;for(let c=bp;c<o/2;c+=50)for(let f=0;f<10;f++){const h=lf(e,c,o,a);if(!(j(e,h,o,a)<bp)&&!lo(h,r,l,n.id))return h}return null}function hf(e,n){if(!e.isAdult||e.gender!=="male"||e.leaderId===e.id||!e.leaderId)return{canSplit:!1};if(!e.leaderId)return{canSplit:!1};const r=n.entities.entities.get(e.leaderId);if(!r||r.type!=="human")return{canSplit:!1};const o=oi(Tt(n,r));if(o&&o.id===e.id)return{canSplit:!1};const a=Is(e.leaderId,n);if(a.length<xp)return{canSplit:!1};const c=j0(e,n).length+1,f=Math.min(a.length*ST,xp);return{canSplit:c>=f,progress:c/f}}function gf(e,n){var c;if(!hf(e,n).canSplit)return;const r=e.leaderId?n.entities.entities.get(e.leaderId):void 0,o=Pd(),a=j0(e,n);e.leaderId=e.id,e.tribeBadge=o,e.diplomacy=new Map,r&&((c=r.diplomacy)==null||c.set(e.id,Ht.Hostile));for(const f of a)f.leaderId=e.id,f.tribeBadge=o;Nd(n,{type:Es.NewTribeFormed,message:`A new tribe has formed! ${o}`,duration:LI,targetEntityIds:[e.id],highlightedEntityIds:[e.id,...a.map(f=>f.id)]}),Ue({gameState:n},Re.TribeSplit,e.position)}function pf(e,n){const r=[];if(n.food.length>0&&n.hunger>Bi&&r.push({type:Ee.Eat,action:"eating",key:"f"}),n.food.length<n.maxFood){const f=Me(n,e,"berryBush",mt,m=>m.food.length>0),h=Me(n,e,"corpse",mt,m=>m.food.length>0);let p=null;f&&h?p=j(n.position,f.position,e.mapDimensions.width,e.mapDimensions.height)<=j(n.position,h.position,e.mapDimensions.width,e.mapDimensions.height)?f:h:p=f||h,p&&r.push({type:Ee.Gather,action:"gathering",key:"e",targetEntity:p})}const o=Me(n,e,"human",mt,f=>hr(n,f,e));if(o&&r.push({type:Ee.Procreate,action:"procreating",key:"r",targetEntity:o}),n.food.length>0&&n.isAdult){const f=Me(n,e,"human",mt,h=>{const p=h;return!p.isAdult&&(p.motherId===n.id||p.fatherId===n.id)&&p.hunger>=Bi});f&&r.push({type:Ee.FeedChild,action:"feeding",key:"h",targetEntity:f})}const a=Me(n,e,"human",Li,f=>ho(n,f,e));a&&r.push({type:Ee.Attack,action:"attacking",key:"q",targetEntity:a});const l=Me(n,e,"prey",Li,()=>!0);l&&r.push({type:Ee.HuntPrey,action:"attacking",key:"q",targetEntity:l});const c=Me(n,e,"predator",Li,()=>!0);return c&&r.push({type:Ee.DefendAgainstPredator,action:"attacking",key:"q",targetEntity:c}),n.food.filter(f=>f.type===ri.Berry).length>=As&&r.push({type:Ee.Plant,action:"planting",key:"b"}),n.leaderId===n.id&&!n.isCallingToAttack&&cf(n,e,I0).length>0&&r.push({type:Ee.CallToAttack,action:"idle",key:"v"}),hf(n,e).canSplit&&r.push({type:Ee.TribeSplit,action:"idle",key:"k"}),n.leaderId===n.id&&!n.isCallingToFollow&&r.push({type:Ee.FollowMe,action:"idle",key:"c"}),r}const ho=(e,n,r)=>{var o,a,l,c;if(e.id===n.id)return!1;if(e.leaderId&&!n.leaderId)return!0;if(e.leaderId===n.leaderId)return!1;if(e.leaderId&&n.leaderId){const f=(a=(o=r.entities.entities.get(e.leaderId))==null?void 0:o.diplomacy)==null?void 0:a.get(n.leaderId),h=(c=(l=r.entities.entities.get(n.leaderId))==null?void 0:l.diplomacy)==null?void 0:c.get(e.leaderId);return f===Ht.Hostile||h===Ht.Hostile}return!1},hr=(e,n,r)=>{if(e.id===n.id||e.gender===n.gender||!e.isAdult||!n.isAdult||e.hunger>=fr||n.hunger>=fr||(e.procreationCooldown||0)>0||(n.procreationCooldown||0)>0||ho(e,n,r))return!1;const o=e.gender==="female"?e:n;return!(o.isPregnant||o.age>g0)},Jw={id:gl,update:(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:a}=o,l=o.deltaTime*(gt/pt);if(r.age+=l,r.age>=r.lifespan)return{nextState:Ss,data:{...e,enteredAt:a.time,previousState:gl}};const c=lf(r.position,r.spreadRadius,a.mapDimensions.width,a.mapDimensions.height);return lo(c,a,15)||$l(a.entities,c,a.time),{nextState:sr,data:{...e,enteredAt:a.time,previousState:gl}}},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},eE={id:Ss,update:e=>({nextState:Ss,data:e}),onEnter:(e,n)=>(Ms(e.updateContext.gameState.entities,e.entity.id),{...n,enteredAt:e.updateContext.gameState.time})},tE=[yw,Aw,Jw,eE],At="humanIdle",or="humanMoving",ss="humanEating",Wl="humanGathering",Cs="humanProcreating",zn="humanAttacking",ml="humanPlanting",nE={id:At,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="attacking"&&r.attackTargetId?{nextState:zn,data:{...e,enteredAt:o.gameState.time,previousState:At,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:(r.hunger>=d0?(r.debuffs=r.debuffs.filter(a=>a.type!=="slow"),r.debuffs.push({type:"slow",startTime:o.gameState.time,duration:.1})):r.debuffs=r.debuffs.filter(a=>a.type!=="slow"),r.activeAction==="moving"?{nextState:or,data:{...e,enteredAt:o.gameState.time,previousState:At,target:r.target}}:r.activeAction==="gathering"?{nextState:Wl,data:{...e,enteredAt:o.gameState.time,previousState:At,target:r.target}}:r.activeAction==="eating"?{nextState:ss,data:{...e,enteredAt:o.gameState.time,previousState:At}}:r.activeAction==="planting"&&r.target?{nextState:ml,data:{...e,enteredAt:o.gameState.time,previousState:At,plantingSpot:r.target}}:{nextState:At,data:e})},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function Z0(e){let n=PA;return e.hunger>=d0&&(n*=NA),e.age>=kA&&(n*=OA),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}const td=7.5;class iE{constructor(){Ce(this,"id",or)}update(n,r){var h;const{entity:o,updateContext:a}=r;if(o.activeAction==="attacking"&&o.attackTargetId)return{nextState:zn,data:{...n,enteredAt:a.gameState.time,previousState:or,attackTargetId:o.attackTargetId,attackStartTime:a.gameState.time}};if(o.activeAction!=="moving")return{nextState:At,data:{...n,enteredAt:a.gameState.time,previousState:or}};let l;if(typeof o.target=="object"?l=o.target:typeof o.target=="number"&&(l=(h=r.updateContext.gameState.entities.entities.get(o.target))==null?void 0:h.position),!l&&(o.direction.x!==0||o.direction.y!==0)&&(l={x:o.position.x+o.direction.x*td*2,y:o.position.y+o.direction.y*td*2}),!l)return{nextState:At,data:{...n,enteredAt:a.gameState.time,previousState:or}};const c=We(o.position,l,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=qe(c),o.acceleration=Z0(o),j(o.position,l,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)<td?{nextState:At,data:{...n,enteredAt:a.gameState.time,previousState:or}}:{nextState:or,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}}const rE=new iE,oE={id:ss,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction!=="eating"?{nextState:At,data:{...e,enteredAt:o.gameState.time,previousState:ss}}:(r.food.length>0&&(!r.eatingCooldownTime||o.gameState.time>=r.eatingCooldownTime)&&r.hunger>Bi&&(r.hunger=Math.max(0,r.hunger-Bi),r.food.pop(),r.eatingCooldownTime=o.gameState.time+1,Ue(o,Re.Eat,r.position),(!r.lastEatingEffectTime||o.gameState.time-r.lastEatingEffectTime>2)&&(ke(o.gameState,ce.Eating,r.position,be,r.id),r.lastEatingEffectTime=o.gameState.time)),r.hunger<=0||r.food.length<=0?{nextState:At,data:{...e,enteredAt:o.gameState.time,previousState:ss}}:{nextState:ss,data:e})},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};class sE{constructor(){Ce(this,"id",Wl)}update(n,r){return r.entity.activeAction!=="gathering"?{nextState:"humanIdle",data:{...n,enteredAt:r.updateContext.gameState.time,previousState:this.id}}:{nextState:this.id,data:n}}}const aE=new sE,lE=(e,n)=>(n.procreationEndTime=e.updateContext.gameState.time+(n.duration||2),n),uE=(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:a}=o;if(a.time<(e.procreationEndTime||0))return{nextState:Cs,data:e};const l=a.entities.entities.get(e.partnerId);if(l&&l.type==="human"&&!l.isPregnant&&r.hunger<fr&&l.hunger<fr&&!r.procreationCooldown&&!l.procreationCooldown){const c=r.gender==="female"?r:l.gender==="female"?l:void 0,f=r.gender==="male"?r:l.gender==="male"?l:void 0;c&&f&&(c.isPregnant=!0,c.gestationTime=FA,c.fatherId=f.id,r.procreationCooldown=Fp,l.procreationCooldown=Fp,Ue(o,Re.Procreate,c.position))}return r.activeAction="idle",l&&(l.activeAction="idle"),{nextState:At,data:{...e,enteredAt:a.time,previousState:Cs}}},cE={id:Cs,onEnter:lE,update:uE},dE={id:zn,onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time,attackStartTime:e.updateContext.gameState.time}),update:(e,n)=>{if(n.entity.activeAction!=="attacking"||!n.entity.attackTargetId)return n.entity.activeAction="idle",{nextState:At,data:{...e}};const r=n.updateContext.gameState.entities.entities.get(n.entity.attackTargetId);if(!r||r.type!=="human")return n.entity.activeAction="idle",{nextState:At,data:{...e}};const o=j(n.entity.position,r.position,n.updateContext.gameState.mapDimensions.width,n.updateContext.gameState.mapDimensions.height),a=We(n.entity.position,r.position,n.updateContext.gameState.mapDimensions.width,n.updateContext.gameState.mapDimensions.height);return n.entity.direction=qe(a),o>Li?n.entity.acceleration=Z0(n.entity):n.entity.acceleration=0,{nextState:zn,data:e}}},fE={id:ml,update:(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:a}=o;if(a.time-e.enteredAt>=qA){if(r.food.filter(f=>f.type===ri.Berry).length>=As){for(let h=0;h<As;h++){const p=r.food.findIndex(m=>m.type===ri.Berry);p>-1&&r.food.splice(p,1)}const f=$l(a.entities,e.plantingSpot,a.time);f.ownerId=r.id,f.claimedUntil=a.time+c0}return{nextState:At,data:{...e,enteredAt:a.time,previousState:ml}}}return{nextState:ml,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},hE=[nE,rE,oE,aE,cE,dE,fE],In="preyIdle",Ui="preyMoving",as="preyGrazing",ls="preyProcreating",gE={id:In,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:Ui,data:{...e,enteredAt:o.gameState.time,previousState:In,target:r.target}}:r.activeAction==="grazing"?{nextState:as,data:{...e,enteredAt:o.gameState.time,previousState:In}}:r.activeAction==="procreating"?{nextState:ls,data:{...e,enteredAt:o.gameState.time,previousState:In}}:{nextState:In,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function pE(e){let n=ew;return e.isAdult||(n*=.7),e.hunger>=sw&&(n*=aw),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}function mE(e,n){const r=e>>16&255,o=e>>8&255,a=e&255,l=n>>16&255,c=n>>8&255,f=n&255;let h=Math.floor((r+l)/2),p=Math.floor((o+c)/2),m=Math.floor((a+f)/2);return Math.random()<.05&&(h=Math.max(0,Math.min(255,h+(Math.random()-.5)*60))),Math.random()<.05&&(p=Math.max(0,Math.min(255,p+(Math.random()-.5)*60))),Math.random()<.05&&(m=Math.max(0,Math.min(255,m+(Math.random()-.5)*60))),h<<16|p<<8|m}function El(){const e=Math.floor(Math.random()*100)+100,n=Math.floor(Math.random()*80)+60,r=Math.floor(Math.random()*60)+20;return e<<16|n<<8|r}const nd=10;class vE{constructor(){Ce(this,"id",Ui)}update(n,r){var h;const{entity:o,updateContext:a}=r;if(o.activeAction!=="moving")return{nextState:In,data:{...n,enteredAt:a.gameState.time,previousState:Ui}};let l;if(typeof o.target=="object"?l=o.target:typeof o.target=="number"&&(l=(h=r.updateContext.gameState.entities.entities.get(o.target))==null?void 0:h.position),!l&&(o.direction.x!==0||o.direction.y!==0)&&(l={x:o.position.x+o.direction.x*nd*2,y:o.position.y+o.direction.y*nd*2}),!l)return{nextState:In,data:{...n,enteredAt:a.gameState.time,previousState:Ui}};const c=We(o.position,l,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=qe(c),o.acceleration=pE(o),j(o.position,l,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)<nd?{nextState:In,data:{...n,enteredAt:a.gameState.time,previousState:Ui}}:{nextState:Ui,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}onEnter(n,r){return{...r,enteredAt:n.updateContext.gameState.time}}}const SE=new vE,yE={id:as,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:Ui,data:{...e,enteredAt:o.gameState.time,previousState:as,target:r.target}}:r.activeAction!=="grazing"?{nextState:In,data:{...e,enteredAt:o.gameState.time,previousState:as}}:{nextState:as,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},AE={id:ls,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:Ui,data:{...e,enteredAt:o.gameState.time,previousState:ls,target:r.target}}:r.activeAction!=="procreating"?{nextState:In,data:{...e,enteredAt:o.gameState.time,previousState:ls}}:{nextState:ls,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},TE=[gE,SE,yE,AE],Ft="predatorIdle",Oi="predatorMoving",ti="predatorAttacking",Yr="predatorProcreating",cr="predatorEating",IE={id:Ft,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="eating"?{nextState:cr,data:{...e,enteredAt:o.gameState.time,previousState:Ft,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}}:r.activeAction==="attacking"&&r.attackTargetId?{nextState:ti,data:{...e,enteredAt:o.gameState.time,previousState:Ft,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:r.activeAction==="moving"?{nextState:Oi,data:{...e,enteredAt:o.gameState.time,previousState:Ft,target:r.target}}:r.activeAction==="procreating"?{nextState:Yr,data:{...e,enteredAt:o.gameState.time,previousState:Ft}}:{nextState:Ft,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function q0(e){let n=cw;return e.hunger>=pw&&(n*=mw),e.isAdult||(n*=.7),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}function wE(e,n){const r=e>>16&255,o=e>>8&255,a=e&255,l=n>>16&255,c=n>>8&255,f=n&255;let h=Math.floor((r+l)/2),p=Math.floor((o+c)/2),m=Math.floor((a+f)/2);return Math.random()<.05&&(h=Math.max(0,Math.min(255,h+(Math.random()-.5)*60))),Math.random()<.05&&(p=Math.max(0,Math.min(255,p+(Math.random()-.5)*60))),Math.random()<.05&&(m=Math.max(0,Math.min(255,m+(Math.random()-.5)*60))),h<<16|p<<8|m}function _l(){const e=Math.floor(Math.random()*60)+60,n=Math.floor(Math.random()*50)+40,r=Math.floor(Math.random()*40)+20;return e<<16|n<<8|r}const id=12;class EE{constructor(){Ce(this,"id",Oi)}update(n,r){var h;const{entity:o,updateContext:a}=r;if(o.activeAction==="eating")return{nextState:cr,data:{...n,enteredAt:a.gameState.time,previousState:Oi,preyId:o.attackTargetId,eatingStartTime:a.gameState.time}};if(o.activeAction==="attacking"&&o.attackTargetId)return{nextState:ti,data:{...n,enteredAt:a.gameState.time,previousState:Oi,attackTargetId:o.attackTargetId,attackStartTime:a.gameState.time}};if(o.activeAction!=="moving")return{nextState:Ft,data:{...n,enteredAt:a.gameState.time,previousState:Oi}};let l;if(typeof o.target=="object"?l=o.target:typeof o.target=="number"&&(l=(h=r.updateContext.gameState.entities.entities.get(o.target))==null?void 0:h.position),!l&&(o.direction.x!==0||o.direction.y!==0)&&(l={x:o.position.x+o.direction.x*id*2,y:o.position.y+o.direction.y*id*2}),!l)return{nextState:Ft,data:{...n,enteredAt:a.gameState.time,previousState:Oi}};const c=We(o.position,l,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=qe(c),o.acceleration=q0(o),j(o.position,l,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)<id?{nextState:Ft,data:{...n,enteredAt:a.gameState.time,previousState:Oi}}:{nextState:Oi,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}onEnter(n,r){return{...r,enteredAt:n.updateContext.gameState.time}}}const _E=new EE,CE={id:ti,update:(e,n)=>{const{entity:r,updateContext:o}=n;if(r.activeAction==="eating")return{nextState:cr,data:{...e,enteredAt:o.gameState.time,previousState:ti,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}};if(r.activeAction!=="attacking"||!r.attackTargetId)return r.activeAction="idle",{nextState:Ft,data:{...e,enteredAt:o.gameState.time,previousState:ti}};const a=o.gameState.entities.entities.get(r.attackTargetId);if(!a)return r.activeAction="idle",{nextState:Ft,data:{...e,enteredAt:o.gameState.time,previousState:ti}};if(a.type==="prey"&&a.hitpoints<=0||a.type==="predator"&&a.hitpoints<=0||a.type==="human"&&a.hitpoints<=0)return r.activeAction="idle",{nextState:Ft,data:{...e,enteredAt:o.gameState.time,previousState:ti}};const c=j(r.position,a.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height),f=We(r.position,a.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height);return r.direction=qe(f),c>Gn?r.acceleration=q0(r):r.acceleration=0,{nextState:ti,data:e}},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},RE={id:Yr,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="eating"?{nextState:cr,data:{...e,enteredAt:o.gameState.time,previousState:Yr,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}}:r.activeAction==="attacking"&&r.attackTargetId?{nextState:ti,data:{...e,enteredAt:o.gameState.time,previousState:Yr,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:r.activeAction!=="procreating"?{nextState:Ft,data:{...e,enteredAt:o.gameState.time,previousState:Yr}}:{nextState:Yr,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},PE={id:cr,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction!=="eating"?{nextState:Ft,data:{...e,enteredAt:o.gameState.time,previousState:cr}}:{nextState:cr,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},NE=[IE,_E,CE,RE,PE],hm=[...tE,...hE,...TE,...NE];function DE(e,n,r){const o=SA(e,hm);if(!o)return AA(e),[e,n];const{nextState:a,data:l}=o.update(n,r);return yA(e,a)?[a,vA(o,a,l,r,hm)]:[a,l]}function kE(e,n,r){const{gameState:o}=n,a=r*(gt/pt);if(e.isAdult=e.age>=xd,e.isCallingToAttack&&e.callToAttackEndTime&&o.time>e.callToAttackEndTime&&(e.isCallingToAttack=!1,e.callToAttackEndTime=void 0),e.isCallingToFollow&&e.callToFollowEndTime&&o.time>e.callToFollowEndTime&&(e.isCallingToFollow=!1,e.callToFollowEndTime=void 0),e.movementSlowdown&&o.time>e.movementSlowdown.endTime&&(e.movementSlowdown=void 0),e.hitpoints<e.maxHitpoints){const c=1-e.hunger/100*jA,f=YA*c*a;e.hitpoints=Math.min(e.maxHitpoints,e.hitpoints+f)}if(e.hunger+=r*(Jo/(gt/pt)),e.hunger>kI&&(!e.lastHungerEffectTime||o.time-e.lastHungerEffectTime>lr*2)&&(ke(o,ce.Hunger,e.position,lr,e.id),e.lastHungerEffectTime=o.time),e.age+=r/Ll,e.isPlayer){const c=Tt(o,e).filter(f=>f.hunger>=HI);if(c.length>0){const f=c.map(h=>h.id);Nd(o,{identifier:"children_starving",type:Es.ChildrenStarving,message:"Your children are starving!",duration:FI,targetEntityIds:f,highlightedEntityIds:f})}}if(e.gender==="female"&&e.isPregnant&&e.gestationTime&&(e.gestationTime-=a,e.hunger+=r*((Jo*LA-Jo)/(gt/pt)),(!e.lastPregnantEffectTime||o.time-e.lastPregnantEffectTime>lr*3)&&(ke(o,ce.Pregnant,e.position,lr,e.id),e.lastPregnantEffectTime=o.time),e.gestationTime<=0&&(G_(e,e.fatherId,n),e.isPregnant=!1,e.gestationTime=0,e.fatherId=void 0)),e.procreationCooldown&&(e.procreationCooldown-=a,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.attackCooldown&&(e.attackCooldown-=a,e.attackCooldown<0&&(e.attackCooldown=0)),e.feedParentCooldownTime&&(e.feedParentCooldownTime-=a,e.feedParentCooldownTime<0&&(e.feedParentCooldownTime=0)),e.feedChildCooldownTime&&(e.feedChildCooldownTime-=a,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0)),e.leaderMetaStrategyCooldown&&(e.leaderMetaStrategyCooldown-=a,e.leaderMetaStrategyCooldown<0&&(e.leaderMetaStrategyCooldown=0)),e.isAdult?e.radius===co&&(e.radius=vt):e.hunger+=r*((Jo*HA-Jo)/(gt/pt)),e.isAdult&&e.food.length>0&&(!e.feedParentCooldownTime||e.feedParentCooldownTime<=0)){const c=[];if(e.motherId){const f=o.entities.entities.get(e.motherId);f&&c.push(f)}if(e.fatherId){const f=o.entities.entities.get(e.fatherId);f&&c.push(f)}for(const f of c)if(f.age>=p0&&f.hunger>=xA&&j(e.position,f.position,o.mapDimensions.width,o.mapDimensions.height)<=bA){e.food.pop(),f.hunger=Math.max(0,f.hunger-Bi),e.feedParentCooldownTime=zA;break}}let l;if(e.hitpoints<=0?l="killed":e.hunger>=en?e.food.length>0&&e.isAdult?(e.food.pop(),e.hunger=Math.max(0,e.hunger-Bi)):l="hunger":e.age>=e.maxAge&&(l="oldAge"),l){if(e.leaderId===e.id){const c=oi(Tt(o,e));c?(c.leaderId=c.id,c.tribeBadge=e.tribeBadge,c.diplomacy=new Map(e.diplomacy),o.entities.entities.forEach(f=>{if(f.type==="human"&&f.leaderId===e.id){const h=f;h.leaderId=c.id}})):o.entities.entities.forEach(f=>{if(f.type==="human"&&f.leaderId===e.id){const h=f;h.leaderId=void 0,h.tribeBadge=void 0}})}if(e.isPlayer){const c=oi(Tt(o,e));c?(c.isPlayer=!0,o.generationCount++):(o.gameOver=!0,o.causeOfGameOver=l,Nd(o,{identifier:"no_heir",type:Es.NoHeir,message:"Your lineage has ended. You have no heir.",duration:0}))}L_(o.entities,e.position,e.gender,e.age,e.radius,e.id,o.time,e.food,e.hunger),Ms(o.entities,e.id);return}e.animationProgress===void 0&&(e.animationProgress=0),e.animationSpeed===void 0&&(e.animationSpeed=1),e.animationProgress+=r*e.animationSpeed,e.animationProgress>=1&&(e.animationProgress=0)}function OE(e,n){const r=n.gameState.time-e.timeOfDeath;e.decayProgress=Math.min(1,r/WA);const o=Math.floor(m0*(1-e.decayProgress));e.food.length>o&&e.food.splice(o),e.decayProgress>=1&&e.food.length<=0&&Ms(n.gameState.entities,e.id)}function ME(e,n,r){const o=r*(gt/pt);e.age+=r/Ll,e.isAdult=e.age>=ds;let a=qI*o;if(e.isPregnant&&(a*=1.2),e.hunger+=a,e.isPregnant&&e.gestationTime!==void 0&&(e.gestationTime-=o,e.gestationTime<=0)){const c={x:e.position.x+(Math.random()-.5)*40,y:e.position.y+(Math.random()-.5)*40};c.x=Math.max(20,Math.min(n.gameState.mapDimensions.width-20,c.x)),c.y=Math.max(20,Math.min(n.gameState.mapDimensions.height-20,c.y));const f=Math.random()<.5?"male":"female",h=e,p=e.fatherId?n.gameState.entities.entities.get(e.fatherId):void 0;let m;if(p)m=mE(h.geneCode,p.geneCode);else{m=h.geneCode;const S=Math.floor((Math.random()-.5)*4096);m=Math.max(0,Math.min(16777215,m+S))}Rs(n.gameState.entities,c,f,0,H0*.5,m,e.id,e.fatherId),ke(n.gameState,ce.Procreation,e.position,lr,e.id),Ue(n,Re.Birth,e.position),e.isPregnant=!1,e.gestationTime=0,e.procreationCooldown=12,e.fatherId=void 0}e.procreationCooldown&&e.procreationCooldown>0&&(e.procreationCooldown-=o,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.eatingCooldownTime&&e.eatingCooldownTime>n.gameState.time||(e.eatingCooldownTime=void 0),e.fleeCooldown&&e.fleeCooldown>0&&(e.fleeCooldown-=o,e.fleeCooldown<0&&(e.fleeCooldown=0)),e.feedChildCooldownTime&&e.feedChildCooldownTime>0&&(e.feedChildCooldownTime-=o,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0));let l=!1;e.hunger>=JI&&(l=!0),e.hitpoints<=0&&(l=!0),e.age>=L0&&(l=!0),l&&(H_(n.gameState.entities,e.position,e.gender,e.age,e.radius,e.id,n.gameState.time,e.geneCode),Ms(n.gameState.entities,e.id))}function UE(e,n,r){const o=r*(gt/pt);e.age+=r/Ll,e.isAdult=e.age>=fs;let a=lw*o;if(e.isPregnant&&(a*=1.3),e.hunger+=a,e.isPregnant&&e.gestationTime!==void 0&&(e.gestationTime-=o,e.gestationTime<=0)){const c={x:e.position.x+(Math.random()-.5)*50,y:e.position.y+(Math.random()-.5)*50};c.x=Math.max(25,Math.min(n.gameState.mapDimensions.width-25,c.x)),c.y=Math.max(25,Math.min(n.gameState.mapDimensions.height-25,c.y));const f=Math.random()<.5?"male":"female",h=e,p=e.fatherId?n.gameState.entities.entities.get(e.fatherId):void 0;let m;if(p)m=wE(h.geneCode,p.geneCode);else{m=h.geneCode;const S=Math.floor((Math.random()-.5)*4096);m=Math.max(0,Math.min(16777215,m+S))}Ps(n.gameState.entities,c,f,0,G0*.6,m,e.id,e.fatherId),ke(n.gameState,ce.Procreation,e.position,lr,e.id),Ue(n,Re.Birth,e.position),e.isPregnant=!1,e.gestationTime=0,e.procreationCooldown=18,e.fatherId=void 0}e.procreationCooldown&&e.procreationCooldown>0&&(e.procreationCooldown-=o,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.attackCooldown&&e.attackCooldown>0&&(e.attackCooldown-=o,e.attackCooldown<0&&(e.attackCooldown=0)),e.huntCooldown&&e.huntCooldown>0&&(e.huntCooldown-=o,e.huntCooldown<0&&(e.huntCooldown=0)),e.feedChildCooldownTime&&e.feedChildCooldownTime>0&&(e.feedChildCooldownTime-=o,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0));let l=!1;e.hunger>=uw&&(l=!0),e.hitpoints<=0&&(l=!0),e.age>=B0&&(l=!0),l&&(B_(n.gameState.entities,e.position,e.gender,e.age,e.radius,e.id,n.gameState.time,e.geneCode),Ms(n.gameState.entities,e.id))}var ks=(e=>(e[e.BehaviorTreeBased=0]="BehaviorTreeBased",e))(ks||{});function mf(e,n){if(e.aiBehaviorTree&&e.aiBlackboard){const r=e.aiBlackboard.get("lastAiUpdateTime")??0;n.gameState.time-r>=ii&&(e.aiBehaviorTree.execute(e,n,e.aiBlackboard),e.aiBlackboard.set("lastAiUpdateTime",n.gameState.time))}else console.warn(`Behavior Tree AI ticked for human ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle"}function FE(e,n){switch(e.aiBlackboard&&e.aiBlackboard.cleanupOldEntries(n.gameState.time),e.aiType){case ks.BehaviorTreeBased:default:mf(e,n);break}}function LE(e,n){e.aiBehaviorTree&&e.aiBlackboard?mf(e,n):(console.warn(`Behavior Tree AI ticked for prey ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle")}function HE(e,n){e.aiBehaviorTree&&e.aiBlackboard?mf(e,n):(console.warn(`Behavior Tree AI ticked for predator ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle")}function BE(e,n){e.forces.push(Nt(e.velocity,-.1));const r=Nt(qe(e.direction),e.acceleration);e.forces.push(r),e.debuffs.forEach(o=>{n.gameState.time-o.startTime<o.duration&&o.type==="slow"&&(e.velocity=Nt(e.velocity,.5))}),e.debuffs=e.debuffs.filter(o=>n.gameState.time-o.startTime<o.duration),e.velocity=bn(e.velocity,e.forces.reduce(bn,{x:0,y:0})),ao(e.velocity)<.001&&(e.velocity={x:0,y:0}),e.position=bn(e.position,Nt(e.velocity,n.deltaTime)),e.position.x=(e.position.x%n.gameState.mapDimensions.width+n.gameState.mapDimensions.width)%n.gameState.mapDimensions.width,e.position.y=(e.position.y%n.gameState.mapDimensions.height+n.gameState.mapDimensions.height)%n.gameState.mapDimensions.height,e.forces=[],e.type==="human"?kE(e,n,n.deltaTime):e.type==="corpse"?OE(e,n):e.type==="prey"?ME(e,n,n.deltaTime):e.type==="predator"&&UE(e,n,n.deltaTime),e.type==="human"&&FE(e,n),e.type==="prey"?LE(e,n):e.type==="predator"&&HE(e,n),e.stateMachine&&(e.stateMachine=DE(...e.stateMachine,{entity:e,updateContext:n}))}var I=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.FAILURE=1]="FAILURE",e[e.RUNNING=2]="RUNNING",e[e.NOT_EVALUATED=3]="NOT_EVALUATED",e))(I||{});const gm="Human Behavior",GE=1;class xE{constructor(){Ce(this,"nodeData",new Map);Ce(this,"pathStack",[]);Ce(this,"startTimeStack",[])}nodeStart(n){this.pathStack.push(n),this.startTimeStack.push(performance.now())}nodeEnd(){if(this.startTimeStack.length===0||this.pathStack.length===0){console.error("BTProfiler: nodeEnd() called without a matching nodeStart().");return}const n=performance.now(),r=this.startTimeStack.pop(),o=n-r,a=this.pathStack.join(" > "),l=this.nodeData.get(a)??{path:a,totalTime:0,callCount:0,minTime:1/0,maxTime:-1/0};l.totalTime+=o,l.callCount++,l.minTime=Math.min(l.minTime,o),l.maxTime=Math.max(l.maxTime,o),this.nodeData.set(a,l),this.pathStack.pop()}report(n={}){const{showAll:r=!1}=n,o=Array.from(this.nodeData.values());if(o.length===0){console.log("--- Behavior Tree Profiler: No data collected. ---");return}let a=o,l="--- Behavior Tree Full Report ---";if(!r){const f=this.nodeData.get(gm);if(f){const h=f.totalTime*GE/100;a=o.filter(p=>p.totalTime>h&&p.path!==gm),l="--- Behavior Tree Problem Report ---"}else console.log('BTProfiler: Root node "Human Behavior" not found. Showing full report.'),l="--- Behavior Tree Full Report (Root Not Found) ---"}const c=a.sort((f,h)=>h.totalTime-f.totalTime);console.log(l),c.length>0?console.table(c.map(f=>({Path:f.path,"Total Time (ms)":f.totalTime.toFixed(3),Calls:f.callCount,"Avg Time (ms)":(f.totalTime/f.callCount).toFixed(3),"Min Time (ms)":f.minTime.toFixed(3),"Max Time (ms)":f.maxTime.toFixed(3)}))):console.log("No significant performance problems detected."),console.log("------------------------------------")}reset(){this.nodeData.clear(),this.pathStack=[],this.startTimeStack=[]}}const at=new xE;function En(e){return Array.isArray(e)?e:[e,""]}class me{constructor(n,r,o=0){Ce(this,"name");Ce(this,"lastStatus");Ce(this,"depth");this.children=n,this.name=r,this.depth=o,this.children.forEach(a=>{a.depth=(this.depth??0)+1})}execute(n,r,o){this.name&&at.nodeStart(this.name);try{for(const a of this.children){const[l,c]=En(a.execute(n,r,o));if(l!==I.SUCCESS)return this.lastStatus=l,this.name&&o.recordNodeExecution(this.name,l,r.gameState.time,this.depth,c),l}return this.lastStatus=I.SUCCESS,this.name&&o.recordNodeExecution(this.name,I.SUCCESS,r.gameState.time,this.depth,""),I.SUCCESS}finally{this.name&&at.nodeEnd()}}}class _n{constructor(n,r,o=0){Ce(this,"name");Ce(this,"lastStatus");Ce(this,"depth");Ce(this,"runningChildIndex");this.children=n,this.name=r,this.depth=o,this.children.forEach(a=>{a.depth=(this.depth??0)+1})}execute(n,r,o){this.name&&at.nodeStart(this.name);try{const a=this.runningChildIndex??0;for(let l=a;l<this.children.length;l++){const c=this.children[l],[f,h]=En(c.execute(n,r,o));if(f!==I.FAILURE){if(f===I.SUCCESS)return delete this.runningChildIndex,this.lastStatus=I.SUCCESS,this.name&&o.recordNodeExecution(this.name,I.SUCCESS,r.gameState.time,this.depth,h),I.SUCCESS;if(f===I.RUNNING)return this.runningChildIndex=l,this.lastStatus=I.RUNNING,this.name&&o.recordNodeExecution(this.name,I.RUNNING,r.gameState.time,this.depth,h),I.RUNNING}}return delete this.runningChildIndex,this.lastStatus=I.FAILURE,this.name&&o.recordNodeExecution(this.name,I.FAILURE,r.gameState.time,this.depth,""),I.FAILURE}finally{this.name&&at.nodeEnd()}}}class ue{constructor(n,r,o=0){Ce(this,"name");Ce(this,"lastStatus");Ce(this,"depth");this.action=n,this.name=r,this.depth=o}execute(n,r,o){this.name&&at.nodeStart(this.name);try{const[a,l]=En(this.action(n,r,o));return this.lastStatus=a,this.name&&o.recordNodeExecution(this.name,a,r.gameState.time,this.depth,l),a}finally{this.name&&at.nodeEnd()}}}class ie{constructor(n,r,o=0){Ce(this,"name");Ce(this,"lastStatus");Ce(this,"depth");this.condition=n,this.name=r,this.depth=o}execute(n,r,o){this.name&&at.nodeStart(this.name);try{const[a,l]=En(this.condition(n,r,o)),c=a?I.SUCCESS:I.FAILURE;return this.lastStatus=c,this.name&&o.recordNodeExecution(this.name,c,r.gameState.time,this.depth,l),c}finally{this.name&&at.nodeEnd()}}}class pm{constructor(n,r,o,a=0){Ce(this,"name");Ce(this,"lastStatus");Ce(this,"depth");Ce(this,"startTimeKey");this.child=n,this.timeoutDurationHours=r,this.name=o,this.depth=a,this.child.depth=(this.depth??0)+1,this.startTimeKey=`timeout_${this.name}_startTime`}execute(n,r,o){at.nodeStart(this.name);try{const a=r.gameState.time;let l=o.get(this.startTimeKey);const[c,f]=En(this.child.execute(n,r,o));if(c===I.RUNNING){l===void 0&&(o.set(this.startTimeKey,a),l=a);const h=a-l;if(h>this.timeoutDurationHours){o.delete(this.startTimeKey),this.lastStatus=I.FAILURE;const m=`Timed out after ${h.toFixed(2)}h.`;return o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,m),this.lastStatus}this.lastStatus=I.RUNNING;const p=`Running for ${h.toFixed(2)}h. ${f}`;return o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,p),this.lastStatus}return l!==void 0&&o.delete(this.startTimeKey),this.lastStatus=c,o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,f),this.lastStatus}finally{at.nodeEnd()}}}class Cl{constructor(n,r,o,a=0,l){Ce(this,"name");Ce(this,"lastStatus");Ce(this,"depth");Ce(this,"statusKey");Ce(this,"timestampKey");this.child=n,this.cacheDurationHours=r,this.validityCheck=l,this.name=o,this.depth=a,this.child.depth=(this.depth??0)+1,this.statusKey=`caching_${this.name}_status`,this.timestampKey=`caching_${this.name}_timestamp`}execute(n,r,o){at.nodeStart(this.name);try{const a=r.gameState.time,l=o.get(this.statusKey),c=o.get(this.timestampKey);if(l!==void 0&&c!==void 0){const m=a-c>this.cacheDurationHours,S=this.validityCheck?this.validityCheck(n,r,o):!0;if(!m&&S){const y=(c+this.cacheDurationHours-a).toFixed(2),w=`Cache hit. Status: ${I[l]}. ${y}h left.`;return this.lastStatus=l,o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,w),this.lastStatus}}const[f,h]=En(this.child.execute(n,r,o));(f===I.SUCCESS||f===I.FAILURE)&&(o.set(this.statusKey,f),o.set(this.timestampKey,a)),this.lastStatus=f;const p=`Cache miss. Child returned ${I[f]}. ${h}`;return o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,p),this.lastStatus}finally{at.nodeEnd()}}}class gr{constructor(n,r,o,a=0){Ce(this,"name");Ce(this,"lastStatus");Ce(this,"depth");Ce(this,"cooldownKey");this.cooldownDurationHours=n,this.child=r,this.name=o,this.depth=a,this.child.depth=(this.depth??0)+1,this.cooldownKey=`cooldown_${this.name}`}execute(n,r,o){at.nodeStart(this.name);try{const a=r.gameState.time,l=o.get(this.cooldownKey);if(this.child.lastStatus===I.RUNNING){const[h,p]=En(this.child.execute(n,r,o));if(this.lastStatus=h,this.name){const m=`Continuing running child. ${p}`;o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,m)}return this.lastStatus}if(l!==void 0&&a<l){const p=`Cooldown active, ${(l-a).toFixed(2)}h left`;return this.lastStatus=I.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,p),this.lastStatus}const[c,f]=En(this.child.execute(n,r,o));return(c===I.SUCCESS||c===I.RUNNING)&&o.set(this.cooldownKey,a+this.cooldownDurationHours),this.lastStatus=c,this.name&&o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,f),this.lastStatus}finally{at.nodeEnd()}}}class ir{constructor(n,r,o,a=0){Ce(this,"name");Ce(this,"lastStatus");Ce(this,"depth");this.child=n,this.behaviorKey=r,this.name=o,this.depth=a;const l=(c,f)=>{c.depth=f,c.children?c.children.forEach(h=>l(h,f+1)):c.child&&l(c.child,f+1)};l(this.child,(this.depth??0)+1)}execute(n,r,o){this.name&&at.nodeStart(this.name);try{if(n.isPlayer&&!r.gameState.autopilotControls.behaviors[this.behaviorKey]){const f=`Player autopilot for '${this.behaviorKey}' is disabled.`;return this.lastStatus=I.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,f),this.lastStatus}const[l,c]=En(this.child.execute(n,r,o));return this.lastStatus=l,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,c),this.lastStatus}finally{this.name&&at.nodeEnd()}}}class bE{constructor(n,r,o=0){Ce(this,"name");Ce(this,"lastStatus");Ce(this,"depth");this.child=n,this.name=r,this.depth=o;const a=(l,c)=>{l.depth=c,l.children?l.children.forEach(f=>a(f,c+1)):l.child&&a(l.child,c+1)};a(this.child,(this.depth??0)+1)}execute(n,r,o){this.name&&at.nodeStart(this.name);try{if(n.isPlayer&&r.gameState.autopilotControls.isManuallyMoving)return this.lastStatus=I.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,"Manual movement active, AI blocked."),this.lastStatus;const[a,l]=En(this.child.execute(n,r,o));return this.lastStatus=a,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,l),this.lastStatus}finally{this.name&&at.nodeEnd()}}}class ns{constructor(n,r,o=0){Ce(this,"name");Ce(this,"lastStatus");Ce(this,"depth");this.child=n,this.name=r,this.depth=o;const a=(l,c)=>{l.depth=c,l.children?l.children.forEach(f=>a(f,c+1)):l.child&&a(l.child,c+1)};a(this.child,(this.depth??0)+1)}execute(n,r,o){this.name&&at.nodeStart(this.name);try{if(n.isPlayer)return this.lastStatus=I.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,"Player controlled, AI blocked."),this.lastStatus;const[a,l]=En(this.child.execute(n,r,o));return this.lastStatus=a,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,l),this.lastStatus}finally{this.name&&at.nodeEnd()}}}function zE(e){return new me([new ie((n,r)=>{const o=n.hunger>=Bp,a=n.food.length>0,l=!n.eatingCooldownTime||r.gameState.time>=n.eatingCooldownTime;return[!!(n.isAdult&&o&&a&&l),`${Math.floor(n.hunger-Bp)}, ${n.food.length}, ${n.eatingCooldownTime?Math.floor(n.eatingCooldownTime-r.gameState.time):""}`]},"Can Eat",e+1),new ue(n=>(n.direction={x:0,y:0},n.target=void 0,n.activeAction="eating",I.RUNNING),"Eat",e+1)],"Eating",e)}function WE(e){return new me([new ie((n,r,o)=>{if(n.isAdult&&n.hitpoints>n.maxHitpoints*E0||n.isAdult&&n.hunger>lT)return!1;const a=Rw(n.id,r.gameState);return a?(o.set("fleeThreat",a),!0):!1},"Should Flee",e+1),new ue((n,r,o)=>{const a=o.get("fleeThreat");if(!a)return I.FAILURE;n.activeAction="moving";const l=We(a.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),c=qe(l),f=bn(n.position,Nt(c,_0));return n.target={x:(f.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(f.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},n.direction=c,I.RUNNING},"Execute Flee",e+1)],"Flee",e)}const is="foodSource";function $E(e){const n=new ue((o,a,l)=>{const c=new Map,f=Me(o,a.gameState,"berryBush",Wp,m=>{if(m.food.length===0)return!1;if(!m.ownerId||!m.claimedUntil||a.gameState.time>=m.claimedUntil)return!0;const S=a.gameState.entities.entities.get(m.ownerId);if(!S||S.leaderId===o.leaderId)return!0;const y=c.get(S.id)??j(o.position,S.position,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height);return c.set(S.id,y),y>LT}),h=Me(o,a.gameState,"corpse",Wp,m=>m.food.length>0);let p=null;if(f&&h){const m=j(o.position,f.position,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height),S=j(o.position,h.position,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height);p=m<=S?f:h}else p=f||h;return p?(l.set(is,p),[I.SUCCESS,`Found food: ${p.type} at ${p.position.x.toFixed(0)},${p.position.y.toFixed(0)}`]):[I.FAILURE,"No food source found"]},"Find Closest Food Source",e+4),r=new ue((o,a,l)=>{const c=l.get(is);return!c||c.food.length===0?(l.delete(is),[I.FAILURE,"Food source is invalid or depleted"]):j(o.position,c.position,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)<Gi?(o.activeAction="gathering",o.direction={x:0,y:0},o.target=c.id,l.delete(is),[I.SUCCESS,`Gathering from ${c.type}`]):(o.activeAction="moving",o.target=c.id,o.direction=Vt(o.position,c.position,a.gameState.mapDimensions),[I.RUNNING,`Moving to ${c.type}`])},"Move To Food and Gather",e+3);return new me([new ie((o,a)=>{const l=o.food.length<o.maxFood,c=o.hunger>eT,f=Tt(a.gameState,o).filter(h=>h.hunger>bd);return[(o.isAdult&&l&&(c||f.length>0))??!1,`${c?"H":""}, ${f.length>0?" HC("+f.length+")":""}`]},"Should Gather Food",e+1),new _n([new me([new ie((o,a,l)=>l.has(is),"Has Food Source?",e+2),r],"Continue Gathering Action",e+2),new me([new Cl(n,vT,"Cache Food Source Search",e+3),r],"Find New Food Source and Gather",e+2)],"Perform or Start Gathering",e+1)],"Gather Food",e)}function YE(e){return new ue((n,r,o)=>(n.activeAction="idle",n.direction={x:0,y:0},n.target=void 0,o.set("wanderTarget",void 0),I.SUCCESS),"Idle",e)}const qa="procreationWanderStartTime",mm=(e,n,r)=>n.find(o=>hr(e,o,r));function jE(e){const n=new ie((l,c,f)=>{const h=am(l,c.gameState,Gi),p=mm(l,h,c.gameState);return p?(f.set("procreationPartner",p),!0):!1},"Find Immediate Partner"),r=new ue((l,c,f)=>{var p;const h=f.get("procreationPartner");return h?(l.activeAction="procreating",l.target=void 0,f.delete("procreationPartner"),f.delete(qa),(p=l.partnerIds)!=null&&p.includes(h.id)||(l.partnerIds=l.partnerIds?[...l.partnerIds,h.id]:[h.id]),I.SUCCESS):I.FAILURE},"Start Procreating"),o=new ie((l,c,f)=>{const h=am(l,c.gameState,aT),p=mm(l,h,c.gameState);return p?(f.set("procreationPartner",p),!0):!1},"Locate Distant Partner"),a=new ue((l,c,f)=>{const h=f.get("procreationPartner");if(!h)return I.FAILURE;if(j(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<Gi)return I.SUCCESS;l.activeAction="moving",l.target=h.id;const m=We(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height);return l.direction=qe(m),I.RUNNING},"Move Towards Partner");return new me([new ie(l=>!(!l.isAdult||l.gender==="female"&&l.isPregnant||l.age<MA||l.gender==="female"&&l.age>g0),"Is Fertile (age, not pregnant)",e+1),new ie(l=>l.hunger<fr,"Is Healthy (hunger)",e+1),new ie(l=>(l.procreationCooldown||0)<=0,"Is Ready (cooldown)",e+1),new _n([new me([new ie((l,c)=>X0(l.position,c.gameState,"berryBush",sT)>=oT,"Is Environment Viable (food)",e+3),new ue((l,c,f)=>(f.delete(qa),I.SUCCESS),"Clear Wander Timer",e+3)],"Sufficient Food Path",e+2),new me([new ie((l,c)=>{if(l.gender==="male"){const f=Tt(c.gameState,l);return!oi(f)}return!1},"Is Male Without Heir",e+3),new ue((l,c,f)=>{const h=f.get(qa);if(h===void 0)return f.set(qa,c.gameState.time),[I.FAILURE,"Starting heirless wander timer"];const p=c.gameState.time-h;return p>=UA?[I.SUCCESS,`Wandered for ${p.toFixed(1)}h, proceeding without food`]:[I.FAILURE,`Wandering for heir, ${p.toFixed(1)}h elapsed`]},"Check Wander Timer",e+3)],"Heirless Desperation Path",e+2)],"Check Environment Or Desperation",e+1),new ie((l,c,f)=>{var p;const h=f.get("procreationPartner");return h&&((p=h.partnerIds)!=null&&p.length)&&!h.partnerIds.includes(l.id)&&h.partnerIds.map(m=>c.gameState.entities.entities.get(m)).filter(m=>!!m).some(m=>j(l.position,m.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<FT)?[!1,"Partner's primary partner is too close"]:!0},"Is Partner's Primary Partner Nearby",e+1),new _n([new me([n,r],"Procreate With Immediate Partner",e+2),new gr(gT,new me([o,a],"Seek Distant Partner Action",e+3),"Seek Distant Partner Cooldown",e+2)],"Find Partner And Procreate",e+1)],"Procreate",e)}const xr="attackTarget",rr="homeCenter",rd=150;function VE(e){return new me([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const{gameState:a}=r;if(n.activeAction==="attacking"&&n.attackTargetId){const c=a.entities.entities.get(n.attackTargetId);if(c&&c.hitpoints>0&&j(n.position,c.position,a.mapDimensions.width,a.mapDimensions.height)<=rd){if(o.set(xr,c),!o.get(rr)){const f=n.leaderId?ws(n.leaderId,a):Il(n,a).length>0?lm(n,a):n.position;o.set(rr,f)}return!0}}const l=Me(n,a,"human",rd,c=>c.hitpoints>0&&ho(n,c,a));if(l){o.set(xr,l);const c=n.leaderId?ws(n.leaderId,a):Il(n,a).length>0?lm(n,a):n.position;return o.set(rr,c),!0}return o.set(xr,void 0),o.set(rr,void 0),!1},"Find Attack Target",e+1),new ue((n,r,o)=>{const a=o.get(xr),l=o.get(rr);if(!a||!l)return I.FAILURE;const{gameState:c}=r;return j(n.position,l,c.mapDimensions.width,c.mapDimensions.height)>T0?(n.activeAction="idle",n.attackTargetId=void 0,o.set(xr,void 0),o.set(rr,void 0),I.FAILURE):a.hitpoints<=0||j(n.position,a.position,c.mapDimensions.width,c.mapDimensions.height)>rd?(n.activeAction==="attacking"&&(n.activeAction="idle",n.attackTargetId=void 0),o.set(xr,void 0),o.set(rr,void 0),I.SUCCESS):(n.activeAction==="attacking"&&n.attackTargetId===a.id||(n.activeAction="attacking",n.attackTargetId=a.id),I.RUNNING)},"Execute Attack",e+1)],"Attack",e)}const XE=(e,n,r)=>{const o=Tt(n.gameState,e).filter(c=>!c.isAdult);if(o.length===0)return I.FAILURE;let a=null,l=bd;for(const c of o)c.hunger>=l&&(l=c.hunger,a=c);return a?(r.set("targetChild",a),I.SUCCESS):I.FAILURE},KE=(e,n,r)=>{const o=r.get("targetChild");return o?j(e.position,o.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>zd?(e.activeAction="moving",e.target=o.id,e.direction=Vt(e.position,o.position,n.gameState.mapDimensions),I.RUNNING):(e.activeAction="feeding",e.target=void 0,r.set("targetChild",void 0),I.SUCCESS):I.FAILURE};function QE(e){return new me([new ie(n=>(n.isAdult&&n.food.length>0&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child",e+1),new ue(XE,"Find Hungriest Child",e+1),new ue(KE,"Move To Child and Feed",e+1)],"Feed Child",e)}function ZE(e){return new me([new ie(n=>!n.isAdult&&n.hunger>=bd,"Is Hungry Child",e+1),new ue((n,r,o)=>{const a=Ew(n,r.gameState);if(a.length===0)return I.FAILURE;const l=Me(n,r.gameState,"human",GA,c=>a.some(f=>f.id===c.id)&&c.food.length>0);return l?(o.set("targetParent",l),I.SUCCESS):I.FAILURE},"Find Parent With Food",e+1),new ue((n,r,o)=>{const a=o.get("targetParent");if(!a)return I.FAILURE;const l=j(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",l<=zd?(n.target=void 0,I.SUCCESS):(n.target=a.id,n.activeAction="moving",I.RUNNING)},"Move To Parent",e+1)],"Seek Food From Parent",e)}const Ja="plantingSpot";function qE(e){const n=new ue((o,a,l)=>{const c=l.get(Ja);return!c||lo(c,a.gameState,Bl,o.id)?(l.delete(Ja),[I.FAILURE,"Planting spot is invalid or now occupied"]):j(o.position,c,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)>Gi?(o.activeAction="moving",o.target=c,o.direction=Vt(o.position,c,a.gameState.mapDimensions),[I.RUNNING,"Moving to planting spot"]):(o.activeAction="planting",o.target=c,[I.RUNNING,"Planting state initiated"])},"Move To Spot and Plant",e+3),r=new ue((o,a,l)=>{const c=Uw(o,a.gameState);return c?(l.set(Ja,c),[I.SUCCESS,`Found new spot at ${c.x.toFixed(0)}, ${c.y.toFixed(0)}`]):[I.FAILURE,"No suitable planting spot found"]},"Find Optimal Planting Spot",e+3);return new me([new ie(o=>{const a=o.food.filter(c=>c.type===ri.Berry).length>=As,l=o.hunger<tT;return(o.isAdult&&a&&l)??!1},"Can Plant",e+1),new ie((o,a)=>{const l=X0(o.position,a.gameState,"berryBush",JA),c=Tt(a.gameState,o);return!(c.length===0||l>=c.length*5)},"Has Not Enough Nearby Bushes",e+1),new _n([new me([new ie((o,a,l)=>l.has(Ja),"Has Planting Spot?",e+2),n],"Continue Planting Action",e+2),new gr(mT,r,"Find Planting Spot Cooldown",e+2)],"Perform or Start Planting",e+1)],"Plant Bush",e)}const od="enemiesNearby";function JE(e){const n=new ie(l=>l.id===l.leaderId,"Is Leader?",e+1),r=new ie(l=>!l.isCallingToAttack,"Is Not Already Calling?",e+1),o=new ue((l,c,f)=>{const h=cf(l,c.gameState,I0);return h.length>0?(f.set(od,h),I.SUCCESS):I.FAILURE},"Find Nearby Enemies",e+1),a=new _n([new me([new ie((l,c,f)=>{const h=f.get(od);if(!h||h.length===0)return!1;const p=Is(l.id,c.gameState),m=wl(p),S=wl(h);return m>S*RT},"Is Strong Enough?",e+3),new ue((l,c)=>(l.isCallingToAttack=!0,l.callToAttackEndTime=c.gameState.time+no,ke(c.gameState,ce.CallToAttack,l.position,no),Ue(c,Re.CallToAttack,l.position),l.activeAction="idle",l.target=void 0,I.SUCCESS),"Issue Call to Attack",e+3)],"Attack",e+2),new ue((l,c,f)=>{const h=f.get(od);if(!h||h.length===0)return I.FAILURE;const p=h.map(P=>P.position),m=sf(p),S=We(m,l.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height),y=qe(S),w=bn(l.position,Nt(y,_0*2));return l.activeAction="moving",l.target={x:(w.x%c.gameState.mapDimensions.width+c.gameState.mapDimensions.width)%c.gameState.mapDimensions.width,y:(w.y%c.gameState.mapDimensions.height+c.gameState.mapDimensions.height)%c.gameState.mapDimensions.height},l.direction=y,I.SUCCESS},"Retreat",e+2)],"Attack or Retreat",e+2);return new me([n,r,o,new gr(PT,a,"Leader Combat Cooldown",e+1)],"Leader Combat Strategy",e)}const sd="combatTarget",ad="homeCenter";function e_(e){const n=new ie(c=>c.isAdult&&c.leaderId?c.id!==c.leaderId:!1,"Is Tribe Follower?",e+1),r=new ie(c=>c.hunger<nT&&c.hitpoints>=c.maxHitpoints*E0,"Is Fit for Combat?",e+1),o=new ie((c,f)=>{const h=f.gameState.entities.entities.get(c.leaderId);return!!(h!=null&&h.isCallingToAttack)},"Is Leader Calling to Attack?",e+1),a=new ue((c,f,h)=>{const{gameState:p}=f,m=p.entities.entities.get(c.leaderId);if(!m)return I.FAILURE;const S=cf(m,p,uT);if(S.length===0)return I.FAILURE;S.sort((y,w)=>{const P=j(c.position,y.position,p.mapDimensions.width,p.mapDimensions.height),T=j(c.position,w.position,p.mapDimensions.width,p.mapDimensions.height);return P-T});for(const y of S)if(Fw(m.id,y.id,p)<cT){h.set(sd,y);const P=ws(m.id,p);return h.set(ad,P),I.SUCCESS}return I.FAILURE},"Find Best Target",e+1),l=new ue((c,f,h)=>{const p=h.get(sd),m=h.get(ad);if(!p||!m)return I.FAILURE;const{gameState:S}=f;return j(c.position,m,S.mapDimensions.width,S.mapDimensions.height)>T0?(c.activeAction==="attacking"&&c.attackTargetId===p.id&&(c.activeAction="idle",c.attackTargetId=void 0),h.set(sd,void 0),h.set(ad,void 0),I.FAILURE):((!c.lastTargetAcquiredEffectTime||f.gameState.time-c.lastTargetAcquiredEffectTime>be*5)&&(ke(f.gameState,ce.TargetAcquired,c.position,be,c.id),c.lastTargetAcquiredEffectTime=f.gameState.time),c.activeAction="attacking",c.attackTargetId=p.id,c.target=void 0,I.RUNNING)},"Attack Target",e+1);return new me([n,r,o,a,l],"Tribe Member Combat",e)}function t_(e){const n=new ie((m,S)=>{if(!m.isAdult||m.gender!=="male")return!1;const y=m.partnerIds&&m.partnerIds.length>0,w=Tt(S.gameState,m).length>0;return y||w},"Is Adult Male With Family?",e+1),r=new ie((m,S)=>{var T;const y=It(S.gameState);if(y){const C=oi(Tt(S.gameState,y));if((C==null?void 0:C.id)===m.id)return!1}if(!m.fatherId)return!1;const w=S.gameState.entities.entities.get(m.fatherId);return!w||((T=oi(Tt(S.gameState,w)))==null?void 0:T.id)===m.id?!1:j(m.position,w.position,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height)<hT},"Is Too Close To Father?",e+1),o=new ie((m,S,y)=>y.get("territoryMoveTarget")!==void 0,"Is Moving To Territory?",e+3),a=new ue((m,S,y)=>{const w=y.get("territoryMoveTarget"),P=y.get("territoryMoveStartTime");if(!w||!P)return[I.FAILURE,"Missing move data"];if(S.gameState.time-P>dT)return y.delete("territoryMoveTarget"),y.delete("territoryMoveStartTime"),[I.FAILURE,"Territory move timed out"];if(j(m.position,w,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height)<Gi)return y.delete("territoryMoveTarget"),y.delete("territoryMoveStartTime"),[I.SUCCESS,"Arrived at new territory"];m.activeAction="moving",m.target=w;const F=We(m.position,m.target,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height);return m.direction=qe(F),[I.RUNNING,"Continuing move to territory"]},"Check Timeout & Arrival",e+3),l=new me([o,a],"Handle In-Progress Move",e+2),c=new ie((m,S,y)=>y.get("territoryMoveTarget")===void 0,"Should Start New Move?",e+4),f=new ue((m,S,y)=>{const w=lf(m.position,S.gameState.mapDimensions.width/4,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height);y.set("territoryMoveTarget",w),y.set("territoryMoveStartTime",S.gameState.time),m.activeAction="moving",m.target=w;const P=We(m.position,m.target,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height);return m.direction=qe(P),[I.RUNNING,"Started moving to new territory"]},"Start New Territory Move",e+4),h=new me([c,f],"Start New Territory Move Action",e+3),p=new _n([l,new gr(pT,h,"Establish Territory Cooldown",e+2)],"Establish or Continue Move",e+1);return new me([n,r,p],"Establish Family Territory",e)}function n_(e){return new me([new ue((n,r,o)=>{const a=Cw(n,r.gameState);return a?(o.set("patriarchTarget",a),[I.SUCCESS,`Found patriarch: ${a.id}`]):(o.delete("patriarchTarget"),[I.FAILURE,"No patriarch found"])},"Find Patriarch",e+1),new ue((n,r,o)=>{const a=o.get("patriarchTarget");if(!a)return[I.FAILURE,"Patriarch target missing from blackboard"];const l=j(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(l>A0){n.activeAction="moving",n.target=a.id;const c=We(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(c),[I.RUNNING,`Moving to patriarch at ${l.toFixed(0)}`]}return n.activeAction="idle",n.target=void 0,n.direction={x:0,y:0},[I.SUCCESS,`Arrived at patriarch at ${l.toFixed(0)}`]},"Move Towards Patriarch",e+1)],"Follow Patriarch",e)}const ld="tribeSplitMigrationTarget";function i_(e){const n=new me([new ie((r,o)=>{const{canSplit:a,progress:l}=hf(r,o.gameState);return a?[!0,`Progress: ${(l??0)*100}%`]:[!1,"Cannot split"]},"Can Split Tribe?",e+2),new ue((r,o,a)=>{const{gameState:l}=o;let c=a.get(ld);if(!c){if(!r.leaderId)return I.FAILURE;const h=ws(r.leaderId,l),p=qw(h,r,l);if(p)a.set(ld,p),c=p;else return I.FAILURE}return j(r.position,c,l.mapDimensions.width,l.mapDimensions.height)<Gi?(a.delete(ld),r.activeAction="idle",r.target=void 0,I.SUCCESS):(r.activeAction="moving",r.target=c,I.RUNNING)},"Move to New Territory",e+2),new ue((r,o)=>(gf(r,o.gameState),I.SUCCESS),"Perform Tribe Split",e+2)],"Tribe Split Action",e+1);return new gr(yT,n,"Tribe Split Cooldown",e)}const el="jealousyAttackTarget";function r_(e){return new me([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const a=Dw(n,r.gameState,NT);return a?(o.set(el,a),[!0,`Partner cheating with ${a.id}`]):(o.delete(el),!1)},"Check for Infidelity",e+1),new ue((n,r,o)=>{const a=o.get(el);return!a||a.hitpoints<=0?(o.delete(el),[I.FAILURE,"Target is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?I.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[I.RUNNING,`Attacking ${a.id}`])},"Execute Jealousy Attack",e+1)],"Jealousy Attack",e)}const tl="defendAggressor";function o_(e){return new me([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const a=Ow(n,r.gameState,DT);return a?(o.set(tl,a),[!0,`Family member ${a.familyMember.id} attacked by ${a.aggressor.id}`]):(o.delete(tl),!1)},"Check Family Under Attack",e+1),new ue((n,r,o)=>{const a=o.get(tl);return!a||a.hitpoints<=0?(o.delete(tl),[I.FAILURE,"Target invalid/dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?I.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[I.RUNNING,`Attacking aggressor ${a.id}`])},"Execute Family Defense Attack",e+1)],"Defend Family",e)}const nl="bushIntruder";function s_(e){return new me([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const a=kw(n,r.gameState,kT);return a?(o.set(nl,a),[!0,`Intruder ${a.id} stealing berries`]):(o.delete(nl),!1)},"Check For Intruders on Bushes",e+1),new ue((n,r,o)=>{const a=o.get(nl);return!a||a.hitpoints<=0?(o.delete(nl),[I.FAILURE,"Intruder is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?I.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[I.RUNNING,`Attacking intruder ${a.id}`])},"Execute Bush Defense Attack",e+1)],"Defend Claimed Bush",e)}const il="desperateAttackTarget";function a_(e){return new me([new ie(n=>n.hunger>OT,"Is Starving",e+1),new ie((n,r)=>{if(!n.isAdult)return[!1,"Not an adult"];const o=Me(n,r.gameState,"berryBush",mt,l=>l.food.length>0),a=Me(n,r.gameState,"corpse",mt,l=>l.food.length>0);return!o&&!a},"No Other Food Available",e+1),new ie((n,r,o)=>{const a=Mw(n,r.gameState);return a?(o.set(il,a),[!0,`Found weak target ${a.id}`]):(o.delete(il),!1)},"Find Weak Target",e+1),new ue((n,r,o)=>{const a=o.get(il);return!a||a.hitpoints<=0?(o.delete(il),[I.FAILURE,"Target is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?I.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[I.RUNNING,`Desperately attacking ${a.id}`])},"Execute Desperate Attack",e+1)],"Desperate Attack",e)}function l_(e,n,r,o){const a=e.entities.entities.get(r.targetEntityId);return!a||!("hitpoints"in a)||a.hitpoints<=0?(e.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):j(n.position,a.position,e.mapDimensions.width,e.mapDimensions.height)<=pl?(n.activeAction="attacking",n.attackTargetId=a.id,e.autopilotControls.activeAutopilotAction=void 0,I.SUCCESS):(n.activeAction="moving",n.target=a.id,n.direction=Vt(n.position,a.position,e.mapDimensions),I.RUNNING)}function u_(e){return new me([new ie((n,r)=>n.isPlayer===!0&&!!r.gameState.autopilotControls.activeAutopilotAction,"Has Player Command",e+1),new ue((n,r)=>{const{gameState:o}=r,a=o.autopilotControls.activeAutopilotAction;if(!a)return I.FAILURE;switch(a.action){case Ee.AutopilotMove:{const l=a.position;return j(n.position,l,o.mapDimensions.width,o.mapDimensions.height)<HT?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction==="moving"&&(n.activeAction="idle",n.target=void 0),I.SUCCESS):(n.activeAction="moving",n.target=l,n.direction=Vt(n.position,l,o.mapDimensions),I.RUNNING)}case Ee.AutopilotGather:{const l=o.entities.entities.get(a.targetEntityId);return!l||l.food.length===0?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):j(n.position,l.position,o.mapDimensions.width,o.mapDimensions.height)>Gi?(n.activeAction="moving",n.target=l.id,n.direction=Vt(n.position,l.position,o.mapDimensions),I.RUNNING):(n.activeAction="gathering",n.target=l.id,o.autopilotControls.activeAutopilotAction=void 0,I.SUCCESS)}case Ee.AutopilotAttack:return l_(o,n,a);case Ee.AutopilotProcreate:{const l=o.entities.entities.get(a.targetEntityId);return!l||l.type!=="human"||!hr(n,l,r.gameState)?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):j(n.position,l.position,o.mapDimensions.width,o.mapDimensions.height)<=pl?(n.activeAction="procreating",o.autopilotControls.activeAutopilotAction=void 0,I.SUCCESS):(n.activeAction="moving",n.target=l.id,n.direction=Vt(n.position,l.position,o.mapDimensions),I.RUNNING)}case Ee.AutopilotPlant:{if(n.activeAction==="planting")return I.RUNNING;const l=a.position;return lo(l,o,Bl,n.id)?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):j(n.position,l,o.mapDimensions.width,o.mapDimensions.height)<=pl?(n.activeAction="planting",n.target=l,o.autopilotControls.activeAutopilotAction=void 0,o.hasPlayerPlantedBush=!0,I.RUNNING):(n.activeAction="moving",n.target=l,n.direction=Vt(n.position,l,o.mapDimensions),I.RUNNING)}case Ee.AutopilotFeedChild:{const l=o.entities.entities.get(a.targetEntityId);return!l||l.type!=="human"||l.isAdult||n.food.length===0?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):j(n.position,l.position,o.mapDimensions.width,o.mapDimensions.height)<=pl?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction="feeding",I.SUCCESS):(n.activeAction="moving",n.target=l.id,n.direction=Vt(n.position,l.position,o.mapDimensions),I.RUNNING)}case Ee.AutopilotFollowMe:{const l=o.entities.entities.get(a.targetEntityId);return!l||l.type!=="human"||l.id!==l.leaderId?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):j(n.position,l.position,o.mapDimensions.width,o.mapDimensions.height)<=A0?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction==="moving"&&(n.activeAction="idle"),I.SUCCESS):(n.activeAction="moving",n.target=l.id,n.direction=Vt(n.position,l.position,o.mapDimensions),I.RUNNING)}default:return o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE}},"Execute Player Command",e+1)],"Player Command Handler",e)}function c_(e){return new me([new ie(n=>!!n.leaderId&&n.leaderId!==n.id,"Is Follower",e+1),new ie((n,r)=>{if(!n.leaderId)return!1;const o=r.gameState.entities.entities.get(n.leaderId);return!!o&&o.isCallingToFollow===!0},"Is Leader Calling To Follow",e+1),new ie(n=>n.hunger<rT,"Is Not Critically Hungry",e+1),new ue((n,r)=>{if(!n.leaderId)return I.FAILURE;const o=r.gameState.entities.entities.get(n.leaderId);return o?j(n.position,o.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>iT?(n.activeAction="moving",n.target=o.id,n.direction=Vt(n.position,o.position,r.gameState.mapDimensions),I.RUNNING):(n.activeAction==="moving"&&n.target===o.id&&(n.activeAction="idle",n.target=void 0),I.SUCCESS):I.FAILURE},"Execute Follow Leader",e+1)],"Follow Leader Command",e)}const vm="tribeMigrationCheckCooldown";function d_(e){const n=new me([new ie(o=>!!o.leaderId&&o.leaderId===o.id,"Is Tribe Leader",e+2),new ie((o,a)=>{var c;const l=(c=o.aiBlackboard)==null?void 0:c.get(vm);return l?a.gameState.time-l>=zp:!0},"Is Migration Check Cooldown Over",e+2),new ue((o,a)=>{var c;(c=o.aiBlackboard)==null||c.set(vm,a.gameState.time);const l=Lw(o,a.gameState);return l?(o.isCallingToFollow=!0,o.callToFollowEndTime=a.gameState.time+Ts,o.target=l,o.activeAction="moving",I.SUCCESS):I.FAILURE},"Execute Tribe Migration",e+2)],"Tribe Migration Strategy",e+1),r=new Cl(n,_d,"Cache Tribe Migration",e+1);return new gr(zp,r,"Tribe Migration Cooldown",e)}function f_(e){const n=new ie(o=>o.id===o.leaderId,"Is Leader?",e+1),r=new ue((o,a)=>{var p,m,S;const{gameState:l}=a,c=Is(o.id,l),f=wl(c),h=V0(l).filter(y=>y.leaderId!==o.id);for(const y of h){const w=Is(y.leaderId,l),P=wl(w),T=((p=o.diplomacy)==null?void 0:p.get(y.leaderId))||Ht.Friendly;f>P*CT?T!==Ht.Hostile&&((m=o.diplomacy)==null||m.set(y.leaderId,Ht.Hostile)):T!==Ht.Friendly&&((S=o.diplomacy)==null||S.set(y.leaderId,Ht.Friendly))}return I.SUCCESS},"Evaluate Diplomacy",e+2);return new me([n,new gr(AT,r,"Diplomacy Cooldown",e+1)],"Manage Diplomacy",e)}const rl="huntTarget",ud=120;function h_(e){return new me([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];if(n.hunger<60)return[!1,"Not hungry enough to hunt"];if(n.food.length>=n.maxFood-2)return[!1,"Already carrying enough food"];const{gameState:a}=r;if(n.activeAction==="attacking"&&n.attackTargetId){const c=a.entities.entities.get(n.attackTargetId);if(c&&c.type==="prey"&&c.hitpoints>0&&j(n.position,c.position,a.mapDimensions.width,a.mapDimensions.height)<=ud)return o.set(rl,c),[!0,"Continuing hunt"]}const l=Me(n,a,"prey",ud,c=>c.hitpoints>0&&(c.isAdult||!1));return l?(o.set(rl,l),[!0,"Found prey to hunt"]):(o.set(rl,void 0),[!1,"No prey in range"])},"Should Hunt Prey",e+1),new ue((n,r,o)=>{const a=o.get(rl);if(!a)return I.FAILURE;const{gameState:l}=r,c=j(n.position,a.position,l.mapDimensions.width,l.mapDimensions.height);return a.hitpoints<=0?(n.activeAction="idle",n.attackTargetId=void 0,I.SUCCESS):c>ud?I.FAILURE:(n.activeAction="attacking",n.attackTargetId=a.id,n.stateMachine=[zn,{enteredAt:r.gameState.time}],I.RUNNING)},"Hunt Prey",e+1)],"Human Hunt Prey",e)}const ol="defendTarget",cd=150;function g_(e){return new me([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult - children flee instead"];const{gameState:a}=r;if(n.activeAction==="attacking"&&n.attackTargetId){const c=a.entities.entities.get(n.attackTargetId);if(c&&c.type==="predator"&&c.hitpoints>0&&j(n.position,c.position,a.mapDimensions.width,a.mapDimensions.height)<=cd)return o.set(ol,c),[!0,"Continuing defense"]}const l=Me(n,a,"predator",cd,c=>c.hitpoints>0&&(c.isAdult||!1));if(l){const c=j(n.position,l.position,a.mapDimensions.width,a.mapDimensions.height),f=l.attackTargetId===n.id,h=c<80;if(f||h)return o.set(ol,l),[!0,"Predator threat detected"]}return o.set(ol,void 0),[!1,"No predator threat"]},"Detect Predator Threat",e+1),new ue((n,r,o)=>{const a=o.get(ol);if(!a)return I.FAILURE;const{gameState:l}=r,c=j(n.position,a.position,l.mapDimensions.width,l.mapDimensions.height);return a.hitpoints<=0||c>cd*1.5?(n.activeAction="idle",n.attackTargetId=void 0,I.SUCCESS):(n.activeAction="attacking",n.attackTargetId=a.id,n.stateMachine=[zn,{enteredAt:r.gameState.time}],I.RUNNING)},"Defend Against Predator",e+1)],"Human Defend Against Predator",e)}function p_(e){return new me([new ie((n,r,o)=>{const a=Me(n,r.gameState,"predator",Bt*2,()=>!0),l=Me(n,r.gameState,"human",Bt*2,()=>!0);let c=null,f=1/0;if(a){const h=j(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);h<f&&(f=h,c=a)}if(l){const h=j(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);h<f&&(f=h,c=l)}return c&&f<Bt*1.5?(o.set("fleeThreat",c),o.set("fleeDistance",f),!0):!1},"Detect Threat",e+1),new ue((n,r,o)=>{const a=o.get("fleeThreat");if(!a)return I.FAILURE;n.activeAction="moving";const l=We(a.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),c=qe(l),f=bn(n.position,Nt(c,nw));return n.target={x:(f.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(f.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},n.direction=c,n.fleeCooldown=r.gameState.time+2,I.RUNNING},"Execute Flee",e+1)],"Prey Flee",e)}function m_(e){return new me([new ie((n,r,o)=>{if(n.hunger<=30||n.eatingCooldownTime&&n.eatingCooldownTime>r.gameState.time)return!1;const a=Me(n,r.gameState,"berryBush",Bt*10,l=>l.food.length>0);return a?j(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=Bt?(o.set("grazingTarget",a),!0):(o.set("grazingTarget",a),o.set("needToMoveToTarget",!0),!0):!1},"Find Berry Bush",e+1),new ue((n,r,o)=>{const a=o.get("grazingTarget"),l=o.get("needToMoveToTarget");if(!a)return I.FAILURE;const c=j(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Bt)return n.activeAction="grazing",n.target=a.id,n.direction={x:0,y:0},o.delete("needToMoveToTarget"),I.RUNNING;if(l||c>Bt){n.activeAction="moving",n.target=a.id;const f=Vt(n.position,a.position,r.gameState.mapDimensions);return n.direction=f,I.RUNNING}return I.FAILURE},"Move to Bush or Graze",e+1)],"Prey Graze",e)}function v_(e){const n=new ie((l,c,f)=>{const h=Me(l,c.gameState,"prey",Bt,p=>p.id!==l.id&&p.gender!==l.gender&&!!p.isAdult&&p.age>=ds&&p.age<=Qc&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return h?(f.set("procreationPartner",h),!0):!1},"Find Immediate Partner",e+2),r=new ue((l,c,f)=>{const h=f.get("procreationPartner");return h?(l.activeAction="procreating",l.target=h.id,l.direction={x:0,y:0},f.delete("procreationPartner"),I.SUCCESS):I.FAILURE},"Start Procreating",e+2),o=new ie((l,c,f)=>{const h=Me(l,c.gameState,"prey",Bt*10,p=>p.id!==l.id&&p.gender!==l.gender&&!!p.isAdult&&p.age>=ds&&p.age<=Qc&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return h?(f.set("procreationPartner",h),!0):!1},"Locate Distant Partner",e+2),a=new ue((l,c,f)=>{const h=f.get("procreationPartner");if(!h)return I.FAILURE;if(j(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<=Bt)return I.SUCCESS;l.activeAction="moving",l.target=h.id;const m=We(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height);return l.direction=qe(m),I.RUNNING},"Move Towards Partner",e+2);return new me([new ie(l=>!!(l.isAdult&&!l.isPregnant&&l.age>=ds&&l.age<=Qc&&l.hunger<200&&(!l.procreationCooldown||l.procreationCooldown<=0)),"Is Fertile and Ready",e+1),new _n([new me([n,r],"Procreate With Immediate Partner",e+2),new me([o,a],"Seek Distant Partner",e+2)],"Find Partner And Procreate",e+1)],"Prey Procreate",e)}const S_=(e,n,r)=>{const o=n.gameState.search.prey.byProperty("motherId",e.id).filter(c=>!c.isAdult&&c.type==="prey");if(o.length===0)return I.FAILURE;let a=null,l=bl;for(const c of o)c.hunger>=l&&(l=c.hunger,a=c);return a?(r.set("targetChild",a),I.SUCCESS):I.FAILURE},y_=(e,n,r)=>{const o=r.get("targetChild");return o?j(e.position,o.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>fo?(e.activeAction="moving",e.target=o.id,e.direction=Vt(e.position,o.position,n.gameState.mapDimensions),I.RUNNING):(e.activeAction="feeding",e.target=void 0,r.set("targetChild",void 0),I.SUCCESS):I.FAILURE};function A_(e){return new me([new ie(n=>(n.isAdult&&n.gender==="female"&&n.hunger<80&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child (Female Only)",e+1),new ue(S_,"Find Hungriest Prey Child",e+1),new ue(y_,"Move To Child and Feed",e+1)],"Feed Prey Child",e)}function T_(e){return new me([new ie(n=>!n.isAdult&&n.hunger>=bl,"Is Hungry Prey Child",e+1),new ue((n,r,o)=>{if(!n.motherId)return I.FAILURE;const a=r.gameState.entities.entities.get(n.motherId);return a?(o.set("targetParent",a),I.SUCCESS):I.FAILURE},"Find Female Parent",e+1),new ue((n,r,o)=>{const a=o.get("targetParent");if(!a)return I.FAILURE;const l=j(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",l<=fo?(n.target=void 0,I.SUCCESS):(n.target=a.id,n.activeAction="moving",I.RUNNING)},"Move To Female Parent",e+1)],"Seek Food From Female Parent",e)}function I_(e){return new me([new ie((n,r,o)=>{if(n.hunger<=50||n.huntCooldown&&n.huntCooldown>0)return!1;const a=Me(n,r.gameState,"prey",Wr*10,l=>l.hitpoints>0);if(a){const l=j(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(l<=Wr)return o.set("huntTarget",a),!0;if(l<=Wr*10)return o.set("huntTarget",a),o.set("needToApproach",!0),!0}return!1},"Find Prey Target",e+1),new ue((n,r,o)=>{const a=o.get("huntTarget"),l=o.get("needToApproach");if(!a||a.hitpoints<=0)return I.FAILURE;const c=j(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Wr)return n.activeAction="attacking",n.attackTargetId=a.id,n.target=a.id,n.direction={x:0,y:0},o.delete("needToApproach"),I.RUNNING;if(l||c>Wr){n.activeAction="moving",n.target=a.id;const f=We(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(f),I.RUNNING}return I.FAILURE},"Hunt or Approach Prey",e+1)],"Predator Hunt",e)}function w_(e){return new me([new ie((n,r,o)=>{const a=n.hunger>100,l=n.hitpoints<n.maxHitpoints*.5;if(!a&&!l||n.attackCooldown&&n.attackCooldown>0)return!1;const c=Me(n,r.gameState,"human",Gn*2,f=>f.hitpoints>0);if(c){const f=j(n.position,c.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(f<=Gn)return o.set("attackTarget",c),!0;if(a&&f<=Gn*2)return o.set("attackTarget",c),o.set("needToApproach",!0),!0}return!1},"Find Human Target",e+1),new ue((n,r,o)=>{const a=o.get("attackTarget"),l=o.get("needToApproach");if(!a||a.hitpoints<=0)return I.FAILURE;const c=j(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Gn)return n.activeAction="attacking",n.attackTargetId=a.id,n.target=a.id,n.direction={x:0,y:0},o.delete("needToApproach"),I.RUNNING;if(l||c>Gn){n.activeAction="moving",n.target=a.id;const f=We(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(f),I.RUNNING}return I.FAILURE},"Attack or Approach Human",e+1)],"Predator Attack Human",e)}function E_(e){const n=new ie((l,c,f)=>{const h=Me(l,c.gameState,"predator",Hi,p=>p.id!==l.id&&p.gender!==l.gender&&!!p.isAdult&&p.age>=fs&&p.age<=Zc&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return h?(f.set("procreationPartner",h),!0):!1},"Find Immediate Partner",e+2),r=new ue((l,c,f)=>{const h=f.get("procreationPartner");return h?(l.activeAction="procreating",l.target=h.id,l.direction={x:0,y:0},f.delete("procreationPartner"),I.SUCCESS):I.FAILURE},"Start Procreating",e+2),o=new ie((l,c,f)=>{const h=Me(l,c.gameState,"predator",Hi*10,p=>p.id!==l.id&&p.gender!==l.gender&&!!p.isAdult&&p.age>=fs&&p.age<=Zc&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return h?(f.set("procreationPartner",h),!0):!1},"Locate Distant Partner",e+2),a=new ue((l,c,f)=>{const h=f.get("procreationPartner");if(!h)return I.FAILURE;if(j(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<=Hi)return I.SUCCESS;l.activeAction="moving",l.target=h.id;const m=We(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height);return l.direction=qe(m),I.RUNNING},"Move Towards Partner",e+2);return new me([new ie(l=>!!(l.isAdult&&!l.isPregnant&&l.age>=fs&&l.age<=Zc&&l.hunger<200&&(!l.procreationCooldown||l.procreationCooldown<=0)),"Is Fertile and Ready",e+1),new _n([new me([n,r],"Procreate With Immediate Partner",e+2),new me([o,a],"Seek Distant Partner",e+2)],"Find Partner And Procreate",e+1)],"Predator Procreate",e)}const __=(e,n,r)=>{const o=n.gameState.search.predator.byProperty("motherId",e.id).filter(c=>!c.isAdult&&c.type==="predator");if(o.length===0)return I.FAILURE;let a=null,l=bl;for(const c of o)c.hunger>=l&&(l=c.hunger,a=c);return a?(r.set("targetChild",a),I.SUCCESS):I.FAILURE},C_=(e,n,r)=>{const o=r.get("targetChild");return o?j(e.position,o.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>fo?(e.activeAction="moving",e.target=o.id,e.direction=Vt(e.position,o.position,n.gameState.mapDimensions),I.RUNNING):(e.activeAction="feeding",e.target=void 0,r.set("targetChild",void 0),I.SUCCESS):I.FAILURE};function R_(e){return new me([new ie(n=>(n.isAdult&&n.gender==="female"&&n.hunger<90&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child (Female Only)",e+1),new ue(__,"Find Hungriest Predator Child",e+1),new ue(C_,"Move To Child and Feed",e+1)],"Feed Predator Child",e)}function P_(e){return new me([new ie(n=>!n.isAdult&&n.hunger>=bl,"Is Hungry Predator Child",e+1),new ue((n,r,o)=>{if(!n.motherId)return I.FAILURE;const a=r.gameState.entities.entities.get(n.motherId);return a?(o.set("targetParent",a),I.SUCCESS):I.FAILURE},"Find Female Parent",e+1),new ue((n,r,o)=>{const a=o.get("targetParent");if(!a)return I.FAILURE;const l=j(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",l<=fo?(n.target=void 0,I.SUCCESS):(n.target=a.id,n.activeAction="moving",I.RUNNING)},"Move To Female Parent",e+1)],"Seek Food From Female Parent",e)}function J0(e){return new ue((n,r,o)=>{n.activeAction="idle";let a=o.get("wanderTarget"),l=o.get("wanderStartTime");const c=r.gameState.time;if(!a||!l||c-l>2){const f=Math.random()*2*Math.PI,h=50+Math.random()*100,p={x:Math.cos(f),y:Math.sin(f)},m=bn(n.position,Nt(p,h));a={x:(m.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(m.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},o.set("wanderTarget",a),o.set("wanderStartTime",c)}if(a){n.target=a;let f=a.x-n.position.x,h=a.y-n.position.y;const p=r.gameState.mapDimensions.width,m=r.gameState.mapDimensions.height;Math.abs(f)>p/2&&(f=f>0?f-p:f+p),Math.abs(h)>m/2&&(h=h>0?h-m:h+m);const S=qe({x:f,y:h});n.direction=S}return I.SUCCESS},"Animal Wander",e)}function N_(e){return new me([new ie((n,r,o)=>{if(n.hunger>90||n.hitpoints<n.maxHitpoints*.3||n.activeAction==="grazing"||n.activeAction==="procreating")return!1;const a=r.gameState.entities.entities.values(),l=[];for(const c of a)if(c.type==="prey"&&c.id!==n.id){const f=c;f.hitpoints>0&&f.isAdult&&j(n.position,f.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=Bt*5&&l.push(f)}if(l.length>=2){let c=0,f=0;for(const m of l)c+=m.position.x,f+=m.position.y;c/=l.length,f/=l.length;const h={x:c,y:f};if(j(n.position,h,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Bt*2)return o.set("herdCenter",h),o.set("herdSize",l.length),!0}return!1},"Find Herd",e+1),new ue((n,r,o)=>{const a=o.get("herdCenter");if(!a)return I.FAILURE;if(j(n.position,a,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Bt*2){n.activeAction="moving",n.target=a;const c=We(n.position,a,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(c),I.RUNNING}else return n.activeAction="idle",n.direction={x:0,y:0},I.SUCCESS},"Join Herd",e+1)],"Prey Herd Behavior",e)}function D_(e){return new me([new ie((n,r,o)=>{if(n.hunger>100||n.hitpoints<n.maxHitpoints*.4||n.activeAction==="attacking"||n.activeAction==="procreating")return!1;const a=Me(n,r.gameState,"predator",Hi*4,l=>l.id!==n.id&&l.hitpoints>0&&l.isAdult&&n.fatherId!==void 0&&l.fatherId===n.fatherId&&l.age>=n.age||l.hitpoints>n.hitpoints);return a&&j(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Hi*2?(o.set("packLeader",a),!0):!1},"Find Pack Leader",e+1),new ue((n,r,o)=>{const a=o.get("packLeader");if(!a||a.hitpoints<=0)return I.FAILURE;if(j(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Hi*2){n.activeAction="moving",n.target=a.id;const c=We(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(c),I.RUNNING}else return n.activeAction="idle",n.direction={x:0,y:0},I.SUCCESS},"Follow Pack Leader",e+1)],"Predator Pack Behavior",e)}function k_(e){return new me([new ie((n,r,o)=>{if(!n.isAdult||n.hitpoints<n.maxHitpoints*.6||n.hunger>120||n.attackCooldown&&n.attackCooldown>0)return!1;const a=Me(n,r.gameState,"predator",om,l=>!!(l.id!==n.id&&l.hitpoints>0&&l.isAdult&&n.fatherId!==l.fatherId&&n.fatherId!==void 0&&l.fatherId!==void 0));if(a){const l=j(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(l<=Gn)return o.set("territorialTarget",a),!0;if(l<=om)return o.set("territorialTarget",a),o.set("needToApproach",!0),!0}return!1},"Find Territorial Rival",e+1),new ue((n,r,o)=>{const a=o.get("territorialTarget"),l=o.get("needToApproach");if(!a||a.hitpoints<=0)return I.FAILURE;const c=j(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Gn)return n.activeAction="attacking",n.attackTargetId=a.id,n.target=a.id,n.direction={x:0,y:0},o.delete("needToApproach"),I.RUNNING;if(l||c>Gn){n.activeAction="moving",n.target=a.id;const f=We(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(f),I.RUNNING}return I.FAILURE},"Territorial Fight or Approach",e+1)],"Predator Territorial Defense",e)}function O_(){const e=new _n([WE(2),o_(2),g_(2),r_(2),s_(2),a_(2),u_(2),new ns(JE(3),"Gated Leader Combat Strategy",2),new ns(f_(3),"Gated Diplomacy",2),e_(2),new ir(VE(3),"attack","Gated Attacking",2),zE(2),new ir(h_(3),"attack","Gated Hunt Prey",2),new pm(new ir($E(4),"gathering","Gated Gathering",3),Gp,"Timeout Gathering",2),new ir(QE(3),"feedChildren","Gated Feed Child",2),ZE(2),new pm(new ir(qE(4),"planting","Gated Planting",3),Gp,"Timeout Planting",2),new ir(jE(3),"procreation","Gated Procreation",2),new Cl(i_(3),_d,"Cache Tribe Split",2),new ns(d_(3),"Gated Tribe Migration",2),new Cl(t_(3),_d,"Cache Establish Territory",2),new ir(c_(3),"followLeader","Gated Follow Leader",2),new ns(n_(2),"Gated Follow Patriarch",2),new ns(YE(2),"Gated Idle Wander",2)],"AI Root Selector",1);return new bE(e,"Manual Control Gate",0)}function M_(){return new _n([p_(1),A_(1),T_(1),m_(1),v_(1),N_(1),J0(1)],"Prey Behavior Root",0)}function U_(){return new _n([I_(1),w_(1),R_(1),P_(1),k_(1),E_(1),D_(1),J0(1)],"Predator Behavior Root",0)}class vf{constructor(){Ce(this,"data",new Map);Ce(this,"nodeExecutionData",new Map)}set(n,r){this.data.set(n,r)}get(n){return this.data.get(n)}delete(n){this.data.delete(n)}has(n){return this.data.has(n)}recordNodeExecution(n,r,o,a,l){const c=this.nodeExecutionData.get(n)||{lastExecuted:0,status:I.FAILURE,depth:0,debugInfo:"",executionHistory:[]},f=c.executionHistory[c.executionHistory.length-1];f&&o-(f==null?void 0:f.time)>ii&&c.executionHistory.push({time:f.time+ii,status:I.NOT_EVALUATED}),c.executionHistory.push({time:o,status:r});const h=xl/pt*gt,p=o-h;c.executionHistory=c.executionHistory.filter(S=>S.time>=p);const m={...c,lastExecuted:o,status:r,depth:a,debugInfo:l};this.nodeExecutionData.set(n,m)}getNodeExecutionData(){return this.nodeExecutionData}cleanupOldEntries(n){const r=fT,o=[];for(const[a,l]of this.nodeExecutionData.entries())n-l.lastExecuted>r&&o.push(a);for(const a of o)this.nodeExecutionData.delete(a)}}function F_(e){e.gameState.entities.entities.forEach(r=>{BE(r,e)})}function ev(){return{entities:new Map,nextEntityId:1}}function Os(e,n,r){const o={id:e.nextEntityId++,type:n,velocity:{x:0,y:0},direction:{x:0,y:0},acceleration:0,forces:[],debuffs:[],...r};return e.entities.set(o.id,o),o}function $l(e,n,r){return Os(e,"berryBush",{position:n,radius:Ed,food:Array.from({length:IA},()=>({type:ri.Berry})).map(a=>({...a,id:e.nextEntityId++})),maxFood:TA,lifespan:EA,age:0,spreadChance:_A,spreadRadius:Ed,timeSinceLastBerryRegen:0,timeSinceLastSpreadAttempt:0,timeSinceLastHarvest:0,stateMachine:[cs,{enteredAt:r,previousState:void 0}]})}function Rl(e,n,r,o,a=!1,l=DA,c=h0,f,h,p=[],m,S){const y=l>=xd;return Os(e,"human",{position:n,radius:y?vt:co,hunger:c,hitpoints:Lp,maxHitpoints:Lp,age:l,gender:o,isPlayer:a,food:[],maxFood:f0,maxAge:ys,isAdult:y,isPregnant:!1,gestationTime:0,procreationCooldown:0,attackCooldown:0,motherId:f,fatherId:h,ancestorIds:p,stateMachine:[At,{enteredAt:r,previousState:void 0}],leaderId:m,tribeBadge:S,aiType:ks.BehaviorTreeBased,aiBehaviorTree:O_(),aiBlackboard:new vf})}function Sf(e,n,r,o,a,l,c,f,h,p,m){let S,y;switch(c){case"human":S=m0,y=fr;break;case"prey":S=2,y=120;break;case"predator":S=4,y=140;break}return Os(e,"corpse",{position:n,radius:a,gender:r,age:o,originalEntityId:l,originalEntityType:c,timeOfDeath:f,decayProgress:0,geneCode:m,food:[...Array.from({length:Math.max(S*Math.max(y-p,0)/y,1)},()=>({type:ri.Meat})),...h].map(P=>({...P,id:e.nextEntityId++})),stateMachine:void 0})}function L_(e,n,r,o,a,l,c,f,h){return Sf(e,n,r,o,a,l,"human",c,f,h)}function H_(e,n,r,o,a,l,c,f){return Sf(e,n,r,o,a,l,"prey",c,[],0,f)}function B_(e,n,r,o,a,l,c,f){return Sf(e,n,r,o,a,l,"predator",c,[],0,f)}function G_(e,n,r){const o=n?r.gameState.entities.entities.get(n):void 0,a=[...e.ancestorIds||[],e.id],l=o?[...o.ancestorIds||[],o.id]:[],c=[...a,...l],f=[...new Set(c)],h=f.slice(Math.max(f.length-CA,0)),p=Math.random()<.5?"male":"female",m=bn(e.position,{x:5,y:5}),S=Rl(r.gameState.entities,m,r.gameState.time,p,!1,0,h0/2,e.id,n,h,(o==null?void 0:o.leaderId)??e.leaderId,(o==null?void 0:o.tribeBadge)??e.tribeBadge);return Ue(r,Re.Birth,e.position),S}function Ms(e,n){return e.entities.get(n)?(e.entities.delete(n),!0):!1}function Rs(e,n,r,o=tw,a=H0,l,c,f){const h=o>=ds,p=Date.now();return Os(e,"prey",{position:n,radius:h?vt*.7:co*.7,hunger:a,hitpoints:nm,maxHitpoints:nm,age:o,maxAge:L0,gender:r,isAdult:h,isPregnant:!1,gestationTime:0,procreationCooldown:0,geneCode:l,motherId:c,fatherId:f,stateMachine:[In,{enteredAt:p,previousState:void 0}],aiType:ks.BehaviorTreeBased,aiBehaviorTree:M_(),aiBlackboard:new vf})}function Ps(e,n,r,o=dw,a=G0,l,c,f){const h=o>=fs,p=Date.now();return Os(e,"predator",{position:n,radius:h?vt*.9:co*.9,hunger:a,hitpoints:rm,maxHitpoints:rm,age:o,maxAge:B0,gender:r,isAdult:h,isPregnant:!1,gestationTime:0,procreationCooldown:0,geneCode:l,motherId:c,fatherId:f,stateMachine:[Ft,{enteredAt:p,previousState:void 0}],aiType:ks.BehaviorTreeBased,aiBehaviorTree:U_(),aiBlackboard:new vf})}class x_{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(n,r){let o=this.length++;for(;o>0;){const a=o-1>>1,l=this.values[a];if(r>=l)break;this.ids[o]=this.ids[a],this.values[o]=l,o=a}this.ids[o]=n,this.values[o]=r}pop(){if(this.length===0)return;const n=this.ids[0];if(this.length--,this.length>0){const r=this.ids[0]=this.ids[this.length],o=this.values[0]=this.values[this.length],a=this.length>>1;let l=0;for(;l<a;){let c=(l<<1)+1;const f=c+1;let h=this.ids[c],p=this.values[c];const m=this.values[f];if(f<this.length&&m<p&&(c=f,h=this.ids[f],p=m),p>=o)break;this.ids[l]=h,this.values[l]=p,l=c}this.ids[l]=r,this.values[l]=o}return n}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}const Sm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],dd=3;class yf{static from(n,r=0){if(r%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!n||n.byteLength===void 0||n.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[o,a]=new Uint8Array(n,r+0,2);if(o!==251)throw new Error("Data does not appear to be in a Flatbush format.");const l=a>>4;if(l!==dd)throw new Error(`Got v${l} data when expected v${dd}.`);const c=Sm[a&15];if(!c)throw new Error("Unrecognized array type.");const[f]=new Uint16Array(n,r+2,1),[h]=new Uint32Array(n,r+4,1);return new yf(h,f,c,void 0,n,r)}constructor(n,r=16,o=Float64Array,a=ArrayBuffer,l,c=0){if(n===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(n)||n<=0)throw new Error(`Unexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+r,2),65535),this.byteOffset=c;let f=n,h=f;this._levelBounds=[f*4];do f=Math.ceil(f/this.nodeSize),h+=f,this._levelBounds.push(h*4);while(f!==1);this.ArrayType=o,this.IndexArrayType=h<16384?Uint16Array:Uint32Array;const p=Sm.indexOf(this.ArrayType),m=h*4*this.ArrayType.BYTES_PER_ELEMENT;if(p<0)throw new Error(`Unexpected typed array class: ${o}.`);l&&l.byteLength!==void 0&&!l.buffer?(this.data=l,this._boxes=new this.ArrayType(this.data,c+8,h*4),this._indices=new this.IndexArrayType(this.data,c+8+m,h),this._pos=h*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1]):(this.data=new a(8+m+h*this.IndexArrayType.BYTES_PER_ELEMENT),this._boxes=new this.ArrayType(this.data,8,h*4),this._indices=new this.IndexArrayType(this.data,8+m,h),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(this.data,0,2).set([251,(dd<<4)+p]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=n),this._queue=new x_}add(n,r,o=n,a=r){const l=this._pos>>2,c=this._boxes;return this._indices[l]=l,c[this._pos++]=n,c[this._pos++]=r,c[this._pos++]=o,c[this._pos++]=a,n<this.minX&&(this.minX=n),r<this.minY&&(this.minY=r),o>this.maxX&&(this.maxX=o),a>this.maxY&&(this.maxY=a),l}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const n=this._boxes;if(this.numItems<=this.nodeSize){n[this._pos++]=this.minX,n[this._pos++]=this.minY,n[this._pos++]=this.maxX,n[this._pos++]=this.maxY;return}const r=this.maxX-this.minX||1,o=this.maxY-this.minY||1,a=new Uint32Array(this.numItems),l=65535;for(let c=0,f=0;c<this.numItems;c++){const h=n[f++],p=n[f++],m=n[f++],S=n[f++],y=Math.floor(l*((h+m)/2-this.minX)/r),w=Math.floor(l*((p+S)/2-this.minY)/o);a[c]=z_(y,w)}Dd(a,n,this._indices,0,this.numItems-1,this.nodeSize);for(let c=0,f=0;c<this._levelBounds.length-1;c++){const h=this._levelBounds[c];for(;f<h;){const p=f;let m=n[f++],S=n[f++],y=n[f++],w=n[f++];for(let P=1;P<this.nodeSize&&f<h;P++)m=Math.min(m,n[f++]),S=Math.min(S,n[f++]),y=Math.max(y,n[f++]),w=Math.max(w,n[f++]);this._indices[this._pos>>2]=p,n[this._pos++]=m,n[this._pos++]=S,n[this._pos++]=y,n[this._pos++]=w}}}search(n,r,o,a,l){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let c=this._boxes.length-4;const f=[],h=[];for(;c!==void 0;){const p=Math.min(c+this.nodeSize*4,Am(c,this._levelBounds));for(let m=c;m<p;m+=4){if(o<this._boxes[m]||a<this._boxes[m+1]||n>this._boxes[m+2]||r>this._boxes[m+3])continue;const S=this._indices[m>>2]|0;c>=this.numItems*4?f.push(S):(l===void 0||l(S))&&h.push(S)}c=f.pop()}return h}neighbors(n,r,o=1/0,a=1/0,l){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let c=this._boxes.length-4;const f=this._queue,h=[],p=a*a;e:for(;c!==void 0;){const m=Math.min(c+this.nodeSize*4,Am(c,this._levelBounds));for(let S=c;S<m;S+=4){const y=this._indices[S>>2]|0,w=ym(n,this._boxes[S],this._boxes[S+2]),P=ym(r,this._boxes[S+1],this._boxes[S+3]),T=w*w+P*P;T>p||(c>=this.numItems*4?f.push(y<<1,T):(l===void 0||l(y))&&f.push((y<<1)+1,T))}for(;f.length&&f.peek()&1;)if(f.peekValue()>p||(h.push(f.pop()>>1),h.length===o))break e;c=f.length?f.pop()>>1:void 0}return f.clear(),h}}function ym(e,n,r){return e<n?n-e:e<=r?0:e-r}function Am(e,n){let r=0,o=n.length-1;for(;r<o;){const a=r+o>>1;n[a]>e?o=a:r=a+1}return n[r]}function Dd(e,n,r,o,a,l){if(Math.floor(o/l)>=Math.floor(a/l))return;const c=e[o+a>>1];let f=o-1,h=a+1;for(;;){do f++;while(e[f]<c);do h--;while(e[h]>c);if(f>=h)break;b_(e,n,r,f,h)}Dd(e,n,r,o,h,l),Dd(e,n,r,h+1,a,l)}function b_(e,n,r,o,a){const l=e[o];e[o]=e[a],e[a]=l;const c=4*o,f=4*a,h=n[c],p=n[c+1],m=n[c+2],S=n[c+3];n[c]=n[f],n[c+1]=n[f+1],n[c+2]=n[f+2],n[c+3]=n[f+3],n[f]=h,n[f+1]=p,n[f+2]=m,n[f+3]=S;const y=r[o];r[o]=r[a],r[a]=y}function z_(e,n){let r=e^n,o=65535^r,a=65535^(e|n),l=e&(n^65535),c=r|o>>1,f=r>>1^r,h=a>>1^o&l>>1^a,p=r&a>>1^l>>1^l;r=c,o=f,a=h,l=p,c=r&r>>2^o&o>>2,f=r&o>>2^o&(r^o)>>2,h^=r&a>>2^o&l>>2,p^=o&a>>2^(r^o)&l>>2,r=c,o=f,a=h,l=p,c=r&r>>4^o&o>>4,f=r&o>>4^o&(r^o)>>4,h^=r&a>>4^o&l>>4,p^=o&a>>4^(r^o)&l>>4,r=c,o=f,a=h,l=p,h^=r&a>>8^o&l>>8,p^=o&a>>8^(r^o)&l>>8,r=h^h>>1,o=p^p>>1;let m=e^n,S=o|65535^(m|r);return m=(m|m<<8)&16711935,m=(m|m<<4)&252645135,m=(m|m<<2)&858993459,m=(m|m<<1)&1431655765,S=(S|S<<8)&16711935,S=(S|S<<4)&252645135,S=(S|S<<2)&858993459,S=(S|S<<1)&1431655765,(S<<1|m)>>>0}function rs(e,n){if(e.length===0)return{byRect:()=>[],byRadius:()=>[],byProperty:()=>[],resetPropertyCache:()=>{}};const r=new yf(e.length),o=new Map;for(const l of e)r.add(l.position.x,l.position.y,l.position.x,l.position.y);return r.finish(),{byRect(l){return r.search(l.left,l.top,l.right,l.bottom).map(f=>e[f])},byRadius(l,c){return r.neighbors(l.x,l.y,void 0,c).map(h=>e[h])},byProperty(l,c){var f;if(!o.has(l)){const h=new Map;for(const p of e){const m=p[l];h.has(m)||h.set(m,[]),h.get(m).push(p)}o.set(l,h)}return((f=o.get(l))==null?void 0:f.get(c))||[]},resetPropertyCache(){o.clear()}}}function Af(e){const n=Array.from(e.entities.entities.values()),r=n.filter(h=>h.type==="human"),o=n.filter(h=>h.type==="berryBush"),a=n.filter(h=>h.type==="corpse"),l=n.filter(h=>h.type==="prey"),c=n.filter(h=>h.type==="predator");return{...e,search:{human:rs(r),berryBush:rs(o),corpse:rs(a),prey:rs(l),predator:rs(c)}}}var Mt=(e=>(e.MOVE="MOVE",e.HUNGER="HUNGER",e.EAT="EAT",e.FIND_BUSH="FIND_BUSH",e.GATHER="GATHER",e.PROCREATE="PROCREATE",e.PLANT_BUSH="PLANT_BUSH",e.AUTOPILOT="AUTOPILOT",e.ANIMALS_INTRODUCTION="ANIMALS_INTRODUCTION",e.HUNT_PREY="HUNT_PREY",e.DEFEND_FROM_PREDATORS="DEFEND_FROM_PREDATORS",e))(Mt||{}),dr=(e=>(e.HUNGER_BAR="HUNGER_BAR",e.FOOD_BAR="FOOD_BAR",e.COMMAND_BUTTONS="COMMAND_BUTTONS",e))(dr||{}),Ut=(e=>(e[e.FADING_IN=0]="FADING_IN",e[e.ACTIVE=1]="ACTIVE",e[e.FADING_OUT=2]="FADING_OUT",e[e.INACTIVE=3]="INACTIVE",e))(Ut||{});const W_=[{key:Mt.MOVE,title:"Movement",text:"Use WASD or Arrow Keys to move your character around the world.",condition:e=>e.hasPlayerMovedEver||e.hasPlayerEnabledAutopilot>2,isCompleted:!1},{key:Mt.HUNGER,title:"Hunger",text:"Your character gets hungry over time. Watch the hunger bar!",condition:(e,n)=>n.hunger>RA,isCompleted:!1,minDisplayTime:qp,highlightedUIElements:[dr.HUNGER_BAR]},{key:Mt.FIND_BUSH,title:"Find Food",text:"Look for berry bushes. They are your primary source of food.",condition:(e,n)=>!!Me(n,e,"berryBush",mt*5,o=>o.food.length>0),getTargets:(e,n)=>{const r=[];for(const o of e.entities.entities.values())o.type==="berryBush"&&o.food.length>0&&j(n.position,o.position,e.mapDimensions.width,e.mapDimensions.height)<500&&r.push(o);return r.map(o=>o.id)},isCompleted:!1,minDisplayTime:qp},{key:Mt.GATHER,title:"Gather Berries",text:"Get close to a bush and press 'E' to gather berries.",condition:(e,n)=>n.food.length>0,getTargets:(e,n)=>{const r=Me(n,e,"berryBush",mt,o=>o.food.length>0);return r?[r.id]:[]},isCompleted:!1},{key:Mt.EAT,title:"Eat",text:"When you are hungry and have food, press 'F' to eat.",condition:(e,n)=>n.activeAction==="eating",isCompleted:!1,highlightedUIElements:[dr.FOOD_BAR]},{key:Mt.PROCREATE,title:"Procreate",text:"Find a mate and press 'R' to start a family. This is how you continue your lineage.",condition:(e,n)=>Tt(e,n).length>0,getTargets:(e,n)=>{const r=Me(n,e,"human",mt,o=>hr(n,o,e));return r?[r.id]:[]},isCompleted:!1},{key:Mt.PLANT_BUSH,title:"Farming",text:"You can plant new berry bushes. Carry some berries and press 'B' to plant.",condition:(e,n)=>pf(e,n).some(o=>o.type===Ee.Plant)||e.hasPlayerPlantedBush===!0,isCompleted:!1},{key:Mt.AUTOPILOT,title:"Autopilot!",text:"You can turn autopilot for specific actions, press Shift and click on the action button to enable it.",condition:e=>e.hasPlayerEnabledAutopilot>2,highlightedUIElements:[dr.COMMAND_BUTTONS],isCompleted:!1},{key:Mt.ANIMALS_INTRODUCTION,title:"Wild Animals!",text:"Your world now has wild animals! Prey provide meat when hunted, but beware of predators that may attack.",condition:e=>Array.from(e.entities.entities.values()).some(r=>r.type==="prey"||r.type==="predator"),isCompleted:!1,dependsOn:Mt.AUTOPILOT},{key:Mt.HUNT_PREY,title:"Hunt for Meat",text:"Click on prey animals to hunt them for meat. Hunting provides more food than gathering berries!",condition:(e,n)=>{const r=Me(n,e,"prey",150);return n.hunger>40&&!!r},getTargets:(e,n)=>{const r=Me(n,e,"prey",150);return r?[r.id]:[]},isCompleted:!1,dependsOn:Mt.ANIMALS_INTRODUCTION},{key:Mt.DEFEND_FROM_PREDATORS,title:"Defend Against Predators",text:"Predators may attack when hungry! Click on them to fight back. Fighting together with family is more effective.",condition:(e,n)=>!!Me(n,e,"predator",120),getTargets:(e,n)=>{const r=Me(n,e,"predator",120);return r?[r.id]:[]},isCompleted:!1,dependsOn:Mt.HUNT_PREY}];function tv(){return{steps:W_.map(e=>({...e,isCompleted:!1}))}}function nv(){return{currentStepIndex:0,completedSteps:new Set,isActive:!0,transitionState:Ut.FADING_IN,transitionAlpha:0,highlightedEntityIds:new Set,stepStartTime:null,activeUIHighlights:new Set}}function $_(e){for(let n=0;n<e.tutorial.steps.length;n++){const r=e.tutorial.steps[n];if(!r.isCompleted)if(r.dependsOn){if(e.tutorialState.completedSteps.has(r.dependsOn))return n}else return n}return null}function Y_(e,n){const r=e.tutorialState;if(!r.isActive){r.transitionState=Ut.INACTIVE,r.highlightedEntityIds.clear(),r.activeUIHighlights.clear();return}const o=It(e);if(!o){r.isActive=!1,r.transitionState=Ut.INACTIVE,r.highlightedEntityIds.clear(),r.activeUIHighlights.clear();return}const a=e.tutorial.steps[r.currentStepIndex];if(!a){r.isActive=!1,r.transitionState=Ut.INACTIVE,r.highlightedEntityIds.clear(),r.activeUIHighlights.clear();return}const l=1/CI;switch(r.transitionState){case Ut.FADING_IN:r.stepStartTime===null&&(r.stepStartTime=e.time),r.transitionAlpha+=l*n,r.transitionAlpha>=1&&(r.transitionAlpha=1,r.transitionState=Ut.ACTIVE);break;case Ut.ACTIVE:{e.time-(r.stepStartTime||e.time)>=(a.minDisplayTime||0)&&a.condition(e,o)&&(a.isCompleted=!0,r.completedSteps.add(a.key),r.transitionState=Ut.FADING_OUT);break}case Ut.FADING_OUT:if(r.transitionAlpha-=l*n,r.transitionAlpha<=0){r.transitionAlpha=0,r.stepStartTime=null;const f=$_(e);f!==null?(r.currentStepIndex=f,r.transitionState=Ut.FADING_IN):(r.isActive=!1,r.transitionState=Ut.INACTIVE)}break}r.transitionState!==Ut.FADING_OUT&&r.transitionState!==Ut.INACTIVE?(a.getTargets?r.highlightedEntityIds=new Set(a.getTargets(e,o)):r.highlightedEntityIds.clear(),a.highlightedUIElements?r.activeUIHighlights=new Set(a.highlightedUIElements):r.activeUIHighlights.clear()):(r.highlightedEntityIds.clear(),r.activeUIHighlights.clear())}function j_(){const e=ev(),n=0;for(let S=0;S<u0;S++){const y={x:Math.random()*An,y:Math.random()*Tn};$l(e,y,n)}const r=An/2,o=Tn/2,a=Rl(e,{x:r,y:o},n,"male",!0);Rl(e,{x:r+50,y:o},n,"female",!1);for(let S=0;S<b0;S++){const y={x:r+An*(Math.random()-Math.random()),y:o+Tn*(Math.random()-Math.random())};Rs(e,y,"male",void 0,void 0,El()),Rs(e,{x:y.x+20,y:y.y},"female",void 0,void 0,El())}const l={x:r+An*(Math.random()-Math.random()),y:o+Tn*(Math.random()-Math.random())};Ps(e,l,"male",void 0,void 0,_l()),Ps(e,{x:l.x+20,y:l.y},"female",void 0,void 0,_l());const c=[{id:"muteButton",action:Le.ToggleMute,currentWidth:Xr,rect:{x:0,y:0,width:0,height:0},text:"",backgroundColor:"",textColor:Kr},{id:"pauseButton",action:Le.TogglePause,currentWidth:Xr,rect:{x:0,y:0,width:0,height:0},text:"",backgroundColor:"",textColor:Kr}],f=tv(),h=nv(),p={time:n,entities:e,mapDimensions:{width:An,height:Tn},generationCount:1,gameOver:!1,visualEffects:[],nextVisualEffectId:0,viewportCenter:{...a.position},isPaused:!1,autopilotControls:{behaviors:{procreation:!1,planting:!1,gathering:!1,attack:!1,feedChildren:!0,followLeader:!1},hoveredAutopilotAction:void 0,activeAutopilotAction:void 0,isManuallyMoving:!1},hasPlayerMovedEver:!1,hasPlayerPlantedBush:!1,hasPlayerEnabledAutopilot:0,masterVolume:F0,isMuted:!1,uiButtons:c,tutorial:f,tutorialState:h,hoveredButtonId:void 0,mousePosition:{x:0,y:0},notifications:[{id:"welcome",type:Es.Hello,message:"Welcome to the game!",duration:50,targetEntityIds:[a.id],highlightedEntityIds:[a.id],timestamp:0,isDismissed:!1,creationTime:Date.now()}]},m=Af(p);return console.log("Game world initialized:",m),m}function V_(){const e=ev(),n=0;for(let c=0;c<u0;c++){const f={x:Math.random()*An,y:Math.random()*Tn};$l(e,f,n)}for(let c=0;c<MI;c++){const f={x:Math.random()*An,y:Math.random()*Tn},h=Math.random()<.5?"male":"female";Rl(e,f,n,h,!1)}for(let c=0;c<b0;c++){const f={x:Math.random()*An,y:Math.random()*Tn};Rs(e,f,"male",void 0,void 0,El()),Rs(e,{x:f.x+20,y:f.y},"female",void 0,void 0,El())}const r={x:Math.random()*An,y:Math.random()*Tn};Ps(e,r,"male",void 0,void 0,_l()),Ps(e,{x:r.x+20,y:r.y},"female",void 0,void 0,_l());const o=tv(),a=nv(),l={time:n,entities:e,mapDimensions:{width:An,height:Tn},generationCount:0,gameOver:!1,visualEffects:[],nextVisualEffectId:0,viewportCenter:{x:An/2,y:Tn/2},isPaused:!1,autopilotControls:{behaviors:{procreation:!1,planting:!1,gathering:!1,attack:!1,feedChildren:!0,followLeader:!1},hoveredAutopilotAction:void 0,activeAutopilotAction:void 0,isManuallyMoving:!1},hasPlayerMovedEver:!1,hasPlayerPlantedBush:!1,hasPlayerEnabledAutopilot:0,masterVolume:F0,isMuted:!0,uiButtons:[],tutorial:o,tutorialState:a,hoveredButtonId:void 0,mousePosition:{x:0,y:0},notifications:[]};return Af(l)}const X_="humanProcreation",K_="human",Q_="human",Z_=mt,q_=(e,n,r)=>hr(e,n,r.gameState)?e.gender==="male"?e.activeAction==="procreating":e.activeAction==="procreating"&&n.activeAction==="procreating":!1,J_=(e,n,r)=>{var h,p;const{gameState:o}=r,a={x:(e.position.x+n.position.x)/2,y:(e.position.y+n.position.y)/2},l=e.gender==="male"?e:n,c=e.gender==="female"?e:n,f=(l.partnerIds||[]).length===0;if(e.stateMachine=[Cs,{partnerId:n.id,previousState:(h=e.stateMachine)==null?void 0:h[0]}],n.stateMachine=[Cs,{partnerId:e.id,previousState:(p=n.stateMachine)==null?void 0:p[0]}],e.partnerIds||(e.partnerIds=[]),e.partnerIds.includes(n.id)||e.partnerIds.push(n.id),n.partnerIds||(n.partnerIds=[]),n.partnerIds.includes(e.id)||n.partnerIds.push(e.id),f&&l.leaderId&&l.leaderId!==l.id){const m=o.entities.entities.get(l.leaderId);if(m){const S=Rd(l,m),y=Rd(c,m);if(!S&&!y){const w=Pd();l.leaderId=l.id,l.tribeBadge=w,l.diplomacy=new Map,c.leaderId=l.id,c.tribeBadge=w}}}else if(!e.leaderId&&!n.leaderId&&l&&c){const m=Pd();l.leaderId=l.id,l.tribeBadge=m,l.diplomacy=new Map,c.leaderId=l.id,c.tribeBadge=m}e.activeAction=void 0,ke(o,ce.Procreation,a,lr),ke(o,ce.Partnered,e.position,be,e.id),ke(o,ce.Partnered,n.position,be,n.id),e.lastPartneredEffectTime=o.time,n.lastPartneredEffectTime=o.time,n.activeAction=void 0,Ue(r,Re.Procreate,a)},eC={id:X_,sourceType:K_,targetType:Q_,maxDistance:Z_,checker:q_,perform:J_},tC={id:"humanChildFeeding",sourceType:"human",targetType:"human",maxDistance:zd,checker:(e,n)=>e.isAdult===!0&&e.food.length>0&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=Bi&&e.activeAction==="feeding",perform:(e,n,r)=>{e.food.pop(),n.hunger=Math.max(0,n.hunger-Bi),e.feedChildCooldownTime=BA,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(ke(r.gameState,ce.ChildFed,n.position,be,n.id),n.lastChildFedEffectTime=r.gameState.time),Ue(r,Re.ChildFed,n.position)}},nC={id:"human-attack",sourceType:"human",targetType:"human",maxDistance:Li,checker:(e,n,r)=>{var l;if(((l=e.stateMachine)==null?void 0:l[0])!==zn||e.attackTargetId!==n.id||(e.attackCooldown||0)>0)return!1;const o=e.stateMachine[1];return r.gameState.time-o.attackStartTime>=v0},perform:(e,n,r)=>{const o=We(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),a=ww(qe(o),n.direction);if(Math.abs(a)<QA*Math.PI/180&&Math.random()<ZA)ke(r.gameState,ce.AttackDeflected,n.position,be,n.id);else{let f=Wd;e.gender==="male"&&(f*=VA),e.isAdult||(f*=XA),(!n.isAdult||n.age>=p0)&&e.isAdult&&(f*=KA),n.hitpoints-=f,n.movementSlowdown={modifier:S0,endTime:r.gameState.time+y0},ke(r.gameState,ce.Hit,n.position,be,n.id);const p=We(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),m=Nt(p,$A);n.forces.push(m),n.hitpoints<=0?Ue(r,Re.HumanDeath,n.position):Ue(r,Re.Attack,e.position)}e.attackCooldown=Hl;const c=e.stateMachine[1];c.attackStartTime=r.gameState.time,ke(r.gameState,ce.Attack,e.position,be,e.id)}},iC={id:"human-collision",sourceType:"human",targetType:"human",maxDistance:vt*2,checker:(e,n,{gameState:r})=>j(e.position,n.position,r.mapDimensions.width,r.mapDimensions.height)<(e.radius+n.radius)/3,perform:(e,n,{gameState:r})=>{const o=j(e.position,n.position,r.mapDimensions.width,r.mapDimensions.height);if(o===0){e.forces.push({x:.1,y:0}),n.forces.push({x:-.1,y:0});return}const l=(e.radius+n.radius-o)*.05,c=qe($0(e.position,n.position)),f=Nt(c,l);e.forces.push(f),n.forces.push(Nt(f,-1))}},rC={id:"humanBerryBushGather",sourceType:"human",targetType:"berryBush",maxDistance:mt,checker:(e,n,r)=>{var o;return e.isAdult&&n.food.length>0&&((o=e.stateMachine)==null?void 0:o[0])===Wl&&e.food.length<e.maxFood&&(!e.gatheringCooldownTime||e.gatheringCooldownTime<r.gameState.time)||!1},perform:(e,n,r)=>{const o=n.food.pop();o&&e.food.push(o),e.gatheringCooldownTime=r.gameState.time+1,n.timeSinceLastHarvest=r.gameState.time,n.ownerId=e.id,n.claimedUntil=r.gameState.time+c0,ke(r.gameState,ce.BushClaimed,n.position,be),Ue(r,Re.Gather,e.position)}},oC={id:"corpseGather",sourceType:"human",targetType:"corpse",maxDistance:mt,checker:(e,n,r)=>{var o;return e.isAdult&&n.food.length>0&&((o=e.stateMachine)==null?void 0:o[0])===Wl&&e.food.length<e.maxFood&&(!e.gatheringCooldownTime||e.gatheringCooldownTime<r.gameState.time)||!1},perform:(e,n,r)=>{const o=n.food.pop();o&&e.food.push(o),e.gatheringCooldownTime=r.gameState.time+1,Ue(r,Re.Gather,e.position)}},sC=[rC,oC],aC={id:"prey-eat-berry-bush",sourceType:"prey",targetType:"berryBush",maxDistance:Bt,checker:(e,n,r)=>!!(e.isAdult&&n.food.length>0&&e.hunger>30&&(!e.eatingCooldownTime||e.eatingCooldownTime<r.gameState.time)),perform:(e,n,r)=>{n.food.pop()&&(e.hunger=Math.max(0,e.hunger-25),n.lifespan-=ow,n.timeSinceLastHarvest=r.gameState.time,e.eatingCooldownTime=r.gameState.time+rw,ke(r.gameState,ce.BushClaimed,n.position,be,e.id),Ue(r,Re.Gather,e.position))}},lC={id:"predator-hunt-prey",sourceType:"predator",targetType:"prey",maxDistance:Wr,checker:(e,n,r)=>!!(e.isAdult&&e.hunger>50&&(!e.huntCooldown||e.huntCooldown<=0)&&n.hitpoints>0),perform:(e,n,r)=>{n.hitpoints-=hw;const o=We(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),a=Nt(o,8);n.forces.push(a),e.huntCooldown=vw,n.hitpoints<=0?(Ue(r,Re.HumanDeath,n.position),ke(r.gameState,ce.Hit,n.position,be,n.id)):(ke(r.gameState,ce.Hit,n.position,be,n.id),n.fleeCooldown=5,Ue(r,Re.Attack,e.position)),ke(r.gameState,ce.Attack,e.position,be,e.id)}},uC={id:"human-hunt-prey",sourceType:"human",targetType:"prey",maxDistance:Li,checker:(e,n,r)=>{var o;return!!(((o=e.stateMachine)==null?void 0:o[0])===zn&&e.attackTargetId===n.id&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&e.isAdult)},perform:(e,n,r)=>{let o=Wd*1.2;e.gender==="male"&&(o*=1.3),n.hitpoints-=o;const a=We(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),l=Nt(a,6);n.forces.push(l),e.attackCooldown=Hl,n.hitpoints<=0?(Ue(r,Re.HumanDeath,n.position),ke(r.gameState,ce.Hit,n.position,be,n.id)):(ke(r.gameState,ce.Hit,n.position,be,n.id),n.fleeCooldown=8,Ue(r,Re.Attack,e.position)),ke(r.gameState,ce.Attack,e.position,be,e.id)}},cC={id:"predator-attack-human",sourceType:"predator",targetType:"human",maxDistance:Gn,checker:(e,n,r)=>{var o;return!!(e.isAdult&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&(e.hunger>100||n.attackTargetId===e.id||n.attackTargetId&&((o=r.gameState.entities.entities.get(n.attackTargetId))==null?void 0:o.type)==="predator"))},perform:(e,n,r)=>{let o=fw;e.hunger>120&&(o*=1.3),n.hitpoints-=o,n.movementSlowdown={modifier:S0,endTime:r.gameState.time+y0};const a=We(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),l=Nt(a,7);n.forces.push(l),e.attackCooldown=gw,n.hitpoints<=0?(e.hunger=Math.max(0,e.hunger-x0),Ue(r,Re.HumanDeath,n.position),ke(r.gameState,ce.Hit,n.position,be,n.id)):(ke(r.gameState,ce.Hit,n.position,be,n.id),Ue(r,Re.Attack,e.position)),ke(r.gameState,ce.Attack,e.position,be,e.id)}},dC={id:"human-attack-predator",sourceType:"human",targetType:"predator",maxDistance:Li,checker:(e,n,r)=>{var o;return!!(((o=e.stateMachine)==null?void 0:o[0])===zn&&e.attackTargetId===n.id&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&e.isAdult)},perform:(e,n,r)=>{let o=Wd*.8;e.gender==="male"&&(o*=1.2);const a=Array.from(r.gameState.entities.entities.values()).filter(f=>f.type==="human"&&f.id!==e.id).filter(f=>{const h=f;return Math.sqrt(Math.pow(h.position.x-e.position.x,2)+Math.pow(h.position.y-e.position.y,2))<100&&h.activeAction==="attacking"&&h.attackTargetId===n.id}).length;a>0&&(o*=1+a*.2),n.hitpoints-=o;const l=We(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),c=Nt(l,8);n.forces.push(c),e.attackCooldown=Hl,n.hitpoints<=0?(Ue(r,Re.HumanDeath,n.position),ke(r.gameState,ce.Hit,n.position,be,n.id)):(ke(r.gameState,ce.Hit,n.position,be,n.id),n.hitpoints<n.maxHitpoints*.3&&(n.hunger+=20),Ue(r,Re.Attack,e.position)),ke(r.gameState,ce.Attack,e.position,be,e.id)}},fC={id:"prey-procreation",sourceType:"prey",targetType:"prey",maxDistance:Bt,checker:(e,n,r)=>!!(e.isAdult&&n.isAdult&&e.gender!==n.gender&&e.id!==n.id&&!e.isPregnant&&!n.isPregnant&&e.hunger<200&&n.hunger<200&&(!e.procreationCooldown||e.procreationCooldown<=0)&&(!n.procreationCooldown||n.procreationCooldown<=0)),perform:(e,n,r)=>{const o=e.gender==="female"?e:n;o.isPregnant=!0,o.gestationTime=iw,e.procreationCooldown=im,n.procreationCooldown=im,ke(r.gameState,ce.Procreation,o.position,be,o.id),Ue(r,Re.Procreate,o.position)}},hC={id:"predator-procreation",sourceType:"predator",targetType:"predator",maxDistance:Hi,checker:(e,n,r)=>!!(e.isAdult&&n.isAdult&&e.gender!==n.gender&&e.id!==n.id&&!e.isPregnant&&!n.isPregnant&&e.hunger<200&&n.hunger<200&&(!e.procreationCooldown||e.procreationCooldown<=0)&&(!n.procreationCooldown||n.procreationCooldown<=0)),perform:(e,n,r)=>{const o=e.gender==="female"?e:n;o.isPregnant=!0,o.gestationTime=Sw,e.procreationCooldown=sm,n.procreationCooldown=sm,ke(r.gameState,ce.Procreation,o.position,be,o.id),Ue(r,Re.Procreate,o.position)}},gC={id:"preyChildFeeding",sourceType:"prey",targetType:"prey",maxDistance:fo,checker:(e,n)=>e.isAdult===!0&&e.gender==="female"&&e.hunger<80&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=Tl&&e.activeAction==="feeding",perform:(e,n,r)=>{e.hunger=Math.min(120,e.hunger+10),n.hunger=Math.max(0,n.hunger-Tl),e.feedChildCooldownTime=z0,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(ke(r.gameState,ce.ChildFed,n.position,be,n.id),n.lastChildFedEffectTime=r.gameState.time),Ue(r,Re.ChildFed,n.position)}},pC={id:"predatorChildFeeding",sourceType:"predator",targetType:"predator",maxDistance:fo,checker:(e,n)=>e.isAdult===!0&&e.gender==="female"&&e.hunger<90&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=Tl&&e.activeAction==="feeding",perform:(e,n,r)=>{e.hunger=Math.min(140,e.hunger+15),n.hunger=Math.max(0,n.hunger-Tl),e.feedChildCooldownTime=z0,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(ke(r.gameState,ce.ChildFed,n.position,be,n.id),n.lastChildFedEffectTime=r.gameState.time),Ue(r,Re.ChildFed,n.position)}},mC={id:"predator-eat-corpse",sourceType:"predator",targetType:"corpse",maxDistance:Hi,checker:(e,n,r)=>!!(e.isAdult&&e.hunger>30&&n.food.length>0&&(!e.eatingCooldownTime||e.eatingCooldownTime<=r.gameState.time)),perform:(e,n,r)=>{n.food.pop()&&(e.hunger=Math.max(0,e.hunger-x0),e.eatingCooldownTime=r.gameState.time+2,ke(r.gameState,ce.Eating,e.position,be,e.id),Ue(r,Re.Gather,e.position))}},vC=[iC,...sC,eC,tC,nC,aC,gC,pC,mC,lC,uC,dC,cC,fC,hC];function SC(e){const{gameState:n}=e,r=n,o=Array.from(n.entities.entities.values());for(const a of vC)for(const l of o){if(a.sourceType&&l.type!==a.sourceType)continue;const c=r.search[a.targetType].byRadius(l.position,a.maxDistance);for(const f of c){if(l.id===f.id)continue;j(l.position,f.position,n.mapDimensions.width,n.mapDimensions.height)<=a.maxDistance&&a.checker(l,f,e)&&a.perform(l,f,e)}}}function yC(e){e.visualEffects=e.visualEffects.filter(n=>e.time-n.startTime<=n.duration)}const AC=1/60;function TC(e,n){const r=It(e);r&&(e.viewportCenter=of(e.viewportCenter,r.position,Gd*n))}function IC(e){for(const r of e.entities.entities.values())r.isHighlighted=!1;const n=e.notifications.filter(r=>!r.isDismissed);for(const r of n)if(r.highlightedEntityIds)for(const o of r.highlightedEntityIds){const a=e.entities.entities.get(o);a&&(a.isHighlighted=!0)}}function Yl(e,n){if(e.isPaused)return e;for(;n>0;){const r=Af(e),o=Math.min(n,AC);if(r.gameOver)return r;const a=o*(gt/pt);r.time+=a,TC(r,o),xw(r),IC(r),F_({gameState:r,deltaTime:o}),SC({gameState:r,deltaTime:o}),yC(r),Y_(r,o),e=r,n-=o}return e}function Tm(e,n,r){e.save();const{x:o,y:a,width:l,height:c}=n.rect,f=cI;if(e.beginPath(),e.moveTo(o+f,a),e.lineTo(o+l-f,a),e.quadraticCurveTo(o+l,a,o+l,a+f),e.lineTo(o+l,a+c-f),e.quadraticCurveTo(o+l,a+c,o+l-f,a+c),e.lineTo(o+f,a+c),e.quadraticCurveTo(o,a+c,o,a+c-f),e.lineTo(o,a+f),e.quadraticCurveTo(o,a,o+f,a),e.closePath(),e.fillStyle=n.isDisabled?dI:n.backgroundColor,e.fill(),n.activated){e.save();const h=(Math.sin(Date.now()/1e3*vI)+1)/2;e.strokeStyle=mI,e.lineWidth=2+h*2,e.globalAlpha=.7+h*.3,e.stroke(),e.restore()}if(n.lastActivated){const h=Date.now()-n.lastActivated;if(h<Vp){const p=1-h/Vp;e.fillStyle=hI,e.globalAlpha=p,e.fill(),e.globalAlpha=1}}r&&!n.isDisabled&&(e.fillStyle=D0,e.globalAlpha=.5,e.fill(),e.globalAlpha=1),e.fillStyle=n.isDisabled?fI:n.textColor,n.icon?(e.font=`${c*.55}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(n.icon,o+l/2,a+c/2),n.text&&(e.font=`${c*.18}px "Press Start 2P", Arial`,e.textAlign="right",e.textBaseline="bottom",e.fillText(n.text,o+l-4,a+c-2))):(e.textAlign="center",e.textBaseline="middle",e.fillText(n.text,o+l/2,a+c/2)),e.restore()}function wC(e,n,r,o){e.save(),e.font=`${Xp}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="bottom";const l=e.measureText(r).width,c=Xp,f=l+Kp*2,h=c+Kp*2,p=o.x-f/2,m=e.canvas.height,S=n.y<m/2?n.y+n.height-Qp:n.y-h+Qp;e.fillStyle=gI,e.fillRect(p,S,f,h),e.fillStyle=pI,e.fillText(r,o.x,S+h/2+c/2),e.restore()}function EC(e,n,r){e.save();const o=It(n),a=[{id:"fastForwardButton",action:Le.FastForward,text:"FFWD [T]",currentWidth:Xr*1.3,backgroundColor:Xa,textColor:Kr,tooltip:"Fast-forward time",rect:{x:0,y:0,width:0,height:0}},{id:"pauseButton",action:Le.TogglePause,text:n.isPaused?"UN[P]AUSE":"[P]AUSE",backgroundColor:n.isPaused?Vc:Xa,currentWidth:n.isPaused?Xr*1.4:Xr*1.1,tooltip:n.isPaused?"Resume Game":"Pause Game",rect:{x:0,y:0,width:0,height:0},textColor:Kr},{id:"muteButton",action:Le.ToggleMute,text:n.isMuted?"UN[M]UTE":"[M]UTE",backgroundColor:n.isMuted?Vc:Xa,tooltip:`Toggle Sound (${n.isMuted?"Muted":"Enabled"})`,currentWidth:Xr,rect:{x:0,y:0,width:0,height:0},textColor:Kr}];if(n.uiButtons.push(...a),o){const p=pf(n,o),m=new Set(p.map(U=>U.type));let S=[{playerAction:Ee.Gather,buttonAction:Le.CommandGather,shortcut:"E",name:"Gather",toggleKey:"gathering",condition:()=>o.isAdult===!0},{playerAction:Ee.Eat,buttonAction:Le.CommandEat,shortcut:"F",name:"Eat"},{playerAction:Ee.Plant,buttonAction:Le.CommandPlant,shortcut:"B",name:"Plant",toggleKey:"planting",condition:()=>o.isAdult===!0},{playerAction:Ee.Procreate,buttonAction:Le.ToggleProcreationBehavior,shortcut:"R",name:"Procreation",toggleKey:"procreation",condition:()=>o.isAdult===!0},{playerAction:Ee.FeedChild,buttonAction:Le.ToggleFeedChildBehavior,shortcut:"H",name:"Feed Child",toggleKey:"feedChildren",condition:()=>o.isAdult===!0},{playerAction:Ee.Attack,buttonAction:Le.ToggleAttackBehavior,shortcut:"Q",name:"Attack",toggleKey:"attack",condition:()=>o.isAdult===!0},{playerAction:Ee.FollowMe,buttonAction:Le.CommandFollowMe,shortcut:"C",name:"Follow Me",toggleKey:"followLeader",condition:()=>o.isAdult===!0},{playerAction:Ee.CallToAttack,buttonAction:Le.CommandCallToAttack,shortcut:"V",name:"Call to Attack",condition:()=>o.isAdult===!0},{playerAction:Ee.TribeSplit,buttonAction:Le.CommandTribeSplit,shortcut:"K",name:"Split Tribe",condition:()=>o.leaderId!==void 0&&o.leaderId!==o.id&&o.isAdult===!0}];S=S.filter(U=>U.condition?U.condition():!0);const y=1,w=S.length,P=w*tr+(w-1)*Ka,T=y*tr+(y-1)*Ka,C=(r-P)/2,F=e.canvas.height-T-20;S.forEach((U,L)=>{const W=L%w,ae=Math.floor(L/w),M=C+W*(tr+Ka),G=F+ae*(tr+Ka),te=!!U.toggleKey,fe=te&&n.autopilotControls.behaviors[U.toggleKey],_e=!m.has(U.playerAction),Fe=!n.hasPlayerEnabledAutopilot||n.hasPlayerEnabledAutopilot<3?" (Press Shift to toggle Auto)":"",Ae=te?`${U.name}${Fe}`:U.name,ve=fe?Vc:Xa,re={id:`commandButton_${U.name}`,action:U.buttonAction,rect:{x:M,y:G,width:tr,height:tr},icon:zl[U.playerAction],text:U.shortcut,backgroundColor:ve,textColor:Kr,currentWidth:tr,tooltip:Ae,isDisabled:_e,activated:fe};n.uiButtons.push(re)})}let l=r-jt;a.forEach(p=>{const m=jt,S=l-p.currentWidth;p.rect={x:S,y:m,width:p.currentWidth,height:lI},Tm(e,p,n.hoveredButtonId===p.id),l-=p.currentWidth+uI});let c=null;n.uiButtons.filter(p=>p.id.startsWith("commandButton_")).forEach(p=>{c||(c={x:p.rect.x,y:p.rect.y,width:p.rect.width,height:p.rect.height}),c.x=Math.min(c.x,p.rect.x),c.y=Math.min(c.y,p.rect.y),c.width=Math.max(c.width,p.rect.x+p.rect.width-c.x),c.height=Math.max(c.height,p.rect.y+p.rect.height-c.y),Tm(e,p,n.hoveredButtonId===p.id)});const h=n.hoveredButtonId?n.uiButtons.find(p=>p.id===n.hoveredButtonId):void 0;return h&&h.tooltip&&n.mousePosition&&wC(e,h.rect,h.tooltip,n.mousePosition),e.restore(),{commandButtonsRect:c}}function _C(e){e.save(),e.fillStyle=SI,e.fillRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle=yI,e.font=`${AI}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("PAUSED",e.canvas.width/2,e.canvas.height/2),e.restore()}const CC=25,RC=0,Im=28;function iv(e,n,r,o,a,l,c,f,h){e.save();const p=n.x-c.x+f/2,m=n.y-c.y+h/2;e.strokeStyle=o,e.lineWidth=l,e.setLineDash(a),e.beginPath(),e.arc(p,m,r+Gl,0,2*Math.PI),e.stroke(),e.restore()}function PC(e,n,r,o,a,l){if(n=n.filter(m=>m.type!==Ee.FollowMe),n.length===0)return;e.save(),n.forEach(m=>{m.targetEntity&&iv(e,m.targetEntity.position,m.targetEntity.radius,Yd,jd,2,o,a,l)}),e.font=`${io}px "Press Start 2P", Arial`,e.fillStyle="white",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=5;const c=r.position.x-o.x+a/2,f=r.position.y-o.y+l/2;let h=0,p={};n.forEach(m=>{const S=zl[m.type];if(m.targetEntity){p[m.targetEntity.id]=(p[m.targetEntity.id]||0)+1;const y=m.targetEntity.position.x-o.x+a/2,w=m.targetEntity.position.y-o.y+l/2,P=`${S}${m.key.toUpperCase()}`,T=w-m.targetEntity.radius-Gl-io/2-(p[m.targetEntity.id]-1)*Im;e.fillText(P,y,T)}else{e.textAlign="left";const y=`${S}${m.key.toUpperCase()}`,w=c+CC,T=f+RC+h*Im;e.fillText(y,w,T),h++,e.textAlign="center"}}),e.restore()}const pe=(e,n,r,o,a,l,c)=>{l==="transparent"||o<=0||a<=0||(e.fillStyle=l,e.fillRect(Math.floor(n*c),Math.floor(r*c),Math.ceil(o*c),Math.ceil(a*c)))},wm=10,Em=10,Hn=6,Jn=4,sl=2,NC=5,cn=4,DC=2,Rt=4,kC=2,Ze=3,br=2,Mi=0,ps=Mi+Jn-1,Ot=ps,rt=ps+cn-1,OC="rgba(0, 0, 0, 0.4)",MC=4,UC=1,Tf={name:"tribe-human-2d",referenceImage:"swos.png",description:`A 2D human character asset for the Tribe game. This includes ensuring that the unique animations for stances like 'eat' and 'procreate' do not erroneously appear in other stances, such as 'walk', which was observed in the provided rendered media. The 'idle' animation was updated to a leg sway to better match the provided video for that stance, replacing a simpler body bob.

# Visual style

Human characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like people from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the character to give it a sense of depth.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 1 and 60, with 20 being the average age.
- gender: 
  - The male characters should have only pants, while female cover their breasts with a top. The clothing should be simple and muted, reflecting a stone-age style.
  - Female characters should have long hair, while male should have short hair and beard.
  - Male characters should have a more robust, muscular build
  - Female characters should have thinner arms and legs, with a more pronounced waist and hips.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'gathering': The character is gathering food from berry bushes, with arms reaching out and a slight bend at the knees.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or dust particles to indicate movement.
- 'attacking': The character performs an attack animation, with arms raised and a forward motion.
- 'defending': The character takes a defensive stance, with arms raised and a slight bend at the knees.
- 'stunned': The character is stunned and laying on the ground, with limbs relaxed and a neutral expression.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a skeleton over time.

`,stances:["idle","walk","gathering","eat","procreate","dead","attacking","defending","stunned"],render(e,n,r,o,a,l,c,f="male",h=20,p=[1,0],m=!1,S=0){const y=["dead","stunned"].includes(c),w=y?Em+4:wm,P=y?wm+4:Em+Ze,T=.15,C=Math.min(o*(1-2*T)/w,a*(1-2*T)/P),F=w*C,U=P*C,L=n+(o-F)/2,W=r+(a-U)/2;e.save(),p[0]<0&&!y?(e.translate(L+F,W),e.scale(-1,1)):e.translate(L,W);const M="#D09A5A",G=h>50?"#BDBDBD":"#281808",te="#7F5C4A",fe="#6B4F3A",_e="#E0D8C0",Fe="#A0522D",Ae=1-Math.max(0,Math.min(100,S))/100*.2,ve=f==="male"?1.1:.9,re=.8+(Math.max(1,Math.min(h,60))-1)/59*.2;let Se=NC*Ae*ve*re,le=DC*Ae*ve*re,q=kC*Ae*re;m&&f==="female"&&(Se*=1.5);const x=Math.round((w-Se)/2),Y=Math.round((w-Hn)/2),z=x-le,_=x+Se,k=1,K=x+(Se/2-k/2)-q,V=x+(Se/2+k/2),Te=p[1]<-.2&&Math.abs(p[0])<.7,oe=X=>{e.fillStyle=OC,e.beginPath();const ee=w/2,Ne=X;e.ellipse(Math.floor(ee*C),Math.floor(Ne*C),Math.max(1,Math.floor(MC*C)),Math.max(1,Math.floor(UC*C)),0,0,2*Math.PI),e.fill()},Ie=(X,ee)=>{f==="male"?(pe(e,x,ps+X,Se,cn-br,ee,C),pe(e,x,ps+cn-br+X,Se,br,te,C)):pe(e,x,ps+X,Se,cn,fe,C)},ye=(X,ee)=>{Te?pe(e,Y,Mi+X,Hn,Jn,G,C):(pe(e,Y,Mi+X,Hn,Jn,ee,C),pe(e,Y,Mi+X,Hn,sl,G,C),f==="female"?(pe(e,Y-1,Mi+sl+X,1,Jn,G,C),pe(e,Y+Hn,Mi+sl+X,1,Jn,G,C)):pe(e,Y+1,Mi+2+X,Hn-2,Jn-2,G,C))};switch(c){case"idle":{const X=l*Math.PI*2,ee=Math.sin(X)*.5,de=(Math.cos(X*2)+1)*.25;oe(rt+Ze+1),pe(e,K+ee,rt+de,q,Ze,M,C),pe(e,V-ee,rt+de,q,Ze,M,C),Ie(de,M),pe(e,z,Ot+de,le,Rt,M,C),pe(e,_,Ot+de,le,Rt,M,C),ye(de,M);break}case"walk":{const X=l*Math.PI*2,ee=Math.sin(X)*2,de=Math.abs(Math.cos(X))*1;oe(rt+Ze+1),pe(e,K+ee,rt+de,q,Ze,M,C),pe(e,V-ee,rt+de,q,Ze,M,C),Ie(de,M),pe(e,z-ee,Ot+de,le,Rt,M,C),pe(e,_+ee,Ot+de,le,Rt,M,C),ye(de,M);break}case"gathering":{const X=l*Math.PI*2,ee=1,Ne=(Math.sin(X)+1)/2*2,de=ee+Math.abs(Math.cos(X))*.5;oe(rt+Ze+1),pe(e,K,rt+de,q,Ze-ee,M,C),pe(e,V,rt+de,q,Ze-ee,M,C),Ie(de,M),pe(e,z+1,Ot+de-Ne,le,Rt,M,C),pe(e,_-1,Ot+de-Ne,le,Rt,M,C),ye(de,M);break}case"eat":{oe(rt+Ze+1),pe(e,K,rt+1,q,Ze-1,M,C),pe(e,V,rt+1,q,Ze-1,M,C),Ie(1,M);const Ne=(Math.sin(l*Math.PI*4)+1)/2,de=Y+Hn/2,Cn=Mi+Jn/2,Ke=_+(de-_)*Ne,Ye=Ot+1+(Cn-(Ot+1))*Ne;pe(e,z,Ot+1,le,Rt,M,C),pe(e,Ke,Ye,le,Rt,M,C),pe(e,Ke,Ye-1,1,1,Fe,C),ye(1,M);break}case"procreate":{const X=(Math.sin(l*Math.PI*8)+1)/4,ee=(Math.sin(l*Math.PI*6)+1)*.5,Ne=1.5,de=Ne-ee;oe(rt+Ze+1),pe(e,K,rt+de,q,Ze-Ne,M,C),pe(e,V,rt+de,q,Ze-Ne,M,C),Ie(de,M),pe(e,z,Ot+de,le,Rt,M,C),pe(e,_,Ot+de,le,Rt,M,C),ye(de,M),e.globalAlpha=X,Ie(de,"white"),e.globalAlpha=1;break}case"attacking":{const X=Math.sin(l*Math.PI)*1.5,ee=Math.abs(Math.sin(l*Math.PI));oe(rt+Ze+1),pe(e,K-X,rt+ee,q,Ze,M,C),pe(e,V+X*.5,rt+ee,q,Ze,M,C),Ie(ee,M),pe(e,z,Ot+ee-2,le,Rt,M,C),pe(e,_,Ot+ee-2.5,le,Rt,M,C),ye(ee,M);break}case"defending":{oe(rt+Ze+1),pe(e,K,rt+1,q,Ze-1,M,C),pe(e,V,rt+1,q,Ze-1,M,C),Ie(1,M),pe(e,z-1,Ot+1-1,le,Rt,M,C),pe(e,_+1,Ot+1-1,le,Rt,M,C),ye(1,M);break}case"stunned":case"dead":{const X=c==="dead",ee=X?Math.min(1,l):0,Ne=ee>.5?_e:M,de=f==="male"?te:fe,Cn=ee>.8?"transparent":G,Ke=w/2,Ye=P/2,Rn=2;oe(P-1),pe(e,Ke-q-Rn,Ye,q,Ze,Ne,C),pe(e,Ke+Rn,Ye,q,Ze,Ne,C),pe(e,Ke-le-Rn,Ye-cn+1,le,Rt,Ne,C),pe(e,Ke+Rn,Ye-cn+1,le,Rt,Ne,C);const Gt=Ke-Se/2,tn=Ye-cn/2;f==="male"?(ee<.7&&pe(e,Gt,tn+cn-br,Se,br,de,C),pe(e,Gt,tn,Se,cn-br,Ne,C)):ee<.7?pe(e,Gt,tn,Se,cn,de,C):pe(e,Gt,tn,Se,cn,Ne,C);const Pn=Ke-Hn/2,Nn=Ye-cn/2-Jn+1;if(pe(e,Pn,Nn,Hn,Jn,Ne,C),Cn!=="transparent"&&pe(e,Pn,Nn,Hn,sl,Cn,C),X&&ee>.6){const si="#B0A890";for(let xi=0;xi<3;xi++)pe(e,Gt+1,tn+xi*1+1,Se-2,.5,si,C)}break}default:pe(e,0,0,w,P,"magenta",C);break}e.restore()}};function FC(e,n,r,o,a){const l=n.x,c=n.y-r-o/2;e.save(),e.fillStyle=a,e.strokeStyle=a,e.lineWidth=1.5,e.beginPath(),e.rect(l-o/2,c,o,o/2),e.fill(),e.beginPath(),e.moveTo(l-o/2,c),e.lineTo(l-o/4,c-o/3),e.lineTo(l-o/6,c),e.moveTo(l-o/6,c),e.lineTo(l,c-o/2),e.lineTo(l+o/6,c),e.moveTo(l+o/6,c),e.lineTo(l+o/4,c-o/3),e.lineTo(l+o/2,c),e.stroke(),e.restore()}function Ns(e,n,r,o,a,l=!1,c=!1,f=!1,h=!1){o<xd&&(r=r*.75),Tf.render(e,n.x-r/2,n.y-r/2,r,r,0,"idle",a,o,[0,0],!1,0);let p,m;l?(p=JT,m=$d):c?(p=eI,m=P0):f?(p=tI,m=R0):h&&(p=nI,m=C0),p&&m&&FC(e,n,r/2,p,m)}function LC(e,n,r,o,a,l){if(e.save(),o.length===0){e.restore();return}const c=o.length*a,f=4;let h;const p=c+(o.length-1)*f;o.length>1&&p>l?h=(l-c)/(o.length-1):h=f,o.length<=1&&(h=0);for(let m=0;m<o.length;m++){const{member:S,isPlayer:y,isHeir:w,isPartner:P,isParent:T}=o[m],C=n+m*(a+h)+a/2,F=r+a/4;Ns(e,{x:C,y:F},a,S.age,S.gender,y,w,P,T)}e.restore()}function HC(e,n,r,o,a){if(r.length===0)return;e.save();const l=Fn,c=" 00",f=" 00";e.font=`${Yc}px "Press Start 2P", Arial`;const h=e.measureText(c).width,p=e.measureText(f).width,m=Fn+un+Fn+un+Fn+Ri+h+Fn/2+Ri+p,S=r.length*Va+(r.length-1)*Yp,y=a-S-Fn;e.fillStyle=rI,e.fillRect(l,y,m,S);for(let w=0;w<r.length;w++){const P=r[w],T=y+w*(Va+Yp),C=T+Va/2;P.isPlayerTribe&&(e.fillStyle=iI,e.fillRect(l,T,m,Va));let F=l+Fn;if(e.font=`${un}px "Press Start 2P", Arial`,e.textBaseline="middle",e.textAlign="left",e.fillText(P.tribeBadge,F,C-un/4),F+=un+Fn,!P.isPlayerTribe){const U=P.diplomacyStatus===Ht.Friendly?"":"",L=`diplomacyButton_${P.leaderId}`,W={x:F,y:C-un/2,width:un,height:un},ae={id:L,action:Le.ToggleDiplomacy,rect:W,text:"",icon:U,backgroundColor:"transparent",textColor:"white",currentWidth:un,tooltip:`Toggle diplomacy with this tribe (Currently: ${P.diplomacyStatus})`,targetTribeId:P.leaderId};n.uiButtons.push(ae),n.hoveredButtonId===L&&(e.fillStyle=D0,e.globalAlpha=.5,e.fillRect(W.x,W.y,W.width,W.height),e.globalAlpha=1),e.font=`${un*.8}px "Press Start 2P", Arial`,e.textBaseline="middle",e.textAlign="center",e.fillText(U,F+un/2,C)}F+=un+Fn,P.adultCount>0&&(Ns(e,{x:F+Ri/2,y:C},Ri,25,"male"),F+=Ri/2,e.font=`${Yc}px "Press Start 2P", Arial`,e.fillStyle="white",e.textBaseline="middle",e.textAlign="left",e.fillText(` ${P.adultCount}`,F,C),F+=e.measureText(` ${P.adultCount}`).width+Fn/2),P.childCount>0&&(Ns(e,{x:F+Ri/2,y:C},Ri,1,"female"),F+=Ri/2,e.font=`${Yc}px "Press Start 2P", Arial`,e.fillStyle="white",e.textBaseline="middle",e.textAlign="left",e.fillText(` ${P.childCount}`,F,C))}e.restore()}function BC(e,n,r,o,a){const l=M0,c=U0,f=n+o-l-c,h=r+c;e.save(),e.lineWidth=2,e.strokeStyle=a?DI:NI,e.beginPath();const p=5;e.moveTo(f+p,h+p),e.lineTo(f+l-p,h+l-p),e.moveTo(f+l-p,h+p),e.lineTo(f+p,h+l-p),e.stroke(),e.restore()}function GC(e,n,r,o){const{tutorialState:a,tutorial:l}=n;if(a.transitionState===Ut.INACTIVE)return;const c=l.steps[a.currentStepIndex];if(!c)return;e.save(),e.globalAlpha=a.transitionAlpha;const f=TI,h=II,p=wI,m=`${Xc}px "Press Start 2P", Arial`,S=`${Zp}px "Press Start 2P", Arial`,y=_I,w=Zp*1.5;e.font=S;const P=c.text.split(" ");let T="";const C=[];for(let _e=0;_e<P.length;_e++){const Fe=T+P[_e]+" ";e.measureText(Fe).width>f-h*2&&_e>0?(C.push(T),T=P[_e]+" "):T=Fe}C.push(T);const F=h*2+Xc+h/2+C.length*w,U=(r-f)/2,L=o-F-160;e.fillStyle=EI,e.beginPath(),e.moveTo(U+p,L),e.lineTo(U+f-p,L),e.quadraticCurveTo(U+f,L,U+f,L+p),e.lineTo(U+f,L+F-p),e.quadraticCurveTo(U+f,L+F,U+f-p,L+F),e.lineTo(U+p,L+F),e.quadraticCurveTo(U,L+F,U,L+F-p),e.lineTo(U,L+p),e.quadraticCurveTo(U,L,U+p,L),e.closePath(),e.fill(),e.fillStyle=y,e.textAlign="center",e.textBaseline="top",e.font=m,e.fillText(c.title,U+f/2,L+h),e.font=S;let W=L+h+Xc+h/2;for(const _e of C)e.fillText(_e,U+f/2,W),W+=w;const ae=n.hoveredButtonId==="tutorial-dismiss";BC(e,U,L,f,ae),e.restore();const M=M0,G=U0,te=U+f-M-G,fe=L+G;return{x:te,y:fe,width:M,height:M}}function fd(e,n,r){e.save();const o=PI,a={x:n.x-o,y:n.y-o,width:n.width+o*2,height:n.height+o*2};e.strokeStyle=k0,e.lineWidth=O0+Math.sin(r*rf)*1.5,e.setLineDash([8,8]),e.strokeRect(a.x,a.y,a.width,a.height),e.restore()}function xC(e,n){e.fillStyle="white",e.font='30px "Press Start 2P", Arial',e.textAlign="center",e.fillText("Game Over!",e.canvas.width/2,e.canvas.height/2-60),e.font='20px "Press Start 2P", Arial',e.fillText("Lineage Extinct.",e.canvas.width/2,e.canvas.height/2-20),e.fillText(`Cause: ${n.causeOfGameOver||"Unknown"}`,e.canvas.width/2,e.canvas.height/2+20)}const kd=10,bC=3,_m=kd*.7;function zC(e,n,r,o,a){const{position:l,food:c,maxFood:f,ownerId:h,claimedUntil:p}=n;if(e.beginPath(),e.arc(l.x,l.y,kd,0,Math.PI*2),e.fillStyle="#228B22",e.fill(),e.strokeStyle="#006400",e.lineWidth=1,e.stroke(),h&&p&&p>a&&o){const m=r.entities.entities.get(h);if(m){let S;m.id===o.id?S=$d:Y0(o,m,r)?S=GT:S=N0,S&&(e.strokeStyle=S,e.lineWidth=1+Math.sin(a*2)*.5,e.beginPath(),e.arc(l.x,l.y,kd+2,0,Math.PI*2),e.stroke())}}if(c.length>0){const m=Math.PI*2/Math.min(c.length,f);for(let S=0;S<c.length;S++){const y=S*m,w=l.x+_m*Math.cos(y),P=l.y+_m*Math.sin(y);e.beginPath(),e.arc(w,P,bC,0,Math.PI*2),e.fillStyle="#FF0000",e.fill()}}}const Cm=(e,n,r=70,o=50)=>{const a=e>>n&255;return`hsl(${Math.floor(a/255*360)}, ${r}%, ${o}%)`},WC=(e,n)=>{const r=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(!r)return e;const[o,a,l]=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])];return`hsl(${o}, ${a}%, ${Math.max(0,l-n)}%)`},al=(e,n,r,o,a,l,c,f=!1)=>{e.save(),e.translate(n,r),e.rotate(l),e.fillStyle=f?WC(c,15):c,e.beginPath(),e.roundRect(-o/2,0,o,a,o/2),e.fill(),e.restore()},hd=(e,n)=>{const r=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/),o=75;if(!r)return`hsl(0, 0%, ${o}%)`;const[,a,l,c]=r.map(Number),f=l*(1-n),h=c+(o-c)*n;return`hsl(${a}, ${f}%, ${h}%)`},rv={name:"tribe-prey-2d",referenceImage:"swos.png",description:`A 2D prey asset for the Tribe game, featuring various stances and animations.

Prey is an animal which can be hunted by predators or humans in the Tribe game.

Preys look like small 4 leg mammals, with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Visual style

Prey characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like creatures from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in away that conveys their actions clearly.

Prey walks on all fours, unlike human (two legs).

Each prey is described by a unique gene code, which is a number that defines its appearance, size, and other characteristics. The gene code is used to generate the character's appearance, including body proportions, color, and other visual features. The gene code is a 32-bit integer, with each bit representing a specific characteristic of the character.

Prey should have should have visible body parts, such as head, torso, arms, and legs. The body parts should be connected and should not overlap. The character's body parts should be simple shapes, such as circles and rectangles, with solid colors and no gradients or patterns.

Preys are supposed to be sympathetic and friendly, so the character's face should have a friendly expression, with a smile and bright eyes. The character's eyes should be large and expressive, with a simple design.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the a character to give it a sense of depth.

IMPORTANT: The character is visible from the side, just like in Sensible Soccer.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 0 and 12, with 2 being the average age.
- gender:
  - 'male': Male prey are larger and more robust, with a more pronounced musculature.
  - 'female': Female prey are smaller and more agile, with a leaner build.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or a dust particles to indicate movement.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a grey skeleton over time. The character pose and body parts should not be animated in this stance, as the character is dead so it should not move.`,stances:["idle","walk","eat","dead","procreate"],render(e,n,r,o,a,l,c,f={gender:"male",age:2,direction:[1,0],isPregnant:!1,hungryLevel:0,geneCode:8405024}){e.save(),e.imageSmoothingEnabled=!1;const h=o*.15,p=n+o/2,m=r+a/2,S=o-h*2,y=a-h*2,{gender:w,age:P,direction:T,isPregnant:C,hungryLevel:F,geneCode:U}=f,L=.8+Math.min(P,10)/10*.4,W=w==="male"?1.05:.95,ae=1-F/100*.3,M=S*.5*ae*L*W;let G=y*.3*L*W;const te=S*.15*L*W,fe=M*.2,_e=y*.3,Fe=Cm(U,0,30,50);let Ae=Cm(U,8,50,40);if(P>45){const oe=Math.min(1,(P-45)/15);Ae=hd(Ae,oe)}e.translate(p,m),T[0]<0&&e.scale(-1,1);const ve=Math.sin(l*Math.PI*2),re=Math.cos(l*Math.PI*2),Se=_e+G*.2;if(c==="dead"){const oe=Math.min(l,1);e.translate(0,y*.2),e.rotate(Math.PI/2);const Ie=hd(Ae,oe),ye=hd(Fe,oe);e.globalAlpha=.5+oe*.5,e.strokeStyle=Ie,e.lineWidth=fe*.5,e.beginPath(),e.moveTo(-M*.4,0),e.lineTo(M*.4,0),e.stroke();for(let X=-1;X<=1;X+=1)e.beginPath(),e.arc(0,0,G*.4,Math.PI*.4*X-Math.PI*.2,Math.PI*.4*X+Math.PI*.2),e.stroke();e.fillStyle=ye,e.beginPath(),e.arc(M*.5,0,te,0,Math.PI*2),e.fill(),e.fillStyle="black",e.beginPath(),e.arc(M*.55,0,te*.3,0,Math.PI*2),e.fill(),e.restore();return}e.fillStyle="rgba(0, 0, 0, 0.1)",e.beginPath(),e.ellipse(0,Se,M*.7,M*.25,0,0,2*Math.PI),e.fill();let le=0,q=0,x=0,Y=0,z=0,_=0;switch(c){case"idle":q=ve*(y*.02),x=ve*.05,Y=-ve*.05,z=-ve*.05,_=ve*.05;break;case"walk":q=Math.abs(re)*(y*-.04),x=ve*.7,Y=-ve*.7,z=-ve*.7,_=ve*.7;break;case"eat":le=y*.1,q=y*.05,le+=ve*(y*.02);break;case"procreate":q=y*.05;const oe=(1-re)*-S*.05;e.translate(oe,0),e.shadowColor="rgba(255, 182, 193, 0.9)",e.shadowBlur=10;break}C&&w==="female"&&(G*=1.6);const k=q,K=k-G*.2;al(e,M*-.35,K,fe,_e,z,Ae,!0),al(e,M*.35,K,fe,_e,_,Ae,!0),e.fillStyle=Ae,e.beginPath(),e.ellipse(0,k,M/2,G/2,0,0,2*Math.PI),e.fill();const V=M*.45,Te=K+le;e.fillStyle=Fe,e.beginPath(),e.arc(V,Te,te,0,Math.PI*2),e.fill(),T[1]>=0&&(e.fillStyle="black",e.beginPath(),e.arc(V+te*.3,Te-te*.2,te*.15,0,Math.PI*2),e.fill()),al(e,M*-.35,K,fe,_e,x,Ae),al(e,M*.35,K,fe,_e,Y,Ae),e.restore()}};function $C(e,n){let[r,o,a]=e.match(/\d+/g).map(Number);return r=Math.max(0,r-n),o=Math.max(0,o-n),a=Math.max(0,a-n),`rgb(${r}, ${o}, ${a})`}function YC(e){const n=(e&16711680)>>16,r=(e&65280)>>8,o=e&255,a=`rgb(${n}, ${r}, ${o})`,l=$C(a,40),c=(e&255)%100+50,f=(e>>8&255)%100,h=(e>>16&255)%100,p=`rgb(${c}, ${f}, ${h})`,m=(e&8388608)!==0?"#00aaff":"#ffaa00";return{furColor:a,darkerFurColor:l,skinColor:p,eyeColor:m}}const ov={name:"tribe-predator-2d",referenceImage:"swos.png",description:`A 2D predator asset for the Tribe game, featuring various stances and animations.

Predator is an animal which can hunt and attack humans in the Tribe game. It is designed to be a threat to the player, adding an element of danger and challenge to the game world.

Predator look like bears or wolves, with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Visual style

Predator characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like creatures from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in away that conveys their actions clearly.

Predator walks on arms and legs, unlike human (two legs).

Each predator is described by a unique gene code, which is a number that defines its appearance, size, and other characteristics. The gene code is used to generate the character's appearance, including body proportions, color, and other visual features. The gene code is a 32-bit integer, with each bit representing a specific characteristic of the character.

Predator should have visible ears, eyes, and mouth with teeth. It must have a tail. Front legs should be shorter than back legs, and they should be positioned closer to the body. The character's body should be wider at the top and narrower at the bottom, with a slight curve to the back. The character's head should be larger than the body, with a pronounced jaw and sharp teeth.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the a character to give it a sense of depth.

IMPORTANT: The character is visible from the side, just like in Sensible Soccer.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 1 and 20, with 3 being the average age.
- gender:
  - 'male': Male predators are larger and more robust, with a more pronounced musculature.
  - 'female': Female predators are smaller and more agile, with a leaner build.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or a dust particles to indicate movement.
- 'attacking': The character performs an attack animation, with arms raised and a forward motion.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a grey skeleton over time. The character pose and body parts should not be animated in this stance, as the character is dead so it should not move.`,stances:["idle","walk","eat","dead","attacking","procreate"],render(e,n,r,o,a,l,c,f={gender:"male",age:20,direction:[1,0],isPregnant:!1,hungryLevel:0,geneCode:8405024}){const{gender:h,age:p,direction:m,isPregnant:S,hungryLevel:y,geneCode:w}=f;e.save();const P=o*.15,T=Math.max(1,Math.floor((o-P*2)/10)),C=m[0]<0;e.translate(n+o/2,r+a/2),C&&e.scale(-1,1);const F=YC(w),U=.8+Math.min(p,20)/20*.4,L=h==="male"?1.05:.95,W=1-y/100*.25,ae=U*L*W,M=Math.max(0,Math.min(1,(p-15)/5));e.filter=`grayscale(${M})`;const G=F.furColor,te=F.darkerFurColor,fe=F.eyeColor,_e="#FFFFFF",Fe="#c75c5c",Ae="#E0E0E0",ve="#A0A0A0",re=a/2-2*T,Se=Math.sin(l*Math.PI*2),le=Math.abs(Se);if(e.fillStyle="rgba(0,0,0,0.15)",e.beginPath(),e.ellipse(0,re,T*4,T,0,0,2*Math.PI),e.fill(),e.filter="none",c==="dead"){const Ke=Math.min(1,l*2);e.save(),e.translate(0,re-T*3),e.rotate(-Math.PI/2);const Ye=(Rn,Gt,tn,Pn,Nn=!1)=>{e.fillStyle=Nn?ve:Ae,e.fillRect(Rn*T,Gt*T,tn*T,Pn*T)};Ke<1&&(e.globalAlpha=1-Ke,e.fillStyle=G,e.beginPath(),e.ellipse(0,0,T*3,T*5,0,0,Math.PI*2),e.fill(),e.globalAlpha=1),Ke>0&&(e.globalAlpha=Ke,Ye(-1,-4,2,2),Ye(1,-3.5,1,1,!0),Ye(-.5,-2,1,5,!0),Ye(-2.5,-1,5,.5),Ye(-2.5,0,5,.5),Ye(-2.5,1,5,.5),Ye(-3,-2,-1,2,!0),Ye(3,-2,1,2),Ye(-3,2,-1,2,!0),Ye(3,2,1,2),e.globalAlpha=1),e.restore(),e.restore();return}e.fillStyle=G;let q=0,x=0,Y=0,z=[0,0,0,0];switch(c){case"idle":q=Se*T*.1;break;case"walk":const Ke=Math.sin(l*Math.PI*4);q=Math.abs(Ke)*-T*.5,z=[Ke*T,-Ke*T,-Ke*T,Ke*T];break;case"attacking":const Ye=Math.sin(l*Math.PI*4);x=T*2+Ye*T,Y=T*2,q=T;break;case"eat":Y=T*3+le*T,q=T*1.5,e.fillStyle=Fe,e.fillRect(-T,re-T,T*2,T);break;case"procreate":q=Math.sin(l*Math.PI*8)*T*.3,e.fillStyle="rgba(139, 69, 19, 0.5)";for(let Gt=0;Gt<5;Gt++){const tn=(Math.random()-.5)*T*8,Pn=re+(Math.random()-.5)*T*2;le>.5&&e.fillRect(tn,Pn,T*.5,T*.5)}break}const _=T*3*ae*(S?1.3:1),k=T*5*ae,K=-k/1.5,V=re-_-T*2.5+q;e.fillStyle=G,e.beginPath(),e.moveTo(K-T*.5,V+_*.5),e.quadraticCurveTo(K-T*3,V-T,K-T*2+Se*T,V+_+T),e.fill();const Te=T*1.2*ae,oe=T*3*ae,Ie=T*2.5*ae,ye=K+k*.8,X=K+k*.2;e.fillStyle=te,e.fillRect(X,re-Ie,Te,Ie+z[2]),e.fillRect(ye,re-oe,Te,oe+z[0]),e.fillStyle=G,e.beginPath(),e.moveTo(K,V+_),e.lineTo(K,V+T),e.quadraticCurveTo(K+k/2,V,K+k,V+T),e.lineTo(K+k,V+_),e.fill(),e.fillStyle=G,e.fillRect(X+T/2,re-Ie,Te,Ie+z[3]),e.fillRect(ye+T/2,re-oe,Te,oe+z[1]);const ee=T*3.5*ae,Ne=K+k-ee*.3+x,de=V-ee*.3+Y;e.fillStyle=G,e.beginPath(),e.arc(Ne,de,ee/2,0,Math.PI*2),e.fill(),e.beginPath(),e.ellipse(Ne+ee*.4,de+ee*.2,T*1.5,T,0,0,Math.PI*2),e.fill(),m[1]>=0&&(e.fillStyle=fe,e.fillRect(Ne+T*.5,de-T*.5,T*.5,T*.5),c==="attacking"&&(e.fillStyle=_e,e.fillRect(Ne+ee*.5,de+ee*.4,T,T*.4))),e.fillStyle=te,e.beginPath(),e.moveTo(Ne-ee*.4,de-ee*.3),e.lineTo(Ne,de-ee*.7),e.lineTo(Ne,de-ee*.2),e.fill(),e.restore()}};function jC(e,n){const{position:r,gender:o,age:a,decayProgress:l,food:c,radius:f,originalEntityType:h,geneCode:p}=n;if(e.save(),e.globalAlpha=1-l,h==="human"?Tf.render(e,r.x-f,r.y-f,f*2,f*2,l,"dead",o,a,[0,0],!1,0):h==="prey"?rv.render(e,r.x-f,r.y-f,f*2,f*2,l,"dead",{gender:o,age:a,direction:[0,0],isPregnant:!1,hungryLevel:0,geneCode:p||8405024}):h==="predator"&&ov.render(e,r.x-f,r.y-f,f*2,f*2,l,"dead",{gender:o,age:a,direction:[0,0],isPregnant:!1,hungryLevel:0,geneCode:p||8405024}),e.restore(),c.length>0){e.save(),e.font=`${qT}px Arial`,e.textAlign="center",e.textBaseline="middle";const m=vt*.9,S=Math.PI/f0*3;c.forEach((y,w)=>{const P=w*S,T=r.x+m*Math.cos(P)*Math.atan2(w,w),C=r.y+m*Math.sin(P)*Math.atan2(w,w),F=W0[y.type];e.fillText(F,T,C)}),e.restore()}}function Qr(e,n,r,o,a,l,c,f){e.save(),e.fillStyle=c,e.fillRect(n,r,o,a),e.fillStyle=f,e.fillRect(n,r,o*Math.max(0,l),a),e.restore()}function VC(e,n,r,o,a,l){if(e.save(),o.length===0){e.restore();return}const c=o.length*a;let f;c>l||c+(o.length-1)*4>l?f=(l-c)/(o.length-1):f=4,o.length===1&&(f=0);for(let h=0;h<o.length;h++){const p=W0[o[h].type];e.fillText(p,n+h*(a+f),r)}e.restore()}function XC(e,n,r,o,a){const l=n.autopilotControls.hoveredAutopilotAction;if(!l)return;let c,f=vt/2;const h=zl[l.action],p=K0[l.action],m=`${h} ${p}`;if("targetEntityId"in l){const S=n.entities.entities.get(l.targetEntityId);S&&(c=S.position,f=S.radius)}else"position"in l&&(c=l.position);if(c){iv(e,c,f,Yd,jd,2,r,o,a),e.save(),e.font=`${io}px "Press Start 2P", Arial`,e.fillStyle="white",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=5;const S=c.x-r.x+o/2,w=c.y-r.y+a/2-f-Gl-io/2;e.fillText(m,S,w),e.restore()}}function KC(e,n,r,o,a){e.save();const l=(Math.sin(a*rf)+1)/2,c=r+Gl+l*5;e.strokeStyle=Yd,e.lineWidth=2,e.setLineDash(jd),e.beginPath(),e.arc(n.x,n.y,c,0,Math.PI*2),e.stroke(),e.setLineDash([]);const f=zl[o],h=K0[o];if(f){e.font=`${io*1.5}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle";const p=n.y-c-25;e.fillText(f,n.x,p),e.font=`${io*.8}px "Press Start 2P", Arial`,e.fillText(h,n.x,p+25)}e.restore()}function Rm(e,n,r){e.save();const o=30,a=70,l=3,c=a/l;for(let f=0;f<l;f++){const h=f*c,p=(r*o+h)%a,m=1-p/a;e.strokeStyle=`rgba(255, 215, 0, ${m*.7})`,e.lineWidth=1+(1-m)*2,e.beginPath(),e.arc(n.x,n.y,p,0,Math.PI*2),e.stroke()}e.restore()}function QC(e,n){const{activeAutopilotAction:r,behaviors:o}=n.autopilotControls,a=It(n);if(a&&(a.isCallingToFollow&&Rm(e,a.position,n.time),o.followLeader&&!r&&Rm(e,a.position,n.time),r)){let l,c=15;if("position"in r)l=r.position;else if("targetEntityId"in r){const f=n.entities.entities.get(r.targetEntityId);f&&(l=f.position,c=f.radius||30)}l&&r.action!==Ee.AutopilotFollowMe&&!a.isCallingToFollow&&KC(e,l,c,r.action,n.time)}}function Pm(e,n,r,o,a,l,c=!0){const f=n.split(" ");let h="";const p=[];for(let m=0;m<f.length;m++){const S=h+f[m]+" ";e.measureText(S).width>a&&m>0?(p.push(h),h=f[m]+" "):h=S}if(p.push(h),c)for(let m=0;m<p.length;m++)e.fillText(p[m],r,o+m*l);return p.length*l}function ZC(e){return 1-Math.pow(1-e,3)}function qC(e,n,r,o){n.notificationButtonRects={dismiss:new Map,view:new Map};const a=n.notifications.filter(c=>!c.isDismissed);if(a.length===0)return;e.save();let l=o-VI;for(const c of a){const f=r-Qa-nr;e.font=`${Kc}px "Press Start 2P", Arial`;const h=f+nr,p=Qa-nr*2,m=Pm(e,c.message,-9999,-9999,p,Kc*1.2,!1),S=nr*2+m+Ln,y=l-S,w=Date.now()-c.creationTime,P=Math.min(w/jI,1),T=ZC(P),C=o,F=C+(y-C)*T;e.fillStyle=xI,e.beginPath(),e.roundRect(f,F,Qa,S,GI),e.fill(),e.fillStyle=bI,e.textBaseline="top",Pm(e,c.message,h,F+nr,p,Kc*1.2,!0);const U=F+S-Ln-nr/2,L=f+Qa-Ln-nr/2,W={x:L,y:U,width:Ln,height:Ln};n.notificationButtonRects.dismiss.set(c.id,W);const ae=n.hoveredButtonId===`notification-dismiss-${c.id}`;if(e.fillStyle=ae?tm:zI,e.font=`${Ln}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("",W.x+W.width/2,W.y+W.height/2),c.targetEntityIds||c.targetPosition||c.targetArea||c.targetRadius){const te={x:L-Ln-em,y:U,width:Ln,height:Ln};n.notificationButtonRects.view.set(c.id,te);const fe=n.hoveredButtonId===`notification-view-${c.id}`;e.fillStyle=fe?tm:WI,e.font=`${Ln*(fe?1.5:1.2)}px Arial`,e.fillText("",te.x+te.width/2,te.y+te.height/2)}l-=S+em}e.restore()}const JC={moving:"walk",gathering:"gathering",eating:"eat",feeding:"eat",procreating:"procreate",idle:"idle",attacking:"attacking",planting:"gathering"};function e1(e,n){var f;const{radius:r,position:o,activeAction:a="idle"}=n,l=((f=n.stateMachine)==null?void 0:f[0])||"N/A",c=n.isAdult?vt+20:vt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${a}`,o.x,o.y-c),e.fillText(`State: ${l}`,o.x,o.y-c+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-c+20),e.fillText(`Cooldown: ${n.attackCooldown||"N/A"}`,o.x,o.y-c+30),e.fillText(`Tribe: ${n.leaderId||"N/A"}`,o.x,o.y-c+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(255, 0, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function t1(e,n,r){if(!n.aiBehaviorTree||!n.aiBlackboard)return;const o=n.aiBlackboard.getNodeExecutionData();e.save(),e.font=`${Kd}px Arial`,e.textAlign="left",e.textBaseline="top";const a=S=>{switch(S){case I.SUCCESS:return Zd;case I.FAILURE:return qd;case I.RUNNING:return Jd;case I.NOT_EVALUATED:case null:default:return ef}},l=S=>{if(!S.name||!o.has(S.name))return{width:0,height:0};let y=0,w=0;const P=o.get(S.name),T=` ${S.name}`+(P!=null&&P.debugInfo?`: ${P.debugInfo}`:""),C=e.measureText(T).width,F=(S.depth??0)*ro+8+C+so+Lt+20;if(y=Math.max(y,F),w+=ni,S.children)for(const U of S.children){const L=l(U);y=Math.max(y,L.width),w+=L.height}else if(S.child){const U=l(S.child);y=Math.max(y,U.width),w+=U.height}return{width:y,height:w}},c=(S,y,w,P)=>{if(!S.name||!o.has(S.name))return y;let T=y;const C=o.get(S.name),F=w+2+(S.depth??0)*ro;let U=I.NOT_EVALUATED,L=oo,W="";if(C){U=C.status,W=C.debugInfo;const G=nf/pt*gt,te=r-C.lastExecuted,fe=Math.max(0,1-te/G);L=af(oo,tf,fe),te>ii&&(U=I.NOT_EVALUATED)}const ae=a(U);e.fillStyle=ae,e.fillText("",F,T),e.fillStyle=L;const M=` ${S.name}`+(W?`: ${W}`:"");if(e.fillText(M,F+8,T),C&&C.executionHistory.length>0){const{executionHistory:G}=C,te=xl/pt*gt,fe=r,_e=fe-te,Fe=w+P-Lt-so;let Ae=Fe;const ve=T+(ni-dn)/2,re=G.filter(k=>k.time<_e);let Se=re.length>0?re[re.length-1].status:null,le=_e;const q=G.filter(k=>k.time>=_e&&k.time<=fe),x=Lt/te;e.fillStyle="rgba(255, 255, 255, 0.1)",e.fillRect(Fe,ve,Lt,dn);for(const k of q){const V=(k.time-le)*x;V>0&&(e.fillStyle=a(Se),e.fillRect(Ae,ve,V,dn),Ae+=V),Se=k.status,le=k.time}r-le>ii&&(Se=I.NOT_EVALUATED);const z=(fe-le)*x;e.fillStyle=a(Se);const _=Fe+Lt-Ae;e.fillRect(Ae,ve,Math.min(z,_),dn)}if(T+=ni,S.children)for(const G of S.children)T=c(G,T,w,P);else S.child&&(T=c(S.child,T,w,P));return T},{width:f,height:h}=l(n.aiBehaviorTree);if(h===0){e.restore();return}const p=n.position.x+Vd,m=n.position.y+Xd-h/2;e.fillStyle=Qd,e.fillRect(p,m,f,h+4),c(n.aiBehaviorTree,m+2,p,f),e.restore()}function n1(e,n,r,o,a){e.save(),e.font=`${Cd}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(r,n.x,n.y-(o?vt:co)-Cd-a),e.restore()}function i1(e,n,r,o,a){const l=n.x,c=n.y-r-o/2;e.save(),e.fillStyle=a,e.strokeStyle=a,e.lineWidth=1.5,e.beginPath(),e.rect(l-o/2,c,o,o/2),e.fill(),e.beginPath(),e.moveTo(l-o/2,c),e.lineTo(l-o/4,c-o/3),e.lineTo(l-o/6,c),e.moveTo(l-o/6,c),e.lineTo(l,c-o/2),e.lineTo(l+o/6,c),e.moveTo(l+o/6,c),e.lineTo(l+o/4,c-o/3),e.lineTo(l+o/2,c),e.stroke(),e.restore()}function r1(e,n,r){var f;const{position:o,radius:a}=n,l=o.x-jc/2,c=o.y-a-oI;if(((f=n.stateMachine)==null?void 0:f[0])===zn){const h=n.stateMachine[1],p=r-h.attackStartTime,m=Math.min(p/v0,1);Qr(e,l,c,jc,jp,m,Vr,sI)}else if(n.attackCooldown&&n.attackCooldown>0){const h=1-n.attackCooldown/Hl;Qr(e,l,c,jc,jp,h,Vr,aI)}}function o1(e,n,r){const a="";e.save(),e.font="15px Arial",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=3,e.fillText(a,n.x,n.y-r),e.restore()}function s1(e,n,r=!1,o=!1,a=!1,l=!1,c=!1,f=!1,h=!1,p=!1,m,S){const{position:y,activeAction:w="idle"}=n,P=n.isAdult?vt:vt*.6,T=JC[w]||"idle";Tf.render(e,y.x-P,y.y-P,P*2,P*2,n.animationProgress||0,T,n.gender,n.age,[n.direction.x,n.direction.y],n.isPregnant??!1,n.hunger),f&&(e.save(),e.strokeStyle=N0,e.lineWidth=2,e.beginPath(),e.arc(y.x,y.y,P+3,0,2*Math.PI),e.stroke(),e.restore());let C,F;if(c?(C=bT,F=P0):r?(C=xT,F=$d):a?(C=zT,F=BT):o?(C=WT,F=C0):l&&(C=$T,F=R0),C&&F&&i1(e,y,P,C,F),n.tribeBadge&&n1(e,y,n.tribeBadge,n.isAdult??!1,C??0),h){let L=(n.isAdult?vt:co)+5;C&&(L+=C),n.tribeBadge&&(L+=Cd),o1(e,y,L)}const U=p&&(S===void 0||n.id===S);U&&n.aiBlackboard&&t1(e,n,m),r1(e,n,m),U&&e1(e,n)}const a1={grazing:"eat",moving:"walk",procreating:"procreate",feeding:"eat",idle:"idle"};function l1(e,n){var f;const{radius:r,position:o,activeAction:a="idle"}=n,l=((f=n.stateMachine)==null?void 0:f[0])||"N/A",c=n.isAdult?vt+20:vt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${a}`,o.x,o.y-c),e.fillText(`State: ${l}`,o.x,o.y-c+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-c+20),e.fillText(`Hunger: ${Math.round(n.hunger)}`,o.x,o.y-c+30),e.fillText(`Age: ${Math.round(n.age)}`,o.x,o.y-c+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(0, 255, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function u1(e,n,r){if(!n.aiBehaviorTree||!n.aiBlackboard)return;const o=n.aiBlackboard.getNodeExecutionData();e.save(),e.font=`${Kd}px Arial`,e.textAlign="left",e.textBaseline="top";const a=S=>{switch(S){case I.SUCCESS:return Zd;case I.FAILURE:return qd;case I.RUNNING:return Jd;case I.NOT_EVALUATED:case null:default:return ef}},l=S=>{if(!S.name||!o.has(S.name))return{width:0,height:0};let y=0,w=0;const P=o.get(S.name),T=` ${S.name}`+(P!=null&&P.debugInfo?`: ${P.debugInfo}`:""),C=e.measureText(T).width,F=(S.depth??0)*ro+8+C+so+Lt+20;if(y=Math.max(y,F),w+=ni,S.children)for(const U of S.children){const L=l(U);y=Math.max(y,L.width),w+=L.height}else if(S.child){const U=l(S.child);y=Math.max(y,U.width),w+=U.height}return{width:y,height:w}},c=(S,y,w,P)=>{if(!S.name||!o.has(S.name))return y;let T=y;const C=o.get(S.name),F=w+2+(S.depth??0)*ro;let U=I.NOT_EVALUATED,L=oo,W="";if(C){U=C.status,W=C.debugInfo;const G=nf/pt*gt,te=r-C.lastExecuted,fe=Math.max(0,1-te/G);L=af(oo,tf,fe),te>ii&&(U=I.NOT_EVALUATED)}const ae=a(U);e.fillStyle=ae,e.fillText("",F,T),e.fillStyle=L;const M=` ${S.name}`+(W?`: ${W}`:"");if(e.fillText(M,F+8,T),C&&C.executionHistory.length>0){const{executionHistory:G}=C,te=xl/pt*gt,fe=r,_e=fe-te,Fe=w+P-Lt-so;let Ae=Fe;const ve=T+(ni-dn)/2,re=G.filter(k=>k.time<_e);let Se=re.length>0?re[re.length-1].status:null,le=_e;const q=G.filter(k=>k.time>=_e&&k.time<=fe),x=Lt/te;e.fillStyle="rgba(255, 255, 255, 0.1)",e.fillRect(Fe,ve,Lt,dn);for(const k of q){const V=(k.time-le)*x;V>0&&(e.fillStyle=a(Se),e.fillRect(Ae,ve,V,dn),Ae+=V),Se=k.status,le=k.time}r-le>ii&&(Se=I.NOT_EVALUATED);const z=(fe-le)*x;e.fillStyle=a(Se);const _=Fe+Lt-Ae;e.fillRect(Ae,ve,Math.min(z,_),dn)}if(T+=ni,S.children)for(const G of S.children)T=c(G,T,w,P);else S.child&&(T=c(S.child,T,w,P));return T},{width:f,height:h}=l(n.aiBehaviorTree);if(h===0){e.restore();return}const p=n.position.x+Vd,m=n.position.y+Xd-h/2;e.fillStyle=Qd,e.fillRect(p,m,f,h+4),c(n.aiBehaviorTree,m+2,p,f),e.restore()}function c1(e,n,r=!1,o=0,a){var m,S;const{position:l,activeAction:c="idle"}=n,f=n.isAdult?n.radius:n.radius*.6,h=a1[c]||"idle";if(rv.render(e,l.x-f,l.y-f,f*2,f*2,n.animationProgress||0,h,{gender:n.gender,age:n.age,direction:[((m=n.direction)==null?void 0:m.x)||1,((S=n.direction)==null?void 0:S.y)||0],isPregnant:n.isPregnant??!1,hungryLevel:n.hunger,geneCode:n.geneCode}),n.hitpoints<n.maxHitpoints){const y=f*1.5,w=3,P=l.x-y/2,T=l.y-f-8;e.fillStyle="#555",e.fillRect(P,T,y,w);const C=n.hitpoints/n.maxHitpoints;e.fillStyle=C>.5?"#4CAF50":C>.25?"#FFC107":"#F44336",e.fillRect(P,T,y*C,w)}const p=r&&(a===void 0||n.id===a);p&&n.aiBlackboard&&u1(e,n,o),p&&l1(e,n)}const d1={attacking:"attacking",eating:"eat",moving:"walk",procreating:"procreate",feeding:"eat",idle:"idle"};function f1(e,n){var f;const{radius:r,position:o,activeAction:a="idle"}=n,l=((f=n.stateMachine)==null?void 0:f[0])||"N/A",c=n.isAdult?vt+20:vt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${a}`,o.x,o.y-c),e.fillText(`State: ${l}`,o.x,o.y-c+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-c+20),e.fillText(`Hunger: ${Math.round(n.hunger)}`,o.x,o.y-c+30),e.fillText(`Age: ${Math.round(n.age)}`,o.x,o.y-c+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(255, 0, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function h1(e,n,r){if(!n.aiBehaviorTree||!n.aiBlackboard)return;const o=n.aiBlackboard.getNodeExecutionData();e.save(),e.font=`${Kd}px Arial`,e.textAlign="left",e.textBaseline="top";const a=S=>{switch(S){case I.SUCCESS:return Zd;case I.FAILURE:return qd;case I.RUNNING:return Jd;case I.NOT_EVALUATED:case null:default:return ef}},l=S=>{if(!S.name||!o.has(S.name))return{width:0,height:0};let y=0,w=0;const P=o.get(S.name),T=` ${S.name}`+(P!=null&&P.debugInfo?`: ${P.debugInfo}`:""),C=e.measureText(T).width,F=(S.depth??0)*ro+8+C+so+Lt+20;if(y=Math.max(y,F),w+=ni,S.children)for(const U of S.children){const L=l(U);y=Math.max(y,L.width),w+=L.height}else if(S.child){const U=l(S.child);y=Math.max(y,U.width),w+=U.height}return{width:y,height:w}},c=(S,y,w,P)=>{if(!S.name||!o.has(S.name))return y;let T=y;const C=o.get(S.name),F=w+2+(S.depth??0)*ro;let U=I.NOT_EVALUATED,L=oo,W="";if(C){U=C.status,W=C.debugInfo;const G=nf/pt*gt,te=r-C.lastExecuted,fe=Math.max(0,1-te/G);L=af(oo,tf,fe),te>ii&&(U=I.NOT_EVALUATED)}const ae=a(U);e.fillStyle=ae,e.fillText("",F,T),e.fillStyle=L;const M=` ${S.name}`+(W?`: ${W}`:"");if(e.fillText(M,F+8,T),C&&C.executionHistory.length>0){const{executionHistory:G}=C,te=xl/pt*gt,fe=r,_e=fe-te,Fe=w+P-Lt-so;let Ae=Fe;const ve=T+(ni-dn)/2,re=G.filter(k=>k.time<_e);let Se=re.length>0?re[re.length-1].status:null,le=_e;const q=G.filter(k=>k.time>=_e&&k.time<=fe),x=Lt/te;e.fillStyle="rgba(255, 255, 255, 0.1)",e.fillRect(Fe,ve,Lt,dn);for(const k of q){const V=(k.time-le)*x;V>0&&(e.fillStyle=a(Se),e.fillRect(Ae,ve,V,dn),Ae+=V),Se=k.status,le=k.time}r-le>ii&&(Se=I.NOT_EVALUATED);const z=(fe-le)*x;e.fillStyle=a(Se);const _=Fe+Lt-Ae;e.fillRect(Ae,ve,Math.min(z,_),dn)}if(T+=ni,S.children)for(const G of S.children)T=c(G,T,w,P);else S.child&&(T=c(S.child,T,w,P));return T},{width:f,height:h}=l(n.aiBehaviorTree);if(h===0){e.restore();return}const p=n.position.x+Vd,m=n.position.y+Xd-h/2;e.fillStyle=Qd,e.fillRect(p,m,f,h+4),c(n.aiBehaviorTree,m+2,p,f),e.restore()}function g1(e,n,r=!1,o=0,a){var m,S;const{position:l,activeAction:c="idle"}=n,f=n.isAdult?n.radius:n.radius*.6,h=d1[c]||"idle";if(ov.render(e,l.x-f,l.y-f,f*2,f*2,n.animationProgress||0,h,{gender:n.gender,age:n.age,direction:[((m=n.direction)==null?void 0:m.x)||1,((S=n.direction)==null?void 0:S.y)||0],isPregnant:n.isPregnant??!1,hungryLevel:n.hunger,geneCode:n.geneCode}),n.hitpoints<n.maxHitpoints){const y=f*1.5,w=3,P=l.x-y/2,T=l.y-f-8;e.fillStyle="#555",e.fillRect(P,T,y,w);const C=n.hitpoints/n.maxHitpoints;e.fillStyle=C>.5?"#4CAF50":C>.25?"#FFC107":"#F44336",e.fillRect(P,T,y*C,w)}(n.attackCooldown&&n.attackCooldown>0||n.huntCooldown&&n.huntCooldown>0)&&(e.strokeStyle="#FF8C00",e.lineWidth=3,e.beginPath(),e.arc(l.x,l.y,f+3,0,2*Math.PI),e.stroke());const p=r&&(a===void 0||n.id===a);p&&n.aiBlackboard&&h1(e,n,o),p&&f1(e,n)}const sv=15;function Nm(e,n,r,o,a=1.5){const l=r-n.startTime,c=Math.min(l/n.duration,1),f=1-c,p=1+Math.sin(c*Math.PI*2)*(a-1),m=sv*p;e.save(),e.globalAlpha=f,e.beginPath(),e.arc(n.position.x,n.position.y,Math.max(0,m),0,Math.PI*2),e.fillStyle=o,e.fill(),e.restore()}function zr(e,n,r,o,a=2){const l=r-n.startTime,c=Math.min(l/n.duration,1),f=1-c,h=sv*2*c;e.save(),e.globalAlpha=f,e.beginPath(),e.arc(n.position.x,n.position.y,h,0,Math.PI*2),e.strokeStyle=o,e.lineWidth=a,e.stroke(),e.restore()}function Pi(e,n,r,o){const a=r-n.startTime,l=Math.min(a/n.duration,1),c=1-l,f=-20*l;e.save(),e.globalAlpha=c,e.font="20px Arial",e.textAlign="center",e.fillText(o,n.position.x,n.position.y+f),e.restore()}function p1(e,n,r){switch(n.type){case ce.Hunger:Nm(e,n,r,"rgba(255, 165, 0, 0.7)",1);break;case ce.Procreation:Pi(e,n,r,"");break;case ce.Pregnant:Nm(e,n,r,"rgba(255, 105, 180, 0.7)",1.2);break;case ce.TargetAcquired:zr(e,n,r,"rgba(255, 0, 0, 0.8)",3);break;case ce.Attack:Pi(e,n,r,"");break;case ce.Partnered:Pi(e,n,r,"");break;case ce.BushClaimed:zr(e,n,r,"rgba(0, 255, 0, 0.7)",2);break;case ce.BushClaimLost:zr(e,n,r,"rgba(128, 128, 128, 0.7)",2);break;case ce.Eating:Pi(e,n,r,"");break;case ce.ChildFed:Pi(e,n,r,"");break;case ce.AttackDeflected:Pi(e,n,r,"");break;case ce.AttackResisted:Pi(e,n,r,"");break;case ce.Hit:Pi(e,n,r,"");break;case ce.SeizeBuildup:zr(e,n,r,"rgba(255, 215, 0, 0.8)",4);break;case ce.Seize:zr(e,n,r,"rgba(148, 0, 211, 0.8)",4);break;case ce.CallToAttack:zr(e,n,r,"rgba(255, 255, 0, 0.8)",4);break}}function Dm(e,n,r,o,a,l,c){e.save();const{position:f}=n;e.strokeStyle=o,e.lineWidth=a+Math.sin(c*l)*(a/2),e.setLineDash([8,8]),e.beginPath(),e.arc(f.x,f.y,r,0,2*Math.PI),e.stroke(),e.restore()}function Ni(e,n,r,o,a,...l){const c={...a.position};for(let f=-r;f<=r;f+=r)for(let h=-n;h<=n;h+=n)a.position.x=c.x+h,a.position.y=c.y+f,o(e,a,...l);a.position=c}function m1(e,n,r){const o=It(n),a=o?Tt(n,o):[],l=oi(a),{width:c,height:f}=n.mapDimensions;Array.from(n.entities.entities.values()).sort((m,S)=>m.position.y-S.position.y||m.id-S.id).forEach(m=>{var S,y;if(m.type==="berryBush")Ni(e,c,f,zC,m,n,o,n.time);else if(m.type==="human"){const w=m,P=w.id===(o==null?void 0:o.id),T=a.some(M=>M.id===w.id),C=w.id===(l==null?void 0:l.id),F=o&&(w.id===o.motherId||w.id===o.fatherId),U=o&&(((S=w.partnerIds)==null?void 0:S.includes(o.id))||((y=o.partnerIds)==null?void 0:y.includes(w.id))),L=(o==null?void 0:o.attackTargetId)===w.id,W=w.leaderId?n.entities.entities.get(w.leaderId):void 0,ae=o?w.leaderId===o.id&&w.activeAction==="moving"&&w.target===w.leaderId&&(W==null?void 0:W.isCallingToFollow):!1;Ni(e,c,f,s1,w,P,F,T,U,C,L,ae,r,n.time,n.debugCharacterId)}else m.type==="corpse"?Ni(e,c,f,jC,m):m.type==="prey"?Ni(e,c,f,c1,m,r,n.time,n.debugCharacterId):m.type==="predator"&&Ni(e,c,f,g1,m,r,n.time,n.debugCharacterId)}),n.visualEffects.forEach(m=>{Ni(e,c,f,p1,m,n.time)});const p=n.notifications.filter(m=>!m.isDismissed);for(const m of p)if(m.highlightedEntityIds&&m.renderHighlights)for(const S of m.highlightedEntityIds){const y=n.entities.entities.get(S);y&&Ni(e,c,f,Dm,y,XI,KI,ZI,QI,n.time)}if(n.tutorialState.isActive&&n.tutorialState.highlightedEntityIds.size>0)for(const m of n.tutorialState.highlightedEntityIds){const S=n.entities.entities.get(m);S&&Ni(e,c,f,Dm,S,RI,k0,O0,rf,n.time)}}function v1(e,n,r,o,a,l){let c=null,f=null;e.textAlign="left";let h=jt+ki;const m=n.time/(gt/pt)/Ll%1,S=es[$r.Time],y=25,w=jt+y;e.fillText(S,jt,h+qt/2+ki/3),Qr(e,w,h,Ci,qt,m,Vr,ZT),h+=qt+qn;const P=h+er/2,T=h+(er-qt)/2,C=5;Ns(e,{x:jt*2,y:P},er,5,r.gender,!1,!1,!1);const F=jt+er+C,U=Ci+y-(er+C)*2;Qr(e,F,T,U,qt,Math.floor(r.age)/ys,Vr,QT),Ns(e,{x:F+U+C+er/2,y:P},er,ys,r.gender,!1,!1,!1),h+=qt+qn*2;const L=[],W=new Set;if(L.push({member:r,isPlayer:!0,isHeir:!1,isPartner:!1,isParent:!1}),W.add(r.id),o&&!W.has(o.id)&&(L.push({member:o,isPlayer:!1,isHeir:!0,isPartner:!1,isParent:!1}),W.add(o.id)),a.forEach(re=>{W.has(re.id)||(L.push({member:re,isPlayer:!1,isHeir:!1,isPartner:!0,isParent:!1}),W.add(re.id))}),l.forEach(re=>{W.has(re.id)||(L.push({member:re,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!1}),W.add(re.id))}),r.motherId&&!W.has(r.motherId)){const re=n.entities.entities.get(r.motherId);re&&(L.push({member:re,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!0}),W.add(re.id))}if(r.fatherId&&!W.has(r.fatherId)){const re=n.entities.entities.get(r.fatherId);re&&(L.push({member:re,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!0}),W.add(re.id))}const ae=es[$r.Family],M=10,G=jt+ki+M,te=Ci+y-(ki+M),fe=h+ja/2;e.font=`${ki}px "Press Start 2P", Arial`,e.textBaseline="middle",e.fillText(ae,jt,fe);const _e=h+ja/2;LC(e,G,_e,L,ja,te),h+=ja+qn,e.textBaseline="alphabetic";const Fe=es[$r.Hitpoints];e.fillText(Fe,jt,h+qt/2+ki/3),Qr(e,w,h,Ci,qt,r.hitpoints/r.maxHitpoints,Vr,KT),h+=qt+qn;const Ae=es[$r.Hunger];e.fillText(Ae,jt,h+qt/2+ki/3),Qr(e,w,h,Ci,qt,(en-r.hunger)/en,Vr,XT),c={x:jt,y:h-qn/2,width:Ci+y,height:qt+qn},h+=qt+qn,e.textBaseline="middle";const ve=es[$r.Food];return e.fillText(ve,jt,h+Ya/2),VC(e,w,h+Ya/2,r.food,Ya,Ci),f={x:jt,y:h-qn/5,width:Ci+y,height:Ya+qn},e.textBaseline="alphabetic",{hungerBarRect:c,foodBarRect:f}}function Pl(e,n,r,o,a,l=!1){var f;if(e.save(),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="#2c5234",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.translate(e.canvas.width/2-o.x,e.canvas.height/2-o.y),!l&&n.gameOver){e.restore(),xC(e,n);return}m1(e,n,r);const c=n.notifications.filter(h=>!h.isDismissed);for(const h of c){const p=(Math.sin(n.time*YI)+1)/2;e.globalAlpha=p*.5+.25,e.fillStyle=$I,h.targetArea&&e.fillRect(h.targetArea.x,h.targetArea.y,h.targetArea.width,h.targetArea.height),h.targetRadius&&(e.beginPath(),e.arc(h.targetRadius.x,h.targetRadius.y,h.targetRadius.radius,0,Math.PI*2),e.fill())}if(e.globalAlpha=1,QC(e,n),e.restore(),!l){e.fillStyle=YT,e.font=`${ki}px "Press Start 2P", Arial`,e.shadowColor=jT,e.shadowBlur=VT,n.uiButtons=[];const h=It(n);let p=null,m=null;if(h){const w=Tt(n,h),P=oi(w),T=((f=h.partnerIds)==null?void 0:f.map(F=>n.entities.entities.get(F)).filter(F=>F!==void 0))||[],C=v1(e,n,h,P,T,w);p=C.hungerBarRect,m=C.foodBarRect}const S=V0(n,h==null?void 0:h.leaderId);HC(e,n,S,e.canvas.width,e.canvas.height);const{commandButtonsRect:y}=EC(e,n,e.canvas.width);if(e.shadowColor="transparent",e.shadowBlur=0,h&&(XC(e,n,o,e.canvas.width,e.canvas.height),a.length>0&&PC(e,a,h,o,e.canvas.width,e.canvas.height)),n.tutorialState.activeUIHighlights.size>0){const{activeUIHighlights:w}=n.tutorialState;w.has(dr.HUNGER_BAR)&&p&&fd(e,p,n.time),w.has(dr.FOOD_BAR)&&m&&fd(e,m,n.time),w.has(dr.COMMAND_BUTTONS)&&y&&fd(e,y,n.time)}if(n.tutorialState.isActive){const w=GC(e,n,e.canvas.width,e.canvas.height);w&&n.uiButtons.push({id:"tutorial-dismiss",action:Le.DismissTutorial,rect:w,text:"",currentWidth:w.width,backgroundColor:"transparent",textColor:"transparent"})}qC(e,n,e.canvas.width,e.canvas.height),n.isPaused&&_C(e)}}const S1=Wn.div`
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
`,y1=Wn.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #2c5234;
`,A1=Wn.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  z-index: 1;
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0.7) 100%);
`,T1=Wn.h1`
  font-family: 'Press Start 2P', cursive;
  font-size: 4rem;
  color: #fff;
  text-shadow: 4px 4px 0px #ff0000;
  margin-bottom: 2rem;
`,I1=Wn.button`
  font-family: 'Press Start 2P', cursive;
  font-size: 1.5rem;
  padding: 1rem 2rem;
  color: #fff;
  background-color: #ff0000;
  border: 2px solid #fff;
  box-shadow: 4px 4px 0px #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;

  &:hover {
    background-color: #fff;
    color: #ff0000;
    box-shadow: 4px 4px 0px #ff0000;
  }
`,gd="intro-soundtrack",km=()=>{const{setAppState:e}=Nl(),n=De.useRef(null),r=De.useRef(null),o=De.useRef(V_()),a=De.useRef(),l=De.useRef(o.current.viewportCenter),c=De.useRef();De.useEffect(()=>(ff(Re.SoundTrack1,{loop:!0,trackId:gd}),()=>{fm(gd,2)}),[]),De.useEffect(()=>{const m=n.current;if(!m)return;r.current=m.getContext("2d");const S=()=>{m&&r.current&&(m.width=window.innerWidth,m.height=window.innerHeight,Pl(r.current,o.current,!1,l.current,[],!0))};return S(),window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]),De.useEffect(()=>{const m=()=>{const y=Pw(o.current);if(y.length>0){const w=Math.floor(Math.random()*y.length);c.current=y[w].id}};m();const S=setInterval(m,UI);return()=>clearInterval(S)},[]);const[f,h]=l0(m=>{if(!r.current)return;if(a.current===void 0){a.current=m;return}const S=Math.min((m-a.current)/1e3,1);o.current=Yl(o.current,S);const y=c.current?o.current.entities.entities.get(c.current):void 0;if(y){const{mapDimensions:w}=o.current,{width:P,height:T}=w;let C={...y.position};const F=C.x-l.current.x;Math.abs(F)>P/2&&(F>0?C.x-=P:C.x+=P);const U=C.y-l.current.y;Math.abs(U)>T/2&&(U>0?C.y-=T:C.y+=T);let L=of(l.current,C,Gd*S);L={x:(L.x%P+P)%P,y:(L.y%T+T)%T},l.current=L}Pl(r.current,o.current,!1,l.current,[],!0),a.current=m});De.useEffect(()=>(h(),f),[h,f]);const p=()=>{fm(gd,2),e("game")};return He.jsxs(S1,{children:[He.jsx(y1,{ref:n}),He.jsxs(A1,{children:[He.jsx(T1,{children:"Tribe"}),He.jsx(I1,{onClick:p,children:"Start Game"})]})]})};function w1(){return console.log("Tribe game initialized with detailed 2D world state."),j_()}const E1=({canvasRef:e,ctxRef:n,gameStateRef:r,isDebugOnRef:o,viewportCenterRef:a,playerActionHintsRef:l})=>(De.useEffect(()=>{const c=e.current;if(!c)return;n.current=c.getContext("2d");const f=()=>{c&&n.current&&r.current&&(c.width=window.innerWidth,c.height=window.innerHeight,Pl(n.current,r.current,o.current===!0,a.current,l.current,!1))};return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),He.jsx("canvas",{ref:e,style:{display:"block",background:"#2c5234"}})),_1=(e,n,r)=>{let o;const a=Nw(e,r);if(a)if(n.isAdult&&a.type==="berryBush"&&a.food.length>0)o={action:Ee.AutopilotGather,targetEntityId:a.id};else if(n.isAdult&&a.type==="corpse"&&a.food.length>0)o={action:Ee.AutopilotGather,targetEntityId:a.id};else if(a.type==="human"){const l=a;n.isAdult&&ho(n,l,r)?o={action:Ee.AutopilotAttack,targetEntityId:l.id}:hr(n,l,r)?o={action:Ee.AutopilotProcreate,targetEntityId:l.id}:n.food.length>0&&!l.isAdult&&(l.motherId===n.id||l.fatherId===n.id)&&(o={action:Ee.AutopilotFeedChild,targetEntityId:l.id})}else a.type==="prey"?o={action:Ee.AutopilotAttack,targetEntityId:a.id}:a.type==="predator"&&(o={action:Ee.AutopilotAttack,targetEntityId:a.id});else r.autopilotControls.isManuallyPlanting&&n.food.filter(l=>l.type===ri.Berry).length>=As&&uf(e,r,1,Bl,n.id)?o={action:Ee.AutopilotPlant,position:e}:o={action:Ee.AutopilotMove,position:e};return o},C1=(e,n)=>{if(e.isPaused||!It(e))return;const o=e.autopilotControls.hoveredAutopilotAction;e.autopilotControls.activeAutopilotAction=void 0,o?(e.autopilotControls.activeAutopilotAction=o,(o.action===Ee.AutopilotMove||o.action===Ee.AutopilotGather)&&(e.hasPlayerMovedEver=!0),o.action===Ee.AutopilotPlant&&(e.hasPlayerPlantedBush=!0)):e.autopilotControls.activeAutopilotAction={action:Ee.AutopilotMove,position:n},e.autopilotControls.isManuallyMoving=!1,e.autopilotControls.isManuallyPlanting=!1},R1=(e,n,r)=>{var l,c;let o=!0,a=n;switch(e){case"m":n.isMuted=!n.isMuted,hs(n.masterVolume,n.isMuted);break;case"=":case"+":const f=Math.min(1,n.masterVolume+.1);n.masterVolume=parseFloat(f.toFixed(1)),hs(n.masterVolume,n.isMuted);break;case"-":const h=Math.max(0,n.masterVolume-.1);n.masterVolume=parseFloat(h.toFixed(1)),hs(n.masterVolume,n.isMuted);break;case"t":a=Yl(n,w0);break;case" ":case"p":n.isPaused=!n.isPaused;break;case"":case"`":r.current=!r.current,r.current?a.debugCharacterId=((l=It(a))==null?void 0:l.id)??((c=Array.from(a.entities.entities.values()).find(m=>m.type==="human"||m.type==="prey"||m.type==="predator"))==null?void 0:c.id):a.debugCharacterId=void 0;break;case"tab":r.current=!0;const p=Array.from(a.entities.entities.values()).filter(m=>m.type==="human"||m.type==="prey"||m.type==="predator");if(p.length>0){const m=p.sort((P,T)=>{if(P.type==="human"&&P.isPlayer)return-1;if(T.type==="human"&&T.isPlayer)return 1;if(P.type!==T.type){const C={human:0,prey:1,predator:2},F=C[P.type]??999,U=C[T.type]??999;return F-U}return P.id-T.id}),S=a.debugCharacterId,w=((S?m.findIndex(P=>P.id===S):-1)+1)%m.length;a.debugCharacterId=m[w].id}else a.debugCharacterId=void 0;break;default:o=!1;break}return{newState:a,handled:o}},P1=(e,n,r,o,a)=>{const l={gameState:r};if(n&&["e","b","r","h"].includes(e)&&r.hasPlayerEnabledAutopilot++,e==="e"){if(n){r.autopilotControls.behaviors.gathering=!r.autopilotControls.behaviors.gathering;return}const c=Me(o,r,"berryBush",mt,p=>p.food.length>0&&o.food.length<o.maxFood),f=Me(o,r,"corpse",mt,p=>p.food.length>0&&o.food.length<o.maxFood);let h=null;c&&f?h=j(o.position,c.position,r.mapDimensions.width,r.mapDimensions.height)<=j(o.position,f.position,r.mapDimensions.width,r.mapDimensions.height)?c:f:h=c||f,h&&(o.activeAction="gathering",Ue(l,Re.Gather,o.position))}else if(e==="r"){if(n){r.autopilotControls.behaviors.procreation=!r.autopilotControls.behaviors.procreation;return}Me(o,r,"human",mt,f=>hr(o,f,r))&&(o.activeAction="procreating",Ue(l,Re.Procreate,o.position))}else if(e==="f")o.food.length>0&&(o.activeAction="eating",Ue(l,Re.Eat,o.position));else if(e==="h"){if(n){r.autopilotControls.behaviors.feedChildren=!r.autopilotControls.behaviors.feedChildren;return}const c=a.find(f=>f.type===Ee.FeedChild);c&&c.targetEntity&&(o.activeAction="feeding",o.target=c.targetEntity.id)}else if(e==="arrowup"||e==="w")o.direction.y=-1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowdown"||e==="s")o.direction.y=1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowleft"||e==="a")o.direction.x=-1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowright"||e==="d")o.direction.x=1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="q"){if(n){r.autopilotControls.behaviors.attack=!r.autopilotControls.behaviors.attack;return}const c=Me(o,r,"human",Li,f=>ho(o,f,r));c&&(o.activeAction="attacking",o.attackTargetId=c.id)}else if(e==="b"){if(n){r.autopilotControls.behaviors.planting=!r.autopilotControls.behaviors.planting;return}if(a.find(f=>f.type===Ee.Plant)){const f=uf(o.position,r,50,Ed);f&&(o.activeAction="planting",o.target=f,r.hasPlayerPlantedBush=!0)}}else e==="v"?(o.isCallingToAttack=!0,o.callToAttackEndTime=r.time+no,ke(r,ce.CallToAttack,o.position,no),Ue(l,Re.CallToAttack,o.position)):e==="c"?(o.isCallingToFollow=!0,o.callToFollowEndTime=r.time+Ts,ke(r,ce.CallToFollow,o.position,Ts),Ue(l,Re.CallToFollow,o.position)):e==="k"&&gf(o,r)},N1=(e,n,r,o)=>{e==="arrowup"||e==="w"||e==="arrowdown"||e==="s"?n.direction.y=0:(e==="arrowleft"||e==="a"||e==="arrowright"||e==="d")&&(n.direction.x=0),!o.current.has("arrowup")&&!o.current.has("arrowdown")&&!o.current.has("arrowleft")&&!o.current.has("arrowright")&&!o.current.has("w")&&!o.current.has("a")&&!o.current.has("s")&&!o.current.has("d")&&(n.activeAction==="moving"&&(n.activeAction="idle"),r.autopilotControls.isManuallyMoving=!1),!o.current.has("e")&&n.activeAction==="gathering"&&(n.activeAction="idle"),!o.current.has("f")&&n.activeAction==="eating"&&(n.activeAction="idle"),!o.current.has("r")&&n.activeAction==="procreating"&&(n.activeAction="idle"),!o.current.has("h")&&n.activeAction==="feeding"&&(n.activeAction="idle")},D1=(e,n,r)=>{let a=It(e);if(e.debugCharacterId){const l=e.entities.entities.get(e.debugCharacterId);l&&"position"in l&&(a=l)}if(a){const{mapDimensions:l}=e,{width:c,height:f}=l;let h={...a.position};const p=h.x-n.x;Math.abs(p)>c/2&&(p>0?h.x-=c:h.x+=c);const m=h.y-n.y;Math.abs(m)>f/2&&(m>0?h.y-=f:h.y+=f);let S=of(n,h,Gd*r);return S={x:(S.x%c+c)%c,y:(S.y%f+f)%f},S}return e.viewportCenter};function k1(e,n){const{width:r,height:o}=e.mapDimensions;e.viewportCenter={x:(n.x%r+r)%r,y:(n.y%o+o)%o}}const O1=(e,n,r)=>{const o={gameState:r},a=It(r);a&&Ue(o,Re.ButtonClick,a.position);const l=r.uiButtons.find(f=>f.id===e.id);l&&(l.lastActivated=Date.now()),n&&[Le.CommandGather,Le.CommandPlant,Le.ToggleProcreationBehavior].includes(e.action)&&r.hasPlayerEnabledAutopilot++;const{behaviors:c}=r.autopilotControls;switch(e.action){case Le.ToggleMute:r.isMuted=!r.isMuted,hs(r.masterVolume,r.isMuted);break;case Le.TogglePause:r.isPaused=!r.isPaused;break;case Le.FastForward:return Yl(r,w0);case Le.DismissTutorial:r.tutorialState.isActive=!1;break;case Le.CommandEat:a&&a.food.length>0&&(a.activeAction="eating");break;case Le.CommandGather:n?c.gathering=!c.gathering:a&&(a.activeAction="gathering");break;case Le.CommandPlant:n?c.planting=!c.planting:a&&(r.autopilotControls.isManuallyPlanting=!0);break;case Le.ToggleProcreationBehavior:c.procreation=!c.procreation;break;case Le.ToggleAttackBehavior:c.attack=!c.attack;break;case Le.ToggleFeedChildBehavior:c.feedChildren=!c.feedChildren;break;case Le.ToggleAutopilotFollowLeaderBehavior:c.followLeader=!c.followLeader;break;case Le.CommandCallToAttack:a&&a.leaderId===a.id&&(a.isCallingToAttack=!0,a.callToAttackEndTime=r.time+no,ke(r,ce.CallToAttack,a.position,no),Ue(o,Re.CallToAttack,a.position));break;case Le.CommandFollowMe:n?c.followLeader=!c.followLeader:a&&a.leaderId===a.id&&(a.isCallingToFollow=!0,a.callToFollowEndTime=r.time+Ts,ke(r,ce.CallToFollow,a.position,Ts),Ue(o,Re.CallToFollow,a.position));break;case Le.CommandTribeSplit:a&&gf(a,r);break;case Le.ToggleDiplomacy:if(a&&a.leaderId&&e.targetTribeId){const f=a.leaderId,h=e.targetTribeId,p=r.entities.entities.get(h),m=a.diplomacy,S=p==null?void 0:p.diplomacy;if(m&&S){const w=(m.get(h)||Ht.Friendly)===Ht.Friendly?Ht.Hostile:Ht.Friendly;m.set(h,w),S.set(f,w)}}break}return r};function M1(e,n,r){if(!e.notificationButtonRects)return!1;const o=It(e);for(const[a,l]of e.notificationButtonRects.dismiss.entries())if(n>=l.x&&n<=l.x+l.width&&r>=l.y&&r<=l.y+l.height)return Gw(e,a),o&&Ue({gameState:e},Re.ButtonClick,o.position),!0;for(const[a,l]of e.notificationButtonRects.view.entries())if(n>=l.x&&n<=l.x+l.width&&r>=l.y&&r<=l.y+l.height){const c=e.notifications.find(f=>f.id===a);if(c){let f=c.targetPosition;if(!f&&c.targetEntityIds&&c.targetEntityIds.length>0){const h=e.entities.entities.get(c.targetEntityIds[0]);h&&(f=h.position)}return f&&k1(e,f),o&&Ue({gameState:e},Re.ButtonClick,o.position),c.highlightedEntityIds&&(c.renderHighlights=!c.renderHighlights),!0}}return!1}const U1=({isActive:e,gameStateRef:n,canvasRef:r,viewportCenterRef:o,playerActionHintsRef:a,isDebugOnRef:l,keysPressed:c})=>(De.useEffect(()=>{const f=h=>{if(!e()||n.current.gameOver||!r.current||!h.target||h.target!==r.current)return;const p=r.current.getBoundingClientRect(),m=h.clientX-p.left,S=h.clientY-p.top;if(M1(n.current,m,S))return;const w=n.current.uiButtons.find(T=>m>=T.rect.x&&m<=T.rect.x+T.rect.width&&S>=T.rect.y&&S<=T.rect.y+T.rect.height);if(w){n.current=O1(w,h.shiftKey,n.current);return}const P=um({x:m,y:S},o.current,{width:r.current.width,height:r.current.height},n.current.mapDimensions);C1(n.current,P)};return window.addEventListener("mousedown",f),()=>{window.removeEventListener("mousedown",f)}},[e,r,n,o]),De.useEffect(()=>{const f=h=>{if(!e()||!r.current)return;const p=r.current.getBoundingClientRect(),m=h.clientX-p.left,S=h.clientY-p.top;n.current.mousePosition={x:m,y:S};let y;if(n.current.notificationButtonRects){for(const[P,T]of n.current.notificationButtonRects.dismiss.entries())if(m>=T.x&&m<=T.x+T.width&&S>=T.y&&S<=T.y+T.height){y=`notification-dismiss-${P}`;break}if(!y){for(const[P,T]of n.current.notificationButtonRects.view.entries())if(m>=T.x&&m<=T.x+T.width&&S>=T.y&&S<=T.y+T.height){y=`notification-view-${P}`;break}}}if(!y)for(let P=n.current.uiButtons.length-1;P>=0;P--){const T=n.current.uiButtons[P];if(m>=T.rect.x&&m<=T.rect.x+T.rect.width&&S>=T.rect.y&&S<=T.rect.y+T.rect.height){y=T.id;break}}if(n.current.hoveredButtonId=y,y){n.current.autopilotControls.hoveredAutopilotAction=void 0;return}const w=It(n.current);if(w){const P=um({x:m,y:S},o.current,{width:r.current.width,height:r.current.height},n.current.mapDimensions);n.current.autopilotControls.hoveredAutopilotAction=_1(P,w,n.current)}else n.current.autopilotControls.hoveredAutopilotAction=void 0};return window.addEventListener("mousemove",f),()=>{window.removeEventListener("mousemove",f)}},[e,r,n,o]),De.useEffect(()=>{const f=p=>{if(!e()||n.current.gameOver)return;const m=p.key.toLowerCase();if((m===" "||m==="p"||m==="tab")&&p.preventDefault(),m==="escape"){n.current.autopilotControls.activeAutopilotAction=void 0;return}const S=R1(m,n.current,l);if(n.current=S.newState,S.handled)return;const y=It(n.current);y&&(c.current.add(m),P1(m,p.shiftKey,n.current,y,a.current))},h=p=>{if(!e()||n.current.gameOver)return;const m=p.key.toLowerCase();c.current.delete(m);const S=It(n.current);S&&N1(m,S,n.current,c)};return window.addEventListener("keydown",f),window.addEventListener("keyup",h),()=>{window.removeEventListener("keydown",f),window.removeEventListener("keyup",h)}},[e,n,a,l,c]),null),F1=({gameStateRef:e,ctxRef:n,isDebugOnRef:r,viewportCenterRef:o,playerActionHintsRef:a,keysPressed:l,canvasRef:c,setAppState:f,appState:h})=>{const p=De.useRef(),[m,S,y]=l0(w=>{if(!n.current||!p.current){p.current=w;return}const P=Math.min(w-p.current,1e3)/1e3;e.current=Yl(e.current,P);const T=It(e.current);T?a.current=pf(e.current,T):a.current=[],o.current=D1(e.current,o.current,P),Pl(n.current,e.current,r.current,o.current,a.current,!1),p.current=w,e.current.gameOver&&h!=="gameOver"&&(ff(Re.GameOver,{masterVolume:e.current.masterVolume,isMuted:e.current.isMuted}),f("gameOver",{generations:e.current.generationCount,cause:e.current.causeOfGameOver||"Unknown"}))});return De.useEffect(()=>(S(),m),[S,m]),He.jsx(U1,{isActive:y,gameStateRef:e,canvasRef:c,viewportCenterRef:o,playerActionHintsRef:a,isDebugOnRef:r,keysPressed:l})},Om=()=>{const[e]=De.useState(()=>w1());return He.jsx(L1,{initialState:e})},L1=({initialState:e})=>{const n=De.useRef(null),r=De.useRef(null),o=De.useRef(e),a=De.useRef(new Set),l=De.useRef(!1),c=De.useRef(e.viewportCenter),f=De.useRef([]),{appState:h,setAppState:p}=Nl();return He.jsxs(He.Fragment,{children:[He.jsx(E1,{canvasRef:n,ctxRef:r,gameStateRef:o,isDebugOnRef:l,viewportCenterRef:c,playerActionHintsRef:f}),He.jsx(F1,{gameStateRef:o,ctxRef:r,isDebugOnRef:l,viewportCenterRef:c,playerActionHintsRef:f,keysPressed:a,canvasRef:n,setAppState:p,appState:h})]})},H1=Wn.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  background-color: rgba(0, 0, 0, 0.75); // Semi-transparent overlay
  color: #fff;
  padding: 20px;
  z-index: 10; // Ensure it's on top
`,B1=Wn.h1`
  font-family: 'Press Start 2P', cursive;
  font-size: 4rem;
  color: #ff4136; // Red for emphasis
  text-shadow: 4px 4px 0px #000;
  margin-bottom: 1.5rem;
`,ll=Wn.p`
  font-family: 'Press Start 2P', cursive;
  font-size: 1.2rem;
  margin: 0.5em 0;
  color: #fff;
  text-shadow: 2px 2px 0px #000;
`,G1=Wn.button`
  font-family: 'Press Start 2P', cursive;
  font-size: 1rem;
  padding: 1rem 2rem;
  margin-top: 2em;
  color: #fff;
  background-color: #ff4136; // Red button
  border: 2px solid #fff;
  box-shadow: 4px 4px 0px #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  text-transform: uppercase;

  &:hover {
    background-color: #fff;
    color: #ff4136;
    box-shadow: 4px 4px 0px #ff4136;
  }
`,x1=()=>{const{setAppState:e,gameOverDetails:n}=Nl(),r=()=>{e("intro")};return He.jsxs(H1,{children:[He.jsx(B1,{children:"Game Over"}),He.jsx(ll,{children:"Your tribe's lineage has ended."}),n&&He.jsxs(He.Fragment,{children:[He.jsxs(ll,{children:["Generations Survived: ",n.generations]}),He.jsxs(ll,{children:["Cause of Extinction: ",n.cause]})]}),!n&&He.jsx(ll,{children:"Game details are unavailable."}),He.jsx(G1,{onClick:r,children:"Return to Menu"})]})},b1=mA`
  /* CSS Reset */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    padding: 0;
    font-family: 'Press Start 2P', 'Arial', sans-serif;
    background-color: #121212;
    color: #f0f0f0;
    line-height: 1.6;
  }

  /* Additional global styles */
  h1, h2, h3, h4, h5, h6 {
    margin-top: 0;
  }

  button {
    cursor: pointer;
    font-family: inherit;
  }

  /* Prevent overflow issues */
  html, body {
    height: 100%;
    overflow-x: hidden;
  }

  /* Root element for React app */
  #root {
    height: 100%;
  }
`;function z1(e,n){De.useEffect(()=>{const r=()=>{const o=document.location.hash==="#game"?"game":"intro";n(o)};return window.addEventListener("hashchange",r),r(),()=>{window.removeEventListener("hashchange",r)}},[]),De.useEffect(()=>{e==="game"?document.location.hash="#game":e==="intro"&&(document.location.hash="")},[e])}const W1=()=>{const{appState:e,setAppState:n}=Nl();z1(e,n);const r=()=>{switch(e){case"intro":return He.jsx(km,{});case"game":return He.jsx(Om,{});case"gameOver":return He.jsxs(He.Fragment,{children:[He.jsx(Om,{}),He.jsx(x1,{})]});default:return He.jsx(km,{})}};return He.jsxs(He.Fragment,{children:[He.jsx(b1,{}),r()]})},Mm=document.getElementById("root");Mm?Zw().then(()=>{gy.createRoot(Mm).render(He.jsx(xn.StrictMode,{children:He.jsx(py,{initialAppState:document.location.hash==="#game"?"game":"intro",children:He.jsx(W1,{})})}))}):console.error("Failed to find the root element");
