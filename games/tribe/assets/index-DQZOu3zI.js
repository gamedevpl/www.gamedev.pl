var Pv=Object.defineProperty;var Nv=(t,r,o)=>r in t?Pv(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o;var he=(t,r,o)=>Nv(t,typeof r!="symbol"?r+"":r,o);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function o(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=o(l);fetch(l.href,u)}})();function yg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vu={exports:{}},_o={},Ku={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var np;function kv(){if(np)return Ae;np=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),S=Symbol.iterator;function w(E){return E===null||typeof E!="object"?null:(E=S&&E[S]||E["@@iterator"],typeof E=="function"?E:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,O={};function I(E,D,te){this.props=E,this.context=D,this.refs=O,this.updater=te||P}I.prototype.isReactComponent={},I.prototype.setState=function(E,D){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,D,"setState")},I.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function G(){}G.prototype=I.prototype;function z(E,D,te){this.props=E,this.context=D,this.refs=O,this.updater=te||P}var W=z.prototype=new G;W.constructor=z,k(W,I.prototype),W.isPureReactComponent=!0;var j=Array.isArray,de=Object.prototype.hasOwnProperty,F={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function Pe(E,D,te){var q,Se={},oe=null,ge=null;if(D!=null)for(q in D.ref!==void 0&&(ge=D.ref),D.key!==void 0&&(oe=""+D.key),D)de.call(D,q)&&!$.hasOwnProperty(q)&&(Se[q]=D[q]);var fe=arguments.length-2;if(fe===1)Se.children=te;else if(1<fe){for(var X=Array(fe),ne=0;ne<fe;ne++)X[ne]=arguments[ne+2];Se.children=X}if(E&&E.defaultProps)for(q in fe=E.defaultProps,fe)Se[q]===void 0&&(Se[q]=fe[q]);return{$$typeof:t,type:E,key:oe,ref:ge,props:Se,_owner:F.current}}function Me(E,D){return{$$typeof:t,type:E.type,key:D,ref:E.ref,props:E.props,_owner:E._owner}}function Ve(E){return typeof E=="object"&&E!==null&&E.$$typeof===t}function Je(E){var D={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(te){return D[te]})}var Le=/\/+/g;function Ge(E,D){return typeof E=="object"&&E!==null&&E.key!=null?Je(""+E.key):D.toString(36)}function we(E,D,te,q,Se){var oe=typeof E;(oe==="undefined"||oe==="boolean")&&(E=null);var ge=!1;if(E===null)ge=!0;else switch(oe){case"string":case"number":ge=!0;break;case"object":switch(E.$$typeof){case t:case r:ge=!0}}if(ge)return ge=E,Se=Se(ge),E=q===""?"."+Ge(ge,0):q,j(Se)?(te="",E!=null&&(te=E.replace(Le,"$&/")+"/"),we(Se,D,te,"",function(ne){return ne})):Se!=null&&(Ve(Se)&&(Se=Me(Se,te+(!Se.key||ge&&ge.key===Se.key?"":(""+Se.key).replace(Le,"$&/")+"/")+E)),D.push(Se)),1;if(ge=0,q=q===""?".":q+":",j(E))for(var fe=0;fe<E.length;fe++){oe=E[fe];var X=q+Ge(oe,fe);ge+=we(oe,D,te,X,Se)}else if(X=w(E),typeof X=="function")for(E=X.call(E),fe=0;!(oe=E.next()).done;)oe=oe.value,X=q+Ge(oe,fe++),ge+=we(oe,D,te,X,Se);else if(oe==="object")throw D=String(E),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return ge}function Ce(E,D,te){if(E==null)return E;var q=[],Se=0;return we(E,q,"","",function(oe){return D.call(te,oe,Se++)}),q}function pe(E){if(E._status===-1){var D=E._result;D=D(),D.then(function(te){(E._status===0||E._status===-1)&&(E._status=1,E._result=te)},function(te){(E._status===0||E._status===-1)&&(E._status=2,E._result=te)}),E._status===-1&&(E._status=0,E._result=D)}if(E._status===1)return E._result.default;throw E._result}var ie={current:null},H={transition:null},V={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:H,ReactCurrentOwner:F};function x(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:Ce,forEach:function(E,D,te){Ce(E,function(){D.apply(this,arguments)},te)},count:function(E){var D=0;return Ce(E,function(){D++}),D},toArray:function(E){return Ce(E,function(D){return D})||[]},only:function(E){if(!Ve(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Ae.Component=I,Ae.Fragment=o,Ae.Profiler=l,Ae.PureComponent=z,Ae.StrictMode=s,Ae.Suspense=p,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,Ae.act=x,Ae.cloneElement=function(E,D,te){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var q=k({},E.props),Se=E.key,oe=E.ref,ge=E._owner;if(D!=null){if(D.ref!==void 0&&(oe=D.ref,ge=F.current),D.key!==void 0&&(Se=""+D.key),E.type&&E.type.defaultProps)var fe=E.type.defaultProps;for(X in D)de.call(D,X)&&!$.hasOwnProperty(X)&&(q[X]=D[X]===void 0&&fe!==void 0?fe[X]:D[X])}var X=arguments.length-2;if(X===1)q.children=te;else if(1<X){fe=Array(X);for(var ne=0;ne<X;ne++)fe[ne]=arguments[ne+2];q.children=fe}return{$$typeof:t,type:E.type,key:Se,ref:oe,props:q,_owner:ge}},Ae.createContext=function(E){return E={$$typeof:d,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:u,_context:E},E.Consumer=E},Ae.createElement=Pe,Ae.createFactory=function(E){var D=Pe.bind(null,E);return D.type=E,D},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(E){return{$$typeof:h,render:E}},Ae.isValidElement=Ve,Ae.lazy=function(E){return{$$typeof:m,_payload:{_status:-1,_result:E},_init:pe}},Ae.memo=function(E,D){return{$$typeof:v,type:E,compare:D===void 0?null:D}},Ae.startTransition=function(E){var D=H.transition;H.transition={};try{E()}finally{H.transition=D}},Ae.unstable_act=x,Ae.useCallback=function(E,D){return ie.current.useCallback(E,D)},Ae.useContext=function(E){return ie.current.useContext(E)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(E){return ie.current.useDeferredValue(E)},Ae.useEffect=function(E,D){return ie.current.useEffect(E,D)},Ae.useId=function(){return ie.current.useId()},Ae.useImperativeHandle=function(E,D,te){return ie.current.useImperativeHandle(E,D,te)},Ae.useInsertionEffect=function(E,D){return ie.current.useInsertionEffect(E,D)},Ae.useLayoutEffect=function(E,D){return ie.current.useLayoutEffect(E,D)},Ae.useMemo=function(E,D){return ie.current.useMemo(E,D)},Ae.useReducer=function(E,D,te){return ie.current.useReducer(E,D,te)},Ae.useRef=function(E){return ie.current.useRef(E)},Ae.useState=function(E){return ie.current.useState(E)},Ae.useSyncExternalStore=function(E,D,te){return ie.current.useSyncExternalStore(E,D,te)},Ae.useTransition=function(){return ie.current.useTransition()},Ae.version="18.3.1",Ae}var rp;function Fc(){return rp||(rp=1,Ku.exports=kv()),Ku.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip;function Ov(){if(ip)return _o;ip=1;var t=Fc(),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(h,p,v){var m,S={},w=null,P=null;v!==void 0&&(w=""+v),p.key!==void 0&&(w=""+p.key),p.ref!==void 0&&(P=p.ref);for(m in p)s.call(p,m)&&!u.hasOwnProperty(m)&&(S[m]=p[m]);if(h&&h.defaultProps)for(m in p=h.defaultProps,p)S[m]===void 0&&(S[m]=p[m]);return{$$typeof:r,type:h,key:w,ref:P,props:S,_owner:l.current}}return _o.Fragment=o,_o.jsx=d,_o.jsxs=d,_o}var op;function Dv(){return op||(op=1,Vu.exports=Ov()),Vu.exports}var Ie=Dv(),ye=Fc();const An=yg(ye);var oa={},Xu={exports:{}},kt={},Qu={exports:{}},bu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp;function Mv(){return sp||(sp=1,function(t){function r(H,V){var x=H.length;H.push(V);e:for(;0<x;){var E=x-1>>>1,D=H[E];if(0<l(D,V))H[E]=V,H[x]=D,x=E;else break e}}function o(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var V=H[0],x=H.pop();if(x!==V){H[0]=x;e:for(var E=0,D=H.length,te=D>>>1;E<te;){var q=2*(E+1)-1,Se=H[q],oe=q+1,ge=H[oe];if(0>l(Se,x))oe<D&&0>l(ge,Se)?(H[E]=ge,H[oe]=x,E=oe):(H[E]=Se,H[q]=x,E=q);else if(oe<D&&0>l(ge,x))H[E]=ge,H[oe]=x,E=oe;else break e}}return V}function l(H,V){var x=H.sortIndex-V.sortIndex;return x!==0?x:H.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var d=Date,h=d.now();t.unstable_now=function(){return d.now()-h}}var p=[],v=[],m=1,S=null,w=3,P=!1,k=!1,O=!1,I=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(H){for(var V=o(v);V!==null;){if(V.callback===null)s(v);else if(V.startTime<=H)s(v),V.sortIndex=V.expirationTime,r(p,V);else break;V=o(v)}}function j(H){if(O=!1,W(H),!k)if(o(p)!==null)k=!0,pe(de);else{var V=o(v);V!==null&&ie(j,V.startTime-H)}}function de(H,V){k=!1,O&&(O=!1,G(Pe),Pe=-1),P=!0;var x=w;try{for(W(V),S=o(p);S!==null&&(!(S.expirationTime>V)||H&&!Je());){var E=S.callback;if(typeof E=="function"){S.callback=null,w=S.priorityLevel;var D=E(S.expirationTime<=V);V=t.unstable_now(),typeof D=="function"?S.callback=D:S===o(p)&&s(p),W(V)}else s(p);S=o(p)}if(S!==null)var te=!0;else{var q=o(v);q!==null&&ie(j,q.startTime-V),te=!1}return te}finally{S=null,w=x,P=!1}}var F=!1,$=null,Pe=-1,Me=5,Ve=-1;function Je(){return!(t.unstable_now()-Ve<Me)}function Le(){if($!==null){var H=t.unstable_now();Ve=H;var V=!0;try{V=$(!0,H)}finally{V?Ge():(F=!1,$=null)}}else F=!1}var Ge;if(typeof z=="function")Ge=function(){z(Le)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Ce=we.port2;we.port1.onmessage=Le,Ge=function(){Ce.postMessage(null)}}else Ge=function(){I(Le,0)};function pe(H){$=H,F||(F=!0,Ge())}function ie(H,V){Pe=I(function(){H(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){k||P||(k=!0,pe(de))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Me=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return o(p)},t.unstable_next=function(H){switch(w){case 1:case 2:case 3:var V=3;break;default:V=w}var x=w;w=V;try{return H()}finally{w=x}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,V){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var x=w;w=H;try{return V()}finally{w=x}},t.unstable_scheduleCallback=function(H,V,x){var E=t.unstable_now();switch(typeof x=="object"&&x!==null?(x=x.delay,x=typeof x=="number"&&0<x?E+x:E):x=E,H){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=x+D,H={id:m++,callback:V,priorityLevel:H,startTime:x,expirationTime:D,sortIndex:-1},x>E?(H.sortIndex=x,r(v,H),o(p)===null&&H===o(v)&&(O?(G(Pe),Pe=-1):O=!0,ie(j,x-E))):(H.sortIndex=D,r(p,H),k||P||(k=!0,pe(de))),H},t.unstable_shouldYield=Je,t.unstable_wrapCallback=function(H){var V=w;return function(){var x=w;w=V;try{return H.apply(this,arguments)}finally{w=x}}}}(bu)),bu}var ap;function Uv(){return ap||(ap=1,Qu.exports=Mv()),Qu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lp;function Fv(){if(lp)return kt;lp=1;var t=Fc(),r=Uv();function o(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,l={};function u(e,n){d(e,n),d(e+"Capture",n)}function d(e,n){for(l[e]=n,e=0;e<n.length;e++)s.add(n[e])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},S={};function w(e){return p.call(S,e)?!0:p.call(m,e)?!1:v.test(e)?S[e]=!0:(m[e]=!0,!1)}function P(e,n,i,a){if(i!==null&&i.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function k(e,n,i,a){if(n===null||typeof n>"u"||P(e,n,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function O(e,n,i,a,c,f,g){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=n,this.sanitizeURL=f,this.removeEmptyString=g}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){I[e]=new O(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];I[n]=new O(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){I[e]=new O(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){I[e]=new O(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){I[e]=new O(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){I[e]=new O(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){I[e]=new O(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){I[e]=new O(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){I[e]=new O(e,5,!1,e.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function z(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(G,z);I[n]=new O(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(G,z);I[n]=new O(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(G,z);I[n]=new O(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){I[e]=new O(e,1,!1,e.toLowerCase(),null,!1,!1)}),I.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){I[e]=new O(e,1,!1,e.toLowerCase(),null,!0,!0)});function W(e,n,i,a){var c=I.hasOwnProperty(n)?I[n]:null;(c!==null?c.type!==0:a||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(k(n,i,c,a)&&(i=null),a||c===null?w(n)&&(i===null?e.removeAttribute(n):e.setAttribute(n,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(n=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(n):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,n,i):e.setAttribute(n,i))))}var j=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,de=Symbol.for("react.element"),F=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),Pe=Symbol.for("react.strict_mode"),Me=Symbol.for("react.profiler"),Ve=Symbol.for("react.provider"),Je=Symbol.for("react.context"),Le=Symbol.for("react.forward_ref"),Ge=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),Ce=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),H=Symbol.iterator;function V(e){return e===null||typeof e!="object"?null:(e=H&&e[H]||e["@@iterator"],typeof e=="function"?e:null)}var x=Object.assign,E;function D(e){if(E===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);E=n&&n[1]||""}return`
`+E+e}var te=!1;function q(e,n){if(!e||te)return"";te=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(N){var a=N}Reflect.construct(e,[],n)}else{try{n.call()}catch(N){a=N}e.call(n.prototype)}else{try{throw Error()}catch(N){a=N}e()}}catch(N){if(N&&a&&typeof N.stack=="string"){for(var c=N.stack.split(`
`),f=a.stack.split(`
`),g=c.length-1,y=f.length-1;1<=g&&0<=y&&c[g]!==f[y];)y--;for(;1<=g&&0<=y;g--,y--)if(c[g]!==f[y]){if(g!==1||y!==1)do if(g--,y--,0>y||c[g]!==f[y]){var A=`
`+c[g].replace(" at new "," at ");return e.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",e.displayName)),A}while(1<=g&&0<=y);break}}}finally{te=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?D(e):""}function Se(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1),e;case 11:return e=q(e.type.render,!1),e;case 1:return e=q(e.type,!0),e;default:return""}}function oe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $:return"Fragment";case F:return"Portal";case Me:return"Profiler";case Pe:return"StrictMode";case Ge:return"Suspense";case we:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Je:return(e.displayName||"Context")+".Consumer";case Ve:return(e._context.displayName||"Context")+".Provider";case Le:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ce:return n=e.displayName||null,n!==null?n:oe(e.type)||"Memo";case pe:n=e._payload,e=e._init;try{return oe(e(n))}catch{}}return null}function ge(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(n);case 8:return n===Pe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function fe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function X(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ne(e){var n=X(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),a=""+e[n];if(!e.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,f=i.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,f.call(this,g)}}),Object.defineProperty(e,n,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ne(e){e._valueTracker||(e._valueTracker=ne(e))}function ce(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),a="";return e&&(a=X(e)?e.checked?"true":"false":e.value),e=a,e!==i?(n.setValue(e),!0):!1}function En(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Mt(e,n){var i=n.checked;return x({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function zt(e,n){var i=n.defaultValue==null?"":n.defaultValue,a=n.checked!=null?n.checked:n.defaultChecked;i=fe(n.value!=null?n.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function vr(e,n){n=n.checked,n!=null&&W(e,"checked",n,!1)}function In(e,n){vr(e,n);var i=fe(n.value),a=n.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?$r(e,n.type,i):n.hasOwnProperty("defaultValue")&&$r(e,n.type,fe(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Hn(e,n,i){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var a=n.type;if(!(a!=="submit"&&a!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,i||n===e.value||(e.value=n),e.defaultValue=n}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function $r(e,n,i){(n!=="number"||En(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var xn=Array.isArray;function Gn(e,n,i,a){if(e=e.options,n){n={};for(var c=0;c<i.length;c++)n["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=n.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+fe(i),n=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function Sr(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(o(91));return x({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dd(e,n){var i=n.value;if(i==null){if(i=n.children,n=n.defaultValue,i!=null){if(n!=null)throw Error(o(92));if(xn(i)){if(1<i.length)throw Error(o(93));i=i[0]}n=i}n==null&&(n=""),i=n}e._wrapperState={initialValue:fe(i)}}function fd(e,n){var i=fe(n.value),a=fe(n.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),n.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function hd(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function pd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rl(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?pd(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zo,gd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(n,i,a,c)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Zo=Zo||document.createElement("div"),Zo.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Zo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Bi(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dm=["Webkit","ms","Moz","O"];Object.keys(Hi).forEach(function(e){Dm.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Hi[n]=Hi[e]})});function md(e,n,i){return n==null||typeof n=="boolean"||n===""?"":i||typeof n!="number"||n===0||Hi.hasOwnProperty(e)&&Hi[e]?(""+n).trim():n+"px"}function vd(e,n){e=e.style;for(var i in n)if(n.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=md(i,n[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var Mm=x({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function il(e,n){if(n){if(Mm[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(o(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(o(61))}if(n.style!=null&&typeof n.style!="object")throw Error(o(62))}}function ol(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sl=null;function al(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ll=null,jr=null,Yr=null;function Sd(e){if(e=so(e)){if(typeof ll!="function")throw Error(o(280));var n=e.stateNode;n&&(n=As(n),ll(e.stateNode,e.type,n))}}function yd(e){jr?Yr?Yr.push(e):Yr=[e]:jr=e}function Ad(){if(jr){var e=jr,n=Yr;if(Yr=jr=null,Sd(e),n)for(e=0;e<n.length;e++)Sd(n[e])}}function wd(e,n){return e(n)}function _d(){}var ul=!1;function Ed(e,n,i){if(ul)return e(n,i);ul=!0;try{return wd(e,n,i)}finally{ul=!1,(jr!==null||Yr!==null)&&(_d(),Ad())}}function xi(e,n){var i=e.stateNode;if(i===null)return null;var a=As(i);if(a===null)return null;i=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(o(231,n,typeof i));return i}var cl=!1;if(h)try{var Gi={};Object.defineProperty(Gi,"passive",{get:function(){cl=!0}}),window.addEventListener("test",Gi,Gi),window.removeEventListener("test",Gi,Gi)}catch{cl=!1}function Um(e,n,i,a,c,f,g,y,A){var N=Array.prototype.slice.call(arguments,3);try{n.apply(i,N)}catch(U){this.onError(U)}}var zi=!1,qo=null,Jo=!1,dl=null,Fm={onError:function(e){zi=!0,qo=e}};function Lm(e,n,i,a,c,f,g,y,A){zi=!1,qo=null,Um.apply(Fm,arguments)}function Bm(e,n,i,a,c,f,g,y,A){if(Lm.apply(this,arguments),zi){if(zi){var N=qo;zi=!1,qo=null}else throw Error(o(198));Jo||(Jo=!0,dl=N)}}function yr(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function Id(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Td(e){if(yr(e)!==e)throw Error(o(188))}function Hm(e){var n=e.alternate;if(!n){if(n=yr(e),n===null)throw Error(o(188));return n!==e?null:e}for(var i=e,a=n;;){var c=i.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===i)return Td(c),e;if(f===a)return Td(c),n;f=f.sibling}throw Error(o(188))}if(i.return!==a.return)i=c,a=f;else{for(var g=!1,y=c.child;y;){if(y===i){g=!0,i=c,a=f;break}if(y===a){g=!0,a=c,i=f;break}y=y.sibling}if(!g){for(y=f.child;y;){if(y===i){g=!0,i=f,a=c;break}if(y===a){g=!0,a=f,i=c;break}y=y.sibling}if(!g)throw Error(o(189))}}if(i.alternate!==a)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?e:n}function Cd(e){return e=Hm(e),e!==null?Rd(e):null}function Rd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Rd(e);if(n!==null)return n;e=e.sibling}return null}var Pd=r.unstable_scheduleCallback,Nd=r.unstable_cancelCallback,xm=r.unstable_shouldYield,Gm=r.unstable_requestPaint,Ke=r.unstable_now,zm=r.unstable_getCurrentPriorityLevel,fl=r.unstable_ImmediatePriority,kd=r.unstable_UserBlockingPriority,es=r.unstable_NormalPriority,Wm=r.unstable_LowPriority,Od=r.unstable_IdlePriority,ts=null,hn=null;function $m(e){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(ts,e,void 0,(e.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:Vm,jm=Math.log,Ym=Math.LN2;function Vm(e){return e>>>=0,e===0?32:31-(jm(e)/Ym|0)|0}var ns=64,rs=4194304;function Wi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function is(e,n){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,f=e.pingedLanes,g=i&268435455;if(g!==0){var y=g&~c;y!==0?a=Wi(y):(f&=g,f!==0&&(a=Wi(f)))}else g=i&~c,g!==0?a=Wi(g):f!==0&&(a=Wi(f));if(a===0)return 0;if(n!==0&&n!==a&&(n&c)===0&&(c=a&-a,f=n&-n,c>=f||c===16&&(f&4194240)!==0))return n;if((a&4)!==0&&(a|=i&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=a;0<n;)i=31-nn(n),c=1<<i,a|=e[i],n&=~c;return a}function Km(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xm(e,n){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-nn(f),y=1<<g,A=c[g];A===-1?((y&i)===0||(y&a)!==0)&&(c[g]=Km(y,n)):A<=n&&(e.expiredLanes|=y),f&=~y}}function hl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Dd(){var e=ns;return ns<<=1,(ns&4194240)===0&&(ns=64),e}function pl(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function $i(e,n,i){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-nn(n),e[n]=i}function Qm(e,n){var i=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-nn(i),f=1<<c;n[c]=0,a[c]=-1,e[c]=-1,i&=~f}}function gl(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var a=31-nn(i),c=1<<a;c&n|e[a]&n&&(e[a]|=n),i&=~c}}var Oe=0;function Md(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ud,ml,Fd,Ld,Bd,vl=!1,os=[],zn=null,Wn=null,$n=null,ji=new Map,Yi=new Map,jn=[],bm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hd(e,n){switch(e){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":$n=null;break;case"pointerover":case"pointerout":ji.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yi.delete(n.pointerId)}}function Vi(e,n,i,a,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:i,eventSystemFlags:a,nativeEvent:f,targetContainers:[c]},n!==null&&(n=so(n),n!==null&&ml(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function Zm(e,n,i,a,c){switch(n){case"focusin":return zn=Vi(zn,e,n,i,a,c),!0;case"dragenter":return Wn=Vi(Wn,e,n,i,a,c),!0;case"mouseover":return $n=Vi($n,e,n,i,a,c),!0;case"pointerover":var f=c.pointerId;return ji.set(f,Vi(ji.get(f)||null,e,n,i,a,c)),!0;case"gotpointercapture":return f=c.pointerId,Yi.set(f,Vi(Yi.get(f)||null,e,n,i,a,c)),!0}return!1}function xd(e){var n=Ar(e.target);if(n!==null){var i=yr(n);if(i!==null){if(n=i.tag,n===13){if(n=Id(i),n!==null){e.blockedOn=n,Bd(e.priority,function(){Fd(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ss(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=yl(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);sl=a,i.target.dispatchEvent(a),sl=null}else return n=so(i),n!==null&&ml(n),e.blockedOn=i,!1;n.shift()}return!0}function Gd(e,n,i){ss(e)&&i.delete(n)}function qm(){vl=!1,zn!==null&&ss(zn)&&(zn=null),Wn!==null&&ss(Wn)&&(Wn=null),$n!==null&&ss($n)&&($n=null),ji.forEach(Gd),Yi.forEach(Gd)}function Ki(e,n){e.blockedOn===n&&(e.blockedOn=null,vl||(vl=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,qm)))}function Xi(e){function n(c){return Ki(c,e)}if(0<os.length){Ki(os[0],e);for(var i=1;i<os.length;i++){var a=os[i];a.blockedOn===e&&(a.blockedOn=null)}}for(zn!==null&&Ki(zn,e),Wn!==null&&Ki(Wn,e),$n!==null&&Ki($n,e),ji.forEach(n),Yi.forEach(n),i=0;i<jn.length;i++)a=jn[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<jn.length&&(i=jn[0],i.blockedOn===null);)xd(i),i.blockedOn===null&&jn.shift()}var Vr=j.ReactCurrentBatchConfig,as=!0;function Jm(e,n,i,a){var c=Oe,f=Vr.transition;Vr.transition=null;try{Oe=1,Sl(e,n,i,a)}finally{Oe=c,Vr.transition=f}}function e0(e,n,i,a){var c=Oe,f=Vr.transition;Vr.transition=null;try{Oe=4,Sl(e,n,i,a)}finally{Oe=c,Vr.transition=f}}function Sl(e,n,i,a){if(as){var c=yl(e,n,i,a);if(c===null)Ll(e,n,a,ls,i),Hd(e,a);else if(Zm(c,e,n,i,a))a.stopPropagation();else if(Hd(e,a),n&4&&-1<bm.indexOf(e)){for(;c!==null;){var f=so(c);if(f!==null&&Ud(f),f=yl(e,n,i,a),f===null&&Ll(e,n,a,ls,i),f===c)break;c=f}c!==null&&a.stopPropagation()}else Ll(e,n,a,null,i)}}var ls=null;function yl(e,n,i,a){if(ls=null,e=al(a),e=Ar(e),e!==null)if(n=yr(e),n===null)e=null;else if(i=n.tag,i===13){if(e=Id(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return ls=e,null}function zd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zm()){case fl:return 1;case kd:return 4;case es:case Wm:return 16;case Od:return 536870912;default:return 16}default:return 16}}var Yn=null,Al=null,us=null;function Wd(){if(us)return us;var e,n=Al,i=n.length,a,c="value"in Yn?Yn.value:Yn.textContent,f=c.length;for(e=0;e<i&&n[e]===c[e];e++);var g=i-e;for(a=1;a<=g&&n[i-a]===c[f-a];a++);return us=c.slice(e,1<a?1-a:void 0)}function cs(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ds(){return!0}function $d(){return!1}function Ut(e){function n(i,a,c,f,g){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(i=e[y],this[y]=i?i(f):f[y]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ds:$d,this.isPropagationStopped=$d,this}return x(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),n}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wl=Ut(Kr),Qi=x({},Kr,{view:0,detail:0}),t0=Ut(Qi),_l,El,bi,fs=x({},Qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bi&&(bi&&e.type==="mousemove"?(_l=e.screenX-bi.screenX,El=e.screenY-bi.screenY):El=_l=0,bi=e),_l)},movementY:function(e){return"movementY"in e?e.movementY:El}}),jd=Ut(fs),n0=x({},fs,{dataTransfer:0}),r0=Ut(n0),i0=x({},Qi,{relatedTarget:0}),Il=Ut(i0),o0=x({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),s0=Ut(o0),a0=x({},Kr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),l0=Ut(a0),u0=x({},Kr,{data:0}),Yd=Ut(u0),c0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=f0[e])?!!n[e]:!1}function Tl(){return h0}var p0=x({},Qi,{key:function(e){if(e.key){var n=c0[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=cs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?d0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tl,charCode:function(e){return e.type==="keypress"?cs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),g0=Ut(p0),m0=x({},fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vd=Ut(m0),v0=x({},Qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tl}),S0=Ut(v0),y0=x({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),A0=Ut(y0),w0=x({},fs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_0=Ut(w0),E0=[9,13,27,32],Cl=h&&"CompositionEvent"in window,Zi=null;h&&"documentMode"in document&&(Zi=document.documentMode);var I0=h&&"TextEvent"in window&&!Zi,Kd=h&&(!Cl||Zi&&8<Zi&&11>=Zi),Xd=" ",Qd=!1;function bd(e,n){switch(e){case"keyup":return E0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xr=!1;function T0(e,n){switch(e){case"compositionend":return Zd(n);case"keypress":return n.which!==32?null:(Qd=!0,Xd);case"textInput":return e=n.data,e===Xd&&Qd?null:e;default:return null}}function C0(e,n){if(Xr)return e==="compositionend"||!Cl&&bd(e,n)?(e=Wd(),us=Al=Yn=null,Xr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Kd&&n.locale!=="ko"?null:n.data;default:return null}}var R0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!R0[e.type]:n==="textarea"}function Jd(e,n,i,a){yd(a),n=vs(n,"onChange"),0<n.length&&(i=new wl("onChange","change",null,i,a),e.push({event:i,listeners:n}))}var qi=null,Ji=null;function P0(e){Sf(e,0)}function hs(e){var n=Jr(e);if(ce(n))return e}function N0(e,n){if(e==="change")return n}var ef=!1;if(h){var Rl;if(h){var Pl="oninput"in document;if(!Pl){var tf=document.createElement("div");tf.setAttribute("oninput","return;"),Pl=typeof tf.oninput=="function"}Rl=Pl}else Rl=!1;ef=Rl&&(!document.documentMode||9<document.documentMode)}function nf(){qi&&(qi.detachEvent("onpropertychange",rf),Ji=qi=null)}function rf(e){if(e.propertyName==="value"&&hs(Ji)){var n=[];Jd(n,Ji,e,al(e)),Ed(P0,n)}}function k0(e,n,i){e==="focusin"?(nf(),qi=n,Ji=i,qi.attachEvent("onpropertychange",rf)):e==="focusout"&&nf()}function O0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hs(Ji)}function D0(e,n){if(e==="click")return hs(n)}function M0(e,n){if(e==="input"||e==="change")return hs(n)}function U0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var rn=typeof Object.is=="function"?Object.is:U0;function eo(e,n){if(rn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),a=Object.keys(n);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!p.call(n,c)||!rn(e[c],n[c]))return!1}return!0}function of(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sf(e,n){var i=of(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=n&&a>=n)return{node:i,offset:n-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=of(i)}}function af(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?af(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function lf(){for(var e=window,n=En();n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=En(e.document)}return n}function Nl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function F0(e){var n=lf(),i=e.focusedElem,a=e.selectionRange;if(n!==i&&i&&i.ownerDocument&&af(i.ownerDocument.documentElement,i)){if(a!==null&&Nl(i)){if(n=a.start,e=a.end,e===void 0&&(e=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(e,i.value.length);else if(e=(n=i.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,f=Math.min(a.start,c);a=a.end===void 0?f:Math.min(a.end,c),!e.extend&&f>a&&(c=a,a=f,f=c),c=sf(i,f);var g=sf(i,a);c&&g&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(n=n.createRange(),n.setStart(c.node,c.offset),e.removeAllRanges(),f>a?(e.addRange(n),e.extend(g.node,g.offset)):(n.setEnd(g.node,g.offset),e.addRange(n)))}}for(n=[],e=i;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)e=n[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var L0=h&&"documentMode"in document&&11>=document.documentMode,Qr=null,kl=null,to=null,Ol=!1;function uf(e,n,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ol||Qr==null||Qr!==En(a)||(a=Qr,"selectionStart"in a&&Nl(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),to&&eo(to,a)||(to=a,a=vs(kl,"onSelect"),0<a.length&&(n=new wl("onSelect","select",null,n,i),e.push({event:n,listeners:a}),n.target=Qr)))}function ps(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var br={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionend:ps("Transition","TransitionEnd")},Dl={},cf={};h&&(cf=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);function gs(e){if(Dl[e])return Dl[e];if(!br[e])return e;var n=br[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in cf)return Dl[e]=n[i];return e}var df=gs("animationend"),ff=gs("animationiteration"),hf=gs("animationstart"),pf=gs("transitionend"),gf=new Map,mf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vn(e,n){gf.set(e,n),u(n,[e])}for(var Ml=0;Ml<mf.length;Ml++){var Ul=mf[Ml],B0=Ul.toLowerCase(),H0=Ul[0].toUpperCase()+Ul.slice(1);Vn(B0,"on"+H0)}Vn(df,"onAnimationEnd"),Vn(ff,"onAnimationIteration"),Vn(hf,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(pf,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x0=new Set("cancel close invalid load scroll toggle".split(" ").concat(no));function vf(e,n,i){var a=e.type||"unknown-event";e.currentTarget=i,Bm(a,n,void 0,e),e.currentTarget=null}function Sf(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var f=void 0;if(n)for(var g=a.length-1;0<=g;g--){var y=a[g],A=y.instance,N=y.currentTarget;if(y=y.listener,A!==f&&c.isPropagationStopped())break e;vf(c,y,N),f=A}else for(g=0;g<a.length;g++){if(y=a[g],A=y.instance,N=y.currentTarget,y=y.listener,A!==f&&c.isPropagationStopped())break e;vf(c,y,N),f=A}}}if(Jo)throw e=dl,Jo=!1,dl=null,e}function Be(e,n){var i=n[Wl];i===void 0&&(i=n[Wl]=new Set);var a=e+"__bubble";i.has(a)||(yf(n,e,2,!1),i.add(a))}function Fl(e,n,i){var a=0;n&&(a|=4),yf(i,e,a,n)}var ms="_reactListening"+Math.random().toString(36).slice(2);function ro(e){if(!e[ms]){e[ms]=!0,s.forEach(function(i){i!=="selectionchange"&&(x0.has(i)||Fl(i,!1,e),Fl(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ms]||(n[ms]=!0,Fl("selectionchange",!1,n))}}function yf(e,n,i,a){switch(zd(n)){case 1:var c=Jm;break;case 4:c=e0;break;default:c=Sl}i=c.bind(null,n,i,e),c=void 0,!cl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(n,i,{capture:!0,passive:c}):e.addEventListener(n,i,!0):c!==void 0?e.addEventListener(n,i,{passive:c}):e.addEventListener(n,i,!1)}function Ll(e,n,i,a,c){var f=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var y=a.stateNode.containerInfo;if(y===c||y.nodeType===8&&y.parentNode===c)break;if(g===4)for(g=a.return;g!==null;){var A=g.tag;if((A===3||A===4)&&(A=g.stateNode.containerInfo,A===c||A.nodeType===8&&A.parentNode===c))return;g=g.return}for(;y!==null;){if(g=Ar(y),g===null)return;if(A=g.tag,A===5||A===6){a=f=g;continue e}y=y.parentNode}}a=a.return}Ed(function(){var N=f,U=al(i),L=[];e:{var M=gf.get(e);if(M!==void 0){var Y=wl,Q=e;switch(e){case"keypress":if(cs(i)===0)break e;case"keydown":case"keyup":Y=g0;break;case"focusin":Q="focus",Y=Il;break;case"focusout":Q="blur",Y=Il;break;case"beforeblur":case"afterblur":Y=Il;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=r0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=S0;break;case df:case ff:case hf:Y=s0;break;case pf:Y=A0;break;case"scroll":Y=t0;break;case"wheel":Y=_0;break;case"copy":case"cut":case"paste":Y=l0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Vd}var b=(n&4)!==0,Xe=!b&&e==="scroll",T=b?M!==null?M+"Capture":null:M;b=[];for(var _=N,C;_!==null;){C=_;var B=C.stateNode;if(C.tag===5&&B!==null&&(C=B,T!==null&&(B=xi(_,T),B!=null&&b.push(io(_,B,C)))),Xe)break;_=_.return}0<b.length&&(M=new Y(M,Q,null,i,U),L.push({event:M,listeners:b}))}}if((n&7)===0){e:{if(M=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",M&&i!==sl&&(Q=i.relatedTarget||i.fromElement)&&(Ar(Q)||Q[Tn]))break e;if((Y||M)&&(M=U.window===U?U:(M=U.ownerDocument)?M.defaultView||M.parentWindow:window,Y?(Q=i.relatedTarget||i.toElement,Y=N,Q=Q?Ar(Q):null,Q!==null&&(Xe=yr(Q),Q!==Xe||Q.tag!==5&&Q.tag!==6)&&(Q=null)):(Y=null,Q=N),Y!==Q)){if(b=jd,B="onMouseLeave",T="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(b=Vd,B="onPointerLeave",T="onPointerEnter",_="pointer"),Xe=Y==null?M:Jr(Y),C=Q==null?M:Jr(Q),M=new b(B,_+"leave",Y,i,U),M.target=Xe,M.relatedTarget=C,B=null,Ar(U)===N&&(b=new b(T,_+"enter",Q,i,U),b.target=C,b.relatedTarget=Xe,B=b),Xe=B,Y&&Q)t:{for(b=Y,T=Q,_=0,C=b;C;C=Zr(C))_++;for(C=0,B=T;B;B=Zr(B))C++;for(;0<_-C;)b=Zr(b),_--;for(;0<C-_;)T=Zr(T),C--;for(;_--;){if(b===T||T!==null&&b===T.alternate)break t;b=Zr(b),T=Zr(T)}b=null}else b=null;Y!==null&&Af(L,M,Y,b,!1),Q!==null&&Xe!==null&&Af(L,Xe,Q,b,!0)}}e:{if(M=N?Jr(N):window,Y=M.nodeName&&M.nodeName.toLowerCase(),Y==="select"||Y==="input"&&M.type==="file")var Z=N0;else if(qd(M))if(ef)Z=M0;else{Z=O0;var J=k0}else(Y=M.nodeName)&&Y.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(Z=D0);if(Z&&(Z=Z(e,N))){Jd(L,Z,i,U);break e}J&&J(e,M,N),e==="focusout"&&(J=M._wrapperState)&&J.controlled&&M.type==="number"&&$r(M,"number",M.value)}switch(J=N?Jr(N):window,e){case"focusin":(qd(J)||J.contentEditable==="true")&&(Qr=J,kl=N,to=null);break;case"focusout":to=kl=Qr=null;break;case"mousedown":Ol=!0;break;case"contextmenu":case"mouseup":case"dragend":Ol=!1,uf(L,i,U);break;case"selectionchange":if(L0)break;case"keydown":case"keyup":uf(L,i,U)}var ee;if(Cl)e:{switch(e){case"compositionstart":var se="onCompositionStart";break e;case"compositionend":se="onCompositionEnd";break e;case"compositionupdate":se="onCompositionUpdate";break e}se=void 0}else Xr?bd(e,i)&&(se="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(se="onCompositionStart");se&&(Kd&&i.locale!=="ko"&&(Xr||se!=="onCompositionStart"?se==="onCompositionEnd"&&Xr&&(ee=Wd()):(Yn=U,Al="value"in Yn?Yn.value:Yn.textContent,Xr=!0)),J=vs(N,se),0<J.length&&(se=new Yd(se,e,null,i,U),L.push({event:se,listeners:J}),ee?se.data=ee:(ee=Zd(i),ee!==null&&(se.data=ee)))),(ee=I0?T0(e,i):C0(e,i))&&(N=vs(N,"onBeforeInput"),0<N.length&&(U=new Yd("onBeforeInput","beforeinput",null,i,U),L.push({event:U,listeners:N}),U.data=ee))}Sf(L,n)})}function io(e,n,i){return{instance:e,listener:n,currentTarget:i}}function vs(e,n){for(var i=n+"Capture",a=[];e!==null;){var c=e,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=xi(e,i),f!=null&&a.unshift(io(e,f,c)),f=xi(e,n),f!=null&&a.push(io(e,f,c))),e=e.return}return a}function Zr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Af(e,n,i,a,c){for(var f=n._reactName,g=[];i!==null&&i!==a;){var y=i,A=y.alternate,N=y.stateNode;if(A!==null&&A===a)break;y.tag===5&&N!==null&&(y=N,c?(A=xi(i,f),A!=null&&g.unshift(io(i,A,y))):c||(A=xi(i,f),A!=null&&g.push(io(i,A,y)))),i=i.return}g.length!==0&&e.push({event:n,listeners:g})}var G0=/\r\n?/g,z0=/\u0000|\uFFFD/g;function wf(e){return(typeof e=="string"?e:""+e).replace(G0,`
`).replace(z0,"")}function Ss(e,n,i){if(n=wf(n),wf(e)!==n&&i)throw Error(o(425))}function ys(){}var Bl=null,Hl=null;function xl(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Gl=typeof setTimeout=="function"?setTimeout:void 0,W0=typeof clearTimeout=="function"?clearTimeout:void 0,_f=typeof Promise=="function"?Promise:void 0,$0=typeof queueMicrotask=="function"?queueMicrotask:typeof _f<"u"?function(e){return _f.resolve(null).then(e).catch(j0)}:Gl;function j0(e){setTimeout(function(){throw e})}function zl(e,n){var i=n,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),Xi(n);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);Xi(n)}function Kn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Ef(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return e;n--}else i==="/$"&&n++}e=e.previousSibling}return null}var qr=Math.random().toString(36).slice(2),pn="__reactFiber$"+qr,oo="__reactProps$"+qr,Tn="__reactContainer$"+qr,Wl="__reactEvents$"+qr,Y0="__reactListeners$"+qr,V0="__reactHandles$"+qr;function Ar(e){var n=e[pn];if(n)return n;for(var i=e.parentNode;i;){if(n=i[Tn]||i[pn]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=Ef(e);e!==null;){if(i=e[pn])return i;e=Ef(e)}return n}e=i,i=e.parentNode}return null}function so(e){return e=e[pn]||e[Tn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Jr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function As(e){return e[oo]||null}var $l=[],ei=-1;function Xn(e){return{current:e}}function He(e){0>ei||(e.current=$l[ei],$l[ei]=null,ei--)}function Ue(e,n){ei++,$l[ei]=e.current,e.current=n}var Qn={},ht=Xn(Qn),Tt=Xn(!1),wr=Qn;function ti(e,n){var i=e.type.contextTypes;if(!i)return Qn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===n)return a.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in i)c[f]=n[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=c),c}function Ct(e){return e=e.childContextTypes,e!=null}function ws(){He(Tt),He(ht)}function If(e,n,i){if(ht.current!==Qn)throw Error(o(168));Ue(ht,n),Ue(Tt,i)}function Tf(e,n,i){var a=e.stateNode;if(n=n.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in n))throw Error(o(108,ge(e)||"Unknown",c));return x({},i,a)}function _s(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qn,wr=ht.current,Ue(ht,e),Ue(Tt,Tt.current),!0}function Cf(e,n,i){var a=e.stateNode;if(!a)throw Error(o(169));i?(e=Tf(e,n,wr),a.__reactInternalMemoizedMergedChildContext=e,He(Tt),He(ht),Ue(ht,e)):He(Tt),Ue(Tt,i)}var Cn=null,Es=!1,jl=!1;function Rf(e){Cn===null?Cn=[e]:Cn.push(e)}function K0(e){Es=!0,Rf(e)}function bn(){if(!jl&&Cn!==null){jl=!0;var e=0,n=Oe;try{var i=Cn;for(Oe=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Cn=null,Es=!1}catch(c){throw Cn!==null&&(Cn=Cn.slice(e+1)),Pd(fl,bn),c}finally{Oe=n,jl=!1}}return null}var ni=[],ri=0,Is=null,Ts=0,Wt=[],$t=0,_r=null,Rn=1,Pn="";function Er(e,n){ni[ri++]=Ts,ni[ri++]=Is,Is=e,Ts=n}function Pf(e,n,i){Wt[$t++]=Rn,Wt[$t++]=Pn,Wt[$t++]=_r,_r=e;var a=Rn;e=Pn;var c=32-nn(a)-1;a&=~(1<<c),i+=1;var f=32-nn(n)+c;if(30<f){var g=c-c%5;f=(a&(1<<g)-1).toString(32),a>>=g,c-=g,Rn=1<<32-nn(n)+c|i<<c|a,Pn=f+e}else Rn=1<<f|i<<c|a,Pn=e}function Yl(e){e.return!==null&&(Er(e,1),Pf(e,1,0))}function Vl(e){for(;e===Is;)Is=ni[--ri],ni[ri]=null,Ts=ni[--ri],ni[ri]=null;for(;e===_r;)_r=Wt[--$t],Wt[$t]=null,Pn=Wt[--$t],Wt[$t]=null,Rn=Wt[--$t],Wt[$t]=null}var Ft=null,Lt=null,ze=!1,on=null;function Nf(e,n){var i=Kt(5,null,null,0);i.elementType="DELETED",i.stateNode=n,i.return=e,n=e.deletions,n===null?(e.deletions=[i],e.flags|=16):n.push(i)}function kf(e,n){switch(e.tag){case 5:var i=e.type;return n=n.nodeType!==1||i.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Ft=e,Lt=Kn(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Ft=e,Lt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(i=_r!==null?{id:Rn,overflow:Pn}:null,e.memoizedState={dehydrated:n,treeContext:i,retryLane:1073741824},i=Kt(18,null,null,0),i.stateNode=n,i.return=e,e.child=i,Ft=e,Lt=null,!0):!1;default:return!1}}function Kl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Xl(e){if(ze){var n=Lt;if(n){var i=n;if(!kf(e,n)){if(Kl(e))throw Error(o(418));n=Kn(i.nextSibling);var a=Ft;n&&kf(e,n)?Nf(a,i):(e.flags=e.flags&-4097|2,ze=!1,Ft=e)}}else{if(Kl(e))throw Error(o(418));e.flags=e.flags&-4097|2,ze=!1,Ft=e}}}function Of(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ft=e}function Cs(e){if(e!==Ft)return!1;if(!ze)return Of(e),ze=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!xl(e.type,e.memoizedProps)),n&&(n=Lt)){if(Kl(e))throw Df(),Error(o(418));for(;n;)Nf(e,n),n=Kn(n.nextSibling)}if(Of(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(n===0){Lt=Kn(e.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++}e=e.nextSibling}Lt=null}}else Lt=Ft?Kn(e.stateNode.nextSibling):null;return!0}function Df(){for(var e=Lt;e;)e=Kn(e.nextSibling)}function ii(){Lt=Ft=null,ze=!1}function Ql(e){on===null?on=[e]:on.push(e)}var X0=j.ReactCurrentBatchConfig;function ao(e,n,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(o(309));var a=i.stateNode}if(!a)throw Error(o(147,e));var c=a,f=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===f?n.ref:(n=function(g){var y=c.refs;g===null?delete y[f]:y[f]=g},n._stringRef=f,n)}if(typeof e!="string")throw Error(o(284));if(!i._owner)throw Error(o(290,e))}return e}function Rs(e,n){throw e=Object.prototype.toString.call(n),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Mf(e){var n=e._init;return n(e._payload)}function Uf(e){function n(T,_){if(e){var C=T.deletions;C===null?(T.deletions=[_],T.flags|=16):C.push(_)}}function i(T,_){if(!e)return null;for(;_!==null;)n(T,_),_=_.sibling;return null}function a(T,_){for(T=new Map;_!==null;)_.key!==null?T.set(_.key,_):T.set(_.index,_),_=_.sibling;return T}function c(T,_){return T=ir(T,_),T.index=0,T.sibling=null,T}function f(T,_,C){return T.index=C,e?(C=T.alternate,C!==null?(C=C.index,C<_?(T.flags|=2,_):C):(T.flags|=2,_)):(T.flags|=1048576,_)}function g(T){return e&&T.alternate===null&&(T.flags|=2),T}function y(T,_,C,B){return _===null||_.tag!==6?(_=Gu(C,T.mode,B),_.return=T,_):(_=c(_,C),_.return=T,_)}function A(T,_,C,B){var Z=C.type;return Z===$?U(T,_,C.props.children,B,C.key):_!==null&&(_.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===pe&&Mf(Z)===_.type)?(B=c(_,C.props),B.ref=ao(T,_,C),B.return=T,B):(B=Zs(C.type,C.key,C.props,null,T.mode,B),B.ref=ao(T,_,C),B.return=T,B)}function N(T,_,C,B){return _===null||_.tag!==4||_.stateNode.containerInfo!==C.containerInfo||_.stateNode.implementation!==C.implementation?(_=zu(C,T.mode,B),_.return=T,_):(_=c(_,C.children||[]),_.return=T,_)}function U(T,_,C,B,Z){return _===null||_.tag!==7?(_=Or(C,T.mode,B,Z),_.return=T,_):(_=c(_,C),_.return=T,_)}function L(T,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Gu(""+_,T.mode,C),_.return=T,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case de:return C=Zs(_.type,_.key,_.props,null,T.mode,C),C.ref=ao(T,null,_),C.return=T,C;case F:return _=zu(_,T.mode,C),_.return=T,_;case pe:var B=_._init;return L(T,B(_._payload),C)}if(xn(_)||V(_))return _=Or(_,T.mode,C,null),_.return=T,_;Rs(T,_)}return null}function M(T,_,C,B){var Z=_!==null?_.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return Z!==null?null:y(T,_,""+C,B);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case de:return C.key===Z?A(T,_,C,B):null;case F:return C.key===Z?N(T,_,C,B):null;case pe:return Z=C._init,M(T,_,Z(C._payload),B)}if(xn(C)||V(C))return Z!==null?null:U(T,_,C,B,null);Rs(T,C)}return null}function Y(T,_,C,B,Z){if(typeof B=="string"&&B!==""||typeof B=="number")return T=T.get(C)||null,y(_,T,""+B,Z);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case de:return T=T.get(B.key===null?C:B.key)||null,A(_,T,B,Z);case F:return T=T.get(B.key===null?C:B.key)||null,N(_,T,B,Z);case pe:var J=B._init;return Y(T,_,C,J(B._payload),Z)}if(xn(B)||V(B))return T=T.get(C)||null,U(_,T,B,Z,null);Rs(_,B)}return null}function Q(T,_,C,B){for(var Z=null,J=null,ee=_,se=_=0,st=null;ee!==null&&se<C.length;se++){ee.index>se?(st=ee,ee=null):st=ee.sibling;var Re=M(T,ee,C[se],B);if(Re===null){ee===null&&(ee=st);break}e&&ee&&Re.alternate===null&&n(T,ee),_=f(Re,_,se),J===null?Z=Re:J.sibling=Re,J=Re,ee=st}if(se===C.length)return i(T,ee),ze&&Er(T,se),Z;if(ee===null){for(;se<C.length;se++)ee=L(T,C[se],B),ee!==null&&(_=f(ee,_,se),J===null?Z=ee:J.sibling=ee,J=ee);return ze&&Er(T,se),Z}for(ee=a(T,ee);se<C.length;se++)st=Y(ee,T,se,C[se],B),st!==null&&(e&&st.alternate!==null&&ee.delete(st.key===null?se:st.key),_=f(st,_,se),J===null?Z=st:J.sibling=st,J=st);return e&&ee.forEach(function(or){return n(T,or)}),ze&&Er(T,se),Z}function b(T,_,C,B){var Z=V(C);if(typeof Z!="function")throw Error(o(150));if(C=Z.call(C),C==null)throw Error(o(151));for(var J=Z=null,ee=_,se=_=0,st=null,Re=C.next();ee!==null&&!Re.done;se++,Re=C.next()){ee.index>se?(st=ee,ee=null):st=ee.sibling;var or=M(T,ee,Re.value,B);if(or===null){ee===null&&(ee=st);break}e&&ee&&or.alternate===null&&n(T,ee),_=f(or,_,se),J===null?Z=or:J.sibling=or,J=or,ee=st}if(Re.done)return i(T,ee),ze&&Er(T,se),Z;if(ee===null){for(;!Re.done;se++,Re=C.next())Re=L(T,Re.value,B),Re!==null&&(_=f(Re,_,se),J===null?Z=Re:J.sibling=Re,J=Re);return ze&&Er(T,se),Z}for(ee=a(T,ee);!Re.done;se++,Re=C.next())Re=Y(ee,T,se,Re.value,B),Re!==null&&(e&&Re.alternate!==null&&ee.delete(Re.key===null?se:Re.key),_=f(Re,_,se),J===null?Z=Re:J.sibling=Re,J=Re);return e&&ee.forEach(function(Rv){return n(T,Rv)}),ze&&Er(T,se),Z}function Xe(T,_,C,B){if(typeof C=="object"&&C!==null&&C.type===$&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case de:e:{for(var Z=C.key,J=_;J!==null;){if(J.key===Z){if(Z=C.type,Z===$){if(J.tag===7){i(T,J.sibling),_=c(J,C.props.children),_.return=T,T=_;break e}}else if(J.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===pe&&Mf(Z)===J.type){i(T,J.sibling),_=c(J,C.props),_.ref=ao(T,J,C),_.return=T,T=_;break e}i(T,J);break}else n(T,J);J=J.sibling}C.type===$?(_=Or(C.props.children,T.mode,B,C.key),_.return=T,T=_):(B=Zs(C.type,C.key,C.props,null,T.mode,B),B.ref=ao(T,_,C),B.return=T,T=B)}return g(T);case F:e:{for(J=C.key;_!==null;){if(_.key===J)if(_.tag===4&&_.stateNode.containerInfo===C.containerInfo&&_.stateNode.implementation===C.implementation){i(T,_.sibling),_=c(_,C.children||[]),_.return=T,T=_;break e}else{i(T,_);break}else n(T,_);_=_.sibling}_=zu(C,T.mode,B),_.return=T,T=_}return g(T);case pe:return J=C._init,Xe(T,_,J(C._payload),B)}if(xn(C))return Q(T,_,C,B);if(V(C))return b(T,_,C,B);Rs(T,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,_!==null&&_.tag===6?(i(T,_.sibling),_=c(_,C),_.return=T,T=_):(i(T,_),_=Gu(C,T.mode,B),_.return=T,T=_),g(T)):i(T,_)}return Xe}var oi=Uf(!0),Ff=Uf(!1),Ps=Xn(null),Ns=null,si=null,bl=null;function Zl(){bl=si=Ns=null}function ql(e){var n=Ps.current;He(Ps),e._currentValue=n}function Jl(e,n,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===i)break;e=e.return}}function ai(e,n){Ns=e,bl=si=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(Rt=!0),e.firstContext=null)}function jt(e){var n=e._currentValue;if(bl!==e)if(e={context:e,memoizedValue:n,next:null},si===null){if(Ns===null)throw Error(o(308));si=e,Ns.dependencies={lanes:0,firstContext:e}}else si=si.next=e;return n}var Ir=null;function eu(e){Ir===null?Ir=[e]:Ir.push(e)}function Lf(e,n,i,a){var c=n.interleaved;return c===null?(i.next=i,eu(n)):(i.next=c.next,c.next=i),n.interleaved=i,Nn(e,a)}function Nn(e,n){e.lanes|=n;var i=e.alternate;for(i!==null&&(i.lanes|=n),i=e,e=e.return;e!==null;)e.childLanes|=n,i=e.alternate,i!==null&&(i.childLanes|=n),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Zn=!1;function tu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function qn(e,n,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Te&2)!==0){var c=a.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),a.pending=n,Nn(e,i)}return c=a.interleaved,c===null?(n.next=n,eu(a)):(n.next=c.next,c.next=n),a.interleaved=n,Nn(e,i)}function ks(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194240)!==0)){var a=n.lanes;a&=e.pendingLanes,i|=a,n.lanes=i,gl(e,i)}}function Hf(e,n){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var g={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};f===null?c=f=g:f=f.next=g,i=i.next}while(i!==null);f===null?c=f=n:f=f.next=n}else c=f=n;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}function Os(e,n,i,a){var c=e.updateQueue;Zn=!1;var f=c.firstBaseUpdate,g=c.lastBaseUpdate,y=c.shared.pending;if(y!==null){c.shared.pending=null;var A=y,N=A.next;A.next=null,g===null?f=N:g.next=N,g=A;var U=e.alternate;U!==null&&(U=U.updateQueue,y=U.lastBaseUpdate,y!==g&&(y===null?U.firstBaseUpdate=N:y.next=N,U.lastBaseUpdate=A))}if(f!==null){var L=c.baseState;g=0,U=N=A=null,y=f;do{var M=y.lane,Y=y.eventTime;if((a&M)===M){U!==null&&(U=U.next={eventTime:Y,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var Q=e,b=y;switch(M=n,Y=i,b.tag){case 1:if(Q=b.payload,typeof Q=="function"){L=Q.call(Y,L,M);break e}L=Q;break e;case 3:Q.flags=Q.flags&-65537|128;case 0:if(Q=b.payload,M=typeof Q=="function"?Q.call(Y,L,M):Q,M==null)break e;L=x({},L,M);break e;case 2:Zn=!0}}y.callback!==null&&y.lane!==0&&(e.flags|=64,M=c.effects,M===null?c.effects=[y]:M.push(y))}else Y={eventTime:Y,lane:M,tag:y.tag,payload:y.payload,callback:y.callback,next:null},U===null?(N=U=Y,A=L):U=U.next=Y,g|=M;if(y=y.next,y===null){if(y=c.shared.pending,y===null)break;M=y,y=M.next,M.next=null,c.lastBaseUpdate=M,c.shared.pending=null}}while(!0);if(U===null&&(A=L),c.baseState=A,c.firstBaseUpdate=N,c.lastBaseUpdate=U,n=c.shared.interleaved,n!==null){c=n;do g|=c.lane,c=c.next;while(c!==n)}else f===null&&(c.shared.lanes=0);Rr|=g,e.lanes=g,e.memoizedState=L}}function xf(e,n,i){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var a=e[n],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(o(191,c));c.call(a)}}}var lo={},gn=Xn(lo),uo=Xn(lo),co=Xn(lo);function Tr(e){if(e===lo)throw Error(o(174));return e}function nu(e,n){switch(Ue(co,n),Ue(uo,e),Ue(gn,lo),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:rl(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=rl(n,e)}He(gn),Ue(gn,n)}function li(){He(gn),He(uo),He(co)}function Gf(e){Tr(co.current);var n=Tr(gn.current),i=rl(n,e.type);n!==i&&(Ue(uo,e),Ue(gn,i))}function ru(e){uo.current===e&&(He(gn),He(uo))}var $e=Xn(0);function Ds(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var iu=[];function ou(){for(var e=0;e<iu.length;e++)iu[e]._workInProgressVersionPrimary=null;iu.length=0}var Ms=j.ReactCurrentDispatcher,su=j.ReactCurrentBatchConfig,Cr=0,je=null,et=null,it=null,Us=!1,fo=!1,ho=0,Q0=0;function pt(){throw Error(o(321))}function au(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!rn(e[i],n[i]))return!1;return!0}function lu(e,n,i,a,c,f){if(Cr=f,je=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Ms.current=e===null||e.memoizedState===null?J0:ev,e=i(a,c),fo){f=0;do{if(fo=!1,ho=0,25<=f)throw Error(o(301));f+=1,it=et=null,n.updateQueue=null,Ms.current=tv,e=i(a,c)}while(fo)}if(Ms.current=Bs,n=et!==null&&et.next!==null,Cr=0,it=et=je=null,Us=!1,n)throw Error(o(300));return e}function uu(){var e=ho!==0;return ho=0,e}function mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?je.memoizedState=it=e:it=it.next=e,it}function Yt(){if(et===null){var e=je.alternate;e=e!==null?e.memoizedState:null}else e=et.next;var n=it===null?je.memoizedState:it.next;if(n!==null)it=n,et=e;else{if(e===null)throw Error(o(310));et=e,e={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},it===null?je.memoizedState=it=e:it=it.next=e}return it}function po(e,n){return typeof n=="function"?n(e):n}function cu(e){var n=Yt(),i=n.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=e;var a=et,c=a.baseQueue,f=i.pending;if(f!==null){if(c!==null){var g=c.next;c.next=f.next,f.next=g}a.baseQueue=c=f,i.pending=null}if(c!==null){f=c.next,a=a.baseState;var y=g=null,A=null,N=f;do{var U=N.lane;if((Cr&U)===U)A!==null&&(A=A.next={lane:0,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),a=N.hasEagerState?N.eagerState:e(a,N.action);else{var L={lane:U,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null};A===null?(y=A=L,g=a):A=A.next=L,je.lanes|=U,Rr|=U}N=N.next}while(N!==null&&N!==f);A===null?g=a:A.next=y,rn(a,n.memoizedState)||(Rt=!0),n.memoizedState=a,n.baseState=g,n.baseQueue=A,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do f=c.lane,je.lanes|=f,Rr|=f,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[n.memoizedState,i.dispatch]}function du(e){var n=Yt(),i=n.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,f=n.memoizedState;if(c!==null){i.pending=null;var g=c=c.next;do f=e(f,g.action),g=g.next;while(g!==c);rn(f,n.memoizedState)||(Rt=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),i.lastRenderedState=f}return[f,a]}function zf(){}function Wf(e,n){var i=je,a=Yt(),c=n(),f=!rn(a.memoizedState,c);if(f&&(a.memoizedState=c,Rt=!0),a=a.queue,fu(Yf.bind(null,i,a,e),[e]),a.getSnapshot!==n||f||it!==null&&it.memoizedState.tag&1){if(i.flags|=2048,go(9,jf.bind(null,i,a,c,n),void 0,null),ot===null)throw Error(o(349));(Cr&30)!==0||$f(i,n,c)}return c}function $f(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=je.updateQueue,n===null?(n={lastEffect:null,stores:null},je.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function jf(e,n,i,a){n.value=i,n.getSnapshot=a,Vf(n)&&Kf(e)}function Yf(e,n,i){return i(function(){Vf(n)&&Kf(e)})}function Vf(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!rn(e,i)}catch{return!0}}function Kf(e){var n=Nn(e,1);n!==null&&un(n,e,1,-1)}function Xf(e){var n=mn();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:e},n.queue=e,e=e.dispatch=q0.bind(null,je,e),[n.memoizedState,e]}function go(e,n,i,a){return e={tag:e,create:n,destroy:i,deps:a,next:null},n=je.updateQueue,n===null?(n={lastEffect:null,stores:null},je.updateQueue=n,n.lastEffect=e.next=e):(i=n.lastEffect,i===null?n.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,n.lastEffect=e)),e}function Qf(){return Yt().memoizedState}function Fs(e,n,i,a){var c=mn();je.flags|=e,c.memoizedState=go(1|n,i,void 0,a===void 0?null:a)}function Ls(e,n,i,a){var c=Yt();a=a===void 0?null:a;var f=void 0;if(et!==null){var g=et.memoizedState;if(f=g.destroy,a!==null&&au(a,g.deps)){c.memoizedState=go(n,i,f,a);return}}je.flags|=e,c.memoizedState=go(1|n,i,f,a)}function bf(e,n){return Fs(8390656,8,e,n)}function fu(e,n){return Ls(2048,8,e,n)}function Zf(e,n){return Ls(4,2,e,n)}function qf(e,n){return Ls(4,4,e,n)}function Jf(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function eh(e,n,i){return i=i!=null?i.concat([e]):null,Ls(4,4,Jf.bind(null,n,e),i)}function hu(){}function th(e,n){var i=Yt();n=n===void 0?null:n;var a=i.memoizedState;return a!==null&&n!==null&&au(n,a[1])?a[0]:(i.memoizedState=[e,n],e)}function nh(e,n){var i=Yt();n=n===void 0?null:n;var a=i.memoizedState;return a!==null&&n!==null&&au(n,a[1])?a[0]:(e=e(),i.memoizedState=[e,n],e)}function rh(e,n,i){return(Cr&21)===0?(e.baseState&&(e.baseState=!1,Rt=!0),e.memoizedState=i):(rn(i,n)||(i=Dd(),je.lanes|=i,Rr|=i,e.baseState=!0),n)}function b0(e,n){var i=Oe;Oe=i!==0&&4>i?i:4,e(!0);var a=su.transition;su.transition={};try{e(!1),n()}finally{Oe=i,su.transition=a}}function ih(){return Yt().memoizedState}function Z0(e,n,i){var a=nr(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},oh(e))sh(n,i);else if(i=Lf(e,n,i,a),i!==null){var c=wt();un(i,e,a,c),ah(i,n,a)}}function q0(e,n,i){var a=nr(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(oh(e))sh(n,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var g=n.lastRenderedState,y=f(g,i);if(c.hasEagerState=!0,c.eagerState=y,rn(y,g)){var A=n.interleaved;A===null?(c.next=c,eu(n)):(c.next=A.next,A.next=c),n.interleaved=c;return}}catch{}finally{}i=Lf(e,n,c,a),i!==null&&(c=wt(),un(i,e,a,c),ah(i,n,a))}}function oh(e){var n=e.alternate;return e===je||n!==null&&n===je}function sh(e,n){fo=Us=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function ah(e,n,i){if((i&4194240)!==0){var a=n.lanes;a&=e.pendingLanes,i|=a,n.lanes=i,gl(e,i)}}var Bs={readContext:jt,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},J0={readContext:jt,useCallback:function(e,n){return mn().memoizedState=[e,n===void 0?null:n],e},useContext:jt,useEffect:bf,useImperativeHandle:function(e,n,i){return i=i!=null?i.concat([e]):null,Fs(4194308,4,Jf.bind(null,n,e),i)},useLayoutEffect:function(e,n){return Fs(4194308,4,e,n)},useInsertionEffect:function(e,n){return Fs(4,2,e,n)},useMemo:function(e,n){var i=mn();return n=n===void 0?null:n,e=e(),i.memoizedState=[e,n],e},useReducer:function(e,n,i){var a=mn();return n=i!==void 0?i(n):n,a.memoizedState=a.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},a.queue=e,e=e.dispatch=Z0.bind(null,je,e),[a.memoizedState,e]},useRef:function(e){var n=mn();return e={current:e},n.memoizedState=e},useState:Xf,useDebugValue:hu,useDeferredValue:function(e){return mn().memoizedState=e},useTransition:function(){var e=Xf(!1),n=e[0];return e=b0.bind(null,e[1]),mn().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,i){var a=je,c=mn();if(ze){if(i===void 0)throw Error(o(407));i=i()}else{if(i=n(),ot===null)throw Error(o(349));(Cr&30)!==0||$f(a,n,i)}c.memoizedState=i;var f={value:i,getSnapshot:n};return c.queue=f,bf(Yf.bind(null,a,f,e),[e]),a.flags|=2048,go(9,jf.bind(null,a,f,i,n),void 0,null),i},useId:function(){var e=mn(),n=ot.identifierPrefix;if(ze){var i=Pn,a=Rn;i=(a&~(1<<32-nn(a)-1)).toString(32)+i,n=":"+n+"R"+i,i=ho++,0<i&&(n+="H"+i.toString(32)),n+=":"}else i=Q0++,n=":"+n+"r"+i.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},ev={readContext:jt,useCallback:th,useContext:jt,useEffect:fu,useImperativeHandle:eh,useInsertionEffect:Zf,useLayoutEffect:qf,useMemo:nh,useReducer:cu,useRef:Qf,useState:function(){return cu(po)},useDebugValue:hu,useDeferredValue:function(e){var n=Yt();return rh(n,et.memoizedState,e)},useTransition:function(){var e=cu(po)[0],n=Yt().memoizedState;return[e,n]},useMutableSource:zf,useSyncExternalStore:Wf,useId:ih,unstable_isNewReconciler:!1},tv={readContext:jt,useCallback:th,useContext:jt,useEffect:fu,useImperativeHandle:eh,useInsertionEffect:Zf,useLayoutEffect:qf,useMemo:nh,useReducer:du,useRef:Qf,useState:function(){return du(po)},useDebugValue:hu,useDeferredValue:function(e){var n=Yt();return et===null?n.memoizedState=e:rh(n,et.memoizedState,e)},useTransition:function(){var e=du(po)[0],n=Yt().memoizedState;return[e,n]},useMutableSource:zf,useSyncExternalStore:Wf,useId:ih,unstable_isNewReconciler:!1};function sn(e,n){if(e&&e.defaultProps){n=x({},n),e=e.defaultProps;for(var i in e)n[i]===void 0&&(n[i]=e[i]);return n}return n}function pu(e,n,i,a){n=e.memoizedState,i=i(a,n),i=i==null?n:x({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Hs={isMounted:function(e){return(e=e._reactInternals)?yr(e)===e:!1},enqueueSetState:function(e,n,i){e=e._reactInternals;var a=wt(),c=nr(e),f=kn(a,c);f.payload=n,i!=null&&(f.callback=i),n=qn(e,f,c),n!==null&&(un(n,e,c,a),ks(n,e,c))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var a=wt(),c=nr(e),f=kn(a,c);f.tag=1,f.payload=n,i!=null&&(f.callback=i),n=qn(e,f,c),n!==null&&(un(n,e,c,a),ks(n,e,c))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=wt(),a=nr(e),c=kn(i,a);c.tag=2,n!=null&&(c.callback=n),n=qn(e,c,a),n!==null&&(un(n,e,a,i),ks(n,e,a))}};function lh(e,n,i,a,c,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,g):n.prototype&&n.prototype.isPureReactComponent?!eo(i,a)||!eo(c,f):!0}function uh(e,n,i){var a=!1,c=Qn,f=n.contextType;return typeof f=="object"&&f!==null?f=jt(f):(c=Ct(n)?wr:ht.current,a=n.contextTypes,f=(a=a!=null)?ti(e,c):Qn),n=new n(i,f),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Hs,e.stateNode=n,n._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=f),n}function ch(e,n,i,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,a),n.state!==e&&Hs.enqueueReplaceState(n,n.state,null)}function gu(e,n,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs={},tu(e);var f=n.contextType;typeof f=="object"&&f!==null?c.context=jt(f):(f=Ct(n)?wr:ht.current,c.context=ti(e,f)),c.state=e.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(pu(e,n,f,i),c.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(n=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),n!==c.state&&Hs.enqueueReplaceState(c,c.state,null),Os(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function ui(e,n){try{var i="",a=n;do i+=Se(a),a=a.return;while(a);var c=i}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:n,stack:c,digest:null}}function mu(e,n,i){return{value:e,source:null,stack:i??null,digest:n??null}}function vu(e,n){try{console.error(n.value)}catch(i){setTimeout(function(){throw i})}}var nv=typeof WeakMap=="function"?WeakMap:Map;function dh(e,n,i){i=kn(-1,i),i.tag=3,i.payload={element:null};var a=n.value;return i.callback=function(){Ys||(Ys=!0,Du=a),vu(e,n)},i}function fh(e,n,i){i=kn(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=n.value;i.payload=function(){return a(c)},i.callback=function(){vu(e,n)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(i.callback=function(){vu(e,n),typeof a!="function"&&(er===null?er=new Set([this]):er.add(this));var g=n.stack;this.componentDidCatch(n.value,{componentStack:g!==null?g:""})}),i}function hh(e,n,i){var a=e.pingCache;if(a===null){a=e.pingCache=new nv;var c=new Set;a.set(n,c)}else c=a.get(n),c===void 0&&(c=new Set,a.set(n,c));c.has(i)||(c.add(i),e=mv.bind(null,e,n,i),n.then(e,e))}function ph(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function gh(e,n,i,a,c){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(n=kn(-1,1),n.tag=2,qn(i,n,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=c,e)}var rv=j.ReactCurrentOwner,Rt=!1;function At(e,n,i,a){n.child=e===null?Ff(n,null,i,a):oi(n,e.child,i,a)}function mh(e,n,i,a,c){i=i.render;var f=n.ref;return ai(n,c),a=lu(e,n,i,a,f,c),i=uu(),e!==null&&!Rt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~c,On(e,n,c)):(ze&&i&&Yl(n),n.flags|=1,At(e,n,a,c),n.child)}function vh(e,n,i,a,c){if(e===null){var f=i.type;return typeof f=="function"&&!xu(f)&&f.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(n.tag=15,n.type=f,Sh(e,n,f,a,c)):(e=Zs(i.type,null,a,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,(e.lanes&c)===0){var g=f.memoizedProps;if(i=i.compare,i=i!==null?i:eo,i(g,a)&&e.ref===n.ref)return On(e,n,c)}return n.flags|=1,e=ir(f,a),e.ref=n.ref,e.return=n,n.child=e}function Sh(e,n,i,a,c){if(e!==null){var f=e.memoizedProps;if(eo(f,a)&&e.ref===n.ref)if(Rt=!1,n.pendingProps=a=f,(e.lanes&c)!==0)(e.flags&131072)!==0&&(Rt=!0);else return n.lanes=e.lanes,On(e,n,c)}return Su(e,n,i,a,c)}function yh(e,n,i){var a=n.pendingProps,c=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(di,Bt),Bt|=i;else{if((i&1073741824)===0)return e=f!==null?f.baseLanes|i:i,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Ue(di,Bt),Bt|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:i,Ue(di,Bt),Bt|=a}else f!==null?(a=f.baseLanes|i,n.memoizedState=null):a=i,Ue(di,Bt),Bt|=a;return At(e,n,c,i),n.child}function Ah(e,n){var i=n.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(n.flags|=512,n.flags|=2097152)}function Su(e,n,i,a,c){var f=Ct(i)?wr:ht.current;return f=ti(n,f),ai(n,c),i=lu(e,n,i,a,f,c),a=uu(),e!==null&&!Rt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~c,On(e,n,c)):(ze&&a&&Yl(n),n.flags|=1,At(e,n,i,c),n.child)}function wh(e,n,i,a,c){if(Ct(i)){var f=!0;_s(n)}else f=!1;if(ai(n,c),n.stateNode===null)Gs(e,n),uh(n,i,a),gu(n,i,a,c),a=!0;else if(e===null){var g=n.stateNode,y=n.memoizedProps;g.props=y;var A=g.context,N=i.contextType;typeof N=="object"&&N!==null?N=jt(N):(N=Ct(i)?wr:ht.current,N=ti(n,N));var U=i.getDerivedStateFromProps,L=typeof U=="function"||typeof g.getSnapshotBeforeUpdate=="function";L||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(y!==a||A!==N)&&ch(n,g,a,N),Zn=!1;var M=n.memoizedState;g.state=M,Os(n,a,g,c),A=n.memoizedState,y!==a||M!==A||Tt.current||Zn?(typeof U=="function"&&(pu(n,i,U,a),A=n.memoizedState),(y=Zn||lh(n,i,y,a,M,A,N))?(L||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(n.flags|=4194308)):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=A),g.props=a,g.state=A,g.context=N,a=y):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{g=n.stateNode,Bf(e,n),y=n.memoizedProps,N=n.type===n.elementType?y:sn(n.type,y),g.props=N,L=n.pendingProps,M=g.context,A=i.contextType,typeof A=="object"&&A!==null?A=jt(A):(A=Ct(i)?wr:ht.current,A=ti(n,A));var Y=i.getDerivedStateFromProps;(U=typeof Y=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(y!==L||M!==A)&&ch(n,g,a,A),Zn=!1,M=n.memoizedState,g.state=M,Os(n,a,g,c);var Q=n.memoizedState;y!==L||M!==Q||Tt.current||Zn?(typeof Y=="function"&&(pu(n,i,Y,a),Q=n.memoizedState),(N=Zn||lh(n,i,N,a,M,Q,A)||!1)?(U||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,Q,A),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,Q,A)),typeof g.componentDidUpdate=="function"&&(n.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof g.componentDidUpdate!="function"||y===e.memoizedProps&&M===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&M===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=Q),g.props=a,g.state=Q,g.context=A,a=N):(typeof g.componentDidUpdate!="function"||y===e.memoizedProps&&M===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&M===e.memoizedState||(n.flags|=1024),a=!1)}return yu(e,n,i,a,f,c)}function yu(e,n,i,a,c,f){Ah(e,n);var g=(n.flags&128)!==0;if(!a&&!g)return c&&Cf(n,i,!1),On(e,n,f);a=n.stateNode,rv.current=n;var y=g&&typeof i.getDerivedStateFromError!="function"?null:a.render();return n.flags|=1,e!==null&&g?(n.child=oi(n,e.child,null,f),n.child=oi(n,null,y,f)):At(e,n,y,f),n.memoizedState=a.state,c&&Cf(n,i,!0),n.child}function _h(e){var n=e.stateNode;n.pendingContext?If(e,n.pendingContext,n.pendingContext!==n.context):n.context&&If(e,n.context,!1),nu(e,n.containerInfo)}function Eh(e,n,i,a,c){return ii(),Ql(c),n.flags|=256,At(e,n,i,a),n.child}var Au={dehydrated:null,treeContext:null,retryLane:0};function wu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ih(e,n,i){var a=n.pendingProps,c=$e.current,f=!1,g=(n.flags&128)!==0,y;if((y=g)||(y=e!==null&&e.memoizedState===null?!1:(c&2)!==0),y?(f=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Ue($e,c&1),e===null)return Xl(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(g=a.children,e=a.fallback,f?(a=n.mode,f=n.child,g={mode:"hidden",children:g},(a&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=g):f=qs(g,a,0,null),e=Or(e,a,i,null),f.return=n,e.return=n,f.sibling=e,n.child=f,n.child.memoizedState=wu(i),n.memoizedState=Au,e):_u(n,g));if(c=e.memoizedState,c!==null&&(y=c.dehydrated,y!==null))return iv(e,n,g,a,y,c,i);if(f){f=a.fallback,g=n.mode,c=e.child,y=c.sibling;var A={mode:"hidden",children:a.children};return(g&1)===0&&n.child!==c?(a=n.child,a.childLanes=0,a.pendingProps=A,n.deletions=null):(a=ir(c,A),a.subtreeFlags=c.subtreeFlags&14680064),y!==null?f=ir(y,f):(f=Or(f,g,i,null),f.flags|=2),f.return=n,a.return=n,a.sibling=f,n.child=a,a=f,f=n.child,g=e.child.memoizedState,g=g===null?wu(i):{baseLanes:g.baseLanes|i,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~i,n.memoizedState=Au,a}return f=e.child,e=f.sibling,a=ir(f,{mode:"visible",children:a.children}),(n.mode&1)===0&&(a.lanes=i),a.return=n,a.sibling=null,e!==null&&(i=n.deletions,i===null?(n.deletions=[e],n.flags|=16):i.push(e)),n.child=a,n.memoizedState=null,a}function _u(e,n){return n=qs({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function xs(e,n,i,a){return a!==null&&Ql(a),oi(n,e.child,null,i),e=_u(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function iv(e,n,i,a,c,f,g){if(i)return n.flags&256?(n.flags&=-257,a=mu(Error(o(422))),xs(e,n,g,a)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(f=a.fallback,c=n.mode,a=qs({mode:"visible",children:a.children},c,0,null),f=Or(f,c,g,null),f.flags|=2,a.return=n,f.return=n,a.sibling=f,n.child=a,(n.mode&1)!==0&&oi(n,e.child,null,g),n.child.memoizedState=wu(g),n.memoizedState=Au,f);if((n.mode&1)===0)return xs(e,n,g,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var y=a.dgst;return a=y,f=Error(o(419)),a=mu(f,a,void 0),xs(e,n,g,a)}if(y=(g&e.childLanes)!==0,Rt||y){if(a=ot,a!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(a.suspendedLanes|g))!==0?0:c,c!==0&&c!==f.retryLane&&(f.retryLane=c,Nn(e,c),un(a,e,c,-1))}return Hu(),a=mu(Error(o(421))),xs(e,n,g,a)}return c.data==="$?"?(n.flags|=128,n.child=e.child,n=vv.bind(null,e),c._reactRetry=n,null):(e=f.treeContext,Lt=Kn(c.nextSibling),Ft=n,ze=!0,on=null,e!==null&&(Wt[$t++]=Rn,Wt[$t++]=Pn,Wt[$t++]=_r,Rn=e.id,Pn=e.overflow,_r=n),n=_u(n,a.children),n.flags|=4096,n)}function Th(e,n,i){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),Jl(e.return,n,i)}function Eu(e,n,i,a,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=i,f.tailMode=c)}function Ch(e,n,i){var a=n.pendingProps,c=a.revealOrder,f=a.tail;if(At(e,n,a.children,i),a=$e.current,(a&2)!==0)a=a&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Th(e,i,n);else if(e.tag===19)Th(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Ue($e,a),(n.mode&1)===0)n.memoizedState=null;else switch(c){case"forwards":for(i=n.child,c=null;i!==null;)e=i.alternate,e!==null&&Ds(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=n.child,n.child=null):(c=i.sibling,i.sibling=null),Eu(n,!1,c,i,f);break;case"backwards":for(i=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&Ds(e)===null){n.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Eu(n,!0,i,null,f);break;case"together":Eu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Gs(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function On(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Rr|=n.lanes,(i&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(o(153));if(n.child!==null){for(e=n.child,i=ir(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=ir(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function ov(e,n,i){switch(n.tag){case 3:_h(n),ii();break;case 5:Gf(n);break;case 1:Ct(n.type)&&_s(n);break;case 4:nu(n,n.stateNode.containerInfo);break;case 10:var a=n.type._context,c=n.memoizedProps.value;Ue(Ps,a._currentValue),a._currentValue=c;break;case 13:if(a=n.memoizedState,a!==null)return a.dehydrated!==null?(Ue($e,$e.current&1),n.flags|=128,null):(i&n.child.childLanes)!==0?Ih(e,n,i):(Ue($e,$e.current&1),e=On(e,n,i),e!==null?e.sibling:null);Ue($e,$e.current&1);break;case 19:if(a=(i&n.childLanes)!==0,(e.flags&128)!==0){if(a)return Ch(e,n,i);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Ue($e,$e.current),a)break;return null;case 22:case 23:return n.lanes=0,yh(e,n,i)}return On(e,n,i)}var Rh,Iu,Ph,Nh;Rh=function(e,n){for(var i=n.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Iu=function(){},Ph=function(e,n,i,a){var c=e.memoizedProps;if(c!==a){e=n.stateNode,Tr(gn.current);var f=null;switch(i){case"input":c=Mt(e,c),a=Mt(e,a),f=[];break;case"select":c=x({},c,{value:void 0}),a=x({},a,{value:void 0}),f=[];break;case"textarea":c=Sr(e,c),a=Sr(e,a),f=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=ys)}il(i,a);var g;i=null;for(N in c)if(!a.hasOwnProperty(N)&&c.hasOwnProperty(N)&&c[N]!=null)if(N==="style"){var y=c[N];for(g in y)y.hasOwnProperty(g)&&(i||(i={}),i[g]="")}else N!=="dangerouslySetInnerHTML"&&N!=="children"&&N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(l.hasOwnProperty(N)?f||(f=[]):(f=f||[]).push(N,null));for(N in a){var A=a[N];if(y=c!=null?c[N]:void 0,a.hasOwnProperty(N)&&A!==y&&(A!=null||y!=null))if(N==="style")if(y){for(g in y)!y.hasOwnProperty(g)||A&&A.hasOwnProperty(g)||(i||(i={}),i[g]="");for(g in A)A.hasOwnProperty(g)&&y[g]!==A[g]&&(i||(i={}),i[g]=A[g])}else i||(f||(f=[]),f.push(N,i)),i=A;else N==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,y=y?y.__html:void 0,A!=null&&y!==A&&(f=f||[]).push(N,A)):N==="children"?typeof A!="string"&&typeof A!="number"||(f=f||[]).push(N,""+A):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&(l.hasOwnProperty(N)?(A!=null&&N==="onScroll"&&Be("scroll",e),f||y===A||(f=[])):(f=f||[]).push(N,A))}i&&(f=f||[]).push("style",i);var N=f;(n.updateQueue=N)&&(n.flags|=4)}},Nh=function(e,n,i,a){i!==a&&(n.flags|=4)};function mo(e,n){if(!ze)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function gt(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(n)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,n}function sv(e,n,i){var a=n.pendingProps;switch(Vl(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(n),null;case 1:return Ct(n.type)&&ws(),gt(n),null;case 3:return a=n.stateNode,li(),He(Tt),He(ht),ou(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Cs(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,on!==null&&(Fu(on),on=null))),Iu(e,n),gt(n),null;case 5:ru(n);var c=Tr(co.current);if(i=n.type,e!==null&&n.stateNode!=null)Ph(e,n,i,a,c),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!a){if(n.stateNode===null)throw Error(o(166));return gt(n),null}if(e=Tr(gn.current),Cs(n)){a=n.stateNode,i=n.type;var f=n.memoizedProps;switch(a[pn]=n,a[oo]=f,e=(n.mode&1)!==0,i){case"dialog":Be("cancel",a),Be("close",a);break;case"iframe":case"object":case"embed":Be("load",a);break;case"video":case"audio":for(c=0;c<no.length;c++)Be(no[c],a);break;case"source":Be("error",a);break;case"img":case"image":case"link":Be("error",a),Be("load",a);break;case"details":Be("toggle",a);break;case"input":zt(a,f),Be("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},Be("invalid",a);break;case"textarea":dd(a,f),Be("invalid",a)}il(i,f),c=null;for(var g in f)if(f.hasOwnProperty(g)){var y=f[g];g==="children"?typeof y=="string"?a.textContent!==y&&(f.suppressHydrationWarning!==!0&&Ss(a.textContent,y,e),c=["children",y]):typeof y=="number"&&a.textContent!==""+y&&(f.suppressHydrationWarning!==!0&&Ss(a.textContent,y,e),c=["children",""+y]):l.hasOwnProperty(g)&&y!=null&&g==="onScroll"&&Be("scroll",a)}switch(i){case"input":Ne(a),Hn(a,f,!0);break;case"textarea":Ne(a),hd(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=ys)}a=c,n.updateQueue=a,a!==null&&(n.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=pd(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=g.createElement(i,{is:a.is}):(e=g.createElement(i),i==="select"&&(g=e,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):e=g.createElementNS(e,i),e[pn]=n,e[oo]=a,Rh(e,n,!1,!1),n.stateNode=e;e:{switch(g=ol(i,a),i){case"dialog":Be("cancel",e),Be("close",e),c=a;break;case"iframe":case"object":case"embed":Be("load",e),c=a;break;case"video":case"audio":for(c=0;c<no.length;c++)Be(no[c],e);c=a;break;case"source":Be("error",e),c=a;break;case"img":case"image":case"link":Be("error",e),Be("load",e),c=a;break;case"details":Be("toggle",e),c=a;break;case"input":zt(e,a),c=Mt(e,a),Be("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=x({},a,{value:void 0}),Be("invalid",e);break;case"textarea":dd(e,a),c=Sr(e,a),Be("invalid",e);break;default:c=a}il(i,c),y=c;for(f in y)if(y.hasOwnProperty(f)){var A=y[f];f==="style"?vd(e,A):f==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&gd(e,A)):f==="children"?typeof A=="string"?(i!=="textarea"||A!=="")&&Bi(e,A):typeof A=="number"&&Bi(e,""+A):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l.hasOwnProperty(f)?A!=null&&f==="onScroll"&&Be("scroll",e):A!=null&&W(e,f,A,g))}switch(i){case"input":Ne(e),Hn(e,a,!1);break;case"textarea":Ne(e),hd(e);break;case"option":a.value!=null&&e.setAttribute("value",""+fe(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?Gn(e,!!a.multiple,f,!1):a.defaultValue!=null&&Gn(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=ys)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return gt(n),null;case 6:if(e&&n.stateNode!=null)Nh(e,n,e.memoizedProps,a);else{if(typeof a!="string"&&n.stateNode===null)throw Error(o(166));if(i=Tr(co.current),Tr(gn.current),Cs(n)){if(a=n.stateNode,i=n.memoizedProps,a[pn]=n,(f=a.nodeValue!==i)&&(e=Ft,e!==null))switch(e.tag){case 3:Ss(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ss(a.nodeValue,i,(e.mode&1)!==0)}f&&(n.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[pn]=n,n.stateNode=a}return gt(n),null;case 13:if(He($e),a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ze&&Lt!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Df(),ii(),n.flags|=98560,f=!1;else if(f=Cs(n),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(o(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));f[pn]=n}else ii(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;gt(n),f=!1}else on!==null&&(Fu(on),on=null),f=!0;if(!f)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=i,n):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||($e.current&1)!==0?tt===0&&(tt=3):Hu())),n.updateQueue!==null&&(n.flags|=4),gt(n),null);case 4:return li(),Iu(e,n),e===null&&ro(n.stateNode.containerInfo),gt(n),null;case 10:return ql(n.type._context),gt(n),null;case 17:return Ct(n.type)&&ws(),gt(n),null;case 19:if(He($e),f=n.memoizedState,f===null)return gt(n),null;if(a=(n.flags&128)!==0,g=f.rendering,g===null)if(a)mo(f,!1);else{if(tt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(g=Ds(e),g!==null){for(n.flags|=128,mo(f,!1),a=g.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),n.subtreeFlags=0,a=i,i=n.child;i!==null;)f=i,e=a,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ue($e,$e.current&1|2),n.child}e=e.sibling}f.tail!==null&&Ke()>fi&&(n.flags|=128,a=!0,mo(f,!1),n.lanes=4194304)}else{if(!a)if(e=Ds(g),e!==null){if(n.flags|=128,a=!0,i=e.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),mo(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!ze)return gt(n),null}else 2*Ke()-f.renderingStartTime>fi&&i!==1073741824&&(n.flags|=128,a=!0,mo(f,!1),n.lanes=4194304);f.isBackwards?(g.sibling=n.child,n.child=g):(i=f.last,i!==null?i.sibling=g:n.child=g,f.last=g)}return f.tail!==null?(n=f.tail,f.rendering=n,f.tail=n.sibling,f.renderingStartTime=Ke(),n.sibling=null,i=$e.current,Ue($e,a?i&1|2:i&1),n):(gt(n),null);case 22:case 23:return Bu(),a=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(n.flags|=8192),a&&(n.mode&1)!==0?(Bt&1073741824)!==0&&(gt(n),n.subtreeFlags&6&&(n.flags|=8192)):gt(n),null;case 24:return null;case 25:return null}throw Error(o(156,n.tag))}function av(e,n){switch(Vl(n),n.tag){case 1:return Ct(n.type)&&ws(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return li(),He(Tt),He(ht),ou(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return ru(n),null;case 13:if(He($e),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(o(340));ii()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return He($e),null;case 4:return li(),null;case 10:return ql(n.type._context),null;case 22:case 23:return Bu(),null;case 24:return null;default:return null}}var zs=!1,mt=!1,lv=typeof WeakSet=="function"?WeakSet:Set,K=null;function ci(e,n){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Ye(e,n,a)}else i.current=null}function Tu(e,n,i){try{i()}catch(a){Ye(e,n,a)}}var kh=!1;function uv(e,n){if(Bl=as,e=lf(),Nl(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var g=0,y=-1,A=-1,N=0,U=0,L=e,M=null;t:for(;;){for(var Y;L!==i||c!==0&&L.nodeType!==3||(y=g+c),L!==f||a!==0&&L.nodeType!==3||(A=g+a),L.nodeType===3&&(g+=L.nodeValue.length),(Y=L.firstChild)!==null;)M=L,L=Y;for(;;){if(L===e)break t;if(M===i&&++N===c&&(y=g),M===f&&++U===a&&(A=g),(Y=L.nextSibling)!==null)break;L=M,M=L.parentNode}L=Y}i=y===-1||A===-1?null:{start:y,end:A}}else i=null}i=i||{start:0,end:0}}else i=null;for(Hl={focusedElem:e,selectionRange:i},as=!1,K=n;K!==null;)if(n=K,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,K=e;else for(;K!==null;){n=K;try{var Q=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Q!==null){var b=Q.memoizedProps,Xe=Q.memoizedState,T=n.stateNode,_=T.getSnapshotBeforeUpdate(n.elementType===n.type?b:sn(n.type,b),Xe);T.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var C=n.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(B){Ye(n,n.return,B)}if(e=n.sibling,e!==null){e.return=n.return,K=e;break}K=n.return}return Q=kh,kh=!1,Q}function vo(e,n,i){var a=n.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var f=c.destroy;c.destroy=void 0,f!==void 0&&Tu(n,i,f)}c=c.next}while(c!==a)}}function Ws(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==n)}}function Cu(e){var n=e.ref;if(n!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof n=="function"?n(e):n.current=e}}function Oh(e){var n=e.alternate;n!==null&&(e.alternate=null,Oh(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[pn],delete n[oo],delete n[Wl],delete n[Y0],delete n[V0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Dh(e){return e.tag===5||e.tag===3||e.tag===4}function Mh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ru(e,n,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?i.nodeType===8?i.parentNode.insertBefore(e,n):i.insertBefore(e,n):(i.nodeType===8?(n=i.parentNode,n.insertBefore(e,i)):(n=i,n.appendChild(e)),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=ys));else if(a!==4&&(e=e.child,e!==null))for(Ru(e,n,i),e=e.sibling;e!==null;)Ru(e,n,i),e=e.sibling}function Pu(e,n,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Pu(e,n,i),e=e.sibling;e!==null;)Pu(e,n,i),e=e.sibling}var lt=null,an=!1;function Jn(e,n,i){for(i=i.child;i!==null;)Uh(e,n,i),i=i.sibling}function Uh(e,n,i){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(ts,i)}catch{}switch(i.tag){case 5:mt||ci(i,n);case 6:var a=lt,c=an;lt=null,Jn(e,n,i),lt=a,an=c,lt!==null&&(an?(e=lt,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):lt.removeChild(i.stateNode));break;case 18:lt!==null&&(an?(e=lt,i=i.stateNode,e.nodeType===8?zl(e.parentNode,i):e.nodeType===1&&zl(e,i),Xi(e)):zl(lt,i.stateNode));break;case 4:a=lt,c=an,lt=i.stateNode.containerInfo,an=!0,Jn(e,n,i),lt=a,an=c;break;case 0:case 11:case 14:case 15:if(!mt&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var f=c,g=f.destroy;f=f.tag,g!==void 0&&((f&2)!==0||(f&4)!==0)&&Tu(i,n,g),c=c.next}while(c!==a)}Jn(e,n,i);break;case 1:if(!mt&&(ci(i,n),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(y){Ye(i,n,y)}Jn(e,n,i);break;case 21:Jn(e,n,i);break;case 22:i.mode&1?(mt=(a=mt)||i.memoizedState!==null,Jn(e,n,i),mt=a):Jn(e,n,i);break;default:Jn(e,n,i)}}function Fh(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new lv),n.forEach(function(a){var c=Sv.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function ln(e,n){var i=n.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var f=e,g=n,y=g;e:for(;y!==null;){switch(y.tag){case 5:lt=y.stateNode,an=!1;break e;case 3:lt=y.stateNode.containerInfo,an=!0;break e;case 4:lt=y.stateNode.containerInfo,an=!0;break e}y=y.return}if(lt===null)throw Error(o(160));Uh(f,g,c),lt=null,an=!1;var A=c.alternate;A!==null&&(A.return=null),c.return=null}catch(N){Ye(c,n,N)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Lh(n,e),n=n.sibling}function Lh(e,n){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ln(n,e),vn(e),a&4){try{vo(3,e,e.return),Ws(3,e)}catch(b){Ye(e,e.return,b)}try{vo(5,e,e.return)}catch(b){Ye(e,e.return,b)}}break;case 1:ln(n,e),vn(e),a&512&&i!==null&&ci(i,i.return);break;case 5:if(ln(n,e),vn(e),a&512&&i!==null&&ci(i,i.return),e.flags&32){var c=e.stateNode;try{Bi(c,"")}catch(b){Ye(e,e.return,b)}}if(a&4&&(c=e.stateNode,c!=null)){var f=e.memoizedProps,g=i!==null?i.memoizedProps:f,y=e.type,A=e.updateQueue;if(e.updateQueue=null,A!==null)try{y==="input"&&f.type==="radio"&&f.name!=null&&vr(c,f),ol(y,g);var N=ol(y,f);for(g=0;g<A.length;g+=2){var U=A[g],L=A[g+1];U==="style"?vd(c,L):U==="dangerouslySetInnerHTML"?gd(c,L):U==="children"?Bi(c,L):W(c,U,L,N)}switch(y){case"input":In(c,f);break;case"textarea":fd(c,f);break;case"select":var M=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!f.multiple;var Y=f.value;Y!=null?Gn(c,!!f.multiple,Y,!1):M!==!!f.multiple&&(f.defaultValue!=null?Gn(c,!!f.multiple,f.defaultValue,!0):Gn(c,!!f.multiple,f.multiple?[]:"",!1))}c[oo]=f}catch(b){Ye(e,e.return,b)}}break;case 6:if(ln(n,e),vn(e),a&4){if(e.stateNode===null)throw Error(o(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(b){Ye(e,e.return,b)}}break;case 3:if(ln(n,e),vn(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{Xi(n.containerInfo)}catch(b){Ye(e,e.return,b)}break;case 4:ln(n,e),vn(e);break;case 13:ln(n,e),vn(e),c=e.child,c.flags&8192&&(f=c.memoizedState!==null,c.stateNode.isHidden=f,!f||c.alternate!==null&&c.alternate.memoizedState!==null||(Ou=Ke())),a&4&&Fh(e);break;case 22:if(U=i!==null&&i.memoizedState!==null,e.mode&1?(mt=(N=mt)||U,ln(n,e),mt=N):ln(n,e),vn(e),a&8192){if(N=e.memoizedState!==null,(e.stateNode.isHidden=N)&&!U&&(e.mode&1)!==0)for(K=e,U=e.child;U!==null;){for(L=K=U;K!==null;){switch(M=K,Y=M.child,M.tag){case 0:case 11:case 14:case 15:vo(4,M,M.return);break;case 1:ci(M,M.return);var Q=M.stateNode;if(typeof Q.componentWillUnmount=="function"){a=M,i=M.return;try{n=a,Q.props=n.memoizedProps,Q.state=n.memoizedState,Q.componentWillUnmount()}catch(b){Ye(a,i,b)}}break;case 5:ci(M,M.return);break;case 22:if(M.memoizedState!==null){xh(L);continue}}Y!==null?(Y.return=M,K=Y):xh(L)}U=U.sibling}e:for(U=null,L=e;;){if(L.tag===5){if(U===null){U=L;try{c=L.stateNode,N?(f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(y=L.stateNode,A=L.memoizedProps.style,g=A!=null&&A.hasOwnProperty("display")?A.display:null,y.style.display=md("display",g))}catch(b){Ye(e,e.return,b)}}}else if(L.tag===6){if(U===null)try{L.stateNode.nodeValue=N?"":L.memoizedProps}catch(b){Ye(e,e.return,b)}}else if((L.tag!==22&&L.tag!==23||L.memoizedState===null||L===e)&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===e)break e;for(;L.sibling===null;){if(L.return===null||L.return===e)break e;U===L&&(U=null),L=L.return}U===L&&(U=null),L.sibling.return=L.return,L=L.sibling}}break;case 19:ln(n,e),vn(e),a&4&&Fh(e);break;case 21:break;default:ln(n,e),vn(e)}}function vn(e){var n=e.flags;if(n&2){try{e:{for(var i=e.return;i!==null;){if(Dh(i)){var a=i;break e}i=i.return}throw Error(o(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(Bi(c,""),a.flags&=-33);var f=Mh(e);Pu(e,f,c);break;case 3:case 4:var g=a.stateNode.containerInfo,y=Mh(e);Ru(e,y,g);break;default:throw Error(o(161))}}catch(A){Ye(e,e.return,A)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function cv(e,n,i){K=e,Bh(e)}function Bh(e,n,i){for(var a=(e.mode&1)!==0;K!==null;){var c=K,f=c.child;if(c.tag===22&&a){var g=c.memoizedState!==null||zs;if(!g){var y=c.alternate,A=y!==null&&y.memoizedState!==null||mt;y=zs;var N=mt;if(zs=g,(mt=A)&&!N)for(K=c;K!==null;)g=K,A=g.child,g.tag===22&&g.memoizedState!==null?Gh(c):A!==null?(A.return=g,K=A):Gh(c);for(;f!==null;)K=f,Bh(f),f=f.sibling;K=c,zs=y,mt=N}Hh(e)}else(c.subtreeFlags&8772)!==0&&f!==null?(f.return=c,K=f):Hh(e)}}function Hh(e){for(;K!==null;){var n=K;if((n.flags&8772)!==0){var i=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:mt||Ws(5,n);break;case 1:var a=n.stateNode;if(n.flags&4&&!mt)if(i===null)a.componentDidMount();else{var c=n.elementType===n.type?i.memoizedProps:sn(n.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=n.updateQueue;f!==null&&xf(n,f,a);break;case 3:var g=n.updateQueue;if(g!==null){if(i=null,n.child!==null)switch(n.child.tag){case 5:i=n.child.stateNode;break;case 1:i=n.child.stateNode}xf(n,g,i)}break;case 5:var y=n.stateNode;if(i===null&&n.flags&4){i=y;var A=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&i.focus();break;case"img":A.src&&(i.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var N=n.alternate;if(N!==null){var U=N.memoizedState;if(U!==null){var L=U.dehydrated;L!==null&&Xi(L)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}mt||n.flags&512&&Cu(n)}catch(M){Ye(n,n.return,M)}}if(n===e){K=null;break}if(i=n.sibling,i!==null){i.return=n.return,K=i;break}K=n.return}}function xh(e){for(;K!==null;){var n=K;if(n===e){K=null;break}var i=n.sibling;if(i!==null){i.return=n.return,K=i;break}K=n.return}}function Gh(e){for(;K!==null;){var n=K;try{switch(n.tag){case 0:case 11:case 15:var i=n.return;try{Ws(4,n)}catch(A){Ye(n,i,A)}break;case 1:var a=n.stateNode;if(typeof a.componentDidMount=="function"){var c=n.return;try{a.componentDidMount()}catch(A){Ye(n,c,A)}}var f=n.return;try{Cu(n)}catch(A){Ye(n,f,A)}break;case 5:var g=n.return;try{Cu(n)}catch(A){Ye(n,g,A)}}}catch(A){Ye(n,n.return,A)}if(n===e){K=null;break}var y=n.sibling;if(y!==null){y.return=n.return,K=y;break}K=n.return}}var dv=Math.ceil,$s=j.ReactCurrentDispatcher,Nu=j.ReactCurrentOwner,Vt=j.ReactCurrentBatchConfig,Te=0,ot=null,be=null,ut=0,Bt=0,di=Xn(0),tt=0,So=null,Rr=0,js=0,ku=0,yo=null,Pt=null,Ou=0,fi=1/0,Dn=null,Ys=!1,Du=null,er=null,Vs=!1,tr=null,Ks=0,Ao=0,Mu=null,Xs=-1,Qs=0;function wt(){return(Te&6)!==0?Ke():Xs!==-1?Xs:Xs=Ke()}function nr(e){return(e.mode&1)===0?1:(Te&2)!==0&&ut!==0?ut&-ut:X0.transition!==null?(Qs===0&&(Qs=Dd()),Qs):(e=Oe,e!==0||(e=window.event,e=e===void 0?16:zd(e.type)),e)}function un(e,n,i,a){if(50<Ao)throw Ao=0,Mu=null,Error(o(185));$i(e,i,a),((Te&2)===0||e!==ot)&&(e===ot&&((Te&2)===0&&(js|=i),tt===4&&rr(e,ut)),Nt(e,a),i===1&&Te===0&&(n.mode&1)===0&&(fi=Ke()+500,Es&&bn()))}function Nt(e,n){var i=e.callbackNode;Xm(e,n);var a=is(e,e===ot?ut:0);if(a===0)i!==null&&Nd(i),e.callbackNode=null,e.callbackPriority=0;else if(n=a&-a,e.callbackPriority!==n){if(i!=null&&Nd(i),n===1)e.tag===0?K0(Wh.bind(null,e)):Rf(Wh.bind(null,e)),$0(function(){(Te&6)===0&&bn()}),i=null;else{switch(Md(a)){case 1:i=fl;break;case 4:i=kd;break;case 16:i=es;break;case 536870912:i=Od;break;default:i=es}i=bh(i,zh.bind(null,e))}e.callbackPriority=n,e.callbackNode=i}}function zh(e,n){if(Xs=-1,Qs=0,(Te&6)!==0)throw Error(o(327));var i=e.callbackNode;if(hi()&&e.callbackNode!==i)return null;var a=is(e,e===ot?ut:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||n)n=bs(e,a);else{n=a;var c=Te;Te|=2;var f=jh();(ot!==e||ut!==n)&&(Dn=null,fi=Ke()+500,Nr(e,n));do try{pv();break}catch(y){$h(e,y)}while(!0);Zl(),$s.current=f,Te=c,be!==null?n=0:(ot=null,ut=0,n=tt)}if(n!==0){if(n===2&&(c=hl(e),c!==0&&(a=c,n=Uu(e,c))),n===1)throw i=So,Nr(e,0),rr(e,a),Nt(e,Ke()),i;if(n===6)rr(e,a);else{if(c=e.current.alternate,(a&30)===0&&!fv(c)&&(n=bs(e,a),n===2&&(f=hl(e),f!==0&&(a=f,n=Uu(e,f))),n===1))throw i=So,Nr(e,0),rr(e,a),Nt(e,Ke()),i;switch(e.finishedWork=c,e.finishedLanes=a,n){case 0:case 1:throw Error(o(345));case 2:kr(e,Pt,Dn);break;case 3:if(rr(e,a),(a&130023424)===a&&(n=Ou+500-Ke(),10<n)){if(is(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){wt(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Gl(kr.bind(null,e,Pt,Dn),n);break}kr(e,Pt,Dn);break;case 4:if(rr(e,a),(a&4194240)===a)break;for(n=e.eventTimes,c=-1;0<a;){var g=31-nn(a);f=1<<g,g=n[g],g>c&&(c=g),a&=~f}if(a=c,a=Ke()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*dv(a/1960))-a,10<a){e.timeoutHandle=Gl(kr.bind(null,e,Pt,Dn),a);break}kr(e,Pt,Dn);break;case 5:kr(e,Pt,Dn);break;default:throw Error(o(329))}}}return Nt(e,Ke()),e.callbackNode===i?zh.bind(null,e):null}function Uu(e,n){var i=yo;return e.current.memoizedState.isDehydrated&&(Nr(e,n).flags|=256),e=bs(e,n),e!==2&&(n=Pt,Pt=i,n!==null&&Fu(n)),e}function Fu(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function fv(e){for(var n=e;;){if(n.flags&16384){var i=n.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],f=c.getSnapshot;c=c.value;try{if(!rn(f(),c))return!1}catch{return!1}}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function rr(e,n){for(n&=~ku,n&=~js,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var i=31-nn(n),a=1<<i;e[i]=-1,n&=~a}}function Wh(e){if((Te&6)!==0)throw Error(o(327));hi();var n=is(e,0);if((n&1)===0)return Nt(e,Ke()),null;var i=bs(e,n);if(e.tag!==0&&i===2){var a=hl(e);a!==0&&(n=a,i=Uu(e,a))}if(i===1)throw i=So,Nr(e,0),rr(e,n),Nt(e,Ke()),i;if(i===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,kr(e,Pt,Dn),Nt(e,Ke()),null}function Lu(e,n){var i=Te;Te|=1;try{return e(n)}finally{Te=i,Te===0&&(fi=Ke()+500,Es&&bn())}}function Pr(e){tr!==null&&tr.tag===0&&(Te&6)===0&&hi();var n=Te;Te|=1;var i=Vt.transition,a=Oe;try{if(Vt.transition=null,Oe=1,e)return e()}finally{Oe=a,Vt.transition=i,Te=n,(Te&6)===0&&bn()}}function Bu(){Bt=di.current,He(di)}function Nr(e,n){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,W0(i)),be!==null)for(i=be.return;i!==null;){var a=i;switch(Vl(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ws();break;case 3:li(),He(Tt),He(ht),ou();break;case 5:ru(a);break;case 4:li();break;case 13:He($e);break;case 19:He($e);break;case 10:ql(a.type._context);break;case 22:case 23:Bu()}i=i.return}if(ot=e,be=e=ir(e.current,null),ut=Bt=n,tt=0,So=null,ku=js=Rr=0,Pt=yo=null,Ir!==null){for(n=0;n<Ir.length;n++)if(i=Ir[n],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,f=i.pending;if(f!==null){var g=f.next;f.next=c,a.next=g}i.pending=a}Ir=null}return e}function $h(e,n){do{var i=be;try{if(Zl(),Ms.current=Bs,Us){for(var a=je.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Us=!1}if(Cr=0,it=et=je=null,fo=!1,ho=0,Nu.current=null,i===null||i.return===null){tt=1,So=n,be=null;break}e:{var f=e,g=i.return,y=i,A=n;if(n=ut,y.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var N=A,U=y,L=U.tag;if((U.mode&1)===0&&(L===0||L===11||L===15)){var M=U.alternate;M?(U.updateQueue=M.updateQueue,U.memoizedState=M.memoizedState,U.lanes=M.lanes):(U.updateQueue=null,U.memoizedState=null)}var Y=ph(g);if(Y!==null){Y.flags&=-257,gh(Y,g,y,f,n),Y.mode&1&&hh(f,N,n),n=Y,A=N;var Q=n.updateQueue;if(Q===null){var b=new Set;b.add(A),n.updateQueue=b}else Q.add(A);break e}else{if((n&1)===0){hh(f,N,n),Hu();break e}A=Error(o(426))}}else if(ze&&y.mode&1){var Xe=ph(g);if(Xe!==null){(Xe.flags&65536)===0&&(Xe.flags|=256),gh(Xe,g,y,f,n),Ql(ui(A,y));break e}}f=A=ui(A,y),tt!==4&&(tt=2),yo===null?yo=[f]:yo.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,n&=-n,f.lanes|=n;var T=dh(f,A,n);Hf(f,T);break e;case 1:y=A;var _=f.type,C=f.stateNode;if((f.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(er===null||!er.has(C)))){f.flags|=65536,n&=-n,f.lanes|=n;var B=fh(f,y,n);Hf(f,B);break e}}f=f.return}while(f!==null)}Vh(i)}catch(Z){n=Z,be===i&&i!==null&&(be=i=i.return);continue}break}while(!0)}function jh(){var e=$s.current;return $s.current=Bs,e===null?Bs:e}function Hu(){(tt===0||tt===3||tt===2)&&(tt=4),ot===null||(Rr&268435455)===0&&(js&268435455)===0||rr(ot,ut)}function bs(e,n){var i=Te;Te|=2;var a=jh();(ot!==e||ut!==n)&&(Dn=null,Nr(e,n));do try{hv();break}catch(c){$h(e,c)}while(!0);if(Zl(),Te=i,$s.current=a,be!==null)throw Error(o(261));return ot=null,ut=0,tt}function hv(){for(;be!==null;)Yh(be)}function pv(){for(;be!==null&&!xm();)Yh(be)}function Yh(e){var n=Qh(e.alternate,e,Bt);e.memoizedProps=e.pendingProps,n===null?Vh(e):be=n,Nu.current=null}function Vh(e){var n=e;do{var i=n.alternate;if(e=n.return,(n.flags&32768)===0){if(i=sv(i,n,Bt),i!==null){be=i;return}}else{if(i=av(i,n),i!==null){i.flags&=32767,be=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tt=6,be=null;return}}if(n=n.sibling,n!==null){be=n;return}be=n=e}while(n!==null);tt===0&&(tt=5)}function kr(e,n,i){var a=Oe,c=Vt.transition;try{Vt.transition=null,Oe=1,gv(e,n,i,a)}finally{Vt.transition=c,Oe=a}return null}function gv(e,n,i,a){do hi();while(tr!==null);if((Te&6)!==0)throw Error(o(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var f=i.lanes|i.childLanes;if(Qm(e,f),e===ot&&(be=ot=null,ut=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Vs||(Vs=!0,bh(es,function(){return hi(),null})),f=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||f){f=Vt.transition,Vt.transition=null;var g=Oe;Oe=1;var y=Te;Te|=4,Nu.current=null,uv(e,i),Lh(i,e),F0(Hl),as=!!Bl,Hl=Bl=null,e.current=i,cv(i),Gm(),Te=y,Oe=g,Vt.transition=f}else e.current=i;if(Vs&&(Vs=!1,tr=e,Ks=c),f=e.pendingLanes,f===0&&(er=null),$m(i.stateNode),Nt(e,Ke()),n!==null)for(a=e.onRecoverableError,i=0;i<n.length;i++)c=n[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(Ys)throw Ys=!1,e=Du,Du=null,e;return(Ks&1)!==0&&e.tag!==0&&hi(),f=e.pendingLanes,(f&1)!==0?e===Mu?Ao++:(Ao=0,Mu=e):Ao=0,bn(),null}function hi(){if(tr!==null){var e=Md(Ks),n=Vt.transition,i=Oe;try{if(Vt.transition=null,Oe=16>e?16:e,tr===null)var a=!1;else{if(e=tr,tr=null,Ks=0,(Te&6)!==0)throw Error(o(331));var c=Te;for(Te|=4,K=e.current;K!==null;){var f=K,g=f.child;if((K.flags&16)!==0){var y=f.deletions;if(y!==null){for(var A=0;A<y.length;A++){var N=y[A];for(K=N;K!==null;){var U=K;switch(U.tag){case 0:case 11:case 15:vo(8,U,f)}var L=U.child;if(L!==null)L.return=U,K=L;else for(;K!==null;){U=K;var M=U.sibling,Y=U.return;if(Oh(U),U===N){K=null;break}if(M!==null){M.return=Y,K=M;break}K=Y}}}var Q=f.alternate;if(Q!==null){var b=Q.child;if(b!==null){Q.child=null;do{var Xe=b.sibling;b.sibling=null,b=Xe}while(b!==null)}}K=f}}if((f.subtreeFlags&2064)!==0&&g!==null)g.return=f,K=g;else e:for(;K!==null;){if(f=K,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:vo(9,f,f.return)}var T=f.sibling;if(T!==null){T.return=f.return,K=T;break e}K=f.return}}var _=e.current;for(K=_;K!==null;){g=K;var C=g.child;if((g.subtreeFlags&2064)!==0&&C!==null)C.return=g,K=C;else e:for(g=_;K!==null;){if(y=K,(y.flags&2048)!==0)try{switch(y.tag){case 0:case 11:case 15:Ws(9,y)}}catch(Z){Ye(y,y.return,Z)}if(y===g){K=null;break e}var B=y.sibling;if(B!==null){B.return=y.return,K=B;break e}K=y.return}}if(Te=c,bn(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(ts,e)}catch{}a=!0}return a}finally{Oe=i,Vt.transition=n}}return!1}function Kh(e,n,i){n=ui(i,n),n=dh(e,n,1),e=qn(e,n,1),n=wt(),e!==null&&($i(e,1,n),Nt(e,n))}function Ye(e,n,i){if(e.tag===3)Kh(e,e,i);else for(;n!==null;){if(n.tag===3){Kh(n,e,i);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(er===null||!er.has(a))){e=ui(i,e),e=fh(n,e,1),n=qn(n,e,1),e=wt(),n!==null&&($i(n,1,e),Nt(n,e));break}}n=n.return}}function mv(e,n,i){var a=e.pingCache;a!==null&&a.delete(n),n=wt(),e.pingedLanes|=e.suspendedLanes&i,ot===e&&(ut&i)===i&&(tt===4||tt===3&&(ut&130023424)===ut&&500>Ke()-Ou?Nr(e,0):ku|=i),Nt(e,n)}function Xh(e,n){n===0&&((e.mode&1)===0?n=1:(n=rs,rs<<=1,(rs&130023424)===0&&(rs=4194304)));var i=wt();e=Nn(e,n),e!==null&&($i(e,n,i),Nt(e,i))}function vv(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),Xh(e,i)}function Sv(e,n){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(o(314))}a!==null&&a.delete(n),Xh(e,i)}var Qh;Qh=function(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps||Tt.current)Rt=!0;else{if((e.lanes&i)===0&&(n.flags&128)===0)return Rt=!1,ov(e,n,i);Rt=(e.flags&131072)!==0}else Rt=!1,ze&&(n.flags&1048576)!==0&&Pf(n,Ts,n.index);switch(n.lanes=0,n.tag){case 2:var a=n.type;Gs(e,n),e=n.pendingProps;var c=ti(n,ht.current);ai(n,i),c=lu(null,n,a,e,c,i);var f=uu();return n.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Ct(a)?(f=!0,_s(n)):f=!1,n.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,tu(n),c.updater=Hs,n.stateNode=c,c._reactInternals=n,gu(n,a,e,i),n=yu(null,n,a,!0,f,i)):(n.tag=0,ze&&f&&Yl(n),At(null,n,c,i),n=n.child),n;case 16:a=n.elementType;e:{switch(Gs(e,n),e=n.pendingProps,c=a._init,a=c(a._payload),n.type=a,c=n.tag=Av(a),e=sn(a,e),c){case 0:n=Su(null,n,a,e,i);break e;case 1:n=wh(null,n,a,e,i);break e;case 11:n=mh(null,n,a,e,i);break e;case 14:n=vh(null,n,a,sn(a.type,e),i);break e}throw Error(o(306,a,""))}return n;case 0:return a=n.type,c=n.pendingProps,c=n.elementType===a?c:sn(a,c),Su(e,n,a,c,i);case 1:return a=n.type,c=n.pendingProps,c=n.elementType===a?c:sn(a,c),wh(e,n,a,c,i);case 3:e:{if(_h(n),e===null)throw Error(o(387));a=n.pendingProps,f=n.memoizedState,c=f.element,Bf(e,n),Os(n,a,null,i);var g=n.memoizedState;if(a=g.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){c=ui(Error(o(423)),n),n=Eh(e,n,a,i,c);break e}else if(a!==c){c=ui(Error(o(424)),n),n=Eh(e,n,a,i,c);break e}else for(Lt=Kn(n.stateNode.containerInfo.firstChild),Ft=n,ze=!0,on=null,i=Ff(n,null,a,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(ii(),a===c){n=On(e,n,i);break e}At(e,n,a,i)}n=n.child}return n;case 5:return Gf(n),e===null&&Xl(n),a=n.type,c=n.pendingProps,f=e!==null?e.memoizedProps:null,g=c.children,xl(a,c)?g=null:f!==null&&xl(a,f)&&(n.flags|=32),Ah(e,n),At(e,n,g,i),n.child;case 6:return e===null&&Xl(n),null;case 13:return Ih(e,n,i);case 4:return nu(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=oi(n,null,a,i):At(e,n,a,i),n.child;case 11:return a=n.type,c=n.pendingProps,c=n.elementType===a?c:sn(a,c),mh(e,n,a,c,i);case 7:return At(e,n,n.pendingProps,i),n.child;case 8:return At(e,n,n.pendingProps.children,i),n.child;case 12:return At(e,n,n.pendingProps.children,i),n.child;case 10:e:{if(a=n.type._context,c=n.pendingProps,f=n.memoizedProps,g=c.value,Ue(Ps,a._currentValue),a._currentValue=g,f!==null)if(rn(f.value,g)){if(f.children===c.children&&!Tt.current){n=On(e,n,i);break e}}else for(f=n.child,f!==null&&(f.return=n);f!==null;){var y=f.dependencies;if(y!==null){g=f.child;for(var A=y.firstContext;A!==null;){if(A.context===a){if(f.tag===1){A=kn(-1,i&-i),A.tag=2;var N=f.updateQueue;if(N!==null){N=N.shared;var U=N.pending;U===null?A.next=A:(A.next=U.next,U.next=A),N.pending=A}}f.lanes|=i,A=f.alternate,A!==null&&(A.lanes|=i),Jl(f.return,i,n),y.lanes|=i;break}A=A.next}}else if(f.tag===10)g=f.type===n.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(o(341));g.lanes|=i,y=g.alternate,y!==null&&(y.lanes|=i),Jl(g,i,n),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===n){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}At(e,n,c.children,i),n=n.child}return n;case 9:return c=n.type,a=n.pendingProps.children,ai(n,i),c=jt(c),a=a(c),n.flags|=1,At(e,n,a,i),n.child;case 14:return a=n.type,c=sn(a,n.pendingProps),c=sn(a.type,c),vh(e,n,a,c,i);case 15:return Sh(e,n,n.type,n.pendingProps,i);case 17:return a=n.type,c=n.pendingProps,c=n.elementType===a?c:sn(a,c),Gs(e,n),n.tag=1,Ct(a)?(e=!0,_s(n)):e=!1,ai(n,i),uh(n,a,c),gu(n,a,c,i),yu(null,n,a,!0,e,i);case 19:return Ch(e,n,i);case 22:return yh(e,n,i)}throw Error(o(156,n.tag))};function bh(e,n){return Pd(e,n)}function yv(e,n,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(e,n,i,a){return new yv(e,n,i,a)}function xu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Av(e){if(typeof e=="function")return xu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Le)return 11;if(e===Ce)return 14}return 2}function ir(e,n){var i=e.alternate;return i===null?(i=Kt(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Zs(e,n,i,a,c,f){var g=2;if(a=e,typeof e=="function")xu(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case $:return Or(i.children,c,f,n);case Pe:g=8,c|=8;break;case Me:return e=Kt(12,i,n,c|2),e.elementType=Me,e.lanes=f,e;case Ge:return e=Kt(13,i,n,c),e.elementType=Ge,e.lanes=f,e;case we:return e=Kt(19,i,n,c),e.elementType=we,e.lanes=f,e;case ie:return qs(i,c,f,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ve:g=10;break e;case Je:g=9;break e;case Le:g=11;break e;case Ce:g=14;break e;case pe:g=16,a=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return n=Kt(g,i,n,c),n.elementType=e,n.type=a,n.lanes=f,n}function Or(e,n,i,a){return e=Kt(7,e,a,n),e.lanes=i,e}function qs(e,n,i,a){return e=Kt(22,e,a,n),e.elementType=ie,e.lanes=i,e.stateNode={isHidden:!1},e}function Gu(e,n,i){return e=Kt(6,e,null,n),e.lanes=i,e}function zu(e,n,i){return n=Kt(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function wv(e,n,i,a,c){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pl(0),this.expirationTimes=pl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pl(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Wu(e,n,i,a,c,f,g,y,A){return e=new wv(e,n,i,y,A),n===1?(n=1,f===!0&&(n|=8)):n=0,f=Kt(3,null,null,n),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},tu(f),e}function _v(e,n,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:a==null?null:""+a,children:e,containerInfo:n,implementation:i}}function Zh(e){if(!e)return Qn;e=e._reactInternals;e:{if(yr(e)!==e||e.tag!==1)throw Error(o(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Ct(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(o(171))}if(e.tag===1){var i=e.type;if(Ct(i))return Tf(e,i,n)}return n}function qh(e,n,i,a,c,f,g,y,A){return e=Wu(i,a,!0,e,c,f,g,y,A),e.context=Zh(null),i=e.current,a=wt(),c=nr(i),f=kn(a,c),f.callback=n??null,qn(i,f,c),e.current.lanes=c,$i(e,c,a),Nt(e,a),e}function Js(e,n,i,a){var c=n.current,f=wt(),g=nr(c);return i=Zh(i),n.context===null?n.context=i:n.pendingContext=i,n=kn(f,g),n.payload={element:e},a=a===void 0?null:a,a!==null&&(n.callback=a),e=qn(c,n,g),e!==null&&(un(e,c,g,f),ks(e,c,g)),g}function ea(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jh(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function $u(e,n){Jh(e,n),(e=e.alternate)&&Jh(e,n)}function Ev(){return null}var ep=typeof reportError=="function"?reportError:function(e){console.error(e)};function ju(e){this._internalRoot=e}ta.prototype.render=ju.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(o(409));Js(e,n,null,null)},ta.prototype.unmount=ju.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Pr(function(){Js(null,e,null,null)}),n[Tn]=null}};function ta(e){this._internalRoot=e}ta.prototype.unstable_scheduleHydration=function(e){if(e){var n=Ld();e={blockedOn:null,target:e,priority:n};for(var i=0;i<jn.length&&n!==0&&n<jn[i].priority;i++);jn.splice(i,0,e),i===0&&xd(e)}};function Yu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function na(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function tp(){}function Iv(e,n,i,a,c){if(c){if(typeof a=="function"){var f=a;a=function(){var N=ea(g);f.call(N)}}var g=qh(n,a,e,0,null,!1,!1,"",tp);return e._reactRootContainer=g,e[Tn]=g.current,ro(e.nodeType===8?e.parentNode:e),Pr(),g}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var y=a;a=function(){var N=ea(A);y.call(N)}}var A=Wu(e,0,!1,null,null,!1,!1,"",tp);return e._reactRootContainer=A,e[Tn]=A.current,ro(e.nodeType===8?e.parentNode:e),Pr(function(){Js(n,A,i,a)}),A}function ra(e,n,i,a,c){var f=i._reactRootContainer;if(f){var g=f;if(typeof c=="function"){var y=c;c=function(){var A=ea(g);y.call(A)}}Js(n,g,e,c)}else g=Iv(i,n,e,c,a);return ea(g)}Ud=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var i=Wi(n.pendingLanes);i!==0&&(gl(n,i|1),Nt(n,Ke()),(Te&6)===0&&(fi=Ke()+500,bn()))}break;case 13:Pr(function(){var a=Nn(e,1);if(a!==null){var c=wt();un(a,e,1,c)}}),$u(e,1)}},ml=function(e){if(e.tag===13){var n=Nn(e,134217728);if(n!==null){var i=wt();un(n,e,134217728,i)}$u(e,134217728)}},Fd=function(e){if(e.tag===13){var n=nr(e),i=Nn(e,n);if(i!==null){var a=wt();un(i,e,n,a)}$u(e,n)}},Ld=function(){return Oe},Bd=function(e,n){var i=Oe;try{return Oe=e,n()}finally{Oe=i}},ll=function(e,n,i){switch(n){case"input":if(In(e,i),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<i.length;n++){var a=i[n];if(a!==e&&a.form===e.form){var c=As(a);if(!c)throw Error(o(90));ce(a),In(a,c)}}}break;case"textarea":fd(e,i);break;case"select":n=i.value,n!=null&&Gn(e,!!i.multiple,n,!1)}},wd=Lu,_d=Pr;var Tv={usingClientEntryPoint:!1,Events:[so,Jr,As,yd,Ad,Lu]},wo={findFiberByHostInstance:Ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cv={bundleType:wo.bundleType,version:wo.version,rendererPackageName:wo.rendererPackageName,rendererConfig:wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Cd(e),e===null?null:e.stateNode},findFiberByHostInstance:wo.findFiberByHostInstance||Ev,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ia.isDisabled&&ia.supportsFiber)try{ts=ia.inject(Cv),hn=ia}catch{}}return kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tv,kt.createPortal=function(e,n){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yu(n))throw Error(o(200));return _v(e,n,null,i)},kt.createRoot=function(e,n){if(!Yu(e))throw Error(o(299));var i=!1,a="",c=ep;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),n=Wu(e,1,!1,null,null,i,!1,a,c),e[Tn]=n.current,ro(e.nodeType===8?e.parentNode:e),new ju(n)},kt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=Cd(n),e=e===null?null:e.stateNode,e},kt.flushSync=function(e){return Pr(e)},kt.hydrate=function(e,n,i){if(!na(n))throw Error(o(200));return ra(null,e,n,!0,i)},kt.hydrateRoot=function(e,n,i){if(!Yu(e))throw Error(o(405));var a=i!=null&&i.hydratedSources||null,c=!1,f="",g=ep;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),n=qh(n,null,e,1,i??null,c,!1,f,g),e[Tn]=n.current,ro(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,c]:n.mutableSourceEagerHydrationData.push(i,c);return new ta(n)},kt.render=function(e,n,i){if(!na(n))throw Error(o(200));return ra(null,e,n,!1,i)},kt.unmountComponentAtNode=function(e){if(!na(e))throw Error(o(40));return e._reactRootContainer?(Pr(function(){ra(null,null,e,!1,function(){e._reactRootContainer=null,e[Tn]=null})}),!0):!1},kt.unstable_batchedUpdates=Lu,kt.unstable_renderSubtreeIntoContainer=function(e,n,i,a){if(!na(i))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return ra(e,n,i,!1,a)},kt.version="18.3.1-next-f1338f8080-20240426",kt}var up;function Lv(){if(up)return Xu.exports;up=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Xu.exports=Fv(),Xu.exports}var cp;function Bv(){if(cp)return oa;cp=1;var t=Lv();return oa.createRoot=t.createRoot,oa.hydrateRoot=t.hydrateRoot,oa}var Hv=Bv();const xv=yg(Hv),Ag=ye.createContext(void 0),Gv=({initialAppState:t,children:r})=>{const[o,s]=ye.useState(t),[l,u]=ye.useState(void 0),d=(h,p)=>{s(h),h==="gameOver"&&p?u(p):h!=="gameOver"&&u(void 0)};return Ie.jsx(Ag.Provider,{value:{appState:o,setAppState:d,gameOverDetails:l},children:r})},Ga=()=>{const t=ye.useContext(Ag);if(t===void 0)throw new Error("useGameContext must be used within a GameProvider");return t};var St=function(){return St=Object.assign||function(r){for(var o,s=1,l=arguments.length;s<l;s++){o=arguments[s];for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(r[u]=o[u])}return r},St.apply(this,arguments)};function Bo(t,r,o){if(o||arguments.length===2)for(var s=0,l=r.length,u;s<l;s++)(u||!(s in r))&&(u||(u=Array.prototype.slice.call(r,0,s)),u[s]=r[s]);return t.concat(u||Array.prototype.slice.call(r))}var xe="-ms-",Do="-moz-",ke="-webkit-",wg="comm",za="rule",Lc="decl",zv="@import",_g="@keyframes",Wv="@layer",Eg=Math.abs,Bc=String.fromCharCode,yc=Object.assign;function $v(t,r){return at(t,0)^45?(((r<<2^at(t,0))<<2^at(t,1))<<2^at(t,2))<<2^at(t,3):0}function Ig(t){return t.trim()}function Fn(t,r){return(t=r.exec(t))?t[0]:t}function me(t,r,o){return t.replace(r,o)}function Ta(t,r,o){return t.indexOf(r,o)}function at(t,r){return t.charCodeAt(r)|0}function Ti(t,r,o){return t.slice(r,o)}function yn(t){return t.length}function Tg(t){return t.length}function No(t,r){return r.push(t),t}function jv(t,r){return t.map(r).join("")}function dp(t,r){return t.filter(function(o){return!Fn(o,r)})}var Wa=1,Ci=1,Cg=0,Jt=0,Ze=0,Fi="";function $a(t,r,o,s,l,u,d,h){return{value:t,root:r,parent:o,type:s,props:l,children:u,line:Wa,column:Ci,length:d,return:"",siblings:h}}function cr(t,r){return yc($a("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},r)}function pi(t){for(;t.root;)t=cr(t.root,{children:[t]});No(t,t.siblings)}function Yv(){return Ze}function Vv(){return Ze=Jt>0?at(Fi,--Jt):0,Ci--,Ze===10&&(Ci=1,Wa--),Ze}function cn(){return Ze=Jt<Cg?at(Fi,Jt++):0,Ci++,Ze===10&&(Ci=1,Wa++),Ze}function Gr(){return at(Fi,Jt)}function Ca(){return Jt}function ja(t,r){return Ti(Fi,t,r)}function Ac(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Kv(t){return Wa=Ci=1,Cg=yn(Fi=t),Jt=0,[]}function Xv(t){return Fi="",t}function Zu(t){return Ig(ja(Jt-1,wc(t===91?t+2:t===40?t+1:t)))}function Qv(t){for(;(Ze=Gr())&&Ze<33;)cn();return Ac(t)>2||Ac(Ze)>3?"":" "}function bv(t,r){for(;--r&&cn()&&!(Ze<48||Ze>102||Ze>57&&Ze<65||Ze>70&&Ze<97););return ja(t,Ca()+(r<6&&Gr()==32&&cn()==32))}function wc(t){for(;cn();)switch(Ze){case t:return Jt;case 34:case 39:t!==34&&t!==39&&wc(Ze);break;case 40:t===41&&wc(t);break;case 92:cn();break}return Jt}function Zv(t,r){for(;cn()&&t+Ze!==57;)if(t+Ze===84&&Gr()===47)break;return"/*"+ja(r,Jt-1)+"*"+Bc(t===47?t:cn())}function qv(t){for(;!Ac(Gr());)cn();return ja(t,Jt)}function Jv(t){return Xv(Ra("",null,null,null,[""],t=Kv(t),0,[0],t))}function Ra(t,r,o,s,l,u,d,h,p){for(var v=0,m=0,S=d,w=0,P=0,k=0,O=1,I=1,G=1,z=0,W="",j=l,de=u,F=s,$=W;I;)switch(k=z,z=cn()){case 40:if(k!=108&&at($,S-1)==58){Ta($+=me(Zu(z),"&","&\f"),"&\f",Eg(v?h[v-1]:0))!=-1&&(G=-1);break}case 34:case 39:case 91:$+=Zu(z);break;case 9:case 10:case 13:case 32:$+=Qv(k);break;case 92:$+=bv(Ca()-1,7);continue;case 47:switch(Gr()){case 42:case 47:No(eS(Zv(cn(),Ca()),r,o,p),p);break;default:$+="/"}break;case 123*O:h[v++]=yn($)*G;case 125*O:case 59:case 0:switch(z){case 0:case 125:I=0;case 59+m:G==-1&&($=me($,/\f/g,"")),P>0&&yn($)-S&&No(P>32?hp($+";",s,o,S-1,p):hp(me($," ","")+";",s,o,S-2,p),p);break;case 59:$+=";";default:if(No(F=fp($,r,o,v,m,l,h,W,j=[],de=[],S,u),u),z===123)if(m===0)Ra($,r,F,F,j,u,S,h,de);else switch(w===99&&at($,3)===110?100:w){case 100:case 108:case 109:case 115:Ra(t,F,F,s&&No(fp(t,F,F,0,0,l,h,W,l,j=[],S,de),de),l,de,S,h,s?j:de);break;default:Ra($,F,F,F,[""],de,0,h,de)}}v=m=P=0,O=G=1,W=$="",S=d;break;case 58:S=1+yn($),P=k;default:if(O<1){if(z==123)--O;else if(z==125&&O++==0&&Vv()==125)continue}switch($+=Bc(z),z*O){case 38:G=m>0?1:($+="\f",-1);break;case 44:h[v++]=(yn($)-1)*G,G=1;break;case 64:Gr()===45&&($+=Zu(cn())),w=Gr(),m=S=yn(W=$+=qv(Ca())),z++;break;case 45:k===45&&yn($)==2&&(O=0)}}return u}function fp(t,r,o,s,l,u,d,h,p,v,m,S){for(var w=l-1,P=l===0?u:[""],k=Tg(P),O=0,I=0,G=0;O<s;++O)for(var z=0,W=Ti(t,w+1,w=Eg(I=d[O])),j=t;z<k;++z)(j=Ig(I>0?P[z]+" "+W:me(W,/&\f/g,P[z])))&&(p[G++]=j);return $a(t,r,o,l===0?za:h,p,v,m,S)}function eS(t,r,o,s){return $a(t,r,o,wg,Bc(Yv()),Ti(t,2,-2),0,s)}function hp(t,r,o,s,l){return $a(t,r,o,Lc,Ti(t,0,s),Ti(t,s+1,-1),s,l)}function Rg(t,r,o){switch($v(t,r)){case 5103:return ke+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ke+t+t;case 4789:return Do+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return ke+t+Do+t+xe+t+t;case 5936:switch(at(t,r+11)){case 114:return ke+t+xe+me(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return ke+t+xe+me(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return ke+t+xe+me(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return ke+t+xe+t+t;case 6165:return ke+t+xe+"flex-"+t+t;case 5187:return ke+t+me(t,/(\w+).+(:[^]+)/,ke+"box-$1$2"+xe+"flex-$1$2")+t;case 5443:return ke+t+xe+"flex-item-"+me(t,/flex-|-self/g,"")+(Fn(t,/flex-|baseline/)?"":xe+"grid-row-"+me(t,/flex-|-self/g,""))+t;case 4675:return ke+t+xe+"flex-line-pack"+me(t,/align-content|flex-|-self/g,"")+t;case 5548:return ke+t+xe+me(t,"shrink","negative")+t;case 5292:return ke+t+xe+me(t,"basis","preferred-size")+t;case 6060:return ke+"box-"+me(t,"-grow","")+ke+t+xe+me(t,"grow","positive")+t;case 4554:return ke+me(t,/([^-])(transform)/g,"$1"+ke+"$2")+t;case 6187:return me(me(me(t,/(zoom-|grab)/,ke+"$1"),/(image-set)/,ke+"$1"),t,"")+t;case 5495:case 3959:return me(t,/(image-set\([^]*)/,ke+"$1$`$1");case 4968:return me(me(t,/(.+:)(flex-)?(.*)/,ke+"box-pack:$3"+xe+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ke+t+t;case 4200:if(!Fn(t,/flex-|baseline/))return xe+"grid-column-align"+Ti(t,r)+t;break;case 2592:case 3360:return xe+me(t,"template-","")+t;case 4384:case 3616:return o&&o.some(function(s,l){return r=l,Fn(s.props,/grid-\w+-end/)})?~Ta(t+(o=o[r].value),"span",0)?t:xe+me(t,"-start","")+t+xe+"grid-row-span:"+(~Ta(o,"span",0)?Fn(o,/\d+/):+Fn(o,/\d+/)-+Fn(t,/\d+/))+";":xe+me(t,"-start","")+t;case 4896:case 4128:return o&&o.some(function(s){return Fn(s.props,/grid-\w+-start/)})?t:xe+me(me(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return me(t,/(.+)-inline(.+)/,ke+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(yn(t)-1-r>6)switch(at(t,r+1)){case 109:if(at(t,r+4)!==45)break;case 102:return me(t,/(.+:)(.+)-([^]+)/,"$1"+ke+"$2-$3$1"+Do+(at(t,r+3)==108?"$3":"$2-$3"))+t;case 115:return~Ta(t,"stretch",0)?Rg(me(t,"stretch","fill-available"),r,o)+t:t}break;case 5152:case 5920:return me(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(s,l,u,d,h,p,v){return xe+l+":"+u+v+(d?xe+l+"-span:"+(h?p:+p-+u)+v:"")+t});case 4949:if(at(t,r+6)===121)return me(t,":",":"+ke)+t;break;case 6444:switch(at(t,at(t,14)===45?18:11)){case 120:return me(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+ke+(at(t,14)===45?"inline-":"")+"box$3$1"+ke+"$2$3$1"+xe+"$2box$3")+t;case 100:return me(t,":",":"+xe)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return me(t,"scroll-","scroll-snap-")+t}return t}function Da(t,r){for(var o="",s=0;s<t.length;s++)o+=r(t[s],s,t,r)||"";return o}function tS(t,r,o,s){switch(t.type){case Wv:if(t.children.length)break;case zv:case Lc:return t.return=t.return||t.value;case wg:return"";case _g:return t.return=t.value+"{"+Da(t.children,s)+"}";case za:if(!yn(t.value=t.props.join(",")))return""}return yn(o=Da(t.children,s))?t.return=t.value+"{"+o+"}":""}function nS(t){var r=Tg(t);return function(o,s,l,u){for(var d="",h=0;h<r;h++)d+=t[h](o,s,l,u)||"";return d}}function rS(t){return function(r){r.root||(r=r.return)&&t(r)}}function iS(t,r,o,s){if(t.length>-1&&!t.return)switch(t.type){case Lc:t.return=Rg(t.value,t.length,o);return;case _g:return Da([cr(t,{value:me(t.value,"@","@"+ke)})],s);case za:if(t.length)return jv(o=t.props,function(l){switch(Fn(l,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":pi(cr(t,{props:[me(l,/:(read-\w+)/,":"+Do+"$1")]})),pi(cr(t,{props:[l]})),yc(t,{props:dp(o,s)});break;case"::placeholder":pi(cr(t,{props:[me(l,/:(plac\w+)/,":"+ke+"input-$1")]})),pi(cr(t,{props:[me(l,/:(plac\w+)/,":"+Do+"$1")]})),pi(cr(t,{props:[me(l,/:(plac\w+)/,xe+"input-$1")]})),pi(cr(t,{props:[l]})),yc(t,{props:dp(o,s)});break}return""})}}var oS={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},xt={},Ri=typeof process<"u"&&xt!==void 0&&(xt.REACT_APP_SC_ATTR||xt.SC_ATTR)||"data-styled",Pg="active",Ng="data-styled-version",Ya="6.1.13",Hc=`/*!sc*/
`,Ma=typeof window<"u"&&"HTMLElement"in window,sS=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&xt!==void 0&&xt.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&xt.REACT_APP_SC_DISABLE_SPEEDY!==""?xt.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&xt.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&xt!==void 0&&xt.SC_DISABLE_SPEEDY!==void 0&&xt.SC_DISABLE_SPEEDY!==""&&xt.SC_DISABLE_SPEEDY!=="false"&&xt.SC_DISABLE_SPEEDY),aS={},Va=Object.freeze([]),Pi=Object.freeze({});function kg(t,r,o){return o===void 0&&(o=Pi),t.theme!==o.theme&&t.theme||r||o.theme}var Og=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),lS=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,uS=/(^-|-$)/g;function pp(t){return t.replace(lS,"-").replace(uS,"")}var cS=/(a)(d)/gi,sa=52,gp=function(t){return String.fromCharCode(t+(t>25?39:97))};function _c(t){var r,o="";for(r=Math.abs(t);r>sa;r=r/sa|0)o=gp(r%sa)+o;return(gp(r%sa)+o).replace(cS,"$1-$2")}var qu,Dg=5381,Ai=function(t,r){for(var o=r.length;o;)t=33*t^r.charCodeAt(--o);return t},Mg=function(t){return Ai(Dg,t)};function Ug(t){return _c(Mg(t)>>>0)}function dS(t){return t.displayName||t.name||"Component"}function Ju(t){return typeof t=="string"&&!0}var Fg=typeof Symbol=="function"&&Symbol.for,Lg=Fg?Symbol.for("react.memo"):60115,fS=Fg?Symbol.for("react.forward_ref"):60112,hS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},pS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Bg={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},gS=((qu={})[fS]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},qu[Lg]=Bg,qu);function mp(t){return("type"in(r=t)&&r.type.$$typeof)===Lg?Bg:"$$typeof"in t?gS[t.$$typeof]:hS;var r}var mS=Object.defineProperty,vS=Object.getOwnPropertyNames,vp=Object.getOwnPropertySymbols,SS=Object.getOwnPropertyDescriptor,yS=Object.getPrototypeOf,Sp=Object.prototype;function Hg(t,r,o){if(typeof r!="string"){if(Sp){var s=yS(r);s&&s!==Sp&&Hg(t,s,o)}var l=vS(r);vp&&(l=l.concat(vp(r)));for(var u=mp(t),d=mp(r),h=0;h<l.length;++h){var p=l[h];if(!(p in pS||o&&o[p]||d&&p in d||u&&p in u)){var v=SS(r,p);try{mS(t,p,v)}catch{}}}}return t}function Ni(t){return typeof t=="function"}function xc(t){return typeof t=="object"&&"styledComponentId"in t}function Br(t,r){return t&&r?"".concat(t," ").concat(r):t||r||""}function Ec(t,r){if(t.length===0)return"";for(var o=t[0],s=1;s<t.length;s++)o+=t[s];return o}function Ho(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function Ic(t,r,o){if(o===void 0&&(o=!1),!o&&!Ho(t)&&!Array.isArray(t))return r;if(Array.isArray(r))for(var s=0;s<r.length;s++)t[s]=Ic(t[s],r[s]);else if(Ho(r))for(var s in r)t[s]=Ic(t[s],r[s]);return t}function Gc(t,r){Object.defineProperty(t,"toString",{value:r})}function bo(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(r.length>0?" Args: ".concat(r.join(", ")):""))}var AS=function(){function t(r){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=r}return t.prototype.indexOfGroup=function(r){for(var o=0,s=0;s<r;s++)o+=this.groupSizes[s];return o},t.prototype.insertRules=function(r,o){if(r>=this.groupSizes.length){for(var s=this.groupSizes,l=s.length,u=l;r>=u;)if((u<<=1)<0)throw bo(16,"".concat(r));this.groupSizes=new Uint32Array(u),this.groupSizes.set(s),this.length=u;for(var d=l;d<u;d++)this.groupSizes[d]=0}for(var h=this.indexOfGroup(r+1),p=(d=0,o.length);d<p;d++)this.tag.insertRule(h,o[d])&&(this.groupSizes[r]++,h++)},t.prototype.clearGroup=function(r){if(r<this.length){var o=this.groupSizes[r],s=this.indexOfGroup(r),l=s+o;this.groupSizes[r]=0;for(var u=s;u<l;u++)this.tag.deleteRule(s)}},t.prototype.getGroup=function(r){var o="";if(r>=this.length||this.groupSizes[r]===0)return o;for(var s=this.groupSizes[r],l=this.indexOfGroup(r),u=l+s,d=l;d<u;d++)o+="".concat(this.tag.getRule(d)).concat(Hc);return o},t}(),Pa=new Map,Ua=new Map,Na=1,aa=function(t){if(Pa.has(t))return Pa.get(t);for(;Ua.has(Na);)Na++;var r=Na++;return Pa.set(t,r),Ua.set(r,t),r},wS=function(t,r){Na=r+1,Pa.set(t,r),Ua.set(r,t)},_S="style[".concat(Ri,"][").concat(Ng,'="').concat(Ya,'"]'),ES=new RegExp("^".concat(Ri,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),IS=function(t,r,o){for(var s,l=o.split(","),u=0,d=l.length;u<d;u++)(s=l[u])&&t.registerName(r,s)},TS=function(t,r){for(var o,s=((o=r.textContent)!==null&&o!==void 0?o:"").split(Hc),l=[],u=0,d=s.length;u<d;u++){var h=s[u].trim();if(h){var p=h.match(ES);if(p){var v=0|parseInt(p[1],10),m=p[2];v!==0&&(wS(m,v),IS(t,m,p[3]),t.getTag().insertRules(v,l)),l.length=0}else l.push(h)}}},yp=function(t){for(var r=document.querySelectorAll(_S),o=0,s=r.length;o<s;o++){var l=r[o];l&&l.getAttribute(Ri)!==Pg&&(TS(t,l),l.parentNode&&l.parentNode.removeChild(l))}};function CS(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var xg=function(t){var r=document.head,o=t||r,s=document.createElement("style"),l=function(h){var p=Array.from(h.querySelectorAll("style[".concat(Ri,"]")));return p[p.length-1]}(o),u=l!==void 0?l.nextSibling:null;s.setAttribute(Ri,Pg),s.setAttribute(Ng,Ya);var d=CS();return d&&s.setAttribute("nonce",d),o.insertBefore(s,u),s},RS=function(){function t(r){this.element=xg(r),this.element.appendChild(document.createTextNode("")),this.sheet=function(o){if(o.sheet)return o.sheet;for(var s=document.styleSheets,l=0,u=s.length;l<u;l++){var d=s[l];if(d.ownerNode===o)return d}throw bo(17)}(this.element),this.length=0}return t.prototype.insertRule=function(r,o){try{return this.sheet.insertRule(o,r),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(r){this.sheet.deleteRule(r),this.length--},t.prototype.getRule=function(r){var o=this.sheet.cssRules[r];return o&&o.cssText?o.cssText:""},t}(),PS=function(){function t(r){this.element=xg(r),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(r,o){if(r<=this.length&&r>=0){var s=document.createTextNode(o);return this.element.insertBefore(s,this.nodes[r]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(r){this.element.removeChild(this.nodes[r]),this.length--},t.prototype.getRule=function(r){return r<this.length?this.nodes[r].textContent:""},t}(),NS=function(){function t(r){this.rules=[],this.length=0}return t.prototype.insertRule=function(r,o){return r<=this.length&&(this.rules.splice(r,0,o),this.length++,!0)},t.prototype.deleteRule=function(r){this.rules.splice(r,1),this.length--},t.prototype.getRule=function(r){return r<this.length?this.rules[r]:""},t}(),Ap=Ma,kS={isServer:!Ma,useCSSOMInjection:!sS},Fa=function(){function t(r,o,s){r===void 0&&(r=Pi),o===void 0&&(o={});var l=this;this.options=St(St({},kS),r),this.gs=o,this.names=new Map(s),this.server=!!r.isServer,!this.server&&Ma&&Ap&&(Ap=!1,yp(this)),Gc(this,function(){return function(u){for(var d=u.getTag(),h=d.length,p="",v=function(S){var w=function(G){return Ua.get(G)}(S);if(w===void 0)return"continue";var P=u.names.get(w),k=d.getGroup(S);if(P===void 0||!P.size||k.length===0)return"continue";var O="".concat(Ri,".g").concat(S,'[id="').concat(w,'"]'),I="";P!==void 0&&P.forEach(function(G){G.length>0&&(I+="".concat(G,","))}),p+="".concat(k).concat(O,'{content:"').concat(I,'"}').concat(Hc)},m=0;m<h;m++)v(m);return p}(l)})}return t.registerId=function(r){return aa(r)},t.prototype.rehydrate=function(){!this.server&&Ma&&yp(this)},t.prototype.reconstructWithOptions=function(r,o){return o===void 0&&(o=!0),new t(St(St({},this.options),r),this.gs,o&&this.names||void 0)},t.prototype.allocateGSInstance=function(r){return this.gs[r]=(this.gs[r]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(r=function(o){var s=o.useCSSOMInjection,l=o.target;return o.isServer?new NS(l):s?new RS(l):new PS(l)}(this.options),new AS(r)));var r},t.prototype.hasNameForId=function(r,o){return this.names.has(r)&&this.names.get(r).has(o)},t.prototype.registerName=function(r,o){if(aa(r),this.names.has(r))this.names.get(r).add(o);else{var s=new Set;s.add(o),this.names.set(r,s)}},t.prototype.insertRules=function(r,o,s){this.registerName(r,o),this.getTag().insertRules(aa(r),s)},t.prototype.clearNames=function(r){this.names.has(r)&&this.names.get(r).clear()},t.prototype.clearRules=function(r){this.getTag().clearGroup(aa(r)),this.clearNames(r)},t.prototype.clearTag=function(){this.tag=void 0},t}(),OS=/&/g,DS=/^\s*\/\/.*$/gm;function Gg(t,r){return t.map(function(o){return o.type==="rule"&&(o.value="".concat(r," ").concat(o.value),o.value=o.value.replaceAll(",",",".concat(r," ")),o.props=o.props.map(function(s){return"".concat(r," ").concat(s)})),Array.isArray(o.children)&&o.type!=="@keyframes"&&(o.children=Gg(o.children,r)),o})}function MS(t){var r,o,s,l=Pi,u=l.options,d=u===void 0?Pi:u,h=l.plugins,p=h===void 0?Va:h,v=function(w,P,k){return k.startsWith(o)&&k.endsWith(o)&&k.replaceAll(o,"").length>0?".".concat(r):w},m=p.slice();m.push(function(w){w.type===za&&w.value.includes("&")&&(w.props[0]=w.props[0].replace(OS,o).replace(s,v))}),d.prefix&&m.push(iS),m.push(tS);var S=function(w,P,k,O){P===void 0&&(P=""),k===void 0&&(k=""),O===void 0&&(O="&"),r=O,o=P,s=new RegExp("\\".concat(o,"\\b"),"g");var I=w.replace(DS,""),G=Jv(k||P?"".concat(k," ").concat(P," { ").concat(I," }"):I);d.namespace&&(G=Gg(G,d.namespace));var z=[];return Da(G,nS(m.concat(rS(function(W){return z.push(W)})))),z};return S.hash=p.length?p.reduce(function(w,P){return P.name||bo(15),Ai(w,P.name)},Dg).toString():"",S}var US=new Fa,Tc=MS(),zg=An.createContext({shouldForwardProp:void 0,styleSheet:US,stylis:Tc});zg.Consumer;An.createContext(void 0);function Cc(){return ye.useContext(zg)}var FS=function(){function t(r,o){var s=this;this.inject=function(l,u){u===void 0&&(u=Tc);var d=s.name+u.hash;l.hasNameForId(s.id,d)||l.insertRules(s.id,d,u(s.rules,d,"@keyframes"))},this.name=r,this.id="sc-keyframes-".concat(r),this.rules=o,Gc(this,function(){throw bo(12,String(s.name))})}return t.prototype.getName=function(r){return r===void 0&&(r=Tc),this.name+r.hash},t}(),LS=function(t){return t>="A"&&t<="Z"};function wp(t){for(var r="",o=0;o<t.length;o++){var s=t[o];if(o===1&&s==="-"&&t[0]==="-")return t;LS(s)?r+="-"+s.toLowerCase():r+=s}return r.startsWith("ms-")?"-"+r:r}var Wg=function(t){return t==null||t===!1||t===""},$g=function(t){var r,o,s=[];for(var l in t){var u=t[l];t.hasOwnProperty(l)&&!Wg(u)&&(Array.isArray(u)&&u.isCss||Ni(u)?s.push("".concat(wp(l),":"),u,";"):Ho(u)?s.push.apply(s,Bo(Bo(["".concat(l," {")],$g(u),!1),["}"],!1)):s.push("".concat(wp(l),": ").concat((r=l,(o=u)==null||typeof o=="boolean"||o===""?"":typeof o!="number"||o===0||r in oS||r.startsWith("--")?String(o).trim():"".concat(o,"px")),";")))}return s};function pr(t,r,o,s){if(Wg(t))return[];if(xc(t))return[".".concat(t.styledComponentId)];if(Ni(t)){if(!Ni(u=t)||u.prototype&&u.prototype.isReactComponent||!r)return[t];var l=t(r);return pr(l,r,o,s)}var u;return t instanceof FS?o?(t.inject(o,s),[t.getName(s)]):[t]:Ho(t)?$g(t):Array.isArray(t)?Array.prototype.concat.apply(Va,t.map(function(d){return pr(d,r,o,s)})):[t.toString()]}function jg(t){for(var r=0;r<t.length;r+=1){var o=t[r];if(Ni(o)&&!xc(o))return!1}return!0}var BS=Mg(Ya),HS=function(){function t(r,o,s){this.rules=r,this.staticRulesId="",this.isStatic=(s===void 0||s.isStatic)&&jg(r),this.componentId=o,this.baseHash=Ai(BS,o),this.baseStyle=s,Fa.registerId(o)}return t.prototype.generateAndInjectStyles=function(r,o,s){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(r,o,s):"";if(this.isStatic&&!s.hash)if(this.staticRulesId&&o.hasNameForId(this.componentId,this.staticRulesId))l=Br(l,this.staticRulesId);else{var u=Ec(pr(this.rules,r,o,s)),d=_c(Ai(this.baseHash,u)>>>0);if(!o.hasNameForId(this.componentId,d)){var h=s(u,".".concat(d),void 0,this.componentId);o.insertRules(this.componentId,d,h)}l=Br(l,d),this.staticRulesId=d}else{for(var p=Ai(this.baseHash,s.hash),v="",m=0;m<this.rules.length;m++){var S=this.rules[m];if(typeof S=="string")v+=S;else if(S){var w=Ec(pr(S,r,o,s));p=Ai(p,w+m),v+=w}}if(v){var P=_c(p>>>0);o.hasNameForId(this.componentId,P)||o.insertRules(this.componentId,P,s(v,".".concat(P),void 0,this.componentId)),l=Br(l,P)}}return l},t}(),zc=An.createContext(void 0);zc.Consumer;var ec={};function xS(t,r,o){var s=xc(t),l=t,u=!Ju(t),d=r.attrs,h=d===void 0?Va:d,p=r.componentId,v=p===void 0?function(j,de){var F=typeof j!="string"?"sc":pp(j);ec[F]=(ec[F]||0)+1;var $="".concat(F,"-").concat(Ug(Ya+F+ec[F]));return de?"".concat(de,"-").concat($):$}(r.displayName,r.parentComponentId):p,m=r.displayName,S=m===void 0?function(j){return Ju(j)?"styled.".concat(j):"Styled(".concat(dS(j),")")}(t):m,w=r.displayName&&r.componentId?"".concat(pp(r.displayName),"-").concat(r.componentId):r.componentId||v,P=s&&l.attrs?l.attrs.concat(h).filter(Boolean):h,k=r.shouldForwardProp;if(s&&l.shouldForwardProp){var O=l.shouldForwardProp;if(r.shouldForwardProp){var I=r.shouldForwardProp;k=function(j,de){return O(j,de)&&I(j,de)}}else k=O}var G=new HS(o,w,s?l.componentStyle:void 0);function z(j,de){return function(F,$,Pe){var Me=F.attrs,Ve=F.componentStyle,Je=F.defaultProps,Le=F.foldedComponentIds,Ge=F.styledComponentId,we=F.target,Ce=An.useContext(zc),pe=Cc(),ie=F.shouldForwardProp||pe.shouldForwardProp,H=kg($,Ce,Je)||Pi,V=function(Se,oe,ge){for(var fe,X=St(St({},oe),{className:void 0,theme:ge}),ne=0;ne<Se.length;ne+=1){var Ne=Ni(fe=Se[ne])?fe(X):fe;for(var ce in Ne)X[ce]=ce==="className"?Br(X[ce],Ne[ce]):ce==="style"?St(St({},X[ce]),Ne[ce]):Ne[ce]}return oe.className&&(X.className=Br(X.className,oe.className)),X}(Me,$,H),x=V.as||we,E={};for(var D in V)V[D]===void 0||D[0]==="$"||D==="as"||D==="theme"&&V.theme===H||(D==="forwardedAs"?E.as=V.forwardedAs:ie&&!ie(D,x)||(E[D]=V[D]));var te=function(Se,oe){var ge=Cc(),fe=Se.generateAndInjectStyles(oe,ge.styleSheet,ge.stylis);return fe}(Ve,V),q=Br(Le,Ge);return te&&(q+=" "+te),V.className&&(q+=" "+V.className),E[Ju(x)&&!Og.has(x)?"class":"className"]=q,E.ref=Pe,ye.createElement(x,E)}(W,j,de)}z.displayName=S;var W=An.forwardRef(z);return W.attrs=P,W.componentStyle=G,W.displayName=S,W.shouldForwardProp=k,W.foldedComponentIds=s?Br(l.foldedComponentIds,l.styledComponentId):"",W.styledComponentId=w,W.target=s?l.target:t,Object.defineProperty(W,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(j){this._foldedDefaultProps=s?function(de){for(var F=[],$=1;$<arguments.length;$++)F[$-1]=arguments[$];for(var Pe=0,Me=F;Pe<Me.length;Pe++)Ic(de,Me[Pe],!0);return de}({},l.defaultProps,j):j}}),Gc(W,function(){return".".concat(W.styledComponentId)}),u&&Hg(W,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),W}function _p(t,r){for(var o=[t[0]],s=0,l=r.length;s<l;s+=1)o.push(r[s],t[s+1]);return o}var Ep=function(t){return Object.assign(t,{isCss:!0})};function Yg(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(Ni(t)||Ho(t))return Ep(pr(_p(Va,Bo([t],r,!0))));var s=t;return r.length===0&&s.length===1&&typeof s[0]=="string"?pr(s):Ep(pr(_p(s,r)))}function Rc(t,r,o){if(o===void 0&&(o=Pi),!r)throw bo(1,r);var s=function(l){for(var u=[],d=1;d<arguments.length;d++)u[d-1]=arguments[d];return t(r,o,Yg.apply(void 0,Bo([l],u,!1)))};return s.attrs=function(l){return Rc(t,r,St(St({},o),{attrs:Array.prototype.concat(o.attrs,l).filter(Boolean)}))},s.withConfig=function(l){return Rc(t,r,St(St({},o),l))},s}var Vg=function(t){return Rc(xS,t)},_n=Vg;Og.forEach(function(t){_n[t]=Vg(t)});var GS=function(){function t(r,o){this.rules=r,this.componentId=o,this.isStatic=jg(r),Fa.registerId(this.componentId+1)}return t.prototype.createStyles=function(r,o,s,l){var u=l(Ec(pr(this.rules,o,s,l)),""),d=this.componentId+r;s.insertRules(d,d,u)},t.prototype.removeStyles=function(r,o){o.clearRules(this.componentId+r)},t.prototype.renderStyles=function(r,o,s,l){r>2&&Fa.registerId(this.componentId+r),this.removeStyles(r,s),this.createStyles(r,o,s,l)},t}();function zS(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var s=Yg.apply(void 0,Bo([t],r,!1)),l="sc-global-".concat(Ug(JSON.stringify(s))),u=new GS(s,l),d=function(p){var v=Cc(),m=An.useContext(zc),S=An.useRef(v.styleSheet.allocateGSInstance(l)).current;return v.styleSheet.server&&h(S,p,v.styleSheet,m,v.stylis),An.useLayoutEffect(function(){if(!v.styleSheet.server)return h(S,p,v.styleSheet,m,v.stylis),function(){return u.removeStyles(S,v.styleSheet)}},[S,p,v.styleSheet,m,v.stylis]),null};function h(p,v,m,S,w){if(u.isStatic)u.renderStyles(p,aS,m,w);else{var P=St(St({},v),{theme:kg(v,S,d.defaultProps)});u.renderStyles(p,P,m,w)}}return An.memo(d)}function Kg(t,r){var o=ye.useRef(null),s=ye.useRef(!1),l=ye.useRef(t);l.current=t;var u=ye.useCallback(function(h){s.current&&(l.current(h),o.current=requestAnimationFrame(u))},[]),d=ye.useMemo(function(){return[function(){s.current&&(s.current=!1,o.current&&cancelAnimationFrame(o.current))},function(){s.current||(s.current=!0,o.current=requestAnimationFrame(u))},function(){return s.current}]},[]);return ye.useEffect(function(){return d[0]},[]),d}function WS(t,r,o,s,l){var d;(d=t.onExit)==null||d.call(t,s,r);const u=l.find(({id:h})=>h===r);return u!=null&&u.onEnter?u.onEnter(s,o):{...o,enteredAt:s.updateContext.gameState.time}}function $S(t,r){return r.find(({id:o})=>o===t)}function jS(t,r){return t!==r}function YS(t){console.warn(`No handler found for state: ${t}`)}const Mo="bushGrowing",Lr="bushFull",ka="bushSpreading",xo="bushDying",Qt=24,bt=10,Hr=3e3,xr=3e3,Wc=2,VS=5,KS=3,XS=12,QS=940,bS=.7,Pc=20,Ip=90,Xg=45,Qg=240,bg=10,Go=80,ZS=3,Eo=5,en=150,Zg=en*.8,qS=en*.2,yt=en*.95,zo=30,qg=10,JS=10,ey=.5,ft=30,mr=ft*.75,Jg=50,ty=20,ny=Go*.8,ry=.7,iy=16,Ln=40,oy=24,$c=16,sy=72/3,Tp=24,ay=1.25,ly=1.5,Ka=en*.6,jc=50,uy=1,cy=350,em=Go*.65,dy=80,fy=50,hy=1,py=128,tm=10,Cp=100,gy=35,Xa=ft,nm=.5,rm=2.5,my=5,vy=.5,Sy=1.5,yy=.1,Ay=.5,wy=1.5,_y=.25,Ey=2.5,Iy=45,Ty=.05,Wo=5,Cy=.5,Rp=100,Ry=300,Qa=30,$o=1,Pp=en*.6,Py=en*.25,Ny=en*.7,ky=en*.8,im=100,Oy=250,Dy=120,My=2,Uy=400,Fy=1e3,Ly=en*.85,By=100,Hy=3,xy=96,Gy=24,zy=600,om=600,Wy=1,$y=24,jy=1,Yy=.5,Np=24,Nc=12,kp=30,Vy=.25,Ky=24,Op=300,Dp=24,Xy=1500,tc=500,Qy=400,by=10,Zy=-5,qy=1.5,Jy=1.2,eA=10,tA=150,nA=200,rA=100,iA=100,oA=.7,sA=300,aA=100,lA=120,Mp=300,ki=10,sm=250,jo=12,ba=mr*1.2,am=10,uA=20,lm=.15,um=200,Zt=30,Za=Zt*.6,Yc="#4CAF50",cm="#FF5722",dm="#9C27B0",cA="#2196F3",fm="#FFC107",dA="#FFD700",hm="#DC143C",Vc="#FFFFFF",Kc=[5,5],qa=5,Oi=15,fA=20,hA=16,pA=10,gA=16,mA=16,Up=["👑","💀","🔥","💧","☘️","☀️","🌙","⭐","⚡","⚜️"],kc=8,vA="#FFFFFF",dr=18,Ot=15,SA="rgba(0, 0, 0, 0.7)",yA=4,sr=150,Ht=15,Mn=10,wi="#555",AA="#f44336",wA="#4CAF50",_A="#2196F3",EA="#FFC107",la=16,IA=9,Dr=32,ua=28,TA=10,CA=8,RA=8,PA=8,ca=28,da=40,NA="rgba(255, 215, 0, 0.7)",kA="rgba(0, 0, 0, 0.3)",ar=10,Fp=8,nc=11,lr=20,rc=40,Lp=5,OA=10,DA="#FFA500",MA="#808080",_i=120,UA=30,FA=20,fa="#2d3748",Ei="#ffffff",ic="#4a5568",LA=5,BA="#bdc9f792",HA="#272c36ff",xA="#a0aec0",Bp=300,GA="rgba(255, 255, 255, 0.5)",zA="rgba(0, 0, 0, 0.8)",WA="#FFFFFF",Hp=14,xp=8,Gp=-15,$A="#FFD700",jA=5,YA=60,VA=-50,KA=10,oc=12,zp=10,XA="rgba(0, 0, 0, 0.5)",QA="#4CAF50",bA="#F44336",ZA="#FFC107",qA="rgba(255, 255, 255, 0.2)",Wp="#FFFFFF",JA="#FF6B6B",e1=5,pm=30,Io=50,ha=8,$p=10,t1="rgba(0, 0, 0, 0.5)",n1="#FFFFFF",r1=33,i1=400,o1=20,s1=10,a1="rgba(0, 0, 0, 0.7)",l1="#FFFFFF",sc=20,jp=16,u1=.5,Yp=5,gm="#FFD700",c1=40,mm=4,d1=3,f1=5,qt=1,ko=3,h1=70,Vp=600,p1=1.5,vm=.1,g1=15,m1=5e3,Mr=80,pa=10;function rt(t,r,o,s,l){const u={id:t.nextVisualEffectId,type:r,position:o,startTime:t.time,duration:s,entityId:l};return t.visualEffects.push(u),t.nextVisualEffectId++,u.id}var _e=(t=>(t[t.Hunger=0]="Hunger",t[t.Procreation=1]="Procreation",t[t.Pregnant=2]="Pregnant",t[t.TargetAcquired=3]="TargetAcquired",t[t.Attack=4]="Attack",t[t.Partnered=5]="Partnered",t[t.BushClaimed=6]="BushClaimed",t[t.BushClaimLost=7]="BushClaimLost",t[t.Eating=8]="Eating",t[t.ChildFed=9]="ChildFed",t[t.AttackDeflected=10]="AttackDeflected",t[t.AttackResisted=11]="AttackResisted",t[t.Hit=12]="Hit",t[t.SeizeBuildup=13]="SeizeBuildup",t[t.Seize=14]="Seize",t[t.CallToAttack=15]="CallToAttack",t[t.CallToFollow=16]="CallToFollow",t[t.AutopilotMoveTarget=17]="AutopilotMoveTarget",t))(_e||{}),Bn=(t=>(t.Berry="berry",t.Meat="meat",t))(Bn||{});const Sm={berry:"🍓",meat:"🥩"},v1={id:Mo,update:(t,r)=>{const{entity:o,updateContext:s}=r,l=s.deltaTime*(Qt/bt);return o.age+=l,o.age>=o.lifespan?{nextState:xo,data:{...t,enteredAt:s.gameState.time}}:(o.ownerId&&o.claimedUntil&&s.gameState.time>o.claimedUntil&&(rt(s.gameState,_e.BushClaimLost,o.position,qt),o.ownerId=void 0,o.claimedUntil=void 0),o.timeSinceLastBerryRegen+=l,o.timeSinceLastBerryRegen>=XS&&o.food.length<o.maxFood&&(o.food.push({type:Bn.Berry}),o.timeSinceLastBerryRegen=0),o.food.length>=o.maxFood?{nextState:Lr,data:{...t,enteredAt:s.gameState.time,previousState:Mo}}:{nextState:Mo,data:t})},onEnter:(t,r)=>({...r,enteredAt:t.updateContext.gameState.time})},S1={id:Lr,update:(t,r)=>{const{entity:o,updateContext:s}=r,l=s.deltaTime*(Qt/bt);return o.age+=l,o.age>=o.lifespan?{nextState:xo,data:{...t,enteredAt:s.gameState.time,previousState:Lr}}:o.food.length<o.maxFood?{nextState:Mo,data:{...t,enteredAt:s.gameState.time,previousState:Lr}}:(o.ownerId&&o.claimedUntil&&s.gameState.time>o.claimedUntil&&(rt(s.gameState,_e.BushClaimLost,o.position,qt),o.ownerId=void 0,o.claimedUntil=void 0),o.timeSinceLastSpreadAttempt+=l,o.timeSinceLastSpreadAttempt>=Ip&&(o.timeSinceLastSpreadAttempt=0,s.gameState.time-o.timeSinceLastHarvest>=Ip&&Math.random()<o.spreadChance)?{nextState:ka,data:{...t,enteredAt:s.gameState.time,previousState:Lr}}:{nextState:Lr,data:t})},onEnter:(t,r)=>({...r,enteredAt:t.updateContext.gameState.time})};function gr(t,r){return{x:t.x+r.x,y:t.y+r.y}}function ym(t,r){return{x:t.x-r.x,y:t.y-r.y}}function wn(t,r){return{x:t.x*r,y:t.y*r}}function Di(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function tn(t){const r=Di(t);return r===0?{x:0,y:0}:wn(t,1/r)}function y1(t,r){return Di(ym(t,r))}function Xc(t,r,o){return{x:t.x+(r.x-t.x)*o,y:t.y+(r.y-t.y)*o}}function Qc(t){if(t.length===0)return{x:0,y:0};const r=t.reduce((o,s)=>({x:o.x+s.x,y:o.y+s.y}),{x:0,y:0});return{x:r.x/t.length,y:r.y/t.length}}function Gt(t,r,o,s){let l=r.x-t.x,u=r.y-t.y;return Math.abs(l)>o/2&&(l=l-Math.sign(l)*o),Math.abs(u)>s/2&&(u=u-Math.sign(u)*s),{x:l,y:u}}function fn(t,r,o){const s=Gt(t,r,o.width,o.height);return tn(s)}function ue(t,r,o,s){const l=Gt(t,r,o,s);return Di(l)}function A1(t,r){return t.x*r.x+t.y*r.y}function w1(t,r){const o=A1(t,r),s=Di(t),l=Di(r);if(s===0||l===0)return 0;const u=Math.max(-1,Math.min(1,o/(s*l)));return Math.acos(u)}function _1(t,r,o){const s=Math.max(0,Math.min(1,o)),l={r:parseInt(t.substring(1,3),16),g:parseInt(t.substring(3,5),16),b:parseInt(t.substring(5,7),16)},u={r:parseInt(r.substring(1,3),16),g:parseInt(r.substring(3,5),16),b:parseInt(r.substring(5,7),16)},d=Math.round(l.r+(u.r-l.r)*s),h=Math.round(l.g+(u.g-l.g)*s),p=Math.round(l.b+(u.b-l.b)*s),v=m=>("00"+m.toString(16)).slice(-2);return`#${v(d)}${v(h)}${v(p)}`}var ae=(t=>(t.Gather="Gather",t.Eat="Eat",t.Procreate="Procreate",t.Attack="Attack",t.Plant="Plant",t.CallToAttack="CallToAttack",t.TribeSplit="TribeSplit",t.FollowMe="FollowMe",t.FeedChildren="FeedChildren",t.AutopilotMove="AutopilotMove",t.AutopilotGather="AutopilotGather",t.AutopilotAttack="AutopilotAttack",t.AutopilotProcreate="AutopilotProcreate",t.AutopilotPlant="AutopilotPlant",t.AutopilotFeedChildren="AutopilotFeedChildren",t.AutopilotFollowMe="AutopilotFollowMe",t))(ae||{});const Ja={Gather:"✋",Eat:"🍖",Procreate:"❤️",Attack:"⚔️",Plant:"🌱",CallToAttack:"📢",TribeSplit:"🔱",FollowMe:"➡️",FeedChildren:"👨‍👧",AutopilotMove:"🎯",AutopilotGather:"✋",AutopilotAttack:"⚔️",AutopilotProcreate:"❤️",AutopilotPlant:"🌱",AutopilotFeedChildren:"👨‍👧",AutopilotFollowMe:"➡️"},Am={Gather:"Gather",Eat:"Eat",Procreate:"Procreate",Attack:"Attack",Plant:"Plant",CallToAttack:"Call to Attack",TribeSplit:"Split Tribe",FollowMe:"Follow Me",FeedChildren:"Feed Children",AutopilotMove:"Walk",AutopilotGather:"Gather",AutopilotAttack:"Attack",AutopilotProcreate:"Procreate",AutopilotPlant:"Plant",AutopilotFeedChildren:"Feed",AutopilotFollowMe:"Follow"};var yi=(t=>(t.Time="Time",t.Hunger="Hunger",t.Hitpoints="Hitpoints",t.Food="Food",t.Autopilot="Autopilot",t.Muted="Muted",t.Family="Family",t.Tribes="Tribes",t))(yi||{});const To={Time:"🗓️",Hunger:"🍖",Hitpoints:"❤️",Food:"🍓",Autopilot:"🤖",Muted:"🔇",Family:"👨‍👩‍👧‍👦",Tribes:"🛖"};var De=(t=>(t.ToggleMute="ToggleMute",t.TogglePause="TogglePause",t.FastForward="FastForward",t.CommandEat="CommandEat",t.CommandPlant="CommandPlant",t.CommandCallToAttack="CommandCallToAttack",t.CommandFollowMe="CommandFollowMe",t.CommandGather="CommandGather",t.CommandTribeSplit="CommandTribeSplit",t.ToggleProcreationBehavior="ToggleProcreationBehavior",t.ToggleAttackBehavior="ToggleAttackBehavior",t.ToggleFeedChildrenBehavior="ToggleFeedChildrenBehavior",t.TogglePlantingBehavior="TogglePlantingBehavior",t.ToggleGatheringBehavior="ToggleGatheringBehavior",t.ToggleAutopilotFollowLeaderBehavior="ToggleAutopilotFollowLeaderBehavior",t))(De||{});const ac=""+new URL("attack-D4MA8VWK.mp3",import.meta.url).href,E1=""+new URL("gather-CU75596W.mp3",import.meta.url).href,I1=""+new URL("eat-DCjHq2QD.mp3",import.meta.url).href,lc=""+new URL("procreate-CfE4r5Cp.mp3",import.meta.url).href,T1=""+new URL("birth-Cbd67GHT.mp3",import.meta.url).href,C1=""+new URL("child-fed-DzEPuMid.mp3",import.meta.url).href,R1=""+new URL("human-death-B6HFLXES.mp3",import.meta.url).href,P1=""+new URL("game-over-C5dqkyER.mp3",import.meta.url).href,N1=""+new URL("button-click-DomLUeaU.mp3",import.meta.url).href,k1=""+new URL("soundtrack-1-BdlYUGye.mp3",import.meta.url).href;var Fe=(t=>(t[t.Attack=0]="Attack",t[t.Gather=1]="Gather",t[t.Eat=2]="Eat",t[t.Procreate=3]="Procreate",t[t.Birth=4]="Birth",t[t.ChildFed=5]="ChildFed",t[t.HumanDeath=6]="HumanDeath",t[t.Seize=7]="Seize",t[t.CallToAttack=8]="CallToAttack",t[t.TribeSplit=9]="TribeSplit",t[t.CallToFollow=10]="CallToFollow",t[t.GameOver=11]="GameOver",t[t.ButtonClick=12]="ButtonClick",t[t.SoundTrack1=13]="SoundTrack1",t))(Fe||{});const O1=new Map([[0,ac],[1,E1],[2,I1],[3,lc],[4,T1],[5,C1],[6,R1],[11,P1],[12,N1],[7,ac],[8,ac],[9,lc],[10,lc],[13,k1]]);let Co,Yo;function D1(){if(!(typeof window>"u"))return Yo}function bc(){if(!(typeof window>"u"))return!Co&&typeof window.AudioContext=="function"&&(Co=new window.AudioContext,Yo=Co.createGain(),Yo.connect(Co.destination),Uo(.1,!1)),Co}function Uo(t,r){Yo&&(Yo.gain.value=r?0:t/10)}const wm=new Map;let ga=!1,Kp=!1;async function M1(){if(Kp||ga)return;const t=bc();if(!t){console.error("AudioContext not supported. Cannot load sounds.");return}t.state==="suspended"&&t.resume(),ga=!0,console.log("Starting sound loading...");const r=[];O1.forEach((o,s)=>{const l=fetch(o).then(u=>{if(!u.ok)throw new Error(`Failed to fetch sound: ${o}`);return u.arrayBuffer()}).then(u=>t.decodeAudioData(u)).then(u=>{wm.set(s,u)}).catch(u=>{console.error(`Error loading sound ${Fe[s]} from ${o}:`,u)});r.push(l)});try{await Promise.all(r),Kp=!0,ga=!1,console.log("All sounds loaded successfully.")}catch(o){ga=!1,console.error("An error occurred while loading sounds:",o)}}const Fo=new Map;function Zc(t,r){const o=bc(),s=D1();if(!o||!s||s.gain.value===0&&(r==null?void 0:r.trackId)===void 0)return;o.state==="suspended"&&o.resume();const l=wm.get(t);if(!l){console.warn(`Sound buffer not found for type: ${Fe[t]}`);return}if(r!=null&&r.trackId&&Fo.has(r.trackId))return;const u=o.createBufferSource();u.buffer=l,u.loop=(r==null?void 0:r.loop)??!1;const d=o.createGain(),h=o.createStereoPanner();let p=d;if(r!=null&&r.position&&(r!=null&&r.listenerPosition)&&(r!=null&&r.worldDimensions)){const v=Gt(r.listenerPosition,r.position,r.worldDimensions.width,r.worldDimensions.height),m=ue(r.listenerPosition,r.position,r.worldDimensions.width,r.worldDimensions.height);if(m>Vp)return;const S=1-Math.pow(m/Vp,p1);d.gain.value=Math.max(0,S);const w=Math.sin(v.x/m*(Math.PI/2));h.pan.value=isNaN(w)?0:w,d.connect(h),p=h}else{const v=t===Fe.GameOver?.4:t===Fe.SoundTrack1?1:.2;d.gain.value=v}u.connect(p),p.connect(s),u.start(0),r!=null&&r.trackId&&(Fo.set(r.trackId,{sourceNode:u,gainNode:d}),u.onended=()=>{Fo.delete(r.trackId)})}function Xp(t,r=1){const o=Fo.get(t),s=bc();if(o&&s){const{sourceNode:l,gainNode:u}=o,d=s.currentTime;u.gain.setValueAtTime(u.gain.value,d),u.gain.linearRampToValueAtTime(0,d+r),l.stop(d+r),l.onended=null,Fo.delete(t)}}function nt(t,r,o){const s=It(t.gameState);s&&Zc(r,{position:o,listenerPosition:s.position,worldDimensions:t.gameState.mapDimensions,masterVolume:t.gameState.masterVolume,isMuted:t.gameState.isMuted})}function qc(t,r){const o=[];if(r.food.length>0&&o.push({type:ae.Eat,action:"eating",key:"f"}),r.food.length<r.maxFood){const u=dt(r,t,"berryBush",ft,p=>p.food.length>0),d=dt(r,t,"humanCorpse",ft,p=>p.food.length>0);let h=null;u&&d?h=ue(r.position,u.position,t.mapDimensions.width,t.mapDimensions.height)<=ue(r.position,d.position,t.mapDimensions.width,t.mapDimensions.height)?u:d:h=u||d,h&&o.push({type:ae.Gather,action:"gathering",key:"e",targetEntity:h})}const s=dt(r,t,"human",ft,u=>{const d=u;return(d.id!==r.id&&d.gender!==r.gender&&d.isAdult&&r.isAdult&&d.hunger<yt&&r.hunger<yt&&(d.procreationCooldown||0)<=0&&(r.procreationCooldown||0)<=0&&(d.gender==="female"?!d.isPregnant&&d.age<=Ln:!r.isPregnant&&r.age<=Ln))??!1});s&&o.push({type:ae.Procreate,action:"procreating",key:"r",targetEntity:s});const l=dt(r,t,"human",Xa,u=>u.id!==r.id&&u.leaderId!==r.leaderId);if(l&&o.push({type:ae.Attack,action:"attacking",key:"q",targetEntity:l}),r.food.filter(u=>u.type===Bn.Berry).length>=Wo&&o.push({type:ae.Plant,action:"planting",key:"b"}),r.leaderId===r.id&&!r.isCallingToAttack){const u=t;id(r.position,r.id,u,sm).length>0&&o.push({type:ae.CallToAttack,action:"idle",key:"v"})}return td(r,t).canSplit&&o.push({type:ae.TribeSplit,action:"idle",key:"k"}),r.leaderId===r.id&&!r.isCallingToFollow&&o.push({type:ae.FollowMe,action:"idle",key:"c"}),o}function U1(t,r,o){return r.search.human.byRadius(t.position,o).filter(l=>{var u;return l.activeAction==="procreating"&&l.gender===t.gender&&typeof l.target=="number"&&((u=t.partnerIds)==null?void 0:u.includes(l.target))})[0]}function F1(t,r,o){if(!t.leaderId)return;const s=r,l=s.search.berryBush.byRadius(t.position,o).filter(u=>u.ownerId===t.id);for(const u of l)if(u.claimedUntil&&r.time<u.claimedUntil){const d=s.search.human.byRadius(u.position,ft);for(const h of d)if(!Oc(h,t)&&h.activeAction==="gathering"&&h.target===u.id)return h}}function L1(t,r,o){const s=La(t,r),l=r;for(const u of s){if(ue(t.position,u.position,r.mapDimensions.width,r.mapDimensions.height)>o)continue;const h=l.search.human.byProperty("attackTargetId",u.id);for(const p of h)if(p.leaderId!==t.leaderId)return{familyMember:u,aggressor:p}}}function B1(t,r){const s=r.search.human.byRadius(t.position,sA);let l,u=1/0;for(const d of s){if(d.id===t.id||d.hitpoints<=0||d.hitpoints/d.maxHitpoints>oA||Em(t,d,r))continue;const h=ue(t.position,d.position,r.mapDimensions.width,r.mapDimensions.height);h<u&&(u=h,l=d)}return l}function Jc(t,r,o,s){const l=Math.random()*Math.PI*2,u=Math.sqrt(Math.random())*r,d={x:Math.cos(l)*u,y:Math.sin(l)*u},h=gr(t,d);return{x:(h.x%o+o)%o,y:(h.y%s+s)%s}}function Mi(t,r,o,s){const l=r,u={left:t.x-o,top:t.y-o,right:t.x+o,bottom:t.y+o},d=[...l.search.human.byRect(u),...l.search.berryBush.byRect(u),...l.search.humanCorpse.byRect(u)];for(const h of d){if(s!==void 0&&h.id===s)continue;if(ue(t,h.position,r.mapDimensions.width,r.mapDimensions.height)<o+h.radius)return!0}return!1}function ed(t,r,o,s,l){const u=r.mapDimensions.width,d=r.mapDimensions.height;if(!Mi(t,r,s,l))return t;const h=s;for(let p=h;p<=o;p+=h){const v=Math.ceil(2*Math.PI*p/h);for(let m=0;m<v;m++){const S=m/v*2*Math.PI,w={x:Math.cos(S)*p,y:Math.sin(S)*p},P=gr(t,w),k={x:(P.x%u+u)%u,y:(P.y%d+d)%d};if(!Mi(k,r,s,l))return k}}return null}function H1(t,r){const o=dt(t,r,"berryBush",Rp,l=>l.ownerId===t.id);return o?ed(o.position,r,Rp,Qa,o.id):null}function dt(t,r,o,s,l){const u=r,d=s,h=u.search[o].byRadius(t.position,d);let p=null,v=d;for(const m of h){if(m.id===t.id||l&&!l(m))continue;const S=ue(t.position,m.position,r.mapDimensions.width,r.mapDimensions.height);S<v&&(v=S,p=m)}return p}function _m(t,r,o,s){return r.search[o].byRadius(t,s).length}function Qp(t,r,o){return r.search.human.byRadius(t.position,o).filter(u=>{if(u.id===t.id||u.gender===t.gender||!u.isAdult||u.hunger>=yt||(u.procreationCooldown||0)>0||u.gender==="female"&&u.isPregnant)return!1;const d=u.id===t.motherId||u.id===t.fatherId,h=t.id===u.motherId||t.id===u.fatherId;return!d&&!h})}function zr(t){if(t.length===0)return;const r=t.filter(l=>l.gender==="male"),o=t.filter(l=>l.gender==="female"),s=(l,u)=>l.age!==u.age?u.age-l.age:l.id-u.id;if(r.sort(s),r.length>0)return r[0];if(o.sort(s),o.length>0)return o[0]}function It(t){const o=t.search.human.byProperty("isPlayer",!0);return o.length>0?o[0]:void 0}function Dt(t,r){const o=t,s=o.search.human.byProperty("motherId",r.id),l=o.search.human.byProperty("fatherId",r.id);return[...s,...l]}function x1(t,r){var d;const s=r.search.human.byProperty("activeAction","attacking");let l=null,u=1/0;for(const h of s){if(h.attackTargetId!==t)continue;const p=ue(h.position,((d=r.entities.entities.get(t))==null?void 0:d.position)||{x:0,y:0},r.mapDimensions.width,r.mapDimensions.height);p<u&&(l=h,u=p)}return l}function Em(t,r,o){var l;if(t.id===r.id||t.motherId===r.id||t.fatherId===r.id||r.motherId===t.id||r.fatherId===t.id||t.motherId&&t.motherId===r.motherId||t.fatherId&&t.fatherId===r.fatherId||(l=t.partnerIds)!=null&&l.includes(r.id))return!0;if(t.motherId){const u=o.entities.entities.get(t.motherId);if(u&&(u.motherId===r.id||u.fatherId===r.id))return!0}if(t.fatherId){const u=o.entities.entities.get(t.fatherId);if(u&&(u.motherId===r.id||u.fatherId===r.id))return!0}if(r.motherId){const u=o.entities.entities.get(r.motherId);if(u&&(u.motherId===t.id||u.fatherId===t.id))return!0}if(r.fatherId){const u=o.entities.entities.get(r.fatherId);if(u&&(u.motherId===t.id||u.fatherId===t.id))return!0}return!1}function Oc(t,r){var u,d;if(t.id===r.id||t.motherId===r.id||t.fatherId===r.id||r.motherId===t.id||r.fatherId===t.id)return!0;const o=t.motherId===r.motherId||t.fatherId===r.fatherId,s=r.motherId===t.motherId||r.fatherId===t.fatherId,l=((u=t.ancestorIds)==null?void 0:u.some(h=>r.ancestorIds.includes(h)))||((d=r.ancestorIds)==null?void 0:d.some(h=>t.ancestorIds.includes(h)));return o||s||l}function G1(t,r){const o=[];if(t.motherId){const s=r.entities.entities.get(t.motherId);s&&o.push(s)}if(t.fatherId){const s=r.entities.entities.get(t.fatherId);s&&o.push(s)}return o}function z1(t,r){if(t.gender!=="female"||!t.partnerIds||t.partnerIds.length===0)return null;for(const o of t.partnerIds){const s=r.entities.entities.get(o);if(s&&s.gender==="male")return s}return null}function W1(t,r){if(!t.isAdult&&t.fatherId){const o=r.entities.entities.get(t.fatherId);if(o&&o.type==="human")return o}return t.isAdult&&t.gender==="female"&&t.partnerIds&&t.partnerIds.length>0?z1(t,r):null}function La(t,r){var s;const o=new Set;if(t.motherId){const l=r.entities.entities.get(t.motherId);l&&o.add(l)}if(t.fatherId){const l=r.entities.entities.get(t.fatherId);l&&o.add(l)}return(s=t.partnerIds)==null||s.forEach(l=>{const u=r.entities.entities.get(l);u&&o.add(u)}),Dt(r,t).forEach(l=>o.add(l)),Array.from(o)}let uc=0;function Dc(){const t=Up[uc];return uc=(uc+1)%Up.length,t}function $1(t,r,o){const s=o.mapDimensions.width,l=o.mapDimensions.height,u=r.radius*2;for(let d=Op;d<s/2;d+=50)for(let h=0;h<10;h++){const p=Jc(t,d,s,l);if(!(ue(t,p,s,l)<Op)&&!Mi(p,o,u,r.id))return p}return null}function Im(t,r){const o=new Map;function s(l){const u=Dt(r,l);for(const d of u)o.has(d.id)||(o.set(d.id,d),s(d))}return s(t),Array.from(o.values())}function td(t,r){if(!t.isAdult||t.gender!=="male"||t.leaderId===t.id||!t.leaderId)return{canSplit:!1};if(!t.leaderId)return{canSplit:!1};const o=r.entities.entities.get(t.leaderId);if(!o||o.type!=="human")return{canSplit:!1};const s=zr(Dt(r,o));if(s&&s.id===t.id)return{canSplit:!1};const l=rd(t.leaderId,r);if(l.length<kp)return{canSplit:!1};const d=Im(t,r).length+1,h=Math.min(l.length*Vy,kp);return{canSplit:d>=h,progress:d/h}}function nd(t,r){if(!td(t,r).canSplit)return;const o=Dc(),s=Im(t,r);t.leaderId=t.id,t.tribeBadge=o;for(const u of s)u.leaderId=t.id,u.tribeBadge=o;nt({gameState:r},Fe.TribeSplit,t.position)}function rd(t,r){return r.search.human.byProperty("leaderId",t)}function id(t,r,o,s){return o.search.human.byRadius(t,s).filter(u=>u.leaderId!==r&&u.id!==r)}function j1(t,r,o){const s=o.search.human.byProperty("leaderId",t);let l=0;for(const u of s)u.attackTargetId===r&&l++;return l}function Y1(t,r){var u;const o=new Map,s=Array.from(t.entities.entities.values()).filter(d=>d.type==="human");for(const d of s)d.leaderId&&(o.has(d.leaderId)||o.set(d.leaderId,{leaderId:d.leaderId,tribeBadge:d.tribeBadge||"?",members:[]}),(u=o.get(d.leaderId))==null||u.members.push(d));const l=Array.from(o.values()).map(d=>{const h=t.entities.entities.get(d.leaderId),p=d.members.filter(m=>m.isAdult).length,v=d.members.length-p;return{leaderId:d.leaderId,tribeBadge:d.tribeBadge,adultCount:p,childCount:v,isPlayerTribe:d.leaderId===r,leaderAge:(h==null?void 0:h.age)??0,leaderGender:(h==null?void 0:h.gender)??"male"}});return l.sort((d,h)=>d.isPlayerTribe?-1:h.isPlayerTribe?1:h.adultCount+h.childCount-(d.adultCount+d.childCount)),l}function bp(t,r,o,s){const l=o.search.berryBush.byRadius(t,r),u=o.search.human.byRadius(t,r).filter(p=>p.leaderId!==s);let d=l.length*by;d+=u.length*Zy;let h;if(u.length>0){const p={};for(const m of u)m.leaderId&&(p[m.leaderId]=(p[m.leaderId]||0)+1);let v=0;for(const m in p)p[m]>v&&(v=p[m],h=parseInt(m,10))}return{score:d,occupyingTribeId:h}}function Zp(t){return t.filter(r=>r.isAdult).reduce((r,o)=>{let s=o.hitpoints;return s+=(o.maxAge-o.age)*.5,s+=o.food.length*2,r+s},0)}function Tm(t){return Array.from(t.entities.entities.values()).filter(r=>r.type==="human")}function Vo(t,r){const o=rd(t,r);if(o.length===0){const l=r.entities.entities.get(t);return l?l.position:{x:0,y:0}}const s=o.map(l=>l.position);return Qc(s)}function qp(t,r){const s=[...La(t,r),t].map(l=>l.position);return Qc(s)}function Jp(t,r,o,s){const l=r.x-o.width/2,u=r.y-o.height/2,d=l+t.x,h=u+t.y,p=(d%s.width+s.width)%s.width,v=(h%s.height+s.height)%s.height;return{x:p,y:v}}function V1(t,r,o){const s=Array.from(r.entities.entities.values()).reverse();for(const l of s)if(y1(t,l.position)<l.radius)return l}function K1(t,r){if(t.id!==t.leaderId)return null;const o=r,s=Vo(t.id,r),{score:l}=bp(s,tc/2,o,t.id);let u=null,d=l;const h=Qy,p=Xy;for(let v=t.position.x-p;v<t.position.x+p;v+=h)for(let m=t.position.y-p;m<t.position.y+p;m+=h){const S={x:(v%r.mapDimensions.width+r.mapDimensions.width)%r.mapDimensions.width,y:(m%r.mapDimensions.height+r.mapDimensions.height)%r.mapDimensions.height};if(ue(s,S,r.mapDimensions.width,r.mapDimensions.height)<tc*2)continue;const{score:P}=bp(S,tc/2,o,t.id);P>d*qy&&(d=P,u=S)}return u}const X1={id:ka,update:(t,r)=>{const{entity:o,updateContext:s}=r,{gameState:l}=s,u=s.deltaTime*(Qt/bt);if(o.age+=u,o.age>=o.lifespan)return{nextState:xo,data:{...t,enteredAt:l.time,previousState:ka}};const d=Jc(o.position,o.spreadRadius,l.mapDimensions.width,l.mapDimensions.height);return Mi(d,l,15)||tl(l.entities,d,l.time),{nextState:Lr,data:{...t,enteredAt:l.time,previousState:ka}}},onEnter:(t,r)=>({...r,enteredAt:t.updateContext.gameState.time})},Q1={id:xo,update:t=>({nextState:xo,data:t}),onEnter:(t,r)=>(ad(t.updateContext.gameState.entities,t.entity.id),{...r,enteredAt:t.updateContext.gameState.time})},b1=[v1,S1,X1,Q1],ct="humanIdle",Fr="humanMoving",Oo="humanEating",el="humanGathering",Ko="humanProcreating",Ui="humanAttacking",Oa="humanPlanting",Z1={id:ct,update:(t,r)=>{const{entity:o,updateContext:s}=r;return o.activeAction==="attacking"&&o.attackTargetId?{nextState:Ui,data:{...t,enteredAt:s.gameState.time,previousState:ct,attackTargetId:o.attackTargetId,attackStartTime:s.gameState.time}}:(o.hunger>=Zg?(o.debuffs=o.debuffs.filter(l=>l.type!=="slow"),o.debuffs.push({type:"slow",startTime:s.gameState.time,duration:.1})):o.debuffs=o.debuffs.filter(l=>l.type!=="slow"),o.activeAction==="moving"?{nextState:Fr,data:{...t,enteredAt:s.gameState.time,previousState:ct,target:o.target}}:o.activeAction==="gathering"?{nextState:el,data:{...t,enteredAt:s.gameState.time,previousState:ct,target:o.target}}:o.activeAction==="eating"?{nextState:Oo,data:{...t,enteredAt:s.gameState.time,previousState:ct}}:o.activeAction==="planting"&&o.target?{nextState:Oa,data:{...t,enteredAt:s.gameState.time,previousState:ct,plantingSpot:o.target}}:{nextState:ct,data:t})},onEnter:(t,r)=>(t.entity.acceleration=0,t.entity.velocity={x:0,y:0},{...r,enteredAt:t.updateContext.gameState.time})};function Cm(t){let r=JS;return t.hunger>=Zg&&(r*=ey),t.age>=ny&&(r*=ry),t.movementSlowdown&&(r*=t.movementSlowdown.modifier),r}const cc=7.5;class q1{constructor(){he(this,"id",Fr)}update(r,o){var p;const{entity:s,updateContext:l}=o;if(s.activeAction==="attacking"&&s.attackTargetId)return{nextState:Ui,data:{...r,enteredAt:l.gameState.time,previousState:Fr,attackTargetId:s.attackTargetId,attackStartTime:l.gameState.time}};if(s.activeAction!=="moving")return{nextState:ct,data:{...r,enteredAt:l.gameState.time,previousState:Fr}};let u;if(typeof s.target=="object"?u=s.target:typeof s.target=="number"&&(u=(p=o.updateContext.gameState.entities.entities.get(s.target))==null?void 0:p.position),!u&&(s.direction.x!==0||s.direction.y!==0)&&(u={x:s.position.x+s.direction.x*cc*2,y:s.position.y+s.direction.y*cc*2}),!u)return{nextState:ct,data:{...r,enteredAt:l.gameState.time,previousState:Fr}};const d=Gt(s.position,u,o.updateContext.gameState.mapDimensions.width,o.updateContext.gameState.mapDimensions.height);return s.direction=tn(d),s.acceleration=Cm(s),ue(s.position,u,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height)<cc?{nextState:ct,data:{...r,enteredAt:l.gameState.time,previousState:Fr}}:{nextState:Fr,data:r}}onExit(r){const{entity:o}=r;o.acceleration=0}}const J1=new q1,ew={id:Oo,update:(t,r)=>{const{entity:o,updateContext:s}=r;return o.activeAction!=="eating"?{nextState:ct,data:{...t,enteredAt:s.gameState.time,previousState:Oo}}:(o.food.length>0&&(!o.eatingCooldownTime||s.gameState.time>=o.eatingCooldownTime)&&o.hunger>zo&&(o.hunger=Math.max(0,o.hunger-zo),o.food.pop(),o.eatingCooldownTime=s.gameState.time+1,nt(s,Fe.Eat,o.position),(!o.lastEatingEffectTime||s.gameState.time-o.lastEatingEffectTime>2)&&(rt(s.gameState,_e.Eating,o.position,qt,o.id),o.lastEatingEffectTime=s.gameState.time)),o.hunger<=0||o.food.length<=0?{nextState:ct,data:{...t,enteredAt:s.gameState.time,previousState:Oo}}:{nextState:Oo,data:t})},onEnter:(t,r)=>(t.entity.acceleration=0,t.entity.velocity={x:0,y:0},{...r,enteredAt:t.updateContext.gameState.time})};class tw{constructor(){he(this,"id",el)}update(r,o){return o.entity.activeAction!=="gathering"?{nextState:"humanIdle",data:{...r,enteredAt:o.updateContext.gameState.time,previousState:this.id}}:{nextState:this.id,data:r}}}const nw=new tw,rw=(t,r)=>(r.procreationEndTime=t.updateContext.gameState.time+(r.duration||2),r),iw=(t,r)=>{const{entity:o,updateContext:s}=r,{gameState:l}=s;if(l.time<(t.procreationEndTime||0))return{nextState:Ko,data:t};const u=l.entities.entities.get(t.partnerId);if(u&&u.type==="human"&&!u.isPregnant&&o.hunger<yt&&u.hunger<yt&&!o.procreationCooldown&&!u.procreationCooldown){const d=o.gender==="female"?o:u.gender==="female"?u:void 0,h=o.gender==="male"?o:u.gender==="male"?u:void 0;d&&h&&(d.isPregnant=!0,d.gestationTime=sy,d.fatherId=h.id,o.procreationCooldown=Tp,u.procreationCooldown=Tp,nt(s,Fe.Procreate,d.position))}return o.activeAction="idle",u&&(u.activeAction="idle"),{nextState:ct,data:{...t,enteredAt:l.time,previousState:Ko}}},ow={id:Ko,onEnter:rw,update:iw},sw={id:Ui,onEnter:(t,r)=>({...r,enteredAt:t.updateContext.gameState.time,attackStartTime:t.updateContext.gameState.time}),update:(t,r)=>{if(r.entity.activeAction!=="attacking"||!r.entity.attackTargetId)return r.entity.activeAction="idle",{nextState:ct,data:{...t}};const o=r.updateContext.gameState.entities.entities.get(r.entity.attackTargetId);if(!o||o.type!=="human")return r.entity.activeAction="idle",{nextState:ct,data:{...t}};const s=ue(r.entity.position,o.position,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height),l=Gt(r.entity.position,o.position,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return r.entity.direction=tn(l),s>Xa?r.entity.acceleration=Cm(r.entity):r.entity.acceleration=0,{nextState:Ui,data:t}}},aw={id:Oa,update:(t,r)=>{const{entity:o,updateContext:s}=r,{gameState:l}=s;if(l.time-t.enteredAt>=Cy){if(o.food.filter(h=>h.type===Bn.Berry).length>=Wo){for(let p=0;p<Wo;p++){const v=o.food.findIndex(m=>m.type===Bn.Berry);v>-1&&o.food.splice(v,1)}const h=tl(l.entities,t.plantingSpot,l.time);h.ownerId=o.id,h.claimedUntil=l.time+Qg}return{nextState:ct,data:{...t,enteredAt:l.time,previousState:Oa}}}return{nextState:Oa,data:t}},onEnter:(t,r)=>(t.entity.acceleration=0,t.entity.velocity={x:0,y:0},{...r,enteredAt:t.updateContext.gameState.time})},lw=[Z1,J1,ew,nw,ow,sw,aw],eg=[...b1,...lw];function uw(t,r,o){const s=$S(t,eg);if(!s)return YS(t),[t,r];const{nextState:l,data:u}=s.update(r,o);return jS(t,l)?[l,WS(s,l,u,o,eg)]:[l,u]}function cw(t,r,o){const{gameState:s}=r,l=o*(Qt/bt);if(t.isAdult=t.age>=$c,t.isCallingToAttack&&t.callToAttackEndTime&&s.time>t.callToAttackEndTime&&(t.isCallingToAttack=!1,t.callToAttackEndTime=void 0),t.isCallingToFollow&&t.callToFollowEndTime&&s.time>t.callToFollowEndTime&&(t.isCallingToFollow=!1,t.callToFollowEndTime=void 0),t.movementSlowdown&&s.time>t.movementSlowdown.endTime&&(t.movementSlowdown=void 0),t.hitpoints<t.maxHitpoints){const d=1-t.hunger/100*Ay,h=yy*d*l;t.hitpoints=Math.min(t.maxHitpoints,t.hitpoints+h)}if(t.hunger+=o*(Eo/(Qt/bt)),t.hunger>h1&&(!t.lastHungerEffectTime||s.time-t.lastHungerEffectTime>ko*2)&&(rt(s,_e.Hunger,t.position,ko,t.id),t.lastHungerEffectTime=s.time),t.age+=o/bg,t.gender==="female"&&t.isPregnant&&t.gestationTime&&(t.gestationTime-=l,t.hunger+=o*((Eo*ay-Eo)/(Qt/bt)),(!t.lastPregnantEffectTime||s.time-t.lastPregnantEffectTime>ko*3)&&(rt(s,_e.Pregnant,t.position,ko,t.id),t.lastPregnantEffectTime=s.time),t.gestationTime<=0&&(qw(t,t.fatherId,r),t.isPregnant=!1,t.gestationTime=0,t.fatherId=void 0)),t.procreationCooldown&&(t.procreationCooldown-=l,t.procreationCooldown<0&&(t.procreationCooldown=0)),t.attackCooldown&&(t.attackCooldown-=l,t.attackCooldown<0&&(t.attackCooldown=0)),t.feedParentCooldownTime&&(t.feedParentCooldownTime-=l,t.feedParentCooldownTime<0&&(t.feedParentCooldownTime=0)),t.feedChildCooldownTime&&(t.feedChildCooldownTime-=l,t.feedChildCooldownTime<0&&(t.feedChildCooldownTime=0)),t.leaderMetaStrategyCooldown&&(t.leaderMetaStrategyCooldown-=l,t.leaderMetaStrategyCooldown<0&&(t.leaderMetaStrategyCooldown=0)),t.isAdult?t.radius===Za&&(t.radius=Zt):t.hunger+=o*((Eo*ly-Eo)/(Qt/bt)),t.isAdult&&t.food.length>0&&(!t.feedParentCooldownTime||t.feedParentCooldownTime<=0)){const d=[];if(t.motherId){const h=s.entities.entities.get(t.motherId);h&&d.push(h)}if(t.fatherId){const h=s.entities.entities.get(t.fatherId);h&&d.push(h)}for(const h of d)if(h.age>=em&&h.hunger>=dy&&ue(t.position,h.position,s.mapDimensions.width,s.mapDimensions.height)<=fy){t.food.pop(),h.hunger=Math.max(0,h.hunger-zo),t.feedParentCooldownTime=hy;break}}let u;if(t.hitpoints<=0?u="killed":t.hunger>=en?t.food.length>0&&t.isAdult?(t.food.pop(),t.hunger=Math.max(0,t.hunger-zo)):u="hunger":t.age>=t.maxAge&&(u="oldAge"),u){if(t.leaderId===t.id){const d=zr(Dt(s,t));d?(d.leaderId=d.id,d.tribeBadge=t.tribeBadge,s.entities.entities.forEach(h=>{if(h.type==="human"&&h.leaderId===t.id){const p=h;p.leaderId=d.id}})):s.entities.entities.forEach(h=>{if(h.type==="human"&&h.leaderId===t.id){const p=h;p.leaderId=void 0,p.tribeBadge=void 0}})}if(t.isPlayer){const d=zr(Dt(s,t));d?(d.isPlayer=!0,s.generationCount++):(s.gameOver=!0,s.causeOfGameOver=u)}Zw(s.entities,t.position,t.gender,t.age,t.radius,t.id,s.time,t.food,t.hunger),ad(s.entities,t.id);return}t.animationProgress===void 0&&(t.animationProgress=0),t.animationSpeed===void 0&&(t.animationSpeed=1),t.animationProgress+=o*t.animationSpeed,t.animationProgress>=1&&(t.animationProgress=0)}function dw(t,r){const o=r.gameState.time-t.timeOfDeath;t.decayProgress=Math.min(1,o/py);const s=Math.floor(tm*(1-t.decayProgress));t.food.length>s&&t.food.splice(s),t.decayProgress>=1&&t.food.length<=0&&ad(r.gameState.entities,t.id)}var od=(t=>(t[t.BehaviorTreeBased=0]="BehaviorTreeBased",t))(od||{});function fw(t,r){if(t.aiBehaviorTree&&t.aiBlackboard){const o=t.aiBlackboard.get("lastAiUpdateTime")??0;r.gameState.time-o>=$o&&(t.aiBehaviorTree.execute(t,r,t.aiBlackboard),t.aiBlackboard.set("lastAiUpdateTime",r.gameState.time))}else console.warn(`Behavior Tree AI ticked for human ${t.id}, but the tree or blackboard was missing.`),t.activeAction="idle"}function hw(t,r){switch(t.aiBlackboard&&t.aiBlackboard.cleanupOldEntries(r.gameState.time),t.aiType){case od.BehaviorTreeBased:default:fw(t,r);break}}function pw(t,r){t.forces.push(wn(t.velocity,-.1));const o=wn(tn(t.direction),t.acceleration);t.forces.push(o),t.debuffs.forEach(s=>{r.gameState.time-s.startTime<s.duration&&s.type==="slow"&&(t.velocity=wn(t.velocity,.5))}),t.debuffs=t.debuffs.filter(s=>r.gameState.time-s.startTime<s.duration),t.velocity=gr(t.velocity,t.forces.reduce(gr,{x:0,y:0})),Di(t.velocity)<.001&&(t.velocity={x:0,y:0}),t.position=gr(t.position,wn(t.velocity,r.deltaTime)),t.position.x=(t.position.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,t.position.y=(t.position.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height,t.forces=[],t.type==="human"?cw(t,r,r.deltaTime):t.type==="humanCorpse"&&dw(t,r),t.type==="human"&&hw(t,r),t.stateMachine&&(t.stateMachine=uw(...t.stateMachine,{entity:t,updateContext:r}))}var R=(t=>(t[t.SUCCESS=0]="SUCCESS",t[t.FAILURE=1]="FAILURE",t[t.RUNNING=2]="RUNNING",t[t.NOT_EVALUATED=3]="NOT_EVALUATED",t))(R||{});const tg="Human Behavior",gw=1;class mw{constructor(){he(this,"nodeData",new Map);he(this,"pathStack",[]);he(this,"startTimeStack",[])}nodeStart(r){this.pathStack.push(r),this.startTimeStack.push(performance.now())}nodeEnd(){if(this.startTimeStack.length===0||this.pathStack.length===0){console.error("BTProfiler: nodeEnd() called without a matching nodeStart().");return}const r=performance.now(),o=this.startTimeStack.pop(),s=r-o,l=this.pathStack.join(" > "),u=this.nodeData.get(l)??{path:l,totalTime:0,callCount:0,minTime:1/0,maxTime:-1/0};u.totalTime+=s,u.callCount++,u.minTime=Math.min(u.minTime,s),u.maxTime=Math.max(u.maxTime,s),this.nodeData.set(l,u),this.pathStack.pop()}report(r={}){const{showAll:o=!1}=r,s=Array.from(this.nodeData.values());if(s.length===0){console.log("--- Behavior Tree Profiler: No data collected. ---");return}let l=s,u="--- Behavior Tree Full Report ---";if(!o){const h=this.nodeData.get(tg);if(h){const p=h.totalTime*gw/100;l=s.filter(v=>v.totalTime>p&&v.path!==tg),u="--- Behavior Tree Problem Report ---"}else console.log('BTProfiler: Root node "Human Behavior" not found. Showing full report.'),u="--- Behavior Tree Full Report (Root Not Found) ---"}const d=l.sort((h,p)=>p.totalTime-h.totalTime);console.log(u),d.length>0?console.table(d.map(h=>({Path:h.path,"Total Time (ms)":h.totalTime.toFixed(3),Calls:h.callCount,"Avg Time (ms)":(h.totalTime/h.callCount).toFixed(3),"Min Time (ms)":h.minTime.toFixed(3),"Max Time (ms)":h.maxTime.toFixed(3)}))):console.log("No significant performance problems detected."),console.log("------------------------------------")}reset(){this.nodeData.clear(),this.pathStack=[],this.startTimeStack=[]}}const qe=new mw;function dn(t){return Array.isArray(t)?t:[t,""]}class Ee{constructor(r,o,s=0){he(this,"name");he(this,"lastStatus");he(this,"depth");this.children=r,this.name=o,this.depth=s,this.children.forEach(l=>{l.depth=(this.depth??0)+1})}execute(r,o,s){this.name&&qe.nodeStart(this.name);try{for(const l of this.children){const[u,d]=dn(l.execute(r,o,s));if(u!==R.SUCCESS)return this.lastStatus=u,this.name&&s.recordNodeExecution(this.name,u,o.gameState.time,this.depth,d),u}return this.lastStatus=R.SUCCESS,this.name&&s.recordNodeExecution(this.name,R.SUCCESS,o.gameState.time,this.depth,""),R.SUCCESS}finally{this.name&&qe.nodeEnd()}}}class Wr{constructor(r,o,s=0){he(this,"name");he(this,"lastStatus");he(this,"depth");he(this,"runningChildIndex");this.children=r,this.name=o,this.depth=s,this.children.forEach(l=>{l.depth=(this.depth??0)+1})}execute(r,o,s){this.name&&qe.nodeStart(this.name);try{const l=this.runningChildIndex??0;for(let u=l;u<this.children.length;u++){const d=this.children[u],[h,p]=dn(d.execute(r,o,s));if(h!==R.FAILURE){if(h===R.SUCCESS)return delete this.runningChildIndex,this.lastStatus=R.SUCCESS,this.name&&s.recordNodeExecution(this.name,R.SUCCESS,o.gameState.time,this.depth,p),R.SUCCESS;if(h===R.RUNNING)return this.runningChildIndex=u,this.lastStatus=R.RUNNING,this.name&&s.recordNodeExecution(this.name,R.RUNNING,o.gameState.time,this.depth,p),R.RUNNING}}return delete this.runningChildIndex,this.lastStatus=R.FAILURE,this.name&&s.recordNodeExecution(this.name,R.FAILURE,o.gameState.time,this.depth,""),R.FAILURE}finally{this.name&&qe.nodeEnd()}}}class ve{constructor(r,o,s=0){he(this,"name");he(this,"lastStatus");he(this,"depth");this.action=r,this.name=o,this.depth=s}execute(r,o,s){this.name&&qe.nodeStart(this.name);try{const[l,u]=dn(this.action(r,o,s));return this.lastStatus=l,this.name&&s.recordNodeExecution(this.name,l,o.gameState.time,this.depth,u),l}finally{this.name&&qe.nodeEnd()}}}class le{constructor(r,o,s=0){he(this,"name");he(this,"lastStatus");he(this,"depth");this.condition=r,this.name=o,this.depth=s}execute(r,o,s){this.name&&qe.nodeStart(this.name);try{const[l,u]=dn(this.condition(r,o,s)),d=l?R.SUCCESS:R.FAILURE;return this.lastStatus=d,this.name&&s.recordNodeExecution(this.name,d,o.gameState.time,this.depth,u),d}finally{this.name&&qe.nodeEnd()}}}class ng{constructor(r,o,s,l=0){he(this,"name");he(this,"lastStatus");he(this,"depth");he(this,"startTimeKey");this.child=r,this.timeoutDurationHours=o,this.name=s,this.depth=l,this.child.depth=(this.depth??0)+1,this.startTimeKey=`timeout_${this.name}_startTime`}execute(r,o,s){qe.nodeStart(this.name);try{const l=o.gameState.time;let u=s.get(this.startTimeKey);const[d,h]=dn(this.child.execute(r,o,s));if(d===R.RUNNING){u===void 0&&(s.set(this.startTimeKey,l),u=l);const p=l-u;if(p>this.timeoutDurationHours){s.delete(this.startTimeKey),this.lastStatus=R.FAILURE;const m=`Timed out after ${p.toFixed(2)}h.`;return s.recordNodeExecution(this.name,this.lastStatus,l,this.depth,m),this.lastStatus}this.lastStatus=R.RUNNING;const v=`Running for ${p.toFixed(2)}h. ${h}`;return s.recordNodeExecution(this.name,this.lastStatus,l,this.depth,v),this.lastStatus}return u!==void 0&&s.delete(this.startTimeKey),this.lastStatus=d,s.recordNodeExecution(this.name,this.lastStatus,l,this.depth,h),this.lastStatus}finally{qe.nodeEnd()}}}class Ba{constructor(r,o,s,l=0,u){he(this,"name");he(this,"lastStatus");he(this,"depth");he(this,"statusKey");he(this,"timestampKey");this.child=r,this.cacheDurationHours=o,this.validityCheck=u,this.name=s,this.depth=l,this.child.depth=(this.depth??0)+1,this.statusKey=`caching_${this.name}_status`,this.timestampKey=`caching_${this.name}_timestamp`}execute(r,o,s){qe.nodeStart(this.name);try{const l=o.gameState.time,u=s.get(this.statusKey),d=s.get(this.timestampKey);if(u!==void 0&&d!==void 0){const m=l-d>this.cacheDurationHours,S=this.validityCheck?this.validityCheck(r,o,s):!0;if(!m&&S){const w=(d+this.cacheDurationHours-l).toFixed(2),P=`Cache hit. Status: ${R[u]}. ${w}h left.`;return this.lastStatus=u,s.recordNodeExecution(this.name,this.lastStatus,l,this.depth,P),this.lastStatus}}const[h,p]=dn(this.child.execute(r,o,s));(h===R.SUCCESS||h===R.FAILURE)&&(s.set(this.statusKey,h),s.set(this.timestampKey,l)),this.lastStatus=h;const v=`Cache miss. Child returned ${R[h]}. ${p}`;return s.recordNodeExecution(this.name,this.lastStatus,l,this.depth,v),this.lastStatus}finally{qe.nodeEnd()}}}class Li{constructor(r,o,s,l=0){he(this,"name");he(this,"lastStatus");he(this,"depth");he(this,"cooldownKey");this.cooldownDurationHours=r,this.child=o,this.name=s,this.depth=l,this.child.depth=(this.depth??0)+1,this.cooldownKey=`cooldown_${this.name}`}execute(r,o,s){qe.nodeStart(this.name);try{const l=o.gameState.time,u=s.get(this.cooldownKey);if(this.child.lastStatus===R.RUNNING){const[p,v]=dn(this.child.execute(r,o,s));if(this.lastStatus=p,this.name){const m=`Continuing running child. ${v}`;s.recordNodeExecution(this.name,this.lastStatus,l,this.depth,m)}return this.lastStatus}if(u!==void 0&&l<u){const v=`Cooldown active, ${(u-l).toFixed(2)}h left`;return this.lastStatus=R.FAILURE,this.name&&s.recordNodeExecution(this.name,this.lastStatus,l,this.depth,v),this.lastStatus}const[d,h]=dn(this.child.execute(r,o,s));return(d===R.SUCCESS||d===R.RUNNING)&&s.set(this.cooldownKey,l+this.cooldownDurationHours),this.lastStatus=d,this.name&&s.recordNodeExecution(this.name,this.lastStatus,l,this.depth,h),this.lastStatus}finally{qe.nodeEnd()}}}class gi{constructor(r,o,s,l=0){he(this,"name");he(this,"lastStatus");he(this,"depth");this.child=r,this.behaviorKey=o,this.name=s,this.depth=l;const u=(d,h)=>{d.depth=h,d.children?d.children.forEach(p=>u(p,h+1)):d.child&&u(d.child,h+1)};u(this.child,(this.depth??0)+1)}execute(r,o,s){this.name&&qe.nodeStart(this.name);try{if(r.isPlayer&&!o.gameState.autopilotControls.behaviors[this.behaviorKey]){const h=`Player autopilot for '${this.behaviorKey}' is disabled.`;return this.lastStatus=R.FAILURE,this.name&&s.recordNodeExecution(this.name,this.lastStatus,o.gameState.time,this.depth,h),this.lastStatus}const[u,d]=dn(this.child.execute(r,o,s));return this.lastStatus=u,this.name&&s.recordNodeExecution(this.name,this.lastStatus,o.gameState.time,this.depth,d),this.lastStatus}finally{this.name&&qe.nodeEnd()}}}class vw{constructor(r,o,s=0){he(this,"name");he(this,"lastStatus");he(this,"depth");this.child=r,this.name=o,this.depth=s;const l=(u,d)=>{u.depth=d,u.children?u.children.forEach(h=>l(h,d+1)):u.child&&l(u.child,d+1)};l(this.child,(this.depth??0)+1)}execute(r,o,s){this.name&&qe.nodeStart(this.name);try{if(r.isPlayer&&o.gameState.autopilotControls.isManuallyMoving)return this.lastStatus=R.FAILURE,this.name&&s.recordNodeExecution(this.name,this.lastStatus,o.gameState.time,this.depth,"Manual movement active, AI blocked."),this.lastStatus;const[l,u]=dn(this.child.execute(r,o,s));return this.lastStatus=l,this.name&&s.recordNodeExecution(this.name,this.lastStatus,o.gameState.time,this.depth,u),this.lastStatus}finally{this.name&&qe.nodeEnd()}}}class ma{constructor(r,o,s=0){he(this,"name");he(this,"lastStatus");he(this,"depth");this.child=r,this.name=o,this.depth=s;const l=(u,d)=>{u.depth=d,u.children?u.children.forEach(h=>l(h,d+1)):u.child&&l(u.child,d+1)};l(this.child,(this.depth??0)+1)}execute(r,o,s){this.name&&qe.nodeStart(this.name);try{if(r.isPlayer)return this.lastStatus=R.FAILURE,this.name&&s.recordNodeExecution(this.name,this.lastStatus,o.gameState.time,this.depth,"Player controlled, AI blocked."),this.lastStatus;const[l,u]=dn(this.child.execute(r,o,s));return this.lastStatus=l,this.name&&s.recordNodeExecution(this.name,this.lastStatus,o.gameState.time,this.depth,u),this.lastStatus}finally{this.name&&qe.nodeEnd()}}}function Sw(t){return new Ee([new le((r,o)=>{const s=r.hunger>=Pp,l=r.food.length>0,u=!r.eatingCooldownTime||o.gameState.time>=r.eatingCooldownTime;return[!!(r.isAdult&&s&&l&&u),`${Math.floor(r.hunger-Pp)}, ${r.food.length}, ${r.eatingCooldownTime?Math.floor(r.eatingCooldownTime-o.gameState.time):""}`]},"Can Eat",t+1),new ve(r=>(r.direction={x:0,y:0},r.target=void 0,r.activeAction="eating",R.RUNNING),"Eat",t+1)],"Eating",t)}function yw(t){return new Ee([new le((r,o,s)=>{if(r.isAdult&&r.hitpoints>r.maxHitpoints*lm||r.isAdult&&r.hunger>Ly)return!1;const l=x1(r.id,o.gameState);return l?(s.set("fleeThreat",l),!0):!1},"Should Flee",t+1),new ve((r,o,s)=>{const l=s.get("fleeThreat");if(!l)return R.FAILURE;r.activeAction="moving";const u=Gt(l.position,r.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height),d=tn(u),h=gr(r.position,wn(d,um));return r.target={x:(h.x%o.gameState.mapDimensions.width+o.gameState.mapDimensions.width)%o.gameState.mapDimensions.width,y:(h.y%o.gameState.mapDimensions.height+o.gameState.mapDimensions.height)%o.gameState.mapDimensions.height},r.direction=d,R.RUNNING},"Execute Flee",t+1)],"Flee",t)}const Ro="foodSource";function Aw(t){const r=new ve((s,l,u)=>{const d=new Map,h=dt(s,l.gameState,"berryBush",Mp,m=>{if(m.food.length===0)return!1;if(!m.ownerId||!m.claimedUntil||l.gameState.time>=m.claimedUntil)return!0;const S=l.gameState.entities.entities.get(m.ownerId);if(!S||S.leaderId===s.leaderId)return!0;const w=d.get(S.id)??ue(s.position,S.position,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height);return d.set(S.id,w),w>lA}),p=dt(s,l.gameState,"humanCorpse",Mp,m=>m.food.length>0);let v=null;if(h&&p){const m=ue(s.position,h.position,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height),S=ue(s.position,p.position,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height);v=m<=S?h:p}else v=h||p;return v?(u.set(Ro,v),[R.SUCCESS,`Found food: ${v.type} at ${v.position.x.toFixed(0)},${v.position.y.toFixed(0)}`]):[R.FAILURE,"No food source found"]},"Find Closest Food Source",t+4),o=new ve((s,l,u)=>{const d=u.get(Ro);return!d||d.food.length===0?(u.delete(Ro),[R.FAILURE,"Food source is invalid or depleted"]):ue(s.position,d.position,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height)<mr?(s.activeAction="gathering",s.direction={x:0,y:0},s.target=d.id,u.delete(Ro),[R.SUCCESS,`Gathering from ${d.type}`]):(s.activeAction="moving",s.target=d.id,s.direction=fn(s.position,d.position,l.gameState.mapDimensions),[R.RUNNING,`Moving to ${d.type}`])},"Move To Food and Gather",t+3);return new Ee([new le((s,l)=>{const u=s.food.length<s.maxFood,d=s.hunger>Py,h=Dt(l.gameState,s).filter(p=>p.hunger>Ka);return[(s.isAdult&&u&&(d||h.length>0))??!1,`${d?"H":""}, ${h.length>0?" HC("+h.length+")":""}`]},"Should Gather Food",t+1),new Wr([new Ee([new le((s,l,u)=>u.has(Ro),"Has Food Source?",t+2),o],"Continue Gathering Action",t+2),new Ee([new Ba(r,Yy,"Cache Food Source Search",t+3),o],"Find New Food Source and Gather",t+2)],"Perform or Start Gathering",t+1)],"Gather Food",t)}function ww(t){return new ve((r,o,s)=>(r.activeAction="idle",r.direction={x:0,y:0},r.target=void 0,s.set("wanderTarget",void 0),R.SUCCESS),"Idle",t)}const va="procreationWanderStartTime",rg=t=>t.find(r=>(r.procreationCooldown||0)<=0&&r.hunger<yt&&(r.gender==="female"?!r.isPregnant&&r.age<=Ln:!0));function _w(t){const r=new le((u,d,h)=>{const p=Qp(u,d.gameState,mr),v=rg(p);return v?(h.set("procreationPartner",v),!0):!1},"Find Immediate Partner"),o=new ve((u,d,h)=>{var v;const p=h.get("procreationPartner");return p?(u.activeAction="procreating",u.target=void 0,h.delete("procreationPartner"),h.delete(va),(v=u.partnerIds)!=null&&v.includes(p.id)||(u.partnerIds=u.partnerIds?[...u.partnerIds,p.id]:[p.id]),R.SUCCESS):R.FAILURE},"Start Procreating"),s=new le((u,d,h)=>{const p=Qp(u,d.gameState,Fy),v=rg(p);return v?(h.set("procreationPartner",v),!0):!1},"Locate Distant Partner"),l=new ve((u,d,h)=>{const p=h.get("procreationPartner");if(!p)return R.FAILURE;if(ue(u.position,p.position,d.gameState.mapDimensions.width,d.gameState.mapDimensions.height)<mr)return R.SUCCESS;u.activeAction="moving",u.target=p.id;const m=Gt(u.position,p.position,d.gameState.mapDimensions.width,d.gameState.mapDimensions.height);return u.direction=tn(m),R.RUNNING},"Move Towards Partner");return new Ee([new le(u=>!(!u.isAdult||u.gender==="female"&&u.isPregnant||u.age<iy||u.gender==="female"&&u.age>Ln),"Is Fertile (age, not pregnant)",t+1),new le(u=>u.hunger<yt,"Is Healthy (hunger)",t+1),new le(u=>(u.procreationCooldown||0)<=0,"Is Ready (cooldown)",t+1),new Wr([new Ee([new le((u,d)=>_m(u.position,d.gameState,"berryBush",Uy)>=My,"Is Environment Viable (food)",t+3),new ve((u,d,h)=>(h.delete(va),R.SUCCESS),"Clear Wander Timer",t+3)],"Sufficient Food Path",t+2),new Ee([new le((u,d)=>{if(u.gender==="male"){const h=Dt(d.gameState,u);return!zr(h)}return!1},"Is Male Without Heir",t+3),new ve((u,d,h)=>{const p=h.get(va);if(p===void 0)return h.set(va,d.gameState.time),[R.FAILURE,"Starting heirless wander timer"];const v=d.gameState.time-p;return v>=oy?[R.SUCCESS,`Wandered for ${v.toFixed(1)}h, proceeding without food`]:[R.FAILURE,`Wandering for heir, ${v.toFixed(1)}h elapsed`]},"Check Wander Timer",t+3)],"Heirless Desperation Path",t+2)],"Check Environment Or Desperation",t+1),new le((u,d,h)=>{var v;const p=h.get("procreationPartner");return p&&((v=p.partnerIds)!=null&&v.length)&&!p.partnerIds.includes(u.id)&&p.partnerIds.map(m=>d.gameState.entities.entities.get(m)).filter(m=>!!m).some(m=>ue(u.position,m.position,d.gameState.mapDimensions.width,d.gameState.mapDimensions.height)<aA)?[!1,"Partner's primary partner is too close"]:!0},"Is Partner's Primary Partner Nearby",t+1),new Wr([new Ee([r,o],"Procreate With Immediate Partner",t+2),new Li(Wy,new Ee([s,l],"Seek Distant Partner Action",t+3),"Seek Distant Partner Cooldown",t+2)],"Find Partner And Procreate",t+1)],"Procreate",t)}const mi="attackTarget",Ur="homeCenter",dc=150;function Ew(t,r,o){let s,l=1/0;for(const u of Object.values(t.entities.entities))if(u.type==="human"&&u.id!==r.id&&u.hitpoints>0&&u.leaderId!==r.leaderId){const d=ue(r.position,u.position,t.mapDimensions.width,t.mapDimensions.height);d<o&&d<l&&(l=d,s=u)}return s}function Iw(t){return new Ee([new le((r,o,s)=>{if(!r.isAdult)return[!1,"Not an adult"];const{gameState:l}=o;if(r.activeAction==="attacking"&&r.attackTargetId){const d=l.entities.entities.get(r.attackTargetId);if(d&&d.hitpoints>0&&ue(r.position,d.position,l.mapDimensions.width,l.mapDimensions.height)<=dc){if(s.set(mi,d),!s.get(Ur)){const h=r.leaderId?Vo(r.leaderId,l):La(r,l).length>0?qp(r,l):r.position;s.set(Ur,h)}return!0}}const u=Ew(l,r,dc);if(u){s.set(mi,u);const d=r.leaderId?Vo(r.leaderId,l):La(r,l).length>0?qp(r,l):r.position;return s.set(Ur,d),!0}return s.set(mi,void 0),s.set(Ur,void 0),!1},"Find Attack Target",t+1),new ve((r,o,s)=>{const l=s.get(mi),u=s.get(Ur);if(!l||!u)return R.FAILURE;const{gameState:d}=o;return ue(r.position,u,d.mapDimensions.width,d.mapDimensions.height)>om?(r.activeAction="idle",r.attackTargetId=void 0,s.set(mi,void 0),s.set(Ur,void 0),R.FAILURE):l.hitpoints<=0||ue(r.position,l.position,d.mapDimensions.width,d.mapDimensions.height)>dc?(r.activeAction==="attacking"&&(r.activeAction="idle",r.attackTargetId=void 0),s.set(mi,void 0),s.set(Ur,void 0),R.SUCCESS):(r.activeAction==="attacking"&&r.attackTargetId===l.id||(r.activeAction="attacking",r.attackTargetId=l.id),R.RUNNING)},"Execute Attack",t+1)],"Attack",t)}const Tw=(t,r,o)=>{const s=Dt(r.gameState,t).filter(d=>!d.isAdult);if(s.length===0)return R.FAILURE;let l=null,u=Ka;for(const d of s)d.hunger>=u&&(u=d.hunger,l=d);return l?(o.set("targetChild",l),R.SUCCESS):R.FAILURE},Cw=(t,r,o)=>{const s=o.get("targetChild");return s?ue(t.position,s.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>jc?(t.activeAction="moving",t.target=s.id,t.direction=fn(t.position,s.position,r.gameState.mapDimensions),R.RUNNING):(t.activeAction="idle",t.target=void 0,o.set("targetChild",void 0),R.SUCCESS):R.FAILURE};function Rw(t){return new Ee([new le(r=>(r.isAdult&&r.food.length>0&&(!r.feedChildCooldownTime||r.feedChildCooldownTime<=0))??!1,"Can Feed Child",t+1),new ve(Tw,"Find Hungriest Child",t+1),new ve(Cw,"Move To Child and Feed",t+1)],"Feed Child",t)}function Pw(t){return new Ee([new le(r=>!r.isAdult&&r.hunger>=Ka,"Is Hungry Child",t+1),new ve((r,o,s)=>{const l=G1(r,o.gameState);if(l.length===0)return R.FAILURE;const u=dt(r,o.gameState,"human",cy,d=>l.some(h=>h.id===d.id)&&d.food.length>0);return u?(s.set("targetParent",u),R.SUCCESS):R.FAILURE},"Find Parent With Food",t+1),new ve((r,o,s)=>{const l=s.get("targetParent");if(!l)return R.FAILURE;const u=ue(r.position,l.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height);return r.activeAction="idle",u<=jc?(r.target=void 0,R.SUCCESS):(r.target=l.id,r.activeAction="moving",R.RUNNING)},"Move To Parent",t+1)],"Seek Food From Parent",t)}const Sa="plantingSpot";function Nw(t){const r=new ve((s,l,u)=>{const d=u.get(Sa);return!d||Mi(d,l.gameState,Qa,s.id)?(u.delete(Sa),[R.FAILURE,"Planting spot is invalid or now occupied"]):ue(s.position,d,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height)>mr?(s.activeAction="moving",s.target=d,s.direction=fn(s.position,d,l.gameState.mapDimensions),[R.RUNNING,"Moving to planting spot"]):(s.activeAction="planting",s.target=d,[R.RUNNING,"Planting state initiated"])},"Move To Spot and Plant",t+3),o=new ve((s,l,u)=>{const d=H1(s,l.gameState);return d?(u.set(Sa,d),[R.SUCCESS,`Found new spot at ${d.x.toFixed(0)}, ${d.y.toFixed(0)}`]):[R.FAILURE,"No suitable planting spot found"]},"Find Optimal Planting Spot",t+3);return new Ee([new le(s=>{const l=s.food.filter(d=>d.type===Bn.Berry).length>=Wo,u=s.hunger<Ny;return(s.isAdult&&l&&u)??!1},"Can Plant",t+1),new le((s,l)=>{const u=_m(s.position,l.gameState,"berryBush",Ry),d=Dt(l.gameState,s);return!(d.length===0||u>=d.length*2)},"Has Not Enough Nearby Bushes",t+1),new Wr([new Ee([new le((s,l,u)=>u.has(Sa),"Has Planting Spot?",t+2),r],"Continue Planting Action",t+2),new Li(jy,o,"Find Planting Spot Cooldown",t+2)],"Perform or Start Planting",t+1)],"Plant Bush",t)}const fc="enemiesNearby";function kw(t){const r=new le(u=>u.id===u.leaderId,"Is Leader?",t+1),o=new le(u=>!u.isCallingToAttack,"Is Not Already Calling?",t+1),s=new ve((u,d,h)=>{const p=id(u.position,u.id,d.gameState,sm);return p.length>0?(h.set(fc,p),R.SUCCESS):R.FAILURE},"Find Nearby Enemies",t+1),l=new Wr([new Ee([new le((u,d,h)=>{const p=h.get(fc);if(!p||p.length===0)return!1;const v=rd(u.id,d.gameState),m=Zp(v),S=Zp(p);return m>S*Jy},"Is Strong Enough?",t+3),new ve((u,d)=>(u.isCallingToAttack=!0,u.callToAttackEndTime=d.gameState.time+ki,rt(d.gameState,_e.CallToAttack,u.position,ki),nt(d,Fe.CallToAttack,u.position),u.activeAction="idle",u.target=void 0,R.SUCCESS),"Issue Call to Attack",t+3)],"Attack",t+2),new ve((u,d,h)=>{const p=h.get(fc);if(!p||p.length===0)return R.FAILURE;const v=p.map(k=>k.position),m=Qc(v),S=Gt(m,u.position,d.gameState.mapDimensions.width,d.gameState.mapDimensions.height),w=tn(S),P=gr(u.position,wn(w,um*2));return u.activeAction="moving",u.target={x:(P.x%d.gameState.mapDimensions.width+d.gameState.mapDimensions.width)%d.gameState.mapDimensions.width,y:(P.y%d.gameState.mapDimensions.height+d.gameState.mapDimensions.height)%d.gameState.mapDimensions.height},u.direction=w,R.SUCCESS},"Retreat",t+2)],"Attack or Retreat",t+2);return new Ee([r,o,s,new Li(eA,l,"Leader Combat Cooldown",t+1)],"Leader Combat Strategy",t)}const hc="combatTarget",pc="homeCenter";function Ow(t){const r=new le(d=>d.isAdult&&d.leaderId?d.id!==d.leaderId:!1,"Is Tribe Follower?",t+1),o=new le(d=>d.hunger<ky&&d.hitpoints>=d.maxHitpoints*lm,"Is Fit for Combat?",t+1),s=new le((d,h)=>{const p=h.gameState.entities.entities.get(d.leaderId);return!!(p!=null&&p.isCallingToAttack)},"Is Leader Calling to Attack?",t+1),l=new ve((d,h,p)=>{const{gameState:v}=h,m=v.entities.entities.get(d.leaderId);if(!m)return R.FAILURE;const S=id(m.position,m.id,v,By);if(S.length===0)return R.FAILURE;S.sort((w,P)=>{const k=ue(d.position,w.position,v.mapDimensions.width,v.mapDimensions.height),O=ue(d.position,P.position,v.mapDimensions.width,v.mapDimensions.height);return k-O});for(const w of S)if(j1(m.id,w.id,v)<Hy){p.set(hc,w);const k=Vo(m.id,v);return p.set(pc,k),R.SUCCESS}return R.FAILURE},"Find Best Target",t+1),u=new ve((d,h,p)=>{const v=p.get(hc),m=p.get(pc);if(!v||!m)return R.FAILURE;const{gameState:S}=h;return ue(d.position,m,S.mapDimensions.width,S.mapDimensions.height)>om?(d.activeAction==="attacking"&&d.attackTargetId===v.id&&(d.activeAction="idle",d.attackTargetId=void 0),p.set(hc,void 0),p.set(pc,void 0),R.FAILURE):((!d.lastTargetAcquiredEffectTime||h.gameState.time-d.lastTargetAcquiredEffectTime>qt*5)&&(rt(h.gameState,_e.TargetAcquired,d.position,qt,d.id),d.lastTargetAcquiredEffectTime=h.gameState.time),d.activeAction="attacking",d.attackTargetId=v.id,d.target=void 0,R.RUNNING)},"Attack Target",t+1);return new Ee([r,o,s,l,u],"Tribe Member Combat",t)}function Dw(t){const r=new le((m,S)=>{if(!m.isAdult||m.gender!=="male")return!1;const w=m.partnerIds&&m.partnerIds.length>0,P=Dt(S.gameState,m).length>0;return w||P},"Is Adult Male With Family?",t+1),o=new le((m,S)=>{var k;if(!m.fatherId)return!1;const w=S.gameState.entities.entities.get(m.fatherId);return!w||((k=zr(Dt(S.gameState,w)))==null?void 0:k.id)===m.id?!1:ue(m.position,w.position,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height)<zy},"Is Too Close To Father?",t+1),s=new le((m,S,w)=>w.get("territoryMoveTarget")!==void 0,"Is Moving To Territory?",t+3),l=new ve((m,S,w)=>{const P=w.get("territoryMoveTarget"),k=w.get("territoryMoveStartTime");if(!P||!k)return[R.FAILURE,"Missing move data"];if(S.gameState.time-k>xy)return w.delete("territoryMoveTarget"),w.delete("territoryMoveStartTime"),[R.FAILURE,"Territory move timed out"];if(ue(m.position,P,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height)<mr)return w.delete("territoryMoveTarget"),w.delete("territoryMoveStartTime"),[R.SUCCESS,"Arrived at new territory"];m.activeAction="moving",m.target=P;const G=Gt(m.position,m.target,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height);return m.direction=tn(G),[R.RUNNING,"Continuing move to territory"]},"Check Timeout & Arrival",t+3),u=new Ee([s,l],"Handle In-Progress Move",t+2),d=new le((m,S,w)=>w.get("territoryMoveTarget")===void 0,"Should Start New Move?",t+4),h=new ve((m,S,w)=>{const P=Jc(m.position,S.gameState.mapDimensions.width/4,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height);w.set("territoryMoveTarget",P),w.set("territoryMoveStartTime",S.gameState.time),m.activeAction="moving",m.target=P;const k=Gt(m.position,m.target,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height);return m.direction=tn(k),[R.RUNNING,"Started moving to new territory"]},"Start New Territory Move",t+4),p=new Ee([d,h],"Start New Territory Move Action",t+3),v=new Wr([u,new Li($y,p,"Establish Territory Cooldown",t+2)],"Establish or Continue Move",t+1);return new Ee([r,o,v],"Establish Family Territory",t)}function Mw(t){return new Ee([new ve((r,o,s)=>{const l=W1(r,o.gameState);return l?(s.set("patriarchTarget",l),[R.SUCCESS,`Found patriarch: ${l.id}`]):(s.delete("patriarchTarget"),[R.FAILURE,"No patriarch found"])},"Find Patriarch",t+1),new ve((r,o,s)=>{const l=s.get("patriarchTarget");if(!l)return[R.FAILURE,"Patriarch target missing from blackboard"];const u=ue(r.position,l.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height);if(u>im){r.activeAction="moving",r.target=l.id;const d=Gt(r.position,l.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height);return r.direction=tn(d),[R.RUNNING,`Moving to patriarch at ${u.toFixed(0)}`]}return r.activeAction="idle",r.target=void 0,r.direction={x:0,y:0},[R.SUCCESS,`Arrived at patriarch at ${u.toFixed(0)}`]},"Move Towards Patriarch",t+1)],"Follow Patriarch",t)}const gc="tribeSplitMigrationTarget";function Uw(t){const r=new Ee([new le((o,s)=>{const{canSplit:l,progress:u}=td(o,s.gameState);return l?[!0,`Progress: ${(u??0)*100}%`]:[!1,"Cannot split"]},"Can Split Tribe?",t+2),new ve((o,s,l)=>{const{gameState:u}=s;let d=l.get(gc);if(!d){if(!o.leaderId)return R.FAILURE;const p=Vo(o.leaderId,u),v=$1(p,o,u);if(v)l.set(gc,v),d=v;else return R.FAILURE}return ue(o.position,d,u.mapDimensions.width,u.mapDimensions.height)<mr?(l.delete(gc),o.activeAction="idle",o.target=void 0,R.SUCCESS):(o.activeAction="moving",o.target=d,R.RUNNING)},"Move to New Territory",t+2),new ve((o,s)=>(nd(o,s.gameState),R.SUCCESS),"Perform Tribe Split",t+2)],"Tribe Split Action",t+1);return new Li(Ky,r,"Tribe Split Cooldown",t)}const ya="jealousyAttackTarget";function Fw(t){return new Ee([new le((r,o,s)=>{if(!r.isAdult)return[!1,"Not an adult"];const l=U1(r,o.gameState,tA);return l?(s.set(ya,l),[!0,`Partner cheating with ${l.id}`]):(s.delete(ya),!1)},"Check for Infidelity",t+1),new ve((r,o,s)=>{const l=s.get(ya);return!l||l.hitpoints<=0?(s.delete(ya),[R.FAILURE,"Target is invalid or dead"]):r.activeAction==="attacking"&&r.attackTargetId===l.id?R.RUNNING:(r.activeAction="attacking",r.attackTargetId=l.id,[R.RUNNING,`Attacking ${l.id}`])},"Execute Jealousy Attack",t+1)],"Jealousy Attack",t)}const Aa="defendAggressor";function Lw(t){return new Ee([new le((r,o,s)=>{if(!r.isAdult)return[!1,"Not an adult"];const l=L1(r,o.gameState,nA);return l?(s.set(Aa,l.aggressor),[!0,`Family member ${l.familyMember.id} attacked by ${l.aggressor.id}`]):(s.delete(Aa),!1)},"Check Family Under Attack",t+1),new ve((r,o,s)=>{const l=s.get(Aa);return!l||l.hitpoints<=0?(s.delete(Aa),[R.FAILURE,"Target invalid/dead"]):r.activeAction==="attacking"&&r.attackTargetId===l.id?R.RUNNING:(r.activeAction="attacking",r.attackTargetId=l.id,[R.RUNNING,`Attacking aggressor ${l.id}`])},"Execute Family Defense Attack",t+1)],"Defend Family",t)}const wa="bushIntruder";function Bw(t){return new Ee([new le((r,o,s)=>{if(!r.isAdult)return[!1,"Not an adult"];const l=F1(r,o.gameState,rA);return l?(s.set(wa,l),[!0,`Intruder ${l.id} stealing berries`]):(s.delete(wa),!1)},"Check For Intruders on Bushes",t+1),new ve((r,o,s)=>{const l=s.get(wa);return!l||l.hitpoints<=0?(s.delete(wa),[R.FAILURE,"Intruder is invalid or dead"]):r.activeAction==="attacking"&&r.attackTargetId===l.id?R.RUNNING:(r.activeAction="attacking",r.attackTargetId=l.id,[R.RUNNING,`Attacking intruder ${l.id}`])},"Execute Bush Defense Attack",t+1)],"Defend Claimed Bush",t)}const _a="desperateAttackTarget";function Hw(t){return new Ee([new le(r=>r.hunger>iA,"Is Starving",t+1),new le((r,o)=>{if(!r.isAdult)return[!1,"Not an adult"];const s=dt(r,o.gameState,"berryBush",ft,u=>u.food.length>0),l=dt(r,o.gameState,"humanCorpse",ft,u=>u.food.length>0);return!s&&!l},"No Other Food Available",t+1),new le((r,o,s)=>{const l=B1(r,o.gameState);return l?(s.set(_a,l),[!0,`Found weak target ${l.id}`]):(s.delete(_a),!1)},"Find Weak Target",t+1),new ve((r,o,s)=>{const l=s.get(_a);return!l||l.hitpoints<=0?(s.delete(_a),[R.FAILURE,"Target is invalid or dead"]):r.activeAction==="attacking"&&r.attackTargetId===l.id?R.RUNNING:(r.activeAction="attacking",r.attackTargetId=l.id,[R.RUNNING,`Desperately attacking ${l.id}`])},"Execute Desperate Attack",t+1)],"Desperate Attack",t)}function xw(t){return new Ee([new le((r,o)=>{const s=o.gameState.autopilotControls.activeAutopilotAction;return r.isPlayer===!0&&(s==null?void 0:s.action)===ae.AutopilotMove},"Has Autopilot Move Command",t+1),new ve((r,o)=>{const s=o.gameState.autopilotControls.activeAutopilotAction;if((s==null?void 0:s.action)!==ae.AutopilotMove)return r.activeAction==="moving"&&typeof r.target=="object"&&(r.activeAction="idle",r.target=void 0),R.FAILURE;const l=s.position;return ue(r.position,l,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height)<uA?(o.gameState.autopilotControls.activeAutopilotAction=void 0,r.activeAction==="moving"&&(r.activeAction="idle",r.target=void 0),R.SUCCESS):(r.activeAction="moving",r.target=l,r.direction=fn(r.position,l,o.gameState.mapDimensions),R.RUNNING)},"Execute Autopilot Move",t+1)],"Autopilot Move To Target",t)}function Gw(t){return new Ee([new le((r,o)=>{const s=o.gameState.autopilotControls.activeAutopilotAction;return r.isPlayer===!0&&(s==null?void 0:s.action)===ae.AutopilotGather},"Has Autopilot Gather Command",t+1),new ve((r,o)=>{const s=o.gameState.autopilotControls.activeAutopilotAction;if((s==null?void 0:s.action)!==ae.AutopilotGather)return o.gameState.autopilotControls.activeAutopilotAction=void 0,R.FAILURE;const l=s.targetEntityId,u=o.gameState.entities.entities.get(l);return!u||u.food.length===0?(o.gameState.autopilotControls.activeAutopilotAction=void 0,R.FAILURE):ue(r.position,u.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height)>mr?(r.activeAction="moving",r.target=l,r.direction=fn(r.position,u.position,o.gameState.mapDimensions),R.RUNNING):(r.activeAction="gathering",r.target=l,o.gameState.autopilotControls.activeAutopilotAction=void 0,R.SUCCESS)},"Execute Autopilot Gather",t+1)],"Autopilot Gather From Target",t)}function zw(t){return new Ee([new le((r,o)=>{const s=o.gameState.autopilotControls.activeAutopilotAction;return r.isPlayer===!0&&(s==null?void 0:s.action)===ae.AutopilotAttack},"Has Autopilot Attack Command",t+1),new ve((r,o)=>{const s=o.gameState.autopilotControls.activeAutopilotAction;if((s==null?void 0:s.action)!==ae.AutopilotAttack)return o.gameState.autopilotControls.activeAutopilotAction=void 0,R.FAILURE;const l=s.targetEntityId,u=o.gameState.entities.entities.get(l);return!u||u.type!=="human"||u.hitpoints<=0?(o.gameState.autopilotControls.activeAutopilotAction=void 0,R.FAILURE):ue(r.position,u.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height)<=ba?(r.activeAction="attacking",r.attackTargetId=u.id,o.gameState.autopilotControls.activeAutopilotAction=void 0,R.SUCCESS):(r.activeAction="moving",r.target=u.id,r.direction=fn(r.position,u.position,o.gameState.mapDimensions),R.RUNNING)},"Execute Autopilot Attack",t+1)],"Autopilot Attack",t)}function Ww(t){return new Ee([new le((r,o)=>{const s=o.gameState.autopilotControls.activeAutopilotAction;return r.isPlayer===!0&&(s==null?void 0:s.action)===ae.AutopilotFeedChildren},"Has Autopilot Feed Child Command",t+1),new ve((r,o)=>{const s=o.gameState.autopilotControls.activeAutopilotAction;if((s==null?void 0:s.action)!==ae.AutopilotFeedChildren)return o.gameState.autopilotControls.activeAutopilotAction=void 0,R.FAILURE;const l=s.targetEntityId,u=o.gameState.entities.entities.get(l);return!u||u.type!=="human"||u.isAdult||r.food.length===0?(o.gameState.autopilotControls.activeAutopilotAction=void 0,R.FAILURE):ue(r.position,u.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height)<=ba?(o.gameState.autopilotControls.activeAutopilotAction=void 0,R.SUCCESS):(r.activeAction="moving",r.target=u.id,r.direction=fn(r.position,u.position,o.gameState.mapDimensions),R.RUNNING)},"Execute Autopilot Feed Child",t+1)],"Autopilot Feed Child",t)}function $w(t){return new Ee([new le((r,o)=>{const s=o.gameState.autopilotControls.activeAutopilotAction;return r.isPlayer===!0&&(s==null?void 0:s.action)===ae.AutopilotPlant},"Has Autopilot Plant Command",t+1),new ve((r,o)=>{const s=o.gameState.autopilotControls.activeAutopilotAction;if((s==null?void 0:s.action)!==ae.AutopilotPlant)return o.gameState.autopilotControls.activeAutopilotAction=void 0,R.FAILURE;if(r.activeAction==="planting")return R.RUNNING;const l=s.position;return Mi(l,o.gameState,Qa,r.id)?(o.gameState.autopilotControls.activeAutopilotAction=void 0,R.FAILURE):ue(r.position,l,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height)<=ba?(r.activeAction="planting",r.target=l,o.gameState.autopilotControls.activeAutopilotAction=void 0,o.gameState.hasPlayerPlantedBush=!0,R.RUNNING):(r.activeAction="moving",r.target=l,r.direction=fn(r.position,l,o.gameState.mapDimensions),R.RUNNING)},"Execute Autopilot Plant",t+1)],"Autopilot Plant",t)}function jw(t){return new Ee([new le((r,o)=>{const s=o.gameState.autopilotControls.activeAutopilotAction;return r.isPlayer===!0&&(s==null?void 0:s.action)===ae.AutopilotProcreate},"Has Autopilot Procreate Command",t+1),new ve((r,o)=>{const s=o.gameState.autopilotControls.activeAutopilotAction;if((s==null?void 0:s.action)!==ae.AutopilotProcreate)return o.gameState.autopilotControls.activeAutopilotAction=void 0,R.FAILURE;const l=s.targetEntityId,u=o.gameState.entities.entities.get(l);return!u||u.type!=="human"||u.gender===r.gender||!u.isAdult||!r.isAdult||u.gender==="female"&&(u.isPregnant||u.age>Ln)||r.gender==="female"&&(r.isPregnant||r.age>Ln)||(u.procreationCooldown||0)>0||(r.procreationCooldown||0)>0||u.hunger>=yt||r.hunger>=yt?(o.gameState.autopilotControls.activeAutopilotAction=void 0,R.FAILURE):ue(r.position,u.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height)<=ba?(r.activeAction="procreating",o.gameState.autopilotControls.activeAutopilotAction=void 0,R.SUCCESS):(r.activeAction="moving",r.target=u.id,r.direction=fn(r.position,u.position,o.gameState.mapDimensions),R.RUNNING)},"Execute Autopilot Procreate",t+1)],"Autopilot Procreate",t)}function Yw(t){return new Ee([new le(r=>!!r.leaderId&&r.leaderId!==r.id,"Is Follower",t+1),new le((r,o)=>{if(!r.leaderId)return!1;const s=o.gameState.entities.entities.get(r.leaderId);return!!s&&s.isCallingToFollow===!0},"Is Leader Calling To Follow",t+1),new le(r=>r.hunger<Dy,"Is Not Critically Hungry",t+1),new ve((r,o)=>{if(!r.leaderId)return R.FAILURE;const s=o.gameState.entities.entities.get(r.leaderId);return s?ue(r.position,s.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height)>Oy?(r.activeAction="moving",r.target=s.id,r.direction=fn(r.position,s.position,o.gameState.mapDimensions),R.RUNNING):(r.activeAction==="moving"&&r.target===s.id&&(r.activeAction="idle",r.target=void 0),R.SUCCESS):R.FAILURE},"Execute Follow Leader",t+1)],"Follow Leader Command",t)}const ig="tribeMigrationCheckCooldown";function Vw(t){const r=new Ee([new le(s=>!!s.leaderId&&s.leaderId===s.id,"Is Tribe Leader",t+2),new le((s,l)=>{var d;const u=(d=s.aiBlackboard)==null?void 0:d.get(ig);return u?l.gameState.time-u>=Dp:!0},"Is Migration Check Cooldown Over",t+2),new ve((s,l)=>{var d;(d=s.aiBlackboard)==null||d.set(ig,l.gameState.time);const u=K1(s,l.gameState);return u?(s.isCallingToFollow=!0,s.callToFollowEndTime=l.gameState.time+jo,s.target=u,s.activeAction="moving",console.log(`Tribe ${s.tribeBadge} led by ${s.id} is migrating to`,u),R.SUCCESS):R.FAILURE},"Execute Tribe Migration",t+2)],"Tribe Migration Strategy",t+1),o=new Ba(r,Nc,"Cache Tribe Migration",t+1);return new Li(Dp,o,"Tribe Migration Cooldown",t)}function Kw(t){return new Ee([new le((r,o)=>{const s=o.gameState.autopilotControls.activeAutopilotAction;return r.isPlayer===!0&&(s==null?void 0:s.action)===ae.AutopilotFollowMe},"Has Autopilot Follow Command",t+1),new ve((r,o)=>{const s=o.gameState.autopilotControls.activeAutopilotAction;if((s==null?void 0:s.action)!==ae.AutopilotFollowMe)return o.gameState.autopilotControls.activeAutopilotAction=void 0,R.FAILURE;const l=s.targetEntityId,u=o.gameState.entities.entities.get(l);return!u||u.type!=="human"||u.id!==u.leaderId?(o.gameState.autopilotControls.activeAutopilotAction=void 0,R.FAILURE):ue(r.position,u.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height)<=im?(o.gameState.autopilotControls.activeAutopilotAction=void 0,r.activeAction==="moving"&&(r.activeAction="idle"),R.SUCCESS):(r.activeAction="moving",r.target=u.id,r.direction=fn(r.position,u.position,o.gameState.mapDimensions),R.RUNNING)},"Execute Autopilot Follow",t+1)],"Autopilot Follow Leader",t)}function Xw(){const t=new Wr([yw(2),Lw(2),Fw(2),Bw(2),Hw(2),xw(2),Gw(2),zw(2),jw(2),$w(2),Ww(2),Kw(2),new ma(kw(3),"Gated Leader Combat Strategy",2),Ow(2),new gi(Iw(3),"attack","Gated Attacking",2),Sw(2),new ng(new gi(Aw(4),"gathering","Gated Gathering",3),Np,"Timeout Gathering",2),new gi(Rw(3),"feedChildren","Gated Feed Child",2),Pw(2),new ng(new gi(Nw(4),"planting","Gated Planting",3),Np,"Timeout Planting",2),new gi(_w(3),"procreation","Gated Procreation",2),new Ba(Uw(3),Nc,"Cache Tribe Split",2),new ma(Vw(3),"Gated Tribe Migration",2),new Ba(Dw(3),Nc,"Cache Establish Territory",2),new gi(Yw(3),"followLeader","Gated Follow Leader",2),new ma(Mw(2),"Gated Follow Patriarch",2),new ma(ww(2),"Gated Idle Wander",2)],"AI Root Selector",1);return new vw(t,"Manual Control Gate",0)}class Qw{constructor(){he(this,"data",new Map);he(this,"nodeExecutionData",new Map)}set(r,o){this.data.set(r,o)}get(r){return this.data.get(r)}delete(r){this.data.delete(r)}has(r){return this.data.has(r)}recordNodeExecution(r,o,s,l,u){const d=this.nodeExecutionData.get(r)||{lastExecuted:0,status:R.FAILURE,depth:0,debugInfo:"",executionHistory:[]},h=d.executionHistory[d.executionHistory.length-1];h&&s-(h==null?void 0:h.time)>$o&&d.executionHistory.push({time:h.time+$o,status:R.NOT_EVALUATED}),d.executionHistory.push({time:s,status:o});const p=pm/bt*Qt,v=s-p;d.executionHistory=d.executionHistory.filter(S=>S.time>=v);const m={...d,lastExecuted:s,status:o,depth:l,debugInfo:u};this.nodeExecutionData.set(r,m)}getNodeExecutionData(){return this.nodeExecutionData}cleanupOldEntries(r){const o=Gy,s=[];for(const[l,u]of this.nodeExecutionData.entries())r-u.lastExecuted>o&&s.push(l);for(const l of s)this.nodeExecutionData.delete(l)}}function bw(t){t.gameState.entities.entities.forEach(o=>{pw(o,t)})}function Rm(){return{entities:new Map,nextEntityId:1}}function sd(t,r,o){const s={id:t.nextEntityId++,type:r,velocity:{x:0,y:0},direction:{x:0,y:0},acceleration:0,forces:[],debuffs:[],...o};return t.entities.set(s.id,s),s}function tl(t,r,o){return sd(t,"berryBush",{position:r,radius:Pc,food:Array.from({length:KS},()=>({type:Bn.Berry})).map(l=>({...l,id:t.nextEntityId++})),maxFood:VS,lifespan:QS,age:0,spreadChance:bS,spreadRadius:Pc,timeSinceLastBerryRegen:0,timeSinceLastSpreadAttempt:0,timeSinceLastHarvest:0,stateMachine:[Mo,{enteredAt:o,previousState:void 0}]})}function Ha(t,r,o,s,l=!1,u=ty,d=Jg,h,p,v=[],m,S){const w=u>=$c;return sd(t,"human",{position:r,radius:w?Zt:Za,hunger:d,hitpoints:Cp,maxHitpoints:Cp,age:u,gender:s,isPlayer:l,food:[],maxFood:qg,maxAge:Go,isAdult:w,isPregnant:!1,gestationTime:0,procreationCooldown:0,attackCooldown:0,motherId:h,fatherId:p,ancestorIds:v,stateMachine:[ct,{enteredAt:o,previousState:void 0}],leaderId:m,tribeBadge:S,aiType:od.BehaviorTreeBased,aiBehaviorTree:Xw(),aiBlackboard:new Qw})}function Zw(t,r,o,s,l,u,d,h,p){return sd(t,"humanCorpse",{position:r,radius:l,gender:o,age:s,originalHumanId:u,timeOfDeath:d,decayProgress:0,food:[...Array.from({length:Math.max(tm*Math.max(yt-p,0)/yt,1)},()=>({type:Bn.Meat})),...h].map(m=>({...m,id:t.nextEntityId++})),stateMachine:void 0})}function qw(t,r,o){const s=r?o.gameState.entities.entities.get(r):void 0,l=[...t.ancestorIds||[],t.id],u=s?[...s.ancestorIds||[],s.id]:[],d=[...l,...u],h=[...new Set(d)],p=h.slice(Math.max(h.length-ZS,0)),v=Math.random()<.5?"male":"female",m=gr(t.position,{x:5,y:5}),S=Ha(o.gameState.entities,m,o.gameState.time,v,!1,0,Jg/2,t.id,r,p,s==null?void 0:s.leaderId,s==null?void 0:s.tribeBadge);return nt(o,Fe.Birth,t.position),S}function ad(t,r){return t.entities.get(r)?(t.entities.delete(r),!0):!1}class Jw{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(r,o){let s=this.length++;for(;s>0;){const l=s-1>>1,u=this.values[l];if(o>=u)break;this.ids[s]=this.ids[l],this.values[s]=u,s=l}this.ids[s]=r,this.values[s]=o}pop(){if(this.length===0)return;const r=this.ids[0];if(this.length--,this.length>0){const o=this.ids[0]=this.ids[this.length],s=this.values[0]=this.values[this.length],l=this.length>>1;let u=0;for(;u<l;){let d=(u<<1)+1;const h=d+1;let p=this.ids[d],v=this.values[d];const m=this.values[h];if(h<this.length&&m<v&&(d=h,p=this.ids[h],v=m),v>=s)break;this.ids[u]=p,this.values[u]=v,u=d}this.ids[u]=o,this.values[u]=s}return r}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}const og=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],mc=3;class ld{static from(r,o=0){if(o%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!r||r.byteLength===void 0||r.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[s,l]=new Uint8Array(r,o+0,2);if(s!==251)throw new Error("Data does not appear to be in a Flatbush format.");const u=l>>4;if(u!==mc)throw new Error(`Got v${u} data when expected v${mc}.`);const d=og[l&15];if(!d)throw new Error("Unrecognized array type.");const[h]=new Uint16Array(r,o+2,1),[p]=new Uint32Array(r,o+4,1);return new ld(p,h,d,void 0,r,o)}constructor(r,o=16,s=Float64Array,l=ArrayBuffer,u,d=0){if(r===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(r)||r<=0)throw new Error(`Unexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+o,2),65535),this.byteOffset=d;let h=r,p=h;this._levelBounds=[h*4];do h=Math.ceil(h/this.nodeSize),p+=h,this._levelBounds.push(p*4);while(h!==1);this.ArrayType=s,this.IndexArrayType=p<16384?Uint16Array:Uint32Array;const v=og.indexOf(this.ArrayType),m=p*4*this.ArrayType.BYTES_PER_ELEMENT;if(v<0)throw new Error(`Unexpected typed array class: ${s}.`);u&&u.byteLength!==void 0&&!u.buffer?(this.data=u,this._boxes=new this.ArrayType(this.data,d+8,p*4),this._indices=new this.IndexArrayType(this.data,d+8+m,p),this._pos=p*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1]):(this.data=new l(8+m+p*this.IndexArrayType.BYTES_PER_ELEMENT),this._boxes=new this.ArrayType(this.data,8,p*4),this._indices=new this.IndexArrayType(this.data,8+m,p),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(this.data,0,2).set([251,(mc<<4)+v]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=r),this._queue=new Jw}add(r,o,s=r,l=o){const u=this._pos>>2,d=this._boxes;return this._indices[u]=u,d[this._pos++]=r,d[this._pos++]=o,d[this._pos++]=s,d[this._pos++]=l,r<this.minX&&(this.minX=r),o<this.minY&&(this.minY=o),s>this.maxX&&(this.maxX=s),l>this.maxY&&(this.maxY=l),u}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const r=this._boxes;if(this.numItems<=this.nodeSize){r[this._pos++]=this.minX,r[this._pos++]=this.minY,r[this._pos++]=this.maxX,r[this._pos++]=this.maxY;return}const o=this.maxX-this.minX||1,s=this.maxY-this.minY||1,l=new Uint32Array(this.numItems),u=65535;for(let d=0,h=0;d<this.numItems;d++){const p=r[h++],v=r[h++],m=r[h++],S=r[h++],w=Math.floor(u*((p+m)/2-this.minX)/o),P=Math.floor(u*((v+S)/2-this.minY)/s);l[d]=t_(w,P)}Mc(l,r,this._indices,0,this.numItems-1,this.nodeSize);for(let d=0,h=0;d<this._levelBounds.length-1;d++){const p=this._levelBounds[d];for(;h<p;){const v=h;let m=r[h++],S=r[h++],w=r[h++],P=r[h++];for(let k=1;k<this.nodeSize&&h<p;k++)m=Math.min(m,r[h++]),S=Math.min(S,r[h++]),w=Math.max(w,r[h++]),P=Math.max(P,r[h++]);this._indices[this._pos>>2]=v,r[this._pos++]=m,r[this._pos++]=S,r[this._pos++]=w,r[this._pos++]=P}}}search(r,o,s,l,u){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let d=this._boxes.length-4;const h=[],p=[];for(;d!==void 0;){const v=Math.min(d+this.nodeSize*4,ag(d,this._levelBounds));for(let m=d;m<v;m+=4){if(s<this._boxes[m]||l<this._boxes[m+1]||r>this._boxes[m+2]||o>this._boxes[m+3])continue;const S=this._indices[m>>2]|0;d>=this.numItems*4?h.push(S):(u===void 0||u(S))&&p.push(S)}d=h.pop()}return p}neighbors(r,o,s=1/0,l=1/0,u){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let d=this._boxes.length-4;const h=this._queue,p=[],v=l*l;e:for(;d!==void 0;){const m=Math.min(d+this.nodeSize*4,ag(d,this._levelBounds));for(let S=d;S<m;S+=4){const w=this._indices[S>>2]|0,P=sg(r,this._boxes[S],this._boxes[S+2]),k=sg(o,this._boxes[S+1],this._boxes[S+3]),O=P*P+k*k;O>v||(d>=this.numItems*4?h.push(w<<1,O):(u===void 0||u(w))&&h.push((w<<1)+1,O))}for(;h.length&&h.peek()&1;)if(h.peekValue()>v||(p.push(h.pop()>>1),p.length===s))break e;d=h.length?h.pop()>>1:void 0}return h.clear(),p}}function sg(t,r,o){return t<r?r-t:t<=o?0:t-o}function ag(t,r){let o=0,s=r.length-1;for(;o<s;){const l=o+s>>1;r[l]>t?s=l:o=l+1}return r[o]}function Mc(t,r,o,s,l,u){if(Math.floor(s/u)>=Math.floor(l/u))return;const d=t[s+l>>1];let h=s-1,p=l+1;for(;;){do h++;while(t[h]<d);do p--;while(t[p]>d);if(h>=p)break;e_(t,r,o,h,p)}Mc(t,r,o,s,p,u),Mc(t,r,o,p+1,l,u)}function e_(t,r,o,s,l){const u=t[s];t[s]=t[l],t[l]=u;const d=4*s,h=4*l,p=r[d],v=r[d+1],m=r[d+2],S=r[d+3];r[d]=r[h],r[d+1]=r[h+1],r[d+2]=r[h+2],r[d+3]=r[h+3],r[h]=p,r[h+1]=v,r[h+2]=m,r[h+3]=S;const w=o[s];o[s]=o[l],o[l]=w}function t_(t,r){let o=t^r,s=65535^o,l=65535^(t|r),u=t&(r^65535),d=o|s>>1,h=o>>1^o,p=l>>1^s&u>>1^l,v=o&l>>1^u>>1^u;o=d,s=h,l=p,u=v,d=o&o>>2^s&s>>2,h=o&s>>2^s&(o^s)>>2,p^=o&l>>2^s&u>>2,v^=s&l>>2^(o^s)&u>>2,o=d,s=h,l=p,u=v,d=o&o>>4^s&s>>4,h=o&s>>4^s&(o^s)>>4,p^=o&l>>4^s&u>>4,v^=s&l>>4^(o^s)&u>>4,o=d,s=h,l=p,u=v,p^=o&l>>8^s&u>>8,v^=s&l>>8^(o^s)&u>>8,o=p^p>>1,s=v^v>>1;let m=t^r,S=s|65535^(m|o);return m=(m|m<<8)&16711935,m=(m|m<<4)&252645135,m=(m|m<<2)&858993459,m=(m|m<<1)&1431655765,S=(S|S<<8)&16711935,S=(S|S<<4)&252645135,S=(S|S<<2)&858993459,S=(S|S<<1)&1431655765,(S<<1|m)>>>0}function vc(t,r){if(t.length===0)return{byRect:()=>[],byRadius:()=>[],byProperty:()=>[],resetPropertyCache:()=>{}};const o=new ld(t.length),s=new Map;for(const u of t)o.add(u.position.x,u.position.y,u.position.x,u.position.y);return o.finish(),{byRect(u){return o.search(u.left,u.top,u.right,u.bottom).map(h=>t[h])},byRadius(u,d){return o.neighbors(u.x,u.y,void 0,d).map(p=>t[p])},byProperty(u,d){var h;if(!s.has(u)){const p=new Map;for(const v of t){const m=v[u];p.has(m)||p.set(m,[]),p.get(m).push(v)}s.set(u,p)}return((h=s.get(u))==null?void 0:h.get(d))||[]},resetPropertyCache(){s.clear()}}}function ud(t){const r=Array.from(t.entities.entities.values()),o=r.filter(d=>d.type==="human"),s=r.filter(d=>d.type==="berryBush"),l=r.filter(d=>d.type==="humanCorpse");return{...t,search:{human:vc(o),berryBush:vc(s),humanCorpse:vc(l)}}}var fr=(t=>(t.MOVE="MOVE",t.HUNGER="HUNGER",t.EAT="EAT",t.FIND_BUSH="FIND_BUSH",t.GATHER="GATHER",t.PROCREATE="PROCREATE",t.PLANT_BUSH="PLANT_BUSH",t))(fr||{}),Xo=(t=>(t.HUNGER_BAR="HUNGER_BAR",t.FOOD_BAR="FOOD_BAR",t))(Xo||{}),Et=(t=>(t[t.FADING_IN=0]="FADING_IN",t[t.ACTIVE=1]="ACTIVE",t[t.FADING_OUT=2]="FADING_OUT",t[t.INACTIVE=3]="INACTIVE",t))(Et||{});const n_=[{key:fr.MOVE,title:"Movement",text:"Use WASD or Arrow Keys to move your character around the world.",condition:t=>t.hasPlayerMovedEver,isCompleted:!1},{key:fr.HUNGER,title:"Hunger",text:"Your character gets hungry over time. Watch the hunger bar!",condition:(t,r)=>r.hunger>qS,isCompleted:!1,minDisplayTime:Yp,highlightedUIElements:[Xo.HUNGER_BAR]},{key:fr.FIND_BUSH,title:"Find Food",text:"Look for berry bushes. They are your primary source of food.",condition:(t,r)=>!!dt(r,t,"berryBush",ft*5,s=>s.food.length>0),getTargets:(t,r)=>{const o=[];for(const s of t.entities.entities.values())s.type==="berryBush"&&s.food.length>0&&ue(r.position,s.position,t.mapDimensions.width,t.mapDimensions.height)<500&&o.push(s);return o.map(s=>s.id)},isCompleted:!1,minDisplayTime:Yp},{key:fr.GATHER,title:"Gather Berries",text:"Get close to a bush and press 'E' to gather berries.",condition:(t,r)=>r.food.length>0,getTargets:(t,r)=>{const o=dt(r,t,"berryBush",ft,s=>s.food.length>0);return o?[o.id]:[]},isCompleted:!1},{key:fr.EAT,title:"Eat",text:"When you are hungry and have food, press 'F' to eat.",condition:(t,r)=>r.activeAction==="eating",isCompleted:!1,highlightedUIElements:[Xo.FOOD_BAR]},{key:fr.PROCREATE,title:"Procreate",text:"Find a mate and press 'R' to start a family. This is how you continue your lineage.",condition:(t,r)=>Dt(t,r).length>0,getTargets:(t,r)=>{const o=dt(r,t,"human",ft,s=>{const l=s;return(l.id!==r.id&&l.gender!==r.gender&&l.isAdult&&r.isAdult&&l.hunger<yt&&r.hunger<yt&&(l.procreationCooldown||0)<=0&&(r.procreationCooldown||0)<=0&&(l.gender==="female"?!l.isPregnant&&l.age<=Ln:!r.isPregnant))??!1});return o?[o.id]:[]},isCompleted:!1},{key:fr.PLANT_BUSH,title:"Farming",text:"You can plant new berry bushes. Carry some berries and press 'B' to plant.",condition:(t,r)=>qc(t,r).some(s=>s.type===ae.Plant)||t.hasPlayerPlantedBush===!0,isCompleted:!1}];function Pm(){return{steps:n_.map(t=>({...t,isCompleted:!1}))}}function Nm(){return{currentStepIndex:0,completedSteps:new Set,isActive:!0,transitionState:Et.FADING_IN,transitionAlpha:0,highlightedEntityIds:new Set,stepStartTime:null,activeUIHighlights:new Set}}function r_(t){for(let r=0;r<t.tutorial.steps.length;r++){const o=t.tutorial.steps[r];if(!o.isCompleted)if(o.dependsOn){if(t.tutorialState.completedSteps.has(o.dependsOn))return r}else return r}return null}function i_(t,r){const o=t.tutorialState;if(!o.isActive){o.transitionState=Et.INACTIVE,o.highlightedEntityIds.clear(),o.activeUIHighlights.clear();return}const s=It(t);if(!s){o.isActive=!1,o.transitionState=Et.INACTIVE,o.highlightedEntityIds.clear(),o.activeUIHighlights.clear();return}const l=t.tutorial.steps[o.currentStepIndex];if(!l){o.isActive=!1,o.transitionState=Et.INACTIVE,o.highlightedEntityIds.clear(),o.activeUIHighlights.clear();return}const u=1/u1;switch(o.transitionState){case Et.FADING_IN:o.stepStartTime===null&&(o.stepStartTime=t.time),o.transitionAlpha+=u*r,o.transitionAlpha>=1&&(o.transitionAlpha=1,o.transitionState=Et.ACTIVE);break;case Et.ACTIVE:{t.time-(o.stepStartTime||t.time)>=(l.minDisplayTime||0)&&l.condition(t,s)&&(l.isCompleted=!0,o.completedSteps.add(l.key),o.transitionState=Et.FADING_OUT);break}case Et.FADING_OUT:if(o.transitionAlpha-=u*r,o.transitionAlpha<=0){o.transitionAlpha=0,o.stepStartTime=null;const h=r_(t);h!==null?(o.currentStepIndex=h,o.transitionState=Et.FADING_IN):(o.isActive=!1,o.transitionState=Et.INACTIVE)}break}o.transitionState!==Et.FADING_OUT&&o.transitionState!==Et.INACTIVE?(l.getTargets?o.highlightedEntityIds=new Set(l.getTargets(t,s)):o.highlightedEntityIds.clear(),l.highlightedUIElements?o.activeUIHighlights=new Set(l.highlightedUIElements):o.activeUIHighlights.clear()):(o.highlightedEntityIds.clear(),o.activeUIHighlights.clear())}function o_(){const t=Rm(),r=0;for(let m=0;m<Xg;m++){const S={x:Math.random()*Hr,y:Math.random()*xr};tl(t,S,r)}const o=Hr/2,s=xr/2,l=Ha(t,{x:o,y:s},r,"male",!0);Ha(t,{x:o+50,y:s},r,"female",!1);const u=[{id:"muteButton",action:De.ToggleMute,currentWidth:_i,rect:{x:0,y:0,width:0,height:0},text:"",backgroundColor:"",textColor:Ei},{id:"pauseButton",action:De.TogglePause,currentWidth:_i,rect:{x:0,y:0,width:0,height:0},text:"",backgroundColor:"",textColor:Ei}],d=Pm(),h=Nm(),p={time:r,entities:t,mapDimensions:{width:Hr,height:xr},generationCount:1,gameOver:!1,visualEffects:[],nextVisualEffectId:0,viewportCenter:{...l.position},isPaused:!1,autopilotControls:{behaviors:{procreation:!1,planting:!1,gathering:!1,attack:!1,feedChildren:!0,followLeader:!1},hoveredAutopilotAction:void 0,activeAutopilotAction:void 0,isManuallyMoving:!1},hasPlayerMovedEver:!1,masterVolume:vm,isMuted:!1,uiButtons:u,tutorial:d,tutorialState:h,hoveredButtonId:void 0,mousePosition:{x:0,y:0}},v=ud(p);return console.log("Game world initialized:",v),v}function s_(){const t=Rm(),r=0;for(let u=0;u<Xg;u++){const d={x:Math.random()*Hr,y:Math.random()*xr};tl(t,d,r)}for(let u=0;u<g1;u++){const d={x:Math.random()*Hr,y:Math.random()*xr},h=Math.random()<.5?"male":"female";Ha(t,d,r,h,!1)}const o=Pm(),s=Nm(),l={time:r,entities:t,mapDimensions:{width:Hr,height:xr},generationCount:0,gameOver:!1,visualEffects:[],nextVisualEffectId:0,viewportCenter:{x:Hr/2,y:xr/2},isPaused:!1,autopilotControls:{behaviors:{procreation:!1,planting:!1,gathering:!1,attack:!1,feedChildren:!0,followLeader:!1},hoveredAutopilotAction:void 0,activeAutopilotAction:void 0,isManuallyMoving:!1},hasPlayerMovedEver:!1,masterVolume:vm,isMuted:!0,uiButtons:[],tutorial:o,tutorialState:s,hoveredButtonId:void 0,mousePosition:{x:0,y:0}};return ud(l)}const a_="humanProcreation",l_="human",u_="human",c_=ft,d_=(t,r)=>{if(t.id===r.id||t.gender===r.gender)return!1;const o=(s,l)=>s.isAdult&&s.hunger<yt&&(s.procreationCooldown||0)<=0?l?!s.isPregnant&&s.age<=Ln:!0:!1;return t.gender==="male"?!o(t,!1)||!o(r,!0)?!1:t.activeAction==="procreating":!o(t,!0)||!o(r,!1)?!1:t.activeAction==="procreating"&&r.activeAction==="procreating"},f_=(t,r,o)=>{var p,v;const{gameState:s}=o,l={x:(t.position.x+r.position.x)/2,y:(t.position.y+r.position.y)/2},u=t.gender==="male"?t:r,d=t.gender==="female"?t:r,h=(u.partnerIds||[]).length===0;if(t.stateMachine=[Ko,{partnerId:r.id,previousState:(p=t.stateMachine)==null?void 0:p[0]}],r.stateMachine=[Ko,{partnerId:t.id,previousState:(v=r.stateMachine)==null?void 0:v[0]}],t.partnerIds||(t.partnerIds=[]),t.partnerIds.includes(r.id)||t.partnerIds.push(r.id),r.partnerIds||(r.partnerIds=[]),r.partnerIds.includes(t.id)||r.partnerIds.push(t.id),h&&u.leaderId&&u.leaderId!==u.id){const m=s.entities.entities.get(u.leaderId);if(m){const S=Oc(u,m),w=Oc(d,m);if(!S&&!w){const P=Dc();u.leaderId=u.id,u.tribeBadge=P,d.leaderId=u.id,d.tribeBadge=P}}}else if(!t.leaderId&&!r.leaderId&&u&&d){const m=Dc();u.leaderId=u.id,u.tribeBadge=m,d.leaderId=u.id,d.tribeBadge=m}t.activeAction=void 0,rt(s,_e.Procreation,l,ko),rt(s,_e.Partnered,t.position,qt,t.id),rt(s,_e.Partnered,r.position,qt,r.id),t.lastPartneredEffectTime=s.time,r.lastPartneredEffectTime=s.time,r.activeAction=void 0,nt(o,Fe.Procreate,l)},h_={id:a_,sourceType:l_,targetType:u_,maxDistance:c_,checker:d_,perform:f_},p_={id:"humanChildFeeding",sourceType:"human",targetType:"human",maxDistance:jc,checker:(t,r)=>t.isAdult===!0&&t.food.length>0&&(!t.feedChildCooldownTime||t.feedChildCooldownTime<=0)&&r.isAdult===!1&&(r.motherId===t.id||r.fatherId===t.id)&&r.hunger>=Ka,perform:(t,r,o)=>{t.food.pop(),r.hunger=Math.max(0,r.hunger-zo),t.feedChildCooldownTime=uy,(!r.lastChildFedEffectTime||o.gameState.time-r.lastChildFedEffectTime>2)&&(rt(o.gameState,_e.ChildFed,r.position,qt,r.id),r.lastChildFedEffectTime=o.gameState.time),nt(o,Fe.ChildFed,r.position)}},g_={id:"human-attack",sourceType:"human",targetType:"human",maxDistance:Xa,checker:(t,r,o)=>{var u;if(((u=t.stateMachine)==null?void 0:u[0])!==Ui||t.attackTargetId!==r.id||(t.attackCooldown||0)>0)return!1;const s=t.stateMachine[1];return o.gameState.time-s.attackStartTime>=nm},perform:(t,r,o)=>{const s=Gt(t.position,r.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height),l=w1(tn(s),r.direction);if(Math.abs(l)<Iy*Math.PI/180&&Math.random()<Ty)rt(o.gameState,_e.AttackDeflected,r.position,qt,r.id);else{let h=gy;t.gender==="male"&&(h*=wy),t.isAdult||(h*=_y),(!r.isAdult||r.age>=em)&&t.isAdult&&(h*=Ey),r.hitpoints-=h,r.movementSlowdown={modifier:vy,endTime:o.gameState.time+Sy},rt(o.gameState,_e.Hit,r.position,qt,r.id);const v=Gt(t.position,r.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height),m=wn(v,my);r.forces.push(m),r.hitpoints<=0?nt(o,Fe.HumanDeath,r.position):nt(o,Fe.Attack,t.position)}t.attackCooldown=rm;const d=t.stateMachine[1];d.attackStartTime=o.gameState.time,rt(o.gameState,_e.Attack,t.position,qt,t.id)}},m_={id:"human-collision",sourceType:"human",targetType:"human",maxDistance:Zt*2,checker:(t,r,{gameState:o})=>ue(t.position,r.position,o.mapDimensions.width,o.mapDimensions.height)<(t.radius+r.radius)/3,perform:(t,r,{gameState:o})=>{const s=ue(t.position,r.position,o.mapDimensions.width,o.mapDimensions.height);if(s===0){t.forces.push({x:.1,y:0}),r.forces.push({x:-.1,y:0});return}const u=(t.radius+r.radius-s)*.05,d=tn(ym(t.position,r.position)),h=wn(d,u);t.forces.push(h),r.forces.push(wn(h,-1))}},v_={id:"humanBerryBushGather",sourceType:"human",targetType:"berryBush",maxDistance:ft,checker:(t,r,o)=>{var s;return t.isAdult&&r.food.length>0&&((s=t.stateMachine)==null?void 0:s[0])===el&&t.food.length<t.maxFood&&(!t.gatheringCooldownTime||t.gatheringCooldownTime<o.gameState.time)||!1},perform:(t,r,o)=>{const s=r.food.pop();s&&t.food.push(s),t.gatheringCooldownTime=o.gameState.time+1,r.timeSinceLastHarvest=o.gameState.time,r.ownerId=t.id,r.claimedUntil=o.gameState.time+Qg,rt(o.gameState,_e.BushClaimed,r.position,qt),nt(o,Fe.Gather,t.position)}},S_={id:"humanCorpseGather",sourceType:"human",targetType:"humanCorpse",maxDistance:ft,checker:(t,r,o)=>{var s;return t.isAdult&&r.food.length>0&&((s=t.stateMachine)==null?void 0:s[0])===el&&t.food.length<t.maxFood&&(!t.gatheringCooldownTime||t.gatheringCooldownTime<o.gameState.time)||!1},perform:(t,r,o)=>{const s=r.food.pop();s&&t.food.push(s),t.gatheringCooldownTime=o.gameState.time+1,nt(o,Fe.Gather,t.position)}},y_=[v_,S_],A_=[m_,...y_,h_,p_,g_];function w_(t){const{gameState:r}=t,o=r,s=Array.from(r.entities.entities.values());for(const l of A_)for(const u of s){if(l.sourceType&&u.type!==l.sourceType)continue;const d=o.search[l.targetType].byRadius(u.position,l.maxDistance);for(const h of d){if(u.id===h.id)continue;ue(u.position,h.position,r.mapDimensions.width,r.mapDimensions.height)<=l.maxDistance&&l.checker(u,h,t)&&l.perform(u,h,t)}}}function __(t){t.visualEffects=t.visualEffects.filter(r=>t.time-r.startTime<=r.duration)}const E_=1/60;function I_(t,r){const o=It(t);o&&(t.viewportCenter=Xc(t.viewportCenter,o.position,Wc*r))}function nl(t,r){if(t.isPaused)return t;for(;r>0;){const o=ud(t),s=Math.min(r,E_);if(o.gameOver)return o;const l=s*(Qt/bt);o.time+=l,I_(o,s),bw({gameState:o,deltaTime:s}),w_({gameState:o,deltaTime:s}),__(o),i_(o,s),t=o,r-=s}return t}function lg(t,r,o){t.save();const{x:s,y:l,width:u,height:d}=r.rect,h=LA;if(t.beginPath(),t.moveTo(s+h,l),t.lineTo(s+u-h,l),t.quadraticCurveTo(s+u,l,s+u,l+h),t.lineTo(s+u,l+d-h),t.quadraticCurveTo(s+u,l+d,s+u-h,l+d),t.lineTo(s+h,l+d),t.quadraticCurveTo(s,l+d,s,l+d-h),t.lineTo(s,l+h),t.quadraticCurveTo(s,l,s+h,l),t.closePath(),t.fillStyle=r.isDisabled?HA:r.backgroundColor,t.fill(),r.activated){t.save();const p=(Math.sin(Date.now()/1e3*jA)+1)/2;t.strokeStyle=$A,t.lineWidth=2+p*2,t.globalAlpha=.7+p*.3,t.stroke(),t.restore()}if(r.lastActivated){const p=Date.now()-r.lastActivated;if(p<Bp){const v=1-p/Bp;t.fillStyle=GA,t.globalAlpha=v,t.fill(),t.globalAlpha=1}}o&&!r.isDisabled&&(t.fillStyle=BA,t.globalAlpha=.5,t.fill(),t.globalAlpha=1),t.fillStyle=r.isDisabled?xA:r.textColor,r.icon?(t.font=`${d*.55}px "Press Start 2P", Arial`,t.textAlign="center",t.textBaseline="middle",t.fillText(r.icon,s+u/2,l+d/2),r.text&&(t.font=`${d*.18}px "Press Start 2P", Arial`,t.textAlign="right",t.textBaseline="bottom",t.fillText(r.text,s+u-4,l+d-2))):(t.textAlign="center",t.textBaseline="middle",t.fillText(r.text,s+u/2,l+d/2)),t.restore()}function T_(t,r,o,s){t.save(),t.font=`${Hp}px "Press Start 2P", Arial`,t.textAlign="center",t.textBaseline="bottom";const u=t.measureText(o).width,d=Hp,h=u+xp*2,p=d+xp*2,v=s.x-h/2,m=t.canvas.height,S=r.y<m/2?r.y+r.height-Gp:r.y-p+Gp;t.fillStyle=zA,t.fillRect(v,S,h,p),t.fillStyle=WA,t.fillText(o,s.x,S+p/2+d/2),t.restore()}function C_(t,r,o){t.save();const s=It(r);r.uiButtons=[];const l=[{id:"fastForwardButton",action:De.FastForward,text:"FFWD [T]",currentWidth:_i*1.3,backgroundColor:fa,textColor:Ei,tooltip:"Fast-forward time",rect:{x:0,y:0,width:0,height:0}},{id:"pauseButton",action:De.TogglePause,text:r.isPaused?"UN[P]AUSE":"[P]AUSE",backgroundColor:r.isPaused?ic:fa,currentWidth:r.isPaused?_i*1.4:_i*1.1,tooltip:r.isPaused?"Resume Game":"Pause Game",rect:{x:0,y:0,width:0,height:0},textColor:Ei},{id:"muteButton",action:De.ToggleMute,text:r.isMuted?"UN[M]UTE":"[M]UTE",backgroundColor:r.isMuted?ic:fa,tooltip:`Toggle Sound (${r.isMuted?"Muted":"Enabled"})`,currentWidth:_i,rect:{x:0,y:0,width:0,height:0},textColor:Ei}];if(r.uiButtons.push(...l),s){const h=qc(r,s),p=new Set(h.map(I=>I.type));let v=[{playerAction:ae.Gather,buttonAction:De.CommandGather,shortcut:"E",name:"Gather",toggleKey:"gathering",condition:()=>s.isAdult===!0},{playerAction:ae.Eat,buttonAction:De.CommandEat,shortcut:"F",name:"Eat"},{playerAction:ae.Plant,buttonAction:De.CommandPlant,shortcut:"B",name:"Plant",toggleKey:"planting",condition:()=>s.isAdult===!0},{playerAction:ae.Procreate,buttonAction:De.ToggleProcreationBehavior,shortcut:"R",name:"Procreation",toggleKey:"procreation",condition:()=>s.isAdult===!0},{playerAction:ae.FeedChildren,buttonAction:De.ToggleFeedChildrenBehavior,shortcut:"H",name:"Feed Children",toggleKey:"feedChildren",condition:()=>s.isAdult===!0},{playerAction:ae.Attack,buttonAction:De.ToggleAttackBehavior,shortcut:"Q",name:"Attack",toggleKey:"attack",condition:()=>s.isAdult===!0},{playerAction:ae.FollowMe,buttonAction:De.CommandFollowMe,shortcut:"C",name:"Follow Me",toggleKey:"followLeader",condition:()=>s.isAdult===!0},{playerAction:ae.CallToAttack,buttonAction:De.CommandCallToAttack,shortcut:"V",name:"Call to Attack",condition:()=>s.isAdult===!0},{playerAction:ae.TribeSplit,buttonAction:De.CommandTribeSplit,shortcut:"K",name:"Split Tribe",condition:()=>s.leaderId!==void 0&&s.leaderId!==s.id&&s.isAdult===!0}];v=v.filter(I=>I.condition?I.condition():!0);const m=1,S=v.length,w=S*Mr+(S-1)*pa,P=m*Mr+(m-1)*pa,k=(o-w)/2,O=t.canvas.height-P-20;v.forEach((I,G)=>{const z=G%S,W=Math.floor(G/S),j=k+z*(Mr+pa),de=O+W*(Mr+pa),F=!!I.toggleKey,$=F&&r.autopilotControls.behaviors[I.toggleKey],Pe=!p.has(I.playerAction),Me=r.hasPlayerEnabledAutopilot?"":" (Press Shift to toggle Auto)",Ve=F?`${I.name}${Me}`:I.name,Je=$?ic:fa,Le={id:`commandButton_${I.name}`,action:I.buttonAction,rect:{x:j,y:de,width:Mr,height:Mr},icon:Ja[I.playerAction],text:I.shortcut,backgroundColor:Je,textColor:Ei,currentWidth:Mr,tooltip:Ve,isDisabled:Pe,activated:$};r.uiButtons.push(Le)})}let u=o-Ot;l.forEach(h=>{const p=Ot,v=u-h.currentWidth;h.rect={x:v,y:p,width:h.currentWidth,height:UA},lg(t,h,r.hoveredButtonId===h.id),u-=h.currentWidth+FA}),r.uiButtons.filter(h=>h.id.startsWith("commandButton_")).forEach(h=>{lg(t,h,r.hoveredButtonId===h.id)});const d=r.hoveredButtonId?r.uiButtons.find(h=>h.id===r.hoveredButtonId):void 0;d&&d.tooltip&&r.mousePosition&&T_(t,d.rect,d.tooltip,r.mousePosition),t.restore()}function R_(t){t.save(),t.fillStyle=t1,t.fillRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle=n1,t.font=`${r1}px "Press Start 2P", Arial`,t.textAlign="center",t.textBaseline="middle",t.fillText("PAUSED",t.canvas.width/2,t.canvas.height/2),t.restore()}const P_=25,N_=0,ug=28;function km(t,r,o,s,l,u,d,h,p){t.save();const v=r.x-d.x+h/2,m=r.y-d.y+p/2;t.strokeStyle=s,t.lineWidth=u,t.setLineDash(l),t.beginPath(),t.arc(v,m,o+qa,0,2*Math.PI),t.stroke(),t.restore()}function k_(t,r,o,s,l,u){if(r=r.filter(m=>m.type!==ae.FollowMe),r.length===0)return;t.save(),r.forEach(m=>{m.targetEntity&&km(t,m.targetEntity.position,m.targetEntity.radius,Vc,Kc,2,s,l,u)}),t.font=`${Oi}px "Press Start 2P", Arial`,t.fillStyle="white",t.textAlign="center",t.textBaseline="bottom",t.shadowColor="black",t.shadowBlur=5;const d=o.position.x-s.x+l/2,h=o.position.y-s.y+u/2;let p=0,v={};r.forEach(m=>{const S=Ja[m.type];if(m.targetEntity){v[m.targetEntity.id]=(v[m.targetEntity.id]||0)+1;const w=m.targetEntity.position.x-s.x+l/2,P=m.targetEntity.position.y-s.y+u/2,k=`${S}${m.key.toUpperCase()}`,O=P-m.targetEntity.radius-qa-Oi/2-(v[m.targetEntity.id]-1)*ug;t.fillText(k,w,O)}else{t.textAlign="left";const w=`${S}${m.key.toUpperCase()}`,P=d+P_,O=h+N_+p*ug;t.fillText(w,P,O),p++,t.textAlign="center"}}),t.restore()}const re=(t,r,o,s,l,u,d)=>{u==="transparent"||s<=0||l<=0||(t.fillStyle=u,t.fillRect(Math.floor(r*d),Math.floor(o*d),Math.ceil(s*d),Math.ceil(l*d)))},cg=10,dg=10,Sn=6,Un=4,Ea=2,O_=5,Xt=4,D_=2,vt=4,M_=2,We=3,vi=2,hr=0,Lo=hr+Un-1,_t=Lo,Qe=Lo+Xt-1,U_="rgba(0, 0, 0, 0.4)",F_=4,L_=1,cd={name:"tribe-human-2d",referenceImage:"swos.png",description:`A 2D human character asset for the Tribe game. This includes ensuring that the unique animations for stances like 'eat' and 'procreate' do not erroneously appear in other stances, such as 'walk', which was observed in the provided rendered media. The 'idle' animation was updated to a leg sway to better match the provided video for that stance, replacing a simpler body bob.

# Visual style

Human characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like people from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the character to give it a sense of depth.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 1 and 60, with 20 being the average age.
- gender: 
  - The male characters should have only pants, while female cover their breasts with a top. The clothing should be simple and muted, reflecting a stone-age style.
  - Female characters should have long hair, while male should have short hair and beard.
  - Male characters should have a more robust, muscular build
  - Female characters should have thinner arms and legs, with a more pronounced waist and hips.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'gathering': The character is gathering food from berry bushes, with arms reaching out and a slight bend at the knees.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or dust particles to indicate movement.
- 'attacking': The character performs an attack animation, with arms raised and a forward motion.
- 'defending': The character takes a defensive stance, with arms raised and a slight bend at the knees.
- 'stunned': The character is stunned and laying on the ground, with limbs relaxed and a neutral expression.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a skeleton over time.

`,stances:["idle","walk","gathering","eat","procreate","dead","attacking","defending","stunned"],render(t,r,o,s,l,u,d,h="male",p=20,v=[1,0],m=!1,S=0){const w=["dead","stunned"].includes(d),P=w?dg+4:cg,k=w?cg+4:dg+We,O=.15,I=Math.min(s*(1-2*O)/P,l*(1-2*O)/k),G=P*I,z=k*I,W=r+(s-G)/2,j=o+(l-z)/2;t.save(),v[0]<0&&!w?(t.translate(W+G,j),t.scale(-1,1)):t.translate(W,j);const F="#D09A5A",$=p>50?"#BDBDBD":"#281808",Pe="#7F5C4A",Me="#6B4F3A",Ve="#E0D8C0",Je="#A0522D",Le=1-Math.max(0,Math.min(100,S))/100*.2,Ge=h==="male"?1.1:.9,we=.8+(Math.max(1,Math.min(p,60))-1)/59*.2;let Ce=O_*Le*Ge*we,pe=D_*Le*Ge*we,ie=M_*Le*we;m&&h==="female"&&(Ce*=1.5);const H=Math.round((P-Ce)/2),V=Math.round((P-Sn)/2),x=H-pe,E=H+Ce,D=1,te=H+(Ce/2-D/2)-ie,q=H+(Ce/2+D/2),Se=v[1]<-.2&&Math.abs(v[0])<.7,oe=X=>{t.fillStyle=U_,t.beginPath();const ne=P/2,Ne=X;t.ellipse(Math.floor(ne*I),Math.floor(Ne*I),Math.max(1,Math.floor(F_*I)),Math.max(1,Math.floor(L_*I)),0,0,2*Math.PI),t.fill()},ge=(X,ne)=>{h==="male"?(re(t,H,Lo+X,Ce,Xt-vi,ne,I),re(t,H,Lo+Xt-vi+X,Ce,vi,Pe,I)):re(t,H,Lo+X,Ce,Xt,Me,I)},fe=(X,ne)=>{Se?re(t,V,hr+X,Sn,Un,$,I):(re(t,V,hr+X,Sn,Un,ne,I),re(t,V,hr+X,Sn,Ea,$,I),h==="female"?(re(t,V-1,hr+Ea+X,1,Un,$,I),re(t,V+Sn,hr+Ea+X,1,Un,$,I)):re(t,V+1,hr+2+X,Sn-2,Un-2,$,I))};switch(d){case"idle":{const X=u*Math.PI*2,ne=Math.sin(X)*.5,ce=(Math.cos(X*2)+1)*.25;oe(Qe+We+1),re(t,te+ne,Qe+ce,ie,We,F,I),re(t,q-ne,Qe+ce,ie,We,F,I),ge(ce,F),re(t,x,_t+ce,pe,vt,F,I),re(t,E,_t+ce,pe,vt,F,I),fe(ce,F);break}case"walk":{const X=u*Math.PI*2,ne=Math.sin(X)*2,ce=Math.abs(Math.cos(X))*1;oe(Qe+We+1),re(t,te+ne,Qe+ce,ie,We,F,I),re(t,q-ne,Qe+ce,ie,We,F,I),ge(ce,F),re(t,x-ne,_t+ce,pe,vt,F,I),re(t,E+ne,_t+ce,pe,vt,F,I),fe(ce,F);break}case"gathering":{const X=u*Math.PI*2,ne=1,Ne=(Math.sin(X)+1)/2*2,ce=ne+Math.abs(Math.cos(X))*.5;oe(Qe+We+1),re(t,te,Qe+ce,ie,We-ne,F,I),re(t,q,Qe+ce,ie,We-ne,F,I),ge(ce,F),re(t,x+1,_t+ce-Ne,pe,vt,F,I),re(t,E-1,_t+ce-Ne,pe,vt,F,I),fe(ce,F);break}case"eat":{oe(Qe+We+1),re(t,te,Qe+1,ie,We-1,F,I),re(t,q,Qe+1,ie,We-1,F,I),ge(1,F);const Ne=(Math.sin(u*Math.PI*4)+1)/2,ce=V+Sn/2,En=hr+Un/2,Mt=E+(ce-E)*Ne,zt=_t+1+(En-(_t+1))*Ne;re(t,x,_t+1,pe,vt,F,I),re(t,Mt,zt,pe,vt,F,I),re(t,Mt,zt-1,1,1,Je,I),fe(1,F);break}case"procreate":{const X=(Math.sin(u*Math.PI*8)+1)/4,ne=(Math.sin(u*Math.PI*6)+1)*.5,Ne=1.5,ce=Ne-ne;oe(Qe+We+1),re(t,te,Qe+ce,ie,We-Ne,F,I),re(t,q,Qe+ce,ie,We-Ne,F,I),ge(ce,F),re(t,x,_t+ce,pe,vt,F,I),re(t,E,_t+ce,pe,vt,F,I),fe(ce,F),t.globalAlpha=X,ge(ce,"white"),t.globalAlpha=1;break}case"attacking":{const X=Math.sin(u*Math.PI)*1.5,ne=Math.abs(Math.sin(u*Math.PI));oe(Qe+We+1),re(t,te-X,Qe+ne,ie,We,F,I),re(t,q+X*.5,Qe+ne,ie,We,F,I),ge(ne,F),re(t,x,_t+ne-2,pe,vt,F,I),re(t,E,_t+ne-2.5,pe,vt,F,I),fe(ne,F);break}case"defending":{oe(Qe+We+1),re(t,te,Qe+1,ie,We-1,F,I),re(t,q,Qe+1,ie,We-1,F,I),ge(1,F),re(t,x-1,_t+1-1,pe,vt,F,I),re(t,E+1,_t+1-1,pe,vt,F,I),fe(1,F);break}case"stunned":case"dead":{const X=d==="dead",ne=X?Math.min(1,u):0,Ne=ne>.5?Ve:F,ce=h==="male"?Pe:Me,En=ne>.8?"transparent":$,Mt=P/2,zt=k/2,vr=2;oe(k-1),re(t,Mt-ie-vr,zt,ie,We,Ne,I),re(t,Mt+vr,zt,ie,We,Ne,I),re(t,Mt-pe-vr,zt-Xt+1,pe,vt,Ne,I),re(t,Mt+vr,zt-Xt+1,pe,vt,Ne,I);const In=Mt-Ce/2,Hn=zt-Xt/2;h==="male"?(ne<.7&&re(t,In,Hn+Xt-vi,Ce,vi,ce,I),re(t,In,Hn,Ce,Xt-vi,Ne,I)):ne<.7?re(t,In,Hn,Ce,Xt,ce,I):re(t,In,Hn,Ce,Xt,Ne,I);const $r=Mt-Sn/2,xn=zt-Xt/2-Un+1;if(re(t,$r,xn,Sn,Un,Ne,I),En!=="transparent"&&re(t,$r,xn,Sn,Ea,En,I),X&&ne>.6){const Gn="#B0A890";for(let Sr=0;Sr<3;Sr++)re(t,In+1,Hn+Sr*1+1,Ce-2,.5,Gn,I)}break}default:re(t,0,0,P,k,"magenta",I);break}t.restore()}};function B_(t,r,o,s,l){const u=r.x,d=r.y-o-s/2;t.save(),t.fillStyle=l,t.strokeStyle=l,t.lineWidth=1.5,t.beginPath(),t.rect(u-s/2,d,s,s/2),t.fill(),t.beginPath(),t.moveTo(u-s/2,d),t.lineTo(u-s/4,d-s/3),t.lineTo(u-s/6,d),t.moveTo(u-s/6,d),t.lineTo(u,d-s/2),t.lineTo(u+s/6,d),t.moveTo(u+s/6,d),t.lineTo(u+s/4,d-s/3),t.lineTo(u+s/2,d),t.stroke(),t.restore()}function Qo(t,r,o,s,l,u=!1,d=!1,h=!1,p=!1){s<$c&&(o=o*.75),cd.render(t,r.x-o/2,r.y-o/2,o,o,0,"idle",l,s,[0,0],!1,0);let v,m;u?(v=TA,m=Yc):d?(v=CA,m=fm):h?(v=RA,m=dm):p&&(v=PA,m=cm),v&&m&&B_(t,r,o/2,v,m)}function H_(t,r,o,s,l,u){if(t.save(),s.length===0){t.restore();return}const d=s.length*l,h=4;let p;const v=d+(s.length-1)*h;s.length>1&&v>u?p=(u-d)/(s.length-1):p=h,s.length<=1&&(p=0);for(let m=0;m<s.length;m++){const{member:S,isPlayer:w,isHeir:P,isPartner:k,isParent:O}=s[m],I=r+m*(l+p)+l/2,G=o+l/4;Qo(t,{x:I,y:G},l,S.age,S.gender,w,P,k,O)}t.restore()}function x_(t,r,o,s){if(r.length===0)return;t.save();const l=ar,u=" 00",d=" 00";t.font=`${nc}px "Press Start 2P", Arial`;const h=t.measureText(u).width,p=t.measureText(d).width,v=ar+ca+ar+lr+h+ar/2+lr+p,m=r.length*da+(r.length-1)*Fp,S=s-m-ar;t.fillStyle=kA,t.fillRect(l,S,v,m);for(let w=0;w<r.length;w++){const P=r[w],k=S+w*(da+Fp),O=k+da/2;P.isPlayerTribe&&(t.fillStyle=NA,t.fillRect(l,k,v,da));let I=l+ar;t.font=`${ca}px "Press Start 2P", Arial`,t.textBaseline="middle",t.textAlign="left",t.fillText(P.tribeBadge,I,O-ca/4),I+=ca+ar*1.1,P.adultCount>0&&(Qo(t,{x:I+lr/2,y:O},lr,25,"male"),I+=lr/2,t.font=`${nc}px "Press Start 2P", Arial`,t.fillStyle="white",t.textBaseline="middle",t.textAlign="left",t.fillText(` ${P.adultCount}`,I,O),I+=t.measureText(` ${P.adultCount}`).width+ar/2),P.childCount>0&&(Qo(t,{x:I+lr/2,y:O},lr,1,"female"),I+=lr/2,t.font=`${nc}px "Press Start 2P", Arial`,t.fillStyle="white",t.textBaseline="middle",t.textAlign="left",t.fillText(` ${P.childCount}`,I,O))}t.restore()}function G_(t,r,o,s,l){t.save();const{position:u}=r;t.strokeStyle=s,t.lineWidth=2+Math.sin(l*5)*1.5,t.setLineDash([8,8]),t.beginPath(),t.arc(u.x,u.y,o,0,2*Math.PI),t.stroke(),t.restore()}function z_(t,r,o,s,l){if(r.transitionState===Et.INACTIVE)return;const u=o.steps[r.currentStepIndex];if(!u)return;t.save(),t.globalAlpha=r.transitionAlpha;const d=i1,h=o1,p=s1,v=`${sc}px "Press Start 2P", Arial`,m=`${jp}px "Press Start 2P", Arial`,S=l1,w=jp*1.5;t.font=m;const P=u.text.split(" ");let k="";const O=[];for(let j=0;j<P.length;j++){const de=k+P[j]+" ";t.measureText(de).width>d-h*2&&j>0?(O.push(k),k=P[j]+" "):k=de}O.push(k);const I=h*2+sc+h/2+O.length*w,G=(s-d)/2,z=l-I-160;t.fillStyle=a1,t.beginPath(),t.moveTo(G+p,z),t.lineTo(G+d-p,z),t.quadraticCurveTo(G+d,z,G+d,z+p),t.lineTo(G+d,z+I-p),t.quadraticCurveTo(G+d,z+I,G+d-p,z+I),t.lineTo(G+p,z+I),t.quadraticCurveTo(G,z+I,G,z+I-p),t.lineTo(G,z+p),t.quadraticCurveTo(G,z,G+p,z),t.closePath(),t.fill(),t.fillStyle=S,t.textAlign="center",t.textBaseline="top",t.font=v,t.fillText(u.title,G+d/2,z+h),t.font=m;let W=z+h+sc+h/2;for(const j of O)t.fillText(j,G+d/2,W),W+=w;t.restore()}function fg(t,r,o){t.save();const s=f1,l={x:r.x-s,y:r.y-s,width:r.width+s*2,height:r.height+s*2};t.strokeStyle=gm,t.lineWidth=d1+Math.sin(o*mm)*1.5,t.setLineDash([8,8]),t.strokeRect(l.x,l.y,l.width,l.height),t.restore()}function W_(t,r){t.fillStyle="white",t.font='30px "Press Start 2P", Arial',t.textAlign="center",t.fillText("Game Over!",t.canvas.width/2,t.canvas.height/2-60),t.font='20px "Press Start 2P", Arial',t.fillText("Lineage Extinct.",t.canvas.width/2,t.canvas.height/2-20),t.fillText(`Cause: ${r.causeOfGameOver||"Unknown"}`,t.canvas.width/2,t.canvas.height/2+20)}const Uc=10,$_=3,hg=Uc*.7;function j_(t,r,o,s,l){const{position:u,food:d,maxFood:h,ownerId:p,claimedUntil:v}=r;if(t.beginPath(),t.arc(u.x,u.y,Uc,0,Math.PI*2),t.fillStyle="#228B22",t.fill(),t.strokeStyle="#006400",t.lineWidth=1,t.stroke(),p&&v&&v>l&&s){const m=o.entities.entities.get(p);if(m){let S;m.id===s.id?S=Yc:Em(s,m,o)?S=dA:S=hm,S&&(t.strokeStyle=S,t.lineWidth=1+Math.sin(l*2)*.5,t.beginPath(),t.arc(u.x,u.y,Uc+2,0,Math.PI*2),t.stroke())}}if(d.length>0){const m=Math.PI*2/Math.min(d.length,h);for(let S=0;S<d.length;S++){const w=S*m,P=u.x+hg*Math.cos(w),k=u.y+hg*Math.sin(w);t.beginPath(),t.arc(P,k,$_,0,Math.PI*2),t.fillStyle="#FF0000",t.fill()}}}function Y_(t,r){const{position:o,gender:s,age:l,decayProgress:u,food:d,radius:h}=r;if(t.save(),t.globalAlpha=1-u,cd.render(t,o.x-h,o.y-h,h*2,h*2,u,"dead",s,l,[0,0],!1,0),t.restore(),d.length>0){t.save(),t.font=`${IA}px Arial`,t.textAlign="center",t.textBaseline="middle";const p=Zt*.9,v=Math.PI/qg*3;d.forEach((m,S)=>{const w=S*v,P=o.x+p*Math.cos(w)*Math.atan2(S,S),k=o.y+p*Math.sin(w)*Math.atan2(S,S),O=Sm[m.type];t.fillText(O,P,k)}),t.restore()}}function Ii(t,r,o,s,l,u,d,h){t.save(),t.fillStyle=d,t.fillRect(r,o,s,l),t.fillStyle=h,t.fillRect(r,o,s*Math.max(0,u),l),t.restore()}function V_(t,r,o,s,l,u){if(t.save(),s.length===0){t.restore();return}const d=s.length*l;let h;d>u||d+(s.length-1)*4>u?h=(u-d)/(s.length-1):h=4,s.length===1&&(h=0);for(let p=0;p<s.length;p++){const v=Sm[s[p].type];t.fillText(v,r+p*(l+h),o)}t.restore()}function K_(t,r,o,s,l){const u=r.autopilotControls.hoveredAutopilotAction;if(!u)return;let d,h=Zt/2;const p=Ja[u.action],v=Am[u.action],m=`${p} ${v}`;if("targetEntityId"in u){const S=r.entities.entities.get(u.targetEntityId);S&&(d=S.position,h=S.radius)}else"position"in u&&(d=u.position);if(d){km(t,d,h,Vc,Kc,2,o,s,l),t.save(),t.font=`${Oi}px "Press Start 2P", Arial`,t.fillStyle="white",t.textAlign="center",t.textBaseline="bottom",t.shadowColor="black",t.shadowBlur=5;const S=d.x-o.x+s/2,P=d.y-o.y+l/2-h-qa-Oi/2;t.fillText(m,S,P),t.restore()}}function X_(t,r,o,s,l){t.save();const u=(Math.sin(l*mm)+1)/2,d=o+qa+u*5;t.strokeStyle=Vc,t.lineWidth=2,t.setLineDash(Kc),t.beginPath(),t.arc(r.x,r.y,d,0,Math.PI*2),t.stroke(),t.setLineDash([]);const h=Ja[s],p=Am[s];if(h){t.font=`${Oi*1.5}px "Press Start 2P", Arial`,t.textAlign="center",t.textBaseline="middle";const v=r.y-d-25;t.fillText(h,r.x,v),t.font=`${Oi*.8}px "Press Start 2P", Arial`,t.fillText(p,r.x,v+25)}t.restore()}function pg(t,r,o){t.save();const s=30,l=70,u=3,d=l/u;for(let h=0;h<u;h++){const p=h*d,v=(o*s+p)%l,m=1-v/l;t.strokeStyle=`rgba(255, 215, 0, ${m*.7})`,t.lineWidth=1+(1-m)*2,t.beginPath(),t.arc(r.x,r.y,v,0,Math.PI*2),t.stroke()}t.restore()}function Q_(t,r){const{activeAutopilotAction:o,behaviors:s}=r.autopilotControls,l=It(r);if(l&&(l.isCallingToFollow&&pg(t,l.position,r.time),s.followLeader&&!o&&pg(t,l.position,r.time),o)){let u,d=15;if("position"in o)u=o.position;else if("targetEntityId"in o){const h=r.entities.entities.get(o.targetEntityId);h&&(u=h.position,d=h.radius||30)}u&&o.action!==ae.AutopilotFollowMe&&!l.isCallingToFollow&&X_(t,u,d,o.action,r.time)}}const b_={moving:"walk",gathering:"gathering",eating:"eat",procreating:"procreate",idle:"idle",attacking:"attacking",planting:"gathering"};function Z_(t,r){var h;const{radius:o,position:s,activeAction:l="idle"}=r,u=((h=r.stateMachine)==null?void 0:h[0])||"N/A",d=r.isAdult?Zt+20:Zt*.6+20;t.save(),t.fillStyle="white",t.font="10px Arial",t.textAlign="center",t.fillText(`Action: ${l}`,s.x,s.y-d),t.fillText(`State: ${u}`,s.x,s.y-d+10),t.fillText(`HP: ${r.hitpoints}`,s.x,s.y-d+20),t.fillText(`Cooldown: ${r.attackCooldown||"N/A"}`,s.x,s.y-d+30),t.restore(),t.beginPath(),t.arc(s.x,s.y,o,0,Math.PI*2),t.strokeStyle="rgba(255, 0, 0, 0.5)",t.lineWidth=1,t.stroke(),t.closePath()}function q_(t,r,o){if(!r.aiBehaviorTree||!r.aiBlackboard)return;const s=r.aiBlackboard.getNodeExecutionData();t.save(),t.font=`${KA}px Arial`,t.textAlign="left",t.textBaseline="top";const l=S=>{switch(S){case R.SUCCESS:return QA;case R.FAILURE:return bA;case R.RUNNING:return ZA;case R.NOT_EVALUATED:case null:default:return qA}},u=S=>{if(!S.name||!s.has(S.name))return{width:0,height:0};let w=0,P=0;const k=s.get(S.name),O=` ${S.name}`+(k!=null&&k.debugInfo?`: ${k.debugInfo}`:""),I=t.measureText(O).width,G=(S.depth??0)*zp+8+I+$p+Io+20;if(w=Math.max(w,G),P+=oc,S.children)for(const z of S.children){const W=u(z);w=Math.max(w,W.width),P+=W.height}else if(S.child){const z=u(S.child);w=Math.max(w,z.width),P+=z.height}return{width:w,height:P}},d=(S,w,P,k)=>{if(!S.name||!s.has(S.name))return w;let O=w;const I=s.get(S.name),G=P+2+(S.depth??0)*zp;let z=R.NOT_EVALUATED,W=Wp,j="";if(I){z=I.status,j=I.debugInfo;const $=e1/bt*Qt,Pe=o-I.lastExecuted,Me=Math.max(0,1-Pe/$);W=_1(Wp,JA,Me),Pe>$o&&(z=R.NOT_EVALUATED)}const de=l(z);t.fillStyle=de,t.fillText("●",G,O),t.fillStyle=W;const F=` ${S.name}`+(j?`: ${j}`:"");if(t.fillText(F,G+8,O),I&&I.executionHistory.length>0){const{executionHistory:$}=I,Pe=pm/bt*Qt,Me=o,Ve=Me-Pe,Je=P+k-Io-$p;let Le=Je;const Ge=O+(oc-ha)/2,we=$.filter(D=>D.time<Ve);let Ce=we.length>0?we[we.length-1].status:null,pe=Ve;const ie=$.filter(D=>D.time>=Ve&&D.time<=Me),H=Io/Pe;t.fillStyle="rgba(255, 255, 255, 0.1)",t.fillRect(Je,Ge,Io,ha);for(const D of ie){const q=(D.time-pe)*H;q>0&&(t.fillStyle=l(Ce),t.fillRect(Le,Ge,q,ha),Le+=q),Ce=D.status,pe=D.time}o-pe>$o&&(Ce=R.NOT_EVALUATED);const x=(Me-pe)*H;t.fillStyle=l(Ce);const E=Je+Io-Le;t.fillRect(Le,Ge,Math.min(x,E),ha)}if(O+=oc,S.children)for(const $ of S.children)O=d($,O,P,k);else S.child&&(O=d(S.child,O,P,k));return O},{width:h,height:p}=u(r.aiBehaviorTree);if(p===0){t.restore();return}const v=r.position.x+YA,m=r.position.y+VA-p/2;t.fillStyle=XA,t.fillRect(v,m,h,p+4),d(r.aiBehaviorTree,m+2,v,h),t.restore()}function J_(t,r,o,s,l){t.save(),t.font=`${kc}px Arial`,t.textAlign="center",t.textBaseline="middle",t.fillText(o,r.x,r.y-(s?Zt:Za)-kc-l),t.restore()}function eE(t,r,o,s,l){const u=r.x,d=r.y-o-s/2;t.save(),t.fillStyle=l,t.strokeStyle=l,t.lineWidth=1.5,t.beginPath(),t.rect(u-s/2,d,s,s/2),t.fill(),t.beginPath(),t.moveTo(u-s/2,d),t.lineTo(u-s/4,d-s/3),t.lineTo(u-s/6,d),t.moveTo(u-s/6,d),t.lineTo(u,d-s/2),t.lineTo(u+s/6,d),t.moveTo(u+s/6,d),t.lineTo(u+s/4,d-s/3),t.lineTo(u+s/2,d),t.stroke(),t.restore()}function tE(t,r,o){var h;const{position:s,radius:l}=r,u=s.x-rc/2,d=s.y-l-OA;if(((h=r.stateMachine)==null?void 0:h[0])===Ui){const p=r.stateMachine[1],v=o-p.attackStartTime,m=Math.min(v/nm,1);Ii(t,u,d,rc,Lp,m,wi,DA)}else if(r.attackCooldown&&r.attackCooldown>0){const p=1-r.attackCooldown/rm;Ii(t,u,d,rc,Lp,p,wi,MA)}}function nE(t,r,o){const l="➡️";t.save(),t.font="15px Arial",t.textAlign="center",t.textBaseline="bottom",t.shadowColor="black",t.shadowBlur=3,t.fillText(l,r.x,r.y-o),t.restore()}function rE(t,r,o=!1,s=!1,l=!1,u=!1,d=!1,h=!1,p=!1,v=!1,m,S){const{position:w,activeAction:P="idle"}=r,k=r.isAdult?Zt:Zt*.6,O=b_[P]||"idle";cd.render(t,w.x-k,w.y-k,k*2,k*2,r.animationProgress||0,O,r.gender,r.age,[r.direction.x,r.direction.y],r.isPregnant??!1,r.hunger),h&&(t.save(),t.strokeStyle=hm,t.lineWidth=2,t.beginPath(),t.arc(w.x,w.y,k+3,0,2*Math.PI),t.stroke(),t.restore());let I,G;if(d?(I=hA,G=fm):o?(I=fA,G=Yc):l?(I=pA,G=cA):s?(I=gA,G=cm):u&&(I=mA,G=dm),I&&G&&eE(t,w,k,I,G),r.tribeBadge&&J_(t,w,r.tribeBadge,r.isAdult??!1,I??0),p){let W=(r.isAdult?Zt:Za)+5;I&&(W+=I),r.tribeBadge&&(W+=kc),nE(t,w,W)}const z=v&&(S===void 0||r.id===S);z&&r.aiBlackboard&&q_(t,r,m),tE(t,r,m),z&&Z_(t,r)}const Om=15;function gg(t,r,o,s,l=1.5){const u=o-r.startTime,d=Math.min(u/r.duration,1),h=1-d,v=1+Math.sin(d*Math.PI*2)*(l-1),m=Om*v;t.save(),t.globalAlpha=h,t.beginPath(),t.arc(r.position.x,r.position.y,Math.max(0,m),0,Math.PI*2),t.fillStyle=s,t.fill(),t.restore()}function Si(t,r,o,s,l=2){const u=o-r.startTime,d=Math.min(u/r.duration,1),h=1-d,p=Om*2*d;t.save(),t.globalAlpha=h,t.beginPath(),t.arc(r.position.x,r.position.y,p,0,Math.PI*2),t.strokeStyle=s,t.lineWidth=l,t.stroke(),t.restore()}function ur(t,r,o,s){const l=o-r.startTime,u=Math.min(l/r.duration,1),d=1-u,h=-20*u;t.save(),t.globalAlpha=d,t.font="20px Arial",t.textAlign="center",t.fillText(s,r.position.x,r.position.y+h),t.restore()}function iE(t,r,o){switch(r.type){case _e.Hunger:gg(t,r,o,"rgba(255, 165, 0, 0.7)",1);break;case _e.Procreation:ur(t,r,o,"❤️");break;case _e.Pregnant:gg(t,r,o,"rgba(255, 105, 180, 0.7)",1.2);break;case _e.TargetAcquired:Si(t,r,o,"rgba(255, 0, 0, 0.8)",3);break;case _e.Attack:ur(t,r,o,"⚔️");break;case _e.Partnered:ur(t,r,o,"🤝");break;case _e.BushClaimed:Si(t,r,o,"rgba(0, 255, 0, 0.7)",2);break;case _e.BushClaimLost:Si(t,r,o,"rgba(128, 128, 128, 0.7)",2);break;case _e.Eating:ur(t,r,o,"🍖");break;case _e.ChildFed:ur(t,r,o,"🍼");break;case _e.AttackDeflected:ur(t,r,o,"🛡️");break;case _e.AttackResisted:ur(t,r,o,"💪");break;case _e.Hit:ur(t,r,o,"💥");break;case _e.SeizeBuildup:Si(t,r,o,"rgba(255, 215, 0, 0.8)",4);break;case _e.Seize:Si(t,r,o,"rgba(148, 0, 211, 0.8)",4);break;case _e.CallToAttack:Si(t,r,o,"rgba(255, 255, 0, 0.8)",4);break}}function Po(t,r,o,s,l,...u){const d={...l.position};for(let h=-o;h<=o;h+=o)for(let p=-r;p<=r;p+=r)l.position.x=d.x+p,l.position.y=d.y+h,s(t,l,...u);l.position=d}function oE(t,r,o){const s=It(r),l=s?Dt(r,s):[],u=zr(l),{width:d,height:h}=r.mapDimensions;if(Array.from(r.entities.entities.values()).sort((v,m)=>v.position.y-m.position.y||v.id-m.id).forEach(v=>{var m,S;if(v.type==="berryBush")Po(t,d,h,j_,v,r,s,r.time);else if(v.type==="human"){const w=v,P=w.id===(s==null?void 0:s.id),k=l.some(de=>de.id===w.id),O=w.id===(u==null?void 0:u.id),I=s&&(w.id===s.motherId||w.id===s.fatherId),G=s&&(((m=w.partnerIds)==null?void 0:m.includes(s.id))||((S=s.partnerIds)==null?void 0:S.includes(w.id))),z=(s==null?void 0:s.attackTargetId)===w.id,W=w.leaderId?r.entities.entities.get(w.leaderId):void 0,j=s?w.leaderId===s.id&&w.activeAction==="moving"&&w.target===w.leaderId&&(W==null?void 0:W.isCallingToFollow):!1;Po(t,d,h,rE,w,P,I,k,G,O,z,j,o,r.time,r.debugCharacterId)}else v.type==="humanCorpse"&&Po(t,d,h,Y_,v)}),r.visualEffects.forEach(v=>{Po(t,d,h,iE,v,r.time)}),r.tutorialState.isActive&&r.tutorialState.highlightedEntityIds.size>0)for(const v of r.tutorialState.highlightedEntityIds){const m=r.entities.entities.get(v);m&&Po(t,d,h,G_,m,c1,gm,r.time)}}function sE(t,r,o,s,l,u){let d=null,h=null;t.textAlign="left";let p=Ot+dr;const m=r.time/(Qt/bt)/bg%1,S=To[yi.Time],w=25,P=Ot+w;t.fillText(S,Ot,p+Ht/2+dr/3),Ii(t,P,p,sr,Ht,m,wi,EA),p+=Ht+Mn;const k=p+Dr/2,O=p+(Dr-Ht)/2,I=5;Qo(t,{x:Ot*2,y:k},Dr,5,o.gender,!1,!1,!1);const G=Ot+Dr+I,z=sr+w-(Dr+I)*2;Ii(t,G,O,z,Ht,Math.floor(o.age)/Go,wi,_A),Qo(t,{x:G+z+I+Dr/2,y:k},Dr,Go,o.gender,!1,!1,!1),p+=Ht+Mn*2;const W=[],j=new Set;if(W.push({member:o,isPlayer:!0,isHeir:!1,isPartner:!1,isParent:!1}),j.add(o.id),s&&!j.has(s.id)&&(W.push({member:s,isPlayer:!1,isHeir:!0,isPartner:!1,isParent:!1}),j.add(s.id)),l.forEach(we=>{j.has(we.id)||(W.push({member:we,isPlayer:!1,isHeir:!1,isPartner:!0,isParent:!1}),j.add(we.id))}),u.forEach(we=>{j.has(we.id)||(W.push({member:we,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!1}),j.add(we.id))}),o.motherId&&!j.has(o.motherId)){const we=r.entities.entities.get(o.motherId);we&&(W.push({member:we,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!0}),j.add(we.id))}if(o.fatherId&&!j.has(o.fatherId)){const we=r.entities.entities.get(o.fatherId);we&&(W.push({member:we,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!0}),j.add(we.id))}const de=To[yi.Family],F=10,$=Ot+dr+F,Pe=sr+w-(dr+F),Me=p+ua/2;t.font=`${dr}px "Press Start 2P", Arial`,t.textBaseline="middle",t.fillText(de,Ot,Me);const Ve=p+ua/2;H_(t,$,Ve,W,ua,Pe),p+=ua+Mn,t.textBaseline="alphabetic";const Je=To[yi.Hitpoints];t.fillText(Je,Ot,p+Ht/2+dr/3),Ii(t,P,p,sr,Ht,o.hitpoints/o.maxHitpoints,wi,wA),p+=Ht+Mn;const Le=To[yi.Hunger];t.fillText(Le,Ot,p+Ht/2+dr/3),Ii(t,P,p,sr,Ht,(en-o.hunger)/en,wi,AA),d={x:Ot,y:p-Mn/2,width:sr+w,height:Ht+Mn},p+=Ht+Mn,t.textBaseline="middle";const Ge=To[yi.Food];return t.fillText(Ge,Ot,p+la/2),V_(t,P,p+la/2,o.food,la,sr),h={x:Ot,y:p-Mn/5,width:sr+w,height:la+Mn},t.textBaseline="alphabetic",{hungerBarRect:d,foodBarRect:h}}function xa(t,r,o,s,l,u=!1){var d;if(t.save(),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle="#2c5234",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.translate(t.canvas.width/2-s.x,t.canvas.height/2-s.y),!u&&r.gameOver){t.restore(),W_(t,r);return}if(oE(t,r,o),Q_(t,r),t.restore(),!u){t.fillStyle=vA,t.font=`${dr}px "Press Start 2P", Arial`,t.shadowColor=SA,t.shadowBlur=yA;const h=It(r);let p=null,v=null;if(h){const S=Dt(r,h),w=zr(S),P=((d=h.partnerIds)==null?void 0:d.map(O=>r.entities.entities.get(O)).filter(O=>O!==void 0))||[],k=sE(t,r,h,w,P,S);p=k.hungerBarRect,v=k.foodBarRect}const m=Y1(r,h==null?void 0:h.leaderId);if(x_(t,m,t.canvas.width,t.canvas.height),C_(t,r,t.canvas.width),t.shadowColor="transparent",t.shadowBlur=0,h&&(K_(t,r,s,t.canvas.width,t.canvas.height),l.length>0&&k_(t,l,h,s,t.canvas.width,t.canvas.height)),r.tutorialState.activeUIHighlights.size>0){const{activeUIHighlights:S}=r.tutorialState;S.has(Xo.HUNGER_BAR)&&p&&fg(t,p,r.time),S.has(Xo.FOOD_BAR)&&v&&fg(t,v,r.time)}r.tutorialState.isActive&&z_(t,r.tutorialState,r.tutorial,t.canvas.width,t.canvas.height),r.isPaused&&R_(t)}}const aE=_n.div`
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
`,lE=_n.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #2c5234;
`,uE=_n.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  z-index: 1;
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0.7) 100%);
`,cE=_n.h1`
  font-family: 'Press Start 2P', cursive;
  font-size: 4rem;
  color: #fff;
  text-shadow: 4px 4px 0px #ff0000;
  margin-bottom: 2rem;
`,dE=_n.button`
  font-family: 'Press Start 2P', cursive;
  font-size: 1.5rem;
  padding: 1rem 2rem;
  color: #fff;
  background-color: #ff0000;
  border: 2px solid #fff;
  box-shadow: 4px 4px 0px #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;

  &:hover {
    background-color: #fff;
    color: #ff0000;
    box-shadow: 4px 4px 0px #ff0000;
  }
`,Sc="intro-soundtrack",mg=()=>{const{setAppState:t}=Ga(),r=ye.useRef(null),o=ye.useRef(null),s=ye.useRef(s_()),l=ye.useRef(),u=ye.useRef(s.current.viewportCenter),d=ye.useRef();ye.useEffect(()=>(Zc(Fe.SoundTrack1,{loop:!0,trackId:Sc}),()=>{Xp(Sc,2)}),[]),ye.useEffect(()=>{const m=r.current;if(!m)return;o.current=m.getContext("2d");const S=()=>{m&&o.current&&(m.width=window.innerWidth,m.height=window.innerHeight,xa(o.current,s.current,!1,u.current,[],!0))};return S(),window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]),ye.useEffect(()=>{const m=()=>{const w=Tm(s.current);if(w.length>0){const P=Math.floor(Math.random()*w.length);d.current=w[P].id}};m();const S=setInterval(m,m1);return()=>clearInterval(S)},[]);const[h,p]=Kg(m=>{if(!o.current)return;if(l.current===void 0){l.current=m;return}const S=Math.min((m-l.current)/1e3,1);s.current=nl(s.current,S);const w=d.current?s.current.entities.entities.get(d.current):void 0;if(w){const{mapDimensions:P}=s.current,{width:k,height:O}=P;let I={...w.position};const G=I.x-u.current.x;Math.abs(G)>k/2&&(G>0?I.x-=k:I.x+=k);const z=I.y-u.current.y;Math.abs(z)>O/2&&(z>0?I.y-=O:I.y+=O);let W=Xc(u.current,I,Wc*S);W={x:(W.x%k+k)%k,y:(W.y%O+O)%O},u.current=W}xa(o.current,s.current,!1,u.current,[],!0),l.current=m});ye.useEffect(()=>(p(),h),[p,h]);const v=()=>{Xp(Sc,2),t("game")};return Ie.jsxs(aE,{children:[Ie.jsx(lE,{ref:r}),Ie.jsxs(uE,{children:[Ie.jsx(cE,{children:"Tribe"}),Ie.jsx(dE,{onClick:v,children:"Start Game"})]})]})};function fE(){return console.log("Tribe game initialized with detailed 2D world state."),o_()}const hE=({canvasRef:t,ctxRef:r,gameStateRef:o,isDebugOnRef:s,viewportCenterRef:l,playerActionHintsRef:u})=>(ye.useEffect(()=>{const d=t.current;if(!d)return;r.current=d.getContext("2d");const h=()=>{d&&r.current&&o.current&&(d.width=window.innerWidth,d.height=window.innerHeight,xa(r.current,o.current,s.current===!0,l.current,u.current,!1))};return h(),window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]),Ie.jsx("canvas",{ref:t,style:{display:"block",background:"#2c5234"}})),pE=(t,r,o)=>{let s;const l=V1(t,o);if(l){if(r.isAdult&&l.type==="berryBush"&&l.food.length>0)s={action:ae.AutopilotGather,targetEntityId:l.id};else if(r.isAdult&&l.type==="humanCorpse"&&l.food.length>0)s={action:ae.AutopilotGather,targetEntityId:l.id};else if(l.type==="human"){const u=l;u.id!==r.id&&u.leaderId!==r.leaderId&&r.isAdult?s={action:ae.AutopilotAttack,targetEntityId:u.id}:u.id!==r.id&&u.gender!==r.gender&&u.isAdult&&r.isAdult&&(u.procreationCooldown||0)<=0&&u.gender==="female"&&u.age<=Ln?s={action:ae.AutopilotProcreate,targetEntityId:u.id}:r.food.length>0&&!u.isAdult&&(u.motherId===r.id||u.fatherId===r.id)&&(s={action:ae.AutopilotFeedChildren,targetEntityId:u.id})}}else o.autopilotControls.isManuallyPlanting&&r.food.filter(u=>u.type===Bn.Berry).length>=Wo&&ed(t,o,1,Qa,r.id)?s={action:ae.AutopilotPlant,position:t}:s={action:ae.AutopilotMove,position:t};return s},gE=(t,r)=>{if(t.isPaused||!It(t))return;const s=t.autopilotControls.hoveredAutopilotAction;t.autopilotControls.activeAutopilotAction=void 0,s?(t.autopilotControls.activeAutopilotAction=s,(s.action===ae.AutopilotMove||s.action===ae.AutopilotGather)&&(t.hasPlayerMovedEver=!0),s.action===ae.AutopilotPlant&&(t.hasPlayerPlantedBush=!0)):t.autopilotControls.activeAutopilotAction={action:ae.AutopilotMove,position:r},t.autopilotControls.isManuallyMoving=!1,t.autopilotControls.isManuallyPlanting=!1},mE=(t,r,o)=>{var u,d,h;let s=!0,l=r;switch(t){case"m":r.isMuted=!r.isMuted,Uo(r.masterVolume,r.isMuted);break;case"=":case"+":const p=Math.min(1,r.masterVolume+.1);r.masterVolume=parseFloat(p.toFixed(1)),Uo(r.masterVolume,r.isMuted);break;case"-":const v=Math.max(0,r.masterVolume-.1);r.masterVolume=parseFloat(v.toFixed(1)),Uo(r.masterVolume,r.isMuted);break;case"t":l=nl(r,am);break;case" ":case"p":r.isPaused=!r.isPaused;break;case"§":case"`":o.current=!o.current,o.current?l.debugCharacterId=((u=It(l))==null?void 0:u.id)??((h=(d=Tm(l))==null?void 0:d[0])==null?void 0:h.id):l.debugCharacterId=void 0;break;case"tab":o.current=!0;const m=Array.from(l.entities.entities.values()).filter(S=>S.type==="human");if(m.length>0){const S=m.sort((O,I)=>O.isPlayer?-1:O.id-I.id),w=l.debugCharacterId,k=((w?S.findIndex(O=>O.id===w):-1)+1)%S.length;l.debugCharacterId=S[k].id}else l.debugCharacterId=void 0;break;default:s=!1;break}return{newState:l,handled:s}},vE=(t,r,o,s,l)=>{const u={gameState:o};if(r&&(o.hasPlayerEnabledAutopilot=!0),t==="e"){if(r){o.autopilotControls.behaviors.gathering=!o.autopilotControls.behaviors.gathering;return}const d=dt(s,o,"berryBush",ft,v=>v.food.length>0&&s.food.length<s.maxFood),h=dt(s,o,"humanCorpse",ft,v=>v.food.length>0&&s.food.length<s.maxFood);let p=null;d&&h?p=ue(s.position,d.position,o.mapDimensions.width,o.mapDimensions.height)<=ue(s.position,h.position,o.mapDimensions.width,o.mapDimensions.height)?d:h:p=d||h,p&&(s.activeAction="gathering",nt(u,Fe.Gather,s.position))}else if(t==="r"){if(r){o.autopilotControls.behaviors.procreation=!o.autopilotControls.behaviors.procreation;return}dt(s,o,"human",ft,h=>{const p=h;return p.id!==s.id&&p.gender!==s.gender&&p.isAdult&&s.isAdult&&p.hunger<yt&&s.hunger<yt&&(p.procreationCooldown||0)<=0&&(s.procreationCooldown||0)<=0&&(p.gender==="female"?!p.isPregnant:!s.isPregnant)||!1})&&(s.activeAction="procreating",nt(u,Fe.Procreate,s.position))}else if(t==="f")s.food.length>0&&(s.activeAction="eating",nt(u,Fe.Eat,s.position));else if(t==="arrowup"||t==="w")s.direction.y=-1,s.activeAction="moving",s.target=void 0,o.hasPlayerMovedEver=!0,o.autopilotControls.isManuallyMoving=!0,o.autopilotControls.activeAutopilotAction=void 0;else if(t==="arrowdown"||t==="s")s.direction.y=1,s.activeAction="moving",s.target=void 0,o.hasPlayerMovedEver=!0,o.autopilotControls.isManuallyMoving=!0,o.autopilotControls.activeAutopilotAction=void 0;else if(t==="arrowleft"||t==="a")s.direction.x=-1,s.activeAction="moving",s.target=void 0,o.hasPlayerMovedEver=!0,o.autopilotControls.isManuallyMoving=!0,o.autopilotControls.activeAutopilotAction=void 0;else if(t==="arrowright"||t==="d")s.direction.x=1,s.activeAction="moving",s.target=void 0,o.hasPlayerMovedEver=!0,o.autopilotControls.isManuallyMoving=!0,o.autopilotControls.activeAutopilotAction=void 0;else if(t==="q"){if(r){o.autopilotControls.behaviors.attack=!o.autopilotControls.behaviors.attack;return}const d=dt(s,o,"human",Xa,h=>h.id!==s.id&&h.leaderId!==s.leaderId);d&&(s.activeAction="attacking",s.attackTargetId=d.id)}else if(t==="b"){if(r){o.autopilotControls.behaviors.planting=!o.autopilotControls.behaviors.planting;return}if(l.find(h=>h.type===ae.Plant)){const h=ed(s.position,o,50,Pc);h&&(s.activeAction="planting",s.target=h,o.hasPlayerPlantedBush=!0)}}else t==="v"?(s.isCallingToAttack=!0,s.callToAttackEndTime=o.time+ki,rt(o,_e.CallToAttack,s.position,ki),nt(u,Fe.CallToAttack,s.position)):t==="c"?(s.isCallingToFollow=!0,s.callToFollowEndTime=o.time+jo,rt(o,_e.CallToFollow,s.position,jo),nt(u,Fe.CallToFollow,s.position)):t==="k"&&nd(s,o)},SE=(t,r,o,s)=>{t==="arrowup"||t==="w"||t==="arrowdown"||t==="s"?r.direction.y=0:(t==="arrowleft"||t==="a"||t==="arrowright"||t==="d")&&(r.direction.x=0),!s.current.has("arrowup")&&!s.current.has("arrowdown")&&!s.current.has("arrowleft")&&!s.current.has("arrowright")&&!s.current.has("w")&&!s.current.has("a")&&!s.current.has("s")&&!s.current.has("d")&&(r.activeAction==="moving"&&(r.activeAction="idle"),o.autopilotControls.isManuallyMoving=!1),!s.current.has("e")&&r.activeAction==="gathering"&&(r.activeAction="idle"),!s.current.has("f")&&r.activeAction==="eating"&&(r.activeAction="idle"),!s.current.has("r")&&r.activeAction==="procreating"&&(r.activeAction="idle")},yE=(t,r,o)=>{const s={gameState:o},l=It(o);l&&nt(s,Fe.ButtonClick,l.position);const u=o.uiButtons.find(h=>h.id===t.id);u&&(u.lastActivated=Date.now()),r&&(o.hasPlayerEnabledAutopilot=!0);const{behaviors:d}=o.autopilotControls;switch(t.action){case De.ToggleMute:o.isMuted=!o.isMuted,Uo(o.masterVolume,o.isMuted);break;case De.TogglePause:o.isPaused=!o.isPaused;break;case De.FastForward:return nl(o,am);case De.CommandEat:l&&l.food.length>0&&(l.activeAction="eating");break;case De.CommandGather:r?d.gathering=!d.gathering:l&&(l.activeAction="gathering");break;case De.CommandPlant:r?d.planting=!d.planting:l&&(o.autopilotControls.isManuallyPlanting=!0);break;case De.ToggleProcreationBehavior:d.procreation=!d.procreation;break;case De.ToggleAttackBehavior:d.attack=!d.attack;break;case De.ToggleFeedChildrenBehavior:d.feedChildren=!d.feedChildren;break;case De.ToggleAutopilotFollowLeaderBehavior:d.followLeader=!d.followLeader;break;case De.CommandCallToAttack:l&&l.leaderId===l.id&&(l.isCallingToAttack=!0,l.callToAttackEndTime=o.time+ki,rt(o,_e.CallToAttack,l.position,ki),nt(s,Fe.CallToAttack,l.position));break;case De.CommandFollowMe:r?d.followLeader=!d.followLeader:l&&l.leaderId===l.id&&(l.isCallingToFollow=!0,l.callToFollowEndTime=o.time+jo,rt(o,_e.CallToFollow,l.position,jo),nt(s,Fe.CallToFollow,l.position));break;case De.CommandTribeSplit:l&&nd(l,o);break}return o},AE=({isActive:t,gameStateRef:r,canvasRef:o,viewportCenterRef:s,playerActionHintsRef:l,isDebugOnRef:u,keysPressed:d})=>(ye.useEffect(()=>{const h=p=>{if(!t()||r.current.gameOver||!o.current||!p.target||p.target!==o.current)return;const v=o.current.getBoundingClientRect(),m=p.clientX-v.left,S=p.clientY-v.top,w=r.current.uiButtons.find(k=>m>=k.rect.x&&m<=k.rect.x+k.rect.width&&S>=k.rect.y&&S<=k.rect.y+k.rect.height);if(w){r.current=yE(w,p.shiftKey,r.current);return}const P=Jp({x:m,y:S},s.current,{width:o.current.width,height:o.current.height},r.current.mapDimensions);gE(r.current,P)};return window.addEventListener("mousedown",h),()=>{window.removeEventListener("mousedown",h)}},[t,o,r,s]),ye.useEffect(()=>{const h=p=>{if(!t()||!o.current)return;const v=o.current.getBoundingClientRect(),m=p.clientX-v.left,S=p.clientY-v.top;r.current.mousePosition={x:m,y:S};let w;for(let k=r.current.uiButtons.length-1;k>=0;k--){const O=r.current.uiButtons[k];if(m>=O.rect.x&&m<=O.rect.x+O.rect.width&&S>=O.rect.y&&S<=O.rect.y+O.rect.height){w=O.id;break}}if(r.current.hoveredButtonId=w,w){r.current.autopilotControls.hoveredAutopilotAction=void 0;return}const P=It(r.current);if(P){const k=Jp({x:m,y:S},s.current,{width:o.current.width,height:o.current.height},r.current.mapDimensions);r.current.autopilotControls.hoveredAutopilotAction=pE(k,P,r.current)}else r.current.autopilotControls.hoveredAutopilotAction=void 0};return window.addEventListener("mousemove",h),()=>{window.removeEventListener("mousemove",h)}},[t,o,r,s]),ye.useEffect(()=>{const h=v=>{if(!t()||r.current.gameOver)return;const m=v.key.toLowerCase();if((m===" "||m==="p"||m==="tab")&&v.preventDefault(),m==="escape"){r.current.autopilotControls.activeAutopilotAction=void 0;return}const S=mE(m,r.current,u);if(r.current=S.newState,S.handled)return;const w=It(r.current);w&&(d.current.add(m),vE(m,v.shiftKey,r.current,w,l.current))},p=v=>{if(!t()||r.current.gameOver)return;const m=v.key.toLowerCase();d.current.delete(m);const S=It(r.current);S&&SE(m,S,r.current,d)};return window.addEventListener("keydown",h),window.addEventListener("keyup",p),()=>{window.removeEventListener("keydown",h),window.removeEventListener("keyup",p)}},[t,r,l,u,d]),null),wE=(t,r,o)=>{let l=It(t);if(t.debugCharacterId){const u=t.entities.entities.get(t.debugCharacterId);u&&"position"in u&&(l=u)}if(l){const{mapDimensions:u}=t,{width:d,height:h}=u;let p={...l.position};const v=p.x-r.x;Math.abs(v)>d/2&&(v>0?p.x-=d:p.x+=d);const m=p.y-r.y;Math.abs(m)>h/2&&(m>0?p.y-=h:p.y+=h);let S=Xc(r,p,Wc*o);return S={x:(S.x%d+d)%d,y:(S.y%h+h)%h},S}return t.viewportCenter},_E=({gameStateRef:t,ctxRef:r,isDebugOnRef:o,viewportCenterRef:s,playerActionHintsRef:l,keysPressed:u,canvasRef:d,setAppState:h,appState:p})=>{const v=ye.useRef(),[m,S,w]=Kg(P=>{if(!r.current||!v.current){v.current=P;return}const k=Math.min(P-v.current,1e3)/1e3;t.current=nl(t.current,k);const O=It(t.current);O?l.current=qc(t.current,O):l.current=[],s.current=wE(t.current,s.current,k),xa(r.current,t.current,o.current,s.current,l.current,!1),v.current=P,t.current.gameOver&&p!=="gameOver"&&(Zc(Fe.GameOver,{masterVolume:t.current.masterVolume,isMuted:t.current.isMuted}),h("gameOver",{generations:t.current.generationCount,cause:t.current.causeOfGameOver||"Unknown"}))});return ye.useEffect(()=>(S(),m),[S,m]),Ie.jsx(AE,{isActive:w,gameStateRef:t,canvasRef:d,viewportCenterRef:s,playerActionHintsRef:l,isDebugOnRef:o,keysPressed:u})},vg=()=>{const[t]=ye.useState(()=>fE());return Ie.jsx(EE,{initialState:t})},EE=({initialState:t})=>{const r=ye.useRef(null),o=ye.useRef(null),s=ye.useRef(t),l=ye.useRef(new Set),u=ye.useRef(!1),d=ye.useRef(t.viewportCenter),h=ye.useRef([]),{appState:p,setAppState:v}=Ga();return Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(hE,{canvasRef:r,ctxRef:o,gameStateRef:s,isDebugOnRef:u,viewportCenterRef:d,playerActionHintsRef:h}),Ie.jsx(_E,{gameStateRef:s,ctxRef:o,isDebugOnRef:u,viewportCenterRef:d,playerActionHintsRef:h,keysPressed:l,canvasRef:r,setAppState:v,appState:p})]})},IE=_n.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  background-color: rgba(0, 0, 0, 0.75); // Semi-transparent overlay
  color: #fff;
  padding: 20px;
  z-index: 10; // Ensure it's on top
`,TE=_n.h1`
  font-family: 'Press Start 2P', cursive;
  font-size: 4rem;
  color: #ff4136; // Red for emphasis
  text-shadow: 4px 4px 0px #000;
  margin-bottom: 1.5rem;
`,Ia=_n.p`
  font-family: 'Press Start 2P', cursive;
  font-size: 1.2rem;
  margin: 0.5em 0;
  color: #fff;
  text-shadow: 2px 2px 0px #000;
`,CE=_n.button`
  font-family: 'Press Start 2P', cursive;
  font-size: 1rem;
  padding: 1rem 2rem;
  margin-top: 2em;
  color: #fff;
  background-color: #ff4136; // Red button
  border: 2px solid #fff;
  box-shadow: 4px 4px 0px #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  text-transform: uppercase;

  &:hover {
    background-color: #fff;
    color: #ff4136;
    box-shadow: 4px 4px 0px #ff4136;
  }
`,RE=()=>{const{setAppState:t,gameOverDetails:r}=Ga(),o=()=>{t("intro")};return Ie.jsxs(IE,{children:[Ie.jsx(TE,{children:"Game Over"}),Ie.jsx(Ia,{children:"Your tribe's lineage has ended."}),r&&Ie.jsxs(Ie.Fragment,{children:[Ie.jsxs(Ia,{children:["Generations Survived: ",r.generations]}),Ie.jsxs(Ia,{children:["Cause of Extinction: ",r.cause]})]}),!r&&Ie.jsx(Ia,{children:"Game details are unavailable."}),Ie.jsx(CE,{onClick:o,children:"Return to Menu"})]})},PE=zS`
  /* CSS Reset */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    padding: 0;
    font-family: 'Press Start 2P', 'Arial', sans-serif;
    background-color: #121212;
    color: #f0f0f0;
    line-height: 1.6;
  }

  /* Additional global styles */
  h1, h2, h3, h4, h5, h6 {
    margin-top: 0;
  }

  button {
    cursor: pointer;
    font-family: inherit;
  }

  /* Prevent overflow issues */
  html, body {
    height: 100%;
    overflow-x: hidden;
  }

  /* Root element for React app */
  #root {
    height: 100%;
  }
`;function NE(t,r){ye.useEffect(()=>{const o=()=>{const s=document.location.hash==="#game"?"game":"intro";r(s)};return window.addEventListener("hashchange",o),o(),()=>{window.removeEventListener("hashchange",o)}},[]),ye.useEffect(()=>{t==="game"?document.location.hash="#game":t==="intro"&&(document.location.hash="")},[t])}const kE=()=>{const{appState:t,setAppState:r}=Ga();NE(t,r);const o=()=>{switch(t){case"intro":return Ie.jsx(mg,{});case"game":return Ie.jsx(vg,{});case"gameOver":return Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(vg,{}),Ie.jsx(RE,{})]});default:return Ie.jsx(mg,{})}};return Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(PE,{}),o()]})},Sg=document.getElementById("root");Sg?M1().then(()=>{xv.createRoot(Sg).render(Ie.jsx(An.StrictMode,{children:Ie.jsx(Gv,{initialAppState:document.location.hash==="#game"?"game":"intro",children:Ie.jsx(kE,{})})}))}):console.error("Failed to find the root element");
