var ry=Object.defineProperty;var oy=(e,n,r)=>n in e?ry(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var Te=(e,n,r)=>oy(e,typeof n!="symbol"?n+"":n,r);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function Fm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gc={exports:{}},Vo={},xc={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp;function sy(){if(hp)return Oe;hp=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),S=Symbol.iterator;function y(_){return _===null||typeof _!="object"?null:(_=S&&_[S]||_["@@iterator"],typeof _=="function"?_:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,I={};function R(_,O,j){this.props=_,this.context=O,this.refs=I,this.updater=j||E}R.prototype.isReactComponent={},R.prototype.setState=function(_,O){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,O,"setState")},R.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function F(){}F.prototype=R.prototype;function B(_,O,j){this.props=_,this.context=O,this.refs=I,this.updater=j||E}var H=B.prototype=new F;H.constructor=B,P(H,R.prototype),H.isPureReactComponent=!0;var $=Array.isArray,se=Object.prototype.hasOwnProperty,M={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function fe(_,O,j){var J,he={},ie=null,Se=null;if(O!=null)for(J in O.ref!==void 0&&(Se=O.ref),O.key!==void 0&&(ie=""+O.key),O)se.call(O,J)&&!W.hasOwnProperty(J)&&(he[J]=O[J]);var me=arguments.length-2;if(me===1)he.children=j;else if(1<me){for(var X=Array(me),ee=0;ee<me;ee++)X[ee]=arguments[ee+2];he.children=X}if(_&&_.defaultProps)for(J in me=_.defaultProps,me)he[J]===void 0&&(he[J]=me[J]);return{$$typeof:e,type:_,key:ie,ref:Se,props:he,_owner:M.current}}function _e(_,O){return{$$typeof:e,type:_.type,key:O,ref:_.ref,props:_.props,_owner:_._owner}}function Pe(_){return typeof _=="object"&&_!==null&&_.$$typeof===e}function $e(_){var O={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(j){return O[j]})}var Fe=/\/+/g;function Ee(_,O){return typeof _=="object"&&_!==null&&_.key!=null?$e(""+_.key):O.toString(36)}function ue(_,O,j,J,he){var ie=typeof _;(ie==="undefined"||ie==="boolean")&&(_=null);var Se=!1;if(_===null)Se=!0;else switch(ie){case"string":case"number":Se=!0;break;case"object":switch(_.$$typeof){case e:case n:Se=!0}}if(Se)return Se=_,he=he(Se),_=J===""?"."+Ee(Se,0):J,$(he)?(j="",_!=null&&(j=_.replace(Fe,"$&/")+"/"),ue(he,O,j,"",function(ee){return ee})):he!=null&&(Pe(he)&&(he=_e(he,j+(!he.key||Se&&Se.key===he.key?"":(""+he.key).replace(Fe,"$&/")+"/")+_)),O.push(he)),1;if(Se=0,J=J===""?".":J+":",$(_))for(var me=0;me<_.length;me++){ie=_[me];var X=J+Ee(ie,me);Se+=ue(ie,O,j,X,he)}else if(X=y(_),typeof X=="function")for(_=X.call(_),me=0;!(ie=_.next()).done;)ie=ie.value,X=J+Ee(ie,me++),Se+=ue(ie,O,j,X,he);else if(ie==="object")throw O=String(_),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return Se}function Me(_,O,j){if(_==null)return _;var J=[],he=0;return ue(_,J,"","",function(ie){return O.call(j,ie,he++)}),J}function ve(_){if(_._status===-1){var O=_._result;O=O(),O.then(function(j){(_._status===0||_._status===-1)&&(_._status=1,_._result=j)},function(j){(_._status===0||_._status===-1)&&(_._status=2,_._result=j)}),_._status===-1&&(_._status=0,_._result=O)}if(_._status===1)return _._result.default;throw _._result}var q={current:null},x={transition:null},Y={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:x,ReactCurrentOwner:M};function b(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:Me,forEach:function(_,O,j){Me(_,function(){O.apply(this,arguments)},j)},count:function(_){var O=0;return Me(_,function(){O++}),O},toArray:function(_){return Me(_,function(O){return O})||[]},only:function(_){if(!Pe(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},Oe.Component=R,Oe.Fragment=r,Oe.Profiler=a,Oe.PureComponent=B,Oe.StrictMode=o,Oe.Suspense=h,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Oe.act=b,Oe.cloneElement=function(_,O,j){if(_==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_+".");var J=P({},_.props),he=_.key,ie=_.ref,Se=_._owner;if(O!=null){if(O.ref!==void 0&&(ie=O.ref,Se=M.current),O.key!==void 0&&(he=""+O.key),_.type&&_.type.defaultProps)var me=_.type.defaultProps;for(X in O)se.call(O,X)&&!W.hasOwnProperty(X)&&(J[X]=O[X]===void 0&&me!==void 0?me[X]:O[X])}var X=arguments.length-2;if(X===1)J.children=j;else if(1<X){me=Array(X);for(var ee=0;ee<X;ee++)me[ee]=arguments[ee+2];J.children=me}return{$$typeof:e,type:_.type,key:he,ref:ie,props:J,_owner:Se}},Oe.createContext=function(_){return _={$$typeof:c,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_.Provider={$$typeof:l,_context:_},_.Consumer=_},Oe.createElement=fe,Oe.createFactory=function(_){var O=fe.bind(null,_);return O.type=_,O},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(_){return{$$typeof:f,render:_}},Oe.isValidElement=Pe,Oe.lazy=function(_){return{$$typeof:m,_payload:{_status:-1,_result:_},_init:ve}},Oe.memo=function(_,O){return{$$typeof:p,type:_,compare:O===void 0?null:O}},Oe.startTransition=function(_){var O=x.transition;x.transition={};try{_()}finally{x.transition=O}},Oe.unstable_act=b,Oe.useCallback=function(_,O){return q.current.useCallback(_,O)},Oe.useContext=function(_){return q.current.useContext(_)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(_){return q.current.useDeferredValue(_)},Oe.useEffect=function(_,O){return q.current.useEffect(_,O)},Oe.useId=function(){return q.current.useId()},Oe.useImperativeHandle=function(_,O,j){return q.current.useImperativeHandle(_,O,j)},Oe.useInsertionEffect=function(_,O){return q.current.useInsertionEffect(_,O)},Oe.useLayoutEffect=function(_,O){return q.current.useLayoutEffect(_,O)},Oe.useMemo=function(_,O){return q.current.useMemo(_,O)},Oe.useReducer=function(_,O,j){return q.current.useReducer(_,O,j)},Oe.useRef=function(_){return q.current.useRef(_)},Oe.useState=function(_){return q.current.useState(_)},Oe.useSyncExternalStore=function(_,O,j){return q.current.useSyncExternalStore(_,O,j)},Oe.useTransition=function(){return q.current.useTransition()},Oe.version="18.3.1",Oe}var gp;function Gd(){return gp||(gp=1,xc.exports=sy()),xc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pp;function ay(){if(pp)return Vo;pp=1;var e=Gd(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,h,p){var m,S={},y=null,E=null;p!==void 0&&(y=""+p),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(E=h.ref);for(m in h)o.call(h,m)&&!l.hasOwnProperty(m)&&(S[m]=h[m]);if(f&&f.defaultProps)for(m in h=f.defaultProps,h)S[m]===void 0&&(S[m]=h[m]);return{$$typeof:n,type:f,key:y,ref:E,props:S,_owner:a.current}}return Vo.Fragment=r,Vo.jsx=c,Vo.jsxs=c,Vo}var mp;function ly(){return mp||(mp=1,Gc.exports=ay()),Gc.exports}var Le=ly(),De=Gd();const Gn=Fm(De);var Ga={},bc={exports:{}},zt={},zc={exports:{}},$c={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp;function uy(){return vp||(vp=1,function(e){function n(x,Y){var b=x.length;x.push(Y);e:for(;0<b;){var _=b-1>>>1,O=x[_];if(0<a(O,Y))x[_]=Y,x[b]=O,b=_;else break e}}function r(x){return x.length===0?null:x[0]}function o(x){if(x.length===0)return null;var Y=x[0],b=x.pop();if(b!==Y){x[0]=b;e:for(var _=0,O=x.length,j=O>>>1;_<j;){var J=2*(_+1)-1,he=x[J],ie=J+1,Se=x[ie];if(0>a(he,b))ie<O&&0>a(Se,he)?(x[_]=Se,x[ie]=b,_=ie):(x[_]=he,x[J]=b,_=J);else if(ie<O&&0>a(Se,b))x[_]=Se,x[ie]=b,_=ie;else break e}}return Y}function a(x,Y){var b=x.sortIndex-Y.sortIndex;return b!==0?b:x.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();e.unstable_now=function(){return c.now()-f}}var h=[],p=[],m=1,S=null,y=3,E=!1,P=!1,I=!1,R=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(x){for(var Y=r(p);Y!==null;){if(Y.callback===null)o(p);else if(Y.startTime<=x)o(p),Y.sortIndex=Y.expirationTime,n(h,Y);else break;Y=r(p)}}function $(x){if(I=!1,H(x),!P)if(r(h)!==null)P=!0,ve(se);else{var Y=r(p);Y!==null&&q($,Y.startTime-x)}}function se(x,Y){P=!1,I&&(I=!1,F(fe),fe=-1),E=!0;var b=y;try{for(H(Y),S=r(h);S!==null&&(!(S.expirationTime>Y)||x&&!$e());){var _=S.callback;if(typeof _=="function"){S.callback=null,y=S.priorityLevel;var O=_(S.expirationTime<=Y);Y=e.unstable_now(),typeof O=="function"?S.callback=O:S===r(h)&&o(h),H(Y)}else o(h);S=r(h)}if(S!==null)var j=!0;else{var J=r(p);J!==null&&q($,J.startTime-Y),j=!1}return j}finally{S=null,y=b,E=!1}}var M=!1,W=null,fe=-1,_e=5,Pe=-1;function $e(){return!(e.unstable_now()-Pe<_e)}function Fe(){if(W!==null){var x=e.unstable_now();Pe=x;var Y=!0;try{Y=W(!0,x)}finally{Y?Ee():(M=!1,W=null)}}else M=!1}var Ee;if(typeof B=="function")Ee=function(){B(Fe)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,Me=ue.port2;ue.port1.onmessage=Fe,Ee=function(){Me.postMessage(null)}}else Ee=function(){R(Fe,0)};function ve(x){W=x,M||(M=!0,Ee())}function q(x,Y){fe=R(function(){x(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(x){x.callback=null},e.unstable_continueExecution=function(){P||E||(P=!0,ve(se))},e.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_e=0<x?Math.floor(1e3/x):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(x){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var b=y;y=Y;try{return x()}finally{y=b}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(x,Y){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var b=y;y=x;try{return Y()}finally{y=b}},e.unstable_scheduleCallback=function(x,Y,b){var _=e.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?_+b:_):b=_,x){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=b+O,x={id:m++,callback:Y,priorityLevel:x,startTime:b,expirationTime:O,sortIndex:-1},b>_?(x.sortIndex=b,n(p,x),r(h)===null&&x===r(p)&&(I?(F(fe),fe=-1):I=!0,q($,b-_))):(x.sortIndex=O,n(h,x),P||E||(P=!0,ve(se))),x},e.unstable_shouldYield=$e,e.unstable_wrapCallback=function(x){var Y=y;return function(){var b=y;y=Y;try{return x.apply(this,arguments)}finally{y=b}}}}($c)),$c}var Sp;function cy(){return Sp||(Sp=1,zc.exports=uy()),zc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp;function dy(){if(yp)return zt;yp=1;var e=Gd(),n=cy();function r(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(t,i){c(t,i),c(t+"Capture",i)}function c(t,i){for(a[t]=i,t=0;t<i.length;t++)o.add(i[t])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},S={};function y(t){return h.call(S,t)?!0:h.call(m,t)?!1:p.test(t)?S[t]=!0:(m[t]=!0,!1)}function E(t,i,s,u){if(s!==null&&s.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function P(t,i,s,u){if(i===null||typeof i>"u"||E(t,i,s,u))return!0;if(u)return!1;if(s!==null)switch(s.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function I(t,i,s,u,d,g,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=s,this.propertyName=t,this.type=i,this.sanitizeURL=g,this.removeEmptyString=v}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){R[t]=new I(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];R[i]=new I(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){R[t]=new I(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){R[t]=new I(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){R[t]=new I(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){R[t]=new I(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){R[t]=new I(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){R[t]=new I(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){R[t]=new I(t,5,!1,t.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function B(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(F,B);R[i]=new I(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(F,B);R[i]=new I(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(F,B);R[i]=new I(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){R[t]=new I(t,1,!1,t.toLowerCase(),null,!1,!1)}),R.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){R[t]=new I(t,1,!1,t.toLowerCase(),null,!0,!0)});function H(t,i,s,u){var d=R.hasOwnProperty(i)?R[i]:null;(d!==null?d.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(P(i,s,d,u)&&(s=null),u||d===null?y(i)&&(s===null?t.removeAttribute(i):t.setAttribute(i,""+s)):d.mustUseProperty?t[d.propertyName]=s===null?d.type===3?!1:"":s:(i=d.attributeName,u=d.attributeNamespace,s===null?t.removeAttribute(i):(d=d.type,s=d===3||d===4&&s===!0?"":""+s,u?t.setAttributeNS(u,i,s):t.setAttribute(i,s))))}var $=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,se=Symbol.for("react.element"),M=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),fe=Symbol.for("react.strict_mode"),_e=Symbol.for("react.profiler"),Pe=Symbol.for("react.provider"),$e=Symbol.for("react.context"),Fe=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),Me=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),x=Symbol.iterator;function Y(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}var b=Object.assign,_;function O(t){if(_===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);_=i&&i[1]||""}return`
`+_+t}var j=!1;function J(t,i){if(!t||j)return"";j=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(k){var u=k}Reflect.construct(t,[],i)}else{try{i.call()}catch(k){u=k}t.call(i.prototype)}else{try{throw Error()}catch(k){u=k}t()}}catch(k){if(k&&u&&typeof k.stack=="string"){for(var d=k.stack.split(`
`),g=u.stack.split(`
`),v=d.length-1,A=g.length-1;1<=v&&0<=A&&d[v]!==g[A];)A--;for(;1<=v&&0<=A;v--,A--)if(d[v]!==g[A]){if(v!==1||A!==1)do if(v--,A--,0>A||d[v]!==g[A]){var w=`
`+d[v].replace(" at new "," at ");return t.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",t.displayName)),w}while(1<=v&&0<=A);break}}}finally{j=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?O(t):""}function he(t){switch(t.tag){case 5:return O(t.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return t=J(t.type,!1),t;case 11:return t=J(t.type.render,!1),t;case 1:return t=J(t.type,!0),t;default:return""}}function ie(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case W:return"Fragment";case M:return"Portal";case _e:return"Profiler";case fe:return"StrictMode";case Ee:return"Suspense";case ue:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $e:return(t.displayName||"Context")+".Consumer";case Pe:return(t._context.displayName||"Context")+".Provider";case Fe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Me:return i=t.displayName||null,i!==null?i:ie(t.type)||"Memo";case ve:i=t._payload,t=t._init;try{return ie(t(i))}catch{}}return null}function Se(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(i);case 8:return i===fe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function me(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function X(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ee(t){var i=X(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),u=""+t[i];if(!t.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,g=s.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){u=""+v,g.call(this,v)}}),Object.defineProperty(t,i,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Ne(t){t._valueTracker||(t._valueTracker=ee(t))}function le(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),u="";return t&&(u=X(t)?t.checked?"true":"false":t.value),t=u,t!==s?(i.setValue(t),!0):!1}function Cn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ke(t,i){var s=i.checked;return b({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Ye(t,i){var s=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;s=me(i.value!=null?i.value:s),t._wrapperState={initialChecked:u,initialValue:s,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Rn(t,i){i=i.checked,i!=null&&H(t,"checked",i,!1)}function Lt(t,i){Rn(t,i);var s=me(i.value),u=i.type;if(s!=null)u==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?Pn(t,i.type,s):i.hasOwnProperty("defaultValue")&&Pn(t,i.type,me(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function en(t,i,s){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,s||i===t.value||(t.value=i),t.defaultValue=i}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Pn(t,i,s){(i!=="number"||Cn(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Nn=Array.isArray;function ii(t,i,s,u){if(t=t.options,i){i={};for(var d=0;d<s.length;d++)i["$"+s[d]]=!0;for(s=0;s<t.length;s++)d=i.hasOwnProperty("$"+t[s].value),t[s].selected!==d&&(t[s].selected=d),d&&u&&(t[s].defaultSelected=!0)}else{for(s=""+me(s),i=null,d=0;d<t.length;d++){if(t[d].value===s){t[d].selected=!0,u&&(t[d].defaultSelected=!0);return}i!==null||t[d].disabled||(i=t[d])}i!==null&&(i.selected=!0)}}function Li(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return b({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wf(t,i){var s=i.value;if(s==null){if(s=i.children,i=i.defaultValue,s!=null){if(i!=null)throw Error(r(92));if(Nn(s)){if(1<s.length)throw Error(r(93));s=s[0]}i=s}i==null&&(i=""),s=i}t._wrapperState={initialValue:me(s)}}function Ef(t,i){var s=me(i.value),u=me(i.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),i.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),u!=null&&(t.defaultValue=""+u)}function _f(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function Cf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ql(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?Cf(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ks,Rf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,s,u,d){MSApp.execUnsafeLocalFunction(function(){return t(i,s,u,d)})}:t}(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(ks=ks||document.createElement("div"),ks.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=ks.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function lo(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lv=["Webkit","ms","Moz","O"];Object.keys(uo).forEach(function(t){lv.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),uo[i]=uo[t]})});function Pf(t,i,s){return i==null||typeof i=="boolean"||i===""?"":s||typeof i!="number"||i===0||uo.hasOwnProperty(t)&&uo[t]?(""+i).trim():i+"px"}function Nf(t,i){t=t.style;for(var s in i)if(i.hasOwnProperty(s)){var u=s.indexOf("--")===0,d=Pf(s,i[s],u);s==="float"&&(s="cssFloat"),u?t.setProperty(s,d):t[s]=d}}var uv=b({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zl(t,i){if(i){if(uv[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function ql(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jl=null;function eu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tu=null,hr=null,gr=null;function Df(t){if(t=Oo(t)){if(typeof tu!="function")throw Error(r(280));var i=t.stateNode;i&&(i=ea(i),tu(t.stateNode,t.type,i))}}function kf(t){hr?gr?gr.push(t):gr=[t]:hr=t}function Of(){if(hr){var t=hr,i=gr;if(gr=hr=null,Df(t),i)for(t=0;t<i.length;t++)Df(i[t])}}function Mf(t,i){return t(i)}function Ff(){}var nu=!1;function Uf(t,i,s){if(nu)return t(i,s);nu=!0;try{return Mf(t,i,s)}finally{nu=!1,(hr!==null||gr!==null)&&(Ff(),Of())}}function co(t,i){var s=t.stateNode;if(s===null)return null;var u=ea(s);if(u===null)return null;s=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(r(231,i,typeof s));return s}var iu=!1;if(f)try{var fo={};Object.defineProperty(fo,"passive",{get:function(){iu=!0}}),window.addEventListener("test",fo,fo),window.removeEventListener("test",fo,fo)}catch{iu=!1}function cv(t,i,s,u,d,g,v,A,w){var k=Array.prototype.slice.call(arguments,3);try{i.apply(s,k)}catch(L){this.onError(L)}}var ho=!1,Os=null,Ms=!1,ru=null,dv={onError:function(t){ho=!0,Os=t}};function fv(t,i,s,u,d,g,v,A,w){ho=!1,Os=null,cv.apply(dv,arguments)}function hv(t,i,s,u,d,g,v,A,w){if(fv.apply(this,arguments),ho){if(ho){var k=Os;ho=!1,Os=null}else throw Error(r(198));Ms||(Ms=!0,ru=k)}}function Hi(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function Lf(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function Hf(t){if(Hi(t)!==t)throw Error(r(188))}function gv(t){var i=t.alternate;if(!i){if(i=Hi(t),i===null)throw Error(r(188));return i!==t?null:t}for(var s=t,u=i;;){var d=s.return;if(d===null)break;var g=d.alternate;if(g===null){if(u=d.return,u!==null){s=u;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===s)return Hf(d),t;if(g===u)return Hf(d),i;g=g.sibling}throw Error(r(188))}if(s.return!==u.return)s=d,u=g;else{for(var v=!1,A=d.child;A;){if(A===s){v=!0,s=d,u=g;break}if(A===u){v=!0,u=d,s=g;break}A=A.sibling}if(!v){for(A=g.child;A;){if(A===s){v=!0,s=g,u=d;break}if(A===u){v=!0,u=g,s=d;break}A=A.sibling}if(!v)throw Error(r(189))}}if(s.alternate!==u)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?t:i}function Bf(t){return t=gv(t),t!==null?Gf(t):null}function Gf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=Gf(t);if(i!==null)return i;t=t.sibling}return null}var xf=n.unstable_scheduleCallback,bf=n.unstable_cancelCallback,pv=n.unstable_shouldYield,mv=n.unstable_requestPaint,nt=n.unstable_now,vv=n.unstable_getCurrentPriorityLevel,ou=n.unstable_ImmediatePriority,zf=n.unstable_UserBlockingPriority,Fs=n.unstable_NormalPriority,Sv=n.unstable_LowPriority,$f=n.unstable_IdlePriority,Us=null,Dn=null;function yv(t){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Us,t,void 0,(t.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:Iv,Av=Math.log,Tv=Math.LN2;function Iv(t){return t>>>=0,t===0?32:31-(Av(t)/Tv|0)|0}var Ls=64,Hs=4194304;function go(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bs(t,i){var s=t.pendingLanes;if(s===0)return 0;var u=0,d=t.suspendedLanes,g=t.pingedLanes,v=s&268435455;if(v!==0){var A=v&~d;A!==0?u=go(A):(g&=v,g!==0&&(u=go(g)))}else v=s&~d,v!==0?u=go(v):g!==0&&(u=go(g));if(u===0)return 0;if(i!==0&&i!==u&&(i&d)===0&&(d=u&-u,g=i&-i,d>=g||d===16&&(g&4194240)!==0))return i;if((u&4)!==0&&(u|=s&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=u;0<i;)s=31-dn(i),d=1<<s,u|=t[s],i&=~d;return u}function wv(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ev(t,i){for(var s=t.suspendedLanes,u=t.pingedLanes,d=t.expirationTimes,g=t.pendingLanes;0<g;){var v=31-dn(g),A=1<<v,w=d[v];w===-1?((A&s)===0||(A&u)!==0)&&(d[v]=wv(A,i)):w<=i&&(t.expiredLanes|=A),g&=~A}}function su(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Wf(){var t=Ls;return Ls<<=1,(Ls&4194240)===0&&(Ls=64),t}function au(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function po(t,i,s){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-dn(i),t[i]=s}function _v(t,i){var s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<s;){var d=31-dn(s),g=1<<d;i[d]=0,u[d]=-1,t[d]=-1,s&=~g}}function lu(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var u=31-dn(s),d=1<<u;d&i|t[u]&i&&(t[u]|=i),s&=~d}}var be=0;function Yf(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var jf,uu,Vf,Xf,Kf,cu=!1,Gs=[],ri=null,oi=null,si=null,mo=new Map,vo=new Map,ai=[],Cv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qf(t,i){switch(t){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":mo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(i.pointerId)}}function So(t,i,s,u,d,g){return t===null||t.nativeEvent!==g?(t={blockedOn:i,domEventName:s,eventSystemFlags:u,nativeEvent:g,targetContainers:[d]},i!==null&&(i=Oo(i),i!==null&&uu(i)),t):(t.eventSystemFlags|=u,i=t.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),t)}function Rv(t,i,s,u,d){switch(i){case"focusin":return ri=So(ri,t,i,s,u,d),!0;case"dragenter":return oi=So(oi,t,i,s,u,d),!0;case"mouseover":return si=So(si,t,i,s,u,d),!0;case"pointerover":var g=d.pointerId;return mo.set(g,So(mo.get(g)||null,t,i,s,u,d)),!0;case"gotpointercapture":return g=d.pointerId,vo.set(g,So(vo.get(g)||null,t,i,s,u,d)),!0}return!1}function Zf(t){var i=Bi(t.target);if(i!==null){var s=Hi(i);if(s!==null){if(i=s.tag,i===13){if(i=Lf(s),i!==null){t.blockedOn=i,Kf(t.priority,function(){Vf(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xs(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=fu(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var u=new s.constructor(s.type,s);Jl=u,s.target.dispatchEvent(u),Jl=null}else return i=Oo(s),i!==null&&uu(i),t.blockedOn=s,!1;i.shift()}return!0}function qf(t,i,s){xs(t)&&s.delete(i)}function Pv(){cu=!1,ri!==null&&xs(ri)&&(ri=null),oi!==null&&xs(oi)&&(oi=null),si!==null&&xs(si)&&(si=null),mo.forEach(qf),vo.forEach(qf)}function yo(t,i){t.blockedOn===i&&(t.blockedOn=null,cu||(cu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Pv)))}function Ao(t){function i(d){return yo(d,t)}if(0<Gs.length){yo(Gs[0],t);for(var s=1;s<Gs.length;s++){var u=Gs[s];u.blockedOn===t&&(u.blockedOn=null)}}for(ri!==null&&yo(ri,t),oi!==null&&yo(oi,t),si!==null&&yo(si,t),mo.forEach(i),vo.forEach(i),s=0;s<ai.length;s++)u=ai[s],u.blockedOn===t&&(u.blockedOn=null);for(;0<ai.length&&(s=ai[0],s.blockedOn===null);)Zf(s),s.blockedOn===null&&ai.shift()}var pr=$.ReactCurrentBatchConfig,bs=!0;function Nv(t,i,s,u){var d=be,g=pr.transition;pr.transition=null;try{be=1,du(t,i,s,u)}finally{be=d,pr.transition=g}}function Dv(t,i,s,u){var d=be,g=pr.transition;pr.transition=null;try{be=4,du(t,i,s,u)}finally{be=d,pr.transition=g}}function du(t,i,s,u){if(bs){var d=fu(t,i,s,u);if(d===null)Nu(t,i,u,zs,s),Qf(t,u);else if(Rv(d,t,i,s,u))u.stopPropagation();else if(Qf(t,u),i&4&&-1<Cv.indexOf(t)){for(;d!==null;){var g=Oo(d);if(g!==null&&jf(g),g=fu(t,i,s,u),g===null&&Nu(t,i,u,zs,s),g===d)break;d=g}d!==null&&u.stopPropagation()}else Nu(t,i,u,null,s)}}var zs=null;function fu(t,i,s,u){if(zs=null,t=eu(u),t=Bi(t),t!==null)if(i=Hi(t),i===null)t=null;else if(s=i.tag,s===13){if(t=Lf(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return zs=t,null}function Jf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vv()){case ou:return 1;case zf:return 4;case Fs:case Sv:return 16;case $f:return 536870912;default:return 16}default:return 16}}var li=null,hu=null,$s=null;function eh(){if($s)return $s;var t,i=hu,s=i.length,u,d="value"in li?li.value:li.textContent,g=d.length;for(t=0;t<s&&i[t]===d[t];t++);var v=s-t;for(u=1;u<=v&&i[s-u]===d[g-u];u++);return $s=d.slice(t,1<u?1-u:void 0)}function Ws(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Ys(){return!0}function th(){return!1}function Vt(t){function i(s,u,d,g,v){this._reactName=s,this._targetInst=d,this.type=u,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(s=t[A],this[A]=s?s(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ys:th,this.isPropagationStopped=th,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ys)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ys)},persist:function(){},isPersistent:Ys}),i}var mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gu=Vt(mr),To=b({},mr,{view:0,detail:0}),kv=Vt(To),pu,mu,Io,js=b({},To,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Su,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Io&&(Io&&t.type==="mousemove"?(pu=t.screenX-Io.screenX,mu=t.screenY-Io.screenY):mu=pu=0,Io=t),pu)},movementY:function(t){return"movementY"in t?t.movementY:mu}}),nh=Vt(js),Ov=b({},js,{dataTransfer:0}),Mv=Vt(Ov),Fv=b({},To,{relatedTarget:0}),vu=Vt(Fv),Uv=b({},mr,{animationName:0,elapsedTime:0,pseudoElement:0}),Lv=Vt(Uv),Hv=b({},mr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bv=Vt(Hv),Gv=b({},mr,{data:0}),ih=Vt(Gv),xv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $v(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=zv[t])?!!i[t]:!1}function Su(){return $v}var Wv=b({},To,{key:function(t){if(t.key){var i=xv[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Ws(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Su,charCode:function(t){return t.type==="keypress"?Ws(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ws(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yv=Vt(Wv),jv=b({},js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rh=Vt(jv),Vv=b({},To,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Su}),Xv=Vt(Vv),Kv=b({},mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qv=Vt(Kv),Zv=b({},js,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qv=Vt(Zv),Jv=[9,13,27,32],yu=f&&"CompositionEvent"in window,wo=null;f&&"documentMode"in document&&(wo=document.documentMode);var eS=f&&"TextEvent"in window&&!wo,oh=f&&(!yu||wo&&8<wo&&11>=wo),sh=" ",ah=!1;function lh(t,i){switch(t){case"keyup":return Jv.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vr=!1;function tS(t,i){switch(t){case"compositionend":return uh(i);case"keypress":return i.which!==32?null:(ah=!0,sh);case"textInput":return t=i.data,t===sh&&ah?null:t;default:return null}}function nS(t,i){if(vr)return t==="compositionend"||!yu&&lh(t,i)?(t=eh(),$s=hu=li=null,vr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return oh&&i.locale!=="ko"?null:i.data;default:return null}}var iS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ch(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!iS[t.type]:i==="textarea"}function dh(t,i,s,u){kf(u),i=Zs(i,"onChange"),0<i.length&&(s=new gu("onChange","change",null,s,u),t.push({event:s,listeners:i}))}var Eo=null,_o=null;function rS(t){Nh(t,0)}function Vs(t){var i=Ir(t);if(le(i))return t}function oS(t,i){if(t==="change")return i}var fh=!1;if(f){var Au;if(f){var Tu="oninput"in document;if(!Tu){var hh=document.createElement("div");hh.setAttribute("oninput","return;"),Tu=typeof hh.oninput=="function"}Au=Tu}else Au=!1;fh=Au&&(!document.documentMode||9<document.documentMode)}function gh(){Eo&&(Eo.detachEvent("onpropertychange",ph),_o=Eo=null)}function ph(t){if(t.propertyName==="value"&&Vs(_o)){var i=[];dh(i,_o,t,eu(t)),Uf(rS,i)}}function sS(t,i,s){t==="focusin"?(gh(),Eo=i,_o=s,Eo.attachEvent("onpropertychange",ph)):t==="focusout"&&gh()}function aS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vs(_o)}function lS(t,i){if(t==="click")return Vs(i)}function uS(t,i){if(t==="input"||t==="change")return Vs(i)}function cS(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var fn=typeof Object.is=="function"?Object.is:cS;function Co(t,i){if(fn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),u=Object.keys(i);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var d=s[u];if(!h.call(i,d)||!fn(t[d],i[d]))return!1}return!0}function mh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vh(t,i){var s=mh(t);t=0;for(var u;s;){if(s.nodeType===3){if(u=t+s.textContent.length,t<=i&&u>=i)return{node:s,offset:i-t};t=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=mh(s)}}function Sh(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Sh(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function yh(){for(var t=window,i=Cn();i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=Cn(t.document)}return i}function Iu(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function dS(t){var i=yh(),s=t.focusedElem,u=t.selectionRange;if(i!==s&&s&&s.ownerDocument&&Sh(s.ownerDocument.documentElement,s)){if(u!==null&&Iu(s)){if(i=u.start,t=u.end,t===void 0&&(t=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(t,s.value.length);else if(t=(i=s.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var d=s.textContent.length,g=Math.min(u.start,d);u=u.end===void 0?g:Math.min(u.end,d),!t.extend&&g>u&&(d=u,u=g,g=d),d=vh(s,g);var v=vh(s,u);d&&v&&(t.rangeCount!==1||t.anchorNode!==d.node||t.anchorOffset!==d.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),t.removeAllRanges(),g>u?(t.addRange(i),t.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),t.addRange(i)))}}for(i=[],t=s;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)t=i[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fS=f&&"documentMode"in document&&11>=document.documentMode,Sr=null,wu=null,Ro=null,Eu=!1;function Ah(t,i,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Eu||Sr==null||Sr!==Cn(u)||(u=Sr,"selectionStart"in u&&Iu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ro&&Co(Ro,u)||(Ro=u,u=Zs(wu,"onSelect"),0<u.length&&(i=new gu("onSelect","select",null,i,s),t.push({event:i,listeners:u}),i.target=Sr)))}function Xs(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var yr={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionend:Xs("Transition","TransitionEnd")},_u={},Th={};f&&(Th=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function Ks(t){if(_u[t])return _u[t];if(!yr[t])return t;var i=yr[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in Th)return _u[t]=i[s];return t}var Ih=Ks("animationend"),wh=Ks("animationiteration"),Eh=Ks("animationstart"),_h=Ks("transitionend"),Ch=new Map,Rh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ui(t,i){Ch.set(t,i),l(i,[t])}for(var Cu=0;Cu<Rh.length;Cu++){var Ru=Rh[Cu],hS=Ru.toLowerCase(),gS=Ru[0].toUpperCase()+Ru.slice(1);ui(hS,"on"+gS)}ui(Ih,"onAnimationEnd"),ui(wh,"onAnimationIteration"),ui(Eh,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(_h,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Po));function Ph(t,i,s){var u=t.type||"unknown-event";t.currentTarget=s,hv(u,i,void 0,t),t.currentTarget=null}function Nh(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var u=t[s],d=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var v=u.length-1;0<=v;v--){var A=u[v],w=A.instance,k=A.currentTarget;if(A=A.listener,w!==g&&d.isPropagationStopped())break e;Ph(d,A,k),g=w}else for(v=0;v<u.length;v++){if(A=u[v],w=A.instance,k=A.currentTarget,A=A.listener,w!==g&&d.isPropagationStopped())break e;Ph(d,A,k),g=w}}}if(Ms)throw t=ru,Ms=!1,ru=null,t}function je(t,i){var s=i[Uu];s===void 0&&(s=i[Uu]=new Set);var u=t+"__bubble";s.has(u)||(Dh(i,t,2,!1),s.add(u))}function Pu(t,i,s){var u=0;i&&(u|=4),Dh(s,t,u,i)}var Qs="_reactListening"+Math.random().toString(36).slice(2);function No(t){if(!t[Qs]){t[Qs]=!0,o.forEach(function(s){s!=="selectionchange"&&(pS.has(s)||Pu(s,!1,t),Pu(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Qs]||(i[Qs]=!0,Pu("selectionchange",!1,i))}}function Dh(t,i,s,u){switch(Jf(i)){case 1:var d=Nv;break;case 4:d=Dv;break;default:d=du}s=d.bind(null,i,s,t),d=void 0,!iu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),u?d!==void 0?t.addEventListener(i,s,{capture:!0,passive:d}):t.addEventListener(i,s,!0):d!==void 0?t.addEventListener(i,s,{passive:d}):t.addEventListener(i,s,!1)}function Nu(t,i,s,u,d){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var A=u.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(v===4)for(v=u.return;v!==null;){var w=v.tag;if((w===3||w===4)&&(w=v.stateNode.containerInfo,w===d||w.nodeType===8&&w.parentNode===d))return;v=v.return}for(;A!==null;){if(v=Bi(A),v===null)return;if(w=v.tag,w===5||w===6){u=g=v;continue e}A=A.parentNode}}u=u.return}Uf(function(){var k=g,L=eu(s),G=[];e:{var U=Ch.get(t);if(U!==void 0){var K=gu,Z=t;switch(t){case"keypress":if(Ws(s)===0)break e;case"keydown":case"keyup":K=Yv;break;case"focusin":Z="focus",K=vu;break;case"focusout":Z="blur",K=vu;break;case"beforeblur":case"afterblur":K=vu;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=nh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Mv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Xv;break;case Ih:case wh:case Eh:K=Lv;break;case _h:K=Qv;break;case"scroll":K=kv;break;case"wheel":K=qv;break;case"copy":case"cut":case"paste":K=Bv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=rh}var te=(i&4)!==0,it=!te&&t==="scroll",N=te?U!==null?U+"Capture":null:U;te=[];for(var C=k,D;C!==null;){D=C;var z=D.stateNode;if(D.tag===5&&z!==null&&(D=z,N!==null&&(z=co(C,N),z!=null&&te.push(Do(C,z,D)))),it)break;C=C.return}0<te.length&&(U=new K(U,Z,null,s,L),G.push({event:U,listeners:te}))}}if((i&7)===0){e:{if(U=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",U&&s!==Jl&&(Z=s.relatedTarget||s.fromElement)&&(Bi(Z)||Z[$n]))break e;if((K||U)&&(U=L.window===L?L:(U=L.ownerDocument)?U.defaultView||U.parentWindow:window,K?(Z=s.relatedTarget||s.toElement,K=k,Z=Z?Bi(Z):null,Z!==null&&(it=Hi(Z),Z!==it||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(K=null,Z=k),K!==Z)){if(te=nh,z="onMouseLeave",N="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(te=rh,z="onPointerLeave",N="onPointerEnter",C="pointer"),it=K==null?U:Ir(K),D=Z==null?U:Ir(Z),U=new te(z,C+"leave",K,s,L),U.target=it,U.relatedTarget=D,z=null,Bi(L)===k&&(te=new te(N,C+"enter",Z,s,L),te.target=D,te.relatedTarget=it,z=te),it=z,K&&Z)t:{for(te=K,N=Z,C=0,D=te;D;D=Ar(D))C++;for(D=0,z=N;z;z=Ar(z))D++;for(;0<C-D;)te=Ar(te),C--;for(;0<D-C;)N=Ar(N),D--;for(;C--;){if(te===N||N!==null&&te===N.alternate)break t;te=Ar(te),N=Ar(N)}te=null}else te=null;K!==null&&kh(G,U,K,te,!1),Z!==null&&it!==null&&kh(G,it,Z,te,!0)}}e:{if(U=k?Ir(k):window,K=U.nodeName&&U.nodeName.toLowerCase(),K==="select"||K==="input"&&U.type==="file")var re=oS;else if(ch(U))if(fh)re=uS;else{re=aS;var ce=sS}else(K=U.nodeName)&&K.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(re=lS);if(re&&(re=re(t,k))){dh(G,re,s,L);break e}ce&&ce(t,U,k),t==="focusout"&&(ce=U._wrapperState)&&ce.controlled&&U.type==="number"&&Pn(U,"number",U.value)}switch(ce=k?Ir(k):window,t){case"focusin":(ch(ce)||ce.contentEditable==="true")&&(Sr=ce,wu=k,Ro=null);break;case"focusout":Ro=wu=Sr=null;break;case"mousedown":Eu=!0;break;case"contextmenu":case"mouseup":case"dragend":Eu=!1,Ah(G,s,L);break;case"selectionchange":if(fS)break;case"keydown":case"keyup":Ah(G,s,L)}var de;if(yu)e:{switch(t){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else vr?lh(t,s)&&(ye="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(ye="onCompositionStart");ye&&(oh&&s.locale!=="ko"&&(vr||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&vr&&(de=eh()):(li=L,hu="value"in li?li.value:li.textContent,vr=!0)),ce=Zs(k,ye),0<ce.length&&(ye=new ih(ye,t,null,s,L),G.push({event:ye,listeners:ce}),de?ye.data=de:(de=uh(s),de!==null&&(ye.data=de)))),(de=eS?tS(t,s):nS(t,s))&&(k=Zs(k,"onBeforeInput"),0<k.length&&(L=new ih("onBeforeInput","beforeinput",null,s,L),G.push({event:L,listeners:k}),L.data=de))}Nh(G,i)})}function Do(t,i,s){return{instance:t,listener:i,currentTarget:s}}function Zs(t,i){for(var s=i+"Capture",u=[];t!==null;){var d=t,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=co(t,s),g!=null&&u.unshift(Do(t,g,d)),g=co(t,i),g!=null&&u.push(Do(t,g,d))),t=t.return}return u}function Ar(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kh(t,i,s,u,d){for(var g=i._reactName,v=[];s!==null&&s!==u;){var A=s,w=A.alternate,k=A.stateNode;if(w!==null&&w===u)break;A.tag===5&&k!==null&&(A=k,d?(w=co(s,g),w!=null&&v.unshift(Do(s,w,A))):d||(w=co(s,g),w!=null&&v.push(Do(s,w,A)))),s=s.return}v.length!==0&&t.push({event:i,listeners:v})}var mS=/\r\n?/g,vS=/\u0000|\uFFFD/g;function Oh(t){return(typeof t=="string"?t:""+t).replace(mS,`
`).replace(vS,"")}function qs(t,i,s){if(i=Oh(i),Oh(t)!==i&&s)throw Error(r(425))}function Js(){}var Du=null,ku=null;function Ou(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Mu=typeof setTimeout=="function"?setTimeout:void 0,SS=typeof clearTimeout=="function"?clearTimeout:void 0,Mh=typeof Promise=="function"?Promise:void 0,yS=typeof queueMicrotask=="function"?queueMicrotask:typeof Mh<"u"?function(t){return Mh.resolve(null).then(t).catch(AS)}:Mu;function AS(t){setTimeout(function(){throw t})}function Fu(t,i){var s=i,u=0;do{var d=s.nextSibling;if(t.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(u===0){t.removeChild(d),Ao(i);return}u--}else s!=="$"&&s!=="$?"&&s!=="$!"||u++;s=d}while(s);Ao(i)}function ci(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function Fh(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return t;i--}else s==="/$"&&i++}t=t.previousSibling}return null}var Tr=Math.random().toString(36).slice(2),kn="__reactFiber$"+Tr,ko="__reactProps$"+Tr,$n="__reactContainer$"+Tr,Uu="__reactEvents$"+Tr,TS="__reactListeners$"+Tr,IS="__reactHandles$"+Tr;function Bi(t){var i=t[kn];if(i)return i;for(var s=t.parentNode;s;){if(i=s[$n]||s[kn]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=Fh(t);t!==null;){if(s=t[kn])return s;t=Fh(t)}return i}t=s,s=t.parentNode}return null}function Oo(t){return t=t[kn]||t[$n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ir(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function ea(t){return t[ko]||null}var Lu=[],wr=-1;function di(t){return{current:t}}function Ve(t){0>wr||(t.current=Lu[wr],Lu[wr]=null,wr--)}function We(t,i){wr++,Lu[wr]=t.current,t.current=i}var fi={},It=di(fi),Ht=di(!1),Gi=fi;function Er(t,i){var s=t.type.contextTypes;if(!s)return fi;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in s)d[g]=i[g];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=d),d}function Bt(t){return t=t.childContextTypes,t!=null}function ta(){Ve(Ht),Ve(It)}function Uh(t,i,s){if(It.current!==fi)throw Error(r(168));We(It,i),We(Ht,s)}function Lh(t,i,s){var u=t.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return s;u=u.getChildContext();for(var d in u)if(!(d in i))throw Error(r(108,Se(t)||"Unknown",d));return b({},s,u)}function na(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fi,Gi=It.current,We(It,t),We(Ht,Ht.current),!0}function Hh(t,i,s){var u=t.stateNode;if(!u)throw Error(r(169));s?(t=Lh(t,i,Gi),u.__reactInternalMemoizedMergedChildContext=t,Ve(Ht),Ve(It),We(It,t)):Ve(Ht),We(Ht,s)}var Wn=null,ia=!1,Hu=!1;function Bh(t){Wn===null?Wn=[t]:Wn.push(t)}function wS(t){ia=!0,Bh(t)}function hi(){if(!Hu&&Wn!==null){Hu=!0;var t=0,i=be;try{var s=Wn;for(be=1;t<s.length;t++){var u=s[t];do u=u(!0);while(u!==null)}Wn=null,ia=!1}catch(d){throw Wn!==null&&(Wn=Wn.slice(t+1)),xf(ou,hi),d}finally{be=i,Hu=!1}}return null}var _r=[],Cr=0,ra=null,oa=0,tn=[],nn=0,xi=null,Yn=1,jn="";function bi(t,i){_r[Cr++]=oa,_r[Cr++]=ra,ra=t,oa=i}function Gh(t,i,s){tn[nn++]=Yn,tn[nn++]=jn,tn[nn++]=xi,xi=t;var u=Yn;t=jn;var d=32-dn(u)-1;u&=~(1<<d),s+=1;var g=32-dn(i)+d;if(30<g){var v=d-d%5;g=(u&(1<<v)-1).toString(32),u>>=v,d-=v,Yn=1<<32-dn(i)+d|s<<d|u,jn=g+t}else Yn=1<<g|s<<d|u,jn=t}function Bu(t){t.return!==null&&(bi(t,1),Gh(t,1,0))}function Gu(t){for(;t===ra;)ra=_r[--Cr],_r[Cr]=null,oa=_r[--Cr],_r[Cr]=null;for(;t===xi;)xi=tn[--nn],tn[nn]=null,jn=tn[--nn],tn[nn]=null,Yn=tn[--nn],tn[nn]=null}var Xt=null,Kt=null,Qe=!1,hn=null;function xh(t,i){var s=an(5,null,null,0);s.elementType="DELETED",s.stateNode=i,s.return=t,i=t.deletions,i===null?(t.deletions=[s],t.flags|=16):i.push(s)}function bh(t,i){switch(t.tag){case 5:var s=t.type;return i=i.nodeType!==1||s.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,Xt=t,Kt=ci(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,Xt=t,Kt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(s=xi!==null?{id:Yn,overflow:jn}:null,t.memoizedState={dehydrated:i,treeContext:s,retryLane:1073741824},s=an(18,null,null,0),s.stateNode=i,s.return=t,t.child=s,Xt=t,Kt=null,!0):!1;default:return!1}}function xu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bu(t){if(Qe){var i=Kt;if(i){var s=i;if(!bh(t,i)){if(xu(t))throw Error(r(418));i=ci(s.nextSibling);var u=Xt;i&&bh(t,i)?xh(u,s):(t.flags=t.flags&-4097|2,Qe=!1,Xt=t)}}else{if(xu(t))throw Error(r(418));t.flags=t.flags&-4097|2,Qe=!1,Xt=t}}}function zh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function sa(t){if(t!==Xt)return!1;if(!Qe)return zh(t),Qe=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!Ou(t.type,t.memoizedProps)),i&&(i=Kt)){if(xu(t))throw $h(),Error(r(418));for(;i;)xh(t,i),i=ci(i.nextSibling)}if(zh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(i===0){Kt=ci(t.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++}t=t.nextSibling}Kt=null}}else Kt=Xt?ci(t.stateNode.nextSibling):null;return!0}function $h(){for(var t=Kt;t;)t=ci(t.nextSibling)}function Rr(){Kt=Xt=null,Qe=!1}function zu(t){hn===null?hn=[t]:hn.push(t)}var ES=$.ReactCurrentBatchConfig;function Mo(t,i,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var u=s.stateNode}if(!u)throw Error(r(147,t));var d=u,g=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(v){var A=d.refs;v===null?delete A[g]:A[g]=v},i._stringRef=g,i)}if(typeof t!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,t))}return t}function aa(t,i){throw t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function Wh(t){var i=t._init;return i(t._payload)}function Yh(t){function i(N,C){if(t){var D=N.deletions;D===null?(N.deletions=[C],N.flags|=16):D.push(C)}}function s(N,C){if(!t)return null;for(;C!==null;)i(N,C),C=C.sibling;return null}function u(N,C){for(N=new Map;C!==null;)C.key!==null?N.set(C.key,C):N.set(C.index,C),C=C.sibling;return N}function d(N,C){return N=Ti(N,C),N.index=0,N.sibling=null,N}function g(N,C,D){return N.index=D,t?(D=N.alternate,D!==null?(D=D.index,D<C?(N.flags|=2,C):D):(N.flags|=2,C)):(N.flags|=1048576,C)}function v(N){return t&&N.alternate===null&&(N.flags|=2),N}function A(N,C,D,z){return C===null||C.tag!==6?(C=Mc(D,N.mode,z),C.return=N,C):(C=d(C,D),C.return=N,C)}function w(N,C,D,z){var re=D.type;return re===W?L(N,C,D.props.children,z,D.key):C!==null&&(C.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===ve&&Wh(re)===C.type)?(z=d(C,D.props),z.ref=Mo(N,C,D),z.return=N,z):(z=ka(D.type,D.key,D.props,null,N.mode,z),z.ref=Mo(N,C,D),z.return=N,z)}function k(N,C,D,z){return C===null||C.tag!==4||C.stateNode.containerInfo!==D.containerInfo||C.stateNode.implementation!==D.implementation?(C=Fc(D,N.mode,z),C.return=N,C):(C=d(C,D.children||[]),C.return=N,C)}function L(N,C,D,z,re){return C===null||C.tag!==7?(C=Ki(D,N.mode,z,re),C.return=N,C):(C=d(C,D),C.return=N,C)}function G(N,C,D){if(typeof C=="string"&&C!==""||typeof C=="number")return C=Mc(""+C,N.mode,D),C.return=N,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case se:return D=ka(C.type,C.key,C.props,null,N.mode,D),D.ref=Mo(N,null,C),D.return=N,D;case M:return C=Fc(C,N.mode,D),C.return=N,C;case ve:var z=C._init;return G(N,z(C._payload),D)}if(Nn(C)||Y(C))return C=Ki(C,N.mode,D,null),C.return=N,C;aa(N,C)}return null}function U(N,C,D,z){var re=C!==null?C.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return re!==null?null:A(N,C,""+D,z);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case se:return D.key===re?w(N,C,D,z):null;case M:return D.key===re?k(N,C,D,z):null;case ve:return re=D._init,U(N,C,re(D._payload),z)}if(Nn(D)||Y(D))return re!==null?null:L(N,C,D,z,null);aa(N,D)}return null}function K(N,C,D,z,re){if(typeof z=="string"&&z!==""||typeof z=="number")return N=N.get(D)||null,A(C,N,""+z,re);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case se:return N=N.get(z.key===null?D:z.key)||null,w(C,N,z,re);case M:return N=N.get(z.key===null?D:z.key)||null,k(C,N,z,re);case ve:var ce=z._init;return K(N,C,D,ce(z._payload),re)}if(Nn(z)||Y(z))return N=N.get(D)||null,L(C,N,z,re,null);aa(C,z)}return null}function Z(N,C,D,z){for(var re=null,ce=null,de=C,ye=C=0,ft=null;de!==null&&ye<D.length;ye++){de.index>ye?(ft=de,de=null):ft=de.sibling;var Ge=U(N,de,D[ye],z);if(Ge===null){de===null&&(de=ft);break}t&&de&&Ge.alternate===null&&i(N,de),C=g(Ge,C,ye),ce===null?re=Ge:ce.sibling=Ge,ce=Ge,de=ft}if(ye===D.length)return s(N,de),Qe&&bi(N,ye),re;if(de===null){for(;ye<D.length;ye++)de=G(N,D[ye],z),de!==null&&(C=g(de,C,ye),ce===null?re=de:ce.sibling=de,ce=de);return Qe&&bi(N,ye),re}for(de=u(N,de);ye<D.length;ye++)ft=K(de,N,ye,D[ye],z),ft!==null&&(t&&ft.alternate!==null&&de.delete(ft.key===null?ye:ft.key),C=g(ft,C,ye),ce===null?re=ft:ce.sibling=ft,ce=ft);return t&&de.forEach(function(Ii){return i(N,Ii)}),Qe&&bi(N,ye),re}function te(N,C,D,z){var re=Y(D);if(typeof re!="function")throw Error(r(150));if(D=re.call(D),D==null)throw Error(r(151));for(var ce=re=null,de=C,ye=C=0,ft=null,Ge=D.next();de!==null&&!Ge.done;ye++,Ge=D.next()){de.index>ye?(ft=de,de=null):ft=de.sibling;var Ii=U(N,de,Ge.value,z);if(Ii===null){de===null&&(de=ft);break}t&&de&&Ii.alternate===null&&i(N,de),C=g(Ii,C,ye),ce===null?re=Ii:ce.sibling=Ii,ce=Ii,de=ft}if(Ge.done)return s(N,de),Qe&&bi(N,ye),re;if(de===null){for(;!Ge.done;ye++,Ge=D.next())Ge=G(N,Ge.value,z),Ge!==null&&(C=g(Ge,C,ye),ce===null?re=Ge:ce.sibling=Ge,ce=Ge);return Qe&&bi(N,ye),re}for(de=u(N,de);!Ge.done;ye++,Ge=D.next())Ge=K(de,N,ye,Ge.value,z),Ge!==null&&(t&&Ge.alternate!==null&&de.delete(Ge.key===null?ye:Ge.key),C=g(Ge,C,ye),ce===null?re=Ge:ce.sibling=Ge,ce=Ge);return t&&de.forEach(function(iy){return i(N,iy)}),Qe&&bi(N,ye),re}function it(N,C,D,z){if(typeof D=="object"&&D!==null&&D.type===W&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case se:e:{for(var re=D.key,ce=C;ce!==null;){if(ce.key===re){if(re=D.type,re===W){if(ce.tag===7){s(N,ce.sibling),C=d(ce,D.props.children),C.return=N,N=C;break e}}else if(ce.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===ve&&Wh(re)===ce.type){s(N,ce.sibling),C=d(ce,D.props),C.ref=Mo(N,ce,D),C.return=N,N=C;break e}s(N,ce);break}else i(N,ce);ce=ce.sibling}D.type===W?(C=Ki(D.props.children,N.mode,z,D.key),C.return=N,N=C):(z=ka(D.type,D.key,D.props,null,N.mode,z),z.ref=Mo(N,C,D),z.return=N,N=z)}return v(N);case M:e:{for(ce=D.key;C!==null;){if(C.key===ce)if(C.tag===4&&C.stateNode.containerInfo===D.containerInfo&&C.stateNode.implementation===D.implementation){s(N,C.sibling),C=d(C,D.children||[]),C.return=N,N=C;break e}else{s(N,C);break}else i(N,C);C=C.sibling}C=Fc(D,N.mode,z),C.return=N,N=C}return v(N);case ve:return ce=D._init,it(N,C,ce(D._payload),z)}if(Nn(D))return Z(N,C,D,z);if(Y(D))return te(N,C,D,z);aa(N,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,C!==null&&C.tag===6?(s(N,C.sibling),C=d(C,D),C.return=N,N=C):(s(N,C),C=Mc(D,N.mode,z),C.return=N,N=C),v(N)):s(N,C)}return it}var Pr=Yh(!0),jh=Yh(!1),la=di(null),ua=null,Nr=null,$u=null;function Wu(){$u=Nr=ua=null}function Yu(t){var i=la.current;Ve(la),t._currentValue=i}function ju(t,i,s){for(;t!==null;){var u=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),t===s)break;t=t.return}}function Dr(t,i){ua=t,$u=Nr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(Gt=!0),t.firstContext=null)}function rn(t){var i=t._currentValue;if($u!==t)if(t={context:t,memoizedValue:i,next:null},Nr===null){if(ua===null)throw Error(r(308));Nr=t,ua.dependencies={lanes:0,firstContext:t}}else Nr=Nr.next=t;return i}var zi=null;function Vu(t){zi===null?zi=[t]:zi.push(t)}function Vh(t,i,s,u){var d=i.interleaved;return d===null?(s.next=s,Vu(i)):(s.next=d.next,d.next=s),i.interleaved=s,Vn(t,u)}function Vn(t,i){t.lanes|=i;var s=t.alternate;for(s!==null&&(s.lanes|=i),s=t,t=t.return;t!==null;)t.childLanes|=i,s=t.alternate,s!==null&&(s.childLanes|=i),s=t,t=t.return;return s.tag===3?s.stateNode:null}var gi=!1;function Xu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xh(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function pi(t,i,s){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(He&2)!==0){var d=u.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),u.pending=i,Vn(t,s)}return d=u.interleaved,d===null?(i.next=i,Vu(u)):(i.next=d.next,d.next=i),u.interleaved=i,Vn(t,s)}function ca(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194240)!==0)){var u=i.lanes;u&=t.pendingLanes,s|=u,i.lanes=s,lu(t,s)}}function Kh(t,i){var s=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var d=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var v={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};g===null?d=g=v:g=g.next=v,s=s.next}while(s!==null);g===null?d=g=i:g=g.next=i}else d=g=i;s={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:u.shared,effects:u.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}function da(t,i,s,u){var d=t.updateQueue;gi=!1;var g=d.firstBaseUpdate,v=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var w=A,k=w.next;w.next=null,v===null?g=k:v.next=k,v=w;var L=t.alternate;L!==null&&(L=L.updateQueue,A=L.lastBaseUpdate,A!==v&&(A===null?L.firstBaseUpdate=k:A.next=k,L.lastBaseUpdate=w))}if(g!==null){var G=d.baseState;v=0,L=k=w=null,A=g;do{var U=A.lane,K=A.eventTime;if((u&U)===U){L!==null&&(L=L.next={eventTime:K,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var Z=t,te=A;switch(U=i,K=s,te.tag){case 1:if(Z=te.payload,typeof Z=="function"){G=Z.call(K,G,U);break e}G=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=te.payload,U=typeof Z=="function"?Z.call(K,G,U):Z,U==null)break e;G=b({},G,U);break e;case 2:gi=!0}}A.callback!==null&&A.lane!==0&&(t.flags|=64,U=d.effects,U===null?d.effects=[A]:U.push(A))}else K={eventTime:K,lane:U,tag:A.tag,payload:A.payload,callback:A.callback,next:null},L===null?(k=L=K,w=G):L=L.next=K,v|=U;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;U=A,A=U.next,U.next=null,d.lastBaseUpdate=U,d.shared.pending=null}}while(!0);if(L===null&&(w=G),d.baseState=w,d.firstBaseUpdate=k,d.lastBaseUpdate=L,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else g===null&&(d.shared.lanes=0);Yi|=v,t.lanes=v,t.memoizedState=G}}function Qh(t,i,s){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var u=t[i],d=u.callback;if(d!==null){if(u.callback=null,u=s,typeof d!="function")throw Error(r(191,d));d.call(u)}}}var Fo={},On=di(Fo),Uo=di(Fo),Lo=di(Fo);function $i(t){if(t===Fo)throw Error(r(174));return t}function Ku(t,i){switch(We(Lo,i),We(Uo,t),We(On,Fo),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Ql(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=Ql(i,t)}Ve(On),We(On,i)}function kr(){Ve(On),Ve(Uo),Ve(Lo)}function Zh(t){$i(Lo.current);var i=$i(On.current),s=Ql(i,t.type);i!==s&&(We(Uo,t),We(On,s))}function Qu(t){Uo.current===t&&(Ve(On),Ve(Uo))}var Je=di(0);function fa(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Zu=[];function qu(){for(var t=0;t<Zu.length;t++)Zu[t]._workInProgressVersionPrimary=null;Zu.length=0}var ha=$.ReactCurrentDispatcher,Ju=$.ReactCurrentBatchConfig,Wi=0,et=null,lt=null,ct=null,ga=!1,Ho=!1,Bo=0,_S=0;function wt(){throw Error(r(321))}function ec(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!fn(t[s],i[s]))return!1;return!0}function tc(t,i,s,u,d,g){if(Wi=g,et=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ha.current=t===null||t.memoizedState===null?NS:DS,t=s(u,d),Ho){g=0;do{if(Ho=!1,Bo=0,25<=g)throw Error(r(301));g+=1,ct=lt=null,i.updateQueue=null,ha.current=kS,t=s(u,d)}while(Ho)}if(ha.current=va,i=lt!==null&&lt.next!==null,Wi=0,ct=lt=et=null,ga=!1,i)throw Error(r(300));return t}function nc(){var t=Bo!==0;return Bo=0,t}function Mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?et.memoizedState=ct=t:ct=ct.next=t,ct}function on(){if(lt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var i=ct===null?et.memoizedState:ct.next;if(i!==null)ct=i,lt=t;else{if(t===null)throw Error(r(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ct===null?et.memoizedState=ct=t:ct=ct.next=t}return ct}function Go(t,i){return typeof i=="function"?i(t):i}function ic(t){var i=on(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var u=lt,d=u.baseQueue,g=s.pending;if(g!==null){if(d!==null){var v=d.next;d.next=g.next,g.next=v}u.baseQueue=d=g,s.pending=null}if(d!==null){g=d.next,u=u.baseState;var A=v=null,w=null,k=g;do{var L=k.lane;if((Wi&L)===L)w!==null&&(w=w.next={lane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),u=k.hasEagerState?k.eagerState:t(u,k.action);else{var G={lane:L,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null};w===null?(A=w=G,v=u):w=w.next=G,et.lanes|=L,Yi|=L}k=k.next}while(k!==null&&k!==g);w===null?v=u:w.next=A,fn(u,i.memoizedState)||(Gt=!0),i.memoizedState=u,i.baseState=v,i.baseQueue=w,s.lastRenderedState=u}if(t=s.interleaved,t!==null){d=t;do g=d.lane,et.lanes|=g,Yi|=g,d=d.next;while(d!==t)}else d===null&&(s.lanes=0);return[i.memoizedState,s.dispatch]}function rc(t){var i=on(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var u=s.dispatch,d=s.pending,g=i.memoizedState;if(d!==null){s.pending=null;var v=d=d.next;do g=t(g,v.action),v=v.next;while(v!==d);fn(g,i.memoizedState)||(Gt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),s.lastRenderedState=g}return[g,u]}function qh(){}function Jh(t,i){var s=et,u=on(),d=i(),g=!fn(u.memoizedState,d);if(g&&(u.memoizedState=d,Gt=!0),u=u.queue,oc(ng.bind(null,s,u,t),[t]),u.getSnapshot!==i||g||ct!==null&&ct.memoizedState.tag&1){if(s.flags|=2048,xo(9,tg.bind(null,s,u,d,i),void 0,null),dt===null)throw Error(r(349));(Wi&30)!==0||eg(s,i,d)}return d}function eg(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=et.updateQueue,i===null?(i={lastEffect:null,stores:null},et.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function tg(t,i,s,u){i.value=s,i.getSnapshot=u,ig(i)&&rg(t)}function ng(t,i,s){return s(function(){ig(i)&&rg(t)})}function ig(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!fn(t,s)}catch{return!0}}function rg(t){var i=Vn(t,1);i!==null&&vn(i,t,1,-1)}function og(t){var i=Mn();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:t},i.queue=t,t=t.dispatch=PS.bind(null,et,t),[i.memoizedState,t]}function xo(t,i,s,u){return t={tag:t,create:i,destroy:s,deps:u,next:null},i=et.updateQueue,i===null?(i={lastEffect:null,stores:null},et.updateQueue=i,i.lastEffect=t.next=t):(s=i.lastEffect,s===null?i.lastEffect=t.next=t:(u=s.next,s.next=t,t.next=u,i.lastEffect=t)),t}function sg(){return on().memoizedState}function pa(t,i,s,u){var d=Mn();et.flags|=t,d.memoizedState=xo(1|i,s,void 0,u===void 0?null:u)}function ma(t,i,s,u){var d=on();u=u===void 0?null:u;var g=void 0;if(lt!==null){var v=lt.memoizedState;if(g=v.destroy,u!==null&&ec(u,v.deps)){d.memoizedState=xo(i,s,g,u);return}}et.flags|=t,d.memoizedState=xo(1|i,s,g,u)}function ag(t,i){return pa(8390656,8,t,i)}function oc(t,i){return ma(2048,8,t,i)}function lg(t,i){return ma(4,2,t,i)}function ug(t,i){return ma(4,4,t,i)}function cg(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function dg(t,i,s){return s=s!=null?s.concat([t]):null,ma(4,4,cg.bind(null,i,t),s)}function sc(){}function fg(t,i){var s=on();i=i===void 0?null:i;var u=s.memoizedState;return u!==null&&i!==null&&ec(i,u[1])?u[0]:(s.memoizedState=[t,i],t)}function hg(t,i){var s=on();i=i===void 0?null:i;var u=s.memoizedState;return u!==null&&i!==null&&ec(i,u[1])?u[0]:(t=t(),s.memoizedState=[t,i],t)}function gg(t,i,s){return(Wi&21)===0?(t.baseState&&(t.baseState=!1,Gt=!0),t.memoizedState=s):(fn(s,i)||(s=Wf(),et.lanes|=s,Yi|=s,t.baseState=!0),i)}function CS(t,i){var s=be;be=s!==0&&4>s?s:4,t(!0);var u=Ju.transition;Ju.transition={};try{t(!1),i()}finally{be=s,Ju.transition=u}}function pg(){return on().memoizedState}function RS(t,i,s){var u=yi(t);if(s={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null},mg(t))vg(i,s);else if(s=Vh(t,i,s,u),s!==null){var d=Nt();vn(s,t,u,d),Sg(s,i,u)}}function PS(t,i,s){var u=yi(t),d={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null};if(mg(t))vg(i,d);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var v=i.lastRenderedState,A=g(v,s);if(d.hasEagerState=!0,d.eagerState=A,fn(A,v)){var w=i.interleaved;w===null?(d.next=d,Vu(i)):(d.next=w.next,w.next=d),i.interleaved=d;return}}catch{}finally{}s=Vh(t,i,d,u),s!==null&&(d=Nt(),vn(s,t,u,d),Sg(s,i,u))}}function mg(t){var i=t.alternate;return t===et||i!==null&&i===et}function vg(t,i){Ho=ga=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function Sg(t,i,s){if((s&4194240)!==0){var u=i.lanes;u&=t.pendingLanes,s|=u,i.lanes=s,lu(t,s)}}var va={readContext:rn,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},NS={readContext:rn,useCallback:function(t,i){return Mn().memoizedState=[t,i===void 0?null:i],t},useContext:rn,useEffect:ag,useImperativeHandle:function(t,i,s){return s=s!=null?s.concat([t]):null,pa(4194308,4,cg.bind(null,i,t),s)},useLayoutEffect:function(t,i){return pa(4194308,4,t,i)},useInsertionEffect:function(t,i){return pa(4,2,t,i)},useMemo:function(t,i){var s=Mn();return i=i===void 0?null:i,t=t(),s.memoizedState=[t,i],t},useReducer:function(t,i,s){var u=Mn();return i=s!==void 0?s(i):i,u.memoizedState=u.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},u.queue=t,t=t.dispatch=RS.bind(null,et,t),[u.memoizedState,t]},useRef:function(t){var i=Mn();return t={current:t},i.memoizedState=t},useState:og,useDebugValue:sc,useDeferredValue:function(t){return Mn().memoizedState=t},useTransition:function(){var t=og(!1),i=t[0];return t=CS.bind(null,t[1]),Mn().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,s){var u=et,d=Mn();if(Qe){if(s===void 0)throw Error(r(407));s=s()}else{if(s=i(),dt===null)throw Error(r(349));(Wi&30)!==0||eg(u,i,s)}d.memoizedState=s;var g={value:s,getSnapshot:i};return d.queue=g,ag(ng.bind(null,u,g,t),[t]),u.flags|=2048,xo(9,tg.bind(null,u,g,s,i),void 0,null),s},useId:function(){var t=Mn(),i=dt.identifierPrefix;if(Qe){var s=jn,u=Yn;s=(u&~(1<<32-dn(u)-1)).toString(32)+s,i=":"+i+"R"+s,s=Bo++,0<s&&(i+="H"+s.toString(32)),i+=":"}else s=_S++,i=":"+i+"r"+s.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},DS={readContext:rn,useCallback:fg,useContext:rn,useEffect:oc,useImperativeHandle:dg,useInsertionEffect:lg,useLayoutEffect:ug,useMemo:hg,useReducer:ic,useRef:sg,useState:function(){return ic(Go)},useDebugValue:sc,useDeferredValue:function(t){var i=on();return gg(i,lt.memoizedState,t)},useTransition:function(){var t=ic(Go)[0],i=on().memoizedState;return[t,i]},useMutableSource:qh,useSyncExternalStore:Jh,useId:pg,unstable_isNewReconciler:!1},kS={readContext:rn,useCallback:fg,useContext:rn,useEffect:oc,useImperativeHandle:dg,useInsertionEffect:lg,useLayoutEffect:ug,useMemo:hg,useReducer:rc,useRef:sg,useState:function(){return rc(Go)},useDebugValue:sc,useDeferredValue:function(t){var i=on();return lt===null?i.memoizedState=t:gg(i,lt.memoizedState,t)},useTransition:function(){var t=rc(Go)[0],i=on().memoizedState;return[t,i]},useMutableSource:qh,useSyncExternalStore:Jh,useId:pg,unstable_isNewReconciler:!1};function gn(t,i){if(t&&t.defaultProps){i=b({},i),t=t.defaultProps;for(var s in t)i[s]===void 0&&(i[s]=t[s]);return i}return i}function ac(t,i,s,u){i=t.memoizedState,s=s(u,i),s=s==null?i:b({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Sa={isMounted:function(t){return(t=t._reactInternals)?Hi(t)===t:!1},enqueueSetState:function(t,i,s){t=t._reactInternals;var u=Nt(),d=yi(t),g=Xn(u,d);g.payload=i,s!=null&&(g.callback=s),i=pi(t,g,d),i!==null&&(vn(i,t,d,u),ca(i,t,d))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var u=Nt(),d=yi(t),g=Xn(u,d);g.tag=1,g.payload=i,s!=null&&(g.callback=s),i=pi(t,g,d),i!==null&&(vn(i,t,d,u),ca(i,t,d))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=Nt(),u=yi(t),d=Xn(s,u);d.tag=2,i!=null&&(d.callback=i),i=pi(t,d,u),i!==null&&(vn(i,t,u,s),ca(i,t,u))}};function yg(t,i,s,u,d,g,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,g,v):i.prototype&&i.prototype.isPureReactComponent?!Co(s,u)||!Co(d,g):!0}function Ag(t,i,s){var u=!1,d=fi,g=i.contextType;return typeof g=="object"&&g!==null?g=rn(g):(d=Bt(i)?Gi:It.current,u=i.contextTypes,g=(u=u!=null)?Er(t,d):fi),i=new i(s,g),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Sa,t.stateNode=i,i._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=g),i}function Tg(t,i,s,u){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,u),i.state!==t&&Sa.enqueueReplaceState(i,i.state,null)}function lc(t,i,s,u){var d=t.stateNode;d.props=s,d.state=t.memoizedState,d.refs={},Xu(t);var g=i.contextType;typeof g=="object"&&g!==null?d.context=rn(g):(g=Bt(i)?Gi:It.current,d.context=Er(t,g)),d.state=t.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(ac(t,i,g,s),d.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&Sa.enqueueReplaceState(d,d.state,null),da(t,s,d,u),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function Or(t,i){try{var s="",u=i;do s+=he(u),u=u.return;while(u);var d=s}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:t,source:i,stack:d,digest:null}}function uc(t,i,s){return{value:t,source:null,stack:s??null,digest:i??null}}function cc(t,i){try{console.error(i.value)}catch(s){setTimeout(function(){throw s})}}var OS=typeof WeakMap=="function"?WeakMap:Map;function Ig(t,i,s){s=Xn(-1,s),s.tag=3,s.payload={element:null};var u=i.value;return s.callback=function(){_a||(_a=!0,_c=u),cc(t,i)},s}function wg(t,i,s){s=Xn(-1,s),s.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var d=i.value;s.payload=function(){return u(d)},s.callback=function(){cc(t,i)}}var g=t.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(s.callback=function(){cc(t,i),typeof u!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),s}function Eg(t,i,s){var u=t.pingCache;if(u===null){u=t.pingCache=new OS;var d=new Set;u.set(i,d)}else d=u.get(i),d===void 0&&(d=new Set,u.set(i,d));d.has(s)||(d.add(s),t=jS.bind(null,t,i,s),i.then(t,t))}function _g(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function Cg(t,i,s,u,d){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(i=Xn(-1,1),i.tag=2,pi(s,i,1))),s.lanes|=1),t):(t.flags|=65536,t.lanes=d,t)}var MS=$.ReactCurrentOwner,Gt=!1;function Pt(t,i,s,u){i.child=t===null?jh(i,null,s,u):Pr(i,t.child,s,u)}function Rg(t,i,s,u,d){s=s.render;var g=i.ref;return Dr(i,d),u=tc(t,i,s,u,g,d),s=nc(),t!==null&&!Gt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~d,Kn(t,i,d)):(Qe&&s&&Bu(i),i.flags|=1,Pt(t,i,u,d),i.child)}function Pg(t,i,s,u,d){if(t===null){var g=s.type;return typeof g=="function"&&!Oc(g)&&g.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(i.tag=15,i.type=g,Ng(t,i,g,u,d)):(t=ka(s.type,null,u,i,i.mode,d),t.ref=i.ref,t.return=i,i.child=t)}if(g=t.child,(t.lanes&d)===0){var v=g.memoizedProps;if(s=s.compare,s=s!==null?s:Co,s(v,u)&&t.ref===i.ref)return Kn(t,i,d)}return i.flags|=1,t=Ti(g,u),t.ref=i.ref,t.return=i,i.child=t}function Ng(t,i,s,u,d){if(t!==null){var g=t.memoizedProps;if(Co(g,u)&&t.ref===i.ref)if(Gt=!1,i.pendingProps=u=g,(t.lanes&d)!==0)(t.flags&131072)!==0&&(Gt=!0);else return i.lanes=t.lanes,Kn(t,i,d)}return dc(t,i,s,u,d)}function Dg(t,i,s){var u=i.pendingProps,d=u.children,g=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Fr,Qt),Qt|=s;else{if((s&1073741824)===0)return t=g!==null?g.baseLanes|s:s,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,We(Fr,Qt),Qt|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=g!==null?g.baseLanes:s,We(Fr,Qt),Qt|=u}else g!==null?(u=g.baseLanes|s,i.memoizedState=null):u=s,We(Fr,Qt),Qt|=u;return Pt(t,i,d,s),i.child}function kg(t,i){var s=i.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(i.flags|=512,i.flags|=2097152)}function dc(t,i,s,u,d){var g=Bt(s)?Gi:It.current;return g=Er(i,g),Dr(i,d),s=tc(t,i,s,u,g,d),u=nc(),t!==null&&!Gt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~d,Kn(t,i,d)):(Qe&&u&&Bu(i),i.flags|=1,Pt(t,i,s,d),i.child)}function Og(t,i,s,u,d){if(Bt(s)){var g=!0;na(i)}else g=!1;if(Dr(i,d),i.stateNode===null)Aa(t,i),Ag(i,s,u),lc(i,s,u,d),u=!0;else if(t===null){var v=i.stateNode,A=i.memoizedProps;v.props=A;var w=v.context,k=s.contextType;typeof k=="object"&&k!==null?k=rn(k):(k=Bt(s)?Gi:It.current,k=Er(i,k));var L=s.getDerivedStateFromProps,G=typeof L=="function"||typeof v.getSnapshotBeforeUpdate=="function";G||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==u||w!==k)&&Tg(i,v,u,k),gi=!1;var U=i.memoizedState;v.state=U,da(i,u,v,d),w=i.memoizedState,A!==u||U!==w||Ht.current||gi?(typeof L=="function"&&(ac(i,s,L,u),w=i.memoizedState),(A=gi||yg(i,s,A,u,U,w,k))?(G||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=w),v.props=u,v.state=w,v.context=k,u=A):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{v=i.stateNode,Xh(t,i),A=i.memoizedProps,k=i.type===i.elementType?A:gn(i.type,A),v.props=k,G=i.pendingProps,U=v.context,w=s.contextType,typeof w=="object"&&w!==null?w=rn(w):(w=Bt(s)?Gi:It.current,w=Er(i,w));var K=s.getDerivedStateFromProps;(L=typeof K=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==G||U!==w)&&Tg(i,v,u,w),gi=!1,U=i.memoizedState,v.state=U,da(i,u,v,d);var Z=i.memoizedState;A!==G||U!==Z||Ht.current||gi?(typeof K=="function"&&(ac(i,s,K,u),Z=i.memoizedState),(k=gi||yg(i,s,k,u,U,Z,w)||!1)?(L||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,Z,w),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,Z,w)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===t.memoizedProps&&U===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&U===t.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Z),v.props=u,v.state=Z,v.context=w,u=k):(typeof v.componentDidUpdate!="function"||A===t.memoizedProps&&U===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&U===t.memoizedState||(i.flags|=1024),u=!1)}return fc(t,i,s,u,g,d)}function fc(t,i,s,u,d,g){kg(t,i);var v=(i.flags&128)!==0;if(!u&&!v)return d&&Hh(i,s,!1),Kn(t,i,g);u=i.stateNode,MS.current=i;var A=v&&typeof s.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,t!==null&&v?(i.child=Pr(i,t.child,null,g),i.child=Pr(i,null,A,g)):Pt(t,i,A,g),i.memoizedState=u.state,d&&Hh(i,s,!0),i.child}function Mg(t){var i=t.stateNode;i.pendingContext?Uh(t,i.pendingContext,i.pendingContext!==i.context):i.context&&Uh(t,i.context,!1),Ku(t,i.containerInfo)}function Fg(t,i,s,u,d){return Rr(),zu(d),i.flags|=256,Pt(t,i,s,u),i.child}var hc={dehydrated:null,treeContext:null,retryLane:0};function gc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ug(t,i,s){var u=i.pendingProps,d=Je.current,g=!1,v=(i.flags&128)!==0,A;if((A=v)||(A=t!==null&&t.memoizedState===null?!1:(d&2)!==0),A?(g=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),We(Je,d&1),t===null)return bu(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=u.children,t=u.fallback,g?(u=i.mode,g=i.child,v={mode:"hidden",children:v},(u&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=v):g=Oa(v,u,0,null),t=Ki(t,u,s,null),g.return=i,t.return=i,g.sibling=t,i.child=g,i.child.memoizedState=gc(s),i.memoizedState=hc,t):pc(i,v));if(d=t.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return FS(t,i,v,u,A,d,s);if(g){g=u.fallback,v=i.mode,d=t.child,A=d.sibling;var w={mode:"hidden",children:u.children};return(v&1)===0&&i.child!==d?(u=i.child,u.childLanes=0,u.pendingProps=w,i.deletions=null):(u=Ti(d,w),u.subtreeFlags=d.subtreeFlags&14680064),A!==null?g=Ti(A,g):(g=Ki(g,v,s,null),g.flags|=2),g.return=i,u.return=i,u.sibling=g,i.child=u,u=g,g=i.child,v=t.child.memoizedState,v=v===null?gc(s):{baseLanes:v.baseLanes|s,cachePool:null,transitions:v.transitions},g.memoizedState=v,g.childLanes=t.childLanes&~s,i.memoizedState=hc,u}return g=t.child,t=g.sibling,u=Ti(g,{mode:"visible",children:u.children}),(i.mode&1)===0&&(u.lanes=s),u.return=i,u.sibling=null,t!==null&&(s=i.deletions,s===null?(i.deletions=[t],i.flags|=16):s.push(t)),i.child=u,i.memoizedState=null,u}function pc(t,i){return i=Oa({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function ya(t,i,s,u){return u!==null&&zu(u),Pr(i,t.child,null,s),t=pc(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function FS(t,i,s,u,d,g,v){if(s)return i.flags&256?(i.flags&=-257,u=uc(Error(r(422))),ya(t,i,v,u)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(g=u.fallback,d=i.mode,u=Oa({mode:"visible",children:u.children},d,0,null),g=Ki(g,d,v,null),g.flags|=2,u.return=i,g.return=i,u.sibling=g,i.child=u,(i.mode&1)!==0&&Pr(i,t.child,null,v),i.child.memoizedState=gc(v),i.memoizedState=hc,g);if((i.mode&1)===0)return ya(t,i,v,null);if(d.data==="$!"){if(u=d.nextSibling&&d.nextSibling.dataset,u)var A=u.dgst;return u=A,g=Error(r(419)),u=uc(g,u,void 0),ya(t,i,v,u)}if(A=(v&t.childLanes)!==0,Gt||A){if(u=dt,u!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(u.suspendedLanes|v))!==0?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Vn(t,d),vn(u,t,d,-1))}return kc(),u=uc(Error(r(421))),ya(t,i,v,u)}return d.data==="$?"?(i.flags|=128,i.child=t.child,i=VS.bind(null,t),d._reactRetry=i,null):(t=g.treeContext,Kt=ci(d.nextSibling),Xt=i,Qe=!0,hn=null,t!==null&&(tn[nn++]=Yn,tn[nn++]=jn,tn[nn++]=xi,Yn=t.id,jn=t.overflow,xi=i),i=pc(i,u.children),i.flags|=4096,i)}function Lg(t,i,s){t.lanes|=i;var u=t.alternate;u!==null&&(u.lanes|=i),ju(t.return,i,s)}function mc(t,i,s,u,d){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:d}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=s,g.tailMode=d)}function Hg(t,i,s){var u=i.pendingProps,d=u.revealOrder,g=u.tail;if(Pt(t,i,u.children,s),u=Je.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lg(t,s,i);else if(t.tag===19)Lg(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(We(Je,u),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(s=i.child,d=null;s!==null;)t=s.alternate,t!==null&&fa(t)===null&&(d=s),s=s.sibling;s=d,s===null?(d=i.child,i.child=null):(d=s.sibling,s.sibling=null),mc(i,!1,d,s,g);break;case"backwards":for(s=null,d=i.child,i.child=null;d!==null;){if(t=d.alternate,t!==null&&fa(t)===null){i.child=d;break}t=d.sibling,d.sibling=s,s=d,d=t}mc(i,!0,s,null,g);break;case"together":mc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Aa(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function Kn(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),Yi|=i.lanes,(s&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,s=Ti(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=Ti(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function US(t,i,s){switch(i.tag){case 3:Mg(i),Rr();break;case 5:Zh(i);break;case 1:Bt(i.type)&&na(i);break;case 4:Ku(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,d=i.memoizedProps.value;We(la,u._currentValue),u._currentValue=d;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(We(Je,Je.current&1),i.flags|=128,null):(s&i.child.childLanes)!==0?Ug(t,i,s):(We(Je,Je.current&1),t=Kn(t,i,s),t!==null?t.sibling:null);We(Je,Je.current&1);break;case 19:if(u=(s&i.childLanes)!==0,(t.flags&128)!==0){if(u)return Hg(t,i,s);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),We(Je,Je.current),u)break;return null;case 22:case 23:return i.lanes=0,Dg(t,i,s)}return Kn(t,i,s)}var Bg,vc,Gg,xg;Bg=function(t,i){for(var s=i.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},vc=function(){},Gg=function(t,i,s,u){var d=t.memoizedProps;if(d!==u){t=i.stateNode,$i(On.current);var g=null;switch(s){case"input":d=Ke(t,d),u=Ke(t,u),g=[];break;case"select":d=b({},d,{value:void 0}),u=b({},u,{value:void 0}),g=[];break;case"textarea":d=Li(t,d),u=Li(t,u),g=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Js)}Zl(s,u);var v;s=null;for(k in d)if(!u.hasOwnProperty(k)&&d.hasOwnProperty(k)&&d[k]!=null)if(k==="style"){var A=d[k];for(v in A)A.hasOwnProperty(v)&&(s||(s={}),s[v]="")}else k!=="dangerouslySetInnerHTML"&&k!=="children"&&k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(a.hasOwnProperty(k)?g||(g=[]):(g=g||[]).push(k,null));for(k in u){var w=u[k];if(A=d!=null?d[k]:void 0,u.hasOwnProperty(k)&&w!==A&&(w!=null||A!=null))if(k==="style")if(A){for(v in A)!A.hasOwnProperty(v)||w&&w.hasOwnProperty(v)||(s||(s={}),s[v]="");for(v in w)w.hasOwnProperty(v)&&A[v]!==w[v]&&(s||(s={}),s[v]=w[v])}else s||(g||(g=[]),g.push(k,s)),s=w;else k==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,A=A?A.__html:void 0,w!=null&&A!==w&&(g=g||[]).push(k,w)):k==="children"?typeof w!="string"&&typeof w!="number"||(g=g||[]).push(k,""+w):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&(a.hasOwnProperty(k)?(w!=null&&k==="onScroll"&&je("scroll",t),g||A===w||(g=[])):(g=g||[]).push(k,w))}s&&(g=g||[]).push("style",s);var k=g;(i.updateQueue=k)&&(i.flags|=4)}},xg=function(t,i,s,u){s!==u&&(i.flags|=4)};function bo(t,i){if(!Qe)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Et(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,u=0;if(i)for(var d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=u,t.childLanes=s,i}function LS(t,i,s){var u=i.pendingProps;switch(Gu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(i),null;case 1:return Bt(i.type)&&ta(),Et(i),null;case 3:return u=i.stateNode,kr(),Ve(Ht),Ve(It),qu(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(sa(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,hn!==null&&(Pc(hn),hn=null))),vc(t,i),Et(i),null;case 5:Qu(i);var d=$i(Lo.current);if(s=i.type,t!==null&&i.stateNode!=null)Gg(t,i,s,u,d),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(r(166));return Et(i),null}if(t=$i(On.current),sa(i)){u=i.stateNode,s=i.type;var g=i.memoizedProps;switch(u[kn]=i,u[ko]=g,t=(i.mode&1)!==0,s){case"dialog":je("cancel",u),je("close",u);break;case"iframe":case"object":case"embed":je("load",u);break;case"video":case"audio":for(d=0;d<Po.length;d++)je(Po[d],u);break;case"source":je("error",u);break;case"img":case"image":case"link":je("error",u),je("load",u);break;case"details":je("toggle",u);break;case"input":Ye(u,g),je("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!g.multiple},je("invalid",u);break;case"textarea":wf(u,g),je("invalid",u)}Zl(s,g),d=null;for(var v in g)if(g.hasOwnProperty(v)){var A=g[v];v==="children"?typeof A=="string"?u.textContent!==A&&(g.suppressHydrationWarning!==!0&&qs(u.textContent,A,t),d=["children",A]):typeof A=="number"&&u.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&qs(u.textContent,A,t),d=["children",""+A]):a.hasOwnProperty(v)&&A!=null&&v==="onScroll"&&je("scroll",u)}switch(s){case"input":Ne(u),en(u,g,!0);break;case"textarea":Ne(u),_f(u);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(u.onclick=Js)}u=d,i.updateQueue=u,u!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cf(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=v.createElement(s,{is:u.is}):(t=v.createElement(s),s==="select"&&(v=t,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):t=v.createElementNS(t,s),t[kn]=i,t[ko]=u,Bg(t,i,!1,!1),i.stateNode=t;e:{switch(v=ql(s,u),s){case"dialog":je("cancel",t),je("close",t),d=u;break;case"iframe":case"object":case"embed":je("load",t),d=u;break;case"video":case"audio":for(d=0;d<Po.length;d++)je(Po[d],t);d=u;break;case"source":je("error",t),d=u;break;case"img":case"image":case"link":je("error",t),je("load",t),d=u;break;case"details":je("toggle",t),d=u;break;case"input":Ye(t,u),d=Ke(t,u),je("invalid",t);break;case"option":d=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},d=b({},u,{value:void 0}),je("invalid",t);break;case"textarea":wf(t,u),d=Li(t,u),je("invalid",t);break;default:d=u}Zl(s,d),A=d;for(g in A)if(A.hasOwnProperty(g)){var w=A[g];g==="style"?Nf(t,w):g==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&Rf(t,w)):g==="children"?typeof w=="string"?(s!=="textarea"||w!=="")&&lo(t,w):typeof w=="number"&&lo(t,""+w):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(a.hasOwnProperty(g)?w!=null&&g==="onScroll"&&je("scroll",t):w!=null&&H(t,g,w,v))}switch(s){case"input":Ne(t),en(t,u,!1);break;case"textarea":Ne(t),_f(t);break;case"option":u.value!=null&&t.setAttribute("value",""+me(u.value));break;case"select":t.multiple=!!u.multiple,g=u.value,g!=null?ii(t,!!u.multiple,g,!1):u.defaultValue!=null&&ii(t,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(t.onclick=Js)}switch(s){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Et(i),null;case 6:if(t&&i.stateNode!=null)xg(t,i,t.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=$i(Lo.current),$i(On.current),sa(i)){if(u=i.stateNode,s=i.memoizedProps,u[kn]=i,(g=u.nodeValue!==s)&&(t=Xt,t!==null))switch(t.tag){case 3:qs(u.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qs(u.nodeValue,s,(t.mode&1)!==0)}g&&(i.flags|=4)}else u=(s.nodeType===9?s:s.ownerDocument).createTextNode(u),u[kn]=i,i.stateNode=u}return Et(i),null;case 13:if(Ve(Je),u=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&Kt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)$h(),Rr(),i.flags|=98560,g=!1;else if(g=sa(i),u!==null&&u.dehydrated!==null){if(t===null){if(!g)throw Error(r(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[kn]=i}else Rr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Et(i),g=!1}else hn!==null&&(Pc(hn),hn=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=s,i):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(Je.current&1)!==0?ut===0&&(ut=3):kc())),i.updateQueue!==null&&(i.flags|=4),Et(i),null);case 4:return kr(),vc(t,i),t===null&&No(i.stateNode.containerInfo),Et(i),null;case 10:return Yu(i.type._context),Et(i),null;case 17:return Bt(i.type)&&ta(),Et(i),null;case 19:if(Ve(Je),g=i.memoizedState,g===null)return Et(i),null;if(u=(i.flags&128)!==0,v=g.rendering,v===null)if(u)bo(g,!1);else{if(ut!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(v=fa(t),v!==null){for(i.flags|=128,bo(g,!1),u=v.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=s,s=i.child;s!==null;)g=s,t=u,g.flags&=14680066,v=g.alternate,v===null?(g.childLanes=0,g.lanes=t,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=v.childLanes,g.lanes=v.lanes,g.child=v.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=v.memoizedProps,g.memoizedState=v.memoizedState,g.updateQueue=v.updateQueue,g.type=v.type,t=v.dependencies,g.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return We(Je,Je.current&1|2),i.child}t=t.sibling}g.tail!==null&&nt()>Ur&&(i.flags|=128,u=!0,bo(g,!1),i.lanes=4194304)}else{if(!u)if(t=fa(v),t!==null){if(i.flags|=128,u=!0,s=t.updateQueue,s!==null&&(i.updateQueue=s,i.flags|=4),bo(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Qe)return Et(i),null}else 2*nt()-g.renderingStartTime>Ur&&s!==1073741824&&(i.flags|=128,u=!0,bo(g,!1),i.lanes=4194304);g.isBackwards?(v.sibling=i.child,i.child=v):(s=g.last,s!==null?s.sibling=v:i.child=v,g.last=v)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=nt(),i.sibling=null,s=Je.current,We(Je,u?s&1|2:s&1),i):(Et(i),null);case 22:case 23:return Dc(),u=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(i.flags|=8192),u&&(i.mode&1)!==0?(Qt&1073741824)!==0&&(Et(i),i.subtreeFlags&6&&(i.flags|=8192)):Et(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function HS(t,i){switch(Gu(i),i.tag){case 1:return Bt(i.type)&&ta(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return kr(),Ve(Ht),Ve(It),qu(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return Qu(i),null;case 13:if(Ve(Je),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Rr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Ve(Je),null;case 4:return kr(),null;case 10:return Yu(i.type._context),null;case 22:case 23:return Dc(),null;case 24:return null;default:return null}}var Ta=!1,_t=!1,BS=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Mr(t,i){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(u){tt(t,i,u)}else s.current=null}function Sc(t,i,s){try{s()}catch(u){tt(t,i,u)}}var bg=!1;function GS(t,i){if(Du=bs,t=yh(),Iu(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var d=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var v=0,A=-1,w=-1,k=0,L=0,G=t,U=null;t:for(;;){for(var K;G!==s||d!==0&&G.nodeType!==3||(A=v+d),G!==g||u!==0&&G.nodeType!==3||(w=v+u),G.nodeType===3&&(v+=G.nodeValue.length),(K=G.firstChild)!==null;)U=G,G=K;for(;;){if(G===t)break t;if(U===s&&++k===d&&(A=v),U===g&&++L===u&&(w=v),(K=G.nextSibling)!==null)break;G=U,U=G.parentNode}G=K}s=A===-1||w===-1?null:{start:A,end:w}}else s=null}s=s||{start:0,end:0}}else s=null;for(ku={focusedElem:t,selectionRange:s},bs=!1,Q=i;Q!==null;)if(i=Q,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Q=t;else for(;Q!==null;){i=Q;try{var Z=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var te=Z.memoizedProps,it=Z.memoizedState,N=i.stateNode,C=N.getSnapshotBeforeUpdate(i.elementType===i.type?te:gn(i.type,te),it);N.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var D=i.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(z){tt(i,i.return,z)}if(t=i.sibling,t!==null){t.return=i.return,Q=t;break}Q=i.return}return Z=bg,bg=!1,Z}function zo(t,i,s){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&t)===t){var g=d.destroy;d.destroy=void 0,g!==void 0&&Sc(i,s,g)}d=d.next}while(d!==u)}}function Ia(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var u=s.create;s.destroy=u()}s=s.next}while(s!==i)}}function yc(t){var i=t.ref;if(i!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof i=="function"?i(t):i.current=t}}function zg(t){var i=t.alternate;i!==null&&(t.alternate=null,zg(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[kn],delete i[ko],delete i[Uu],delete i[TS],delete i[IS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $g(t){return t.tag===5||t.tag===3||t.tag===4}function Wg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$g(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ac(t,i,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?s.nodeType===8?s.parentNode.insertBefore(t,i):s.insertBefore(t,i):(s.nodeType===8?(i=s.parentNode,i.insertBefore(t,s)):(i=s,i.appendChild(t)),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Js));else if(u!==4&&(t=t.child,t!==null))for(Ac(t,i,s),t=t.sibling;t!==null;)Ac(t,i,s),t=t.sibling}function Tc(t,i,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Tc(t,i,s),t=t.sibling;t!==null;)Tc(t,i,s),t=t.sibling}var mt=null,pn=!1;function mi(t,i,s){for(s=s.child;s!==null;)Yg(t,i,s),s=s.sibling}function Yg(t,i,s){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Us,s)}catch{}switch(s.tag){case 5:_t||Mr(s,i);case 6:var u=mt,d=pn;mt=null,mi(t,i,s),mt=u,pn=d,mt!==null&&(pn?(t=mt,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):mt.removeChild(s.stateNode));break;case 18:mt!==null&&(pn?(t=mt,s=s.stateNode,t.nodeType===8?Fu(t.parentNode,s):t.nodeType===1&&Fu(t,s),Ao(t)):Fu(mt,s.stateNode));break;case 4:u=mt,d=pn,mt=s.stateNode.containerInfo,pn=!0,mi(t,i,s),mt=u,pn=d;break;case 0:case 11:case 14:case 15:if(!_t&&(u=s.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var g=d,v=g.destroy;g=g.tag,v!==void 0&&((g&2)!==0||(g&4)!==0)&&Sc(s,i,v),d=d.next}while(d!==u)}mi(t,i,s);break;case 1:if(!_t&&(Mr(s,i),u=s.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=s.memoizedProps,u.state=s.memoizedState,u.componentWillUnmount()}catch(A){tt(s,i,A)}mi(t,i,s);break;case 21:mi(t,i,s);break;case 22:s.mode&1?(_t=(u=_t)||s.memoizedState!==null,mi(t,i,s),_t=u):mi(t,i,s);break;default:mi(t,i,s)}}function jg(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new BS),i.forEach(function(u){var d=XS.bind(null,t,u);s.has(u)||(s.add(u),u.then(d,d))})}}function mn(t,i){var s=i.deletions;if(s!==null)for(var u=0;u<s.length;u++){var d=s[u];try{var g=t,v=i,A=v;e:for(;A!==null;){switch(A.tag){case 5:mt=A.stateNode,pn=!1;break e;case 3:mt=A.stateNode.containerInfo,pn=!0;break e;case 4:mt=A.stateNode.containerInfo,pn=!0;break e}A=A.return}if(mt===null)throw Error(r(160));Yg(g,v,d),mt=null,pn=!1;var w=d.alternate;w!==null&&(w.return=null),d.return=null}catch(k){tt(d,i,k)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Vg(i,t),i=i.sibling}function Vg(t,i){var s=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mn(i,t),Fn(t),u&4){try{zo(3,t,t.return),Ia(3,t)}catch(te){tt(t,t.return,te)}try{zo(5,t,t.return)}catch(te){tt(t,t.return,te)}}break;case 1:mn(i,t),Fn(t),u&512&&s!==null&&Mr(s,s.return);break;case 5:if(mn(i,t),Fn(t),u&512&&s!==null&&Mr(s,s.return),t.flags&32){var d=t.stateNode;try{lo(d,"")}catch(te){tt(t,t.return,te)}}if(u&4&&(d=t.stateNode,d!=null)){var g=t.memoizedProps,v=s!==null?s.memoizedProps:g,A=t.type,w=t.updateQueue;if(t.updateQueue=null,w!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&Rn(d,g),ql(A,v);var k=ql(A,g);for(v=0;v<w.length;v+=2){var L=w[v],G=w[v+1];L==="style"?Nf(d,G):L==="dangerouslySetInnerHTML"?Rf(d,G):L==="children"?lo(d,G):H(d,L,G,k)}switch(A){case"input":Lt(d,g);break;case"textarea":Ef(d,g);break;case"select":var U=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var K=g.value;K!=null?ii(d,!!g.multiple,K,!1):U!==!!g.multiple&&(g.defaultValue!=null?ii(d,!!g.multiple,g.defaultValue,!0):ii(d,!!g.multiple,g.multiple?[]:"",!1))}d[ko]=g}catch(te){tt(t,t.return,te)}}break;case 6:if(mn(i,t),Fn(t),u&4){if(t.stateNode===null)throw Error(r(162));d=t.stateNode,g=t.memoizedProps;try{d.nodeValue=g}catch(te){tt(t,t.return,te)}}break;case 3:if(mn(i,t),Fn(t),u&4&&s!==null&&s.memoizedState.isDehydrated)try{Ao(i.containerInfo)}catch(te){tt(t,t.return,te)}break;case 4:mn(i,t),Fn(t);break;case 13:mn(i,t),Fn(t),d=t.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(Ec=nt())),u&4&&jg(t);break;case 22:if(L=s!==null&&s.memoizedState!==null,t.mode&1?(_t=(k=_t)||L,mn(i,t),_t=k):mn(i,t),Fn(t),u&8192){if(k=t.memoizedState!==null,(t.stateNode.isHidden=k)&&!L&&(t.mode&1)!==0)for(Q=t,L=t.child;L!==null;){for(G=Q=L;Q!==null;){switch(U=Q,K=U.child,U.tag){case 0:case 11:case 14:case 15:zo(4,U,U.return);break;case 1:Mr(U,U.return);var Z=U.stateNode;if(typeof Z.componentWillUnmount=="function"){u=U,s=U.return;try{i=u,Z.props=i.memoizedProps,Z.state=i.memoizedState,Z.componentWillUnmount()}catch(te){tt(u,s,te)}}break;case 5:Mr(U,U.return);break;case 22:if(U.memoizedState!==null){Qg(G);continue}}K!==null?(K.return=U,Q=K):Qg(G)}L=L.sibling}e:for(L=null,G=t;;){if(G.tag===5){if(L===null){L=G;try{d=G.stateNode,k?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=G.stateNode,w=G.memoizedProps.style,v=w!=null&&w.hasOwnProperty("display")?w.display:null,A.style.display=Pf("display",v))}catch(te){tt(t,t.return,te)}}}else if(G.tag===6){if(L===null)try{G.stateNode.nodeValue=k?"":G.memoizedProps}catch(te){tt(t,t.return,te)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===t)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===t)break e;for(;G.sibling===null;){if(G.return===null||G.return===t)break e;L===G&&(L=null),G=G.return}L===G&&(L=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:mn(i,t),Fn(t),u&4&&jg(t);break;case 21:break;default:mn(i,t),Fn(t)}}function Fn(t){var i=t.flags;if(i&2){try{e:{for(var s=t.return;s!==null;){if($g(s)){var u=s;break e}s=s.return}throw Error(r(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(lo(d,""),u.flags&=-33);var g=Wg(t);Tc(t,g,d);break;case 3:case 4:var v=u.stateNode.containerInfo,A=Wg(t);Ac(t,A,v);break;default:throw Error(r(161))}}catch(w){tt(t,t.return,w)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function xS(t,i,s){Q=t,Xg(t)}function Xg(t,i,s){for(var u=(t.mode&1)!==0;Q!==null;){var d=Q,g=d.child;if(d.tag===22&&u){var v=d.memoizedState!==null||Ta;if(!v){var A=d.alternate,w=A!==null&&A.memoizedState!==null||_t;A=Ta;var k=_t;if(Ta=v,(_t=w)&&!k)for(Q=d;Q!==null;)v=Q,w=v.child,v.tag===22&&v.memoizedState!==null?Zg(d):w!==null?(w.return=v,Q=w):Zg(d);for(;g!==null;)Q=g,Xg(g),g=g.sibling;Q=d,Ta=A,_t=k}Kg(t)}else(d.subtreeFlags&8772)!==0&&g!==null?(g.return=d,Q=g):Kg(t)}}function Kg(t){for(;Q!==null;){var i=Q;if((i.flags&8772)!==0){var s=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:_t||Ia(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!_t)if(s===null)u.componentDidMount();else{var d=i.elementType===i.type?s.memoizedProps:gn(i.type,s.memoizedProps);u.componentDidUpdate(d,s.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&Qh(i,g,u);break;case 3:var v=i.updateQueue;if(v!==null){if(s=null,i.child!==null)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}Qh(i,v,s)}break;case 5:var A=i.stateNode;if(s===null&&i.flags&4){s=A;var w=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&s.focus();break;case"img":w.src&&(s.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var k=i.alternate;if(k!==null){var L=k.memoizedState;if(L!==null){var G=L.dehydrated;G!==null&&Ao(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}_t||i.flags&512&&yc(i)}catch(U){tt(i,i.return,U)}}if(i===t){Q=null;break}if(s=i.sibling,s!==null){s.return=i.return,Q=s;break}Q=i.return}}function Qg(t){for(;Q!==null;){var i=Q;if(i===t){Q=null;break}var s=i.sibling;if(s!==null){s.return=i.return,Q=s;break}Q=i.return}}function Zg(t){for(;Q!==null;){var i=Q;try{switch(i.tag){case 0:case 11:case 15:var s=i.return;try{Ia(4,i)}catch(w){tt(i,s,w)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var d=i.return;try{u.componentDidMount()}catch(w){tt(i,d,w)}}var g=i.return;try{yc(i)}catch(w){tt(i,g,w)}break;case 5:var v=i.return;try{yc(i)}catch(w){tt(i,v,w)}}}catch(w){tt(i,i.return,w)}if(i===t){Q=null;break}var A=i.sibling;if(A!==null){A.return=i.return,Q=A;break}Q=i.return}}var bS=Math.ceil,wa=$.ReactCurrentDispatcher,Ic=$.ReactCurrentOwner,sn=$.ReactCurrentBatchConfig,He=0,dt=null,ot=null,vt=0,Qt=0,Fr=di(0),ut=0,$o=null,Yi=0,Ea=0,wc=0,Wo=null,xt=null,Ec=0,Ur=1/0,Qn=null,_a=!1,_c=null,vi=null,Ca=!1,Si=null,Ra=0,Yo=0,Cc=null,Pa=-1,Na=0;function Nt(){return(He&6)!==0?nt():Pa!==-1?Pa:Pa=nt()}function yi(t){return(t.mode&1)===0?1:(He&2)!==0&&vt!==0?vt&-vt:ES.transition!==null?(Na===0&&(Na=Wf()),Na):(t=be,t!==0||(t=window.event,t=t===void 0?16:Jf(t.type)),t)}function vn(t,i,s,u){if(50<Yo)throw Yo=0,Cc=null,Error(r(185));po(t,s,u),((He&2)===0||t!==dt)&&(t===dt&&((He&2)===0&&(Ea|=s),ut===4&&Ai(t,vt)),bt(t,u),s===1&&He===0&&(i.mode&1)===0&&(Ur=nt()+500,ia&&hi()))}function bt(t,i){var s=t.callbackNode;Ev(t,i);var u=Bs(t,t===dt?vt:0);if(u===0)s!==null&&bf(s),t.callbackNode=null,t.callbackPriority=0;else if(i=u&-u,t.callbackPriority!==i){if(s!=null&&bf(s),i===1)t.tag===0?wS(Jg.bind(null,t)):Bh(Jg.bind(null,t)),yS(function(){(He&6)===0&&hi()}),s=null;else{switch(Yf(u)){case 1:s=ou;break;case 4:s=zf;break;case 16:s=Fs;break;case 536870912:s=$f;break;default:s=Fs}s=ap(s,qg.bind(null,t))}t.callbackPriority=i,t.callbackNode=s}}function qg(t,i){if(Pa=-1,Na=0,(He&6)!==0)throw Error(r(327));var s=t.callbackNode;if(Lr()&&t.callbackNode!==s)return null;var u=Bs(t,t===dt?vt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||i)i=Da(t,u);else{i=u;var d=He;He|=2;var g=tp();(dt!==t||vt!==i)&&(Qn=null,Ur=nt()+500,Vi(t,i));do try{WS();break}catch(A){ep(t,A)}while(!0);Wu(),wa.current=g,He=d,ot!==null?i=0:(dt=null,vt=0,i=ut)}if(i!==0){if(i===2&&(d=su(t),d!==0&&(u=d,i=Rc(t,d))),i===1)throw s=$o,Vi(t,0),Ai(t,u),bt(t,nt()),s;if(i===6)Ai(t,u);else{if(d=t.current.alternate,(u&30)===0&&!zS(d)&&(i=Da(t,u),i===2&&(g=su(t),g!==0&&(u=g,i=Rc(t,g))),i===1))throw s=$o,Vi(t,0),Ai(t,u),bt(t,nt()),s;switch(t.finishedWork=d,t.finishedLanes=u,i){case 0:case 1:throw Error(r(345));case 2:Xi(t,xt,Qn);break;case 3:if(Ai(t,u),(u&130023424)===u&&(i=Ec+500-nt(),10<i)){if(Bs(t,0)!==0)break;if(d=t.suspendedLanes,(d&u)!==u){Nt(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=Mu(Xi.bind(null,t,xt,Qn),i);break}Xi(t,xt,Qn);break;case 4:if(Ai(t,u),(u&4194240)===u)break;for(i=t.eventTimes,d=-1;0<u;){var v=31-dn(u);g=1<<v,v=i[v],v>d&&(d=v),u&=~g}if(u=d,u=nt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*bS(u/1960))-u,10<u){t.timeoutHandle=Mu(Xi.bind(null,t,xt,Qn),u);break}Xi(t,xt,Qn);break;case 5:Xi(t,xt,Qn);break;default:throw Error(r(329))}}}return bt(t,nt()),t.callbackNode===s?qg.bind(null,t):null}function Rc(t,i){var s=Wo;return t.current.memoizedState.isDehydrated&&(Vi(t,i).flags|=256),t=Da(t,i),t!==2&&(i=xt,xt=s,i!==null&&Pc(i)),t}function Pc(t){xt===null?xt=t:xt.push.apply(xt,t)}function zS(t){for(var i=t;;){if(i.flags&16384){var s=i.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var u=0;u<s.length;u++){var d=s[u],g=d.getSnapshot;d=d.value;try{if(!fn(g(),d))return!1}catch{return!1}}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ai(t,i){for(i&=~wc,i&=~Ea,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var s=31-dn(i),u=1<<s;t[s]=-1,i&=~u}}function Jg(t){if((He&6)!==0)throw Error(r(327));Lr();var i=Bs(t,0);if((i&1)===0)return bt(t,nt()),null;var s=Da(t,i);if(t.tag!==0&&s===2){var u=su(t);u!==0&&(i=u,s=Rc(t,u))}if(s===1)throw s=$o,Vi(t,0),Ai(t,i),bt(t,nt()),s;if(s===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,Xi(t,xt,Qn),bt(t,nt()),null}function Nc(t,i){var s=He;He|=1;try{return t(i)}finally{He=s,He===0&&(Ur=nt()+500,ia&&hi())}}function ji(t){Si!==null&&Si.tag===0&&(He&6)===0&&Lr();var i=He;He|=1;var s=sn.transition,u=be;try{if(sn.transition=null,be=1,t)return t()}finally{be=u,sn.transition=s,He=i,(He&6)===0&&hi()}}function Dc(){Qt=Fr.current,Ve(Fr)}function Vi(t,i){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,SS(s)),ot!==null)for(s=ot.return;s!==null;){var u=s;switch(Gu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&ta();break;case 3:kr(),Ve(Ht),Ve(It),qu();break;case 5:Qu(u);break;case 4:kr();break;case 13:Ve(Je);break;case 19:Ve(Je);break;case 10:Yu(u.type._context);break;case 22:case 23:Dc()}s=s.return}if(dt=t,ot=t=Ti(t.current,null),vt=Qt=i,ut=0,$o=null,wc=Ea=Yi=0,xt=Wo=null,zi!==null){for(i=0;i<zi.length;i++)if(s=zi[i],u=s.interleaved,u!==null){s.interleaved=null;var d=u.next,g=s.pending;if(g!==null){var v=g.next;g.next=d,u.next=v}s.pending=u}zi=null}return t}function ep(t,i){do{var s=ot;try{if(Wu(),ha.current=va,ga){for(var u=et.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}ga=!1}if(Wi=0,ct=lt=et=null,Ho=!1,Bo=0,Ic.current=null,s===null||s.return===null){ut=1,$o=i,ot=null;break}e:{var g=t,v=s.return,A=s,w=i;if(i=vt,A.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var k=w,L=A,G=L.tag;if((L.mode&1)===0&&(G===0||G===11||G===15)){var U=L.alternate;U?(L.updateQueue=U.updateQueue,L.memoizedState=U.memoizedState,L.lanes=U.lanes):(L.updateQueue=null,L.memoizedState=null)}var K=_g(v);if(K!==null){K.flags&=-257,Cg(K,v,A,g,i),K.mode&1&&Eg(g,k,i),i=K,w=k;var Z=i.updateQueue;if(Z===null){var te=new Set;te.add(w),i.updateQueue=te}else Z.add(w);break e}else{if((i&1)===0){Eg(g,k,i),kc();break e}w=Error(r(426))}}else if(Qe&&A.mode&1){var it=_g(v);if(it!==null){(it.flags&65536)===0&&(it.flags|=256),Cg(it,v,A,g,i),zu(Or(w,A));break e}}g=w=Or(w,A),ut!==4&&(ut=2),Wo===null?Wo=[g]:Wo.push(g),g=v;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var N=Ig(g,w,i);Kh(g,N);break e;case 1:A=w;var C=g.type,D=g.stateNode;if((g.flags&128)===0&&(typeof C.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(vi===null||!vi.has(D)))){g.flags|=65536,i&=-i,g.lanes|=i;var z=wg(g,A,i);Kh(g,z);break e}}g=g.return}while(g!==null)}ip(s)}catch(re){i=re,ot===s&&s!==null&&(ot=s=s.return);continue}break}while(!0)}function tp(){var t=wa.current;return wa.current=va,t===null?va:t}function kc(){(ut===0||ut===3||ut===2)&&(ut=4),dt===null||(Yi&268435455)===0&&(Ea&268435455)===0||Ai(dt,vt)}function Da(t,i){var s=He;He|=2;var u=tp();(dt!==t||vt!==i)&&(Qn=null,Vi(t,i));do try{$S();break}catch(d){ep(t,d)}while(!0);if(Wu(),He=s,wa.current=u,ot!==null)throw Error(r(261));return dt=null,vt=0,ut}function $S(){for(;ot!==null;)np(ot)}function WS(){for(;ot!==null&&!pv();)np(ot)}function np(t){var i=sp(t.alternate,t,Qt);t.memoizedProps=t.pendingProps,i===null?ip(t):ot=i,Ic.current=null}function ip(t){var i=t;do{var s=i.alternate;if(t=i.return,(i.flags&32768)===0){if(s=LS(s,i,Qt),s!==null){ot=s;return}}else{if(s=HS(s,i),s!==null){s.flags&=32767,ot=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,ot=null;return}}if(i=i.sibling,i!==null){ot=i;return}ot=i=t}while(i!==null);ut===0&&(ut=5)}function Xi(t,i,s){var u=be,d=sn.transition;try{sn.transition=null,be=1,YS(t,i,s,u)}finally{sn.transition=d,be=u}return null}function YS(t,i,s,u){do Lr();while(Si!==null);if((He&6)!==0)throw Error(r(327));s=t.finishedWork;var d=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var g=s.lanes|s.childLanes;if(_v(t,g),t===dt&&(ot=dt=null,vt=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Ca||(Ca=!0,ap(Fs,function(){return Lr(),null})),g=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||g){g=sn.transition,sn.transition=null;var v=be;be=1;var A=He;He|=4,Ic.current=null,GS(t,s),Vg(s,t),dS(ku),bs=!!Du,ku=Du=null,t.current=s,xS(s),mv(),He=A,be=v,sn.transition=g}else t.current=s;if(Ca&&(Ca=!1,Si=t,Ra=d),g=t.pendingLanes,g===0&&(vi=null),yv(s.stateNode),bt(t,nt()),i!==null)for(u=t.onRecoverableError,s=0;s<i.length;s++)d=i[s],u(d.value,{componentStack:d.stack,digest:d.digest});if(_a)throw _a=!1,t=_c,_c=null,t;return(Ra&1)!==0&&t.tag!==0&&Lr(),g=t.pendingLanes,(g&1)!==0?t===Cc?Yo++:(Yo=0,Cc=t):Yo=0,hi(),null}function Lr(){if(Si!==null){var t=Yf(Ra),i=sn.transition,s=be;try{if(sn.transition=null,be=16>t?16:t,Si===null)var u=!1;else{if(t=Si,Si=null,Ra=0,(He&6)!==0)throw Error(r(331));var d=He;for(He|=4,Q=t.current;Q!==null;){var g=Q,v=g.child;if((Q.flags&16)!==0){var A=g.deletions;if(A!==null){for(var w=0;w<A.length;w++){var k=A[w];for(Q=k;Q!==null;){var L=Q;switch(L.tag){case 0:case 11:case 15:zo(8,L,g)}var G=L.child;if(G!==null)G.return=L,Q=G;else for(;Q!==null;){L=Q;var U=L.sibling,K=L.return;if(zg(L),L===k){Q=null;break}if(U!==null){U.return=K,Q=U;break}Q=K}}}var Z=g.alternate;if(Z!==null){var te=Z.child;if(te!==null){Z.child=null;do{var it=te.sibling;te.sibling=null,te=it}while(te!==null)}}Q=g}}if((g.subtreeFlags&2064)!==0&&v!==null)v.return=g,Q=v;else e:for(;Q!==null;){if(g=Q,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:zo(9,g,g.return)}var N=g.sibling;if(N!==null){N.return=g.return,Q=N;break e}Q=g.return}}var C=t.current;for(Q=C;Q!==null;){v=Q;var D=v.child;if((v.subtreeFlags&2064)!==0&&D!==null)D.return=v,Q=D;else e:for(v=C;Q!==null;){if(A=Q,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Ia(9,A)}}catch(re){tt(A,A.return,re)}if(A===v){Q=null;break e}var z=A.sibling;if(z!==null){z.return=A.return,Q=z;break e}Q=A.return}}if(He=d,hi(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Us,t)}catch{}u=!0}return u}finally{be=s,sn.transition=i}}return!1}function rp(t,i,s){i=Or(s,i),i=Ig(t,i,1),t=pi(t,i,1),i=Nt(),t!==null&&(po(t,1,i),bt(t,i))}function tt(t,i,s){if(t.tag===3)rp(t,t,s);else for(;i!==null;){if(i.tag===3){rp(i,t,s);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(vi===null||!vi.has(u))){t=Or(s,t),t=wg(i,t,1),i=pi(i,t,1),t=Nt(),i!==null&&(po(i,1,t),bt(i,t));break}}i=i.return}}function jS(t,i,s){var u=t.pingCache;u!==null&&u.delete(i),i=Nt(),t.pingedLanes|=t.suspendedLanes&s,dt===t&&(vt&s)===s&&(ut===4||ut===3&&(vt&130023424)===vt&&500>nt()-Ec?Vi(t,0):wc|=s),bt(t,i)}function op(t,i){i===0&&((t.mode&1)===0?i=1:(i=Hs,Hs<<=1,(Hs&130023424)===0&&(Hs=4194304)));var s=Nt();t=Vn(t,i),t!==null&&(po(t,i,s),bt(t,s))}function VS(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),op(t,s)}function XS(t,i){var s=0;switch(t.tag){case 13:var u=t.stateNode,d=t.memoizedState;d!==null&&(s=d.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(i),op(t,s)}var sp;sp=function(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps||Ht.current)Gt=!0;else{if((t.lanes&s)===0&&(i.flags&128)===0)return Gt=!1,US(t,i,s);Gt=(t.flags&131072)!==0}else Gt=!1,Qe&&(i.flags&1048576)!==0&&Gh(i,oa,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;Aa(t,i),t=i.pendingProps;var d=Er(i,It.current);Dr(i,s),d=tc(null,i,u,t,d,s);var g=nc();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Bt(u)?(g=!0,na(i)):g=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Xu(i),d.updater=Sa,i.stateNode=d,d._reactInternals=i,lc(i,u,t,s),i=fc(null,i,u,!0,g,s)):(i.tag=0,Qe&&g&&Bu(i),Pt(null,i,d,s),i=i.child),i;case 16:u=i.elementType;e:{switch(Aa(t,i),t=i.pendingProps,d=u._init,u=d(u._payload),i.type=u,d=i.tag=QS(u),t=gn(u,t),d){case 0:i=dc(null,i,u,t,s);break e;case 1:i=Og(null,i,u,t,s);break e;case 11:i=Rg(null,i,u,t,s);break e;case 14:i=Pg(null,i,u,gn(u.type,t),s);break e}throw Error(r(306,u,""))}return i;case 0:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:gn(u,d),dc(t,i,u,d,s);case 1:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:gn(u,d),Og(t,i,u,d,s);case 3:e:{if(Mg(i),t===null)throw Error(r(387));u=i.pendingProps,g=i.memoizedState,d=g.element,Xh(t,i),da(i,u,null,s);var v=i.memoizedState;if(u=v.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){d=Or(Error(r(423)),i),i=Fg(t,i,u,s,d);break e}else if(u!==d){d=Or(Error(r(424)),i),i=Fg(t,i,u,s,d);break e}else for(Kt=ci(i.stateNode.containerInfo.firstChild),Xt=i,Qe=!0,hn=null,s=jh(i,null,u,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Rr(),u===d){i=Kn(t,i,s);break e}Pt(t,i,u,s)}i=i.child}return i;case 5:return Zh(i),t===null&&bu(i),u=i.type,d=i.pendingProps,g=t!==null?t.memoizedProps:null,v=d.children,Ou(u,d)?v=null:g!==null&&Ou(u,g)&&(i.flags|=32),kg(t,i),Pt(t,i,v,s),i.child;case 6:return t===null&&bu(i),null;case 13:return Ug(t,i,s);case 4:return Ku(i,i.stateNode.containerInfo),u=i.pendingProps,t===null?i.child=Pr(i,null,u,s):Pt(t,i,u,s),i.child;case 11:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:gn(u,d),Rg(t,i,u,d,s);case 7:return Pt(t,i,i.pendingProps,s),i.child;case 8:return Pt(t,i,i.pendingProps.children,s),i.child;case 12:return Pt(t,i,i.pendingProps.children,s),i.child;case 10:e:{if(u=i.type._context,d=i.pendingProps,g=i.memoizedProps,v=d.value,We(la,u._currentValue),u._currentValue=v,g!==null)if(fn(g.value,v)){if(g.children===d.children&&!Ht.current){i=Kn(t,i,s);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var A=g.dependencies;if(A!==null){v=g.child;for(var w=A.firstContext;w!==null;){if(w.context===u){if(g.tag===1){w=Xn(-1,s&-s),w.tag=2;var k=g.updateQueue;if(k!==null){k=k.shared;var L=k.pending;L===null?w.next=w:(w.next=L.next,L.next=w),k.pending=w}}g.lanes|=s,w=g.alternate,w!==null&&(w.lanes|=s),ju(g.return,s,i),A.lanes|=s;break}w=w.next}}else if(g.tag===10)v=g.type===i.type?null:g.child;else if(g.tag===18){if(v=g.return,v===null)throw Error(r(341));v.lanes|=s,A=v.alternate,A!==null&&(A.lanes|=s),ju(v,s,i),v=g.sibling}else v=g.child;if(v!==null)v.return=g;else for(v=g;v!==null;){if(v===i){v=null;break}if(g=v.sibling,g!==null){g.return=v.return,v=g;break}v=v.return}g=v}Pt(t,i,d.children,s),i=i.child}return i;case 9:return d=i.type,u=i.pendingProps.children,Dr(i,s),d=rn(d),u=u(d),i.flags|=1,Pt(t,i,u,s),i.child;case 14:return u=i.type,d=gn(u,i.pendingProps),d=gn(u.type,d),Pg(t,i,u,d,s);case 15:return Ng(t,i,i.type,i.pendingProps,s);case 17:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:gn(u,d),Aa(t,i),i.tag=1,Bt(u)?(t=!0,na(i)):t=!1,Dr(i,s),Ag(i,u,d),lc(i,u,d,s),fc(null,i,u,!0,t,s);case 19:return Hg(t,i,s);case 22:return Dg(t,i,s)}throw Error(r(156,i.tag))};function ap(t,i){return xf(t,i)}function KS(t,i,s,u){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(t,i,s,u){return new KS(t,i,s,u)}function Oc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QS(t){if(typeof t=="function")return Oc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fe)return 11;if(t===Me)return 14}return 2}function Ti(t,i){var s=t.alternate;return s===null?(s=an(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function ka(t,i,s,u,d,g){var v=2;if(u=t,typeof t=="function")Oc(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case W:return Ki(s.children,d,g,i);case fe:v=8,d|=8;break;case _e:return t=an(12,s,i,d|2),t.elementType=_e,t.lanes=g,t;case Ee:return t=an(13,s,i,d),t.elementType=Ee,t.lanes=g,t;case ue:return t=an(19,s,i,d),t.elementType=ue,t.lanes=g,t;case q:return Oa(s,d,g,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Pe:v=10;break e;case $e:v=9;break e;case Fe:v=11;break e;case Me:v=14;break e;case ve:v=16,u=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return i=an(v,s,i,d),i.elementType=t,i.type=u,i.lanes=g,i}function Ki(t,i,s,u){return t=an(7,t,u,i),t.lanes=s,t}function Oa(t,i,s,u){return t=an(22,t,u,i),t.elementType=q,t.lanes=s,t.stateNode={isHidden:!1},t}function Mc(t,i,s){return t=an(6,t,null,i),t.lanes=s,t}function Fc(t,i,s){return i=an(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function ZS(t,i,s,u,d){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=au(0),this.expirationTimes=au(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=au(0),this.identifierPrefix=u,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Uc(t,i,s,u,d,g,v,A,w){return t=new ZS(t,i,s,A,w),i===1?(i=1,g===!0&&(i|=8)):i=0,g=an(3,null,null,i),t.current=g,g.stateNode=t,g.memoizedState={element:u,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xu(g),t}function qS(t,i,s){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:u==null?null:""+u,children:t,containerInfo:i,implementation:s}}function lp(t){if(!t)return fi;t=t._reactInternals;e:{if(Hi(t)!==t||t.tag!==1)throw Error(r(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Bt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(t.tag===1){var s=t.type;if(Bt(s))return Lh(t,s,i)}return i}function up(t,i,s,u,d,g,v,A,w){return t=Uc(s,u,!0,t,d,g,v,A,w),t.context=lp(null),s=t.current,u=Nt(),d=yi(s),g=Xn(u,d),g.callback=i??null,pi(s,g,d),t.current.lanes=d,po(t,d,u),bt(t,u),t}function Ma(t,i,s,u){var d=i.current,g=Nt(),v=yi(d);return s=lp(s),i.context===null?i.context=s:i.pendingContext=s,i=Xn(g,v),i.payload={element:t},u=u===void 0?null:u,u!==null&&(i.callback=u),t=pi(d,i,v),t!==null&&(vn(t,d,v,g),ca(t,d,v)),v}function Fa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cp(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function Lc(t,i){cp(t,i),(t=t.alternate)&&cp(t,i)}function JS(){return null}var dp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hc(t){this._internalRoot=t}Ua.prototype.render=Hc.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));Ma(t,i,null,null)},Ua.prototype.unmount=Hc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;ji(function(){Ma(null,t,null,null)}),i[$n]=null}};function Ua(t){this._internalRoot=t}Ua.prototype.unstable_scheduleHydration=function(t){if(t){var i=Xf();t={blockedOn:null,target:t,priority:i};for(var s=0;s<ai.length&&i!==0&&i<ai[s].priority;s++);ai.splice(s,0,t),s===0&&Zf(t)}};function Bc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function La(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fp(){}function ey(t,i,s,u,d){if(d){if(typeof u=="function"){var g=u;u=function(){var k=Fa(v);g.call(k)}}var v=up(i,u,t,0,null,!1,!1,"",fp);return t._reactRootContainer=v,t[$n]=v.current,No(t.nodeType===8?t.parentNode:t),ji(),v}for(;d=t.lastChild;)t.removeChild(d);if(typeof u=="function"){var A=u;u=function(){var k=Fa(w);A.call(k)}}var w=Uc(t,0,!1,null,null,!1,!1,"",fp);return t._reactRootContainer=w,t[$n]=w.current,No(t.nodeType===8?t.parentNode:t),ji(function(){Ma(i,w,s,u)}),w}function Ha(t,i,s,u,d){var g=s._reactRootContainer;if(g){var v=g;if(typeof d=="function"){var A=d;d=function(){var w=Fa(v);A.call(w)}}Ma(i,v,t,d)}else v=ey(s,i,t,d,u);return Fa(v)}jf=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var s=go(i.pendingLanes);s!==0&&(lu(i,s|1),bt(i,nt()),(He&6)===0&&(Ur=nt()+500,hi()))}break;case 13:ji(function(){var u=Vn(t,1);if(u!==null){var d=Nt();vn(u,t,1,d)}}),Lc(t,1)}},uu=function(t){if(t.tag===13){var i=Vn(t,134217728);if(i!==null){var s=Nt();vn(i,t,134217728,s)}Lc(t,134217728)}},Vf=function(t){if(t.tag===13){var i=yi(t),s=Vn(t,i);if(s!==null){var u=Nt();vn(s,t,i,u)}Lc(t,i)}},Xf=function(){return be},Kf=function(t,i){var s=be;try{return be=t,i()}finally{be=s}},tu=function(t,i,s){switch(i){case"input":if(Lt(t,s),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<s.length;i++){var u=s[i];if(u!==t&&u.form===t.form){var d=ea(u);if(!d)throw Error(r(90));le(u),Lt(u,d)}}}break;case"textarea":Ef(t,s);break;case"select":i=s.value,i!=null&&ii(t,!!s.multiple,i,!1)}},Mf=Nc,Ff=ji;var ty={usingClientEntryPoint:!1,Events:[Oo,Ir,ea,kf,Of,Nc]},jo={findFiberByHostInstance:Bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ny={bundleType:jo.bundleType,version:jo.version,rendererPackageName:jo.rendererPackageName,rendererConfig:jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Bf(t),t===null?null:t.stateNode},findFiberByHostInstance:jo.findFiberByHostInstance||JS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ba.isDisabled&&Ba.supportsFiber)try{Us=Ba.inject(ny),Dn=Ba}catch{}}return zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ty,zt.createPortal=function(t,i){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bc(i))throw Error(r(200));return qS(t,i,null,s)},zt.createRoot=function(t,i){if(!Bc(t))throw Error(r(299));var s=!1,u="",d=dp;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Uc(t,1,!1,null,null,s,!1,u,d),t[$n]=i.current,No(t.nodeType===8?t.parentNode:t),new Hc(i)},zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=Bf(i),t=t===null?null:t.stateNode,t},zt.flushSync=function(t){return ji(t)},zt.hydrate=function(t,i,s){if(!La(i))throw Error(r(200));return Ha(null,t,i,!0,s)},zt.hydrateRoot=function(t,i,s){if(!Bc(t))throw Error(r(405));var u=s!=null&&s.hydratedSources||null,d=!1,g="",v=dp;if(s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),i=up(i,null,t,1,s??null,d,!1,g,v),t[$n]=i.current,No(t),u)for(t=0;t<u.length;t++)s=u[t],d=s._getVersion,d=d(s._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[s,d]:i.mutableSourceEagerHydrationData.push(s,d);return new Ua(i)},zt.render=function(t,i,s){if(!La(i))throw Error(r(200));return Ha(null,t,i,!1,s)},zt.unmountComponentAtNode=function(t){if(!La(t))throw Error(r(40));return t._reactRootContainer?(ji(function(){Ha(null,null,t,!1,function(){t._reactRootContainer=null,t[$n]=null})}),!0):!1},zt.unstable_batchedUpdates=Nc,zt.unstable_renderSubtreeIntoContainer=function(t,i,s,u){if(!La(s))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return Ha(t,i,s,!1,u)},zt.version="18.3.1-next-f1338f8080-20240426",zt}var Ap;function fy(){if(Ap)return bc.exports;Ap=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),bc.exports=dy(),bc.exports}var Tp;function hy(){if(Tp)return Ga;Tp=1;var e=fy();return Ga.createRoot=e.createRoot,Ga.hydrateRoot=e.hydrateRoot,Ga}var gy=hy();const py=Fm(gy),Um=De.createContext(void 0),my=({initialAppState:e,children:n})=>{const[r,o]=De.useState(e),[a,l]=De.useState(void 0),c=(f,h)=>{o(f),f==="gameOver"&&h?l(h):f!=="gameOver"&&l(void 0)};return Le.jsx(Um.Provider,{value:{appState:r,setAppState:c,gameOverDetails:a},children:n})},Rl=()=>{const e=De.useContext(Um);if(e===void 0)throw new Error("useGameContext must be used within a GameProvider");return e};var Rt=function(){return Rt=Object.assign||function(n){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])}return n},Rt.apply(this,arguments)};function fs(e,n,r){if(r||arguments.length===2)for(var o=0,a=n.length,l;o<a;o++)(l||!(o in n))&&(l||(l=Array.prototype.slice.call(n,0,o)),l[o]=n[o]);return e.concat(l||Array.prototype.slice.call(n))}var Xe="-ms-",os="-moz-",xe="-webkit-",Lm="comm",Pl="rule",xd="decl",vy="@import",Hm="@keyframes",Sy="@layer",Bm=Math.abs,bd=String.fromCharCode,Td=Object.assign;function yy(e,n){return ht(e,0)^45?(((n<<2^ht(e,0))<<2^ht(e,1))<<2^ht(e,2))<<2^ht(e,3):0}function Gm(e){return e.trim()}function Jn(e,n){return(e=n.exec(e))?e[0]:e}function Ce(e,n,r){return e.replace(n,r)}function al(e,n,r){return e.indexOf(n,r)}function ht(e,n){return e.charCodeAt(n)|0}function Kr(e,n,r){return e.slice(n,r)}function Bn(e){return e.length}function xm(e){return e.length}function ts(e,n){return n.push(e),e}function Ay(e,n){return e.map(n).join("")}function Ip(e,n){return e.filter(function(r){return!Jn(r,n)})}var Nl=1,Qr=1,bm=0,cn=0,st=0,ro="";function Dl(e,n,r,o,a,l,c,f){return{value:e,root:n,parent:r,type:o,props:a,children:l,line:Nl,column:Qr,length:c,return:"",siblings:f}}function Ci(e,n){return Td(Dl("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},n)}function Hr(e){for(;e.root;)e=Ci(e.root,{children:[e]});ts(e,e.siblings)}function Ty(){return st}function Iy(){return st=cn>0?ht(ro,--cn):0,Qr--,st===10&&(Qr=1,Nl--),st}function wn(){return st=cn<bm?ht(ro,cn++):0,Qr++,st===10&&(Qr=1,Nl++),st}function sr(){return ht(ro,cn)}function ll(){return cn}function kl(e,n){return Kr(ro,e,n)}function Id(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function wy(e){return Nl=Qr=1,bm=Bn(ro=e),cn=0,[]}function Ey(e){return ro="",e}function Wc(e){return Gm(kl(cn-1,wd(e===91?e+2:e===40?e+1:e)))}function _y(e){for(;(st=sr())&&st<33;)wn();return Id(e)>2||Id(st)>3?"":" "}function Cy(e,n){for(;--n&&wn()&&!(st<48||st>102||st>57&&st<65||st>70&&st<97););return kl(e,ll()+(n<6&&sr()==32&&wn()==32))}function wd(e){for(;wn();)switch(st){case e:return cn;case 34:case 39:e!==34&&e!==39&&wd(st);break;case 40:e===41&&wd(e);break;case 92:wn();break}return cn}function Ry(e,n){for(;wn()&&e+st!==57;)if(e+st===84&&sr()===47)break;return"/*"+kl(n,cn-1)+"*"+bd(e===47?e:wn())}function Py(e){for(;!Id(sr());)wn();return kl(e,cn)}function Ny(e){return Ey(ul("",null,null,null,[""],e=wy(e),0,[0],e))}function ul(e,n,r,o,a,l,c,f,h){for(var p=0,m=0,S=c,y=0,E=0,P=0,I=1,R=1,F=1,B=0,H="",$=a,se=l,M=o,W=H;R;)switch(P=B,B=wn()){case 40:if(P!=108&&ht(W,S-1)==58){al(W+=Ce(Wc(B),"&","&\f"),"&\f",Bm(p?f[p-1]:0))!=-1&&(F=-1);break}case 34:case 39:case 91:W+=Wc(B);break;case 9:case 10:case 13:case 32:W+=_y(P);break;case 92:W+=Cy(ll()-1,7);continue;case 47:switch(sr()){case 42:case 47:ts(Dy(Ry(wn(),ll()),n,r,h),h);break;default:W+="/"}break;case 123*I:f[p++]=Bn(W)*F;case 125*I:case 59:case 0:switch(B){case 0:case 125:R=0;case 59+m:F==-1&&(W=Ce(W,/\f/g,"")),E>0&&Bn(W)-S&&ts(E>32?Ep(W+";",o,r,S-1,h):Ep(Ce(W," ","")+";",o,r,S-2,h),h);break;case 59:W+=";";default:if(ts(M=wp(W,n,r,p,m,a,f,H,$=[],se=[],S,l),l),B===123)if(m===0)ul(W,n,M,M,$,l,S,f,se);else switch(y===99&&ht(W,3)===110?100:y){case 100:case 108:case 109:case 115:ul(e,M,M,o&&ts(wp(e,M,M,0,0,a,f,H,a,$=[],S,se),se),a,se,S,f,o?$:se);break;default:ul(W,M,M,M,[""],se,0,f,se)}}p=m=E=0,I=F=1,H=W="",S=c;break;case 58:S=1+Bn(W),E=P;default:if(I<1){if(B==123)--I;else if(B==125&&I++==0&&Iy()==125)continue}switch(W+=bd(B),B*I){case 38:F=m>0?1:(W+="\f",-1);break;case 44:f[p++]=(Bn(W)-1)*F,F=1;break;case 64:sr()===45&&(W+=Wc(wn())),y=sr(),m=S=Bn(H=W+=Py(ll())),B++;break;case 45:P===45&&Bn(W)==2&&(I=0)}}return l}function wp(e,n,r,o,a,l,c,f,h,p,m,S){for(var y=a-1,E=a===0?l:[""],P=xm(E),I=0,R=0,F=0;I<o;++I)for(var B=0,H=Kr(e,y+1,y=Bm(R=c[I])),$=e;B<P;++B)($=Gm(R>0?E[B]+" "+H:Ce(H,/&\f/g,E[B])))&&(h[F++]=$);return Dl(e,n,r,a===0?Pl:f,h,p,m,S)}function Dy(e,n,r,o){return Dl(e,n,r,Lm,bd(Ty()),Kr(e,2,-2),0,o)}function Ep(e,n,r,o,a){return Dl(e,n,r,xd,Kr(e,0,o),Kr(e,o+1,-1),o,a)}function zm(e,n,r){switch(yy(e,n)){case 5103:return xe+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return xe+e+e;case 4789:return os+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return xe+e+os+e+Xe+e+e;case 5936:switch(ht(e,n+11)){case 114:return xe+e+Xe+Ce(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return xe+e+Xe+Ce(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return xe+e+Xe+Ce(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return xe+e+Xe+e+e;case 6165:return xe+e+Xe+"flex-"+e+e;case 5187:return xe+e+Ce(e,/(\w+).+(:[^]+)/,xe+"box-$1$2"+Xe+"flex-$1$2")+e;case 5443:return xe+e+Xe+"flex-item-"+Ce(e,/flex-|-self/g,"")+(Jn(e,/flex-|baseline/)?"":Xe+"grid-row-"+Ce(e,/flex-|-self/g,""))+e;case 4675:return xe+e+Xe+"flex-line-pack"+Ce(e,/align-content|flex-|-self/g,"")+e;case 5548:return xe+e+Xe+Ce(e,"shrink","negative")+e;case 5292:return xe+e+Xe+Ce(e,"basis","preferred-size")+e;case 6060:return xe+"box-"+Ce(e,"-grow","")+xe+e+Xe+Ce(e,"grow","positive")+e;case 4554:return xe+Ce(e,/([^-])(transform)/g,"$1"+xe+"$2")+e;case 6187:return Ce(Ce(Ce(e,/(zoom-|grab)/,xe+"$1"),/(image-set)/,xe+"$1"),e,"")+e;case 5495:case 3959:return Ce(e,/(image-set\([^]*)/,xe+"$1$`$1");case 4968:return Ce(Ce(e,/(.+:)(flex-)?(.*)/,xe+"box-pack:$3"+Xe+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+xe+e+e;case 4200:if(!Jn(e,/flex-|baseline/))return Xe+"grid-column-align"+Kr(e,n)+e;break;case 2592:case 3360:return Xe+Ce(e,"template-","")+e;case 4384:case 3616:return r&&r.some(function(o,a){return n=a,Jn(o.props,/grid-\w+-end/)})?~al(e+(r=r[n].value),"span",0)?e:Xe+Ce(e,"-start","")+e+Xe+"grid-row-span:"+(~al(r,"span",0)?Jn(r,/\d+/):+Jn(r,/\d+/)-+Jn(e,/\d+/))+";":Xe+Ce(e,"-start","")+e;case 4896:case 4128:return r&&r.some(function(o){return Jn(o.props,/grid-\w+-start/)})?e:Xe+Ce(Ce(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return Ce(e,/(.+)-inline(.+)/,xe+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Bn(e)-1-n>6)switch(ht(e,n+1)){case 109:if(ht(e,n+4)!==45)break;case 102:return Ce(e,/(.+:)(.+)-([^]+)/,"$1"+xe+"$2-$3$1"+os+(ht(e,n+3)==108?"$3":"$2-$3"))+e;case 115:return~al(e,"stretch",0)?zm(Ce(e,"stretch","fill-available"),n,r)+e:e}break;case 5152:case 5920:return Ce(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(o,a,l,c,f,h,p){return Xe+a+":"+l+p+(c?Xe+a+"-span:"+(f?h:+h-+l)+p:"")+e});case 4949:if(ht(e,n+6)===121)return Ce(e,":",":"+xe)+e;break;case 6444:switch(ht(e,ht(e,14)===45?18:11)){case 120:return Ce(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+xe+(ht(e,14)===45?"inline-":"")+"box$3$1"+xe+"$2$3$1"+Xe+"$2box$3")+e;case 100:return Ce(e,":",":"+Xe)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Ce(e,"scroll-","scroll-snap-")+e}return e}function pl(e,n){for(var r="",o=0;o<e.length;o++)r+=n(e[o],o,e,n)||"";return r}function ky(e,n,r,o){switch(e.type){case Sy:if(e.children.length)break;case vy:case xd:return e.return=e.return||e.value;case Lm:return"";case Hm:return e.return=e.value+"{"+pl(e.children,o)+"}";case Pl:if(!Bn(e.value=e.props.join(",")))return""}return Bn(r=pl(e.children,o))?e.return=e.value+"{"+r+"}":""}function Oy(e){var n=xm(e);return function(r,o,a,l){for(var c="",f=0;f<n;f++)c+=e[f](r,o,a,l)||"";return c}}function My(e){return function(n){n.root||(n=n.return)&&e(n)}}function Fy(e,n,r,o){if(e.length>-1&&!e.return)switch(e.type){case xd:e.return=zm(e.value,e.length,r);return;case Hm:return pl([Ci(e,{value:Ce(e.value,"@","@"+xe)})],o);case Pl:if(e.length)return Ay(r=e.props,function(a){switch(Jn(a,o=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Hr(Ci(e,{props:[Ce(a,/:(read-\w+)/,":"+os+"$1")]})),Hr(Ci(e,{props:[a]})),Td(e,{props:Ip(r,o)});break;case"::placeholder":Hr(Ci(e,{props:[Ce(a,/:(plac\w+)/,":"+xe+"input-$1")]})),Hr(Ci(e,{props:[Ce(a,/:(plac\w+)/,":"+os+"$1")]})),Hr(Ci(e,{props:[Ce(a,/:(plac\w+)/,Xe+"input-$1")]})),Hr(Ci(e,{props:[a]})),Td(e,{props:Ip(r,o)});break}return""})}}var Uy={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},qt={},Zr=typeof process<"u"&&qt!==void 0&&(qt.REACT_APP_SC_ATTR||qt.SC_ATTR)||"data-styled",$m="active",Wm="data-styled-version",Ol="6.1.13",zd=`/*!sc*/
`,ml=typeof window<"u"&&"HTMLElement"in window,Ly=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&qt!==void 0&&qt.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&qt.REACT_APP_SC_DISABLE_SPEEDY!==""?qt.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&qt.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&qt!==void 0&&qt.SC_DISABLE_SPEEDY!==void 0&&qt.SC_DISABLE_SPEEDY!==""&&qt.SC_DISABLE_SPEEDY!=="false"&&qt.SC_DISABLE_SPEEDY),Hy={},Ml=Object.freeze([]),qr=Object.freeze({});function Ym(e,n,r){return r===void 0&&(r=qr),e.theme!==r.theme&&e.theme||n||r.theme}var jm=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),By=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Gy=/(^-|-$)/g;function _p(e){return e.replace(By,"-").replace(Gy,"")}var xy=/(a)(d)/gi,xa=52,Cp=function(e){return String.fromCharCode(e+(e>25?39:97))};function Ed(e){var n,r="";for(n=Math.abs(e);n>xa;n=n/xa|0)r=Cp(n%xa)+r;return(Cp(n%xa)+r).replace(xy,"$1-$2")}var Yc,Vm=5381,Wr=function(e,n){for(var r=n.length;r;)e=33*e^n.charCodeAt(--r);return e},Xm=function(e){return Wr(Vm,e)};function Km(e){return Ed(Xm(e)>>>0)}function by(e){return e.displayName||e.name||"Component"}function jc(e){return typeof e=="string"&&!0}var Qm=typeof Symbol=="function"&&Symbol.for,Zm=Qm?Symbol.for("react.memo"):60115,zy=Qm?Symbol.for("react.forward_ref"):60112,$y={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Wy={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},qm={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Yy=((Yc={})[zy]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Yc[Zm]=qm,Yc);function Rp(e){return("type"in(n=e)&&n.type.$$typeof)===Zm?qm:"$$typeof"in e?Yy[e.$$typeof]:$y;var n}var jy=Object.defineProperty,Vy=Object.getOwnPropertyNames,Pp=Object.getOwnPropertySymbols,Xy=Object.getOwnPropertyDescriptor,Ky=Object.getPrototypeOf,Np=Object.prototype;function Jm(e,n,r){if(typeof n!="string"){if(Np){var o=Ky(n);o&&o!==Np&&Jm(e,o,r)}var a=Vy(n);Pp&&(a=a.concat(Pp(n)));for(var l=Rp(e),c=Rp(n),f=0;f<a.length;++f){var h=a[f];if(!(h in Wy||r&&r[h]||c&&h in c||l&&h in l)){var p=Xy(n,h);try{jy(e,h,p)}catch{}}}}return e}function Jr(e){return typeof e=="function"}function $d(e){return typeof e=="object"&&"styledComponentId"in e}function rr(e,n){return e&&n?"".concat(e," ").concat(n):e||n||""}function _d(e,n){if(e.length===0)return"";for(var r=e[0],o=1;o<e.length;o++)r+=e[o];return r}function hs(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Cd(e,n,r){if(r===void 0&&(r=!1),!r&&!hs(e)&&!Array.isArray(e))return n;if(Array.isArray(n))for(var o=0;o<n.length;o++)e[o]=Cd(e[o],n[o]);else if(hs(n))for(var o in n)e[o]=Cd(e[o],n[o]);return e}function Wd(e,n){Object.defineProperty(e,"toString",{value:n})}function Rs(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(n.length>0?" Args: ".concat(n.join(", ")):""))}var Qy=function(){function e(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}return e.prototype.indexOfGroup=function(n){for(var r=0,o=0;o<n;o++)r+=this.groupSizes[o];return r},e.prototype.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var o=this.groupSizes,a=o.length,l=a;n>=l;)if((l<<=1)<0)throw Rs(16,"".concat(n));this.groupSizes=new Uint32Array(l),this.groupSizes.set(o),this.length=l;for(var c=a;c<l;c++)this.groupSizes[c]=0}for(var f=this.indexOfGroup(n+1),h=(c=0,r.length);c<h;c++)this.tag.insertRule(f,r[c])&&(this.groupSizes[n]++,f++)},e.prototype.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],o=this.indexOfGroup(n),a=o+r;this.groupSizes[n]=0;for(var l=o;l<a;l++)this.tag.deleteRule(o)}},e.prototype.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var o=this.groupSizes[n],a=this.indexOfGroup(n),l=a+o,c=a;c<l;c++)r+="".concat(this.tag.getRule(c)).concat(zd);return r},e}(),cl=new Map,vl=new Map,dl=1,ba=function(e){if(cl.has(e))return cl.get(e);for(;vl.has(dl);)dl++;var n=dl++;return cl.set(e,n),vl.set(n,e),n},Zy=function(e,n){dl=n+1,cl.set(e,n),vl.set(n,e)},qy="style[".concat(Zr,"][").concat(Wm,'="').concat(Ol,'"]'),Jy=new RegExp("^".concat(Zr,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),eA=function(e,n,r){for(var o,a=r.split(","),l=0,c=a.length;l<c;l++)(o=a[l])&&e.registerName(n,o)},tA=function(e,n){for(var r,o=((r=n.textContent)!==null&&r!==void 0?r:"").split(zd),a=[],l=0,c=o.length;l<c;l++){var f=o[l].trim();if(f){var h=f.match(Jy);if(h){var p=0|parseInt(h[1],10),m=h[2];p!==0&&(Zy(m,p),eA(e,m,h[3]),e.getTag().insertRules(p,a)),a.length=0}else a.push(f)}}},Dp=function(e){for(var n=document.querySelectorAll(qy),r=0,o=n.length;r<o;r++){var a=n[r];a&&a.getAttribute(Zr)!==$m&&(tA(e,a),a.parentNode&&a.parentNode.removeChild(a))}};function nA(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var e0=function(e){var n=document.head,r=e||n,o=document.createElement("style"),a=function(f){var h=Array.from(f.querySelectorAll("style[".concat(Zr,"]")));return h[h.length-1]}(r),l=a!==void 0?a.nextSibling:null;o.setAttribute(Zr,$m),o.setAttribute(Wm,Ol);var c=nA();return c&&o.setAttribute("nonce",c),r.insertBefore(o,l),o},iA=function(){function e(n){this.element=e0(n),this.element.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var o=document.styleSheets,a=0,l=o.length;a<l;a++){var c=o[a];if(c.ownerNode===r)return c}throw Rs(17)}(this.element),this.length=0}return e.prototype.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},e.prototype.getRule=function(n){var r=this.sheet.cssRules[n];return r&&r.cssText?r.cssText:""},e}(),rA=function(){function e(n){this.element=e0(n),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(n,r){if(n<=this.length&&n>=0){var o=document.createTextNode(r);return this.element.insertBefore(o,this.nodes[n]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},e.prototype.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},e}(),oA=function(){function e(n){this.rules=[],this.length=0}return e.prototype.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},e.prototype.deleteRule=function(n){this.rules.splice(n,1),this.length--},e.prototype.getRule=function(n){return n<this.length?this.rules[n]:""},e}(),kp=ml,sA={isServer:!ml,useCSSOMInjection:!Ly},Sl=function(){function e(n,r,o){n===void 0&&(n=qr),r===void 0&&(r={});var a=this;this.options=Rt(Rt({},sA),n),this.gs=r,this.names=new Map(o),this.server=!!n.isServer,!this.server&&ml&&kp&&(kp=!1,Dp(this)),Wd(this,function(){return function(l){for(var c=l.getTag(),f=c.length,h="",p=function(S){var y=function(F){return vl.get(F)}(S);if(y===void 0)return"continue";var E=l.names.get(y),P=c.getGroup(S);if(E===void 0||!E.size||P.length===0)return"continue";var I="".concat(Zr,".g").concat(S,'[id="').concat(y,'"]'),R="";E!==void 0&&E.forEach(function(F){F.length>0&&(R+="".concat(F,","))}),h+="".concat(P).concat(I,'{content:"').concat(R,'"}').concat(zd)},m=0;m<f;m++)p(m);return h}(a)})}return e.registerId=function(n){return ba(n)},e.prototype.rehydrate=function(){!this.server&&ml&&Dp(this)},e.prototype.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new e(Rt(Rt({},this.options),n),this.gs,r&&this.names||void 0)},e.prototype.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(n=function(r){var o=r.useCSSOMInjection,a=r.target;return r.isServer?new oA(a):o?new iA(a):new rA(a)}(this.options),new Qy(n)));var n},e.prototype.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},e.prototype.registerName=function(n,r){if(ba(n),this.names.has(n))this.names.get(n).add(r);else{var o=new Set;o.add(r),this.names.set(n,o)}},e.prototype.insertRules=function(n,r,o){this.registerName(n,r),this.getTag().insertRules(ba(n),o)},e.prototype.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},e.prototype.clearRules=function(n){this.getTag().clearGroup(ba(n)),this.clearNames(n)},e.prototype.clearTag=function(){this.tag=void 0},e}(),aA=/&/g,lA=/^\s*\/\/.*$/gm;function t0(e,n){return e.map(function(r){return r.type==="rule"&&(r.value="".concat(n," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(n," ")),r.props=r.props.map(function(o){return"".concat(n," ").concat(o)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=t0(r.children,n)),r})}function uA(e){var n,r,o,a=qr,l=a.options,c=l===void 0?qr:l,f=a.plugins,h=f===void 0?Ml:f,p=function(y,E,P){return P.startsWith(r)&&P.endsWith(r)&&P.replaceAll(r,"").length>0?".".concat(n):y},m=h.slice();m.push(function(y){y.type===Pl&&y.value.includes("&")&&(y.props[0]=y.props[0].replace(aA,r).replace(o,p))}),c.prefix&&m.push(Fy),m.push(ky);var S=function(y,E,P,I){E===void 0&&(E=""),P===void 0&&(P=""),I===void 0&&(I="&"),n=I,r=E,o=new RegExp("\\".concat(r,"\\b"),"g");var R=y.replace(lA,""),F=Ny(P||E?"".concat(P," ").concat(E," { ").concat(R," }"):R);c.namespace&&(F=t0(F,c.namespace));var B=[];return pl(F,Oy(m.concat(My(function(H){return B.push(H)})))),B};return S.hash=h.length?h.reduce(function(y,E){return E.name||Rs(15),Wr(y,E.name)},Vm).toString():"",S}var cA=new Sl,Rd=uA(),n0=Gn.createContext({shouldForwardProp:void 0,styleSheet:cA,stylis:Rd});n0.Consumer;Gn.createContext(void 0);function Pd(){return De.useContext(n0)}var dA=function(){function e(n,r){var o=this;this.inject=function(a,l){l===void 0&&(l=Rd);var c=o.name+l.hash;a.hasNameForId(o.id,c)||a.insertRules(o.id,c,l(o.rules,c,"@keyframes"))},this.name=n,this.id="sc-keyframes-".concat(n),this.rules=r,Wd(this,function(){throw Rs(12,String(o.name))})}return e.prototype.getName=function(n){return n===void 0&&(n=Rd),this.name+n.hash},e}(),fA=function(e){return e>="A"&&e<="Z"};function Op(e){for(var n="",r=0;r<e.length;r++){var o=e[r];if(r===1&&o==="-"&&e[0]==="-")return e;fA(o)?n+="-"+o.toLowerCase():n+=o}return n.startsWith("ms-")?"-"+n:n}var i0=function(e){return e==null||e===!1||e===""},r0=function(e){var n,r,o=[];for(var a in e){var l=e[a];e.hasOwnProperty(a)&&!i0(l)&&(Array.isArray(l)&&l.isCss||Jr(l)?o.push("".concat(Op(a),":"),l,";"):hs(l)?o.push.apply(o,fs(fs(["".concat(a," {")],r0(l),!1),["}"],!1)):o.push("".concat(Op(a),": ").concat((n=a,(r=l)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||n in Uy||n.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return o};function ki(e,n,r,o){if(i0(e))return[];if($d(e))return[".".concat(e.styledComponentId)];if(Jr(e)){if(!Jr(l=e)||l.prototype&&l.prototype.isReactComponent||!n)return[e];var a=e(n);return ki(a,n,r,o)}var l;return e instanceof dA?r?(e.inject(r,o),[e.getName(o)]):[e]:hs(e)?r0(e):Array.isArray(e)?Array.prototype.concat.apply(Ml,e.map(function(c){return ki(c,n,r,o)})):[e.toString()]}function o0(e){for(var n=0;n<e.length;n+=1){var r=e[n];if(Jr(r)&&!$d(r))return!1}return!0}var hA=Xm(Ol),gA=function(){function e(n,r,o){this.rules=n,this.staticRulesId="",this.isStatic=(o===void 0||o.isStatic)&&o0(n),this.componentId=r,this.baseHash=Wr(hA,r),this.baseStyle=o,Sl.registerId(r)}return e.prototype.generateAndInjectStyles=function(n,r,o){var a=this.baseStyle?this.baseStyle.generateAndInjectStyles(n,r,o):"";if(this.isStatic&&!o.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))a=rr(a,this.staticRulesId);else{var l=_d(ki(this.rules,n,r,o)),c=Ed(Wr(this.baseHash,l)>>>0);if(!r.hasNameForId(this.componentId,c)){var f=o(l,".".concat(c),void 0,this.componentId);r.insertRules(this.componentId,c,f)}a=rr(a,c),this.staticRulesId=c}else{for(var h=Wr(this.baseHash,o.hash),p="",m=0;m<this.rules.length;m++){var S=this.rules[m];if(typeof S=="string")p+=S;else if(S){var y=_d(ki(S,n,r,o));h=Wr(h,y+m),p+=y}}if(p){var E=Ed(h>>>0);r.hasNameForId(this.componentId,E)||r.insertRules(this.componentId,E,o(p,".".concat(E),void 0,this.componentId)),a=rr(a,E)}}return a},e}(),Yd=Gn.createContext(void 0);Yd.Consumer;var Vc={};function pA(e,n,r){var o=$d(e),a=e,l=!jc(e),c=n.attrs,f=c===void 0?Ml:c,h=n.componentId,p=h===void 0?function($,se){var M=typeof $!="string"?"sc":_p($);Vc[M]=(Vc[M]||0)+1;var W="".concat(M,"-").concat(Km(Ol+M+Vc[M]));return se?"".concat(se,"-").concat(W):W}(n.displayName,n.parentComponentId):h,m=n.displayName,S=m===void 0?function($){return jc($)?"styled.".concat($):"Styled(".concat(by($),")")}(e):m,y=n.displayName&&n.componentId?"".concat(_p(n.displayName),"-").concat(n.componentId):n.componentId||p,E=o&&a.attrs?a.attrs.concat(f).filter(Boolean):f,P=n.shouldForwardProp;if(o&&a.shouldForwardProp){var I=a.shouldForwardProp;if(n.shouldForwardProp){var R=n.shouldForwardProp;P=function($,se){return I($,se)&&R($,se)}}else P=I}var F=new gA(r,y,o?a.componentStyle:void 0);function B($,se){return function(M,W,fe){var _e=M.attrs,Pe=M.componentStyle,$e=M.defaultProps,Fe=M.foldedComponentIds,Ee=M.styledComponentId,ue=M.target,Me=Gn.useContext(Yd),ve=Pd(),q=M.shouldForwardProp||ve.shouldForwardProp,x=Ym(W,Me,$e)||qr,Y=function(he,ie,Se){for(var me,X=Rt(Rt({},ie),{className:void 0,theme:Se}),ee=0;ee<he.length;ee+=1){var Ne=Jr(me=he[ee])?me(X):me;for(var le in Ne)X[le]=le==="className"?rr(X[le],Ne[le]):le==="style"?Rt(Rt({},X[le]),Ne[le]):Ne[le]}return ie.className&&(X.className=rr(X.className,ie.className)),X}(_e,W,x),b=Y.as||ue,_={};for(var O in Y)Y[O]===void 0||O[0]==="$"||O==="as"||O==="theme"&&Y.theme===x||(O==="forwardedAs"?_.as=Y.forwardedAs:q&&!q(O,b)||(_[O]=Y[O]));var j=function(he,ie){var Se=Pd(),me=he.generateAndInjectStyles(ie,Se.styleSheet,Se.stylis);return me}(Pe,Y),J=rr(Fe,Ee);return j&&(J+=" "+j),Y.className&&(J+=" "+Y.className),_[jc(b)&&!jm.has(b)?"class":"className"]=J,_.ref=fe,De.createElement(b,_)}(H,$,se)}B.displayName=S;var H=Gn.forwardRef(B);return H.attrs=E,H.componentStyle=F,H.displayName=S,H.shouldForwardProp=P,H.foldedComponentIds=o?rr(a.foldedComponentIds,a.styledComponentId):"",H.styledComponentId=y,H.target=o?a.target:e,Object.defineProperty(H,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function($){this._foldedDefaultProps=o?function(se){for(var M=[],W=1;W<arguments.length;W++)M[W-1]=arguments[W];for(var fe=0,_e=M;fe<_e.length;fe++)Cd(se,_e[fe],!0);return se}({},a.defaultProps,$):$}}),Wd(H,function(){return".".concat(H.styledComponentId)}),l&&Jm(H,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),H}function Mp(e,n){for(var r=[e[0]],o=0,a=n.length;o<a;o+=1)r.push(n[o],e[o+1]);return r}var Fp=function(e){return Object.assign(e,{isCss:!0})};function s0(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(Jr(e)||hs(e))return Fp(ki(Mp(Ml,fs([e],n,!0))));var o=e;return n.length===0&&o.length===1&&typeof o[0]=="string"?ki(o):Fp(ki(Mp(o,n)))}function Nd(e,n,r){if(r===void 0&&(r=qr),!n)throw Rs(1,n);var o=function(a){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];return e(n,r,s0.apply(void 0,fs([a],l,!1)))};return o.attrs=function(a){return Nd(e,n,Rt(Rt({},r),{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},o.withConfig=function(a){return Nd(e,n,Rt(Rt({},r),a))},o}var a0=function(e){return Nd(pA,e)},zn=a0;jm.forEach(function(e){zn[e]=a0(e)});var mA=function(){function e(n,r){this.rules=n,this.componentId=r,this.isStatic=o0(n),Sl.registerId(this.componentId+1)}return e.prototype.createStyles=function(n,r,o,a){var l=a(_d(ki(this.rules,r,o,a)),""),c=this.componentId+n;o.insertRules(c,c,l)},e.prototype.removeStyles=function(n,r){r.clearRules(this.componentId+n)},e.prototype.renderStyles=function(n,r,o,a){n>2&&Sl.registerId(this.componentId+n),this.removeStyles(n,o),this.createStyles(n,r,o,a)},e}();function vA(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=s0.apply(void 0,fs([e],n,!1)),a="sc-global-".concat(Km(JSON.stringify(o))),l=new mA(o,a),c=function(h){var p=Pd(),m=Gn.useContext(Yd),S=Gn.useRef(p.styleSheet.allocateGSInstance(a)).current;return p.styleSheet.server&&f(S,h,p.styleSheet,m,p.stylis),Gn.useLayoutEffect(function(){if(!p.styleSheet.server)return f(S,h,p.styleSheet,m,p.stylis),function(){return l.removeStyles(S,p.styleSheet)}},[S,h,p.styleSheet,m,p.stylis]),null};function f(h,p,m,S,y){if(l.isStatic)l.renderStyles(h,Hy,m,y);else{var E=Rt(Rt({},p),{theme:Ym(p,S,c.defaultProps)});l.renderStyles(h,E,m,y)}}return Gn.memo(c)}function l0(e,n){var r=De.useRef(null),o=De.useRef(!1),a=De.useRef(e);a.current=e;var l=De.useCallback(function(f){o.current&&(a.current(f),r.current=requestAnimationFrame(l))},[]),c=De.useMemo(function(){return[function(){o.current&&(o.current=!1,r.current&&cancelAnimationFrame(r.current))},function(){o.current||(o.current=!0,r.current=requestAnimationFrame(l))},function(){return o.current}]},[]);return De.useEffect(function(){return c[0]},[]),c}function SA(e,n,r,o,a){var c;(c=e.onExit)==null||c.call(e,o,n);const l=a.find(({id:f})=>f===n);return l!=null&&l.onEnter?l.onEnter(o,r):{...r,enteredAt:o.updateContext.gameState.time}}function yA(e,n){return n.find(({id:r})=>r===e)}function AA(e,n){return e!==n}function TA(e){console.warn(`No handler found for state: ${e}`)}const ss="bushGrowing",ir="bushFull",fl="bushSpreading",gs="bushDying",Yt=24,jt=10,yn=3e3,An=3e3,jd=2,IA=5,wA=3,EA=12,_A=940,Dd=20,Up=90,u0=45,c0=240,Fl=10,ps=80,CA=3,Xo=5,Jt=150,d0=Jt*.8,RA=Jt*.2,ur=Jt*.95,Mi=30,f0=10,PA=10,NA=.5,gt=30,Fi=gt*.75,h0=50,DA=20,kA=ps*.8,OA=.7,MA=16,g0=40,FA=24,Vd=16,UA=72/3,Lp=24,LA=1.25,HA=1.5,Xd=Jt*.6,Kd=50,BA=1,GA=350,p0=ps*.65,xA=80,bA=50,zA=1,$A=128,m0=10,Hp=100,Qd=35,xn=gt,v0=.5,Ul=2.5,WA=5,Zd=.5,qd=1.5,YA=.1,jA=.5,VA=1.5,XA=.25,KA=2.5,QA=45,ZA=.05,ms=5,qA=.5,Bp=100,JA=300,Ll=30,vs=1,Gp=Jt*.6,eT=Jt*.25,tT=Jt*.7,nT=Jt*.8,xp=300,iT=600,S0=100,rT=250,oT=120,sT=2,aT=400,lT=1e3,uT=Jt*.85,cT=100,dT=3,fT=96,hT=24,gT=600,y0=600,pT=1,mT=24,vT=1,ST=.5,yT=2,kd=24,Od=12,bp=40,AT=.3,TT=24,zp=500,IT=24,$p=24,wT=1500,Xc=500,ET=400,_T=10,CT=-5,RT=1.5,PT=1.5,NT=1.2,DT=10,kT=150,OT=200,MT=100,FT=100,UT=.7,LT=300,HT=100,BT=120,Wp=400,eo=10,A0=250,Ss=12,hl=Fi*1.2,T0=10,GT=20,I0=.15,w0=200,pt=30,oo=pt*.6,Jd="#4CAF50",E0="#FF5722",_0="#9C27B0",xT="#2196F3",C0="#FFC107",bT="#FFD700",R0="#DC143C",ef="#FFFFFF",tf=[5,5],Hl=5,to=15,zT=20,$T=16,WT=10,YT=16,jT=16,Yp=["👑","💀","🔥","💧","☘️","☀️","🌙","⭐","⚡","⚜️"],Md=8,VT="#FFFFFF",Ri=18,$t=15,XT="rgba(0, 0, 0, 0.7)",KT=4,wi=150,Zt=15,Zn=10,Yr="#555",QT="#f44336",ZT="#4CAF50",qT="#2196F3",JT="#FFC107",za=16,eI=9,Qi=32,$a=28,tI=10,nI=8,iI=8,rI=8,ln=28,Wa=40,oI="rgba(255, 215, 0, 0.7)",sI="rgba(0, 0, 0, 0.3)",Un=10,jp=8,Kc=11,Ei=20,Qc=40,Vp=5,aI=10,lI="#FFA500",uI="#808080",jr=120,cI=30,dI=20,Ya="#2d3748",Vr="#ffffff",Zc="#4a5568",fI=5,P0="#bdc9f792",hI="#272c36ff",gI="#a0aec0",Xp=300,pI="rgba(255, 255, 255, 0.5)",mI="rgba(0, 0, 0, 0.8)",vI="#FFFFFF",Kp=14,Qp=8,Zp=-15,SI="#FFD700",yI=5,AI=60,TI=-50,II=10,qc=12,qp=10,wI="rgba(0, 0, 0, 0.5)",EI="#4CAF50",_I="#F44336",CI="#FFC107",RI="rgba(255, 255, 255, 0.2)",Jp="#FFFFFF",PI="#FF6B6B",NI=5,N0=30,Ko=50,ja=8,em=10,DI="rgba(0, 0, 0, 0.5)",kI="#FFFFFF",OI=33,MI=400,FI=20,UI=10,LI="rgba(0, 0, 0, 0.7)",HI="#FFFFFF",Jc=20,tm=16,BI=.5,nm=5,D0="#FFD700",GI=40,nf=4,k0=3,xI=5,O0=20,M0=5,bI="#FFFFFF",zI="#FF6B6B",Be=1,or=3,$I=70,im=600,WI=1.5,F0=.1,YI=15,jI=5e3,Zi=80,Va=10,VI=12,XI=24,KI=Jt*.9,QI=24,Xa=300,qi=15,ZI=8,qI="rgba(0, 0, 0, 0.8)",JI="#FFFFFF",ed=14,rm=10,Ln=20,ew="#FF6B6B",tw="#4CAF50",om="#FFD700",nw="rgba(255, 255, 0, 0.3)",iw=2,rw=500,ow=120,sw=45,aw="#FFD700",lw=3,uw=4,U0=12,cw=120,sm=50,dw=12,L0=30,fw=2,Ut=50,hw=150,as=2,td=8,gw=.5,pw=1,mw=80,vw=.7,H0=20,Sw=140,am=40,yw=12,B0=40,Aw=3,Oi=60,Tn=40,br=50,lm=320,G0=25,Tw=60,x0=2,Iw=90,ww=.7,Ew=1.5,ls=3,nd=15,rf=80,b0=10,Bl=80,so=40,z0=2,yl=30,id=100,rd=20,_w=60,Gl=10,Cw=40,xl=12,Rw=48,bl=12,Pw=50,zl=18,Nw=60,$l=.5,Dw=2.5,Wl=.25,kw=2,Yl=.1,Ow=.9;function we(e,n,r,o,a){const l={id:e.nextVisualEffectId,type:n,position:r,startTime:e.time,duration:o,entityId:a};return e.visualEffects.push(l),e.nextVisualEffectId++,l.id}var oe=(e=>(e[e.Hunger=0]="Hunger",e[e.Procreation=1]="Procreation",e[e.Pregnant=2]="Pregnant",e[e.TargetAcquired=3]="TargetAcquired",e[e.Attack=4]="Attack",e[e.Partnered=5]="Partnered",e[e.BushClaimed=6]="BushClaimed",e[e.BushClaimLost=7]="BushClaimLost",e[e.Eating=8]="Eating",e[e.ChildFed=9]="ChildFed",e[e.AttackDeflected=10]="AttackDeflected",e[e.AttackResisted=11]="AttackResisted",e[e.Hit=12]="Hit",e[e.SeizeBuildup=13]="SeizeBuildup",e[e.Seize=14]="Seize",e[e.CallToAttack=15]="CallToAttack",e[e.CallToFollow=16]="CallToFollow",e[e.AutopilotMoveTarget=17]="AutopilotMoveTarget",e))(oe||{}),ti=(e=>(e.Berry="berry",e.Meat="meat",e))(ti||{});const $0={berry:"🍓",meat:"🥩"},Mw={id:ss,update:(e,n)=>{const{entity:r,updateContext:o}=n,a=o.deltaTime*(Yt/jt);return r.age+=a,r.age>=r.lifespan?{nextState:gs,data:{...e,enteredAt:o.gameState.time}}:(r.ownerId&&r.claimedUntil&&o.gameState.time>r.claimedUntil&&(we(o.gameState,oe.BushClaimLost,r.position,Be),r.ownerId=void 0,r.claimedUntil=void 0),r.timeSinceLastBerryRegen+=a,r.timeSinceLastBerryRegen>=EA&&r.food.length<r.maxFood&&(r.food.push({type:ti.Berry}),r.timeSinceLastBerryRegen=0),r.food.length>=r.maxFood?{nextState:ir,data:{...e,enteredAt:o.gameState.time,previousState:ss}}:{nextState:ss,data:e})},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},Fw={id:ir,update:(e,n)=>{const{entity:r,updateContext:o}=n,a=o.deltaTime*(Yt/jt);return r.age+=a,r.age>=r.lifespan?{nextState:gs,data:{...e,enteredAt:o.gameState.time,previousState:ir}}:r.food.length<r.maxFood?{nextState:ss,data:{...e,enteredAt:o.gameState.time,previousState:ir}}:(r.ownerId&&r.claimedUntil&&o.gameState.time>r.claimedUntil&&(we(o.gameState,oe.BushClaimLost,r.position,Be),r.ownerId=void 0,r.claimedUntil=void 0),r.timeSinceLastSpreadAttempt+=a,r.timeSinceLastSpreadAttempt>=Up&&(r.timeSinceLastSpreadAttempt=0,o.gameState.time-r.timeSinceLastHarvest>=Up&&Math.random()<o.gameState.ecosystem.berryBushSpreadChance)?{nextState:fl,data:{...e,enteredAt:o.gameState.time,previousState:ir}}:{nextState:ir,data:e})},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})};function bn(e,n){return{x:e.x+n.x,y:e.y+n.y}}function W0(e,n){return{x:e.x-n.x,y:e.y-n.y}}function yt(e,n){return{x:e.x*n,y:e.y*n}}function no(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function qe(e){const n=no(e);return n===0?{x:0,y:0}:yt(e,1/n)}function Uw(e,n){return no(W0(e,n))}function of(e,n,r){return{x:e.x+(n.x-e.x)*r,y:e.y+(n.y-e.y)*r}}function sf(e){if(e.length===0)return{x:0,y:0};const n=e.reduce((r,o)=>({x:r.x+o.x,y:r.y+o.y}),{x:0,y:0});return{x:n.x/e.length,y:n.y/e.length}}function ze(e,n,r,o){let a=n.x-e.x,l=n.y-e.y;return Math.abs(a)>r/2&&(a=a-Math.sign(a)*r),Math.abs(l)>o/2&&(l=l-Math.sign(l)*o),{x:a,y:l}}function Wt(e,n,r){const o=ze(e,n,r.width,r.height);return qe(o)}function V(e,n,r,o){const a=ze(e,n,r,o);return no(a)}function Lw(e,n){return e.x*n.x+e.y*n.y}function Hw(e,n){const r=Lw(e,n),o=no(e),a=no(n);if(o===0||a===0)return 0;const l=Math.max(-1,Math.min(1,r/(o*a)));return Math.acos(l)}function Bw(e,n,r){const o=Math.max(0,Math.min(1,r)),a={r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)},l={r:parseInt(n.substring(1,3),16),g:parseInt(n.substring(3,5),16),b:parseInt(n.substring(5,7),16)},c=Math.round(a.r+(l.r-a.r)*o),f=Math.round(a.g+(l.g-a.g)*o),h=Math.round(a.b+(l.b-a.b)*o),p=m=>("00"+m.toString(16)).slice(-2);return`#${p(c)}${p(f)}${p(h)}`}var Ft=(e=>(e.Friendly="Friendly",e.Hostile="Hostile",e))(Ft||{});function um(e,n,r){return n.search.human.byRadius(e.position,r).filter(l=>{if(l.id===e.id||l.gender===e.gender||!l.isAdult||l.hunger>=ur||(l.procreationCooldown||0)>0||l.gender==="female"&&l.isPregnant)return!1;const c=l.id===e.motherId||l.id===e.fatherId,f=e.id===l.motherId||e.id===l.fatherId;return!c&&!f})}function ni(e){if(e.length===0)return;const n=e.filter(a=>a.gender==="male"),r=e.filter(a=>a.gender==="female"),o=(a,l)=>a.age!==l.age?l.age-a.age:a.id-l.id;if(n.sort(o),n.length>0)return n[0];if(r.sort(o),r.length>0)return r[0]}function At(e,n){const r=e,o=r.search.human.byProperty("motherId",n.id),a=r.search.human.byProperty("fatherId",n.id);return[...o,...a]}function Y0(e,n,r){var a;if(e.id===n.id||e.motherId===n.id||e.fatherId===n.id||n.motherId===e.id||n.fatherId===e.id||e.motherId&&e.motherId===n.motherId||e.fatherId&&e.fatherId===n.fatherId||(a=e.partnerIds)!=null&&a.includes(n.id))return!0;if(e.motherId){const l=r.entities.entities.get(e.motherId);if(l&&(l.motherId===n.id||l.fatherId===n.id))return!0}if(e.fatherId){const l=r.entities.entities.get(e.fatherId);if(l&&(l.motherId===n.id||l.fatherId===n.id))return!0}if(n.motherId){const l=r.entities.entities.get(n.motherId);if(l&&(l.motherId===e.id||l.fatherId===e.id))return!0}if(n.fatherId){const l=r.entities.entities.get(n.fatherId);if(l&&(l.motherId===e.id||l.fatherId===e.id))return!0}return!1}function Fd(e,n){var l,c,f,h;if(e.id===n.id||e.motherId===n.id||e.fatherId===n.id||n.motherId===e.id||n.fatherId===e.id||(l=e.partnerIds)!=null&&l.includes(n.id)||(c=n.partnerIds)!=null&&c.includes(e.id))return!0;if(e.fatherId===void 0&&e.motherId===void 0||n.fatherId===void 0&&n.motherId===void 0)return!1;const r=e.motherId===n.motherId||e.fatherId===n.fatherId,o=n.motherId===e.motherId||n.fatherId===e.fatherId,a=((f=e.ancestorIds)==null?void 0:f.some(p=>n.ancestorIds.includes(p)))||((h=n.ancestorIds)==null?void 0:h.some(p=>e.ancestorIds.includes(p)));return r||o||a}function Gw(e,n){const r=[];if(e.motherId){const o=n.entities.entities.get(e.motherId);o&&r.push(o)}if(e.fatherId){const o=n.entities.entities.get(e.fatherId);o&&r.push(o)}return r}function xw(e,n){if(e.gender!=="female"||!e.partnerIds||e.partnerIds.length===0)return null;for(const r of e.partnerIds){const o=n.entities.entities.get(r);if(o&&o.gender==="male")return o}return null}function bw(e,n){var r;if(!e.isAdult&&e.fatherId){const o=n.entities.entities.get(e.fatherId);if(o&&o.type==="human")return o}if(e.isAdult&&e.fatherId){const o=n.entities.entities.get(e.fatherId);if(o&&o.type==="human"&&((r=ni(At(n,o)))==null?void 0:r.id)===e.id)return o}return e.isAdult&&e.gender==="female"&&e.partnerIds&&e.partnerIds.length>0?xw(e,n):null}function Al(e,n){var o;const r=new Set;if(e.motherId){const a=n.entities.entities.get(e.motherId);a&&r.add(a)}if(e.fatherId){const a=n.entities.entities.get(e.fatherId);a&&r.add(a)}return(o=e.partnerIds)==null||o.forEach(a=>{const l=n.entities.entities.get(a);l&&r.add(l)}),At(n,e).forEach(a=>r.add(a)),Array.from(r)}function j0(e,n){const r=new Map;function o(a){const l=At(n,a);for(const c of l)r.has(c.id)||(r.set(c.id,c),o(c))}return o(e),Array.from(r.values())}function ys(e,n){return n.search.human.byProperty("leaderId",e)}function V0(e,n){var c,f;const r=new Map,o=Array.from(e.entities.entities.values()).filter(h=>h.type==="human");for(const h of o)h.leaderId&&(r.has(h.leaderId)||r.set(h.leaderId,{leaderId:h.leaderId,tribeBadge:h.tribeBadge||"?",members:[]}),(c=r.get(h.leaderId))==null||c.members.push(h));const a=n?(f=e.entities.entities.get(n))==null?void 0:f.diplomacy:void 0,l=Array.from(r.values()).map(h=>{const p=e.entities.entities.get(h.leaderId),m=h.members.filter(y=>y.isAdult).length,S=h.members.length-m;return{leaderId:h.leaderId,tribeBadge:h.tribeBadge,adultCount:m,childCount:S,isPlayerTribe:h.leaderId===n,leaderAge:(p==null?void 0:p.age)??0,leaderGender:(p==null?void 0:p.gender)??"male",diplomacyStatus:(a==null?void 0:a.get(h.leaderId??-1))??Ft.Friendly}});return l.sort((h,p)=>h.isPlayerTribe?-1:p.isPlayerTribe?1:p.adultCount+p.childCount-(h.adultCount+h.childCount)),l}function Re(e,n,r,o,a){const l=n,c=o,f="position"in e&&e.id?e:null,h=f?f.position:e,p=l.search[r].byRadius(h,c);let m=null,S=c;for(const y of p){if(y.id===(f==null?void 0:f.id)||a&&!a(y))continue;const E=V(h,y.position,n.mapDimensions.width,n.mapDimensions.height);E<S&&(S=E,m=y)}return m}function X0(e,n,r,o){return n.search[r].byRadius(e,o)}function K0(e,n,r,o){return X0(e,n,r,o).length}function Tt(e){const r=e.search.human.byProperty("isPlayer",!0);return r.length>0?r[0]:void 0}function zw(e,n){var c;const o=n.search.human.byProperty("activeAction","attacking");let a=null,l=1/0;for(const f of o){if(f.attackTargetId!==e)continue;const h=V(f.position,((c=n.entities.entities.get(e))==null?void 0:c.position)||{x:0,y:0},n.mapDimensions.width,n.mapDimensions.height);h<l&&(a=f,l=h)}return a}function $w(e){return Array.from(e.entities.entities.values()).filter(n=>n.type==="human")}function Ww(e,n,r){const o=Array.from(n.entities.entities.values()).reverse();for(const a of o)if(Uw(e,a.position)<a.radius)return a}function af(e,n,r,o){const a=Math.random()*Math.PI*2,l=Math.sqrt(Math.random())*n,c={x:Math.cos(a)*l,y:Math.sin(a)*l},f=bn(e,c);return{x:(f.x%r+r)%r,y:(f.y%o+o)%o}}function io(e,n,r,o){const a=n,l={left:e.x-r,top:e.y-r,right:e.x+r,bottom:e.y+r},c=[...a.search.human.byRect(l),...a.search.berryBush.byRect(l),...a.search.corpse.byRect(l)];for(const f of c){if(o!==void 0&&f.id===o)continue;if(V(e,f.position,n.mapDimensions.width,n.mapDimensions.height)<r+f.radius)return!0}return!1}function lf(e,n,r,o,a){const l=n.mapDimensions.width,c=n.mapDimensions.height;if(!io(e,n,o,a))return e;const f=o;for(let h=f;h<=r;h+=f){const p=Math.ceil(2*Math.PI*h/f);for(let m=0;m<p;m++){const S=m/p*2*Math.PI,y={x:Math.cos(S)*h,y:Math.sin(S)*h},E=bn(e,y),P={x:(E.x%l+l)%l,y:(E.y%c+c)%c};if(!io(P,n,o,a))return P}}return null}function cr(e,n){const r=ys(e,n);if(r.length===0){const a=n.entities.entities.get(e);return a?a.position:{x:0,y:0}}const o=r.map(a=>a.position);return sf(o)}function cm(e,n){const o=[...Al(e,n),e].map(a=>a.position);return sf(o)}function Yw(e,n,r){return n.search.human.byRadius(e.position,r).filter(a=>{var l;return a.activeAction==="procreating"&&a.gender===e.gender&&typeof a.target=="number"&&((l=e.partnerIds)==null?void 0:l.includes(a.target))})[0]}function jw(e,n,r){if(!e.leaderId)return;const o=n,a=o.search.berryBush.byRadius(e.position,r).filter(l=>l.ownerId===e.id);for(const l of a)if(l.claimedUntil&&n.time<l.claimedUntil){const c=o.search.human.byRadius(l.position,gt);for(const f of c)if(!Fd(f,e)&&f.activeAction==="gathering"&&f.target===l.id)return f}}function Vw(e,n,r){const o=Al(e,n),a=n;for(const l of o){if(V(e.position,l.position,n.mapDimensions.width,n.mapDimensions.height)>r)continue;const f=a.search.human.byProperty("attackTargetId",l.id);for(const h of f)if(h.leaderId!==e.leaderId)return{familyMember:l,aggressor:h}}}function Xw(e,n){const o=n.search.human.byRadius(e.position,LT);let a,l=1/0;for(const c of o){if(c.id===e.id||c.hitpoints<=0||c.hitpoints/c.maxHitpoints>UT||Y0(e,c,n))continue;const f=V(e.position,c.position,n.mapDimensions.width,n.mapDimensions.height);f<l&&(l=f,a=c)}return a}function Kw(e,n){const r=Re(e,n,"berryBush",Bp,a=>a.ownerId===e.id);return r?lf(r.position,n,Bp,Ll,r.id):null}function uf(e,n,r){return n.search.human.byRadius(e.position,r).filter(a=>ao(e,a,n))}function Qw(e,n,r){const o=r.search.human.byProperty("leaderId",e);let a=0;for(const l of o)l.attackTargetId===n&&a++;return a}function dm(e,n,r,o){const a=r.search.berryBush.byRadius(e,n),l=r.search.human.byRadius(e,n).filter(h=>h.leaderId!==o);let c=a.length*_T;c+=l.length*CT;let f;if(l.length>0){const h={};for(const m of l)m.leaderId&&(h[m.leaderId]=(h[m.leaderId]||0)+1);let p=0;for(const m in h)h[m]>p&&(p=h[m],f=parseInt(m,10))}return{score:c,occupyingTribeId:f}}function Tl(e){return e.filter(n=>n.isAdult).reduce((n,r)=>{let o=r.hitpoints;return o+=(r.maxAge-r.age)*.5,o+=r.food.length*2,n+o},0)}function Zw(e,n){if(e.id!==e.leaderId)return null;const r=n,o=cr(e.id,n),{score:a}=dm(o,Xc/2,r,e.id);let l=null,c=a;const f=ET,h=wT;for(let p=e.position.x-h;p<e.position.x+h;p+=f)for(let m=e.position.y-h;m<e.position.y+h;m+=f){const S={x:(p%n.mapDimensions.width+n.mapDimensions.width)%n.mapDimensions.width,y:(m%n.mapDimensions.height+n.mapDimensions.height)%n.mapDimensions.height};if(V(o,S,n.mapDimensions.width,n.mapDimensions.height)<Xc*2)continue;const{score:E}=dm(S,Xc/2,r,e.id);E>c*RT&&(c=E,l=S)}return l}let od=0;function Ud(){const e=Yp[od];return od=(od+1)%Yp.length,e}var Ie=(e=>(e.Gather="Gather",e.Eat="Eat",e.Procreate="Procreate",e.Attack="Attack",e.Plant="Plant",e.CallToAttack="CallToAttack",e.TribeSplit="TribeSplit",e.FollowMe="FollowMe",e.FeedChild="FeedChild",e.HuntPrey="HuntPrey",e.DefendAgainstPredator="DefendAgainstPredator",e.AutopilotMove="AutopilotMove",e.AutopilotGather="AutopilotGather",e.AutopilotAttack="AutopilotAttack",e.AutopilotProcreate="AutopilotProcreate",e.AutopilotPlant="AutopilotPlant",e.AutopilotFeedChild="AutopilotFeedChild",e.AutopilotFollowMe="AutopilotFollowMe",e))(Ie||{});const jl={Gather:"✋",Eat:"🍖",Procreate:"❤️",Attack:"⚔️",Plant:"🌱",CallToAttack:"📢",TribeSplit:"🔱",FollowMe:"➡️",FeedChild:"👨‍👧",HuntPrey:"🏹",DefendAgainstPredator:"🛡️",AutopilotMove:"🎯",AutopilotGather:"✋",AutopilotAttack:"⚔️",AutopilotProcreate:"❤️",AutopilotPlant:"🌱",AutopilotFeedChild:"👨‍👧",AutopilotFollowMe:"➡️"},Q0={Gather:"Gather",Eat:"Eat",Procreate:"Procreate",Attack:"Attack",Plant:"Plant",CallToAttack:"Call to Attack",TribeSplit:"Split Tribe",FollowMe:"Follow Me",FeedChild:"Feed Child",HuntPrey:"Hunt Prey",DefendAgainstPredator:"Defend",AutopilotMove:"Walk",AutopilotGather:"Gather",AutopilotAttack:"Attack",AutopilotProcreate:"Procreate",AutopilotPlant:"Plant",AutopilotFeedChild:"Feed",AutopilotFollowMe:"Follow"};var zr=(e=>(e.Time="Time",e.Hunger="Hunger",e.Hitpoints="Hitpoints",e.Food="Food",e.Autopilot="Autopilot",e.Muted="Muted",e.Family="Family",e.Tribes="Tribes",e))(zr||{});const Qo={Time:"🗓️",Hunger:"🍖",Hitpoints:"❤️",Food:"🍓",Autopilot:"🤖",Muted:"🔇",Family:"👨‍👩‍👧‍👦",Tribes:"🛖"};var Ue=(e=>(e.ToggleMute="ToggleMute",e.TogglePause="TogglePause",e.FastForward="FastForward",e.DismissTutorial="DismissTutorial",e.CommandEat="CommandEat",e.CommandPlant="CommandPlant",e.CommandCallToAttack="CommandCallToAttack",e.CommandFollowMe="CommandFollowMe",e.CommandGather="CommandGather",e.CommandTribeSplit="CommandTribeSplit",e.ToggleProcreationBehavior="ToggleProcreationBehavior",e.ToggleAttackBehavior="ToggleAttackBehavior",e.ToggleFeedChildBehavior="ToggleFeedChildBehavior",e.TogglePlantingBehavior="TogglePlantingBehavior",e.ToggleGatheringBehavior="ToggleGatheringBehavior",e.ToggleAutopilotFollowLeaderBehavior="ToggleAutopilotFollowLeaderBehavior",e.ToggleDiplomacy="ToggleDiplomacy",e))(Ue||{}),As=(e=>(e.Hello="HELLO",e.NewTribeFormed="NEW_TRIBE_FORMED",e.NoHeir="NO_HEIR",e.ChildrenStarving="CHILDREN_STARVING",e))(As||{});let qw=0;function Jw(){return`notification-${Date.now()}-${qw++}`}function Ld(e,n){if(n.identifier){const o=e.notifications.find(a=>a.identifier===n.identifier);if(o){if(o.dismissedUntil&&e.time<o.dismissedUntil)return;o.message=n.message,o.timestamp=e.time,o.creationTime=Date.now(),o.duration=n.duration,o.targetEntityIds=n.targetEntityIds,o.highlightedEntityIds=n.highlightedEntityIds,o.targetPosition=n.targetPosition,o.targetArea=n.targetArea,o.targetRadius=n.targetRadius,o.isDismissed=!1,o.dismissedUntil=void 0;return}}const r={...n,id:Jw(),timestamp:e.time,creationTime:Date.now(),isDismissed:!1};e.notifications.push(r)}function eE(e,n){const r=e.notifications.find(o=>o.id===n);r&&(r.isDismissed=!0,r.identifier&&(r.dismissedUntil=e.time+QI))}function tE(e){const n=e.time;e.notifications=e.notifications.filter(r=>r.duration===0?!0:!(n-r.timestamp>r.duration))}const sd=""+new URL("attack-D4MA8VWK.mp3",import.meta.url).href,nE=""+new URL("gather-CU75596W.mp3",import.meta.url).href,iE=""+new URL("eat-DCjHq2QD.mp3",import.meta.url).href,ad=""+new URL("procreate-CfE4r5Cp.mp3",import.meta.url).href,rE=""+new URL("birth-Cbd67GHT.mp3",import.meta.url).href,oE=""+new URL("child-fed-DzEPuMid.mp3",import.meta.url).href,sE=""+new URL("human-death-B6HFLXES.mp3",import.meta.url).href,aE=""+new URL("game-over-C5dqkyER.mp3",import.meta.url).href,lE=""+new URL("button-click-DomLUeaU.mp3",import.meta.url).href,uE=""+new URL("soundtrack-1-BdlYUGye.mp3",import.meta.url).href;var Ae=(e=>(e[e.Attack=0]="Attack",e[e.Gather=1]="Gather",e[e.Eat=2]="Eat",e[e.Procreate=3]="Procreate",e[e.Birth=4]="Birth",e[e.ChildFed=5]="ChildFed",e[e.HumanDeath=6]="HumanDeath",e[e.Seize=7]="Seize",e[e.CallToAttack=8]="CallToAttack",e[e.TribeSplit=9]="TribeSplit",e[e.CallToFollow=10]="CallToFollow",e[e.GameOver=11]="GameOver",e[e.ButtonClick=12]="ButtonClick",e[e.SoundTrack1=13]="SoundTrack1",e))(Ae||{});const cE=new Map([[0,sd],[1,nE],[2,iE],[3,ad],[4,rE],[5,oE],[6,sE],[11,aE],[12,lE],[7,sd],[8,sd],[9,ad],[10,ad],[13,uE]]);let Zo,Ts;function dE(){if(!(typeof window>"u"))return Ts}function cf(){if(!(typeof window>"u"))return!Zo&&typeof window.AudioContext=="function"&&(Zo=new window.AudioContext,Ts=Zo.createGain(),Ts.connect(Zo.destination),us(.1,!1)),Zo}function us(e,n){Ts&&(Ts.gain.value=n?0:e/10)}const Z0=new Map;let Ka=!1,fm=!1;async function fE(){if(fm||Ka)return;const e=cf();if(!e){console.error("AudioContext not supported. Cannot load sounds.");return}e.state==="suspended"&&e.resume(),Ka=!0,console.log("Starting sound loading...");const n=[];cE.forEach((r,o)=>{const a=fetch(r).then(l=>{if(!l.ok)throw new Error(`Failed to fetch sound: ${r}`);return l.arrayBuffer()}).then(l=>e.decodeAudioData(l)).then(l=>{Z0.set(o,l)}).catch(l=>{console.error(`Error loading sound ${Ae[o]} from ${r}:`,l)});n.push(a)});try{await Promise.all(n),fm=!0,Ka=!1,console.log("All sounds loaded successfully.")}catch(r){Ka=!1,console.error("An error occurred while loading sounds:",r)}}const cs=new Map;function df(e,n){const r=cf(),o=dE();if(!r||!o||o.gain.value===0&&(n==null?void 0:n.trackId)===void 0)return;r.state==="suspended"&&r.resume();const a=Z0.get(e);if(!a){console.warn(`Sound buffer not found for type: ${Ae[e]}`);return}if(n!=null&&n.trackId&&cs.has(n.trackId))return;const l=r.createBufferSource();l.buffer=a,l.loop=(n==null?void 0:n.loop)??!1;const c=r.createGain(),f=r.createStereoPanner();let h=c;if(n!=null&&n.position&&(n!=null&&n.listenerPosition)&&(n!=null&&n.worldDimensions)){const p=ze(n.listenerPosition,n.position,n.worldDimensions.width,n.worldDimensions.height),m=V(n.listenerPosition,n.position,n.worldDimensions.width,n.worldDimensions.height);if(m>im)return;const S=1-Math.pow(m/im,WI);c.gain.value=Math.max(0,S);const y=Math.sin(p.x/m*(Math.PI/2));f.pan.value=isNaN(y)?0:y,c.connect(f),h=f}else{const p=e===Ae.GameOver?.4:e===Ae.SoundTrack1?1:.2;c.gain.value=p}l.connect(h),h.connect(o),l.start(0),n!=null&&n.trackId&&(cs.set(n.trackId,{sourceNode:l,gainNode:c}),l.onended=()=>{cs.delete(n.trackId)})}function hm(e,n=1){const r=cs.get(e),o=cf();if(r&&o){const{sourceNode:a,gainNode:l}=r,c=o.currentTime;l.gain.setValueAtTime(l.gain.value,c),l.gain.linearRampToValueAtTime(0,c+n),a.stop(c+n),a.onended=null,cs.delete(e)}}function ke(e,n,r){const o=Tt(e.gameState);o&&df(n,{position:r,listenerPosition:o.position,worldDimensions:e.gameState.mapDimensions,masterVolume:e.gameState.masterVolume,isMuted:e.gameState.isMuted})}function hE(e,n,r){const o=r.mapDimensions.width,a=r.mapDimensions.height,l=n.radius*2;for(let c=zp;c<o/2;c+=50)for(let f=0;f<10;f++){const h=af(e,c,o,a);if(!(V(e,h,o,a)<zp)&&!io(h,r,l,n.id))return h}return null}function ff(e,n){if(!e.isAdult||e.gender!=="male"||e.leaderId===e.id||!e.leaderId)return{canSplit:!1};if(!e.leaderId)return{canSplit:!1};const r=n.entities.entities.get(e.leaderId);if(!r||r.type!=="human")return{canSplit:!1};const o=ni(At(n,r));if(o&&o.id===e.id)return{canSplit:!1};const a=ys(e.leaderId,n);if(a.length<bp)return{canSplit:!1};const c=j0(e,n).length+1,f=Math.min(a.length*AT,bp);return{canSplit:c>=f,progress:c/f}}function hf(e,n){var c;if(!ff(e,n).canSplit)return;const r=e.leaderId?n.entities.entities.get(e.leaderId):void 0,o=Ud(),a=j0(e,n);e.leaderId=e.id,e.tribeBadge=o,e.diplomacy=new Map,r&&((c=r.diplomacy)==null||c.set(e.id,Ft.Hostile));for(const f of a)f.leaderId=e.id,f.tribeBadge=o;Ld(n,{type:As.NewTribeFormed,message:`A new tribe has formed! ${o}`,duration:XI,targetEntityIds:[e.id],highlightedEntityIds:[e.id,...a.map(f=>f.id)]}),ke({gameState:n},Ae.TribeSplit,e.position)}function gf(e,n){const r=[];if(n.food.length>0&&n.hunger>Mi&&r.push({type:Ie.Eat,action:"eating",key:"f"}),n.food.length<n.maxFood){const l=Re(n,e,"berryBush",gt,h=>h.food.length>0),c=Re(n,e,"corpse",gt,h=>h.food.length>0);let f=null;l&&c?f=V(n.position,l.position,e.mapDimensions.width,e.mapDimensions.height)<=V(n.position,c.position,e.mapDimensions.width,e.mapDimensions.height)?l:c:f=l||c,f&&r.push({type:Ie.Gather,action:"gathering",key:"e",targetEntity:f})}const o=Re(n,e,"human",gt,l=>dr(n,l,e));if(o&&r.push({type:Ie.Procreate,action:"procreating",key:"r",targetEntity:o}),n.food.length>0&&n.isAdult){const l=Re(n,e,"human",gt,c=>{const f=c;return!f.isAdult&&(f.motherId===n.id||f.fatherId===n.id)&&f.hunger>=Mi});l&&r.push({type:Ie.FeedChild,action:"feeding",key:"h",targetEntity:l})}const a=Re(n,e,"human",xn,l=>ao(n,l,e))??Re(n,e,"predator",xn)??Re(n,e,"prey",xn);return a&&r.push({type:Ie.Attack,action:"attacking",key:"q",targetEntity:a}),n.food.filter(l=>l.type===ti.Berry).length>=ms&&r.push({type:Ie.Plant,action:"planting",key:"b"}),n.leaderId===n.id&&!n.isCallingToAttack&&uf(n,e,A0).length>0&&r.push({type:Ie.CallToAttack,action:"idle",key:"v"}),ff(n,e).canSplit&&r.push({type:Ie.TribeSplit,action:"idle",key:"k"}),n.leaderId===n.id&&!n.isCallingToFollow&&r.push({type:Ie.FollowMe,action:"idle",key:"c"}),r}const ao=(e,n,r)=>{var o,a,l,c;if(e.id===n.id)return!1;if(e.leaderId&&!n.leaderId)return!0;if(e.leaderId===n.leaderId)return!1;if(e.leaderId&&n.leaderId){const f=(a=(o=r.entities.entities.get(e.leaderId))==null?void 0:o.diplomacy)==null?void 0:a.get(n.leaderId),h=(c=(l=r.entities.entities.get(n.leaderId))==null?void 0:l.diplomacy)==null?void 0:c.get(e.leaderId);return f===Ft.Hostile||h===Ft.Hostile}return!1},dr=(e,n,r)=>{if(e.id===n.id||e.gender===n.gender||!e.isAdult||!n.isAdult||e.hunger>=ur||n.hunger>=ur||(e.procreationCooldown||0)>0||(n.procreationCooldown||0)>0||ao(e,n,r))return!1;const o=e.gender==="female"?e:n;return!(o.isPregnant||o.age>g0)},gE={id:fl,update:(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:a}=o,l=o.deltaTime*(Yt/jt);if(r.age+=l,r.age>=r.lifespan)return{nextState:gs,data:{...e,enteredAt:a.time,previousState:fl}};const c=af(r.position,r.spreadRadius,a.mapDimensions.width,a.mapDimensions.height);return io(c,a,15)||Xl(a.entities,c,a.time),{nextState:ir,data:{...e,enteredAt:a.time,previousState:fl}}},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},pE={id:gs,update:e=>({nextState:gs,data:e}),onEnter:(e,n)=>(Ds(e.updateContext.gameState.entities,e.entity.id),{...n,enteredAt:e.updateContext.gameState.time})},mE=[Mw,Fw,gE,pE],St="humanIdle",nr="humanMoving",ns="humanEating",Vl="humanGathering",Is="humanProcreating",Ui="humanAttacking",gl="humanPlanting",vE={id:St,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="attacking"&&r.attackTargetId?{nextState:Ui,data:{...e,enteredAt:o.gameState.time,previousState:St,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:(r.hunger>=d0?(r.debuffs=r.debuffs.filter(a=>a.type!=="slow"),r.debuffs.push({type:"slow",startTime:o.gameState.time,duration:.1})):r.debuffs=r.debuffs.filter(a=>a.type!=="slow"),r.activeAction==="moving"?{nextState:nr,data:{...e,enteredAt:o.gameState.time,previousState:St,target:r.target}}:r.activeAction==="gathering"?{nextState:Vl,data:{...e,enteredAt:o.gameState.time,previousState:St,target:r.target}}:r.activeAction==="eating"?{nextState:ns,data:{...e,enteredAt:o.gameState.time,previousState:St}}:r.activeAction==="planting"&&r.target?{nextState:gl,data:{...e,enteredAt:o.gameState.time,previousState:St,plantingSpot:r.target}}:{nextState:St,data:e})},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function q0(e){let n=PA;return e.hunger>=d0&&(n*=NA),e.age>=kA&&(n*=OA),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}const ld=7.5;class SE{constructor(){Te(this,"id",nr)}update(n,r){var h;const{entity:o,updateContext:a}=r;if(o.activeAction==="attacking"&&o.attackTargetId)return{nextState:Ui,data:{...n,enteredAt:a.gameState.time,previousState:nr,attackTargetId:o.attackTargetId,attackStartTime:a.gameState.time}};if(o.activeAction!=="moving")return{nextState:St,data:{...n,enteredAt:a.gameState.time,previousState:nr}};let l;if(typeof o.target=="object"?l=o.target:typeof o.target=="number"&&(l=(h=r.updateContext.gameState.entities.entities.get(o.target))==null?void 0:h.position),!l&&(o.direction.x!==0||o.direction.y!==0)&&(l={x:o.position.x+o.direction.x*ld*2,y:o.position.y+o.direction.y*ld*2}),!l)return{nextState:St,data:{...n,enteredAt:a.gameState.time,previousState:nr}};const c=ze(o.position,l,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=qe(c),o.acceleration=q0(o),V(o.position,l,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)<ld?{nextState:St,data:{...n,enteredAt:a.gameState.time,previousState:nr}}:{nextState:nr,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}}const yE=new SE,AE={id:ns,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction!=="eating"?{nextState:St,data:{...e,enteredAt:o.gameState.time,previousState:ns}}:(r.food.length>0&&(!r.eatingCooldownTime||o.gameState.time>=r.eatingCooldownTime)&&r.hunger>Mi&&(r.hunger=Math.max(0,r.hunger-Mi),r.food.pop(),r.eatingCooldownTime=o.gameState.time+1,ke(o,Ae.Eat,r.position),(!r.lastEatingEffectTime||o.gameState.time-r.lastEatingEffectTime>2)&&(we(o.gameState,oe.Eating,r.position,Be,r.id),r.lastEatingEffectTime=o.gameState.time)),r.hunger<=0||r.food.length<=0?{nextState:St,data:{...e,enteredAt:o.gameState.time,previousState:ns}}:{nextState:ns,data:e})},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};class TE{constructor(){Te(this,"id",Vl)}update(n,r){return r.entity.activeAction!=="gathering"?{nextState:"humanIdle",data:{...n,enteredAt:r.updateContext.gameState.time,previousState:this.id}}:{nextState:this.id,data:n}}}const IE=new TE,wE=(e,n)=>(n.procreationEndTime=e.updateContext.gameState.time+(n.duration||2),n),EE=(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:a}=o;if(a.time<(e.procreationEndTime||0))return{nextState:Is,data:e};const l=a.entities.entities.get(e.partnerId);if(l&&l.type==="human"&&!l.isPregnant&&r.hunger<ur&&l.hunger<ur&&!r.procreationCooldown&&!l.procreationCooldown){const c=r.gender==="female"?r:l.gender==="female"?l:void 0,f=r.gender==="male"?r:l.gender==="male"?l:void 0;c&&f&&(c.isPregnant=!0,c.gestationTime=UA,c.pregnancyFatherId=f.id,r.procreationCooldown=Lp,l.procreationCooldown=Lp,ke(o,Ae.Procreate,c.position))}return r.activeAction="idle",l&&(l.activeAction="idle"),{nextState:St,data:{...e,enteredAt:a.time,previousState:Is}}},_E={id:Is,onEnter:wE,update:EE},CE={id:Ui,onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time,attackStartTime:e.updateContext.gameState.time}),update:(e,n)=>{if(n.entity.activeAction!=="attacking"||!n.entity.attackTargetId)return n.entity.activeAction="idle",{nextState:St,data:{...e}};const r=n.updateContext.gameState.entities.entities.get(n.entity.attackTargetId);if(!r)return n.entity.activeAction="idle",{nextState:St,data:{...e}};const o=V(n.entity.position,r.position,n.updateContext.gameState.mapDimensions.width,n.updateContext.gameState.mapDimensions.height),a=ze(n.entity.position,r.position,n.updateContext.gameState.mapDimensions.width,n.updateContext.gameState.mapDimensions.height);return n.entity.direction=qe(a),o>xn?n.entity.acceleration=q0(n.entity):n.entity.acceleration=0,{nextState:Ui,data:e}}},RE={id:gl,update:(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:a}=o;if(a.time-e.enteredAt>=qA){if(r.food.filter(f=>f.type===ti.Berry).length>=ms){for(let h=0;h<ms;h++){const p=r.food.findIndex(m=>m.type===ti.Berry);p>-1&&r.food.splice(p,1)}const f=Xl(a.entities,e.plantingSpot,a.time);f.ownerId=r.id,f.claimedUntil=a.time+c0}return{nextState:St,data:{...e,enteredAt:a.time,previousState:gl}}}return{nextState:gl,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},PE=[vE,yE,AE,IE,_E,CE,RE],In="preyIdle",Di="preyMoving",is="preyGrazing",rs="preyProcreating",NE={id:In,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:Di,data:{...e,enteredAt:o.gameState.time,previousState:In,target:r.target}}:r.activeAction==="grazing"?{nextState:is,data:{...e,enteredAt:o.gameState.time,previousState:In}}:r.activeAction==="procreating"?{nextState:rs,data:{...e,enteredAt:o.gameState.time,previousState:In}}:{nextState:In,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function DE(e){let n=dw;return e.isAdult||(n*=.7),e.hunger>=mw&&(n*=vw),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}function kE(e,n){const r=e>>16&255,o=e>>8&255,a=e&255,l=n>>16&255,c=n>>8&255,f=n&255;let h=Math.floor((r+l)/2),p=Math.floor((o+c)/2),m=Math.floor((a+f)/2);return Math.random()<.05&&(h=Math.max(0,Math.min(255,h+(Math.random()-.5)*60))),Math.random()<.05&&(p=Math.max(0,Math.min(255,p+(Math.random()-.5)*60))),Math.random()<.05&&(m=Math.max(0,Math.min(255,m+(Math.random()-.5)*60))),h<<16|p<<8|m}function Il(){const e=Math.floor(Math.random()*100)+100,n=Math.floor(Math.random()*80)+60,r=Math.floor(Math.random()*60)+20;return e<<16|n<<8|r}const ud=10;class OE{constructor(){Te(this,"id",Di)}update(n,r){var h;const{entity:o,updateContext:a}=r;if(o.activeAction!=="moving")return{nextState:In,data:{...n,enteredAt:a.gameState.time,previousState:Di}};let l;if(typeof o.target=="object"?l=o.target:typeof o.target=="number"&&(l=(h=r.updateContext.gameState.entities.entities.get(o.target))==null?void 0:h.position),!l&&(o.direction.x!==0||o.direction.y!==0)&&(l={x:o.position.x+o.direction.x*ud*2,y:o.position.y+o.direction.y*ud*2}),!l)return{nextState:In,data:{...n,enteredAt:a.gameState.time,previousState:Di}};const c=ze(o.position,l,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=qe(c),o.acceleration=DE(o),V(o.position,l,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)<ud?{nextState:In,data:{...n,enteredAt:a.gameState.time,previousState:Di}}:{nextState:Di,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}onEnter(n,r){return{...r,enteredAt:n.updateContext.gameState.time}}}const ME=new OE,FE={id:is,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:Di,data:{...e,enteredAt:o.gameState.time,previousState:is,target:r.target}}:r.activeAction!=="grazing"?{nextState:In,data:{...e,enteredAt:o.gameState.time,previousState:is}}:{nextState:is,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},UE={id:rs,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:Di,data:{...e,enteredAt:o.gameState.time,previousState:rs,target:r.target}}:r.activeAction!=="procreating"?{nextState:In,data:{...e,enteredAt:o.gameState.time,previousState:rs}}:{nextState:rs,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},LE=[NE,ME,FE,UE],Mt="predatorIdle",Pi="predatorMoving",ei="predatorAttacking",$r="predatorProcreating",ar="predatorEating",HE={id:Mt,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="eating"?{nextState:ar,data:{...e,enteredAt:o.gameState.time,previousState:Mt,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}}:r.activeAction==="attacking"&&r.attackTargetId?{nextState:ei,data:{...e,enteredAt:o.gameState.time,previousState:Mt,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:r.activeAction==="moving"?{nextState:Pi,data:{...e,enteredAt:o.gameState.time,previousState:Mt,target:r.target}}:r.activeAction==="procreating"?{nextState:$r,data:{...e,enteredAt:o.gameState.time,previousState:Mt}}:{nextState:Mt,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function J0(e){let n=yw;return e.hunger>=Iw&&(n*=ww),e.isAdult||(n*=.7),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}function BE(e,n){const r=e>>16&255,o=e>>8&255,a=e&255,l=n>>16&255,c=n>>8&255,f=n&255;let h=Math.floor((r+l)/2),p=Math.floor((o+c)/2),m=Math.floor((a+f)/2);return Math.random()<.05&&(h=Math.max(0,Math.min(255,h+(Math.random()-.5)*60))),Math.random()<.05&&(p=Math.max(0,Math.min(255,p+(Math.random()-.5)*60))),Math.random()<.05&&(m=Math.max(0,Math.min(255,m+(Math.random()-.5)*60))),h<<16|p<<8|m}function wl(){const e=Math.floor(Math.random()*60)+60,n=Math.floor(Math.random()*50)+40,r=Math.floor(Math.random()*40)+20;return e<<16|n<<8|r}const cd=12;class GE{constructor(){Te(this,"id",Pi)}update(n,r){var h;const{entity:o,updateContext:a}=r;if(o.activeAction==="eating")return{nextState:ar,data:{...n,enteredAt:a.gameState.time,previousState:Pi,preyId:o.attackTargetId,eatingStartTime:a.gameState.time}};if(o.activeAction==="attacking"&&o.attackTargetId)return{nextState:ei,data:{...n,enteredAt:a.gameState.time,previousState:Pi,attackTargetId:o.attackTargetId,attackStartTime:a.gameState.time}};if(o.activeAction!=="moving")return{nextState:Mt,data:{...n,enteredAt:a.gameState.time,previousState:Pi}};let l;if(typeof o.target=="object"?l=o.target:typeof o.target=="number"&&(l=(h=r.updateContext.gameState.entities.entities.get(o.target))==null?void 0:h.position),!l&&(o.direction.x!==0||o.direction.y!==0)&&(l={x:o.position.x+o.direction.x*cd*2,y:o.position.y+o.direction.y*cd*2}),!l)return{nextState:Mt,data:{...n,enteredAt:a.gameState.time,previousState:Pi}};const c=ze(o.position,l,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=qe(c),o.acceleration=J0(o),V(o.position,l,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)<cd?{nextState:Mt,data:{...n,enteredAt:a.gameState.time,previousState:Pi}}:{nextState:Pi,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}onEnter(n,r){return{...r,enteredAt:n.updateContext.gameState.time}}}const xE=new GE,bE={id:ei,update:(e,n)=>{const{entity:r,updateContext:o}=n;if(r.activeAction==="eating")return{nextState:ar,data:{...e,enteredAt:o.gameState.time,previousState:ei,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}};if(r.activeAction!=="attacking"||!r.attackTargetId)return r.activeAction="idle",{nextState:Mt,data:{...e,enteredAt:o.gameState.time,previousState:ei}};const a=o.gameState.entities.entities.get(r.attackTargetId);if(!a)return r.activeAction="idle",{nextState:Mt,data:{...e,enteredAt:o.gameState.time,previousState:ei}};if(a.type==="prey"&&a.hitpoints<=0||a.type==="predator"&&a.hitpoints<=0||a.type==="human"&&a.hitpoints<=0)return r.activeAction="idle",{nextState:Mt,data:{...e,enteredAt:o.gameState.time,previousState:ei}};const c=V(r.position,a.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height),f=ze(r.position,a.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height);return r.direction=qe(f),c>Tn?r.acceleration=J0(r):r.acceleration=0,{nextState:ei,data:e}},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},zE={id:$r,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="eating"?{nextState:ar,data:{...e,enteredAt:o.gameState.time,previousState:$r,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}}:r.activeAction==="attacking"&&r.attackTargetId?{nextState:ei,data:{...e,enteredAt:o.gameState.time,previousState:$r,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:r.activeAction!=="procreating"?{nextState:Mt,data:{...e,enteredAt:o.gameState.time,previousState:$r}}:{nextState:$r,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},$E={id:ar,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction!=="eating"?{nextState:Mt,data:{...e,enteredAt:o.gameState.time,previousState:ar}}:{nextState:ar,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},WE=[HE,xE,bE,zE,$E],gm=[...mE,...PE,...LE,...WE];function YE(e,n,r){const o=yA(e,gm);if(!o)return TA(e),[e,n];const{nextState:a,data:l}=o.update(n,r);return AA(e,a)?[a,SA(o,a,l,r,gm)]:[a,l]}function jE(e,n,r){const{gameState:o}=n,a=r*(Yt/jt);if(e.isAdult=e.age>=Vd,e.isCallingToAttack&&e.callToAttackEndTime&&o.time>e.callToAttackEndTime&&(e.isCallingToAttack=!1,e.callToAttackEndTime=void 0),e.isCallingToFollow&&e.callToFollowEndTime&&o.time>e.callToFollowEndTime&&(e.isCallingToFollow=!1,e.callToFollowEndTime=void 0),e.movementSlowdown&&o.time>e.movementSlowdown.endTime&&(e.movementSlowdown=void 0),e.hitpoints<e.maxHitpoints){const c=1-e.hunger/100*jA,f=YA*c*a;e.hitpoints=Math.min(e.maxHitpoints,e.hitpoints+f)}if(e.hunger+=r*(Xo/(Yt/jt)),e.hunger>$I&&(!e.lastHungerEffectTime||o.time-e.lastHungerEffectTime>or*2)&&(we(o,oe.Hunger,e.position,or,e.id),e.lastHungerEffectTime=o.time),e.age+=r/Fl,e.isPlayer){const c=At(o,e).filter(f=>f.hunger>=KI);if(c.length>0){const f=c.map(h=>h.id);Ld(o,{identifier:"children_starving",type:As.ChildrenStarving,message:"Your children are starving!",duration:VI,targetEntityIds:f,highlightedEntityIds:f})}}if(e.gender==="female"&&e.isPregnant&&e.gestationTime&&(e.gestationTime-=a,e.hunger+=r*((Xo*LA-Xo)/(Yt/jt)),(!e.lastPregnantEffectTime||o.time-e.lastPregnantEffectTime>or*3)&&(we(o,oe.Pregnant,e.position,or,e.id),e.lastPregnantEffectTime=o.time),e.gestationTime<=0&&(eC(e,e.pregnancyFatherId,n),e.isPregnant=!1,e.gestationTime=0,e.pregnancyFatherId=void 0)),e.procreationCooldown&&(e.procreationCooldown-=a,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.attackCooldown&&(e.attackCooldown-=a,e.attackCooldown<0&&(e.attackCooldown=0)),e.feedParentCooldownTime&&(e.feedParentCooldownTime-=a,e.feedParentCooldownTime<0&&(e.feedParentCooldownTime=0)),e.feedChildCooldownTime&&(e.feedChildCooldownTime-=a,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0)),e.leaderMetaStrategyCooldown&&(e.leaderMetaStrategyCooldown-=a,e.leaderMetaStrategyCooldown<0&&(e.leaderMetaStrategyCooldown=0)),e.isAdult?e.radius===oo&&(e.radius=pt):e.hunger+=r*((Xo*HA-Xo)/(Yt/jt)),e.isAdult&&e.food.length>0&&(!e.feedParentCooldownTime||e.feedParentCooldownTime<=0)){const c=[];if(e.motherId){const f=o.entities.entities.get(e.motherId);f&&c.push(f)}if(e.fatherId){const f=o.entities.entities.get(e.fatherId);f&&c.push(f)}for(const f of c)if(f.age>=p0&&f.hunger>=xA&&V(e.position,f.position,o.mapDimensions.width,o.mapDimensions.height)<=bA){e.food.pop(),f.hunger=Math.max(0,f.hunger-Mi),e.feedParentCooldownTime=zA;break}}let l;if(e.hitpoints<=0?l="killed":e.hunger>=Jt?e.food.length>0&&e.isAdult?(e.food.pop(),e.hunger=Math.max(0,e.hunger-Mi)):l="hunger":e.age>=e.maxAge&&(l="oldAge"),l){if(e.leaderId===e.id){const c=ni(At(o,e));c?(c.leaderId=c.id,c.tribeBadge=e.tribeBadge,c.diplomacy=new Map(e.diplomacy),o.entities.entities.forEach(f=>{if(f.type==="human"&&f.leaderId===e.id){const h=f;h.leaderId=c.id}})):o.entities.entities.forEach(f=>{if(f.type==="human"&&f.leaderId===e.id){const h=f;h.leaderId=void 0,h.tribeBadge=void 0}})}if(e.isPlayer){const c=ni(At(o,e));c?(c.isPlayer=!0,o.generationCount++):(o.gameOver=!0,o.causeOfGameOver=l,Ld(o,{identifier:"no_heir",type:As.NoHeir,message:"Your lineage has ended. You have no heir.",duration:0}))}Z_(o.entities,e.position,e.gender,e.age,e.radius,e.id,o.time,e.food,e.hunger),Ds(o.entities,e.id);return}e.animationProgress===void 0&&(e.animationProgress=0),e.animationSpeed===void 0&&(e.animationSpeed=1),e.animationProgress+=r*e.animationSpeed,e.animationProgress>=1&&(e.animationProgress=0)}function VE(e,n){const r=n.gameState.time-e.timeOfDeath;e.decayProgress=Math.min(1,r/$A);const o=Math.floor(m0*(1-e.decayProgress));e.food.length>o&&e.food.splice(o),e.decayProgress>=1&&e.food.length<=0&&Ds(n.gameState.entities,e.id)}function XE(e,n,r){const o=r*(Yt/jt);e.age+=r/Fl,e.isAdult=e.age>=as;let a=n.gameState.ecosystem.preyHungerIncreasePerHour*o;if(e.isPregnant&&(a*=1.2),e.hunger+=a,e.isPregnant&&e.gestationTime!==void 0&&(e.gestationTime-=o,e.gestationTime<=0)){const c={x:e.position.x+(Math.random()-.5)*40,y:e.position.y+(Math.random()-.5)*40};c.x=Math.max(20,Math.min(n.gameState.mapDimensions.width-20,c.x)),c.y=Math.max(20,Math.min(n.gameState.mapDimensions.height-20,c.y));const f=Math.random()<.5?"male":"female",h=e,p=e.fatherId?n.gameState.entities.entities.get(e.fatherId):void 0;let m;if(p)m=kE(h.geneCode,p.geneCode);else{m=h.geneCode;const S=Math.floor((Math.random()-.5)*4096);m=Math.max(0,Math.min(16777215,m+S))}Es(n.gameState.entities,c,f,0,L0*.5,m,e.id,e.fatherId),we(n.gameState,oe.Procreation,e.position,or,e.id),ke(n,Ae.Birth,e.position),e.isPregnant=!1,e.gestationTime=0,e.procreationCooldown=n.gameState.ecosystem.preyProcreationCooldown,e.fatherId=void 0}e.procreationCooldown&&e.procreationCooldown>0&&(e.procreationCooldown-=o,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.eatingCooldownTime&&e.eatingCooldownTime>n.gameState.time||(e.eatingCooldownTime=void 0),e.fleeCooldown&&e.fleeCooldown>0&&(e.fleeCooldown-=o,e.fleeCooldown<0&&(e.fleeCooldown=0)),e.feedChildCooldownTime&&e.feedChildCooldownTime>0&&(e.feedChildCooldownTime-=o,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0));let l=!1;e.hunger>=cw&&(l=!0),e.hitpoints<=0&&(l=!0),e.age>=U0&&(l=!0),l&&(q_(n.gameState.entities,e.position,e.gender,e.age,e.radius,e.id,n.gameState.time,e.geneCode),Ds(n.gameState.entities,e.id))}function KE(e,n,r){const o=r*(Yt/jt);e.age+=r/Fl,e.isAdult=e.age>=ls;let a=n.gameState.ecosystem.predatorHungerIncreasePerHour*o;if(e.isPregnant&&(a*=1.3),e.hunger+=a,e.isPregnant&&e.gestationTime!==void 0&&(e.gestationTime-=o,e.gestationTime<=0)){const c={x:e.position.x+(Math.random()-.5)*50,y:e.position.y+(Math.random()-.5)*50};c.x=Math.max(25,Math.min(n.gameState.mapDimensions.width-25,c.x)),c.y=Math.max(25,Math.min(n.gameState.mapDimensions.height-25,c.y));const f=Math.random()<.5?"male":"female",h=e,p=e.pregnancyFatherId?n.gameState.entities.entities.get(e.pregnancyFatherId):void 0;let m;if(p)m=BE(h.geneCode,p.geneCode);else{m=h.geneCode;const S=Math.floor((Math.random()-.5)*4096);m=Math.max(0,Math.min(16777215,m+S))}_s(n.gameState.entities,c,f,0,B0*.6,m,e.id,e.pregnancyFatherId),we(n.gameState,oe.Procreation,e.position,or,e.id),ke(n,Ae.Birth,e.position),e.isPregnant=!1,e.gestationTime=0,e.procreationCooldown=n.gameState.ecosystem.predatorProcreationCooldown,e.pregnancyFatherId=void 0}e.procreationCooldown&&e.procreationCooldown>0&&(e.procreationCooldown-=o,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.attackCooldown&&e.attackCooldown>0&&(e.attackCooldown-=o,e.attackCooldown<0&&(e.attackCooldown=0)),e.huntCooldown&&e.huntCooldown>0&&(e.huntCooldown-=o,e.huntCooldown<0&&(e.huntCooldown=0)),e.feedChildCooldownTime&&e.feedChildCooldownTime>0&&(e.feedChildCooldownTime-=o,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0));let l=!1;e.hunger>=Sw&&(l=!0),e.hitpoints<=0&&(l=!0),e.age>=H0&&(l=!0),l&&(J_(n.gameState.entities,e.position,e.gender,e.age,e.radius,e.id,n.gameState.time,e.geneCode),Ds(n.gameState.entities,e.id))}var Ps=(e=>(e[e.BehaviorTreeBased=0]="BehaviorTreeBased",e))(Ps||{});function pf(e,n){if(e.aiBehaviorTree&&e.aiBlackboard){const r=e.aiBlackboard.get("lastAiUpdateTime")??0;n.gameState.time-r>=vs&&(e.aiBehaviorTree.execute(e,n,e.aiBlackboard),e.aiBlackboard.set("lastAiUpdateTime",n.gameState.time))}else console.warn(`Behavior Tree AI ticked for human ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle"}function QE(e,n){switch(e.aiBlackboard&&e.aiBlackboard.cleanupOldEntries(n.gameState.time),e.aiType){case Ps.BehaviorTreeBased:default:pf(e,n);break}}function ZE(e,n){e.aiBehaviorTree&&e.aiBlackboard?pf(e,n):(console.warn(`Behavior Tree AI ticked for prey ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle")}function qE(e,n){e.aiBehaviorTree&&e.aiBlackboard?pf(e,n):(console.warn(`Behavior Tree AI ticked for predator ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle")}function JE(e,n){e.forces.push(yt(e.velocity,-.1));const r=yt(qe(e.direction),e.acceleration);e.forces.push(r),e.debuffs.forEach(o=>{n.gameState.time-o.startTime<o.duration&&o.type==="slow"&&(e.velocity=yt(e.velocity,.5))}),e.debuffs=e.debuffs.filter(o=>n.gameState.time-o.startTime<o.duration),e.velocity=bn(e.velocity,e.forces.reduce(bn,{x:0,y:0})),no(e.velocity)<.001&&(e.velocity={x:0,y:0}),e.position=bn(e.position,yt(e.velocity,n.deltaTime)),e.position.x=(e.position.x%n.gameState.mapDimensions.width+n.gameState.mapDimensions.width)%n.gameState.mapDimensions.width,e.position.y=(e.position.y%n.gameState.mapDimensions.height+n.gameState.mapDimensions.height)%n.gameState.mapDimensions.height,e.forces=[],e.type==="human"?jE(e,n,n.deltaTime):e.type==="corpse"?VE(e,n):e.type==="prey"?XE(e,n,n.deltaTime):e.type==="predator"&&KE(e,n,n.deltaTime),e.type==="human"&&QE(e,n),e.type==="prey"?ZE(e,n):e.type==="predator"&&qE(e,n),e.stateMachine&&(e.stateMachine=YE(...e.stateMachine,{entity:e,updateContext:n}))}var T=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.FAILURE=1]="FAILURE",e[e.RUNNING=2]="RUNNING",e[e.NOT_EVALUATED=3]="NOT_EVALUATED",e))(T||{});const pm="Human Behavior",e_=1;class t_{constructor(){Te(this,"nodeData",new Map);Te(this,"pathStack",[]);Te(this,"startTimeStack",[])}nodeStart(n){this.pathStack.push(n),this.startTimeStack.push(performance.now())}nodeEnd(){if(this.startTimeStack.length===0||this.pathStack.length===0){console.error("BTProfiler: nodeEnd() called without a matching nodeStart().");return}const n=performance.now(),r=this.startTimeStack.pop(),o=n-r,a=this.pathStack.join(" > "),l=this.nodeData.get(a)??{path:a,totalTime:0,callCount:0,minTime:1/0,maxTime:-1/0};l.totalTime+=o,l.callCount++,l.minTime=Math.min(l.minTime,o),l.maxTime=Math.max(l.maxTime,o),this.nodeData.set(a,l),this.pathStack.pop()}report(n={}){const{showAll:r=!1}=n,o=Array.from(this.nodeData.values());if(o.length===0){console.log("--- Behavior Tree Profiler: No data collected. ---");return}let a=o,l="--- Behavior Tree Full Report ---";if(!r){const f=this.nodeData.get(pm);if(f){const h=f.totalTime*e_/100;a=o.filter(p=>p.totalTime>h&&p.path!==pm),l="--- Behavior Tree Problem Report ---"}else console.log('BTProfiler: Root node "Human Behavior" not found. Showing full report.'),l="--- Behavior Tree Full Report (Root Not Found) ---"}const c=a.sort((f,h)=>h.totalTime-f.totalTime);console.log(l),c.length>0?console.table(c.map(f=>({Path:f.path,"Total Time (ms)":f.totalTime.toFixed(3),Calls:f.callCount,"Avg Time (ms)":(f.totalTime/f.callCount).toFixed(3),"Min Time (ms)":f.minTime.toFixed(3),"Max Time (ms)":f.maxTime.toFixed(3)}))):console.log("No significant performance problems detected."),console.log("------------------------------------")}reset(){this.nodeData.clear(),this.pathStack=[],this.startTimeStack=[]}}const at=new t_;function En(e){return Array.isArray(e)?e:[e,""]}class pe{constructor(n,r,o=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");this.children=n,this.name=r,this.depth=o,this.children.forEach(a=>{a.depth=(this.depth??0)+1})}execute(n,r,o){this.name&&at.nodeStart(this.name);try{for(const a of this.children){const[l,c]=En(a.execute(n,r,o));if(l!==T.SUCCESS)return this.lastStatus=l,this.name&&o.recordNodeExecution(this.name,l,r.gameState.time,this.depth,c),l}return this.lastStatus=T.SUCCESS,this.name&&o.recordNodeExecution(this.name,T.SUCCESS,r.gameState.time,this.depth,""),T.SUCCESS}finally{this.name&&at.nodeEnd()}}}class _n{constructor(n,r,o=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");Te(this,"runningChildIndex");this.children=n,this.name=r,this.depth=o,this.children.forEach(a=>{a.depth=(this.depth??0)+1})}execute(n,r,o){this.name&&at.nodeStart(this.name);try{const a=this.runningChildIndex??0;for(let l=a;l<this.children.length;l++){const c=this.children[l],[f,h]=En(c.execute(n,r,o));if(f!==T.FAILURE){if(f===T.SUCCESS)return delete this.runningChildIndex,this.lastStatus=T.SUCCESS,this.name&&o.recordNodeExecution(this.name,T.SUCCESS,r.gameState.time,this.depth,h),T.SUCCESS;if(f===T.RUNNING)return this.runningChildIndex=l,this.lastStatus=T.RUNNING,this.name&&o.recordNodeExecution(this.name,T.RUNNING,r.gameState.time,this.depth,h),T.RUNNING}}return delete this.runningChildIndex,this.lastStatus=T.FAILURE,this.name&&o.recordNodeExecution(this.name,T.FAILURE,r.gameState.time,this.depth,""),T.FAILURE}finally{this.name&&at.nodeEnd()}}}class ae{constructor(n,r,o=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");this.action=n,this.name=r,this.depth=o}execute(n,r,o){this.name&&at.nodeStart(this.name);try{const[a,l]=En(this.action(n,r,o));return this.lastStatus=a,this.name&&o.recordNodeExecution(this.name,a,r.gameState.time,this.depth,l),a}finally{this.name&&at.nodeEnd()}}}class ne{constructor(n,r,o=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");this.condition=n,this.name=r,this.depth=o}execute(n,r,o){this.name&&at.nodeStart(this.name);try{const[a,l]=En(this.condition(n,r,o)),c=a?T.SUCCESS:T.FAILURE;return this.lastStatus=c,this.name&&o.recordNodeExecution(this.name,c,r.gameState.time,this.depth,l),c}finally{this.name&&at.nodeEnd()}}}class El{constructor(n,r,o,a=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");Te(this,"startTimeKey");this.child=n,this.timeoutDurationHours=r,this.name=o,this.depth=a,this.child.depth=(this.depth??0)+1,this.startTimeKey=`timeout_${this.name}_startTime`}execute(n,r,o){at.nodeStart(this.name);try{const a=r.gameState.time;let l=o.get(this.startTimeKey);const[c,f]=En(this.child.execute(n,r,o));if(c===T.RUNNING){l===void 0&&(o.set(this.startTimeKey,a),l=a);const h=a-l;if(h>this.timeoutDurationHours){o.delete(this.startTimeKey),this.lastStatus=T.FAILURE;const m=`Timed out after ${h.toFixed(2)}h.`;return o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,m),this.lastStatus}this.lastStatus=T.RUNNING;const p=`Running for ${h.toFixed(2)}h. ${f}`;return o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,p),this.lastStatus}return l!==void 0&&o.delete(this.startTimeKey),this.lastStatus=c,o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,f),this.lastStatus}finally{at.nodeEnd()}}}class ws{constructor(n,r,o,a=0,l){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");Te(this,"statusKey");Te(this,"timestampKey");this.child=n,this.cacheDurationHours=r,this.validityCheck=l,this.name=o,this.depth=a,this.child.depth=(this.depth??0)+1,this.statusKey=`caching_${this.name}_status`,this.timestampKey=`caching_${this.name}_timestamp`}execute(n,r,o){at.nodeStart(this.name);try{const a=r.gameState.time,l=o.get(this.statusKey),c=o.get(this.timestampKey);if(l!==void 0&&c!==void 0){const m=a-c>this.cacheDurationHours,S=this.validityCheck?this.validityCheck(n,r,o):!0;if(!m&&S){const y=(c+this.cacheDurationHours-a).toFixed(2),E=`Cache hit. Status: ${T[l]}. ${y}h left.`;return this.lastStatus=l,o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,E),this.lastStatus}}const[f,h]=En(this.child.execute(n,r,o));(f===T.SUCCESS||f===T.FAILURE)&&(o.set(this.statusKey,f),o.set(this.timestampKey,a)),this.lastStatus=f;const p=`Cache miss. Child returned ${T[f]}. ${h}`;return o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,p),this.lastStatus}finally{at.nodeEnd()}}}class fr{constructor(n,r,o,a=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");Te(this,"cooldownKey");this.cooldownDurationHours=n,this.child=r,this.name=o,this.depth=a,this.child.depth=(this.depth??0)+1,this.cooldownKey=`cooldown_${this.name}`}execute(n,r,o){at.nodeStart(this.name);try{const a=r.gameState.time,l=o.get(this.cooldownKey);if(this.child.lastStatus===T.RUNNING){const[h,p]=En(this.child.execute(n,r,o));if(this.lastStatus=h,this.name){const m=`Continuing running child. ${p}`;o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,m)}return this.lastStatus}if(l!==void 0&&a<l){const p=`Cooldown active, ${(l-a).toFixed(2)}h left`;return this.lastStatus=T.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,p),this.lastStatus}const[c,f]=En(this.child.execute(n,r,o));return(c===T.SUCCESS||c===T.RUNNING)&&o.set(this.cooldownKey,a+this.cooldownDurationHours),this.lastStatus=c,this.name&&o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,f),this.lastStatus}finally{at.nodeEnd()}}}class Ji{constructor(n,r,o,a=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");this.child=n,this.behaviorKey=r,this.name=o,this.depth=a;const l=(c,f)=>{c.depth=f,c.children?c.children.forEach(h=>l(h,f+1)):c.child&&l(c.child,f+1)};l(this.child,(this.depth??0)+1)}execute(n,r,o){this.name&&at.nodeStart(this.name);try{if(n.isPlayer&&!r.gameState.autopilotControls.behaviors[this.behaviorKey]){const f=`Player autopilot for '${this.behaviorKey}' is disabled.`;return this.lastStatus=T.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,f),this.lastStatus}const[l,c]=En(this.child.execute(n,r,o));return this.lastStatus=l,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,c),this.lastStatus}finally{this.name&&at.nodeEnd()}}}class n_{constructor(n,r,o=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");this.child=n,this.name=r,this.depth=o;const a=(l,c)=>{l.depth=c,l.children?l.children.forEach(f=>a(f,c+1)):l.child&&a(l.child,c+1)};a(this.child,(this.depth??0)+1)}execute(n,r,o){this.name&&at.nodeStart(this.name);try{if(n.isPlayer&&r.gameState.autopilotControls.isManuallyMoving)return this.lastStatus=T.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,"Manual movement active, AI blocked."),this.lastStatus;const[a,l]=En(this.child.execute(n,r,o));return this.lastStatus=a,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,l),this.lastStatus}finally{this.name&&at.nodeEnd()}}}class qo{constructor(n,r,o=0){Te(this,"name");Te(this,"lastStatus");Te(this,"depth");this.child=n,this.name=r,this.depth=o;const a=(l,c)=>{l.depth=c,l.children?l.children.forEach(f=>a(f,c+1)):l.child&&a(l.child,c+1)};a(this.child,(this.depth??0)+1)}execute(n,r,o){this.name&&at.nodeStart(this.name);try{if(n.isPlayer)return this.lastStatus=T.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,"Player controlled, AI blocked."),this.lastStatus;const[a,l]=En(this.child.execute(n,r,o));return this.lastStatus=a,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,l),this.lastStatus}finally{this.name&&at.nodeEnd()}}}function i_(e){return new pe([new ne((n,r)=>{const o=n.hunger>=Gp,a=n.food.length>0,l=!n.eatingCooldownTime||r.gameState.time>=n.eatingCooldownTime;return[!!(n.isAdult&&o&&a&&l),`${Math.floor(n.hunger-Gp)}, ${n.food.length}, ${n.eatingCooldownTime?Math.floor(n.eatingCooldownTime-r.gameState.time):""}`]},"Can Eat",e+1),new ae(n=>(n.direction={x:0,y:0},n.target=void 0,n.activeAction="eating",T.RUNNING),"Eat",e+1)],"Eating",e)}function r_(e){return new pe([new ne((n,r,o)=>{if(n.isAdult&&n.hitpoints>n.maxHitpoints*I0||n.isAdult&&n.hunger>uT)return!1;const a=zw(n.id,r.gameState);return a?(o.set("fleeThreat",a),!0):!1},"Should Flee",e+1),new ae((n,r,o)=>{const a=o.get("fleeThreat");if(!a)return T.FAILURE;n.activeAction="moving";const l=ze(a.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),c=qe(l),f=bn(n.position,yt(c,w0));return n.target={x:(f.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(f.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},n.direction=c,T.RUNNING},"Execute Flee",e+1)],"Flee",e)}const Jo="foodSource";function o_(e){const n=new ae((o,a,l)=>{const c=new Map,f=Re(o,a.gameState,"berryBush",Wp,m=>{if(m.food.length===0)return!1;if(!m.ownerId||!m.claimedUntil||a.gameState.time>=m.claimedUntil)return!0;const S=a.gameState.entities.entities.get(m.ownerId);if(!S||S.leaderId===o.leaderId)return!0;const y=c.get(S.id)??V(o.position,S.position,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height);return c.set(S.id,y),y>BT}),h=Re(o,a.gameState,"corpse",Wp,m=>m.food.length>0);let p=null;if(f&&h){const m=V(o.position,f.position,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height),S=V(o.position,h.position,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height);p=m<=S?f:h}else p=f||h;return p?(l.set(Jo,p),[T.SUCCESS,`Found food: ${p.type} at ${p.position.x.toFixed(0)},${p.position.y.toFixed(0)}`]):[T.FAILURE,"No food source found"]},"Find Closest Food Source",e+4),r=new ae((o,a,l)=>{const c=l.get(Jo);return!c||c.food.length===0?(l.delete(Jo),[T.FAILURE,"Food source is invalid or depleted"]):V(o.position,c.position,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)<Fi?(o.activeAction="gathering",o.direction={x:0,y:0},o.target=c.id,l.delete(Jo),[T.SUCCESS,`Gathering from ${c.type}`]):(o.activeAction="moving",o.target=c.id,o.direction=Wt(o.position,c.position,a.gameState.mapDimensions),[T.RUNNING,`Moving to ${c.type}`])},"Move To Food and Gather",e+3);return new pe([new ne((o,a)=>{const l=o.food.length<o.maxFood,c=o.hunger>eT,f=At(a.gameState,o).filter(h=>h.hunger>Xd);return[(o.isAdult&&l&&(c||f.length>0))??!1,`${c?"H":""}, ${f.length>0?" HC("+f.length+")":""}`]},"Should Gather Food",e+1),new _n([new pe([new ne((o,a,l)=>l.has(Jo),"Has Food Source?",e+2),r],"Continue Gathering Action",e+2),new pe([new ws(n,ST,"Cache Food Source Search",e+3),r],"Find New Food Source and Gather",e+2)],"Perform or Start Gathering",e+1)],"Gather Food",e)}function s_(e){return new ae((n,r,o)=>(n.activeAction="idle",n.direction={x:0,y:0},n.target=void 0,o.set("wanderTarget",void 0),T.SUCCESS),"Idle",e)}const Qa="procreationWanderStartTime",mm=(e,n,r)=>n.find(o=>dr(e,o,r));function a_(e){const n=new ne((l,c,f)=>{const h=um(l,c.gameState,Fi),p=mm(l,h,c.gameState);return p?(f.set("procreationPartner",p),!0):!1},"Find Immediate Partner"),r=new ae((l,c,f)=>{var p;const h=f.get("procreationPartner");return h?(l.activeAction="procreating",l.target=void 0,f.delete("procreationPartner"),f.delete(Qa),(p=l.partnerIds)!=null&&p.includes(h.id)||(l.partnerIds=l.partnerIds?[...l.partnerIds,h.id]:[h.id]),T.SUCCESS):T.FAILURE},"Start Procreating"),o=new ne((l,c,f)=>{const h=um(l,c.gameState,lT),p=mm(l,h,c.gameState);return p?(f.set("procreationPartner",p),!0):!1},"Locate Distant Partner"),a=new ae((l,c,f)=>{const h=f.get("procreationPartner");if(!h)return T.FAILURE;if(V(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<Fi)return T.SUCCESS;l.activeAction="moving",l.target=h.id;const m=ze(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height);return l.direction=qe(m),T.RUNNING},"Move Towards Partner");return new pe([new ne(l=>!(!l.isAdult||l.gender==="female"&&l.isPregnant||l.age<MA||l.gender==="female"&&l.age>g0),"Is Fertile (age, not pregnant)",e+1),new ne(l=>l.hunger<ur,"Is Healthy (hunger)",e+1),new ne(l=>(l.procreationCooldown||0)<=0,"Is Ready (cooldown)",e+1),new _n([new pe([new ne((l,c)=>K0(l.position,c.gameState,"berryBush",aT)>=sT,"Is Environment Viable (food)",e+3),new ae((l,c,f)=>(f.delete(Qa),T.SUCCESS),"Clear Wander Timer",e+3)],"Sufficient Food Path",e+2),new pe([new ne((l,c)=>{if(l.gender==="male"){const f=At(c.gameState,l);return!ni(f)}return!1},"Is Male Without Heir",e+3),new ae((l,c,f)=>{const h=f.get(Qa);if(h===void 0)return f.set(Qa,c.gameState.time),[T.FAILURE,"Starting heirless wander timer"];const p=c.gameState.time-h;return p>=FA?[T.SUCCESS,`Wandered for ${p.toFixed(1)}h, proceeding without food`]:[T.FAILURE,`Wandering for heir, ${p.toFixed(1)}h elapsed`]},"Check Wander Timer",e+3)],"Heirless Desperation Path",e+2)],"Check Environment Or Desperation",e+1),new ne((l,c,f)=>{var p;const h=f.get("procreationPartner");return h&&((p=h.partnerIds)!=null&&p.length)&&!h.partnerIds.includes(l.id)&&h.partnerIds.map(m=>c.gameState.entities.entities.get(m)).filter(m=>!!m).some(m=>V(l.position,m.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<HT)?[!1,"Partner's primary partner is too close"]:!0},"Is Partner's Primary Partner Nearby",e+1),new _n([new pe([n,r],"Procreate With Immediate Partner",e+2),new fr(pT,new pe([o,a],"Seek Distant Partner Action",e+3),"Seek Distant Partner Cooldown",e+2)],"Find Partner And Procreate",e+1)],"Procreate",e)}const Br="attackTarget",er="homeCenter",dd=150;function l_(e){return new pe([new ne((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const{gameState:a}=r;if(n.activeAction==="attacking"&&n.attackTargetId){const c=a.entities.entities.get(n.attackTargetId);if(c&&c.hitpoints>0&&V(n.position,c.position,a.mapDimensions.width,a.mapDimensions.height)<=dd){if(o.set(Br,c),!o.get(er)){const f=n.leaderId?cr(n.leaderId,a):Al(n,a).length>0?cm(n,a):n.position;o.set(er,f)}return!0}}const l=Re(n,a,"human",dd,c=>c.hitpoints>0&&ao(n,c,a));if(l){o.set(Br,l);const c=n.leaderId?cr(n.leaderId,a):Al(n,a).length>0?cm(n,a):n.position;return o.set(er,c),!0}return o.set(Br,void 0),o.set(er,void 0),!1},"Find Attack Target",e+1),new ae((n,r,o)=>{const a=o.get(Br),l=o.get(er);if(!a||!l)return T.FAILURE;const{gameState:c}=r;return V(n.position,l,c.mapDimensions.width,c.mapDimensions.height)>y0?(n.activeAction="idle",n.attackTargetId=void 0,o.set(Br,void 0),o.set(er,void 0),T.FAILURE):a.hitpoints<=0||V(n.position,a.position,c.mapDimensions.width,c.mapDimensions.height)>dd?(n.activeAction==="attacking"&&(n.activeAction="idle",n.attackTargetId=void 0),o.set(Br,void 0),o.set(er,void 0),T.SUCCESS):(n.activeAction==="attacking"&&n.attackTargetId===a.id||(n.activeAction="attacking",n.attackTargetId=a.id),T.RUNNING)},"Execute Attack",e+1)],"Attack",e)}const u_=(e,n,r)=>{const o=At(n.gameState,e).filter(c=>!c.isAdult);if(o.length===0)return T.FAILURE;let a=null,l=Xd;for(const c of o)c.hunger>=l&&(l=c.hunger,a=c);return a?(r.set("targetChild",a),T.SUCCESS):T.FAILURE},c_=(e,n,r)=>{const o=r.get("targetChild");return o?V(e.position,o.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>Kd?(e.activeAction="moving",e.target=o.id,e.direction=Wt(e.position,o.position,n.gameState.mapDimensions),T.RUNNING):(e.activeAction="feeding",e.target=void 0,r.set("targetChild",void 0),T.SUCCESS):T.FAILURE};function d_(e){return new pe([new ne(n=>(n.isAdult&&n.food.length>0&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child",e+1),new ae(u_,"Find Hungriest Child",e+1),new ae(c_,"Move To Child and Feed",e+1)],"Feed Child",e)}function f_(e){return new pe([new ne(n=>!n.isAdult&&n.hunger>=Xd,"Is Hungry Child",e+1),new ae((n,r,o)=>{const a=Gw(n,r.gameState);if(a.length===0)return T.FAILURE;const l=Re(n,r.gameState,"human",GA,c=>a.some(f=>f.id===c.id)&&c.food.length>0);return l?(o.set("targetParent",l),T.SUCCESS):T.FAILURE},"Find Parent With Food",e+1),new ae((n,r,o)=>{const a=o.get("targetParent");if(!a)return T.FAILURE;const l=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",l<=Kd?(n.target=void 0,T.SUCCESS):(n.target=a.id,n.activeAction="moving",T.RUNNING)},"Move To Parent",e+1)],"Seek Food From Parent",e)}const Za="plantingSpot";function h_(e){const n=new ae((o,a,l)=>{const c=l.get(Za);return!c||io(c,a.gameState,Ll,o.id)?(l.delete(Za),[T.FAILURE,"Planting spot is invalid or now occupied"]):V(o.position,c,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)>Fi?(o.activeAction="moving",o.target=c,o.direction=Wt(o.position,c,a.gameState.mapDimensions),[T.RUNNING,"Moving to planting spot"]):(o.activeAction="planting",o.target=c,[T.RUNNING,"Planting state initiated"])},"Move To Spot and Plant",e+3),r=new ae((o,a,l)=>{const c=Kw(o,a.gameState);return c?(l.set(Za,c),[T.SUCCESS,`Found new spot at ${c.x.toFixed(0)}, ${c.y.toFixed(0)}`]):[T.FAILURE,"No suitable planting spot found"]},"Find Optimal Planting Spot",e+3);return new pe([new ne(o=>{const a=o.food.filter(c=>c.type===ti.Berry).length>=ms,l=o.hunger<tT;return(o.isAdult&&a&&l)??!1},"Can Plant",e+1),new ne((o,a)=>{const l=K0(o.position,a.gameState,"berryBush",JA),c=At(a.gameState,o);return!(c.length===0||l>=c.length*5)},"Has Not Enough Nearby Bushes",e+1),new _n([new pe([new ne((o,a,l)=>l.has(Za),"Has Planting Spot?",e+2),n],"Continue Planting Action",e+2),new fr(vT,r,"Find Planting Spot Cooldown",e+2)],"Perform or Start Planting",e+1)],"Plant Bush",e)}const fd="enemiesNearby";function g_(e){const n=new ne(l=>l.id===l.leaderId,"Is Leader?",e+1),r=new ne(l=>!l.isCallingToAttack,"Is Not Already Calling?",e+1),o=new ae((l,c,f)=>{const h=uf(l,c.gameState,A0);return h.length>0?(f.set(fd,h),T.SUCCESS):T.FAILURE},"Find Nearby Enemies",e+1),a=new _n([new pe([new ne((l,c,f)=>{const h=f.get(fd);if(!h||h.length===0)return!1;const p=ys(l.id,c.gameState),m=Tl(p),S=Tl(h);return m>S*NT},"Is Strong Enough?",e+3),new ae((l,c)=>(l.isCallingToAttack=!0,l.callToAttackEndTime=c.gameState.time+eo,we(c.gameState,oe.CallToAttack,l.position,eo),ke(c,Ae.CallToAttack,l.position),l.activeAction="idle",l.target=void 0,T.SUCCESS),"Issue Call to Attack",e+3)],"Attack",e+2),new ae((l,c,f)=>{const h=f.get(fd);if(!h||h.length===0)return T.FAILURE;const p=h.map(P=>P.position),m=sf(p),S=ze(m,l.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height),y=qe(S),E=bn(l.position,yt(y,w0*2));return l.activeAction="moving",l.target={x:(E.x%c.gameState.mapDimensions.width+c.gameState.mapDimensions.width)%c.gameState.mapDimensions.width,y:(E.y%c.gameState.mapDimensions.height+c.gameState.mapDimensions.height)%c.gameState.mapDimensions.height},l.direction=y,T.SUCCESS},"Retreat",e+2)],"Attack or Retreat",e+2);return new pe([n,r,o,new fr(DT,a,"Leader Combat Cooldown",e+1)],"Leader Combat Strategy",e)}const hd="combatTarget",gd="homeCenter";function p_(e){const n=new ne(c=>c.isAdult&&c.leaderId?c.id!==c.leaderId:!1,"Is Tribe Follower?",e+1),r=new ne(c=>c.hunger<nT&&c.hitpoints>=c.maxHitpoints*I0,"Is Fit for Combat?",e+1),o=new ne((c,f)=>{const h=f.gameState.entities.entities.get(c.leaderId);return!!(h!=null&&h.isCallingToAttack)},"Is Leader Calling to Attack?",e+1),a=new ae((c,f,h)=>{const{gameState:p}=f,m=p.entities.entities.get(c.leaderId);if(!m)return T.FAILURE;const S=uf(m,p,cT);if(S.length===0)return T.FAILURE;S.sort((y,E)=>{const P=V(c.position,y.position,p.mapDimensions.width,p.mapDimensions.height),I=V(c.position,E.position,p.mapDimensions.width,p.mapDimensions.height);return P-I});for(const y of S)if(Qw(m.id,y.id,p)<dT){h.set(hd,y);const P=cr(m.id,p);return h.set(gd,P),T.SUCCESS}return T.FAILURE},"Find Best Target",e+1),l=new ae((c,f,h)=>{const p=h.get(hd),m=h.get(gd);if(!p||!m)return T.FAILURE;const{gameState:S}=f;return V(c.position,m,S.mapDimensions.width,S.mapDimensions.height)>y0?(c.activeAction==="attacking"&&c.attackTargetId===p.id&&(c.activeAction="idle",c.attackTargetId=void 0),h.set(hd,void 0),h.set(gd,void 0),T.FAILURE):((!c.lastTargetAcquiredEffectTime||f.gameState.time-c.lastTargetAcquiredEffectTime>Be*5)&&(we(f.gameState,oe.TargetAcquired,c.position,Be,c.id),c.lastTargetAcquiredEffectTime=f.gameState.time),c.activeAction="attacking",c.attackTargetId=p.id,c.target=void 0,T.RUNNING)},"Attack Target",e+1);return new pe([n,r,o,a,l],"Tribe Member Combat",e)}function m_(e){const n=new ne((m,S)=>{if(!m.isAdult||m.gender!=="male")return!1;const y=m.partnerIds&&m.partnerIds.length>0,E=At(S.gameState,m).length>0;return y||E},"Is Adult Male With Family?",e+1),r=new ne((m,S)=>{var I;const y=Tt(S.gameState);if(y){const R=ni(At(S.gameState,y));if((R==null?void 0:R.id)===m.id)return!1}if(!m.fatherId)return!1;const E=S.gameState.entities.entities.get(m.fatherId);return!E||((I=ni(At(S.gameState,E)))==null?void 0:I.id)===m.id?!1:V(m.position,E.position,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height)<gT},"Is Too Close To Father?",e+1),o=new ne((m,S,y)=>y.get("territoryMoveTarget")!==void 0,"Is Moving To Territory?",e+3),a=new ae((m,S,y)=>{const E=y.get("territoryMoveTarget"),P=y.get("territoryMoveStartTime");if(!E||!P)return[T.FAILURE,"Missing move data"];if(S.gameState.time-P>fT)return y.delete("territoryMoveTarget"),y.delete("territoryMoveStartTime"),[T.FAILURE,"Territory move timed out"];if(V(m.position,E,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height)<Fi)return y.delete("territoryMoveTarget"),y.delete("territoryMoveStartTime"),[T.SUCCESS,"Arrived at new territory"];m.activeAction="moving",m.target=E;const F=ze(m.position,m.target,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height);return m.direction=qe(F),[T.RUNNING,"Continuing move to territory"]},"Check Timeout & Arrival",e+3),l=new pe([o,a],"Handle In-Progress Move",e+2),c=new ne((m,S,y)=>y.get("territoryMoveTarget")===void 0,"Should Start New Move?",e+4),f=new ae((m,S,y)=>{const E=af(m.position,S.gameState.mapDimensions.width/4,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height);y.set("territoryMoveTarget",E),y.set("territoryMoveStartTime",S.gameState.time),m.activeAction="moving",m.target=E;const P=ze(m.position,m.target,S.gameState.mapDimensions.width,S.gameState.mapDimensions.height);return m.direction=qe(P),[T.RUNNING,"Started moving to new territory"]},"Start New Territory Move",e+4),h=new pe([c,f],"Start New Territory Move Action",e+3),p=new _n([l,new fr(mT,h,"Establish Territory Cooldown",e+2)],"Establish or Continue Move",e+1);return new pe([n,r,p],"Establish Family Territory",e)}function v_(e){return new pe([new ae((n,r,o)=>{const a=bw(n,r.gameState);return a?(o.set("patriarchTarget",a),[T.SUCCESS,`Found patriarch: ${a.id}`]):(o.delete("patriarchTarget"),[T.FAILURE,"No patriarch found"])},"Find Patriarch",e+1),new ae((n,r,o)=>{const a=o.get("patriarchTarget");if(!a)return[T.FAILURE,"Patriarch target missing from blackboard"];const l=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(l>S0){n.activeAction="moving",n.target=a.id;const c=ze(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(c),[T.RUNNING,`Moving to patriarch at ${l.toFixed(0)}`]}return n.activeAction="idle",n.target=void 0,n.direction={x:0,y:0},[T.SUCCESS,`Arrived at patriarch at ${l.toFixed(0)}`]},"Move Towards Patriarch",e+1)],"Follow Patriarch",e)}const pd="tribeSplitMigrationTarget";function S_(e){const n=new pe([new ne((r,o)=>{const{canSplit:a,progress:l}=ff(r,o.gameState);return a?[!0,`Progress: ${(l??0)*100}%`]:[!1,"Cannot split"]},"Can Split Tribe?",e+2),new ae((r,o,a)=>{const{gameState:l}=o;let c=a.get(pd);if(!c){if(!r.leaderId)return T.FAILURE;const h=cr(r.leaderId,l),p=hE(h,r,l);if(p)a.set(pd,p),c=p;else return T.FAILURE}return V(r.position,c,l.mapDimensions.width,l.mapDimensions.height)<Fi?(a.delete(pd),r.activeAction="idle",r.target=void 0,T.SUCCESS):(r.activeAction="moving",r.target=c,T.RUNNING)},"Move to New Territory",e+2),new ae((r,o)=>(hf(r,o.gameState),T.SUCCESS),"Perform Tribe Split",e+2)],"Tribe Split Action",e+1);return new fr(TT,n,"Tribe Split Cooldown",e)}const qa="jealousyAttackTarget";function y_(e){return new pe([new ne((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const a=Yw(n,r.gameState,kT);return a?(o.set(qa,a),[!0,`Partner cheating with ${a.id}`]):(o.delete(qa),!1)},"Check for Infidelity",e+1),new ae((n,r,o)=>{const a=o.get(qa);return!a||a.hitpoints<=0?(o.delete(qa),[T.FAILURE,"Target is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?T.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[T.RUNNING,`Attacking ${a.id}`])},"Execute Jealousy Attack",e+1)],"Jealousy Attack",e)}const Ja="defendAggressor";function A_(e){return new pe([new ne((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const a=Vw(n,r.gameState,OT);return a?(o.set(Ja,a),[!0,`Family member ${a.familyMember.id} attacked by ${a.aggressor.id}`]):(o.delete(Ja),!1)},"Check Family Under Attack",e+1),new ae((n,r,o)=>{const a=o.get(Ja);return!a||a.hitpoints<=0?(o.delete(Ja),[T.FAILURE,"Target invalid/dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?T.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[T.RUNNING,`Attacking aggressor ${a.id}`])},"Execute Family Defense Attack",e+1)],"Defend Family",e)}const el="bushIntruder";function T_(e){return new pe([new ne((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const a=jw(n,r.gameState,MT);return a?(o.set(el,a),[!0,`Intruder ${a.id} stealing berries`]):(o.delete(el),!1)},"Check For Intruders on Bushes",e+1),new ae((n,r,o)=>{const a=o.get(el);return!a||a.hitpoints<=0?(o.delete(el),[T.FAILURE,"Intruder is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?T.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[T.RUNNING,`Attacking intruder ${a.id}`])},"Execute Bush Defense Attack",e+1)],"Defend Claimed Bush",e)}const tl="desperateAttackTarget";function I_(e){return new pe([new ne(n=>n.hunger>FT,"Is Starving",e+1),new ne((n,r)=>{if(!n.isAdult)return[!1,"Not an adult"];const o=Re(n,r.gameState,"berryBush",gt,l=>l.food.length>0),a=Re(n,r.gameState,"corpse",gt,l=>l.food.length>0);return!o&&!a},"No Other Food Available",e+1),new ne((n,r,o)=>{const a=Xw(n,r.gameState);return a?(o.set(tl,a),[!0,`Found weak target ${a.id}`]):(o.delete(tl),!1)},"Find Weak Target",e+1),new ae((n,r,o)=>{const a=o.get(tl);return!a||a.hitpoints<=0?(o.delete(tl),[T.FAILURE,"Target is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?T.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[T.RUNNING,`Desperately attacking ${a.id}`])},"Execute Desperate Attack",e+1)],"Desperate Attack",e)}function w_(e,n,r,o){const a=e.entities.entities.get(r.targetEntityId);return!a||!("hitpoints"in a)||a.hitpoints<=0?(e.autopilotControls.activeAutopilotAction=void 0,T.FAILURE):V(n.position,a.position,e.mapDimensions.width,e.mapDimensions.height)<=hl?(n.activeAction="attacking",n.attackTargetId=a.id,e.autopilotControls.activeAutopilotAction=void 0,T.SUCCESS):(n.activeAction="moving",n.target=a.id,n.direction=Wt(n.position,a.position,e.mapDimensions),T.RUNNING)}function E_(e){return new pe([new ne((n,r)=>n.isPlayer===!0&&!!r.gameState.autopilotControls.activeAutopilotAction,"Has Player Command",e+1),new ae((n,r)=>{const{gameState:o}=r,a=o.autopilotControls.activeAutopilotAction;if(!a)return T.FAILURE;switch(a.action){case Ie.AutopilotMove:{const l=a.position;return V(n.position,l,o.mapDimensions.width,o.mapDimensions.height)<GT?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction==="moving"&&(n.activeAction="idle",n.target=void 0),T.SUCCESS):(n.activeAction="moving",n.target=l,n.direction=Wt(n.position,l,o.mapDimensions),T.RUNNING)}case Ie.AutopilotGather:{const l=o.entities.entities.get(a.targetEntityId);return!l||l.food.length===0?(o.autopilotControls.activeAutopilotAction=void 0,T.FAILURE):V(n.position,l.position,o.mapDimensions.width,o.mapDimensions.height)>Fi?(n.activeAction="moving",n.target=l.id,n.direction=Wt(n.position,l.position,o.mapDimensions),T.RUNNING):(n.activeAction="gathering",n.target=l.id,o.autopilotControls.activeAutopilotAction=void 0,T.SUCCESS)}case Ie.AutopilotAttack:return w_(o,n,a);case Ie.AutopilotProcreate:{const l=o.entities.entities.get(a.targetEntityId);return!l||l.type!=="human"||!dr(n,l,r.gameState)?(o.autopilotControls.activeAutopilotAction=void 0,T.FAILURE):V(n.position,l.position,o.mapDimensions.width,o.mapDimensions.height)<=hl?(n.activeAction="procreating",o.autopilotControls.activeAutopilotAction=void 0,T.SUCCESS):(n.activeAction="moving",n.target=l.id,n.direction=Wt(n.position,l.position,o.mapDimensions),T.RUNNING)}case Ie.AutopilotPlant:{if(n.activeAction==="planting")return T.RUNNING;const l=a.position;return io(l,o,Ll,n.id)?(o.autopilotControls.activeAutopilotAction=void 0,T.FAILURE):V(n.position,l,o.mapDimensions.width,o.mapDimensions.height)<=hl?(n.activeAction="planting",n.target=l,o.autopilotControls.activeAutopilotAction=void 0,o.hasPlayerPlantedBush=!0,T.RUNNING):(n.activeAction="moving",n.target=l,n.direction=Wt(n.position,l,o.mapDimensions),T.RUNNING)}case Ie.AutopilotFeedChild:{const l=o.entities.entities.get(a.targetEntityId);return!l||l.type!=="human"||l.isAdult||n.food.length===0?(o.autopilotControls.activeAutopilotAction=void 0,T.FAILURE):V(n.position,l.position,o.mapDimensions.width,o.mapDimensions.height)<=hl?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction="feeding",T.SUCCESS):(n.activeAction="moving",n.target=l.id,n.direction=Wt(n.position,l.position,o.mapDimensions),T.RUNNING)}case Ie.AutopilotFollowMe:{const l=o.entities.entities.get(a.targetEntityId);return!l||l.type!=="human"||l.id!==l.leaderId?(o.autopilotControls.activeAutopilotAction=void 0,T.FAILURE):V(n.position,l.position,o.mapDimensions.width,o.mapDimensions.height)<=S0?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction==="moving"&&(n.activeAction="idle"),T.SUCCESS):(n.activeAction="moving",n.target=l.id,n.direction=Wt(n.position,l.position,o.mapDimensions),T.RUNNING)}default:return o.autopilotControls.activeAutopilotAction=void 0,T.FAILURE}},"Execute Player Command",e+1)],"Player Command Handler",e)}function __(e){return new pe([new ne(n=>!!n.leaderId&&n.leaderId!==n.id,"Is Follower",e+1),new ne((n,r)=>{if(!n.leaderId)return!1;const o=r.gameState.entities.entities.get(n.leaderId);return!!o&&o.isCallingToFollow===!0},"Is Leader Calling To Follow",e+1),new ne(n=>n.hunger<oT,"Is Not Critically Hungry",e+1),new ae((n,r)=>{if(!n.leaderId)return T.FAILURE;const o=r.gameState.entities.entities.get(n.leaderId);return o?V(n.position,o.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>rT?(n.activeAction="moving",n.target=o.id,n.direction=Wt(n.position,o.position,r.gameState.mapDimensions),T.RUNNING):(n.activeAction==="moving"&&n.target===o.id&&(n.activeAction="idle",n.target=void 0),T.SUCCESS):T.FAILURE},"Execute Follow Leader",e+1)],"Follow Leader Command",e)}const vm="tribeMigrationCheckCooldown";function C_(e){const n=new pe([new ne(o=>!!o.leaderId&&o.leaderId===o.id,"Is Tribe Leader",e+2),new ne((o,a)=>{var c;const l=(c=o.aiBlackboard)==null?void 0:c.get(vm);return l?a.gameState.time-l>=$p:!0},"Is Migration Check Cooldown Over",e+2),new ae((o,a)=>{var c;(c=o.aiBlackboard)==null||c.set(vm,a.gameState.time);const l=Zw(o,a.gameState);return l?(o.isCallingToFollow=!0,o.callToFollowEndTime=a.gameState.time+Ss,o.target=l,o.activeAction="moving",T.SUCCESS):T.FAILURE},"Execute Tribe Migration",e+2)],"Tribe Migration Strategy",e+1),r=new ws(n,Od,"Cache Tribe Migration",e+1);return new fr($p,r,"Tribe Migration Cooldown",e)}function R_(e){const n=new ne(o=>o.id===o.leaderId,"Is Leader?",e+1),r=new ae((o,a)=>{var p,m,S;const{gameState:l}=a,c=ys(o.id,l),f=Tl(c),h=V0(l).filter(y=>y.leaderId!==o.id);for(const y of h){const E=ys(y.leaderId,l),P=Tl(E),I=((p=o.diplomacy)==null?void 0:p.get(y.leaderId))||Ft.Friendly;f>P*PT?I!==Ft.Hostile&&((m=o.diplomacy)==null||m.set(y.leaderId,Ft.Hostile)):I!==Ft.Friendly&&((S=o.diplomacy)==null||S.set(y.leaderId,Ft.Friendly))}return T.SUCCESS},"Evaluate Diplomacy",e+2);return new pe([n,new fr(IT,r,"Diplomacy Cooldown",e+1)],"Manage Diplomacy",e)}const nl="huntTarget";function P_(e){return new pe([new ws(new ne((r,o,a)=>{var h;if(!r.isAdult)return[!1,"Not an adult"];if(!r.leaderId)return[!1,"Not in a tribe"];const l=cr(r.leaderId,o.gameState),c=((h=X0(l,o.gameState,"berryBush",xp))==null?void 0:h.map(p=>p.id))||[],f=Re(l,o.gameState,"prey",xp,p=>typeof p.target=="number"&&c.includes(p.target));return f?(a.set(nl,f.id),!0):!1},"Find Prey Target",e+2),yT,"Cache Find Prey",e+1),new El(new ae((r,o,a)=>{if(!r.leaderId)return T.FAILURE;const l=a.get(nl);if(!l)return T.FAILURE;const c=o.gameState.entities.entities.get(l);if(!c||c.hitpoints<=0)return a.delete(nl),r.activeAction="idle",r.attackTargetId=void 0,T.SUCCESS;const{gameState:f}=o,h=cr(r.leaderId,f);return V(r.position,h,f.mapDimensions.width,f.mapDimensions.height)>iT?(a.delete(nl),r.activeAction="idle",r.attackTargetId=void 0,T.FAILURE):(r.activeAction="attacking",r.attackTargetId=c.id,T.RUNNING)},"Hunt Prey Action",e+2),kd,"Hunt Prey Timeout",e+1)],"Human Hunt Prey Sequence",e)}const il="defendTarget",md=150;function N_(e){return new pe([new ne((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult - children flee instead"];const{gameState:a}=r;if(n.activeAction==="attacking"&&n.attackTargetId){const c=a.entities.entities.get(n.attackTargetId);if(c&&c.type==="predator"&&c.hitpoints>0&&V(n.position,c.position,a.mapDimensions.width,a.mapDimensions.height)<=md)return o.set(il,c),[!0,"Continuing defense"]}const l=Re(n,a,"predator",md,c=>c.hitpoints>0&&(c.isAdult||!1));if(l){const c=V(n.position,l.position,a.mapDimensions.width,a.mapDimensions.height),f=l.attackTargetId===n.id,h=c<80;if(f||h)return o.set(il,l),[!0,"Predator threat detected"]}return o.set(il,void 0),[!1,"No predator threat"]},"Detect Predator Threat",e+1),new ae((n,r,o)=>{const a=o.get(il);if(!a)return T.FAILURE;const{gameState:l}=r,c=V(n.position,a.position,l.mapDimensions.width,l.mapDimensions.height);return a.hitpoints<=0||c>md*1.5?(n.activeAction="idle",n.attackTargetId=void 0,T.SUCCESS):(n.activeAction="attacking",n.attackTargetId=a.id,T.RUNNING)},"Defend Against Predator",e+1)],"Human Defend Against Predator",e)}function D_(e){return new pe([new ne((n,r,o)=>{const a=Re(n,r.gameState,"predator",Ut*2,()=>!0),l=Re(n,r.gameState,"human",Ut*2,()=>!0);let c=null,f=1/0;if(a){const h=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);h<f&&(f=h,c=a)}if(l){const h=V(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);h<f&&(f=h,c=l)}return c&&f<Ut*1.5?(o.set("fleeThreat",c),o.set("fleeDistance",f),!0):!1},"Detect Threat",e+1),new ae((n,r,o)=>{const a=o.get("fleeThreat");if(!a)return T.FAILURE;n.activeAction="moving";const l=ze(a.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),c=qe(l),f=bn(n.position,yt(c,hw));return n.target={x:(f.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(f.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},n.direction=c,n.fleeCooldown=r.gameState.time+2,T.RUNNING},"Execute Flee",e+1)],"Prey Flee",e)}function k_(e){return new pe([new ne((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];if(n.hunger<=30||n.eatingCooldownTime&&n.eatingCooldownTime>r.gameState.time)return!1;const a=Re(n,r.gameState,"berryBush",Ut*10,l=>l.food.length>0);return a?V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=Ut?(o.set("grazingTarget",a),!0):(o.set("grazingTarget",a),o.set("needToMoveToTarget",!0),!0):!1},"Find Berry Bush",e+1),new ae((n,r,o)=>{const a=o.get("grazingTarget"),l=o.get("needToMoveToTarget");if(!a)return T.FAILURE;const c=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Ut)return n.activeAction="grazing",n.target=a.id,n.direction={x:0,y:0},o.delete("needToMoveToTarget"),T.RUNNING;if(l||c>Ut){n.activeAction="moving",n.target=a.id;const f=Wt(n.position,a.position,r.gameState.mapDimensions);return n.direction=f,T.RUNNING}return T.FAILURE},"Move to Bush or Graze",e+1)],"Prey Graze",e)}function O_(e){const n=new ne((l,c,f)=>{const h=Re(l,c.gameState,"prey",Ut,p=>p.id!==l.id&&p.gender!==l.gender&&!!p.isAdult&&p.age>=as&&p.age<=td&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return h?(f.set("procreationPartner",h),!0):!1},"Find Immediate Partner",e+2),r=new ae((l,c,f)=>{const h=f.get("procreationPartner");return h?(l.activeAction="procreating",l.target=h.id,l.direction={x:0,y:0},f.delete("procreationPartner"),T.SUCCESS):T.FAILURE},"Start Procreating",e+2),o=new ne((l,c,f)=>{const h=Re(l,c.gameState,"prey",Ut*10,p=>p.id!==l.id&&p.gender!==l.gender&&!!p.isAdult&&p.age>=as&&p.age<=td&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return h?(f.set("procreationPartner",h),!0):!1},"Locate Distant Partner",e+2),a=new ae((l,c,f)=>{const h=f.get("procreationPartner");if(!h)return T.FAILURE;if(V(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<=Ut)return T.SUCCESS;l.activeAction="moving",l.target=h.id;const m=ze(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height);return l.direction=qe(m),T.RUNNING},"Move Towards Partner",e+2);return new pe([new ne(l=>!!(l.isAdult&&!l.isPregnant&&l.age>=as&&l.age<=td&&l.hunger<200&&(!l.procreationCooldown||l.procreationCooldown<=0)),"Is Fertile and Ready",e+1),new _n([new pe([n,r],"Procreate With Immediate Partner",e+2),new pe([o,a],"Seek Distant Partner",e+2)],"Find Partner And Procreate",e+1)],"Prey Procreate",e)}const M_=(e,n,r)=>{const o=n.gameState.search.prey.byProperty("motherId",e.id).filter(c=>!c.isAdult&&c.type==="prey");if(o.length===0)return T.FAILURE;let a=null,l=Bl;for(const c of o)c.hunger>=l&&(l=c.hunger,a=c);return a?(r.set("targetChild",a),T.SUCCESS):T.FAILURE},F_=(e,n,r)=>{const o=r.get("targetChild");return o?V(e.position,o.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>so?(e.activeAction="moving",e.target=o.id,e.direction=Wt(e.position,o.position,n.gameState.mapDimensions),T.RUNNING):(e.activeAction="feeding",e.target=void 0,r.set("targetChild",void 0),T.SUCCESS):T.FAILURE};function U_(e){return new pe([new ne(n=>(n.isAdult&&n.gender==="female"&&n.hunger<80&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child (Female Only)",e+1),new ae(M_,"Find Hungriest Prey Child",e+1),new ae(F_,"Move To Child and Feed",e+1)],"Feed Prey Child",e)}function L_(e){return new pe([new ne(n=>!n.isAdult&&n.hunger>=Bl,"Is Hungry Prey Child",e+1),new ae((n,r,o)=>{if(!n.motherId)return T.FAILURE;const a=r.gameState.entities.entities.get(n.motherId);return a?(o.set("targetParent",a),T.SUCCESS):T.FAILURE},"Find Female Parent",e+1),new ae((n,r,o)=>{const a=o.get("targetParent");if(!a)return T.FAILURE;const l=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",l<=so?(n.target=void 0,T.SUCCESS):(n.target=a.id,n.activeAction="moving",T.RUNNING)},"Move To Female Parent",e+1)],"Seek Food From Female Parent",e)}function H_(e){return new pe([new ne((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];if(n.hunger<=50||n.huntCooldown&&n.huntCooldown>0)return!1;const a=Re(n,r.gameState,"prey",br*10,l=>l.hitpoints>0);if(a){const l=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(l<=br)return o.set("huntTarget",a),!0;if(l<=br*10)return o.set("huntTarget",a),o.set("needToApproach",!0),!0}return!1},"Find Prey Target",e+1),new El(new ae((n,r,o)=>{const a=o.get("huntTarget"),l=o.get("needToApproach");if(!a||a.hitpoints<=0)return T.FAILURE;const c=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=br)return n.activeAction="attacking",n.attackTargetId=a.id,n.target=a.id,n.direction={x:0,y:0},o.delete("needToApproach"),T.RUNNING;if(l||c>br){n.activeAction="moving",n.target=a.id;const f=ze(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(f),T.RUNNING}return T.FAILURE},"Hunt or Approach Prey",e+2),10,"Hunt Timeout (10 hour)",e+1)],"Predator Hunt",e)}function B_(e){return new pe([new ne((n,r,o)=>{const a=n.hunger>100,l=n.hitpoints<n.maxHitpoints*.5;if(!a&&!l||n.attackCooldown&&n.attackCooldown>0)return!1;const c=Re(n,r.gameState,"human",Tn*2,f=>f.hitpoints>0);if(c){const f=V(n.position,c.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(f<=Tn)return o.set("attackTarget",c),!0;if(a&&f<=Tn*2)return o.set("attackTarget",c),o.set("needToApproach",!0),!0}return!1},"Find Human Target",e+1),new ae((n,r,o)=>{const a=o.get("attackTarget"),l=o.get("needToApproach");if(!a||a.hitpoints<=0)return T.FAILURE;const c=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Tn)return n.activeAction="attacking",n.attackTargetId=a.id,n.target=a.id,n.direction={x:0,y:0},o.delete("needToApproach"),T.RUNNING;if(l||c>Tn){n.activeAction="moving",n.target=a.id;const f=ze(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(f),T.RUNNING}return T.FAILURE},"Attack or Approach Human",e+1)],"Predator Attack Human",e)}function G_(e){const n=new ne((l,c,f)=>{const h=Re(l,c.gameState,"predator",Oi,p=>p.id!==l.id&&p.gender!==l.gender&&!!p.isAdult&&p.age>=ls&&p.age<=nd&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return h?(f.set("procreationPartner",h),!0):!1},"Find Immediate Partner",e+2),r=new ae((l,c,f)=>{const h=f.get("procreationPartner");return h?(l.activeAction="procreating",l.target=h.id,l.direction={x:0,y:0},f.delete("procreationPartner"),T.SUCCESS):T.FAILURE},"Start Procreating",e+2),o=new ne((l,c,f)=>{const h=Re(l,c.gameState,"predator",Oi*10,p=>p.id!==l.id&&p.gender!==l.gender&&!!p.isAdult&&p.age>=ls&&p.age<=nd&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return h?(f.set("procreationPartner",h),!0):!1},"Locate Distant Partner",e+2),a=new ae((l,c,f)=>{const h=f.get("procreationPartner");if(!h)return T.FAILURE;if(V(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<=Oi)return T.SUCCESS;l.activeAction="moving",l.target=h.id;const m=ze(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height);return l.direction=qe(m),T.RUNNING},"Move Towards Partner",e+2);return new pe([new ne(l=>!!(l.isAdult&&!l.isPregnant&&l.age>=ls&&l.age<=nd&&l.hunger<200&&(!l.procreationCooldown||l.procreationCooldown<=0)),"Is Fertile and Ready",e+1),new _n([new pe([n,r],"Procreate With Immediate Partner",e+2),new pe([o,a],"Seek Distant Partner",e+2)],"Find Partner And Procreate",e+1)],"Predator Procreate",e)}const x_=(e,n,r)=>{const o=n.gameState.search.predator.byProperty("motherId",e.id).filter(c=>!c.isAdult&&c.type==="predator");if(o.length===0)return T.FAILURE;let a=null,l=Bl;for(const c of o)c.hunger>=l&&(l=c.hunger,a=c);return a?(r.set("targetChild",a),T.SUCCESS):T.FAILURE},b_=(e,n,r)=>{const o=r.get("targetChild");return o?V(e.position,o.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>so?(e.activeAction="moving",e.target=o.id,e.direction=Wt(e.position,o.position,n.gameState.mapDimensions),T.RUNNING):(e.activeAction="feeding",e.target=void 0,r.set("targetChild",void 0),T.SUCCESS):T.FAILURE};function z_(e){return new pe([new ne(n=>(n.isAdult&&n.gender==="female"&&n.hunger<90&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child (Female Only)",e+1),new ae(x_,"Find Hungriest Predator Child",e+1),new ae(b_,"Move To Child and Feed",e+1)],"Feed Predator Child",e)}function $_(e){return new pe([new ne(n=>!n.isAdult&&n.hunger>=Bl,"Is Hungry Predator Child",e+1),new ae((n,r,o)=>{if(!n.motherId)return T.FAILURE;const a=r.gameState.entities.entities.get(n.motherId);return a?(o.set("targetParent",a),T.SUCCESS):T.FAILURE},"Find Female Parent",e+1),new ae((n,r,o)=>{const a=o.get("targetParent");if(!a)return T.FAILURE;const l=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",l<=so?(n.target=void 0,T.SUCCESS):(n.target=a.id,n.activeAction="moving",T.RUNNING)},"Move To Female Parent",e+1)],"Seek Food From Female Parent",e)}function ev(e){return new ae((n,r,o)=>{n.activeAction="idle";let a=o.get("wanderTarget"),l=o.get("wanderStartTime");const c=r.gameState.time;if(!a||!l||c-l>2){const f=Math.random()*2*Math.PI,h=50+Math.random()*100,p={x:Math.cos(f),y:Math.sin(f)},m=bn(n.position,yt(p,h));a={x:(m.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(m.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},o.set("wanderTarget",a),o.set("wanderStartTime",c)}if(a){n.target=a;let f=a.x-n.position.x,h=a.y-n.position.y;const p=r.gameState.mapDimensions.width,m=r.gameState.mapDimensions.height;Math.abs(f)>p/2&&(f=f>0?f-p:f+p),Math.abs(h)>m/2&&(h=h>0?h-m:h+m);const S=qe({x:f,y:h});n.direction=S}return T.SUCCESS},"Animal Wander",e)}function W_(e){return new pe([new ne((n,r,o)=>{if(n.hunger>90||n.hitpoints<n.maxHitpoints*.3||n.activeAction==="grazing"||n.activeAction==="procreating")return!1;const a=r.gameState.entities.entities.values(),l=[];for(const c of a)if(c.type==="prey"&&c.id!==n.id){const f=c;f.hitpoints>0&&f.isAdult&&V(n.position,f.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=Ut*5&&l.push(f)}if(l.length>=2){let c=0,f=0;for(const m of l)c+=m.position.x,f+=m.position.y;c/=l.length,f/=l.length;const h={x:c,y:f};if(V(n.position,h,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Ut*2)return o.set("herdCenter",h),o.set("herdSize",l.length),!0}return!1},"Find Herd",e+1),new ae((n,r,o)=>{const a=o.get("herdCenter");if(!a)return T.FAILURE;if(V(n.position,a,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Ut*2){n.activeAction="moving",n.target=a;const c=ze(n.position,a,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(c),T.RUNNING}else return n.activeAction="idle",n.direction={x:0,y:0},T.SUCCESS},"Join Herd",e+1)],"Prey Herd Behavior",e)}function Y_(e){return new pe([new ne((n,r,o)=>{if(n.hunger>100||n.hitpoints<n.maxHitpoints*.4||n.activeAction==="attacking"||n.activeAction==="procreating")return!1;const a=Re(n,r.gameState,"predator",Oi*4,l=>l.id!==n.id&&l.hitpoints>0&&l.isAdult&&n.fatherId!==void 0&&l.fatherId===n.fatherId&&l.age>=n.age||l.hitpoints>n.hitpoints);return a&&V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Oi*2?(o.set("packLeader",a),!0):!1},"Find Pack Leader",e+1),new ae((n,r,o)=>{const a=o.get("packLeader");if(!a||a.hitpoints<=0)return T.FAILURE;if(V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Oi*2){n.activeAction="moving",n.target=a.id;const c=ze(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(c),T.RUNNING}else return n.activeAction="idle",n.direction={x:0,y:0},T.SUCCESS},"Follow Pack Leader",e+1)],"Predator Pack Behavior",e)}function j_(e){return new pe([new ne((n,r,o)=>{if(!n.isAdult||n.hitpoints<n.maxHitpoints*.6||n.hunger>120||n.attackCooldown&&n.attackCooldown>0)return!1;const a=Re(n,r.gameState,"predator",lm,l=>!!(l.id!==n.id&&l.hitpoints>0&&l.isAdult&&n.fatherId!==l.fatherId&&n.gender===l.gender&&n.fatherId!==void 0&&l.fatherId!==void 0));if(a){const l=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(l<=Tn)return o.set("territorialTarget",a),!0;if(l<=lm)return o.set("territorialTarget",a),o.set("needToApproach",!0),!0}return!1},"Find Territorial Rival",e+1),new ae((n,r,o)=>{const a=o.get("territorialTarget"),l=o.get("needToApproach");if(!a||a.hitpoints<=0)return T.FAILURE;const c=V(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Tn)return n.activeAction="attacking",n.attackTargetId=a.id,n.target=a.id,n.direction={x:0,y:0},o.delete("needToApproach"),T.RUNNING;if(l||c>Tn){n.activeAction="moving",n.target=a.id;const f=ze(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=qe(f),T.RUNNING}return T.FAILURE},"Territorial Fight or Approach",e+1)],"Predator Territorial Defense",e)}function V_(){const e=new _n([r_(2),A_(2),N_(2),y_(2),T_(2),I_(2),E_(2),new qo(g_(3),"Gated Leader Combat Strategy",2),new qo(R_(3),"Gated Diplomacy",2),p_(2),new Ji(l_(3),"attack","Gated Attacking",2),i_(2),new El(new Ji(o_(4),"gathering","Gated Gathering",3),kd,"Timeout Gathering",2),new Ji(d_(3),"feedChildren","Gated Feed Child",2),f_(2),new El(new Ji(h_(4),"planting","Gated Planting",3),kd,"Timeout Planting",2),new Ji(P_(3),"attack","Gated Hunt Prey",2),new Ji(a_(3),"procreation","Gated Procreation",2),new ws(S_(3),Od,"Cache Tribe Split",2),new qo(C_(3),"Gated Tribe Migration",2),new ws(m_(3),Od,"Cache Establish Territory",2),new Ji(__(3),"followLeader","Gated Follow Leader",2),new qo(v_(2),"Gated Follow Patriarch",2),new qo(s_(2),"Gated Idle Wander",2)],"AI Root Selector",1);return new n_(e,"Manual Control Gate",0)}function X_(){return new _n([D_(1),U_(1),L_(1),k_(1),O_(1),W_(1),ev(1)],"Prey Behavior Root",0)}function K_(){return new _n([H_(1),B_(1),z_(1),$_(1),j_(1),G_(1),Y_(1),ev(1)],"Predator Behavior Root",0)}class mf{constructor(){Te(this,"data",new Map);Te(this,"nodeExecutionData",new Map)}set(n,r){this.data.set(n,r)}get(n){return this.data.get(n)}delete(n){this.data.delete(n)}has(n){return this.data.has(n)}recordNodeExecution(n,r,o,a,l){const c=this.nodeExecutionData.get(n)||{lastExecuted:0,status:T.FAILURE,depth:0,debugInfo:"",executionHistory:[]},f=c.executionHistory[c.executionHistory.length-1];f&&o-(f==null?void 0:f.time)>vs&&c.executionHistory.push({time:f.time+vs,status:T.NOT_EVALUATED}),c.executionHistory.push({time:o,status:r});const h=N0/jt*Yt,p=o-h;c.executionHistory=c.executionHistory.filter(S=>S.time>=p);const m={...c,lastExecuted:o,status:r,depth:a,debugInfo:l};this.nodeExecutionData.set(n,m)}getNodeExecutionData(){return this.nodeExecutionData}cleanupOldEntries(n){const r=hT,o=[];for(const[a,l]of this.nodeExecutionData.entries())n-l.lastExecuted>r&&o.push(a);for(const a of o)this.nodeExecutionData.delete(a)}}function Q_(e){e.gameState.entities.entities.forEach(r=>{JE(r,e)})}function tv(){return{entities:new Map,nextEntityId:1}}function Ns(e,n,r){const o={id:e.nextEntityId++,type:n,velocity:{x:0,y:0},direction:{x:0,y:0},acceleration:0,forces:[],debuffs:[],...r};return e.entities.set(o.id,o),o}function Xl(e,n,r){return Ns(e,"berryBush",{position:n,radius:Dd,food:Array.from({length:wA},()=>({type:ti.Berry})).map(a=>({...a,id:e.nextEntityId++})),maxFood:IA,lifespan:_A,age:0,spreadRadius:Dd,timeSinceLastBerryRegen:0,timeSinceLastSpreadAttempt:0,timeSinceLastHarvest:0,stateMachine:[ss,{enteredAt:r,previousState:void 0}]})}function _l(e,n,r,o,a=!1,l=DA,c=h0,f,h,p=[],m,S){const y=l>=Vd;return Ns(e,"human",{position:n,radius:y?pt:oo,hunger:c,hitpoints:Hp,maxHitpoints:Hp,age:l,gender:o,isPlayer:a,food:[],maxFood:f0,maxAge:ps,isAdult:y,isPregnant:!1,gestationTime:0,procreationCooldown:0,attackCooldown:0,motherId:f,fatherId:h,ancestorIds:p,stateMachine:[St,{enteredAt:r,previousState:void 0}],leaderId:m,tribeBadge:S,aiType:Ps.BehaviorTreeBased,aiBehaviorTree:V_(),aiBlackboard:new mf})}function vf(e,n,r,o,a,l,c,f,h,p,m){let S,y;switch(c){case"human":S=m0,y=ur;break;case"prey":S=2,y=120;break;case"predator":S=4,y=140;break}return Ns(e,"corpse",{position:n,radius:a,gender:r,age:o,originalEntityId:l,originalEntityType:c,timeOfDeath:f,decayProgress:0,geneCode:m,food:[...Array.from({length:Math.max(S*Math.max(y-p,0)/y,0)},()=>({type:ti.Meat})),...h].map(P=>({...P,id:e.nextEntityId++})),stateMachine:void 0})}function Z_(e,n,r,o,a,l,c,f,h){return vf(e,n,r,o,a,l,"human",c,f,h)}function q_(e,n,r,o,a,l,c,f){return vf(e,n,r,o,a,l,"prey",c,[],0,f)}function J_(e,n,r,o,a,l,c,f){return vf(e,n,r,o,a,l,"predator",c,[],0,f)}function eC(e,n,r){const o=n?r.gameState.entities.entities.get(n):void 0,a=[...e.ancestorIds||[],e.id],l=o?[...o.ancestorIds||[],o.id]:[],c=[...a,...l],f=[...new Set(c)],h=f.slice(Math.max(f.length-CA,0)),p=Math.random()<.5?"male":"female",m=bn(e.position,{x:5,y:5}),S=_l(r.gameState.entities,m,r.gameState.time,p,!1,0,h0/2,e.id,n,h,(o==null?void 0:o.leaderId)??e.leaderId,(o==null?void 0:o.tribeBadge)??e.tribeBadge);return ke(r,Ae.Birth,e.position),S}function Ds(e,n){return e.entities.get(n)?(e.entities.delete(n),!0):!1}function Es(e,n,r,o=fw,a=L0,l,c,f){const h=o>=as,p=Date.now();return Ns(e,"prey",{position:n,radius:h?pt*.7:oo*.7,hunger:a,hitpoints:sm,maxHitpoints:sm,age:o,maxAge:U0,gender:r,isAdult:h,isPregnant:!1,gestationTime:0,procreationCooldown:0,geneCode:l,motherId:c,fatherId:f,stateMachine:[In,{enteredAt:p,previousState:void 0}],aiType:Ps.BehaviorTreeBased,aiBehaviorTree:X_(),aiBlackboard:new mf})}function _s(e,n,r,o=Aw,a=B0,l,c,f){const h=o>=ls,p=Date.now();return Ns(e,"predator",{position:n,radius:h?pt*.9:oo*.9,hunger:a,hitpoints:am,maxHitpoints:am,age:o,maxAge:H0,gender:r,isAdult:h,isPregnant:!1,gestationTime:0,procreationCooldown:0,geneCode:l,motherId:c,fatherId:f,stateMachine:[Mt,{enteredAt:p,previousState:void 0}],aiType:Ps.BehaviorTreeBased,aiBehaviorTree:K_(),aiBlackboard:new mf})}class tC{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(n,r){let o=this.length++;for(;o>0;){const a=o-1>>1,l=this.values[a];if(r>=l)break;this.ids[o]=this.ids[a],this.values[o]=l,o=a}this.ids[o]=n,this.values[o]=r}pop(){if(this.length===0)return;const n=this.ids[0];if(this.length--,this.length>0){const r=this.ids[0]=this.ids[this.length],o=this.values[0]=this.values[this.length],a=this.length>>1;let l=0;for(;l<a;){let c=(l<<1)+1;const f=c+1;let h=this.ids[c],p=this.values[c];const m=this.values[f];if(f<this.length&&m<p&&(c=f,h=this.ids[f],p=m),p>=o)break;this.ids[l]=h,this.values[l]=p,l=c}this.ids[l]=r,this.values[l]=o}return n}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}const Sm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],vd=3;class Sf{static from(n,r=0){if(r%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!n||n.byteLength===void 0||n.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[o,a]=new Uint8Array(n,r+0,2);if(o!==251)throw new Error("Data does not appear to be in a Flatbush format.");const l=a>>4;if(l!==vd)throw new Error(`Got v${l} data when expected v${vd}.`);const c=Sm[a&15];if(!c)throw new Error("Unrecognized array type.");const[f]=new Uint16Array(n,r+2,1),[h]=new Uint32Array(n,r+4,1);return new Sf(h,f,c,void 0,n,r)}constructor(n,r=16,o=Float64Array,a=ArrayBuffer,l,c=0){if(n===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(n)||n<=0)throw new Error(`Unexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+r,2),65535),this.byteOffset=c;let f=n,h=f;this._levelBounds=[f*4];do f=Math.ceil(f/this.nodeSize),h+=f,this._levelBounds.push(h*4);while(f!==1);this.ArrayType=o,this.IndexArrayType=h<16384?Uint16Array:Uint32Array;const p=Sm.indexOf(this.ArrayType),m=h*4*this.ArrayType.BYTES_PER_ELEMENT;if(p<0)throw new Error(`Unexpected typed array class: ${o}.`);l&&l.byteLength!==void 0&&!l.buffer?(this.data=l,this._boxes=new this.ArrayType(this.data,c+8,h*4),this._indices=new this.IndexArrayType(this.data,c+8+m,h),this._pos=h*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1]):(this.data=new a(8+m+h*this.IndexArrayType.BYTES_PER_ELEMENT),this._boxes=new this.ArrayType(this.data,8,h*4),this._indices=new this.IndexArrayType(this.data,8+m,h),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(this.data,0,2).set([251,(vd<<4)+p]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=n),this._queue=new tC}add(n,r,o=n,a=r){const l=this._pos>>2,c=this._boxes;return this._indices[l]=l,c[this._pos++]=n,c[this._pos++]=r,c[this._pos++]=o,c[this._pos++]=a,n<this.minX&&(this.minX=n),r<this.minY&&(this.minY=r),o>this.maxX&&(this.maxX=o),a>this.maxY&&(this.maxY=a),l}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const n=this._boxes;if(this.numItems<=this.nodeSize){n[this._pos++]=this.minX,n[this._pos++]=this.minY,n[this._pos++]=this.maxX,n[this._pos++]=this.maxY;return}const r=this.maxX-this.minX||1,o=this.maxY-this.minY||1,a=new Uint32Array(this.numItems),l=65535;for(let c=0,f=0;c<this.numItems;c++){const h=n[f++],p=n[f++],m=n[f++],S=n[f++],y=Math.floor(l*((h+m)/2-this.minX)/r),E=Math.floor(l*((p+S)/2-this.minY)/o);a[c]=iC(y,E)}Hd(a,n,this._indices,0,this.numItems-1,this.nodeSize);for(let c=0,f=0;c<this._levelBounds.length-1;c++){const h=this._levelBounds[c];for(;f<h;){const p=f;let m=n[f++],S=n[f++],y=n[f++],E=n[f++];for(let P=1;P<this.nodeSize&&f<h;P++)m=Math.min(m,n[f++]),S=Math.min(S,n[f++]),y=Math.max(y,n[f++]),E=Math.max(E,n[f++]);this._indices[this._pos>>2]=p,n[this._pos++]=m,n[this._pos++]=S,n[this._pos++]=y,n[this._pos++]=E}}}search(n,r,o,a,l){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let c=this._boxes.length-4;const f=[],h=[];for(;c!==void 0;){const p=Math.min(c+this.nodeSize*4,Am(c,this._levelBounds));for(let m=c;m<p;m+=4){if(o<this._boxes[m]||a<this._boxes[m+1]||n>this._boxes[m+2]||r>this._boxes[m+3])continue;const S=this._indices[m>>2]|0;c>=this.numItems*4?f.push(S):(l===void 0||l(S))&&h.push(S)}c=f.pop()}return h}neighbors(n,r,o=1/0,a=1/0,l){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let c=this._boxes.length-4;const f=this._queue,h=[],p=a*a;e:for(;c!==void 0;){const m=Math.min(c+this.nodeSize*4,Am(c,this._levelBounds));for(let S=c;S<m;S+=4){const y=this._indices[S>>2]|0,E=ym(n,this._boxes[S],this._boxes[S+2]),P=ym(r,this._boxes[S+1],this._boxes[S+3]),I=E*E+P*P;I>p||(c>=this.numItems*4?f.push(y<<1,I):(l===void 0||l(y))&&f.push((y<<1)+1,I))}for(;f.length&&f.peek()&1;)if(f.peekValue()>p||(h.push(f.pop()>>1),h.length===o))break e;c=f.length?f.pop()>>1:void 0}return f.clear(),h}}function ym(e,n,r){return e<n?n-e:e<=r?0:e-r}function Am(e,n){let r=0,o=n.length-1;for(;r<o;){const a=r+o>>1;n[a]>e?o=a:r=a+1}return n[r]}function Hd(e,n,r,o,a,l){if(Math.floor(o/l)>=Math.floor(a/l))return;const c=e[o+a>>1];let f=o-1,h=a+1;for(;;){do f++;while(e[f]<c);do h--;while(e[h]>c);if(f>=h)break;nC(e,n,r,f,h)}Hd(e,n,r,o,h,l),Hd(e,n,r,h+1,a,l)}function nC(e,n,r,o,a){const l=e[o];e[o]=e[a],e[a]=l;const c=4*o,f=4*a,h=n[c],p=n[c+1],m=n[c+2],S=n[c+3];n[c]=n[f],n[c+1]=n[f+1],n[c+2]=n[f+2],n[c+3]=n[f+3],n[f]=h,n[f+1]=p,n[f+2]=m,n[f+3]=S;const y=r[o];r[o]=r[a],r[a]=y}function iC(e,n){let r=e^n,o=65535^r,a=65535^(e|n),l=e&(n^65535),c=r|o>>1,f=r>>1^r,h=a>>1^o&l>>1^a,p=r&a>>1^l>>1^l;r=c,o=f,a=h,l=p,c=r&r>>2^o&o>>2,f=r&o>>2^o&(r^o)>>2,h^=r&a>>2^o&l>>2,p^=o&a>>2^(r^o)&l>>2,r=c,o=f,a=h,l=p,c=r&r>>4^o&o>>4,f=r&o>>4^o&(r^o)>>4,h^=r&a>>4^o&l>>4,p^=o&a>>4^(r^o)&l>>4,r=c,o=f,a=h,l=p,h^=r&a>>8^o&l>>8,p^=o&a>>8^(r^o)&l>>8,r=h^h>>1,o=p^p>>1;let m=e^n,S=o|65535^(m|r);return m=(m|m<<8)&16711935,m=(m|m<<4)&252645135,m=(m|m<<2)&858993459,m=(m|m<<1)&1431655765,S=(S|S<<8)&16711935,S=(S|S<<4)&252645135,S=(S|S<<2)&858993459,S=(S|S<<1)&1431655765,(S<<1|m)>>>0}function es(e,n){if(e.length===0)return{byRect:()=>[],byRadius:()=>[],byProperty:()=>[],resetPropertyCache:()=>{},count:()=>0};const r=new Sf(e.length),o=new Map;for(const l of e)r.add(l.position.x,l.position.y,l.position.x,l.position.y);return r.finish(),{byRect(l){return r.search(l.left,l.top,l.right,l.bottom).map(f=>e[f])},byRadius(l,c){return r.neighbors(l.x,l.y,void 0,c).map(h=>e[h])},byProperty(l,c){var f;if(!o.has(l)){const h=new Map;for(const p of e){const m=p[l];h.has(m)||h.set(m,[]),h.get(m).push(p)}o.set(l,h)}return((f=o.get(l))==null?void 0:f.get(c))||[]},resetPropertyCache(){o.clear()},count(){return e.length}}}function yf(e){const n=Array.from(e.entities.entities.values()),r=n.filter(h=>h.type==="human"),o=n.filter(h=>h.type==="berryBush"),a=n.filter(h=>h.type==="corpse"),l=n.filter(h=>h.type==="prey"),c=n.filter(h=>h.type==="predator");return{...e,search:{human:es(r),berryBush:es(o),corpse:es(a),prey:es(l),predator:es(c)}}}var kt=(e=>(e.MOVE="MOVE",e.HUNGER="HUNGER",e.EAT="EAT",e.FIND_BUSH="FIND_BUSH",e.GATHER="GATHER",e.PROCREATE="PROCREATE",e.PLANT_BUSH="PLANT_BUSH",e.AUTOPILOT="AUTOPILOT",e.ANIMALS_INTRODUCTION="ANIMALS_INTRODUCTION",e.HUNT_PREY="HUNT_PREY",e.DEFEND_FROM_PREDATORS="DEFEND_FROM_PREDATORS",e))(kt||{}),lr=(e=>(e.HUNGER_BAR="HUNGER_BAR",e.FOOD_BAR="FOOD_BAR",e.COMMAND_BUTTONS="COMMAND_BUTTONS",e))(lr||{}),Ot=(e=>(e[e.FADING_IN=0]="FADING_IN",e[e.ACTIVE=1]="ACTIVE",e[e.FADING_OUT=2]="FADING_OUT",e[e.INACTIVE=3]="INACTIVE",e))(Ot||{});const rC=[{key:kt.MOVE,title:"Movement",text:"Use WASD or Arrow Keys to move your character around the world.",condition:e=>e.hasPlayerMovedEver||e.hasPlayerEnabledAutopilot>2,isCompleted:!1},{key:kt.HUNGER,title:"Hunger",text:"Your character gets hungry over time. Watch the hunger bar!",condition:(e,n)=>n.hunger>RA,isCompleted:!1,minDisplayTime:nm,highlightedUIElements:[lr.HUNGER_BAR]},{key:kt.FIND_BUSH,title:"Find Food",text:"Look for berry bushes. They are your primary source of food.",condition:(e,n)=>!!Re(n,e,"berryBush",gt*5,o=>o.food.length>0),getTargets:(e,n)=>{const r=[];for(const o of e.entities.entities.values())o.type==="berryBush"&&o.food.length>0&&V(n.position,o.position,e.mapDimensions.width,e.mapDimensions.height)<500&&r.push(o);return r.map(o=>o.id)},isCompleted:!1,minDisplayTime:nm},{key:kt.GATHER,title:"Gather Berries",text:"Get close to a bush and press 'E' to gather berries.",condition:(e,n)=>n.food.length>0,getTargets:(e,n)=>{const r=Re(n,e,"berryBush",gt,o=>o.food.length>0);return r?[r.id]:[]},isCompleted:!1},{key:kt.EAT,title:"Eat",text:"When you are hungry and have food, press 'F' to eat.",condition:(e,n)=>n.activeAction==="eating",isCompleted:!1,highlightedUIElements:[lr.FOOD_BAR]},{key:kt.PROCREATE,title:"Procreate",text:"Find a mate and press 'R' to start a family. This is how you continue your lineage.",condition:(e,n)=>At(e,n).length>0,getTargets:(e,n)=>{const r=Re(n,e,"human",gt,o=>dr(n,o,e));return r?[r.id]:[]},isCompleted:!1},{key:kt.PLANT_BUSH,title:"Farming",text:"You can plant new berry bushes. Carry some berries and press 'B' to plant.",condition:(e,n)=>gf(e,n).some(o=>o.type===Ie.Plant)||e.hasPlayerPlantedBush===!0,isCompleted:!1},{key:kt.AUTOPILOT,title:"Autopilot!",text:"You can turn autopilot for specific actions, press Shift and click on the action button to enable it.",condition:e=>e.hasPlayerEnabledAutopilot>2,highlightedUIElements:[lr.COMMAND_BUTTONS],isCompleted:!1},{key:kt.ANIMALS_INTRODUCTION,title:"Wild Animals!",text:"Your world now has wild animals! Prey provide meat when hunted, but beware of predators that may attack.",condition:e=>Array.from(e.entities.entities.values()).some(r=>r.type==="prey"||r.type==="predator"),isCompleted:!1,dependsOn:kt.AUTOPILOT},{key:kt.HUNT_PREY,title:"Hunt for Meat",text:"Click on prey animals to hunt them for meat. Hunting provides more food than gathering berries!",condition:(e,n)=>{const r=Re(n,e,"prey",150);return n.hunger>40&&!!r},getTargets:(e,n)=>{const r=Re(n,e,"prey",150);return r?[r.id]:[]},isCompleted:!1,dependsOn:kt.ANIMALS_INTRODUCTION},{key:kt.DEFEND_FROM_PREDATORS,title:"Predators",text:"Predators may attack when hungry! Click on them to fight back. Fighting together with family is more effective.",condition:(e,n)=>!!Re(n,e,"predator",120),getTargets:(e,n)=>{const r=Re(n,e,"predator",120);return r?[r.id]:[]},isCompleted:!1,dependsOn:kt.HUNT_PREY}];function nv(){return{steps:rC.map(e=>({...e,isCompleted:!1}))}}function iv(){return{currentStepIndex:0,completedSteps:new Set,isActive:!0,transitionState:Ot.FADING_IN,transitionAlpha:0,highlightedEntityIds:new Set,stepStartTime:null,activeUIHighlights:new Set}}function oC(e){for(let n=0;n<e.tutorial.steps.length;n++){const r=e.tutorial.steps[n];if(!r.isCompleted)if(r.dependsOn){if(e.tutorialState.completedSteps.has(r.dependsOn))return n}else return n}return null}function sC(e,n){const r=e.tutorialState;if(!r.isActive){r.transitionState=Ot.INACTIVE,r.highlightedEntityIds.clear(),r.activeUIHighlights.clear();return}const o=Tt(e);if(!o){r.isActive=!1,r.transitionState=Ot.INACTIVE,r.highlightedEntityIds.clear(),r.activeUIHighlights.clear();return}const a=e.tutorial.steps[r.currentStepIndex];if(!a){r.isActive=!1,r.transitionState=Ot.INACTIVE,r.highlightedEntityIds.clear(),r.activeUIHighlights.clear();return}const l=1/BI;switch(r.transitionState){case Ot.FADING_IN:r.stepStartTime===null&&(r.stepStartTime=e.time),r.transitionAlpha+=l*n,r.transitionAlpha>=1&&(r.transitionAlpha=1,r.transitionState=Ot.ACTIVE);break;case Ot.ACTIVE:{e.time-(r.stepStartTime||e.time)>=(a.minDisplayTime||0)&&a.condition(e,o)&&(a.isCompleted=!0,r.completedSteps.add(a.key),r.transitionState=Ot.FADING_OUT);break}case Ot.FADING_OUT:if(r.transitionAlpha-=l*n,r.transitionAlpha<=0){r.transitionAlpha=0,r.stepStartTime=null;const f=oC(e);f!==null?(r.currentStepIndex=f,r.transitionState=Ot.FADING_IN):(r.isActive=!1,r.transitionState=Ot.INACTIVE)}break}r.transitionState!==Ot.FADING_OUT&&r.transitionState!==Ot.INACTIVE?(a.getTargets?r.highlightedEntityIds=new Set(a.getTargets(e,o)):r.highlightedEntityIds.clear(),a.highlightedUIElements?r.activeUIHighlights=new Set(a.highlightedUIElements):r.activeUIHighlights.clear()):(r.highlightedEntityIds.clear(),r.activeUIHighlights.clear())}function aC(){const e=tv(),n=0;for(let S=0;S<u0;S++){const y={x:Math.random()*yn,y:Math.random()*An};Xl(e,y,n)}const r=yn/2,o=An/2,a=_l(e,{x:r,y:o},n,"male",!0);_l(e,{x:r+50,y:o},n,"female",!1);for(let S=0;S<b0;S++){const y={x:r+yn*(Math.random()-Math.random()),y:o+An*(Math.random()-Math.random())};Es(e,y,"male",void 0,void 0,Il()),Es(e,{x:y.x+20,y:y.y},"female",void 0,void 0,Il())}const l={x:r+yn*(Math.random()-Math.random()),y:o+An*(Math.random()-Math.random())};_s(e,l,"male",void 0,void 0,wl()),_s(e,{x:l.x+20,y:l.y},"female",void 0,void 0,wl());const c=[{id:"muteButton",action:Ue.ToggleMute,currentWidth:jr,rect:{x:0,y:0,width:0,height:0},text:"",backgroundColor:"",textColor:Vr},{id:"pauseButton",action:Ue.TogglePause,currentWidth:jr,rect:{x:0,y:0,width:0,height:0},text:"",backgroundColor:"",textColor:Vr}],f=nv(),h=iv(),p={time:n,entities:e,mapDimensions:{width:yn,height:An},generationCount:1,gameOver:!1,visualEffects:[],nextVisualEffectId:0,viewportCenter:{...a.position},isPaused:!1,autopilotControls:{behaviors:{procreation:!1,planting:!1,gathering:!1,attack:!1,feedChildren:!0,followLeader:!1},hoveredAutopilotAction:void 0,activeAutopilotAction:void 0,isManuallyMoving:!1},hasPlayerMovedEver:!1,hasPlayerPlantedBush:!1,hasPlayerEnabledAutopilot:0,masterVolume:F0,isMuted:!1,uiButtons:c,tutorial:f,tutorialState:h,hoveredButtonId:void 0,mousePosition:{x:0,y:0},notifications:[{id:"welcome",type:As.Hello,message:"Welcome to the game!",duration:50,targetEntityIds:[a.id],highlightedEntityIds:[a.id],timestamp:0,isDismissed:!1,creationTime:Date.now()}],ecosystem:{preyGestationPeriod:Gl,preyProcreationCooldown:xl,predatorGestationPeriod:bl,predatorProcreationCooldown:zl,preyHungerIncreasePerHour:$l,predatorHungerIncreasePerHour:Wl,berryBushSpreadChance:Yl}},m=yf(p);return console.log("Game world initialized:",m),m}function lC(){const e=tv(),n=0;for(let c=0;c<u0;c++){const f={x:Math.random()*yn,y:Math.random()*An};Xl(e,f,n)}for(let c=0;c<YI;c++){const f={x:Math.random()*yn,y:Math.random()*An},h=Math.random()<.5?"male":"female";_l(e,f,n,h,!1)}for(let c=0;c<b0;c++){const f={x:Math.random()*yn,y:Math.random()*An};Es(e,f,"male",void 0,void 0,Il()),Es(e,{x:f.x+20,y:f.y},"female",void 0,void 0,Il())}const r={x:Math.random()*yn,y:Math.random()*An};_s(e,r,"male",void 0,void 0,wl()),_s(e,{x:r.x+20,y:r.y},"female",void 0,void 0,wl());const o=nv(),a=iv(),l={time:n,entities:e,mapDimensions:{width:yn,height:An},generationCount:0,gameOver:!1,visualEffects:[],nextVisualEffectId:0,viewportCenter:{x:yn/2,y:An/2},isPaused:!1,autopilotControls:{behaviors:{procreation:!1,planting:!1,gathering:!1,attack:!1,feedChildren:!0,followLeader:!1},hoveredAutopilotAction:void 0,activeAutopilotAction:void 0,isManuallyMoving:!1},hasPlayerMovedEver:!1,hasPlayerPlantedBush:!1,hasPlayerEnabledAutopilot:0,masterVolume:F0,isMuted:!0,uiButtons:[],tutorial:o,tutorialState:a,hoveredButtonId:void 0,mousePosition:{x:0,y:0},notifications:[],ecosystem:{preyGestationPeriod:Gl,preyProcreationCooldown:xl,predatorGestationPeriod:bl,predatorProcreationCooldown:zl,preyHungerIncreasePerHour:$l,predatorHungerIncreasePerHour:Wl,berryBushSpreadChance:Yl}};return yf(l)}const uC="humanProcreation",cC="human",dC="human",fC=gt,hC=(e,n,r)=>dr(e,n,r.gameState)?e.gender==="male"?e.activeAction==="procreating":e.activeAction==="procreating"&&n.activeAction==="procreating":!1,gC=(e,n,r)=>{var h,p;const{gameState:o}=r,a={x:(e.position.x+n.position.x)/2,y:(e.position.y+n.position.y)/2},l=e.gender==="male"?e:n,c=e.gender==="female"?e:n,f=(l.partnerIds||[]).length===0;if(e.stateMachine=[Is,{partnerId:n.id,previousState:(h=e.stateMachine)==null?void 0:h[0]}],n.stateMachine=[Is,{partnerId:e.id,previousState:(p=n.stateMachine)==null?void 0:p[0]}],e.partnerIds||(e.partnerIds=[]),e.partnerIds.includes(n.id)||e.partnerIds.push(n.id),n.partnerIds||(n.partnerIds=[]),n.partnerIds.includes(e.id)||n.partnerIds.push(e.id),f&&l.leaderId&&l.leaderId!==l.id){const m=o.entities.entities.get(l.leaderId);if(m){const S=Fd(l,m),y=Fd(c,m);if(!S&&!y){const E=Ud();l.leaderId=l.id,l.tribeBadge=E,l.diplomacy=new Map,c.leaderId=l.id,c.tribeBadge=E}}}else if(!e.leaderId&&!n.leaderId&&l&&c){const m=Ud();l.leaderId=l.id,l.tribeBadge=m,l.diplomacy=new Map,c.leaderId=l.id,c.tribeBadge=m}e.activeAction=void 0,we(o,oe.Procreation,a,or),we(o,oe.Partnered,e.position,Be,e.id),we(o,oe.Partnered,n.position,Be,n.id),e.lastPartneredEffectTime=o.time,n.lastPartneredEffectTime=o.time,n.activeAction=void 0,ke(r,Ae.Procreate,a)},pC={id:uC,sourceType:cC,targetType:dC,maxDistance:fC,checker:hC,perform:gC},mC={id:"humanChildFeeding",sourceType:"human",targetType:"human",maxDistance:Kd,checker:(e,n)=>e.isAdult===!0&&e.food.length>0&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=Mi&&e.activeAction==="feeding",perform:(e,n,r)=>{e.food.pop(),n.hunger=Math.max(0,n.hunger-Mi),e.feedChildCooldownTime=BA,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(we(r.gameState,oe.ChildFed,n.position,Be,n.id),n.lastChildFedEffectTime=r.gameState.time),ke(r,Ae.ChildFed,n.position)}},vC={id:"human-attack",sourceType:"human",targetType:"human",maxDistance:xn,checker:(e,n,r)=>{var l;if(((l=e.stateMachine)==null?void 0:l[0])!==Ui||e.attackTargetId!==n.id||(e.attackCooldown||0)>0)return!1;const o=e.stateMachine[1];return r.gameState.time-o.attackStartTime>=v0},perform:(e,n,r)=>{const o=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),a=Hw(qe(o),n.direction);if(Math.abs(a)<QA*Math.PI/180&&Math.random()<ZA)we(r.gameState,oe.AttackDeflected,n.position,Be,n.id);else{let f=Qd;e.gender==="male"&&(f*=VA),e.isAdult||(f*=XA),(!n.isAdult||n.age>=p0)&&e.isAdult&&(f*=KA),n.hitpoints-=f,n.movementSlowdown={modifier:Zd,endTime:r.gameState.time+qd},we(r.gameState,oe.Hit,n.position,Be,n.id);const p=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),m=yt(p,WA);n.forces.push(m),n.hitpoints<=0?ke(r,Ae.HumanDeath,n.position):ke(r,Ae.Attack,e.position)}e.attackCooldown=Ul;const c=e.stateMachine[1];c.attackStartTime=r.gameState.time,we(r.gameState,oe.Attack,e.position,Be,e.id)}},SC={id:"human-collision",sourceType:"human",targetType:"human",maxDistance:pt*2,checker:(e,n,{gameState:r})=>V(e.position,n.position,r.mapDimensions.width,r.mapDimensions.height)<(e.radius+n.radius)/3,perform:(e,n,{gameState:r})=>{const o=V(e.position,n.position,r.mapDimensions.width,r.mapDimensions.height);if(o===0){e.forces.push({x:.1,y:0}),n.forces.push({x:-.1,y:0});return}const l=(e.radius+n.radius-o)*.05,c=qe(W0(e.position,n.position)),f=yt(c,l);e.forces.push(f),n.forces.push(yt(f,-1))}},yC={id:"humanBerryBushGather",sourceType:"human",targetType:"berryBush",maxDistance:gt,checker:(e,n,r)=>{var o;return e.isAdult&&n.food.length>0&&((o=e.stateMachine)==null?void 0:o[0])===Vl&&e.food.length<e.maxFood&&(!e.gatheringCooldownTime||e.gatheringCooldownTime<r.gameState.time)||!1},perform:(e,n,r)=>{const o=n.food.pop();o&&e.food.push(o),e.gatheringCooldownTime=r.gameState.time+1,n.timeSinceLastHarvest=r.gameState.time,n.ownerId=e.id,n.claimedUntil=r.gameState.time+c0,we(r.gameState,oe.BushClaimed,n.position,Be),ke(r,Ae.Gather,e.position)}},AC={id:"corpseGather",sourceType:"human",targetType:"corpse",maxDistance:gt,checker:(e,n,r)=>{var o;return e.isAdult&&n.food.length>0&&((o=e.stateMachine)==null?void 0:o[0])===Vl&&e.food.length<e.maxFood&&(!e.gatheringCooldownTime||e.gatheringCooldownTime<r.gameState.time)||!1},perform:(e,n,r)=>{const o=n.food.pop();o&&e.food.push(o),e.gatheringCooldownTime=r.gameState.time+1,ke(r,Ae.Gather,e.position)}},TC=[yC,AC],IC={id:"prey-eat-berry-bush",sourceType:"prey",targetType:"berryBush",maxDistance:Ut,checker:(e,n,r)=>!!(e.isAdult&&n.food.length>0&&e.hunger>30&&(!e.eatingCooldownTime||e.eatingCooldownTime<r.gameState.time)),perform:(e,n,r)=>{n.food.pop()&&(e.hunger=Math.max(0,e.hunger-25),n.lifespan-=pw,n.timeSinceLastHarvest=r.gameState.time,e.eatingCooldownTime=r.gameState.time+gw,we(r.gameState,oe.BushClaimed,n.position,Be,e.id),ke(r,Ae.Gather,e.position))}},wC={id:"predator-hunt-prey",sourceType:"predator",targetType:"prey",maxDistance:br,checker:(e,n,r)=>!!(e.isAdult&&e.hunger>50&&(!e.huntCooldown||e.huntCooldown<=0)&&n.hitpoints>0),perform:(e,n,r)=>{n.hitpoints-=Tw;const o=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),a=yt(o,8);n.forces.push(a),e.huntCooldown=Ew,n.hitpoints<=0?(ke(r,Ae.HumanDeath,n.position),we(r.gameState,oe.Hit,n.position,Be,n.id)):(we(r.gameState,oe.Hit,n.position,Be,n.id),n.fleeCooldown=5,ke(r,Ae.Attack,e.position)),we(r.gameState,oe.Attack,e.position,Be,e.id)}},EC={id:"human-hunt-prey",sourceType:"human",targetType:"prey",maxDistance:xn,checker:(e,n,r)=>{var o;return!!(((o=e.stateMachine)==null?void 0:o[0])===Ui&&e.attackTargetId===n.id&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&e.isAdult)},perform:(e,n,r)=>{let o=Qd*1.2;e.gender==="male"&&(o*=1.3),n.hitpoints-=o;const a=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),l=yt(a,6);n.forces.push(l),e.attackCooldown=Ul,n.hitpoints<=0?(ke(r,Ae.HumanDeath,n.position),we(r.gameState,oe.Hit,n.position,Be,n.id)):(we(r.gameState,oe.Hit,n.position,Be,n.id),n.fleeCooldown=8,ke(r,Ae.Attack,e.position)),we(r.gameState,oe.Attack,e.position,Be,e.id)}},_C={id:"predator-attack-human",sourceType:"predator",targetType:"human",maxDistance:Tn,checker:(e,n,r)=>{var o;return!!(e.isAdult&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&(e.hunger>100||n.attackTargetId===e.id||n.attackTargetId&&((o=r.gameState.entities.entities.get(n.attackTargetId))==null?void 0:o.type)==="predator"))},perform:(e,n,r)=>{let o=G0;e.hunger>120&&(o*=1.3),n.hitpoints-=o,n.movementSlowdown={modifier:Zd,endTime:r.gameState.time+qd};const a=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),l=yt(a,7);n.forces.push(l),e.attackCooldown=x0,n.hitpoints<=0?(e.hunger=Math.max(0,e.hunger-rf),ke(r,Ae.HumanDeath,n.position),we(r.gameState,oe.Hit,n.position,Be,n.id)):(we(r.gameState,oe.Hit,n.position,Be,n.id),ke(r,Ae.Attack,e.position)),we(r.gameState,oe.Attack,e.position,Be,e.id)}},CC={id:"human-attack-predator",sourceType:"human",targetType:"predator",maxDistance:xn,checker:(e,n,r)=>{var o;return!!(((o=e.stateMachine)==null?void 0:o[0])===Ui&&e.attackTargetId===n.id&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&e.isAdult)},perform:(e,n,r)=>{let o=Qd*.8;e.gender==="male"&&(o*=1.2);const a=Array.from(r.gameState.entities.entities.values()).filter(f=>f.type==="human"&&f.id!==e.id).filter(f=>{const h=f;return Math.sqrt(Math.pow(h.position.x-e.position.x,2)+Math.pow(h.position.y-e.position.y,2))<100&&h.activeAction==="attacking"&&h.attackTargetId===n.id}).length;a>0&&(o*=1+a*.2),n.hitpoints-=o;const l=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),c=yt(l,8);n.forces.push(c),e.attackCooldown=Ul,n.hitpoints<=0?(ke(r,Ae.HumanDeath,n.position),we(r.gameState,oe.Hit,n.position,Be,n.id)):(we(r.gameState,oe.Hit,n.position,Be,n.id),n.hitpoints<n.maxHitpoints*.3&&(n.hunger+=20),ke(r,Ae.Attack,e.position)),we(r.gameState,oe.Attack,e.position,Be,e.id)}},RC={id:"prey-procreation",sourceType:"prey",targetType:"prey",maxDistance:Ut,checker:(e,n,r)=>!!(e.isAdult&&n.isAdult&&e.gender!==n.gender&&e.id!==n.id&&!e.isPregnant&&!n.isPregnant&&e.hunger<200&&n.hunger<200&&(!e.procreationCooldown||e.procreationCooldown<=0)&&(!n.procreationCooldown||n.procreationCooldown<=0)),perform:(e,n,r)=>{const o=e.gender==="female"?e:n;o.isPregnant=!0,o.gestationTime=r.gameState.ecosystem.preyGestationPeriod,e.procreationCooldown=r.gameState.ecosystem.preyProcreationCooldown,n.procreationCooldown=r.gameState.ecosystem.preyProcreationCooldown,we(r.gameState,oe.Procreation,o.position,Be,o.id),ke(r,Ae.Procreate,o.position)}},PC={id:"predator-procreation",sourceType:"predator",targetType:"predator",maxDistance:Oi,checker:(e,n,r)=>!!(e.isAdult&&n.isAdult&&e.gender!==n.gender&&e.id!==n.id&&!e.isPregnant&&!n.isPregnant&&e.hunger<200&&n.hunger<200&&(!e.procreationCooldown||e.procreationCooldown<=0)&&(!n.procreationCooldown||n.procreationCooldown<=0)),perform:(e,n,r)=>{const o=e.gender==="female"?e:n;o.isPregnant=!0,o.pregnancyFatherId=e.gender==="male"?e.id:n.id,o.gestationTime=r.gameState.ecosystem.predatorGestationPeriod,e.procreationCooldown=r.gameState.ecosystem.predatorProcreationCooldown,n.procreationCooldown=r.gameState.ecosystem.predatorProcreationCooldown,we(r.gameState,oe.Procreation,o.position,Be,o.id),ke(r,Ae.Procreate,o.position)}},NC={id:"preyChildFeeding",sourceType:"prey",targetType:"prey",maxDistance:so,checker:(e,n)=>e.isAdult===!0&&e.gender==="female"&&e.hunger<80&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=yl&&e.activeAction==="feeding",perform:(e,n,r)=>{e.hunger=Math.min(120,e.hunger+10),n.hunger=Math.max(0,n.hunger-yl),e.feedChildCooldownTime=z0,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(we(r.gameState,oe.ChildFed,n.position,Be,n.id),n.lastChildFedEffectTime=r.gameState.time),ke(r,Ae.ChildFed,n.position)}},DC={id:"predatorChildFeeding",sourceType:"predator",targetType:"predator",maxDistance:so,checker:(e,n)=>e.isAdult===!0&&e.gender==="female"&&e.hunger<90&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=yl&&e.activeAction==="feeding",perform:(e,n,r)=>{e.hunger=Math.min(140,e.hunger+15),n.hunger=Math.max(0,n.hunger-yl),e.feedChildCooldownTime=z0,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(we(r.gameState,oe.ChildFed,n.position,Be,n.id),n.lastChildFedEffectTime=r.gameState.time),ke(r,Ae.ChildFed,n.position)}},kC={id:"predator-eat-corpse",sourceType:"predator",targetType:"corpse",maxDistance:Oi,checker:(e,n,r)=>!!(e.isAdult&&e.hunger>30&&n.food.length>0&&(!e.eatingCooldownTime||e.eatingCooldownTime<=r.gameState.time)),perform:(e,n,r)=>{n.food.pop()&&(e.hunger=Math.max(0,e.hunger-rf),e.eatingCooldownTime=r.gameState.time+2,we(r.gameState,oe.Eating,e.position,Be,e.id),ke(r,Ae.Gather,e.position))}},OC={id:"predator-attack-rival",sourceType:"predator",targetType:"predator",maxDistance:Tn,checker:(e,n,r)=>{var o;return!!(e.isAdult&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&(e.hunger>100||n.attackTargetId===e.id||n.attackTargetId&&((o=r.gameState.entities.entities.get(n.attackTargetId))==null?void 0:o.type)==="predator"))},perform:(e,n,r)=>{let o=G0;e.hunger>120&&(o*=1.3),n.hitpoints-=o,n.movementSlowdown={modifier:Zd,endTime:r.gameState.time+qd};const a=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),l=yt(a,7);n.forces.push(l),e.attackCooldown=x0,n.hitpoints<=0?(e.hunger=Math.max(0,e.hunger-rf),ke(r,Ae.HumanDeath,n.position),we(r.gameState,oe.Hit,n.position,Be,n.id)):(we(r.gameState,oe.Hit,n.position,Be,n.id),ke(r,Ae.Attack,e.position)),we(r.gameState,oe.Attack,e.position,Be,e.id)}},MC=[SC,...TC,pC,mC,vC,IC,NC,DC,kC,wC,EC,CC,_C,OC,RC,PC];function FC(e){const{gameState:n}=e,r=n,o=Array.from(n.entities.entities.values());for(const a of MC)for(const l of o){if(a.sourceType&&l.type!==a.sourceType)continue;const c=r.search[a.targetType].byRadius(l.position,a.maxDistance);for(const f of c){if(l.id===f.id)continue;V(l.position,f.position,n.mapDimensions.width,n.mapDimensions.height)<=a.maxDistance&&a.checker(l,f,e)&&a.perform(l,f,e)}}}function UC(e){e.visualEffects=e.visualEffects.filter(n=>e.time-n.startTime<=n.duration)}function tr(e,n,r,o){const a=Math.min(Math.max(e/n,0),2);return r+(o-r)*a}function LC(e){const n=e.search.prey.count(),r=e.search.predator.count(),o=e.search.berryBush.count();e.ecosystem.preyGestationPeriod=tr(n,id,Gl,Cw),e.ecosystem.preyProcreationCooldown=tr(n,id,xl,Rw),e.ecosystem.preyHungerIncreasePerHour=tr(n,id,$l,Dw),e.ecosystem.predatorGestationPeriod=tr(r,rd,bl,Pw),e.ecosystem.predatorProcreationCooldown=tr(r,rd,zl,Nw),e.ecosystem.predatorHungerIncreasePerHour=tr(r,rd,Wl,kw),e.ecosystem.berryBushSpreadChance=tr(o,_w,Ow,Yl)}const HC=1/60;function BC(e,n){const r=Tt(e);r&&(e.viewportCenter=of(e.viewportCenter,r.position,jd*n))}function GC(e){for(const r of e.entities.entities.values())r.isHighlighted=!1;const n=e.notifications.filter(r=>!r.isDismissed);for(const r of n)if(r.highlightedEntityIds)for(const o of r.highlightedEntityIds){const a=e.entities.entities.get(o);a&&(a.isHighlighted=!0)}}function Kl(e,n){if(e.isPaused)return e;for(;n>0;){const r=yf(e),o=Math.min(n,HC);if(r.gameOver)return r;const a=o*(Yt/jt);r.time+=a,BC(r,o),tE(r),LC(r),GC(r),Q_({gameState:r,deltaTime:o}),FC({gameState:r,deltaTime:o}),UC(r),sC(r,o),e=r,n-=o}return e}function Tm(e,n,r){e.save();const{x:o,y:a,width:l,height:c}=n.rect,f=fI;if(e.beginPath(),e.moveTo(o+f,a),e.lineTo(o+l-f,a),e.quadraticCurveTo(o+l,a,o+l,a+f),e.lineTo(o+l,a+c-f),e.quadraticCurveTo(o+l,a+c,o+l-f,a+c),e.lineTo(o+f,a+c),e.quadraticCurveTo(o,a+c,o,a+c-f),e.lineTo(o,a+f),e.quadraticCurveTo(o,a,o+f,a),e.closePath(),e.fillStyle=n.isDisabled?hI:n.backgroundColor,e.fill(),n.activated){e.save();const h=(Math.sin(Date.now()/1e3*yI)+1)/2;e.strokeStyle=SI,e.lineWidth=2+h*2,e.globalAlpha=.7+h*.3,e.stroke(),e.restore()}if(n.lastActivated){const h=Date.now()-n.lastActivated;if(h<Xp){const p=1-h/Xp;e.fillStyle=pI,e.globalAlpha=p,e.fill(),e.globalAlpha=1}}r&&!n.isDisabled&&(e.fillStyle=P0,e.globalAlpha=.5,e.fill(),e.globalAlpha=1),e.fillStyle=n.isDisabled?gI:n.textColor,n.icon?(e.font=`${c*.55}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(n.icon,o+l/2,a+c/2),n.text&&(e.font=`${c*.18}px "Press Start 2P", Arial`,e.textAlign="right",e.textBaseline="bottom",e.fillText(n.text,o+l-4,a+c-2))):(e.textAlign="center",e.textBaseline="middle",e.fillText(n.text,o+l/2,a+c/2)),e.restore()}function xC(e,n,r,o){e.save(),e.font=`${Kp}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="bottom";const l=e.measureText(r).width,c=Kp,f=l+Qp*2,h=c+Qp*2,p=o.x-f/2,m=e.canvas.height,S=n.y<m/2?n.y+n.height-Zp:n.y-h+Zp;e.fillStyle=mI,e.fillRect(p,S,f,h),e.fillStyle=vI,e.fillText(r,o.x,S+h/2+c/2),e.restore()}function bC(e,n,r){e.save();const o=Tt(n),a=[{id:"fastForwardButton",action:Ue.FastForward,text:"FFWD [T]",currentWidth:jr*1.3,backgroundColor:Ya,textColor:Vr,tooltip:"Fast-forward time",rect:{x:0,y:0,width:0,height:0}},{id:"pauseButton",action:Ue.TogglePause,text:n.isPaused?"UN[P]AUSE":"[P]AUSE",backgroundColor:n.isPaused?Zc:Ya,currentWidth:n.isPaused?jr*1.4:jr*1.1,tooltip:n.isPaused?"Resume Game":"Pause Game",rect:{x:0,y:0,width:0,height:0},textColor:Vr},{id:"muteButton",action:Ue.ToggleMute,text:n.isMuted?"UN[M]UTE":"[M]UTE",backgroundColor:n.isMuted?Zc:Ya,tooltip:`Toggle Sound (${n.isMuted?"Muted":"Enabled"})`,currentWidth:jr,rect:{x:0,y:0,width:0,height:0},textColor:Vr}];if(n.uiButtons.push(...a),o){const p=gf(n,o),m=new Set(p.map(B=>B.type));let S=[{playerAction:Ie.Gather,buttonAction:Ue.CommandGather,shortcut:"E",name:"Gather",toggleKey:"gathering",condition:()=>o.isAdult===!0},{playerAction:Ie.Eat,buttonAction:Ue.CommandEat,shortcut:"F",name:"Eat"},{playerAction:Ie.Plant,buttonAction:Ue.CommandPlant,shortcut:"B",name:"Plant",toggleKey:"planting",condition:()=>o.isAdult===!0},{playerAction:Ie.Procreate,buttonAction:Ue.ToggleProcreationBehavior,shortcut:"R",name:"Procreation",toggleKey:"procreation",condition:()=>o.isAdult===!0},{playerAction:Ie.FeedChild,buttonAction:Ue.ToggleFeedChildBehavior,shortcut:"H",name:"Feed Child",toggleKey:"feedChildren",condition:()=>o.isAdult===!0},{playerAction:Ie.Attack,buttonAction:Ue.ToggleAttackBehavior,shortcut:"Q",name:"Attack",toggleKey:"attack",condition:()=>o.isAdult===!0},{playerAction:Ie.FollowMe,buttonAction:Ue.CommandFollowMe,shortcut:"C",name:"Follow Me",toggleKey:"followLeader",condition:()=>o.isAdult===!0},{playerAction:Ie.CallToAttack,buttonAction:Ue.CommandCallToAttack,shortcut:"V",name:"Call to Attack",condition:()=>o.isAdult===!0},{playerAction:Ie.TribeSplit,buttonAction:Ue.CommandTribeSplit,shortcut:"K",name:"Split Tribe",condition:()=>o.leaderId!==void 0&&o.leaderId!==o.id&&o.isAdult===!0}];S=S.filter(B=>B.condition?B.condition():!0);const y=1,E=S.length,P=E*Zi+(E-1)*Va,I=y*Zi+(y-1)*Va,R=(r-P)/2,F=e.canvas.height-I-20;S.forEach((B,H)=>{const $=H%E,se=Math.floor(H/E),M=R+$*(Zi+Va),W=F+se*(Zi+Va),fe=!!B.toggleKey,_e=fe&&n.autopilotControls.behaviors[B.toggleKey],Pe=!m.has(B.playerAction),$e=!n.hasPlayerEnabledAutopilot||n.hasPlayerEnabledAutopilot<3?" (Press Shift to toggle Auto)":"",Fe=fe?`${B.name}${$e}`:B.name,Ee=_e?Zc:Ya,ue={id:`commandButton_${B.name}`,action:B.buttonAction,rect:{x:M,y:W,width:Zi,height:Zi},icon:jl[B.playerAction],text:B.shortcut,backgroundColor:Ee,textColor:Vr,currentWidth:Zi,tooltip:Fe,isDisabled:Pe,activated:_e};n.uiButtons.push(ue)})}let l=r-$t;a.forEach(p=>{const m=$t,S=l-p.currentWidth;p.rect={x:S,y:m,width:p.currentWidth,height:cI},Tm(e,p,n.hoveredButtonId===p.id),l-=p.currentWidth+dI});let c=null;n.uiButtons.filter(p=>p.id.startsWith("commandButton_")).forEach(p=>{c||(c={x:p.rect.x,y:p.rect.y,width:p.rect.width,height:p.rect.height}),c.x=Math.min(c.x,p.rect.x),c.y=Math.min(c.y,p.rect.y),c.width=Math.max(c.width,p.rect.x+p.rect.width-c.x),c.height=Math.max(c.height,p.rect.y+p.rect.height-c.y),Tm(e,p,n.hoveredButtonId===p.id)});const h=n.hoveredButtonId?n.uiButtons.find(p=>p.id===n.hoveredButtonId):void 0;return h&&h.tooltip&&n.mousePosition&&xC(e,h.rect,h.tooltip,n.mousePosition),e.restore(),{commandButtonsRect:c}}function zC(e){e.save(),e.fillStyle=DI,e.fillRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle=kI,e.font=`${OI}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("PAUSED",e.canvas.width/2,e.canvas.height/2),e.restore()}function Im(e,n,r,o){const a=n.x-r.width/2,l=n.y-r.height/2,c=a+e.x,f=l+e.y,h=(c%o.width+o.width)%o.width,p=(f%o.height+o.height)%o.height;return{x:h,y:p}}function Af(e,n,r,o){let a=e.x-n.x,l=e.y-n.y;return Math.abs(a)>o.width/2&&(a=a-Math.sign(a)*o.width),Math.abs(l)>o.height/2&&(l=l-Math.sign(l)*o.height),{x:a+r.width/2,y:l+r.height/2}}function Sn(e,n,r,o,a,...l){const c={...a.position};for(let f=-r;f<=r;f+=r)for(let h=-n;h<=n;h+=n)a.position.x=c.x+h,a.position.y=c.y+f,o(e,a,...l);a.position=c}const $C=25,WC=0,wm=28;function rv(e,n,r,o,a,l,c,f,h,p){e.save();const{x:m,y:S}=Af(n,c,{width:f,height:h},p);e.strokeStyle=o,e.lineWidth=l,e.setLineDash(a),e.beginPath(),e.arc(m,S,r+Hl,0,2*Math.PI),e.stroke(),e.restore()}function YC(e,n,r,o,a,l,c){if(n=n.filter(S=>S.type!==Ie.FollowMe),n.length===0)return;e.save(),n.forEach(S=>{S.targetEntity&&rv(e,S.targetEntity.position,S.targetEntity.radius,ef,tf,2,o,a,l,c)}),e.font=`${to}px "Press Start 2P", Arial`,e.fillStyle="white",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=5;const{x:f,y:h}=Af(r.position,o,{width:a,height:l},c);let p=0,m={};n.forEach(S=>{const y=jl[S.type];if(S.targetEntity){m[S.targetEntity.id]=(m[S.targetEntity.id]||0)+1;const E=S.targetEntity.position.x-o.x+a/2,P=S.targetEntity.position.y-o.y+l/2,I=`${y}${S.key.toUpperCase()}`,R=P-S.targetEntity.radius-Hl-to/2-(m[S.targetEntity.id]-1)*wm;e.fillText(I,E,R)}else{e.textAlign="left";const E=`${y}${S.key.toUpperCase()}`,P=f+$C,R=h+WC+p*wm;e.fillText(E,P,R),p++,e.textAlign="center"}}),e.restore()}const ge=(e,n,r,o,a,l,c)=>{l==="transparent"||o<=0||a<=0||(e.fillStyle=l,e.fillRect(Math.floor(n*c),Math.floor(r*c),Math.ceil(o*c),Math.ceil(a*c)))},Em=10,_m=10,Hn=6,qn=4,rl=2,jC=5,un=4,VC=2,Ct=4,XC=2,Ze=3,Gr=2,Ni=0,ds=Ni+qn-1,Dt=ds,rt=ds+un-1,KC="rgba(0, 0, 0, 0.4)",QC=4,ZC=1,Tf={name:"tribe-human-2d",referenceImage:"swos.png",description:`A 2D human character asset for the Tribe game. This includes ensuring that the unique animations for stances like 'eat' and 'procreate' do not erroneously appear in other stances, such as 'walk', which was observed in the provided rendered media. The 'idle' animation was updated to a leg sway to better match the provided video for that stance, replacing a simpler body bob.

# Visual style

Human characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like people from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the character to give it a sense of depth.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 1 and 60, with 20 being the average age.
- gender: 
  - The male characters should have only pants, while female cover their breasts with a top. The clothing should be simple and muted, reflecting a stone-age style.
  - Female characters should have long hair, while male should have short hair and beard.
  - Male characters should have a more robust, muscular build
  - Female characters should have thinner arms and legs, with a more pronounced waist and hips.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'gathering': The character is gathering food from berry bushes, with arms reaching out and a slight bend at the knees.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or dust particles to indicate movement.
- 'attacking': The character performs an attack animation, with arms raised and a forward motion.
- 'defending': The character takes a defensive stance, with arms raised and a slight bend at the knees.
- 'stunned': The character is stunned and laying on the ground, with limbs relaxed and a neutral expression.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a skeleton over time.

`,stances:["idle","walk","gathering","eat","procreate","dead","attacking","defending","stunned"],render(e,n,r,o,a,l,c,f="male",h=20,p=[1,0],m=!1,S=0){const y=["dead","stunned"].includes(c),E=y?_m+4:Em,P=y?Em+4:_m+Ze,I=.15,R=Math.min(o*(1-2*I)/E,a*(1-2*I)/P),F=E*R,B=P*R,H=n+(o-F)/2,$=r+(a-B)/2;e.save(),p[0]<0&&!y?(e.translate(H+F,$),e.scale(-1,1)):e.translate(H,$);const M="#D09A5A",W=h>50?"#BDBDBD":"#281808",fe="#7F5C4A",_e="#6B4F3A",Pe="#E0D8C0",$e="#A0522D",Fe=1-Math.max(0,Math.min(100,S))/100*.2,Ee=f==="male"?1.1:.9,ue=.8+(Math.max(1,Math.min(h,60))-1)/59*.2;let Me=jC*Fe*Ee*ue,ve=VC*Fe*Ee*ue,q=XC*Fe*ue;m&&f==="female"&&(Me*=1.5);const x=Math.round((E-Me)/2),Y=Math.round((E-Hn)/2),b=x-ve,_=x+Me,O=1,j=x+(Me/2-O/2)-q,J=x+(Me/2+O/2),he=p[1]<-.2&&Math.abs(p[0])<.7,ie=X=>{e.fillStyle=KC,e.beginPath();const ee=E/2,Ne=X;e.ellipse(Math.floor(ee*R),Math.floor(Ne*R),Math.max(1,Math.floor(QC*R)),Math.max(1,Math.floor(ZC*R)),0,0,2*Math.PI),e.fill()},Se=(X,ee)=>{f==="male"?(ge(e,x,ds+X,Me,un-Gr,ee,R),ge(e,x,ds+un-Gr+X,Me,Gr,fe,R)):ge(e,x,ds+X,Me,un,_e,R)},me=(X,ee)=>{he?ge(e,Y,Ni+X,Hn,qn,W,R):(ge(e,Y,Ni+X,Hn,qn,ee,R),ge(e,Y,Ni+X,Hn,rl,W,R),f==="female"?(ge(e,Y-1,Ni+rl+X,1,qn,W,R),ge(e,Y+Hn,Ni+rl+X,1,qn,W,R)):ge(e,Y+1,Ni+2+X,Hn-2,qn-2,W,R))};switch(c){case"idle":{const X=l*Math.PI*2,ee=Math.sin(X)*.5,le=(Math.cos(X*2)+1)*.25;ie(rt+Ze+1),ge(e,j+ee,rt+le,q,Ze,M,R),ge(e,J-ee,rt+le,q,Ze,M,R),Se(le,M),ge(e,b,Dt+le,ve,Ct,M,R),ge(e,_,Dt+le,ve,Ct,M,R),me(le,M);break}case"walk":{const X=l*Math.PI*2,ee=Math.sin(X)*2,le=Math.abs(Math.cos(X))*1;ie(rt+Ze+1),ge(e,j+ee,rt+le,q,Ze,M,R),ge(e,J-ee,rt+le,q,Ze,M,R),Se(le,M),ge(e,b-ee,Dt+le,ve,Ct,M,R),ge(e,_+ee,Dt+le,ve,Ct,M,R),me(le,M);break}case"gathering":{const X=l*Math.PI*2,ee=1,Ne=(Math.sin(X)+1)/2*2,le=ee+Math.abs(Math.cos(X))*.5;ie(rt+Ze+1),ge(e,j,rt+le,q,Ze-ee,M,R),ge(e,J,rt+le,q,Ze-ee,M,R),Se(le,M),ge(e,b+1,Dt+le-Ne,ve,Ct,M,R),ge(e,_-1,Dt+le-Ne,ve,Ct,M,R),me(le,M);break}case"eat":{ie(rt+Ze+1),ge(e,j,rt+1,q,Ze-1,M,R),ge(e,J,rt+1,q,Ze-1,M,R),Se(1,M);const Ne=(Math.sin(l*Math.PI*4)+1)/2,le=Y+Hn/2,Cn=Ni+qn/2,Ke=_+(le-_)*Ne,Ye=Dt+1+(Cn-(Dt+1))*Ne;ge(e,b,Dt+1,ve,Ct,M,R),ge(e,Ke,Ye,ve,Ct,M,R),ge(e,Ke,Ye-1,1,1,$e,R),me(1,M);break}case"procreate":{const X=(Math.sin(l*Math.PI*8)+1)/4,ee=(Math.sin(l*Math.PI*6)+1)*.5,Ne=1.5,le=Ne-ee;ie(rt+Ze+1),ge(e,j,rt+le,q,Ze-Ne,M,R),ge(e,J,rt+le,q,Ze-Ne,M,R),Se(le,M),ge(e,b,Dt+le,ve,Ct,M,R),ge(e,_,Dt+le,ve,Ct,M,R),me(le,M),e.globalAlpha=X,Se(le,"white"),e.globalAlpha=1;break}case"attacking":{const X=Math.sin(l*Math.PI)*1.5,ee=Math.abs(Math.sin(l*Math.PI));ie(rt+Ze+1),ge(e,j-X,rt+ee,q,Ze,M,R),ge(e,J+X*.5,rt+ee,q,Ze,M,R),Se(ee,M),ge(e,b,Dt+ee-2,ve,Ct,M,R),ge(e,_,Dt+ee-2.5,ve,Ct,M,R),me(ee,M);break}case"defending":{ie(rt+Ze+1),ge(e,j,rt+1,q,Ze-1,M,R),ge(e,J,rt+1,q,Ze-1,M,R),Se(1,M),ge(e,b-1,Dt+1-1,ve,Ct,M,R),ge(e,_+1,Dt+1-1,ve,Ct,M,R),me(1,M);break}case"stunned":case"dead":{const X=c==="dead",ee=X?Math.min(1,l):0,Ne=ee>.5?Pe:M,le=f==="male"?fe:_e,Cn=ee>.8?"transparent":W,Ke=E/2,Ye=P/2,Rn=2;ie(P-1),ge(e,Ke-q-Rn,Ye,q,Ze,Ne,R),ge(e,Ke+Rn,Ye,q,Ze,Ne,R),ge(e,Ke-ve-Rn,Ye-un+1,ve,Ct,Ne,R),ge(e,Ke+Rn,Ye-un+1,ve,Ct,Ne,R);const Lt=Ke-Me/2,en=Ye-un/2;f==="male"?(ee<.7&&ge(e,Lt,en+un-Gr,Me,Gr,le,R),ge(e,Lt,en,Me,un-Gr,Ne,R)):ee<.7?ge(e,Lt,en,Me,un,le,R):ge(e,Lt,en,Me,un,Ne,R);const Pn=Ke-Hn/2,Nn=Ye-un/2-qn+1;if(ge(e,Pn,Nn,Hn,qn,Ne,R),Cn!=="transparent"&&ge(e,Pn,Nn,Hn,rl,Cn,R),X&&ee>.6){const ii="#B0A890";for(let Li=0;Li<3;Li++)ge(e,Lt+1,en+Li*1+1,Me-2,.5,ii,R)}break}default:ge(e,0,0,E,P,"magenta",R);break}e.restore()}};function qC(e,n,r,o,a){const l=n.x,c=n.y-r-o/2;e.save(),e.fillStyle=a,e.strokeStyle=a,e.lineWidth=1.5,e.beginPath(),e.rect(l-o/2,c,o,o/2),e.fill(),e.beginPath(),e.moveTo(l-o/2,c),e.lineTo(l-o/4,c-o/3),e.lineTo(l-o/6,c),e.moveTo(l-o/6,c),e.lineTo(l,c-o/2),e.lineTo(l+o/6,c),e.moveTo(l+o/6,c),e.lineTo(l+o/4,c-o/3),e.lineTo(l+o/2,c),e.stroke(),e.restore()}function Cs(e,n,r,o,a,l=!1,c=!1,f=!1,h=!1){o<Vd&&(r=r*.75),Tf.render(e,n.x-r/2,n.y-r/2,r,r,0,"idle",a,o,[0,0],!1,0);let p,m;l?(p=tI,m=Jd):c?(p=nI,m=C0):f?(p=iI,m=_0):h&&(p=rI,m=E0),p&&m&&qC(e,n,r/2,p,m)}function JC(e,n,r,o,a,l){if(e.save(),o.length===0){e.restore();return}const c=o.length*a,f=4;let h;const p=c+(o.length-1)*f;o.length>1&&p>l?h=(l-c)/(o.length-1):h=f,o.length<=1&&(h=0);for(let m=0;m<o.length;m++){const{member:S,isPlayer:y,isHeir:E,isPartner:P,isParent:I}=o[m],R=n+m*(a+h)+a/2,F=r+a/4;Cs(e,{x:R,y:F},a,S.age,S.gender,y,E,P,I)}e.restore()}function e1(e,n,r,o,a){if(r.length===0)return;e.save();const l=Un,c=" 00",f=" 00";e.font=`${Kc}px "Press Start 2P", Arial`;const h=e.measureText(c).width,p=e.measureText(f).width,m=Un+ln+Un+ln+Un+Ei+h+Un/2+Ei+p,S=r.length*Wa+(r.length-1)*jp,y=a-S-Un;e.fillStyle=sI,e.fillRect(l,y,m,S);for(let E=0;E<r.length;E++){const P=r[E],I=y+E*(Wa+jp),R=I+Wa/2;P.isPlayerTribe&&(e.fillStyle=oI,e.fillRect(l,I,m,Wa));let F=l+Un;if(e.font=`${ln}px "Press Start 2P", Arial`,e.textBaseline="middle",e.textAlign="left",e.fillText(P.tribeBadge,F,R-ln/4),F+=ln+Un,!P.isPlayerTribe){const B=P.diplomacyStatus===Ft.Friendly?"🤝":"⚔️",H=`diplomacyButton_${P.leaderId}`,$={x:F,y:R-ln/2,width:ln,height:ln},se={id:H,action:Ue.ToggleDiplomacy,rect:$,text:"",icon:B,backgroundColor:"transparent",textColor:"white",currentWidth:ln,tooltip:`Toggle diplomacy with this tribe (Currently: ${P.diplomacyStatus})`,targetTribeId:P.leaderId};n.uiButtons.push(se),n.hoveredButtonId===H&&(e.fillStyle=P0,e.globalAlpha=.5,e.fillRect($.x,$.y,$.width,$.height),e.globalAlpha=1),e.font=`${ln*.8}px "Press Start 2P", Arial`,e.textBaseline="middle",e.textAlign="center",e.fillText(B,F+ln/2,R)}F+=ln+Un,P.adultCount>0&&(Cs(e,{x:F+Ei/2,y:R},Ei,25,"male"),F+=Ei/2,e.font=`${Kc}px "Press Start 2P", Arial`,e.fillStyle="white",e.textBaseline="middle",e.textAlign="left",e.fillText(` ${P.adultCount}`,F,R),F+=e.measureText(` ${P.adultCount}`).width+Un/2),P.childCount>0&&(Cs(e,{x:F+Ei/2,y:R},Ei,1,"female"),F+=Ei/2,e.font=`${Kc}px "Press Start 2P", Arial`,e.fillStyle="white",e.textBaseline="middle",e.textAlign="left",e.fillText(` ${P.childCount}`,F,R))}e.restore()}function t1(e,n,r,o,a){const l=O0,c=M0,f=n+o-l-c,h=r+c;e.save(),e.lineWidth=2,e.strokeStyle=a?zI:bI,e.beginPath();const p=5;e.moveTo(f+p,h+p),e.lineTo(f+l-p,h+l-p),e.moveTo(f+l-p,h+p),e.lineTo(f+p,h+l-p),e.stroke(),e.restore()}function n1(e,n,r,o){const{tutorialState:a,tutorial:l}=n;if(a.transitionState===Ot.INACTIVE)return;const c=l.steps[a.currentStepIndex];if(!c)return;e.save(),e.globalAlpha=a.transitionAlpha;const f=MI,h=FI,p=UI,m=`${Jc}px "Press Start 2P", Arial`,S=`${tm}px "Press Start 2P", Arial`,y=HI,E=tm*1.5;e.font=S;const P=c.text.split(" ");let I="";const R=[];for(let Pe=0;Pe<P.length;Pe++){const $e=I+P[Pe]+" ";e.measureText($e).width>f-h*2&&Pe>0?(R.push(I),I=P[Pe]+" "):I=$e}R.push(I);const F=h*2+Jc+h/2+R.length*E,B=(r-f)/2,H=o-F-160;e.fillStyle=LI,e.beginPath(),e.moveTo(B+p,H),e.lineTo(B+f-p,H),e.quadraticCurveTo(B+f,H,B+f,H+p),e.lineTo(B+f,H+F-p),e.quadraticCurveTo(B+f,H+F,B+f-p,H+F),e.lineTo(B+p,H+F),e.quadraticCurveTo(B,H+F,B,H+F-p),e.lineTo(B,H+p),e.quadraticCurveTo(B,H,B+p,H),e.closePath(),e.fill(),e.fillStyle=y,e.textAlign="center",e.textBaseline="top",e.font=m,e.fillText(c.title,B+f/2,H+h),e.font=S;let $=H+h+Jc+h/2;for(const Pe of R)e.fillText(Pe,B+f/2,$),$+=E;const se=n.hoveredButtonId==="tutorial-dismiss";t1(e,B,H,f,se),e.restore();const M=O0,W=M0,fe=B+f-M-W,_e=H+W;return{x:fe,y:_e,width:M,height:M}}function Sd(e,n,r){e.save();const o=xI,a={x:n.x-o,y:n.y-o,width:n.width+o*2,height:n.height+o*2};e.strokeStyle=D0,e.lineWidth=k0+Math.sin(r*nf)*1.5,e.setLineDash([8,8]),e.strokeRect(a.x,a.y,a.width,a.height),e.restore()}function i1(e,n){e.fillStyle="white",e.font='30px "Press Start 2P", Arial',e.textAlign="center",e.fillText("Game Over!",e.canvas.width/2,e.canvas.height/2-60),e.font='20px "Press Start 2P", Arial',e.fillText("Lineage Extinct.",e.canvas.width/2,e.canvas.height/2-20),e.fillText(`Cause: ${n.causeOfGameOver||"Unknown"}`,e.canvas.width/2,e.canvas.height/2+20)}const Bd=10,r1=3,Cm=Bd*.7;function o1(e,n,r,o,a){const{position:l,food:c,maxFood:f,ownerId:h,claimedUntil:p}=n;if(e.beginPath(),e.arc(l.x,l.y,Bd,0,Math.PI*2),e.fillStyle="#228B22",e.fill(),e.strokeStyle="#006400",e.lineWidth=1,e.stroke(),h&&p&&p>a&&o){const m=r.entities.entities.get(h);if(m){let S;m.id===o.id?S=Jd:Y0(o,m,r)?S=bT:S=R0,S&&(e.strokeStyle=S,e.lineWidth=1+Math.sin(a*2)*.5,e.beginPath(),e.arc(l.x,l.y,Bd+2,0,Math.PI*2),e.stroke())}}if(c.length>0){const m=Math.PI*2/Math.min(c.length,f);for(let S=0;S<c.length;S++){const y=S*m,E=l.x+Cm*Math.cos(y),P=l.y+Cm*Math.sin(y);e.beginPath(),e.arc(E,P,r1,0,Math.PI*2),e.fillStyle="#FF0000",e.fill()}}}const Rm=(e,n,r=70,o=50)=>{const a=e>>n&255;return`hsl(${Math.floor(a/255*360)}, ${r}%, ${o}%)`},s1=(e,n)=>{const r=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(!r)return e;const[o,a,l]=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])];return`hsl(${o}, ${a}%, ${Math.max(0,l-n)}%)`},ol=(e,n,r,o,a,l,c,f=!1)=>{e.save(),e.translate(n,r),e.rotate(l),e.fillStyle=f?s1(c,15):c,e.beginPath(),e.roundRect(-o/2,0,o,a,o/2),e.fill(),e.restore()},yd=(e,n)=>{const r=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/),o=75;if(!r)return`hsl(0, 0%, ${o}%)`;const[,a,l,c]=r.map(Number),f=l*(1-n),h=c+(o-c)*n;return`hsl(${a}, ${f}%, ${h}%)`},ov={name:"tribe-prey-2d",referenceImage:"swos.png",description:`A 2D prey asset for the Tribe game, featuring various stances and animations.

Prey is an animal which can be hunted by predators or humans in the Tribe game.

Preys look like small 4 leg mammals, with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Visual style

Prey characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like creatures from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in away that conveys their actions clearly.

Prey walks on all fours, unlike human (two legs).

Each prey is described by a unique gene code, which is a number that defines its appearance, size, and other characteristics. The gene code is used to generate the character's appearance, including body proportions, color, and other visual features. The gene code is a 32-bit integer, with each bit representing a specific characteristic of the character.

Prey should have should have visible body parts, such as head, torso, arms, and legs. The body parts should be connected and should not overlap. The character's body parts should be simple shapes, such as circles and rectangles, with solid colors and no gradients or patterns.

Preys are supposed to be sympathetic and friendly, so the character's face should have a friendly expression, with a smile and bright eyes. The character's eyes should be large and expressive, with a simple design.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the a character to give it a sense of depth.

IMPORTANT: The character is visible from the side, just like in Sensible Soccer.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 0 and 12, with 2 being the average age.
- gender:
  - 'male': Male prey are larger and more robust, with a more pronounced musculature.
  - 'female': Female prey are smaller and more agile, with a leaner build.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or a dust particles to indicate movement.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a grey skeleton over time. The character pose and body parts should not be animated in this stance, as the character is dead so it should not move.`,stances:["idle","walk","eat","dead","procreate"],render(e,n,r,o,a,l,c,f={gender:"male",age:2,direction:[1,0],isPregnant:!1,hungryLevel:0,geneCode:8405024}){e.save(),e.imageSmoothingEnabled=!1;const h=o*.15,p=n+o/2,m=r+a/2,S=o-h*2,y=a-h*2,{gender:E,age:P,direction:I,isPregnant:R,hungryLevel:F,geneCode:B}=f,H=.8+Math.min(P,10)/10*.4,$=E==="male"?1.05:.95,se=1-F/100*.3,M=S*.5*se*H*$;let W=y*.3*H*$;const fe=S*.15*H*$,_e=M*.2,Pe=y*.3,$e=Rm(B,0,30,50);let Fe=Rm(B,8,50,40);if(P>45){const ie=Math.min(1,(P-45)/15);Fe=yd(Fe,ie)}e.translate(p,m),I[0]<0&&e.scale(-1,1);const Ee=Math.sin(l*Math.PI*2),ue=Math.cos(l*Math.PI*2),Me=Pe+W*.2;if(c==="dead"){const ie=Math.min(l,1);e.translate(0,y*.2),e.rotate(Math.PI/2);const Se=yd(Fe,ie),me=yd($e,ie);e.globalAlpha=.5+ie*.5,e.strokeStyle=Se,e.lineWidth=_e*.5,e.beginPath(),e.moveTo(-M*.4,0),e.lineTo(M*.4,0),e.stroke();for(let X=-1;X<=1;X+=1)e.beginPath(),e.arc(0,0,W*.4,Math.PI*.4*X-Math.PI*.2,Math.PI*.4*X+Math.PI*.2),e.stroke();e.fillStyle=me,e.beginPath(),e.arc(M*.5,0,fe,0,Math.PI*2),e.fill(),e.fillStyle="black",e.beginPath(),e.arc(M*.55,0,fe*.3,0,Math.PI*2),e.fill(),e.restore();return}e.fillStyle="rgba(0, 0, 0, 0.1)",e.beginPath(),e.ellipse(0,Me,M*.7,M*.25,0,0,2*Math.PI),e.fill();let ve=0,q=0,x=0,Y=0,b=0,_=0;switch(c){case"idle":q=Ee*(y*.02),x=Ee*.05,Y=-Ee*.05,b=-Ee*.05,_=Ee*.05;break;case"walk":q=Math.abs(ue)*(y*-.04),x=Ee*.7,Y=-Ee*.7,b=-Ee*.7,_=Ee*.7;break;case"eat":ve=y*.1,q=y*.05,ve+=Ee*(y*.02);break;case"procreate":q=y*.05;const ie=(1-ue)*-S*.05;e.translate(ie,0),e.shadowColor="rgba(255, 182, 193, 0.9)",e.shadowBlur=10;break}R&&E==="female"&&(W*=1.6);const O=q,j=O-W*.2;ol(e,M*-.35,j,_e,Pe,b,Fe,!0),ol(e,M*.35,j,_e,Pe,_,Fe,!0),e.fillStyle=Fe,e.beginPath(),e.ellipse(0,O,M/2,W/2,0,0,2*Math.PI),e.fill();const J=M*.45,he=j+ve;e.fillStyle=$e,e.beginPath(),e.arc(J,he,fe,0,Math.PI*2),e.fill(),I[1]>=0&&(e.fillStyle="black",e.beginPath(),e.arc(J+fe*.3,he-fe*.2,fe*.15,0,Math.PI*2),e.fill()),ol(e,M*-.35,j,_e,Pe,x,Fe),ol(e,M*.35,j,_e,Pe,Y,Fe),e.restore()}};function a1(e,n){let[r,o,a]=e.match(/\d+/g).map(Number);return r=Math.max(0,r-n),o=Math.max(0,o-n),a=Math.max(0,a-n),`rgb(${r}, ${o}, ${a})`}function l1(e){const n=(e&16711680)>>16,r=(e&65280)>>8,o=e&255,a=`rgb(${n}, ${r}, ${o})`,l=a1(a,40),c=(e&255)%100+50,f=(e>>8&255)%100,h=(e>>16&255)%100,p=`rgb(${c}, ${f}, ${h})`,m=(e&8388608)!==0?"#00aaff":"#ffaa00";return{furColor:a,darkerFurColor:l,skinColor:p,eyeColor:m}}const sv={name:"tribe-predator-2d",referenceImage:"swos.png",description:`A 2D predator asset for the Tribe game, featuring various stances and animations.

Predator is an animal which can hunt and attack humans in the Tribe game. It is designed to be a threat to the player, adding an element of danger and challenge to the game world.

Predator look like bears or wolves, with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Visual style

Predator characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like creatures from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in away that conveys their actions clearly.

Predator walks on arms and legs, unlike human (two legs).

Each predator is described by a unique gene code, which is a number that defines its appearance, size, and other characteristics. The gene code is used to generate the character's appearance, including body proportions, color, and other visual features. The gene code is a 32-bit integer, with each bit representing a specific characteristic of the character.

Predator should have visible ears, eyes, and mouth with teeth. It must have a tail. Front legs should be shorter than back legs, and they should be positioned closer to the body. The character's body should be wider at the top and narrower at the bottom, with a slight curve to the back. The character's head should be larger than the body, with a pronounced jaw and sharp teeth.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the a character to give it a sense of depth.

IMPORTANT: The character is visible from the side, just like in Sensible Soccer.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 1 and 20, with 3 being the average age.
- gender:
  - 'male': Male predators are larger and more robust, with a more pronounced musculature.
  - 'female': Female predators are smaller and more agile, with a leaner build.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or a dust particles to indicate movement.
- 'attacking': The character performs an attack animation, with arms raised and a forward motion.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a grey skeleton over time. The character pose and body parts should not be animated in this stance, as the character is dead so it should not move.`,stances:["idle","walk","eat","dead","attacking","procreate"],render(e,n,r,o,a,l,c,f={gender:"male",age:20,direction:[1,0],isPregnant:!1,hungryLevel:0,geneCode:8405024}){const{gender:h,age:p,direction:m,isPregnant:S,hungryLevel:y,geneCode:E}=f;e.save();const P=o*.15,I=Math.max(1,Math.floor((o-P*2)/10)),R=m[0]<0;e.translate(n+o/2,r+a/2),R&&e.scale(-1,1);const F=l1(E),B=.8+Math.min(p,20)/20*.4,H=h==="male"?1.05:.95,$=1-y/100*.25,se=B*H*$,M=Math.max(0,Math.min(1,(p-15)/5));e.filter=`grayscale(${M})`;const W=F.furColor,fe=F.darkerFurColor,_e=F.eyeColor,Pe="#FFFFFF",$e="#c75c5c",Fe="#E0E0E0",Ee="#A0A0A0",ue=a/2-2*I,Me=Math.sin(l*Math.PI*2),ve=Math.abs(Me);if(e.fillStyle="rgba(0,0,0,0.15)",e.beginPath(),e.ellipse(0,ue,I*4,I,0,0,2*Math.PI),e.fill(),e.filter="none",c==="dead"){const Ke=Math.min(1,l*2);e.save(),e.translate(0,ue-I*3),e.rotate(-Math.PI/2);const Ye=(Rn,Lt,en,Pn,Nn=!1)=>{e.fillStyle=Nn?Ee:Fe,e.fillRect(Rn*I,Lt*I,en*I,Pn*I)};Ke<1&&(e.globalAlpha=1-Ke,e.fillStyle=W,e.beginPath(),e.ellipse(0,0,I*3,I*5,0,0,Math.PI*2),e.fill(),e.globalAlpha=1),Ke>0&&(e.globalAlpha=Ke,Ye(-1,-4,2,2),Ye(1,-3.5,1,1,!0),Ye(-.5,-2,1,5,!0),Ye(-2.5,-1,5,.5),Ye(-2.5,0,5,.5),Ye(-2.5,1,5,.5),Ye(-3,-2,-1,2,!0),Ye(3,-2,1,2),Ye(-3,2,-1,2,!0),Ye(3,2,1,2),e.globalAlpha=1),e.restore(),e.restore();return}e.fillStyle=W;let q=0,x=0,Y=0,b=[0,0,0,0];switch(c){case"idle":q=Me*I*.1;break;case"walk":const Ke=Math.sin(l*Math.PI*4);q=Math.abs(Ke)*-I*.5,b=[Ke*I,-Ke*I,-Ke*I,Ke*I];break;case"attacking":const Ye=Math.sin(l*Math.PI*4);x=I*2+Ye*I,Y=I*2,q=I;break;case"eat":Y=I*3+ve*I,q=I*1.5,e.fillStyle=$e,e.fillRect(-I,ue-I,I*2,I);break;case"procreate":q=Math.sin(l*Math.PI*8)*I*.3,e.fillStyle="rgba(139, 69, 19, 0.5)";for(let Lt=0;Lt<5;Lt++){const en=(Math.random()-.5)*I*8,Pn=ue+(Math.random()-.5)*I*2;ve>.5&&e.fillRect(en,Pn,I*.5,I*.5)}break}const _=I*3*se*(S?1.3:1),O=I*5*se,j=-O/1.5,J=ue-_-I*2.5+q;e.fillStyle=W,e.beginPath(),e.moveTo(j-I*.5,J+_*.5),e.quadraticCurveTo(j-I*3,J-I,j-I*2+Me*I,J+_+I),e.fill();const he=I*1.2*se,ie=I*3*se,Se=I*2.5*se,me=j+O*.8,X=j+O*.2;e.fillStyle=fe,e.fillRect(X,ue-Se,he,Se+b[2]),e.fillRect(me,ue-ie,he,ie+b[0]),e.fillStyle=W,e.beginPath(),e.moveTo(j,J+_),e.lineTo(j,J+I),e.quadraticCurveTo(j+O/2,J,j+O,J+I),e.lineTo(j+O,J+_),e.fill(),e.fillStyle=W,e.fillRect(X+I/2,ue-Se,he,Se+b[3]),e.fillRect(me+I/2,ue-ie,he,ie+b[1]);const ee=I*3.5*se,Ne=j+O-ee*.3+x,le=J-ee*.3+Y;e.fillStyle=W,e.beginPath(),e.arc(Ne,le,ee/2,0,Math.PI*2),e.fill(),e.beginPath(),e.ellipse(Ne+ee*.4,le+ee*.2,I*1.5,I,0,0,Math.PI*2),e.fill(),m[1]>=0&&(e.fillStyle=_e,e.fillRect(Ne+I*.5,le-I*.5,I*.5,I*.5),c==="attacking"&&(e.fillStyle=Pe,e.fillRect(Ne+ee*.5,le+ee*.4,I,I*.4))),e.fillStyle=fe,e.beginPath(),e.moveTo(Ne-ee*.4,le-ee*.3),e.lineTo(Ne,le-ee*.7),e.lineTo(Ne,le-ee*.2),e.fill(),e.restore()}};function u1(e,n){const{position:r,gender:o,age:a,decayProgress:l,food:c,radius:f,originalEntityType:h,geneCode:p}=n;if(e.save(),e.globalAlpha=1-l,h==="human"?Tf.render(e,r.x-f,r.y-f,f*2,f*2,l,"dead",o,a,[0,0],!1,0):h==="prey"?ov.render(e,r.x-f,r.y-f,f*2,f*2,l,"dead",{gender:o,age:a,direction:[0,0],isPregnant:!1,hungryLevel:0,geneCode:p||8405024}):h==="predator"&&sv.render(e,r.x-f,r.y-f,f*2,f*2,l,"dead",{gender:o,age:a,direction:[0,0],isPregnant:!1,hungryLevel:0,geneCode:p||8405024}),e.restore(),c.length>0){e.save(),e.font=`${eI}px Arial`,e.textAlign="center",e.textBaseline="middle";const m=pt*.9,S=Math.PI/f0*3;c.forEach((y,E)=>{const P=E*S,I=r.x+m*Math.cos(P)*Math.atan2(E,E),R=r.y+m*Math.sin(P)*Math.atan2(E,E),F=$0[y.type];e.fillText(F,I,R)}),e.restore()}}function Xr(e,n,r,o,a,l,c,f){e.save(),e.fillStyle=c,e.fillRect(n,r,o,a),e.fillStyle=f,e.fillRect(n,r,o*Math.max(0,l),a),e.restore()}function c1(e,n,r,o,a,l){if(e.save(),o.length===0){e.restore();return}const c=o.length*a;let f;c>l||c+(o.length-1)*4>l?f=(l-c)/(o.length-1):f=4,o.length===1&&(f=0);for(let h=0;h<o.length;h++){const p=$0[o[h].type];e.fillText(p,n+h*(a+f),r)}e.restore()}function d1(e,n,r,o,a){const l=n.autopilotControls.hoveredAutopilotAction;if(!l)return;let c,f=pt/2;const h=jl[l.action],p=Q0[l.action],m=`${h} ${p}`;if("targetEntityId"in l){const S=n.entities.entities.get(l.targetEntityId);S&&(c=S.position,f=S.radius)}else"position"in l&&(c=l.position);if(c){rv(e,c,f,ef,tf,2,r,o,a,n.mapDimensions),e.save(),e.font=`${to}px "Press Start 2P", Arial`,e.fillStyle="white",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=5;const{x:S,y}=Af(c,r,{width:o,height:a},n.mapDimensions),E=y-f-Hl-to/2;e.fillText(m,S,E),e.restore()}}function f1(e,n,r,o,a){e.save();const l=(Math.sin(a*nf)+1)/2,c=r+Hl+l*5;e.strokeStyle=ef,e.lineWidth=2,e.setLineDash(tf),e.beginPath(),e.arc(n.x,n.y,c,0,Math.PI*2),e.stroke(),e.setLineDash([]);const f=jl[o],h=Q0[o];if(f){e.font=`${to*1.5}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle";const p=n.y-c-25;e.fillText(f,n.x,p),e.font=`${to*.8}px "Press Start 2P", Arial`,e.fillText(h,n.x,p+25)}e.restore()}function h1(e,n,r){e.save();const o=30,a=70,l=3,c=a/l;for(let f=0;f<l;f++){const h=f*c,p=(r*o+h)%a,m=1-p/a;e.strokeStyle=`rgba(255, 215, 0, ${m*.7})`,e.lineWidth=1+(1-m)*2,e.beginPath(),e.arc(n.x,n.y,p,0,Math.PI*2),e.stroke()}e.restore()}function g1(e,n){const{activeAutopilotAction:r,behaviors:o}=n.autopilotControls,a=Tt(n);if(!a)return;const l=(c,f)=>{h1(c,f.position,n.time)};if(a.isCallingToFollow&&Sn(e,n.mapDimensions.width,n.mapDimensions.height,l,{position:a.position}),o.followLeader&&!r&&Sn(e,n.mapDimensions.width,n.mapDimensions.height,l,{position:a.position},70),r){let c,f=15;if("position"in r)c=r.position;else if("targetEntityId"in r){const h=n.entities.entities.get(r.targetEntityId);h&&(c=h.position,f=h.radius||30)}if(c&&r.action!==Ie.AutopilotFollowMe&&!a.isCallingToFollow){const h=(p,m)=>{f1(p,m.position,f,r.action,n.time)};Sn(e,n.mapDimensions.width,n.mapDimensions.height,h,{position:{...c}},c,f+30)}}}function Pm(e,n,r,o,a,l,c=!0){const f=n.split(" ");let h="";const p=[];for(let m=0;m<f.length;m++){const S=h+f[m]+" ";e.measureText(S).width>a&&m>0?(p.push(h),h=f[m]+" "):h=S}if(p.push(h),c)for(let m=0;m<p.length;m++)e.fillText(p[m],r,o+m*l);return p.length*l}function p1(e){return 1-Math.pow(1-e,3)}function m1(e,n,r,o){n.notificationButtonRects={dismiss:new Map,view:new Map};const a=n.notifications.filter(c=>!c.isDismissed);if(a.length===0)return;e.save();let l=o-ow;for(const c of a){const f=r-Xa-qi;e.font=`${ed}px "Press Start 2P", Arial`;const h=f+qi,p=Xa-qi*2,m=Pm(e,c.message,-9999,-9999,p,ed*1.2,!1),S=qi*2+m+Ln,y=l-S,E=Date.now()-c.creationTime,P=Math.min(E/rw,1),I=p1(P),R=o,F=R+(y-R)*I;e.fillStyle=qI,e.beginPath(),e.roundRect(f,F,Xa,S,ZI),e.fill(),e.fillStyle=JI,e.textBaseline="top",Pm(e,c.message,h,F+qi,p,ed*1.2,!0);const B=F+S-Ln-qi/2,H=f+Xa-Ln-qi/2,$={x:H,y:B,width:Ln,height:Ln};n.notificationButtonRects.dismiss.set(c.id,$);const se=n.hoveredButtonId===`notification-dismiss-${c.id}`;if(e.fillStyle=se?om:ew,e.font=`${Ln}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("✖",$.x+$.width/2,$.y+$.height/2),c.targetEntityIds||c.targetPosition||c.targetArea||c.targetRadius){const fe={x:H-Ln-rm,y:B,width:Ln,height:Ln};n.notificationButtonRects.view.set(c.id,fe);const _e=n.hoveredButtonId===`notification-view-${c.id}`;e.fillStyle=_e?om:tw,e.font=`${Ln*(_e?1.5:1.2)}px Arial`,e.fillText("👁️",fe.x+fe.width/2,fe.y+fe.height/2)}l-=S+rm}e.restore()}function If(e,n,r){if(!n.aiBehaviorTree||!n.aiBlackboard)return;const o=n.aiBlackboard.getNodeExecutionData(),a=n.aiBehaviorTree;e.save(),e.font=`${II}px Arial`,e.textAlign="left",e.textBaseline="top";const l=y=>{switch(y){case T.SUCCESS:return EI;case T.FAILURE:return _I;case T.RUNNING:return CI;case T.NOT_EVALUATED:case null:default:return RI}},c=y=>{if(!y.name||!o.has(y.name))return{width:0,height:0};let E=0,P=0;const I=o.get(y.name),R=` ${y.name}`+(I!=null&&I.debugInfo?`: ${I.debugInfo}`:""),F=e.measureText(R).width,B=(y.depth??0)*qp+8+F+em+Ko+20;if(E=Math.max(E,B),P+=qc,y.children)for(const H of y.children){const $=c(H);E=Math.max(E,$.width),P+=$.height}else if(y.child){const H=c(y.child);E=Math.max(E,H.width),P+=H.height}return{width:E,height:P}},f=(y,E,P,I)=>{if(!y.name||!o.has(y.name))return E;let R=E;const F=o.get(y.name),B=P+2+(y.depth??0)*qp;let H=T.NOT_EVALUATED,$=Jp,se="";if(F){H=F.status,se=F.debugInfo;const fe=NI/jt*Yt,_e=r-F.lastExecuted,Pe=Math.max(0,1-_e/fe);$=Bw(Jp,PI,Pe),_e>vs&&(H=T.NOT_EVALUATED)}const M=l(H);e.fillStyle=M,e.fillText("●",B,R),e.fillStyle=$;const W=` ${y.name}`+(se?`: ${se}`:"");if(e.fillText(W,B+8,R),F&&F.executionHistory.length>0){const{executionHistory:fe}=F,_e=N0/jt*Yt,Pe=r,$e=Pe-_e,Fe=P+I-Ko-em;let Ee=Fe;const ue=R+(qc-ja)/2,Me=fe.filter(j=>j.time<$e);let ve=Me.length>0?Me[Me.length-1].status:null,q=$e;const x=fe.filter(j=>j.time>=$e&&j.time<=Pe),Y=Ko/_e;e.fillStyle="rgba(255, 255, 255, 0.1)",e.fillRect(Fe,ue,Ko,ja);for(const j of x){const he=(j.time-q)*Y;he>0&&(e.fillStyle=l(ve),e.fillRect(Ee,ue,he,ja),Ee+=he),ve=j.status,q=j.time}r-q>vs&&(ve=T.NOT_EVALUATED);const _=(Pe-q)*Y;e.fillStyle=l(ve);const O=Fe+Ko-Ee;e.fillRect(Ee,ue,Math.min(_,O),ja)}if(R+=qc,y.children)for(const fe of y.children)R=f(fe,R,P,I);else y.child&&(R=f(y.child,R,P,I));return R},{width:h,height:p}=c(a);if(p===0){e.restore();return}const m=n.position.x+AI,S=n.position.y+TI-p/2;e.fillStyle=wI,e.fillRect(m,S,h,p+4),f(a,S+2,m,h),e.restore()}const v1={moving:"walk",gathering:"gathering",eating:"eat",feeding:"eat",procreating:"procreate",idle:"idle",attacking:"attacking",planting:"gathering"};function S1(e,n){var f;const{radius:r,position:o,activeAction:a="idle"}=n,l=((f=n.stateMachine)==null?void 0:f[0])||"N/A",c=n.isAdult?pt+20:pt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${a}`,o.x,o.y-c),e.fillText(`State: ${l}`,o.x,o.y-c+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-c+20),e.fillText(`Cooldown: ${n.attackCooldown||"N/A"}`,o.x,o.y-c+30),e.fillText(`Tribe: ${n.leaderId||"N/A"}`,o.x,o.y-c+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(255, 0, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function y1(e,n,r,o,a){e.save(),e.font=`${Md}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(r,n.x,n.y-(o?pt:oo)-Md-a),e.restore()}function A1(e,n,r,o,a){const l=n.x,c=n.y-r-o/2;e.save(),e.fillStyle=a,e.strokeStyle=a,e.lineWidth=1.5,e.beginPath(),e.rect(l-o/2,c,o,o/2),e.fill(),e.beginPath(),e.moveTo(l-o/2,c),e.lineTo(l-o/4,c-o/3),e.lineTo(l-o/6,c),e.moveTo(l-o/6,c),e.lineTo(l,c-o/2),e.lineTo(l+o/6,c),e.moveTo(l+o/6,c),e.lineTo(l+o/4,c-o/3),e.lineTo(l+o/2,c),e.stroke(),e.restore()}function T1(e,n,r){var f;const{position:o,radius:a}=n,l=o.x-Qc/2,c=o.y-a-aI;if(((f=n.stateMachine)==null?void 0:f[0])===Ui){const h=n.stateMachine[1],p=r-h.attackStartTime,m=Math.min(p/v0,1);Xr(e,l,c,Qc,Vp,m,Yr,lI)}else if(n.attackCooldown&&n.attackCooldown>0){const h=1-n.attackCooldown/Ul;Xr(e,l,c,Qc,Vp,h,Yr,uI)}}function I1(e,n,r){const a="➡️";e.save(),e.font="15px Arial",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=3,e.fillText(a,n.x,n.y-r),e.restore()}function w1(e,n,r=!1,o=!1,a=!1,l=!1,c=!1,f=!1,h=!1,p=!1,m,S){const{position:y,activeAction:E="idle"}=n,P=n.isAdult?pt:pt*.6,I=v1[E]||"idle";Tf.render(e,y.x-P,y.y-P,P*2,P*2,n.animationProgress||0,I,n.gender,n.age,[n.direction.x,n.direction.y],n.isPregnant??!1,n.hunger),f&&(e.save(),e.strokeStyle=R0,e.lineWidth=2,e.beginPath(),e.arc(y.x,y.y,P+3,0,2*Math.PI),e.stroke(),e.restore());let R,F;if(c?(R=$T,F=C0):r?(R=zT,F=Jd):a?(R=WT,F=xT):o?(R=YT,F=E0):l&&(R=jT,F=_0),R&&F&&A1(e,y,P,R,F),n.tribeBadge&&y1(e,y,n.tribeBadge,n.isAdult??!1,R??0),h){let H=(n.isAdult?pt:oo)+5;R&&(H+=R),n.tribeBadge&&(H+=Md),I1(e,y,H)}const B=p&&(S===void 0||n.id===S);B&&n.aiBlackboard&&If(e,n,m),T1(e,n,m),B&&S1(e,n)}const E1={grazing:"eat",moving:"walk",procreating:"procreate",feeding:"eat",idle:"idle"};function _1(e,n){var f;const{radius:r,position:o,activeAction:a="idle"}=n,l=((f=n.stateMachine)==null?void 0:f[0])||"N/A",c=n.isAdult?pt+20:pt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${a}`,o.x,o.y-c),e.fillText(`State: ${l}`,o.x,o.y-c+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-c+20),e.fillText(`Hunger: ${Math.round(n.hunger)}`,o.x,o.y-c+30),e.fillText(`Age: ${Math.round(n.age)}`,o.x,o.y-c+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(0, 255, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function C1(e,n,r=!1,o=0,a){var m,S;const{position:l,activeAction:c="idle"}=n,f=n.isAdult?n.radius:n.radius*.6,h=E1[c]||"idle";if(ov.render(e,l.x-f,l.y-f,f*2,f*2,n.animationProgress||0,h,{gender:n.gender,age:n.age,direction:[((m=n.direction)==null?void 0:m.x)||1,((S=n.direction)==null?void 0:S.y)||0],isPregnant:n.isPregnant??!1,hungryLevel:n.hunger,geneCode:n.geneCode}),n.hitpoints<n.maxHitpoints){const y=f*1.5,E=3,P=l.x-y/2,I=l.y-f-8;e.fillStyle="#555",e.fillRect(P,I,y,E);const R=n.hitpoints/n.maxHitpoints;e.fillStyle=R>.5?"#4CAF50":R>.25?"#FFC107":"#F44336",e.fillRect(P,I,y*R,E)}const p=r&&(a===void 0||n.id===a);p&&n.aiBlackboard&&If(e,n,o),p&&_1(e,n)}const R1={attacking:"attacking",eating:"eat",moving:"walk",procreating:"procreate",feeding:"eat",idle:"idle"};function P1(e,n){var f;const{radius:r,position:o,activeAction:a="idle"}=n,l=((f=n.stateMachine)==null?void 0:f[0])||"N/A",c=n.isAdult?pt+20:pt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${a}`,o.x,o.y-c),e.fillText(`State: ${l}`,o.x,o.y-c+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-c+20),e.fillText(`Hunger: ${Math.round(n.hunger)}`,o.x,o.y-c+30),e.fillText(`Age: ${Math.round(n.age)}`,o.x,o.y-c+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(255, 0, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function N1(e,n,r=!1,o=0,a){var m,S;const{position:l,activeAction:c="idle"}=n,f=n.isAdult?n.radius:n.radius*.6,h=R1[c]||"idle";if(sv.render(e,l.x-f,l.y-f,f*2,f*2,n.animationProgress||0,h,{gender:n.gender,age:n.age,direction:[((m=n.direction)==null?void 0:m.x)||1,((S=n.direction)==null?void 0:S.y)||0],isPregnant:n.isPregnant??!1,hungryLevel:n.hunger,geneCode:n.geneCode}),n.hitpoints<n.maxHitpoints){const y=f*1.5,E=3,P=l.x-y/2,I=l.y-f-8;e.fillStyle="#555",e.fillRect(P,I,y,E);const R=n.hitpoints/n.maxHitpoints;e.fillStyle=R>.5?"#4CAF50":R>.25?"#FFC107":"#F44336",e.fillRect(P,I,y*R,E)}(n.attackCooldown&&n.attackCooldown>0||n.huntCooldown&&n.huntCooldown>0)&&(e.strokeStyle="#FF8C00",e.lineWidth=3,e.beginPath(),e.arc(l.x,l.y,f+3,0,2*Math.PI),e.stroke());const p=r&&(a===void 0||n.id===a);p&&n.aiBlackboard&&If(e,n,o),p&&P1(e,n)}const av=15;function Nm(e,n,r,o,a=1.5){const l=r-n.startTime,c=Math.min(l/n.duration,1),f=1-c,p=1+Math.sin(c*Math.PI*2)*(a-1),m=av*p;e.save(),e.globalAlpha=f,e.beginPath(),e.arc(n.position.x,n.position.y,Math.max(0,m),0,Math.PI*2),e.fillStyle=o,e.fill(),e.restore()}function xr(e,n,r,o,a=2){const l=r-n.startTime,c=Math.min(l/n.duration,1),f=1-c,h=av*2*c;e.save(),e.globalAlpha=f,e.beginPath(),e.arc(n.position.x,n.position.y,h,0,Math.PI*2),e.strokeStyle=o,e.lineWidth=a,e.stroke(),e.restore()}function _i(e,n,r,o){const a=r-n.startTime,l=Math.min(a/n.duration,1),c=1-l,f=-20*l;e.save(),e.globalAlpha=c,e.font="20px Arial",e.textAlign="center",e.fillText(o,n.position.x,n.position.y+f),e.restore()}function D1(e,n,r){switch(n.type){case oe.Hunger:Nm(e,n,r,"rgba(255, 165, 0, 0.7)",1);break;case oe.Procreation:_i(e,n,r,"❤️");break;case oe.Pregnant:Nm(e,n,r,"rgba(255, 105, 180, 0.7)",1.2);break;case oe.TargetAcquired:xr(e,n,r,"rgba(255, 0, 0, 0.8)",3);break;case oe.Attack:_i(e,n,r,"⚔️");break;case oe.Partnered:_i(e,n,r,"🤝");break;case oe.BushClaimed:xr(e,n,r,"rgba(0, 255, 0, 0.7)",2);break;case oe.BushClaimLost:xr(e,n,r,"rgba(128, 128, 128, 0.7)",2);break;case oe.Eating:_i(e,n,r,"🍖");break;case oe.ChildFed:_i(e,n,r,"🍼");break;case oe.AttackDeflected:_i(e,n,r,"🛡️");break;case oe.AttackResisted:_i(e,n,r,"💪");break;case oe.Hit:_i(e,n,r,"💥");break;case oe.SeizeBuildup:xr(e,n,r,"rgba(255, 215, 0, 0.8)",4);break;case oe.Seize:xr(e,n,r,"rgba(148, 0, 211, 0.8)",4);break;case oe.CallToAttack:xr(e,n,r,"rgba(255, 255, 0, 0.8)",4);break}}function Dm(e,n,r,o,a,l,c){e.save();const{position:f}=n;e.strokeStyle=o,e.lineWidth=a+Math.sin(c*l)*(a/2),e.setLineDash([8,8]),e.beginPath(),e.arc(f.x,f.y,r,0,2*Math.PI),e.stroke(),e.restore()}function k1(e,n,r){const o=Tt(n),a=o?At(n,o):[],l=ni(a),{width:c,height:f}=n.mapDimensions;Array.from(n.entities.entities.values()).sort((m,S)=>m.position.y-S.position.y||m.id-S.id).forEach(m=>{var S,y;if(m.type==="berryBush")Sn(e,c,f,o1,m,n,o,n.time);else if(m.type==="human"){const E=m,P=E.id===(o==null?void 0:o.id),I=a.some(M=>M.id===E.id),R=E.id===(l==null?void 0:l.id),F=o&&(E.id===o.motherId||E.id===o.fatherId),B=o&&(((S=E.partnerIds)==null?void 0:S.includes(o.id))||((y=o.partnerIds)==null?void 0:y.includes(E.id))),H=(o==null?void 0:o.attackTargetId)===E.id,$=E.leaderId?n.entities.entities.get(E.leaderId):void 0,se=o?E.leaderId===o.id&&E.activeAction==="moving"&&E.target===E.leaderId&&($==null?void 0:$.isCallingToFollow):!1;Sn(e,c,f,w1,E,P,F,I,B,R,H,se,r,n.time,n.debugCharacterId)}else m.type==="corpse"?Sn(e,c,f,u1,m):m.type==="prey"?Sn(e,c,f,C1,m,r,n.time,n.debugCharacterId):m.type==="predator"&&Sn(e,c,f,N1,m,r,n.time,n.debugCharacterId)}),n.visualEffects.forEach(m=>{Sn(e,c,f,D1,m,n.time)});const p=n.notifications.filter(m=>!m.isDismissed);for(const m of p)if(m.highlightedEntityIds&&m.renderHighlights)for(const S of m.highlightedEntityIds){const y=n.entities.entities.get(S);y&&Sn(e,c,f,Dm,y,sw,aw,uw,lw,n.time)}if(n.tutorialState.isActive&&n.tutorialState.highlightedEntityIds.size>0)for(const m of n.tutorialState.highlightedEntityIds){const S=n.entities.entities.get(m);S&&Sn(e,c,f,Dm,S,GI,D0,k0,nf,n.time)}}function O1(e,n,r,o,a,l){let c=null,f=null;e.textAlign="left";let h=$t+Ri;const m=n.time/(Yt/jt)/Fl%1,S=Qo[zr.Time],y=25,E=$t+y;e.fillText(S,$t,h+Zt/2+Ri/3),Xr(e,E,h,wi,Zt,m,Yr,JT),h+=Zt+Zn;const P=h+Qi/2,I=h+(Qi-Zt)/2,R=5;Cs(e,{x:$t*2,y:P},Qi,5,r.gender,!1,!1,!1);const F=$t+Qi+R,B=wi+y-(Qi+R)*2;Xr(e,F,I,B,Zt,Math.floor(r.age)/ps,Yr,qT),Cs(e,{x:F+B+R+Qi/2,y:P},Qi,ps,r.gender,!1,!1,!1),h+=Zt+Zn*2;const H=[],$=new Set;if(H.push({member:r,isPlayer:!0,isHeir:!1,isPartner:!1,isParent:!1}),$.add(r.id),o&&!$.has(o.id)&&(H.push({member:o,isPlayer:!1,isHeir:!0,isPartner:!1,isParent:!1}),$.add(o.id)),a.forEach(ue=>{$.has(ue.id)||(H.push({member:ue,isPlayer:!1,isHeir:!1,isPartner:!0,isParent:!1}),$.add(ue.id))}),l.forEach(ue=>{$.has(ue.id)||(H.push({member:ue,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!1}),$.add(ue.id))}),r.motherId&&!$.has(r.motherId)){const ue=n.entities.entities.get(r.motherId);ue&&(H.push({member:ue,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!0}),$.add(ue.id))}if(r.fatherId&&!$.has(r.fatherId)){const ue=n.entities.entities.get(r.fatherId);ue&&(H.push({member:ue,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!0}),$.add(ue.id))}const se=Qo[zr.Family],M=10,W=$t+Ri+M,fe=wi+y-(Ri+M),_e=h+$a/2;e.font=`${Ri}px "Press Start 2P", Arial`,e.textBaseline="middle",e.fillText(se,$t,_e);const Pe=h+$a/2;JC(e,W,Pe,H,$a,fe),h+=$a+Zn,e.textBaseline="alphabetic";const $e=Qo[zr.Hitpoints];e.fillText($e,$t,h+Zt/2+Ri/3),Xr(e,E,h,wi,Zt,r.hitpoints/r.maxHitpoints,Yr,ZT),h+=Zt+Zn;const Fe=Qo[zr.Hunger];e.fillText(Fe,$t,h+Zt/2+Ri/3),Xr(e,E,h,wi,Zt,(Jt-r.hunger)/Jt,Yr,QT),c={x:$t,y:h-Zn/2,width:wi+y,height:Zt+Zn},h+=Zt+Zn,e.textBaseline="middle";const Ee=Qo[zr.Food];return e.fillText(Ee,$t,h+za/2),c1(e,E,h+za/2,r.food,za,wi),f={x:$t,y:h-Zn/5,width:wi+y,height:za+Zn},e.textBaseline="alphabetic",{hungerBarRect:c,foodBarRect:f}}function Cl(e,n,r,o,a,l=!1){var f;if(e.save(),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="#2c5234",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.translate(e.canvas.width/2-o.x,e.canvas.height/2-o.y),!l&&n.gameOver){e.restore(),i1(e,n);return}k1(e,n,r);const c=n.notifications.filter(h=>!h.isDismissed);for(const h of c){const p=(Math.sin(n.time*iw)+1)/2;e.globalAlpha=p*.5+.25,e.fillStyle=nw,h.targetArea&&e.fillRect(h.targetArea.x,h.targetArea.y,h.targetArea.width,h.targetArea.height),h.targetRadius&&(e.beginPath(),e.arc(h.targetRadius.x,h.targetRadius.y,h.targetRadius.radius,0,Math.PI*2),e.fill())}if(e.globalAlpha=1,g1(e,n),e.restore(),!l){e.fillStyle=VT,e.font=`${Ri}px "Press Start 2P", Arial`,e.shadowColor=XT,e.shadowBlur=KT,n.uiButtons=[];const h=Tt(n);let p=null,m=null;if(h){const E=At(n,h),P=ni(E),I=((f=h.partnerIds)==null?void 0:f.map(F=>n.entities.entities.get(F)).filter(F=>F!==void 0))||[],R=O1(e,n,h,P,I,E);p=R.hungerBarRect,m=R.foodBarRect}const S=V0(n,h==null?void 0:h.leaderId);e1(e,n,S,e.canvas.width,e.canvas.height);const{commandButtonsRect:y}=bC(e,n,e.canvas.width);if(e.shadowColor="transparent",e.shadowBlur=0,h&&(d1(e,n,o,e.canvas.width,e.canvas.height),a.length>0&&YC(e,a,h,o,e.canvas.width,e.canvas.height,n.mapDimensions)),n.tutorialState.activeUIHighlights.size>0){const{activeUIHighlights:E}=n.tutorialState;E.has(lr.HUNGER_BAR)&&p&&Sd(e,p,n.time),E.has(lr.FOOD_BAR)&&m&&Sd(e,m,n.time),E.has(lr.COMMAND_BUTTONS)&&y&&Sd(e,y,n.time)}if(n.tutorialState.isActive){const E=n1(e,n,e.canvas.width,e.canvas.height);E&&n.uiButtons.push({id:"tutorial-dismiss",action:Ue.DismissTutorial,rect:E,text:"",currentWidth:E.width,backgroundColor:"transparent",textColor:"transparent"})}m1(e,n,e.canvas.width,e.canvas.height),n.isPaused&&zC(e)}}const M1=zn.div`
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
`,F1=zn.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #2c5234;
`,U1=zn.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  z-index: 1;
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0.7) 100%);
`,L1=zn.h1`
  font-family: 'Press Start 2P', cursive;
  font-size: 4rem;
  color: #fff;
  text-shadow: 4px 4px 0px #ff0000;
  margin-bottom: 2rem;
`,H1=zn.button`
  font-family: 'Press Start 2P', cursive;
  font-size: 1.5rem;
  padding: 1rem 2rem;
  color: #fff;
  background-color: #ff0000;
  border: 2px solid #fff;
  box-shadow: 4px 4px 0px #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;

  &:hover {
    background-color: #fff;
    color: #ff0000;
    box-shadow: 4px 4px 0px #ff0000;
  }
`,Ad="intro-soundtrack",km=()=>{const{setAppState:e}=Rl(),n=De.useRef(null),r=De.useRef(null),o=De.useRef(lC()),a=De.useRef(),l=De.useRef(o.current.viewportCenter),c=De.useRef();De.useEffect(()=>(df(Ae.SoundTrack1,{loop:!0,trackId:Ad}),()=>{hm(Ad,2)}),[]),De.useEffect(()=>{const m=n.current;if(!m)return;r.current=m.getContext("2d");const S=()=>{m&&r.current&&(m.width=window.innerWidth,m.height=window.innerHeight,Cl(r.current,o.current,!1,l.current,[],!0))};return S(),window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]),De.useEffect(()=>{const m=()=>{const y=$w(o.current);if(y.length>0){const E=Math.floor(Math.random()*y.length);c.current=y[E].id}};m();const S=setInterval(m,jI);return()=>clearInterval(S)},[]);const[f,h]=l0(m=>{if(!r.current)return;if(a.current===void 0){a.current=m;return}const S=Math.min((m-a.current)/1e3,1);o.current=Kl(o.current,S);const y=c.current?o.current.entities.entities.get(c.current):void 0;if(y){const{mapDimensions:E}=o.current,{width:P,height:I}=E;let R={...y.position};const F=R.x-l.current.x;Math.abs(F)>P/2&&(F>0?R.x-=P:R.x+=P);const B=R.y-l.current.y;Math.abs(B)>I/2&&(B>0?R.y-=I:R.y+=I);let H=of(l.current,R,jd*S);H={x:(H.x%P+P)%P,y:(H.y%I+I)%I},l.current=H}Cl(r.current,o.current,!1,l.current,[],!0),a.current=m});De.useEffect(()=>(h(),f),[h,f]);const p=()=>{hm(Ad,2),e("game")};return Le.jsxs(M1,{children:[Le.jsx(F1,{ref:n}),Le.jsxs(U1,{children:[Le.jsx(L1,{children:"Tribe"}),Le.jsx(H1,{onClick:p,children:"Start Game"})]})]})};function B1(){console.log("Tribe game initialized with detailed 2D world state.");const e=aC();return e.ecosystem={preyGestationPeriod:Gl,preyProcreationCooldown:xl,predatorGestationPeriod:bl,predatorProcreationCooldown:zl,preyHungerIncreasePerHour:$l,predatorHungerIncreasePerHour:Wl,berryBushSpreadChance:Yl},e}const G1=({canvasRef:e,ctxRef:n,gameStateRef:r,isDebugOnRef:o,viewportCenterRef:a,playerActionHintsRef:l})=>(De.useEffect(()=>{const c=e.current;if(!c)return;n.current=c.getContext("2d");const f=()=>{c&&n.current&&r.current&&(c.width=window.innerWidth,c.height=window.innerHeight,Cl(n.current,r.current,o.current===!0,a.current,l.current,!1))};return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),Le.jsx("canvas",{ref:e,style:{display:"block",background:"#2c5234"}})),x1=(e,n,r)=>{let o;const a=Ww(e,r);if(a)if(n.isAdult&&a.type==="berryBush"&&a.food.length>0)o={action:Ie.AutopilotGather,targetEntityId:a.id};else if(n.isAdult&&a.type==="corpse"&&a.food.length>0)o={action:Ie.AutopilotGather,targetEntityId:a.id};else if(a.type==="human"){const l=a;n.isAdult&&ao(n,l,r)?o={action:Ie.AutopilotAttack,targetEntityId:l.id}:dr(n,l,r)?o={action:Ie.AutopilotProcreate,targetEntityId:l.id}:n.food.length>0&&!l.isAdult&&(l.motherId===n.id||l.fatherId===n.id)&&(o={action:Ie.AutopilotFeedChild,targetEntityId:l.id})}else a.type==="prey"?o={action:Ie.AutopilotAttack,targetEntityId:a.id}:a.type==="predator"&&(o={action:Ie.AutopilotAttack,targetEntityId:a.id});else r.autopilotControls.isManuallyPlanting&&n.food.filter(l=>l.type===ti.Berry).length>=ms&&lf(e,r,1,Ll,n.id)?o={action:Ie.AutopilotPlant,position:e}:o={action:Ie.AutopilotMove,position:e};return o},b1=(e,n)=>{if(e.isPaused||!Tt(e))return;const o=e.autopilotControls.hoveredAutopilotAction;e.autopilotControls.activeAutopilotAction=void 0,o?(e.autopilotControls.activeAutopilotAction=o,(o.action===Ie.AutopilotMove||o.action===Ie.AutopilotGather)&&(e.hasPlayerMovedEver=!0),o.action===Ie.AutopilotPlant&&(e.hasPlayerPlantedBush=!0)):e.autopilotControls.activeAutopilotAction={action:Ie.AutopilotMove,position:n},e.autopilotControls.isManuallyMoving=!1,e.autopilotControls.isManuallyPlanting=!1},z1=(e,n,r)=>{var l,c;let o=!0,a=n;switch(e){case"m":n.isMuted=!n.isMuted,us(n.masterVolume,n.isMuted);break;case"=":case"+":const f=Math.min(1,n.masterVolume+.1);n.masterVolume=parseFloat(f.toFixed(1)),us(n.masterVolume,n.isMuted);break;case"-":const h=Math.max(0,n.masterVolume-.1);n.masterVolume=parseFloat(h.toFixed(1)),us(n.masterVolume,n.isMuted);break;case"t":a=Kl(n,T0);break;case" ":case"p":n.isPaused=!n.isPaused;break;case"§":case"`":r.current=!r.current,r.current?a.debugCharacterId=((l=Tt(a))==null?void 0:l.id)??((c=Array.from(a.entities.entities.values()).find(m=>m.type==="human"||m.type==="prey"||m.type==="predator"))==null?void 0:c.id):a.debugCharacterId=void 0;break;case"tab":r.current=!0;const p=Array.from(a.entities.entities.values()).filter(m=>m.type==="human"||m.type==="prey"||m.type==="predator");if(p.length>0){const m=p.sort((P,I)=>{if(P.type==="human"&&P.isPlayer)return-1;if(I.type==="human"&&I.isPlayer)return 1;if(P.type!==I.type){const R={human:0,prey:1,predator:2},F=R[P.type]??999,B=R[I.type]??999;return F-B}return P.id-I.id}),S=a.debugCharacterId,E=((S?m.findIndex(P=>P.id===S):-1)+1)%m.length;a.debugCharacterId=m[E].id}else a.debugCharacterId=void 0;break;default:o=!1;break}return{newState:a,handled:o}},$1=(e,n,r,o,a)=>{const l={gameState:r};if(n&&["e","b","r","h"].includes(e)&&r.hasPlayerEnabledAutopilot++,e==="e"){if(n){r.autopilotControls.behaviors.gathering=!r.autopilotControls.behaviors.gathering;return}const c=Re(o,r,"berryBush",gt,p=>p.food.length>0&&o.food.length<o.maxFood),f=Re(o,r,"corpse",gt,p=>p.food.length>0&&o.food.length<o.maxFood);let h=null;c&&f?h=V(o.position,c.position,r.mapDimensions.width,r.mapDimensions.height)<=V(o.position,f.position,r.mapDimensions.width,r.mapDimensions.height)?c:f:h=c||f,h&&(o.activeAction="gathering",ke(l,Ae.Gather,o.position))}else if(e==="r"){if(n){r.autopilotControls.behaviors.procreation=!r.autopilotControls.behaviors.procreation;return}Re(o,r,"human",gt,f=>dr(o,f,r))&&(o.activeAction="procreating",ke(l,Ae.Procreate,o.position))}else if(e==="f")o.food.length>0&&(o.activeAction="eating",ke(l,Ae.Eat,o.position));else if(e==="h"){if(n){r.autopilotControls.behaviors.feedChildren=!r.autopilotControls.behaviors.feedChildren;return}const c=a.find(f=>f.type===Ie.FeedChild);c&&c.targetEntity&&(o.activeAction="feeding",o.target=c.targetEntity.id)}else if(e==="arrowup"||e==="w")o.direction.y=-1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowdown"||e==="s")o.direction.y=1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowleft"||e==="a")o.direction.x=-1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowright"||e==="d")o.direction.x=1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="q"){if(n){r.autopilotControls.behaviors.attack=!r.autopilotControls.behaviors.attack;return}const c=Re(o,r,"human",xn,f=>ao(o,f,r))??Re(o,r,"predator",xn)??Re(o,r,"prey",xn);c&&(o.activeAction="attacking",o.attackTargetId=c.id)}else if(e==="b"){if(n){r.autopilotControls.behaviors.planting=!r.autopilotControls.behaviors.planting;return}if(a.find(f=>f.type===Ie.Plant)){const f=lf(o.position,r,50,Dd);f&&(o.activeAction="planting",o.target=f,r.hasPlayerPlantedBush=!0)}}else e==="v"?(o.isCallingToAttack=!0,o.callToAttackEndTime=r.time+eo,we(r,oe.CallToAttack,o.position,eo),ke(l,Ae.CallToAttack,o.position)):e==="c"?(o.isCallingToFollow=!0,o.callToFollowEndTime=r.time+Ss,we(r,oe.CallToFollow,o.position,Ss),ke(l,Ae.CallToFollow,o.position)):e==="k"&&hf(o,r)},W1=(e,n,r,o)=>{e==="arrowup"||e==="w"||e==="arrowdown"||e==="s"?n.direction.y=0:(e==="arrowleft"||e==="a"||e==="arrowright"||e==="d")&&(n.direction.x=0),!o.current.has("arrowup")&&!o.current.has("arrowdown")&&!o.current.has("arrowleft")&&!o.current.has("arrowright")&&!o.current.has("w")&&!o.current.has("a")&&!o.current.has("s")&&!o.current.has("d")&&(n.activeAction==="moving"&&(n.activeAction="idle"),r.autopilotControls.isManuallyMoving=!1),!o.current.has("e")&&n.activeAction==="gathering"&&(n.activeAction="idle"),!o.current.has("f")&&n.activeAction==="eating"&&(n.activeAction="idle"),!o.current.has("r")&&n.activeAction==="procreating"&&(n.activeAction="idle"),!o.current.has("h")&&n.activeAction==="feeding"&&(n.activeAction="idle")},Y1=(e,n,r)=>{let a=Tt(e);if(e.debugCharacterId){const l=e.entities.entities.get(e.debugCharacterId);l&&"position"in l&&(a=l)}if(a){const{mapDimensions:l}=e,{width:c,height:f}=l;let h={...a.position};const p=h.x-n.x;Math.abs(p)>c/2&&(p>0?h.x-=c:h.x+=c);const m=h.y-n.y;Math.abs(m)>f/2&&(m>0?h.y-=f:h.y+=f);let S=of(n,h,jd*r);return S={x:(S.x%c+c)%c,y:(S.y%f+f)%f},S}return e.viewportCenter};function j1(e,n){const{width:r,height:o}=e.mapDimensions;e.viewportCenter={x:(n.x%r+r)%r,y:(n.y%o+o)%o}}const V1=(e,n,r)=>{const o={gameState:r},a=Tt(r);a&&ke(o,Ae.ButtonClick,a.position);const l=r.uiButtons.find(f=>f.id===e.id);l&&(l.lastActivated=Date.now()),n&&[Ue.CommandGather,Ue.CommandPlant,Ue.ToggleProcreationBehavior].includes(e.action)&&r.hasPlayerEnabledAutopilot++;const{behaviors:c}=r.autopilotControls;switch(e.action){case Ue.ToggleMute:r.isMuted=!r.isMuted,us(r.masterVolume,r.isMuted);break;case Ue.TogglePause:r.isPaused=!r.isPaused;break;case Ue.FastForward:return Kl(r,T0);case Ue.DismissTutorial:r.tutorialState.isActive=!1;break;case Ue.CommandEat:a&&a.food.length>0&&(a.activeAction="eating");break;case Ue.CommandGather:n?c.gathering=!c.gathering:a&&(a.activeAction="gathering");break;case Ue.CommandPlant:n?c.planting=!c.planting:a&&(r.autopilotControls.isManuallyPlanting=!0);break;case Ue.ToggleProcreationBehavior:c.procreation=!c.procreation;break;case Ue.ToggleAttackBehavior:c.attack=!c.attack;break;case Ue.ToggleFeedChildBehavior:c.feedChildren=!c.feedChildren;break;case Ue.ToggleAutopilotFollowLeaderBehavior:c.followLeader=!c.followLeader;break;case Ue.CommandCallToAttack:a&&a.leaderId===a.id&&(a.isCallingToAttack=!0,a.callToAttackEndTime=r.time+eo,we(r,oe.CallToAttack,a.position,eo),ke(o,Ae.CallToAttack,a.position));break;case Ue.CommandFollowMe:n?c.followLeader=!c.followLeader:a&&a.leaderId===a.id&&(a.isCallingToFollow=!0,a.callToFollowEndTime=r.time+Ss,we(r,oe.CallToFollow,a.position,Ss),ke(o,Ae.CallToFollow,a.position));break;case Ue.CommandTribeSplit:a&&hf(a,r);break;case Ue.ToggleDiplomacy:if(a&&a.leaderId&&e.targetTribeId){const f=a.leaderId,h=e.targetTribeId,p=r.entities.entities.get(h),m=a.diplomacy,S=p==null?void 0:p.diplomacy;if(m&&S){const E=(m.get(h)||Ft.Friendly)===Ft.Friendly?Ft.Hostile:Ft.Friendly;m.set(h,E),S.set(f,E)}}break}return r};function X1(e,n,r){if(!e.notificationButtonRects)return!1;const o=Tt(e);for(const[a,l]of e.notificationButtonRects.dismiss.entries())if(n>=l.x&&n<=l.x+l.width&&r>=l.y&&r<=l.y+l.height)return eE(e,a),o&&ke({gameState:e},Ae.ButtonClick,o.position),!0;for(const[a,l]of e.notificationButtonRects.view.entries())if(n>=l.x&&n<=l.x+l.width&&r>=l.y&&r<=l.y+l.height){const c=e.notifications.find(f=>f.id===a);if(c){let f=c.targetPosition;if(!f&&c.targetEntityIds&&c.targetEntityIds.length>0){const h=e.entities.entities.get(c.targetEntityIds[0]);h&&(f=h.position)}return f&&j1(e,f),o&&ke({gameState:e},Ae.ButtonClick,o.position),c.highlightedEntityIds&&(c.renderHighlights=!c.renderHighlights),!0}}return!1}const K1=({isActive:e,gameStateRef:n,canvasRef:r,viewportCenterRef:o,playerActionHintsRef:a,isDebugOnRef:l,keysPressed:c})=>(De.useEffect(()=>{const f=h=>{if(!e()||n.current.gameOver||!r.current||!h.target||h.target!==r.current)return;const p=r.current.getBoundingClientRect(),m=h.clientX-p.left,S=h.clientY-p.top;if(X1(n.current,m,S))return;const E=n.current.uiButtons.find(I=>m>=I.rect.x&&m<=I.rect.x+I.rect.width&&S>=I.rect.y&&S<=I.rect.y+I.rect.height);if(E){n.current=V1(E,h.shiftKey,n.current);return}const P=Im({x:m,y:S},o.current,{width:r.current.width,height:r.current.height},n.current.mapDimensions);b1(n.current,P)};return window.addEventListener("mousedown",f),()=>{window.removeEventListener("mousedown",f)}},[e,r,n,o]),De.useEffect(()=>{const f=h=>{if(!e()||!r.current)return;const p=r.current.getBoundingClientRect(),m=h.clientX-p.left,S=h.clientY-p.top;n.current.mousePosition={x:m,y:S};let y;if(n.current.notificationButtonRects){for(const[P,I]of n.current.notificationButtonRects.dismiss.entries())if(m>=I.x&&m<=I.x+I.width&&S>=I.y&&S<=I.y+I.height){y=`notification-dismiss-${P}`;break}if(!y){for(const[P,I]of n.current.notificationButtonRects.view.entries())if(m>=I.x&&m<=I.x+I.width&&S>=I.y&&S<=I.y+I.height){y=`notification-view-${P}`;break}}}if(!y)for(let P=n.current.uiButtons.length-1;P>=0;P--){const I=n.current.uiButtons[P];if(m>=I.rect.x&&m<=I.rect.x+I.rect.width&&S>=I.rect.y&&S<=I.rect.y+I.rect.height){y=I.id;break}}if(n.current.hoveredButtonId=y,y){n.current.autopilotControls.hoveredAutopilotAction=void 0;return}const E=Tt(n.current);if(E){const P=Im({x:m,y:S},o.current,{width:r.current.width,height:r.current.height},n.current.mapDimensions);n.current.autopilotControls.hoveredAutopilotAction=x1(P,E,n.current)}else n.current.autopilotControls.hoveredAutopilotAction=void 0};return window.addEventListener("mousemove",f),()=>{window.removeEventListener("mousemove",f)}},[e,r,n,o]),De.useEffect(()=>{const f=p=>{if(!e()||n.current.gameOver)return;const m=p.key.toLowerCase();if((m===" "||m==="p"||m==="tab")&&p.preventDefault(),m==="escape"){n.current.autopilotControls.activeAutopilotAction=void 0;return}const S=z1(m,n.current,l);if(n.current=S.newState,S.handled)return;const y=Tt(n.current);y&&(c.current.add(m),$1(m,p.shiftKey,n.current,y,a.current))},h=p=>{if(!e()||n.current.gameOver)return;const m=p.key.toLowerCase();c.current.delete(m);const S=Tt(n.current);S&&W1(m,S,n.current,c)};return window.addEventListener("keydown",f),window.addEventListener("keyup",h),()=>{window.removeEventListener("keydown",f),window.removeEventListener("keyup",h)}},[e,n,a,l,c]),null),Q1=({gameStateRef:e,ctxRef:n,isDebugOnRef:r,viewportCenterRef:o,playerActionHintsRef:a,keysPressed:l,canvasRef:c,setAppState:f,appState:h})=>{const p=De.useRef(),[m,S,y]=l0(E=>{if(!n.current||!p.current){p.current=E;return}const P=Math.min(E-p.current,1e3)/1e3;e.current=Kl(e.current,P);const I=Tt(e.current);I?a.current=gf(e.current,I):a.current=[],o.current=Y1(e.current,o.current,P),Cl(n.current,e.current,r.current,o.current,a.current,!1),p.current=E,e.current.gameOver&&h!=="gameOver"&&(df(Ae.GameOver,{masterVolume:e.current.masterVolume,isMuted:e.current.isMuted}),f("gameOver",{generations:e.current.generationCount,cause:e.current.causeOfGameOver||"Unknown"}))});return De.useEffect(()=>(S(),m),[S,m]),Le.jsx(K1,{isActive:y,gameStateRef:e,canvasRef:c,viewportCenterRef:o,playerActionHintsRef:a,isDebugOnRef:r,keysPressed:l})},Om=()=>{const[e]=De.useState(()=>B1());return Le.jsx(Z1,{initialState:e})},Z1=({initialState:e})=>{const n=De.useRef(null),r=De.useRef(null),o=De.useRef(e),a=De.useRef(new Set),l=De.useRef(!1),c=De.useRef(e.viewportCenter),f=De.useRef([]),{appState:h,setAppState:p}=Rl();return Le.jsxs(Le.Fragment,{children:[Le.jsx(G1,{canvasRef:n,ctxRef:r,gameStateRef:o,isDebugOnRef:l,viewportCenterRef:c,playerActionHintsRef:f}),Le.jsx(Q1,{gameStateRef:o,ctxRef:r,isDebugOnRef:l,viewportCenterRef:c,playerActionHintsRef:f,keysPressed:a,canvasRef:n,setAppState:p,appState:h})]})},q1=zn.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  background-color: rgba(0, 0, 0, 0.75); // Semi-transparent overlay
  color: #fff;
  padding: 20px;
  z-index: 10; // Ensure it's on top
`,J1=zn.h1`
  font-family: 'Press Start 2P', cursive;
  font-size: 4rem;
  color: #ff4136; // Red for emphasis
  text-shadow: 4px 4px 0px #000;
  margin-bottom: 1.5rem;
`,sl=zn.p`
  font-family: 'Press Start 2P', cursive;
  font-size: 1.2rem;
  margin: 0.5em 0;
  color: #fff;
  text-shadow: 2px 2px 0px #000;
`,eR=zn.button`
  font-family: 'Press Start 2P', cursive;
  font-size: 1rem;
  padding: 1rem 2rem;
  margin-top: 2em;
  color: #fff;
  background-color: #ff4136; // Red button
  border: 2px solid #fff;
  box-shadow: 4px 4px 0px #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  text-transform: uppercase;

  &:hover {
    background-color: #fff;
    color: #ff4136;
    box-shadow: 4px 4px 0px #ff4136;
  }
`,tR=()=>{const{setAppState:e,gameOverDetails:n}=Rl(),r=()=>{e("intro")};return Le.jsxs(q1,{children:[Le.jsx(J1,{children:"Game Over"}),Le.jsx(sl,{children:"Your tribe's lineage has ended."}),n&&Le.jsxs(Le.Fragment,{children:[Le.jsxs(sl,{children:["Generations Survived: ",n.generations]}),Le.jsxs(sl,{children:["Cause of Extinction: ",n.cause]})]}),!n&&Le.jsx(sl,{children:"Game details are unavailable."}),Le.jsx(eR,{onClick:r,children:"Return to Menu"})]})},nR=vA`
  /* CSS Reset */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    padding: 0;
    font-family: 'Press Start 2P', 'Arial', sans-serif;
    background-color: #121212;
    color: #f0f0f0;
    line-height: 1.6;
  }

  /* Additional global styles */
  h1, h2, h3, h4, h5, h6 {
    margin-top: 0;
  }

  button {
    cursor: pointer;
    font-family: inherit;
  }

  /* Prevent overflow issues */
  html, body {
    height: 100%;
    overflow-x: hidden;
  }

  /* Root element for React app */
  #root {
    height: 100%;
  }
`;function iR(e,n){De.useEffect(()=>{const r=()=>{const o=document.location.hash==="#game"?"game":"intro";n(o)};return window.addEventListener("hashchange",r),r(),()=>{window.removeEventListener("hashchange",r)}},[]),De.useEffect(()=>{e==="game"?document.location.hash="#game":e==="intro"&&(document.location.hash="")},[e])}const rR=()=>{const{appState:e,setAppState:n}=Rl();iR(e,n);const r=()=>{switch(e){case"intro":return Le.jsx(km,{});case"game":return Le.jsx(Om,{});case"gameOver":return Le.jsxs(Le.Fragment,{children:[Le.jsx(Om,{}),Le.jsx(tR,{})]});default:return Le.jsx(km,{})}};return Le.jsxs(Le.Fragment,{children:[Le.jsx(nR,{}),r()]})},Mm=document.getElementById("root");Mm?fE().then(()=>{py.createRoot(Mm).render(Le.jsx(Gn.StrictMode,{children:Le.jsx(my,{initialAppState:document.location.hash==="#game"?"game":"intro",children:Le.jsx(rR,{})})}))}):console.error("Failed to find the root element");
