var SS=Object.defineProperty;var AS=(e,n,r)=>n in e?SS(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var me=(e,n,r)=>AS(e,typeof n!="symbol"?n+"":n,r);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function Ym(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Kc={exports:{}},cs={},Qc={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig;function TS(){if(Ig)return Me;Ig=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function S(C){return C===null||typeof C!="object"?null:(C=y&&C[y]||C["@@iterator"],typeof C=="function"?C:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,_={};function T(C,M,V){this.props=C,this.context=M,this.refs=_,this.updater=V||w}T.prototype.isReactComponent={},T.prototype.setState=function(C,M){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,M,"setState")},T.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function U(){}U.prototype=T.prototype;function H(C,M,V){this.props=C,this.context=M,this.refs=_,this.updater=V||w}var D=H.prototype=new U;D.constructor=H,P(D,T.prototype),D.isPureReactComponent=!0;var x=Array.isArray,W=Object.prototype.hasOwnProperty,F={current:null},Y={key:!0,ref:!0,__self:!0,__source:!0};function ue(C,M,V){var ee,he={},re=null,Se=null;if(M!=null)for(ee in M.ref!==void 0&&(Se=M.ref),M.key!==void 0&&(re=""+M.key),M)W.call(M,ee)&&!Y.hasOwnProperty(ee)&&(he[ee]=M[ee]);var ve=arguments.length-2;if(ve===1)he.children=V;else if(1<ve){for(var K=Array(ve),te=0;te<ve;te++)K[te]=arguments[te+2];he.children=K}if(C&&C.defaultProps)for(ee in ve=C.defaultProps,ve)he[ee]===void 0&&(he[ee]=ve[ee]);return{$$typeof:e,type:C,key:re,ref:Se,props:he,_owner:F.current}}function we(C,M){return{$$typeof:e,type:C.type,key:M,ref:C.ref,props:C.props,_owner:C._owner}}function _e(C){return typeof C=="object"&&C!==null&&C.$$typeof===e}function xe(C){var M={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(V){return M[V]})}var De=/\/+/g;function Ie(C,M){return typeof C=="object"&&C!==null&&C.key!=null?xe(""+C.key):M.toString(36)}function le(C,M,V,ee,he){var re=typeof C;(re==="undefined"||re==="boolean")&&(C=null);var Se=!1;if(C===null)Se=!0;else switch(re){case"string":case"number":Se=!0;break;case"object":switch(C.$$typeof){case e:case n:Se=!0}}if(Se)return Se=C,he=he(Se),C=ee===""?"."+Ie(Se,0):ee,x(he)?(V="",C!=null&&(V=C.replace(De,"$&/")+"/"),le(he,M,V,"",function(te){return te})):he!=null&&(_e(he)&&(he=we(he,V+(!he.key||Se&&Se.key===he.key?"":(""+he.key).replace(De,"$&/")+"/")+C)),M.push(he)),1;if(Se=0,ee=ee===""?".":ee+":",x(C))for(var ve=0;ve<C.length;ve++){re=C[ve];var K=ee+Ie(re,ve);Se+=le(re,M,V,K,he)}else if(K=S(C),typeof K=="function")for(C=K.call(C),ve=0;!(re=C.next()).done;)re=re.value,K=ee+Ie(re,ve++),Se+=le(re,M,V,K,he);else if(re==="object")throw M=String(C),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return Se}function Fe(C,M,V){if(C==null)return C;var ee=[],he=0;return le(C,ee,"","",function(re){return M.call(V,re,he++)}),ee}function ye(C){if(C._status===-1){var M=C._result;M=M(),M.then(function(V){(C._status===0||C._status===-1)&&(C._status=1,C._result=V)},function(V){(C._status===0||C._status===-1)&&(C._status=2,C._result=V)}),C._status===-1&&(C._status=0,C._result=M)}if(C._status===1)return C._result.default;throw C._result}var J={current:null},b={transition:null},j={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:b,ReactCurrentOwner:F};function z(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:Fe,forEach:function(C,M,V){Fe(C,function(){M.apply(this,arguments)},V)},count:function(C){var M=0;return Fe(C,function(){M++}),M},toArray:function(C){return Fe(C,function(M){return M})||[]},only:function(C){if(!_e(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Me.Component=T,Me.Fragment=r,Me.Profiler=a,Me.PureComponent=H,Me.StrictMode=o,Me.Suspense=h,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,Me.act=z,Me.cloneElement=function(C,M,V){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var ee=P({},C.props),he=C.key,re=C.ref,Se=C._owner;if(M!=null){if(M.ref!==void 0&&(re=M.ref,Se=F.current),M.key!==void 0&&(he=""+M.key),C.type&&C.type.defaultProps)var ve=C.type.defaultProps;for(K in M)W.call(M,K)&&!Y.hasOwnProperty(K)&&(ee[K]=M[K]===void 0&&ve!==void 0?ve[K]:M[K])}var K=arguments.length-2;if(K===1)ee.children=V;else if(1<K){ve=Array(K);for(var te=0;te<K;te++)ve[te]=arguments[te+2];ee.children=ve}return{$$typeof:e,type:C.type,key:he,ref:re,props:ee,_owner:Se}},Me.createContext=function(C){return C={$$typeof:c,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:l,_context:C},C.Consumer=C},Me.createElement=ue,Me.createFactory=function(C){var M=ue.bind(null,C);return M.type=C,M},Me.createRef=function(){return{current:null}},Me.forwardRef=function(C){return{$$typeof:d,render:C}},Me.isValidElement=_e,Me.lazy=function(C){return{$$typeof:m,_payload:{_status:-1,_result:C},_init:ye}},Me.memo=function(C,M){return{$$typeof:g,type:C,compare:M===void 0?null:M}},Me.startTransition=function(C){var M=b.transition;b.transition={};try{C()}finally{b.transition=M}},Me.unstable_act=z,Me.useCallback=function(C,M){return J.current.useCallback(C,M)},Me.useContext=function(C){return J.current.useContext(C)},Me.useDebugValue=function(){},Me.useDeferredValue=function(C){return J.current.useDeferredValue(C)},Me.useEffect=function(C,M){return J.current.useEffect(C,M)},Me.useId=function(){return J.current.useId()},Me.useImperativeHandle=function(C,M,V){return J.current.useImperativeHandle(C,M,V)},Me.useInsertionEffect=function(C,M){return J.current.useInsertionEffect(C,M)},Me.useLayoutEffect=function(C,M){return J.current.useLayoutEffect(C,M)},Me.useMemo=function(C,M){return J.current.useMemo(C,M)},Me.useReducer=function(C,M,V){return J.current.useReducer(C,M,V)},Me.useRef=function(C){return J.current.useRef(C)},Me.useState=function(C){return J.current.useState(C)},Me.useSyncExternalStore=function(C,M,V){return J.current.useSyncExternalStore(C,M,V)},Me.useTransition=function(){return J.current.useTransition()},Me.version="18.3.1",Me}var Eg;function Xd(){return Eg||(Eg=1,Qc.exports=TS()),Qc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wg;function IS(){if(wg)return cs;wg=1;var e=Xd(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,h,g){var m,y={},S=null,w=null;g!==void 0&&(S=""+g),h.key!==void 0&&(S=""+h.key),h.ref!==void 0&&(w=h.ref);for(m in h)o.call(h,m)&&!l.hasOwnProperty(m)&&(y[m]=h[m]);if(d&&d.defaultProps)for(m in h=d.defaultProps,h)y[m]===void 0&&(y[m]=h[m]);return{$$typeof:n,type:d,key:S,ref:w,props:y,_owner:a.current}}return cs.Fragment=r,cs.jsx=c,cs.jsxs=c,cs}var _g;function ES(){return _g||(_g=1,Kc.exports=IS()),Kc.exports}var He=ES(),Pe=Xd();const Gn=Ym(Pe);var ol={},qc={exports:{}},Wt={},Zc={exports:{}},Jc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg;function wS(){return Cg||(Cg=1,function(e){function n(b,j){var z=b.length;b.push(j);e:for(;0<z;){var C=z-1>>>1,M=b[C];if(0<a(M,j))b[C]=j,b[z]=M,z=C;else break e}}function r(b){return b.length===0?null:b[0]}function o(b){if(b.length===0)return null;var j=b[0],z=b.pop();if(z!==j){b[0]=z;e:for(var C=0,M=b.length,V=M>>>1;C<V;){var ee=2*(C+1)-1,he=b[ee],re=ee+1,Se=b[re];if(0>a(he,z))re<M&&0>a(Se,he)?(b[C]=Se,b[re]=z,C=re):(b[C]=he,b[ee]=z,C=ee);else if(re<M&&0>a(Se,z))b[C]=Se,b[re]=z,C=re;else break e}}return j}function a(b,j){var z=b.sortIndex-j.sortIndex;return z!==0?z:b.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var h=[],g=[],m=1,y=null,S=3,w=!1,P=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(b){for(var j=r(g);j!==null;){if(j.callback===null)o(g);else if(j.startTime<=b)o(g),j.sortIndex=j.expirationTime,n(h,j);else break;j=r(g)}}function x(b){if(_=!1,D(b),!P)if(r(h)!==null)P=!0,ye(W);else{var j=r(g);j!==null&&J(x,j.startTime-b)}}function W(b,j){P=!1,_&&(_=!1,U(ue),ue=-1),w=!0;var z=S;try{for(D(j),y=r(h);y!==null&&(!(y.expirationTime>j)||b&&!xe());){var C=y.callback;if(typeof C=="function"){y.callback=null,S=y.priorityLevel;var M=C(y.expirationTime<=j);j=e.unstable_now(),typeof M=="function"?y.callback=M:y===r(h)&&o(h),D(j)}else o(h);y=r(h)}if(y!==null)var V=!0;else{var ee=r(g);ee!==null&&J(x,ee.startTime-j),V=!1}return V}finally{y=null,S=z,w=!1}}var F=!1,Y=null,ue=-1,we=5,_e=-1;function xe(){return!(e.unstable_now()-_e<we)}function De(){if(Y!==null){var b=e.unstable_now();_e=b;var j=!0;try{j=Y(!0,b)}finally{j?Ie():(F=!1,Y=null)}}else F=!1}var Ie;if(typeof H=="function")Ie=function(){H(De)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,Fe=le.port2;le.port1.onmessage=De,Ie=function(){Fe.postMessage(null)}}else Ie=function(){T(De,0)};function ye(b){Y=b,F||(F=!0,Ie())}function J(b,j){ue=T(function(){b(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){P||w||(P=!0,ye(W))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(b){switch(S){case 1:case 2:case 3:var j=3;break;default:j=S}var z=S;S=j;try{return b()}finally{S=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,j){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var z=S;S=b;try{return j()}finally{S=z}},e.unstable_scheduleCallback=function(b,j,z){var C=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?C+z:C):z=C,b){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=z+M,b={id:m++,callback:j,priorityLevel:b,startTime:z,expirationTime:M,sortIndex:-1},z>C?(b.sortIndex=z,n(g,b),r(h)===null&&b===r(g)&&(_?(U(ue),ue=-1):_=!0,J(x,z-C))):(b.sortIndex=M,n(h,b),P||w||(P=!0,ye(W))),b},e.unstable_shouldYield=xe,e.unstable_wrapCallback=function(b){var j=S;return function(){var z=S;S=j;try{return b.apply(this,arguments)}finally{S=z}}}}(Jc)),Jc}var Rg;function _S(){return Rg||(Rg=1,Zc.exports=wS()),Zc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function CS(){if(Pg)return Wt;Pg=1;var e=Xd(),n=_S();function r(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(t,i){c(t,i),c(t+"Capture",i)}function c(t,i){for(a[t]=i,t=0;t<i.length;t++)o.add(i[t])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function S(t){return h.call(y,t)?!0:h.call(m,t)?!1:g.test(t)?y[t]=!0:(m[t]=!0,!1)}function w(t,i,s,u){if(s!==null&&s.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function P(t,i,s,u){if(i===null||typeof i>"u"||w(t,i,s,u))return!0;if(u)return!1;if(s!==null)switch(s.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function _(t,i,s,u,f,p,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=f,this.mustUseProperty=s,this.propertyName=t,this.type=i,this.sanitizeURL=p,this.removeEmptyString=v}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){T[t]=new _(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];T[i]=new _(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){T[t]=new _(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){T[t]=new _(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){T[t]=new _(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){T[t]=new _(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){T[t]=new _(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){T[t]=new _(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){T[t]=new _(t,5,!1,t.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function H(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(U,H);T[i]=new _(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(U,H);T[i]=new _(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(U,H);T[i]=new _(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){T[t]=new _(t,1,!1,t.toLowerCase(),null,!1,!1)}),T.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){T[t]=new _(t,1,!1,t.toLowerCase(),null,!0,!0)});function D(t,i,s,u){var f=T.hasOwnProperty(i)?T[i]:null;(f!==null?f.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(P(i,s,f,u)&&(s=null),u||f===null?S(i)&&(s===null?t.removeAttribute(i):t.setAttribute(i,""+s)):f.mustUseProperty?t[f.propertyName]=s===null?f.type===3?!1:"":s:(i=f.attributeName,u=f.attributeNamespace,s===null?t.removeAttribute(i):(f=f.type,s=f===3||f===4&&s===!0?"":""+s,u?t.setAttributeNS(u,i,s):t.setAttribute(i,s))))}var x=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),F=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),ue=Symbol.for("react.strict_mode"),we=Symbol.for("react.profiler"),_e=Symbol.for("react.provider"),xe=Symbol.for("react.context"),De=Symbol.for("react.forward_ref"),Ie=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),Fe=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),b=Symbol.iterator;function j(t){return t===null||typeof t!="object"?null:(t=b&&t[b]||t["@@iterator"],typeof t=="function"?t:null)}var z=Object.assign,C;function M(t){if(C===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);C=i&&i[1]||""}return`
`+C+t}var V=!1;function ee(t,i){if(!t||V)return"";V=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(k){var u=k}Reflect.construct(t,[],i)}else{try{i.call()}catch(k){u=k}t.call(i.prototype)}else{try{throw Error()}catch(k){u=k}t()}}catch(k){if(k&&u&&typeof k.stack=="string"){for(var f=k.stack.split(`
`),p=u.stack.split(`
`),v=f.length-1,A=p.length-1;1<=v&&0<=A&&f[v]!==p[A];)A--;for(;1<=v&&0<=A;v--,A--)if(f[v]!==p[A]){if(v!==1||A!==1)do if(v--,A--,0>A||f[v]!==p[A]){var E=`
`+f[v].replace(" at new "," at ");return t.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",t.displayName)),E}while(1<=v&&0<=A);break}}}finally{V=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?M(t):""}function he(t){switch(t.tag){case 5:return M(t.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return t=ee(t.type,!1),t;case 11:return t=ee(t.type.render,!1),t;case 1:return t=ee(t.type,!0),t;default:return""}}function re(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Y:return"Fragment";case F:return"Portal";case we:return"Profiler";case ue:return"StrictMode";case Ie:return"Suspense";case le:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xe:return(t.displayName||"Context")+".Consumer";case _e:return(t._context.displayName||"Context")+".Provider";case De:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fe:return i=t.displayName||null,i!==null?i:re(t.type)||"Memo";case ye:i=t._payload,t=t._init;try{return re(t(i))}catch{}}return null}function Se(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(i);case 8:return i===ue?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ve(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function K(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function te(t){var i=K(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),u=""+t[i];if(!t.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,p=s.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){u=""+v,p.call(this,v)}}),Object.defineProperty(t,i,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Oe(t){t._valueTracker||(t._valueTracker=te(t))}function ce(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),u="";return t&&(u=K(t)?t.checked?"true":"false":t.value),t=u,t!==s?(i.setValue(t),!0):!1}function Cn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ke(t,i){var s=i.checked;return z({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Ye(t,i){var s=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;s=ve(i.value!=null?i.value:s),t._wrapperState={initialChecked:u,initialValue:s,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Rn(t,i){i=i.checked,i!=null&&D(t,"checked",i,!1)}function Bt(t,i){Rn(t,i);var s=ve(i.value),u=i.type;if(s!=null)u==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?Pn(t,i.type,s):i.hasOwnProperty("defaultValue")&&Pn(t,i.type,ve(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function nn(t,i,s){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,s||i===t.value||(t.value=i),t.defaultValue=i}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Pn(t,i,s){(i!=="number"||Cn(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Nn=Array.isArray;function ai(t,i,s,u){if(t=t.options,i){i={};for(var f=0;f<s.length;f++)i["$"+s[f]]=!0;for(s=0;s<t.length;s++)f=i.hasOwnProperty("$"+t[s].value),t[s].selected!==f&&(t[s].selected=f),f&&u&&(t[s].defaultSelected=!0)}else{for(s=""+ve(s),i=null,f=0;f<t.length;f++){if(t[f].value===s){t[f].selected=!0,u&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function zi(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return z({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kf(t,i){var s=i.value;if(s==null){if(s=i.children,i=i.defaultValue,s!=null){if(i!=null)throw Error(r(92));if(Nn(s)){if(1<s.length)throw Error(r(93));s=s[0]}i=s}i==null&&(i=""),s=i}t._wrapperState={initialValue:ve(s)}}function Mf(t,i){var s=ve(i.value),u=ve(i.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),i.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),u!=null&&(t.defaultValue=""+u)}function Ff(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function Uf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function su(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?Uf(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qs,Hf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,s,u,f){MSApp.execUnsafeLocalFunction(function(){return t(i,s,u,f)})}:t}(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(qs=qs||document.createElement("div"),qs.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=qs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function Co(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var Ro={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ev=["Webkit","ms","Moz","O"];Object.keys(Ro).forEach(function(t){Ev.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),Ro[i]=Ro[t]})});function Lf(t,i,s){return i==null||typeof i=="boolean"||i===""?"":s||typeof i!="number"||i===0||Ro.hasOwnProperty(t)&&Ro[t]?(""+i).trim():i+"px"}function Bf(t,i){t=t.style;for(var s in i)if(i.hasOwnProperty(s)){var u=s.indexOf("--")===0,f=Lf(s,i[s],u);s==="float"&&(s="cssFloat"),u?t.setProperty(s,f):t[s]=f}}var wv=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function au(t,i){if(i){if(wv[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function lu(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uu=null;function cu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var du=null,Ir=null,Er=null;function Gf(t){if(t=Ko(t)){if(typeof du!="function")throw Error(r(280));var i=t.stateNode;i&&(i=Aa(i),du(t.stateNode,t.type,i))}}function xf(t){Ir?Er?Er.push(t):Er=[t]:Ir=t}function bf(){if(Ir){var t=Ir,i=Er;if(Er=Ir=null,Gf(t),i)for(t=0;t<i.length;t++)Gf(i[t])}}function zf(t,i){return t(i)}function $f(){}var fu=!1;function Wf(t,i,s){if(fu)return t(i,s);fu=!0;try{return zf(t,i,s)}finally{fu=!1,(Ir!==null||Er!==null)&&($f(),bf())}}function Po(t,i){var s=t.stateNode;if(s===null)return null;var u=Aa(s);if(u===null)return null;s=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(r(231,i,typeof s));return s}var hu=!1;if(d)try{var No={};Object.defineProperty(No,"passive",{get:function(){hu=!0}}),window.addEventListener("test",No,No),window.removeEventListener("test",No,No)}catch{hu=!1}function _v(t,i,s,u,f,p,v,A,E){var k=Array.prototype.slice.call(arguments,3);try{i.apply(s,k)}catch(B){this.onError(B)}}var Do=!1,Zs=null,Js=!1,pu=null,Cv={onError:function(t){Do=!0,Zs=t}};function Rv(t,i,s,u,f,p,v,A,E){Do=!1,Zs=null,_v.apply(Cv,arguments)}function Pv(t,i,s,u,f,p,v,A,E){if(Rv.apply(this,arguments),Do){if(Do){var k=Zs;Do=!1,Zs=null}else throw Error(r(198));Js||(Js=!0,pu=k)}}function $i(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function Yf(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function jf(t){if($i(t)!==t)throw Error(r(188))}function Nv(t){var i=t.alternate;if(!i){if(i=$i(t),i===null)throw Error(r(188));return i!==t?null:t}for(var s=t,u=i;;){var f=s.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){s=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===s)return jf(f),t;if(p===u)return jf(f),i;p=p.sibling}throw Error(r(188))}if(s.return!==u.return)s=f,u=p;else{for(var v=!1,A=f.child;A;){if(A===s){v=!0,s=f,u=p;break}if(A===u){v=!0,u=f,s=p;break}A=A.sibling}if(!v){for(A=p.child;A;){if(A===s){v=!0,s=p,u=f;break}if(A===u){v=!0,u=p,s=f;break}A=A.sibling}if(!v)throw Error(r(189))}}if(s.alternate!==u)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?t:i}function Vf(t){return t=Nv(t),t!==null?Xf(t):null}function Xf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=Xf(t);if(i!==null)return i;t=t.sibling}return null}var Kf=n.unstable_scheduleCallback,Qf=n.unstable_cancelCallback,Dv=n.unstable_shouldYield,Ov=n.unstable_requestPaint,rt=n.unstable_now,kv=n.unstable_getCurrentPriorityLevel,gu=n.unstable_ImmediatePriority,qf=n.unstable_UserBlockingPriority,ea=n.unstable_NormalPriority,Mv=n.unstable_LowPriority,Zf=n.unstable_IdlePriority,ta=null,Dn=null;function Fv(t){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(ta,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:Lv,Uv=Math.log,Hv=Math.LN2;function Lv(t){return t>>>=0,t===0?32:31-(Uv(t)/Hv|0)|0}var na=64,ia=4194304;function Oo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ra(t,i){var s=t.pendingLanes;if(s===0)return 0;var u=0,f=t.suspendedLanes,p=t.pingedLanes,v=s&268435455;if(v!==0){var A=v&~f;A!==0?u=Oo(A):(p&=v,p!==0&&(u=Oo(p)))}else v=s&~f,v!==0?u=Oo(v):p!==0&&(u=Oo(p));if(u===0)return 0;if(i!==0&&i!==u&&(i&f)===0&&(f=u&-u,p=i&-i,f>=p||f===16&&(p&4194240)!==0))return i;if((u&4)!==0&&(u|=s&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=u;0<i;)s=31-hn(i),f=1<<s,u|=t[s],i&=~f;return u}function Bv(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gv(t,i){for(var s=t.suspendedLanes,u=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes;0<p;){var v=31-hn(p),A=1<<v,E=f[v];E===-1?((A&s)===0||(A&u)!==0)&&(f[v]=Bv(A,i)):E<=i&&(t.expiredLanes|=A),p&=~A}}function mu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jf(){var t=na;return na<<=1,(na&4194240)===0&&(na=64),t}function vu(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function ko(t,i,s){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-hn(i),t[i]=s}function xv(t,i){var s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<s;){var f=31-hn(s),p=1<<f;i[f]=0,u[f]=-1,t[f]=-1,s&=~p}}function yu(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var u=31-hn(s),f=1<<u;f&i|t[u]&i&&(t[u]|=i),s&=~f}}var ze=0;function eh(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var th,Su,nh,ih,rh,Au=!1,oa=[],li=null,ui=null,ci=null,Mo=new Map,Fo=new Map,di=[],bv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oh(t,i){switch(t){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":ui=null;break;case"mouseover":case"mouseout":ci=null;break;case"pointerover":case"pointerout":Mo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fo.delete(i.pointerId)}}function Uo(t,i,s,u,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:i,domEventName:s,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},i!==null&&(i=Ko(i),i!==null&&Su(i)),t):(t.eventSystemFlags|=u,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function zv(t,i,s,u,f){switch(i){case"focusin":return li=Uo(li,t,i,s,u,f),!0;case"dragenter":return ui=Uo(ui,t,i,s,u,f),!0;case"mouseover":return ci=Uo(ci,t,i,s,u,f),!0;case"pointerover":var p=f.pointerId;return Mo.set(p,Uo(Mo.get(p)||null,t,i,s,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Fo.set(p,Uo(Fo.get(p)||null,t,i,s,u,f)),!0}return!1}function sh(t){var i=Wi(t.target);if(i!==null){var s=$i(i);if(s!==null){if(i=s.tag,i===13){if(i=Yf(s),i!==null){t.blockedOn=i,rh(t.priority,function(){nh(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sa(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=Iu(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var u=new s.constructor(s.type,s);uu=u,s.target.dispatchEvent(u),uu=null}else return i=Ko(s),i!==null&&Su(i),t.blockedOn=s,!1;i.shift()}return!0}function ah(t,i,s){sa(t)&&s.delete(i)}function $v(){Au=!1,li!==null&&sa(li)&&(li=null),ui!==null&&sa(ui)&&(ui=null),ci!==null&&sa(ci)&&(ci=null),Mo.forEach(ah),Fo.forEach(ah)}function Ho(t,i){t.blockedOn===i&&(t.blockedOn=null,Au||(Au=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$v)))}function Lo(t){function i(f){return Ho(f,t)}if(0<oa.length){Ho(oa[0],t);for(var s=1;s<oa.length;s++){var u=oa[s];u.blockedOn===t&&(u.blockedOn=null)}}for(li!==null&&Ho(li,t),ui!==null&&Ho(ui,t),ci!==null&&Ho(ci,t),Mo.forEach(i),Fo.forEach(i),s=0;s<di.length;s++)u=di[s],u.blockedOn===t&&(u.blockedOn=null);for(;0<di.length&&(s=di[0],s.blockedOn===null);)sh(s),s.blockedOn===null&&di.shift()}var wr=x.ReactCurrentBatchConfig,aa=!0;function Wv(t,i,s,u){var f=ze,p=wr.transition;wr.transition=null;try{ze=1,Tu(t,i,s,u)}finally{ze=f,wr.transition=p}}function Yv(t,i,s,u){var f=ze,p=wr.transition;wr.transition=null;try{ze=4,Tu(t,i,s,u)}finally{ze=f,wr.transition=p}}function Tu(t,i,s,u){if(aa){var f=Iu(t,i,s,u);if(f===null)Gu(t,i,u,la,s),oh(t,u);else if(zv(f,t,i,s,u))u.stopPropagation();else if(oh(t,u),i&4&&-1<bv.indexOf(t)){for(;f!==null;){var p=Ko(f);if(p!==null&&th(p),p=Iu(t,i,s,u),p===null&&Gu(t,i,u,la,s),p===f)break;f=p}f!==null&&u.stopPropagation()}else Gu(t,i,u,null,s)}}var la=null;function Iu(t,i,s,u){if(la=null,t=cu(u),t=Wi(t),t!==null)if(i=$i(t),i===null)t=null;else if(s=i.tag,s===13){if(t=Yf(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return la=t,null}function lh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kv()){case gu:return 1;case qf:return 4;case ea:case Mv:return 16;case Zf:return 536870912;default:return 16}default:return 16}}var fi=null,Eu=null,ua=null;function uh(){if(ua)return ua;var t,i=Eu,s=i.length,u,f="value"in fi?fi.value:fi.textContent,p=f.length;for(t=0;t<s&&i[t]===f[t];t++);var v=s-t;for(u=1;u<=v&&i[s-u]===f[p-u];u++);return ua=f.slice(t,1<u?1-u:void 0)}function ca(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function da(){return!0}function ch(){return!1}function Kt(t){function i(s,u,f,p,v){this._reactName=s,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(s=t[A],this[A]=s?s(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?da:ch,this.isPropagationStopped=ch,this}return z(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=da)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=da)},persist:function(){},isPersistent:da}),i}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wu=Kt(_r),Bo=z({},_r,{view:0,detail:0}),jv=Kt(Bo),_u,Cu,Go,fa=z({},Bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Go&&(Go&&t.type==="mousemove"?(_u=t.screenX-Go.screenX,Cu=t.screenY-Go.screenY):Cu=_u=0,Go=t),_u)},movementY:function(t){return"movementY"in t?t.movementY:Cu}}),dh=Kt(fa),Vv=z({},fa,{dataTransfer:0}),Xv=Kt(Vv),Kv=z({},Bo,{relatedTarget:0}),Ru=Kt(Kv),Qv=z({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),qv=Kt(Qv),Zv=z({},_r,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Jv=Kt(Zv),ey=z({},_r,{data:0}),fh=Kt(ey),ty={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ny={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ry(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=iy[t])?!!i[t]:!1}function Pu(){return ry}var oy=z({},Bo,{key:function(t){if(t.key){var i=ty[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=ca(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ny[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pu,charCode:function(t){return t.type==="keypress"?ca(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ca(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sy=Kt(oy),ay=z({},fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hh=Kt(ay),ly=z({},Bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pu}),uy=Kt(ly),cy=z({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),dy=Kt(cy),fy=z({},fa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hy=Kt(fy),py=[9,13,27,32],Nu=d&&"CompositionEvent"in window,xo=null;d&&"documentMode"in document&&(xo=document.documentMode);var gy=d&&"TextEvent"in window&&!xo,ph=d&&(!Nu||xo&&8<xo&&11>=xo),gh=" ",mh=!1;function vh(t,i){switch(t){case"keyup":return py.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cr=!1;function my(t,i){switch(t){case"compositionend":return yh(i);case"keypress":return i.which!==32?null:(mh=!0,gh);case"textInput":return t=i.data,t===gh&&mh?null:t;default:return null}}function vy(t,i){if(Cr)return t==="compositionend"||!Nu&&vh(t,i)?(t=uh(),ua=Eu=fi=null,Cr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ph&&i.locale!=="ko"?null:i.data;default:return null}}var yy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!yy[t.type]:i==="textarea"}function Ah(t,i,s,u){xf(u),i=va(i,"onChange"),0<i.length&&(s=new wu("onChange","change",null,s,u),t.push({event:s,listeners:i}))}var bo=null,zo=null;function Sy(t){Bh(t,0)}function ha(t){var i=Or(t);if(ce(i))return t}function Ay(t,i){if(t==="change")return i}var Th=!1;if(d){var Du;if(d){var Ou="oninput"in document;if(!Ou){var Ih=document.createElement("div");Ih.setAttribute("oninput","return;"),Ou=typeof Ih.oninput=="function"}Du=Ou}else Du=!1;Th=Du&&(!document.documentMode||9<document.documentMode)}function Eh(){bo&&(bo.detachEvent("onpropertychange",wh),zo=bo=null)}function wh(t){if(t.propertyName==="value"&&ha(zo)){var i=[];Ah(i,zo,t,cu(t)),Wf(Sy,i)}}function Ty(t,i,s){t==="focusin"?(Eh(),bo=i,zo=s,bo.attachEvent("onpropertychange",wh)):t==="focusout"&&Eh()}function Iy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ha(zo)}function Ey(t,i){if(t==="click")return ha(i)}function wy(t,i){if(t==="input"||t==="change")return ha(i)}function _y(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var pn=typeof Object.is=="function"?Object.is:_y;function $o(t,i){if(pn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),u=Object.keys(i);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var f=s[u];if(!h.call(i,f)||!pn(t[f],i[f]))return!1}return!0}function _h(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ch(t,i){var s=_h(t);t=0;for(var u;s;){if(s.nodeType===3){if(u=t+s.textContent.length,t<=i&&u>=i)return{node:s,offset:i-t};t=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=_h(s)}}function Rh(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Rh(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Ph(){for(var t=window,i=Cn();i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=Cn(t.document)}return i}function ku(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function Cy(t){var i=Ph(),s=t.focusedElem,u=t.selectionRange;if(i!==s&&s&&s.ownerDocument&&Rh(s.ownerDocument.documentElement,s)){if(u!==null&&ku(s)){if(i=u.start,t=u.end,t===void 0&&(t=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(t,s.value.length);else if(t=(i=s.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var f=s.textContent.length,p=Math.min(u.start,f);u=u.end===void 0?p:Math.min(u.end,f),!t.extend&&p>u&&(f=u,u=p,p=f),f=Ch(s,p);var v=Ch(s,u);f&&v&&(t.rangeCount!==1||t.anchorNode!==f.node||t.anchorOffset!==f.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),t.removeAllRanges(),p>u?(t.addRange(i),t.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),t.addRange(i)))}}for(i=[],t=s;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)t=i[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ry=d&&"documentMode"in document&&11>=document.documentMode,Rr=null,Mu=null,Wo=null,Fu=!1;function Nh(t,i,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Fu||Rr==null||Rr!==Cn(u)||(u=Rr,"selectionStart"in u&&ku(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Wo&&$o(Wo,u)||(Wo=u,u=va(Mu,"onSelect"),0<u.length&&(i=new wu("onSelect","select",null,i,s),t.push({event:i,listeners:u}),i.target=Rr)))}function pa(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var Pr={animationend:pa("Animation","AnimationEnd"),animationiteration:pa("Animation","AnimationIteration"),animationstart:pa("Animation","AnimationStart"),transitionend:pa("Transition","TransitionEnd")},Uu={},Dh={};d&&(Dh=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function ga(t){if(Uu[t])return Uu[t];if(!Pr[t])return t;var i=Pr[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in Dh)return Uu[t]=i[s];return t}var Oh=ga("animationend"),kh=ga("animationiteration"),Mh=ga("animationstart"),Fh=ga("transitionend"),Uh=new Map,Hh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(t,i){Uh.set(t,i),l(i,[t])}for(var Hu=0;Hu<Hh.length;Hu++){var Lu=Hh[Hu],Py=Lu.toLowerCase(),Ny=Lu[0].toUpperCase()+Lu.slice(1);hi(Py,"on"+Ny)}hi(Oh,"onAnimationEnd"),hi(kh,"onAnimationIteration"),hi(Mh,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(Fh,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yo));function Lh(t,i,s){var u=t.type||"unknown-event";t.currentTarget=s,Pv(u,i,void 0,t),t.currentTarget=null}function Bh(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var u=t[s],f=u.event;u=u.listeners;e:{var p=void 0;if(i)for(var v=u.length-1;0<=v;v--){var A=u[v],E=A.instance,k=A.currentTarget;if(A=A.listener,E!==p&&f.isPropagationStopped())break e;Lh(f,A,k),p=E}else for(v=0;v<u.length;v++){if(A=u[v],E=A.instance,k=A.currentTarget,A=A.listener,E!==p&&f.isPropagationStopped())break e;Lh(f,A,k),p=E}}}if(Js)throw t=pu,Js=!1,pu=null,t}function je(t,i){var s=i[Yu];s===void 0&&(s=i[Yu]=new Set);var u=t+"__bubble";s.has(u)||(Gh(i,t,2,!1),s.add(u))}function Bu(t,i,s){var u=0;i&&(u|=4),Gh(s,t,u,i)}var ma="_reactListening"+Math.random().toString(36).slice(2);function jo(t){if(!t[ma]){t[ma]=!0,o.forEach(function(s){s!=="selectionchange"&&(Dy.has(s)||Bu(s,!1,t),Bu(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[ma]||(i[ma]=!0,Bu("selectionchange",!1,i))}}function Gh(t,i,s,u){switch(lh(i)){case 1:var f=Wv;break;case 4:f=Yv;break;default:f=Tu}s=f.bind(null,i,s,t),f=void 0,!hu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?t.addEventListener(i,s,{capture:!0,passive:f}):t.addEventListener(i,s,!0):f!==void 0?t.addEventListener(i,s,{passive:f}):t.addEventListener(i,s,!1)}function Gu(t,i,s,u,f){var p=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var A=u.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(v===4)for(v=u.return;v!==null;){var E=v.tag;if((E===3||E===4)&&(E=v.stateNode.containerInfo,E===f||E.nodeType===8&&E.parentNode===f))return;v=v.return}for(;A!==null;){if(v=Wi(A),v===null)return;if(E=v.tag,E===5||E===6){u=p=v;continue e}A=A.parentNode}}u=u.return}Wf(function(){var k=p,B=cu(s),G=[];e:{var L=Uh.get(t);if(L!==void 0){var Q=wu,Z=t;switch(t){case"keypress":if(ca(s)===0)break e;case"keydown":case"keyup":Q=sy;break;case"focusin":Z="focus",Q=Ru;break;case"focusout":Z="blur",Q=Ru;break;case"beforeblur":case"afterblur":Q=Ru;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=dh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Xv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=uy;break;case Oh:case kh:case Mh:Q=qv;break;case Fh:Q=dy;break;case"scroll":Q=jv;break;case"wheel":Q=hy;break;case"copy":case"cut":case"paste":Q=Jv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=hh}var ne=(i&4)!==0,ot=!ne&&t==="scroll",N=ne?L!==null?L+"Capture":null:L;ne=[];for(var R=k,O;R!==null;){O=R;var $=O.stateNode;if(O.tag===5&&$!==null&&(O=$,N!==null&&($=Po(R,N),$!=null&&ne.push(Vo(R,$,O)))),ot)break;R=R.return}0<ne.length&&(L=new Q(L,Z,null,s,B),G.push({event:L,listeners:ne}))}}if((i&7)===0){e:{if(L=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",L&&s!==uu&&(Z=s.relatedTarget||s.fromElement)&&(Wi(Z)||Z[$n]))break e;if((Q||L)&&(L=B.window===B?B:(L=B.ownerDocument)?L.defaultView||L.parentWindow:window,Q?(Z=s.relatedTarget||s.toElement,Q=k,Z=Z?Wi(Z):null,Z!==null&&(ot=$i(Z),Z!==ot||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(Q=null,Z=k),Q!==Z)){if(ne=dh,$="onMouseLeave",N="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(ne=hh,$="onPointerLeave",N="onPointerEnter",R="pointer"),ot=Q==null?L:Or(Q),O=Z==null?L:Or(Z),L=new ne($,R+"leave",Q,s,B),L.target=ot,L.relatedTarget=O,$=null,Wi(B)===k&&(ne=new ne(N,R+"enter",Z,s,B),ne.target=O,ne.relatedTarget=ot,$=ne),ot=$,Q&&Z)t:{for(ne=Q,N=Z,R=0,O=ne;O;O=Nr(O))R++;for(O=0,$=N;$;$=Nr($))O++;for(;0<R-O;)ne=Nr(ne),R--;for(;0<O-R;)N=Nr(N),O--;for(;R--;){if(ne===N||N!==null&&ne===N.alternate)break t;ne=Nr(ne),N=Nr(N)}ne=null}else ne=null;Q!==null&&xh(G,L,Q,ne,!1),Z!==null&&ot!==null&&xh(G,ot,Z,ne,!0)}}e:{if(L=k?Or(k):window,Q=L.nodeName&&L.nodeName.toLowerCase(),Q==="select"||Q==="input"&&L.type==="file")var oe=Ay;else if(Sh(L))if(Th)oe=wy;else{oe=Iy;var de=Ty}else(Q=L.nodeName)&&Q.toLowerCase()==="input"&&(L.type==="checkbox"||L.type==="radio")&&(oe=Ey);if(oe&&(oe=oe(t,k))){Ah(G,oe,s,B);break e}de&&de(t,L,k),t==="focusout"&&(de=L._wrapperState)&&de.controlled&&L.type==="number"&&Pn(L,"number",L.value)}switch(de=k?Or(k):window,t){case"focusin":(Sh(de)||de.contentEditable==="true")&&(Rr=de,Mu=k,Wo=null);break;case"focusout":Wo=Mu=Rr=null;break;case"mousedown":Fu=!0;break;case"contextmenu":case"mouseup":case"dragend":Fu=!1,Nh(G,s,B);break;case"selectionchange":if(Ry)break;case"keydown":case"keyup":Nh(G,s,B)}var fe;if(Nu)e:{switch(t){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Cr?vh(t,s)&&(Ae="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Ae="onCompositionStart");Ae&&(ph&&s.locale!=="ko"&&(Cr||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Cr&&(fe=uh()):(fi=B,Eu="value"in fi?fi.value:fi.textContent,Cr=!0)),de=va(k,Ae),0<de.length&&(Ae=new fh(Ae,t,null,s,B),G.push({event:Ae,listeners:de}),fe?Ae.data=fe:(fe=yh(s),fe!==null&&(Ae.data=fe)))),(fe=gy?my(t,s):vy(t,s))&&(k=va(k,"onBeforeInput"),0<k.length&&(B=new fh("onBeforeInput","beforeinput",null,s,B),G.push({event:B,listeners:k}),B.data=fe))}Bh(G,i)})}function Vo(t,i,s){return{instance:t,listener:i,currentTarget:s}}function va(t,i){for(var s=i+"Capture",u=[];t!==null;){var f=t,p=f.stateNode;f.tag===5&&p!==null&&(f=p,p=Po(t,s),p!=null&&u.unshift(Vo(t,p,f)),p=Po(t,i),p!=null&&u.push(Vo(t,p,f))),t=t.return}return u}function Nr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xh(t,i,s,u,f){for(var p=i._reactName,v=[];s!==null&&s!==u;){var A=s,E=A.alternate,k=A.stateNode;if(E!==null&&E===u)break;A.tag===5&&k!==null&&(A=k,f?(E=Po(s,p),E!=null&&v.unshift(Vo(s,E,A))):f||(E=Po(s,p),E!=null&&v.push(Vo(s,E,A)))),s=s.return}v.length!==0&&t.push({event:i,listeners:v})}var Oy=/\r\n?/g,ky=/\u0000|\uFFFD/g;function bh(t){return(typeof t=="string"?t:""+t).replace(Oy,`
`).replace(ky,"")}function ya(t,i,s){if(i=bh(i),bh(t)!==i&&s)throw Error(r(425))}function Sa(){}var xu=null,bu=null;function zu(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var $u=typeof setTimeout=="function"?setTimeout:void 0,My=typeof clearTimeout=="function"?clearTimeout:void 0,zh=typeof Promise=="function"?Promise:void 0,Fy=typeof queueMicrotask=="function"?queueMicrotask:typeof zh<"u"?function(t){return zh.resolve(null).then(t).catch(Uy)}:$u;function Uy(t){setTimeout(function(){throw t})}function Wu(t,i){var s=i,u=0;do{var f=s.nextSibling;if(t.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(u===0){t.removeChild(f),Lo(i);return}u--}else s!=="$"&&s!=="$?"&&s!=="$!"||u++;s=f}while(s);Lo(i)}function pi(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function $h(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return t;i--}else s==="/$"&&i++}t=t.previousSibling}return null}var Dr=Math.random().toString(36).slice(2),On="__reactFiber$"+Dr,Xo="__reactProps$"+Dr,$n="__reactContainer$"+Dr,Yu="__reactEvents$"+Dr,Hy="__reactListeners$"+Dr,Ly="__reactHandles$"+Dr;function Wi(t){var i=t[On];if(i)return i;for(var s=t.parentNode;s;){if(i=s[$n]||s[On]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=$h(t);t!==null;){if(s=t[On])return s;t=$h(t)}return i}t=s,s=t.parentNode}return null}function Ko(t){return t=t[On]||t[$n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Or(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function Aa(t){return t[Xo]||null}var ju=[],kr=-1;function gi(t){return{current:t}}function Ve(t){0>kr||(t.current=ju[kr],ju[kr]=null,kr--)}function We(t,i){kr++,ju[kr]=t.current,t.current=i}var mi={},wt=gi(mi),Gt=gi(!1),Yi=mi;function Mr(t,i){var s=t.type.contextTypes;if(!s)return mi;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var f={},p;for(p in s)f[p]=i[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=f),f}function xt(t){return t=t.childContextTypes,t!=null}function Ta(){Ve(Gt),Ve(wt)}function Wh(t,i,s){if(wt.current!==mi)throw Error(r(168));We(wt,i),We(Gt,s)}function Yh(t,i,s){var u=t.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return s;u=u.getChildContext();for(var f in u)if(!(f in i))throw Error(r(108,Se(t)||"Unknown",f));return z({},s,u)}function Ia(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mi,Yi=wt.current,We(wt,t),We(Gt,Gt.current),!0}function jh(t,i,s){var u=t.stateNode;if(!u)throw Error(r(169));s?(t=Yh(t,i,Yi),u.__reactInternalMemoizedMergedChildContext=t,Ve(Gt),Ve(wt),We(wt,t)):Ve(Gt),We(Gt,s)}var Wn=null,Ea=!1,Vu=!1;function Vh(t){Wn===null?Wn=[t]:Wn.push(t)}function By(t){Ea=!0,Vh(t)}function vi(){if(!Vu&&Wn!==null){Vu=!0;var t=0,i=ze;try{var s=Wn;for(ze=1;t<s.length;t++){var u=s[t];do u=u(!0);while(u!==null)}Wn=null,Ea=!1}catch(f){throw Wn!==null&&(Wn=Wn.slice(t+1)),Kf(gu,vi),f}finally{ze=i,Vu=!1}}return null}var Fr=[],Ur=0,wa=null,_a=0,rn=[],on=0,ji=null,Yn=1,jn="";function Vi(t,i){Fr[Ur++]=_a,Fr[Ur++]=wa,wa=t,_a=i}function Xh(t,i,s){rn[on++]=Yn,rn[on++]=jn,rn[on++]=ji,ji=t;var u=Yn;t=jn;var f=32-hn(u)-1;u&=~(1<<f),s+=1;var p=32-hn(i)+f;if(30<p){var v=f-f%5;p=(u&(1<<v)-1).toString(32),u>>=v,f-=v,Yn=1<<32-hn(i)+f|s<<f|u,jn=p+t}else Yn=1<<p|s<<f|u,jn=t}function Xu(t){t.return!==null&&(Vi(t,1),Xh(t,1,0))}function Ku(t){for(;t===wa;)wa=Fr[--Ur],Fr[Ur]=null,_a=Fr[--Ur],Fr[Ur]=null;for(;t===ji;)ji=rn[--on],rn[on]=null,jn=rn[--on],rn[on]=null,Yn=rn[--on],rn[on]=null}var Qt=null,qt=null,Qe=!1,gn=null;function Kh(t,i){var s=un(5,null,null,0);s.elementType="DELETED",s.stateNode=i,s.return=t,i=t.deletions,i===null?(t.deletions=[s],t.flags|=16):i.push(s)}function Qh(t,i){switch(t.tag){case 5:var s=t.type;return i=i.nodeType!==1||s.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,Qt=t,qt=pi(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,Qt=t,qt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(s=ji!==null?{id:Yn,overflow:jn}:null,t.memoizedState={dehydrated:i,treeContext:s,retryLane:1073741824},s=un(18,null,null,0),s.stateNode=i,s.return=t,t.child=s,Qt=t,qt=null,!0):!1;default:return!1}}function Qu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qu(t){if(Qe){var i=qt;if(i){var s=i;if(!Qh(t,i)){if(Qu(t))throw Error(r(418));i=pi(s.nextSibling);var u=Qt;i&&Qh(t,i)?Kh(u,s):(t.flags=t.flags&-4097|2,Qe=!1,Qt=t)}}else{if(Qu(t))throw Error(r(418));t.flags=t.flags&-4097|2,Qe=!1,Qt=t}}}function qh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function Ca(t){if(t!==Qt)return!1;if(!Qe)return qh(t),Qe=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!zu(t.type,t.memoizedProps)),i&&(i=qt)){if(Qu(t))throw Zh(),Error(r(418));for(;i;)Kh(t,i),i=pi(i.nextSibling)}if(qh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(i===0){qt=pi(t.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++}t=t.nextSibling}qt=null}}else qt=Qt?pi(t.stateNode.nextSibling):null;return!0}function Zh(){for(var t=qt;t;)t=pi(t.nextSibling)}function Hr(){qt=Qt=null,Qe=!1}function Zu(t){gn===null?gn=[t]:gn.push(t)}var Gy=x.ReactCurrentBatchConfig;function Qo(t,i,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var u=s.stateNode}if(!u)throw Error(r(147,t));var f=u,p=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(v){var A=f.refs;v===null?delete A[p]:A[p]=v},i._stringRef=p,i)}if(typeof t!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,t))}return t}function Ra(t,i){throw t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function Jh(t){var i=t._init;return i(t._payload)}function ep(t){function i(N,R){if(t){var O=N.deletions;O===null?(N.deletions=[R],N.flags|=16):O.push(R)}}function s(N,R){if(!t)return null;for(;R!==null;)i(N,R),R=R.sibling;return null}function u(N,R){for(N=new Map;R!==null;)R.key!==null?N.set(R.key,R):N.set(R.index,R),R=R.sibling;return N}function f(N,R){return N=_i(N,R),N.index=0,N.sibling=null,N}function p(N,R,O){return N.index=O,t?(O=N.alternate,O!==null?(O=O.index,O<R?(N.flags|=2,R):O):(N.flags|=2,R)):(N.flags|=1048576,R)}function v(N){return t&&N.alternate===null&&(N.flags|=2),N}function A(N,R,O,$){return R===null||R.tag!==6?(R=$c(O,N.mode,$),R.return=N,R):(R=f(R,O),R.return=N,R)}function E(N,R,O,$){var oe=O.type;return oe===Y?B(N,R,O.props.children,$,O.key):R!==null&&(R.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===ye&&Jh(oe)===R.type)?($=f(R,O.props),$.ref=Qo(N,R,O),$.return=N,$):($=qa(O.type,O.key,O.props,null,N.mode,$),$.ref=Qo(N,R,O),$.return=N,$)}function k(N,R,O,$){return R===null||R.tag!==4||R.stateNode.containerInfo!==O.containerInfo||R.stateNode.implementation!==O.implementation?(R=Wc(O,N.mode,$),R.return=N,R):(R=f(R,O.children||[]),R.return=N,R)}function B(N,R,O,$,oe){return R===null||R.tag!==7?(R=tr(O,N.mode,$,oe),R.return=N,R):(R=f(R,O),R.return=N,R)}function G(N,R,O){if(typeof R=="string"&&R!==""||typeof R=="number")return R=$c(""+R,N.mode,O),R.return=N,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case W:return O=qa(R.type,R.key,R.props,null,N.mode,O),O.ref=Qo(N,null,R),O.return=N,O;case F:return R=Wc(R,N.mode,O),R.return=N,R;case ye:var $=R._init;return G(N,$(R._payload),O)}if(Nn(R)||j(R))return R=tr(R,N.mode,O,null),R.return=N,R;Ra(N,R)}return null}function L(N,R,O,$){var oe=R!==null?R.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return oe!==null?null:A(N,R,""+O,$);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case W:return O.key===oe?E(N,R,O,$):null;case F:return O.key===oe?k(N,R,O,$):null;case ye:return oe=O._init,L(N,R,oe(O._payload),$)}if(Nn(O)||j(O))return oe!==null?null:B(N,R,O,$,null);Ra(N,O)}return null}function Q(N,R,O,$,oe){if(typeof $=="string"&&$!==""||typeof $=="number")return N=N.get(O)||null,A(R,N,""+$,oe);if(typeof $=="object"&&$!==null){switch($.$$typeof){case W:return N=N.get($.key===null?O:$.key)||null,E(R,N,$,oe);case F:return N=N.get($.key===null?O:$.key)||null,k(R,N,$,oe);case ye:var de=$._init;return Q(N,R,O,de($._payload),oe)}if(Nn($)||j($))return N=N.get(O)||null,B(R,N,$,oe,null);Ra(R,$)}return null}function Z(N,R,O,$){for(var oe=null,de=null,fe=R,Ae=R=0,pt=null;fe!==null&&Ae<O.length;Ae++){fe.index>Ae?(pt=fe,fe=null):pt=fe.sibling;var Ge=L(N,fe,O[Ae],$);if(Ge===null){fe===null&&(fe=pt);break}t&&fe&&Ge.alternate===null&&i(N,fe),R=p(Ge,R,Ae),de===null?oe=Ge:de.sibling=Ge,de=Ge,fe=pt}if(Ae===O.length)return s(N,fe),Qe&&Vi(N,Ae),oe;if(fe===null){for(;Ae<O.length;Ae++)fe=G(N,O[Ae],$),fe!==null&&(R=p(fe,R,Ae),de===null?oe=fe:de.sibling=fe,de=fe);return Qe&&Vi(N,Ae),oe}for(fe=u(N,fe);Ae<O.length;Ae++)pt=Q(fe,N,Ae,O[Ae],$),pt!==null&&(t&&pt.alternate!==null&&fe.delete(pt.key===null?Ae:pt.key),R=p(pt,R,Ae),de===null?oe=pt:de.sibling=pt,de=pt);return t&&fe.forEach(function(Ci){return i(N,Ci)}),Qe&&Vi(N,Ae),oe}function ne(N,R,O,$){var oe=j(O);if(typeof oe!="function")throw Error(r(150));if(O=oe.call(O),O==null)throw Error(r(151));for(var de=oe=null,fe=R,Ae=R=0,pt=null,Ge=O.next();fe!==null&&!Ge.done;Ae++,Ge=O.next()){fe.index>Ae?(pt=fe,fe=null):pt=fe.sibling;var Ci=L(N,fe,Ge.value,$);if(Ci===null){fe===null&&(fe=pt);break}t&&fe&&Ci.alternate===null&&i(N,fe),R=p(Ci,R,Ae),de===null?oe=Ci:de.sibling=Ci,de=Ci,fe=pt}if(Ge.done)return s(N,fe),Qe&&Vi(N,Ae),oe;if(fe===null){for(;!Ge.done;Ae++,Ge=O.next())Ge=G(N,Ge.value,$),Ge!==null&&(R=p(Ge,R,Ae),de===null?oe=Ge:de.sibling=Ge,de=Ge);return Qe&&Vi(N,Ae),oe}for(fe=u(N,fe);!Ge.done;Ae++,Ge=O.next())Ge=Q(fe,N,Ae,Ge.value,$),Ge!==null&&(t&&Ge.alternate!==null&&fe.delete(Ge.key===null?Ae:Ge.key),R=p(Ge,R,Ae),de===null?oe=Ge:de.sibling=Ge,de=Ge);return t&&fe.forEach(function(yS){return i(N,yS)}),Qe&&Vi(N,Ae),oe}function ot(N,R,O,$){if(typeof O=="object"&&O!==null&&O.type===Y&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case W:e:{for(var oe=O.key,de=R;de!==null;){if(de.key===oe){if(oe=O.type,oe===Y){if(de.tag===7){s(N,de.sibling),R=f(de,O.props.children),R.return=N,N=R;break e}}else if(de.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===ye&&Jh(oe)===de.type){s(N,de.sibling),R=f(de,O.props),R.ref=Qo(N,de,O),R.return=N,N=R;break e}s(N,de);break}else i(N,de);de=de.sibling}O.type===Y?(R=tr(O.props.children,N.mode,$,O.key),R.return=N,N=R):($=qa(O.type,O.key,O.props,null,N.mode,$),$.ref=Qo(N,R,O),$.return=N,N=$)}return v(N);case F:e:{for(de=O.key;R!==null;){if(R.key===de)if(R.tag===4&&R.stateNode.containerInfo===O.containerInfo&&R.stateNode.implementation===O.implementation){s(N,R.sibling),R=f(R,O.children||[]),R.return=N,N=R;break e}else{s(N,R);break}else i(N,R);R=R.sibling}R=Wc(O,N.mode,$),R.return=N,N=R}return v(N);case ye:return de=O._init,ot(N,R,de(O._payload),$)}if(Nn(O))return Z(N,R,O,$);if(j(O))return ne(N,R,O,$);Ra(N,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,R!==null&&R.tag===6?(s(N,R.sibling),R=f(R,O),R.return=N,N=R):(s(N,R),R=$c(O,N.mode,$),R.return=N,N=R),v(N)):s(N,R)}return ot}var Lr=ep(!0),tp=ep(!1),Pa=gi(null),Na=null,Br=null,Ju=null;function ec(){Ju=Br=Na=null}function tc(t){var i=Pa.current;Ve(Pa),t._currentValue=i}function nc(t,i,s){for(;t!==null;){var u=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),t===s)break;t=t.return}}function Gr(t,i){Na=t,Ju=Br=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(bt=!0),t.firstContext=null)}function sn(t){var i=t._currentValue;if(Ju!==t)if(t={context:t,memoizedValue:i,next:null},Br===null){if(Na===null)throw Error(r(308));Br=t,Na.dependencies={lanes:0,firstContext:t}}else Br=Br.next=t;return i}var Xi=null;function ic(t){Xi===null?Xi=[t]:Xi.push(t)}function np(t,i,s,u){var f=i.interleaved;return f===null?(s.next=s,ic(i)):(s.next=f.next,f.next=s),i.interleaved=s,Vn(t,u)}function Vn(t,i){t.lanes|=i;var s=t.alternate;for(s!==null&&(s.lanes|=i),s=t,t=t.return;t!==null;)t.childLanes|=i,s=t.alternate,s!==null&&(s.childLanes|=i),s=t,t=t.return;return s.tag===3?s.stateNode:null}var yi=!1;function rc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ip(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function Si(t,i,s){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Le&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,Vn(t,s)}return f=u.interleaved,f===null?(i.next=i,ic(u)):(i.next=f.next,f.next=i),u.interleaved=i,Vn(t,s)}function Da(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194240)!==0)){var u=i.lanes;u&=t.pendingLanes,s|=u,i.lanes=s,yu(t,s)}}function rp(t,i){var s=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var f=null,p=null;if(s=s.firstBaseUpdate,s!==null){do{var v={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};p===null?f=p=v:p=p.next=v,s=s.next}while(s!==null);p===null?f=p=i:p=p.next=i}else f=p=i;s={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}function Oa(t,i,s,u){var f=t.updateQueue;yi=!1;var p=f.firstBaseUpdate,v=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var E=A,k=E.next;E.next=null,v===null?p=k:v.next=k,v=E;var B=t.alternate;B!==null&&(B=B.updateQueue,A=B.lastBaseUpdate,A!==v&&(A===null?B.firstBaseUpdate=k:A.next=k,B.lastBaseUpdate=E))}if(p!==null){var G=f.baseState;v=0,B=k=E=null,A=p;do{var L=A.lane,Q=A.eventTime;if((u&L)===L){B!==null&&(B=B.next={eventTime:Q,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var Z=t,ne=A;switch(L=i,Q=s,ne.tag){case 1:if(Z=ne.payload,typeof Z=="function"){G=Z.call(Q,G,L);break e}G=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=ne.payload,L=typeof Z=="function"?Z.call(Q,G,L):Z,L==null)break e;G=z({},G,L);break e;case 2:yi=!0}}A.callback!==null&&A.lane!==0&&(t.flags|=64,L=f.effects,L===null?f.effects=[A]:L.push(A))}else Q={eventTime:Q,lane:L,tag:A.tag,payload:A.payload,callback:A.callback,next:null},B===null?(k=B=Q,E=G):B=B.next=Q,v|=L;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;L=A,A=L.next,L.next=null,f.lastBaseUpdate=L,f.shared.pending=null}}while(!0);if(B===null&&(E=G),f.baseState=E,f.firstBaseUpdate=k,f.lastBaseUpdate=B,i=f.shared.interleaved,i!==null){f=i;do v|=f.lane,f=f.next;while(f!==i)}else p===null&&(f.shared.lanes=0);qi|=v,t.lanes=v,t.memoizedState=G}}function op(t,i,s){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var u=t[i],f=u.callback;if(f!==null){if(u.callback=null,u=s,typeof f!="function")throw Error(r(191,f));f.call(u)}}}var qo={},kn=gi(qo),Zo=gi(qo),Jo=gi(qo);function Ki(t){if(t===qo)throw Error(r(174));return t}function oc(t,i){switch(We(Jo,i),We(Zo,t),We(kn,qo),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:su(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=su(i,t)}Ve(kn),We(kn,i)}function xr(){Ve(kn),Ve(Zo),Ve(Jo)}function sp(t){Ki(Jo.current);var i=Ki(kn.current),s=su(i,t.type);i!==s&&(We(Zo,t),We(kn,s))}function sc(t){Zo.current===t&&(Ve(kn),Ve(Zo))}var tt=gi(0);function ka(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ac=[];function lc(){for(var t=0;t<ac.length;t++)ac[t]._workInProgressVersionPrimary=null;ac.length=0}var Ma=x.ReactCurrentDispatcher,uc=x.ReactCurrentBatchConfig,Qi=0,nt=null,ct=null,ft=null,Fa=!1,es=!1,ts=0,xy=0;function _t(){throw Error(r(321))}function cc(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!pn(t[s],i[s]))return!1;return!0}function dc(t,i,s,u,f,p){if(Qi=p,nt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Ma.current=t===null||t.memoizedState===null?Wy:Yy,t=s(u,f),es){p=0;do{if(es=!1,ts=0,25<=p)throw Error(r(301));p+=1,ft=ct=null,i.updateQueue=null,Ma.current=jy,t=s(u,f)}while(es)}if(Ma.current=La,i=ct!==null&&ct.next!==null,Qi=0,ft=ct=nt=null,Fa=!1,i)throw Error(r(300));return t}function fc(){var t=ts!==0;return ts=0,t}function Mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?nt.memoizedState=ft=t:ft=ft.next=t,ft}function an(){if(ct===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var i=ft===null?nt.memoizedState:ft.next;if(i!==null)ft=i,ct=t;else{if(t===null)throw Error(r(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},ft===null?nt.memoizedState=ft=t:ft=ft.next=t}return ft}function ns(t,i){return typeof i=="function"?i(t):i}function hc(t){var i=an(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var u=ct,f=u.baseQueue,p=s.pending;if(p!==null){if(f!==null){var v=f.next;f.next=p.next,p.next=v}u.baseQueue=f=p,s.pending=null}if(f!==null){p=f.next,u=u.baseState;var A=v=null,E=null,k=p;do{var B=k.lane;if((Qi&B)===B)E!==null&&(E=E.next={lane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),u=k.hasEagerState?k.eagerState:t(u,k.action);else{var G={lane:B,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null};E===null?(A=E=G,v=u):E=E.next=G,nt.lanes|=B,qi|=B}k=k.next}while(k!==null&&k!==p);E===null?v=u:E.next=A,pn(u,i.memoizedState)||(bt=!0),i.memoizedState=u,i.baseState=v,i.baseQueue=E,s.lastRenderedState=u}if(t=s.interleaved,t!==null){f=t;do p=f.lane,nt.lanes|=p,qi|=p,f=f.next;while(f!==t)}else f===null&&(s.lanes=0);return[i.memoizedState,s.dispatch]}function pc(t){var i=an(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var u=s.dispatch,f=s.pending,p=i.memoizedState;if(f!==null){s.pending=null;var v=f=f.next;do p=t(p,v.action),v=v.next;while(v!==f);pn(p,i.memoizedState)||(bt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),s.lastRenderedState=p}return[p,u]}function ap(){}function lp(t,i){var s=nt,u=an(),f=i(),p=!pn(u.memoizedState,f);if(p&&(u.memoizedState=f,bt=!0),u=u.queue,gc(dp.bind(null,s,u,t),[t]),u.getSnapshot!==i||p||ft!==null&&ft.memoizedState.tag&1){if(s.flags|=2048,is(9,cp.bind(null,s,u,f,i),void 0,null),ht===null)throw Error(r(349));(Qi&30)!==0||up(s,i,f)}return f}function up(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=nt.updateQueue,i===null?(i={lastEffect:null,stores:null},nt.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function cp(t,i,s,u){i.value=s,i.getSnapshot=u,fp(i)&&hp(t)}function dp(t,i,s){return s(function(){fp(i)&&hp(t)})}function fp(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!pn(t,s)}catch{return!0}}function hp(t){var i=Vn(t,1);i!==null&&Sn(i,t,1,-1)}function pp(t){var i=Mn();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:t},i.queue=t,t=t.dispatch=$y.bind(null,nt,t),[i.memoizedState,t]}function is(t,i,s,u){return t={tag:t,create:i,destroy:s,deps:u,next:null},i=nt.updateQueue,i===null?(i={lastEffect:null,stores:null},nt.updateQueue=i,i.lastEffect=t.next=t):(s=i.lastEffect,s===null?i.lastEffect=t.next=t:(u=s.next,s.next=t,t.next=u,i.lastEffect=t)),t}function gp(){return an().memoizedState}function Ua(t,i,s,u){var f=Mn();nt.flags|=t,f.memoizedState=is(1|i,s,void 0,u===void 0?null:u)}function Ha(t,i,s,u){var f=an();u=u===void 0?null:u;var p=void 0;if(ct!==null){var v=ct.memoizedState;if(p=v.destroy,u!==null&&cc(u,v.deps)){f.memoizedState=is(i,s,p,u);return}}nt.flags|=t,f.memoizedState=is(1|i,s,p,u)}function mp(t,i){return Ua(8390656,8,t,i)}function gc(t,i){return Ha(2048,8,t,i)}function vp(t,i){return Ha(4,2,t,i)}function yp(t,i){return Ha(4,4,t,i)}function Sp(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Ap(t,i,s){return s=s!=null?s.concat([t]):null,Ha(4,4,Sp.bind(null,i,t),s)}function mc(){}function Tp(t,i){var s=an();i=i===void 0?null:i;var u=s.memoizedState;return u!==null&&i!==null&&cc(i,u[1])?u[0]:(s.memoizedState=[t,i],t)}function Ip(t,i){var s=an();i=i===void 0?null:i;var u=s.memoizedState;return u!==null&&i!==null&&cc(i,u[1])?u[0]:(t=t(),s.memoizedState=[t,i],t)}function Ep(t,i,s){return(Qi&21)===0?(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=s):(pn(s,i)||(s=Jf(),nt.lanes|=s,qi|=s,t.baseState=!0),i)}function by(t,i){var s=ze;ze=s!==0&&4>s?s:4,t(!0);var u=uc.transition;uc.transition={};try{t(!1),i()}finally{ze=s,uc.transition=u}}function wp(){return an().memoizedState}function zy(t,i,s){var u=Ei(t);if(s={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null},_p(t))Cp(i,s);else if(s=np(t,i,s,u),s!==null){var f=Ot();Sn(s,t,u,f),Rp(s,i,u)}}function $y(t,i,s){var u=Ei(t),f={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null};if(_p(t))Cp(i,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,A=p(v,s);if(f.hasEagerState=!0,f.eagerState=A,pn(A,v)){var E=i.interleaved;E===null?(f.next=f,ic(i)):(f.next=E.next,E.next=f),i.interleaved=f;return}}catch{}finally{}s=np(t,i,f,u),s!==null&&(f=Ot(),Sn(s,t,u,f),Rp(s,i,u))}}function _p(t){var i=t.alternate;return t===nt||i!==null&&i===nt}function Cp(t,i){es=Fa=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function Rp(t,i,s){if((s&4194240)!==0){var u=i.lanes;u&=t.pendingLanes,s|=u,i.lanes=s,yu(t,s)}}var La={readContext:sn,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},Wy={readContext:sn,useCallback:function(t,i){return Mn().memoizedState=[t,i===void 0?null:i],t},useContext:sn,useEffect:mp,useImperativeHandle:function(t,i,s){return s=s!=null?s.concat([t]):null,Ua(4194308,4,Sp.bind(null,i,t),s)},useLayoutEffect:function(t,i){return Ua(4194308,4,t,i)},useInsertionEffect:function(t,i){return Ua(4,2,t,i)},useMemo:function(t,i){var s=Mn();return i=i===void 0?null:i,t=t(),s.memoizedState=[t,i],t},useReducer:function(t,i,s){var u=Mn();return i=s!==void 0?s(i):i,u.memoizedState=u.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},u.queue=t,t=t.dispatch=zy.bind(null,nt,t),[u.memoizedState,t]},useRef:function(t){var i=Mn();return t={current:t},i.memoizedState=t},useState:pp,useDebugValue:mc,useDeferredValue:function(t){return Mn().memoizedState=t},useTransition:function(){var t=pp(!1),i=t[0];return t=by.bind(null,t[1]),Mn().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,s){var u=nt,f=Mn();if(Qe){if(s===void 0)throw Error(r(407));s=s()}else{if(s=i(),ht===null)throw Error(r(349));(Qi&30)!==0||up(u,i,s)}f.memoizedState=s;var p={value:s,getSnapshot:i};return f.queue=p,mp(dp.bind(null,u,p,t),[t]),u.flags|=2048,is(9,cp.bind(null,u,p,s,i),void 0,null),s},useId:function(){var t=Mn(),i=ht.identifierPrefix;if(Qe){var s=jn,u=Yn;s=(u&~(1<<32-hn(u)-1)).toString(32)+s,i=":"+i+"R"+s,s=ts++,0<s&&(i+="H"+s.toString(32)),i+=":"}else s=xy++,i=":"+i+"r"+s.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},Yy={readContext:sn,useCallback:Tp,useContext:sn,useEffect:gc,useImperativeHandle:Ap,useInsertionEffect:vp,useLayoutEffect:yp,useMemo:Ip,useReducer:hc,useRef:gp,useState:function(){return hc(ns)},useDebugValue:mc,useDeferredValue:function(t){var i=an();return Ep(i,ct.memoizedState,t)},useTransition:function(){var t=hc(ns)[0],i=an().memoizedState;return[t,i]},useMutableSource:ap,useSyncExternalStore:lp,useId:wp,unstable_isNewReconciler:!1},jy={readContext:sn,useCallback:Tp,useContext:sn,useEffect:gc,useImperativeHandle:Ap,useInsertionEffect:vp,useLayoutEffect:yp,useMemo:Ip,useReducer:pc,useRef:gp,useState:function(){return pc(ns)},useDebugValue:mc,useDeferredValue:function(t){var i=an();return ct===null?i.memoizedState=t:Ep(i,ct.memoizedState,t)},useTransition:function(){var t=pc(ns)[0],i=an().memoizedState;return[t,i]},useMutableSource:ap,useSyncExternalStore:lp,useId:wp,unstable_isNewReconciler:!1};function mn(t,i){if(t&&t.defaultProps){i=z({},i),t=t.defaultProps;for(var s in t)i[s]===void 0&&(i[s]=t[s]);return i}return i}function vc(t,i,s,u){i=t.memoizedState,s=s(u,i),s=s==null?i:z({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Ba={isMounted:function(t){return(t=t._reactInternals)?$i(t)===t:!1},enqueueSetState:function(t,i,s){t=t._reactInternals;var u=Ot(),f=Ei(t),p=Xn(u,f);p.payload=i,s!=null&&(p.callback=s),i=Si(t,p,f),i!==null&&(Sn(i,t,f,u),Da(i,t,f))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var u=Ot(),f=Ei(t),p=Xn(u,f);p.tag=1,p.payload=i,s!=null&&(p.callback=s),i=Si(t,p,f),i!==null&&(Sn(i,t,f,u),Da(i,t,f))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=Ot(),u=Ei(t),f=Xn(s,u);f.tag=2,i!=null&&(f.callback=i),i=Si(t,f,u),i!==null&&(Sn(i,t,u,s),Da(i,t,u))}};function Pp(t,i,s,u,f,p,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,v):i.prototype&&i.prototype.isPureReactComponent?!$o(s,u)||!$o(f,p):!0}function Np(t,i,s){var u=!1,f=mi,p=i.contextType;return typeof p=="object"&&p!==null?p=sn(p):(f=xt(i)?Yi:wt.current,u=i.contextTypes,p=(u=u!=null)?Mr(t,f):mi),i=new i(s,p),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ba,t.stateNode=i,i._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=f,t.__reactInternalMemoizedMaskedChildContext=p),i}function Dp(t,i,s,u){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,u),i.state!==t&&Ba.enqueueReplaceState(i,i.state,null)}function yc(t,i,s,u){var f=t.stateNode;f.props=s,f.state=t.memoizedState,f.refs={},rc(t);var p=i.contextType;typeof p=="object"&&p!==null?f.context=sn(p):(p=xt(i)?Yi:wt.current,f.context=Mr(t,p)),f.state=t.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(vc(t,i,p,s),f.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&Ba.enqueueReplaceState(f,f.state,null),Oa(t,s,f,u),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308)}function br(t,i){try{var s="",u=i;do s+=he(u),u=u.return;while(u);var f=s}catch(p){f=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:i,stack:f,digest:null}}function Sc(t,i,s){return{value:t,source:null,stack:s??null,digest:i??null}}function Ac(t,i){try{console.error(i.value)}catch(s){setTimeout(function(){throw s})}}var Vy=typeof WeakMap=="function"?WeakMap:Map;function Op(t,i,s){s=Xn(-1,s),s.tag=3,s.payload={element:null};var u=i.value;return s.callback=function(){Ya||(Ya=!0,Uc=u),Ac(t,i)},s}function kp(t,i,s){s=Xn(-1,s),s.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var f=i.value;s.payload=function(){return u(f)},s.callback=function(){Ac(t,i)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(s.callback=function(){Ac(t,i),typeof u!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),s}function Mp(t,i,s){var u=t.pingCache;if(u===null){u=t.pingCache=new Vy;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(s)||(f.add(s),t=aS.bind(null,t,i,s),i.then(t,t))}function Fp(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function Up(t,i,s,u,f){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(i=Xn(-1,1),i.tag=2,Si(s,i,1))),s.lanes|=1),t):(t.flags|=65536,t.lanes=f,t)}var Xy=x.ReactCurrentOwner,bt=!1;function Dt(t,i,s,u){i.child=t===null?tp(i,null,s,u):Lr(i,t.child,s,u)}function Hp(t,i,s,u,f){s=s.render;var p=i.ref;return Gr(i,f),u=dc(t,i,s,u,p,f),s=fc(),t!==null&&!bt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~f,Kn(t,i,f)):(Qe&&s&&Xu(i),i.flags|=1,Dt(t,i,u,f),i.child)}function Lp(t,i,s,u,f){if(t===null){var p=s.type;return typeof p=="function"&&!zc(p)&&p.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(i.tag=15,i.type=p,Bp(t,i,p,u,f)):(t=qa(s.type,null,u,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(p=t.child,(t.lanes&f)===0){var v=p.memoizedProps;if(s=s.compare,s=s!==null?s:$o,s(v,u)&&t.ref===i.ref)return Kn(t,i,f)}return i.flags|=1,t=_i(p,u),t.ref=i.ref,t.return=i,i.child=t}function Bp(t,i,s,u,f){if(t!==null){var p=t.memoizedProps;if($o(p,u)&&t.ref===i.ref)if(bt=!1,i.pendingProps=u=p,(t.lanes&f)!==0)(t.flags&131072)!==0&&(bt=!0);else return i.lanes=t.lanes,Kn(t,i,f)}return Tc(t,i,s,u,f)}function Gp(t,i,s){var u=i.pendingProps,f=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},We($r,Zt),Zt|=s;else{if((s&1073741824)===0)return t=p!==null?p.baseLanes|s:s,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,We($r,Zt),Zt|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:s,We($r,Zt),Zt|=u}else p!==null?(u=p.baseLanes|s,i.memoizedState=null):u=s,We($r,Zt),Zt|=u;return Dt(t,i,f,s),i.child}function xp(t,i){var s=i.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(i.flags|=512,i.flags|=2097152)}function Tc(t,i,s,u,f){var p=xt(s)?Yi:wt.current;return p=Mr(i,p),Gr(i,f),s=dc(t,i,s,u,p,f),u=fc(),t!==null&&!bt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~f,Kn(t,i,f)):(Qe&&u&&Xu(i),i.flags|=1,Dt(t,i,s,f),i.child)}function bp(t,i,s,u,f){if(xt(s)){var p=!0;Ia(i)}else p=!1;if(Gr(i,f),i.stateNode===null)xa(t,i),Np(i,s,u),yc(i,s,u,f),u=!0;else if(t===null){var v=i.stateNode,A=i.memoizedProps;v.props=A;var E=v.context,k=s.contextType;typeof k=="object"&&k!==null?k=sn(k):(k=xt(s)?Yi:wt.current,k=Mr(i,k));var B=s.getDerivedStateFromProps,G=typeof B=="function"||typeof v.getSnapshotBeforeUpdate=="function";G||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==u||E!==k)&&Dp(i,v,u,k),yi=!1;var L=i.memoizedState;v.state=L,Oa(i,u,v,f),E=i.memoizedState,A!==u||L!==E||Gt.current||yi?(typeof B=="function"&&(vc(i,s,B,u),E=i.memoizedState),(A=yi||Pp(i,s,A,u,L,E,k))?(G||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=E),v.props=u,v.state=E,v.context=k,u=A):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{v=i.stateNode,ip(t,i),A=i.memoizedProps,k=i.type===i.elementType?A:mn(i.type,A),v.props=k,G=i.pendingProps,L=v.context,E=s.contextType,typeof E=="object"&&E!==null?E=sn(E):(E=xt(s)?Yi:wt.current,E=Mr(i,E));var Q=s.getDerivedStateFromProps;(B=typeof Q=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==G||L!==E)&&Dp(i,v,u,E),yi=!1,L=i.memoizedState,v.state=L,Oa(i,u,v,f);var Z=i.memoizedState;A!==G||L!==Z||Gt.current||yi?(typeof Q=="function"&&(vc(i,s,Q,u),Z=i.memoizedState),(k=yi||Pp(i,s,k,u,L,Z,E)||!1)?(B||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,Z,E),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,Z,E)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===t.memoizedProps&&L===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&L===t.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Z),v.props=u,v.state=Z,v.context=E,u=k):(typeof v.componentDidUpdate!="function"||A===t.memoizedProps&&L===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&L===t.memoizedState||(i.flags|=1024),u=!1)}return Ic(t,i,s,u,p,f)}function Ic(t,i,s,u,f,p){xp(t,i);var v=(i.flags&128)!==0;if(!u&&!v)return f&&jh(i,s,!1),Kn(t,i,p);u=i.stateNode,Xy.current=i;var A=v&&typeof s.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,t!==null&&v?(i.child=Lr(i,t.child,null,p),i.child=Lr(i,null,A,p)):Dt(t,i,A,p),i.memoizedState=u.state,f&&jh(i,s,!0),i.child}function zp(t){var i=t.stateNode;i.pendingContext?Wh(t,i.pendingContext,i.pendingContext!==i.context):i.context&&Wh(t,i.context,!1),oc(t,i.containerInfo)}function $p(t,i,s,u,f){return Hr(),Zu(f),i.flags|=256,Dt(t,i,s,u),i.child}var Ec={dehydrated:null,treeContext:null,retryLane:0};function wc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wp(t,i,s){var u=i.pendingProps,f=tt.current,p=!1,v=(i.flags&128)!==0,A;if((A=v)||(A=t!==null&&t.memoizedState===null?!1:(f&2)!==0),A?(p=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(f|=1),We(tt,f&1),t===null)return qu(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=u.children,t=u.fallback,p?(u=i.mode,p=i.child,v={mode:"hidden",children:v},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=Za(v,u,0,null),t=tr(t,u,s,null),p.return=i,t.return=i,p.sibling=t,i.child=p,i.child.memoizedState=wc(s),i.memoizedState=Ec,t):_c(i,v));if(f=t.memoizedState,f!==null&&(A=f.dehydrated,A!==null))return Ky(t,i,v,u,A,f,s);if(p){p=u.fallback,v=i.mode,f=t.child,A=f.sibling;var E={mode:"hidden",children:u.children};return(v&1)===0&&i.child!==f?(u=i.child,u.childLanes=0,u.pendingProps=E,i.deletions=null):(u=_i(f,E),u.subtreeFlags=f.subtreeFlags&14680064),A!==null?p=_i(A,p):(p=tr(p,v,s,null),p.flags|=2),p.return=i,u.return=i,u.sibling=p,i.child=u,u=p,p=i.child,v=t.child.memoizedState,v=v===null?wc(s):{baseLanes:v.baseLanes|s,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=t.childLanes&~s,i.memoizedState=Ec,u}return p=t.child,t=p.sibling,u=_i(p,{mode:"visible",children:u.children}),(i.mode&1)===0&&(u.lanes=s),u.return=i,u.sibling=null,t!==null&&(s=i.deletions,s===null?(i.deletions=[t],i.flags|=16):s.push(t)),i.child=u,i.memoizedState=null,u}function _c(t,i){return i=Za({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function Ga(t,i,s,u){return u!==null&&Zu(u),Lr(i,t.child,null,s),t=_c(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Ky(t,i,s,u,f,p,v){if(s)return i.flags&256?(i.flags&=-257,u=Sc(Error(r(422))),Ga(t,i,v,u)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(p=u.fallback,f=i.mode,u=Za({mode:"visible",children:u.children},f,0,null),p=tr(p,f,v,null),p.flags|=2,u.return=i,p.return=i,u.sibling=p,i.child=u,(i.mode&1)!==0&&Lr(i,t.child,null,v),i.child.memoizedState=wc(v),i.memoizedState=Ec,p);if((i.mode&1)===0)return Ga(t,i,v,null);if(f.data==="$!"){if(u=f.nextSibling&&f.nextSibling.dataset,u)var A=u.dgst;return u=A,p=Error(r(419)),u=Sc(p,u,void 0),Ga(t,i,v,u)}if(A=(v&t.childLanes)!==0,bt||A){if(u=ht,u!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(u.suspendedLanes|v))!==0?0:f,f!==0&&f!==p.retryLane&&(p.retryLane=f,Vn(t,f),Sn(u,t,f,-1))}return bc(),u=Sc(Error(r(421))),Ga(t,i,v,u)}return f.data==="$?"?(i.flags|=128,i.child=t.child,i=lS.bind(null,t),f._reactRetry=i,null):(t=p.treeContext,qt=pi(f.nextSibling),Qt=i,Qe=!0,gn=null,t!==null&&(rn[on++]=Yn,rn[on++]=jn,rn[on++]=ji,Yn=t.id,jn=t.overflow,ji=i),i=_c(i,u.children),i.flags|=4096,i)}function Yp(t,i,s){t.lanes|=i;var u=t.alternate;u!==null&&(u.lanes|=i),nc(t.return,i,s)}function Cc(t,i,s,u,f){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:f}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=s,p.tailMode=f)}function jp(t,i,s){var u=i.pendingProps,f=u.revealOrder,p=u.tail;if(Dt(t,i,u.children,s),u=tt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yp(t,s,i);else if(t.tag===19)Yp(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(We(tt,u),(i.mode&1)===0)i.memoizedState=null;else switch(f){case"forwards":for(s=i.child,f=null;s!==null;)t=s.alternate,t!==null&&ka(t)===null&&(f=s),s=s.sibling;s=f,s===null?(f=i.child,i.child=null):(f=s.sibling,s.sibling=null),Cc(i,!1,f,s,p);break;case"backwards":for(s=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&ka(t)===null){i.child=f;break}t=f.sibling,f.sibling=s,s=f,f=t}Cc(i,!0,s,null,p);break;case"together":Cc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function xa(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function Kn(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),qi|=i.lanes,(s&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,s=_i(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=_i(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function Qy(t,i,s){switch(i.tag){case 3:zp(i),Hr();break;case 5:sp(i);break;case 1:xt(i.type)&&Ia(i);break;case 4:oc(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,f=i.memoizedProps.value;We(Pa,u._currentValue),u._currentValue=f;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(We(tt,tt.current&1),i.flags|=128,null):(s&i.child.childLanes)!==0?Wp(t,i,s):(We(tt,tt.current&1),t=Kn(t,i,s),t!==null?t.sibling:null);We(tt,tt.current&1);break;case 19:if(u=(s&i.childLanes)!==0,(t.flags&128)!==0){if(u)return jp(t,i,s);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),We(tt,tt.current),u)break;return null;case 22:case 23:return i.lanes=0,Gp(t,i,s)}return Kn(t,i,s)}var Vp,Rc,Xp,Kp;Vp=function(t,i){for(var s=i.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Rc=function(){},Xp=function(t,i,s,u){var f=t.memoizedProps;if(f!==u){t=i.stateNode,Ki(kn.current);var p=null;switch(s){case"input":f=Ke(t,f),u=Ke(t,u),p=[];break;case"select":f=z({},f,{value:void 0}),u=z({},u,{value:void 0}),p=[];break;case"textarea":f=zi(t,f),u=zi(t,u),p=[];break;default:typeof f.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Sa)}au(s,u);var v;s=null;for(k in f)if(!u.hasOwnProperty(k)&&f.hasOwnProperty(k)&&f[k]!=null)if(k==="style"){var A=f[k];for(v in A)A.hasOwnProperty(v)&&(s||(s={}),s[v]="")}else k!=="dangerouslySetInnerHTML"&&k!=="children"&&k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(a.hasOwnProperty(k)?p||(p=[]):(p=p||[]).push(k,null));for(k in u){var E=u[k];if(A=f!=null?f[k]:void 0,u.hasOwnProperty(k)&&E!==A&&(E!=null||A!=null))if(k==="style")if(A){for(v in A)!A.hasOwnProperty(v)||E&&E.hasOwnProperty(v)||(s||(s={}),s[v]="");for(v in E)E.hasOwnProperty(v)&&A[v]!==E[v]&&(s||(s={}),s[v]=E[v])}else s||(p||(p=[]),p.push(k,s)),s=E;else k==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,A=A?A.__html:void 0,E!=null&&A!==E&&(p=p||[]).push(k,E)):k==="children"?typeof E!="string"&&typeof E!="number"||(p=p||[]).push(k,""+E):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&(a.hasOwnProperty(k)?(E!=null&&k==="onScroll"&&je("scroll",t),p||A===E||(p=[])):(p=p||[]).push(k,E))}s&&(p=p||[]).push("style",s);var k=p;(i.updateQueue=k)&&(i.flags|=4)}},Kp=function(t,i,s,u){s!==u&&(i.flags|=4)};function rs(t,i){if(!Qe)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Ct(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,u=0;if(i)for(var f=t.child;f!==null;)s|=f.lanes|f.childLanes,u|=f.subtreeFlags&14680064,u|=f.flags&14680064,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)s|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=u,t.childLanes=s,i}function qy(t,i,s){var u=i.pendingProps;switch(Ku(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(i),null;case 1:return xt(i.type)&&Ta(),Ct(i),null;case 3:return u=i.stateNode,xr(),Ve(Gt),Ve(wt),lc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(Ca(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,gn!==null&&(Bc(gn),gn=null))),Rc(t,i),Ct(i),null;case 5:sc(i);var f=Ki(Jo.current);if(s=i.type,t!==null&&i.stateNode!=null)Xp(t,i,s,u,f),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(r(166));return Ct(i),null}if(t=Ki(kn.current),Ca(i)){u=i.stateNode,s=i.type;var p=i.memoizedProps;switch(u[On]=i,u[Xo]=p,t=(i.mode&1)!==0,s){case"dialog":je("cancel",u),je("close",u);break;case"iframe":case"object":case"embed":je("load",u);break;case"video":case"audio":for(f=0;f<Yo.length;f++)je(Yo[f],u);break;case"source":je("error",u);break;case"img":case"image":case"link":je("error",u),je("load",u);break;case"details":je("toggle",u);break;case"input":Ye(u,p),je("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},je("invalid",u);break;case"textarea":kf(u,p),je("invalid",u)}au(s,p),f=null;for(var v in p)if(p.hasOwnProperty(v)){var A=p[v];v==="children"?typeof A=="string"?u.textContent!==A&&(p.suppressHydrationWarning!==!0&&ya(u.textContent,A,t),f=["children",A]):typeof A=="number"&&u.textContent!==""+A&&(p.suppressHydrationWarning!==!0&&ya(u.textContent,A,t),f=["children",""+A]):a.hasOwnProperty(v)&&A!=null&&v==="onScroll"&&je("scroll",u)}switch(s){case"input":Oe(u),nn(u,p,!0);break;case"textarea":Oe(u),Ff(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=Sa)}u=f,i.updateQueue=u,u!==null&&(i.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Uf(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=v.createElement(s,{is:u.is}):(t=v.createElement(s),s==="select"&&(v=t,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):t=v.createElementNS(t,s),t[On]=i,t[Xo]=u,Vp(t,i,!1,!1),i.stateNode=t;e:{switch(v=lu(s,u),s){case"dialog":je("cancel",t),je("close",t),f=u;break;case"iframe":case"object":case"embed":je("load",t),f=u;break;case"video":case"audio":for(f=0;f<Yo.length;f++)je(Yo[f],t);f=u;break;case"source":je("error",t),f=u;break;case"img":case"image":case"link":je("error",t),je("load",t),f=u;break;case"details":je("toggle",t),f=u;break;case"input":Ye(t,u),f=Ke(t,u),je("invalid",t);break;case"option":f=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},f=z({},u,{value:void 0}),je("invalid",t);break;case"textarea":kf(t,u),f=zi(t,u),je("invalid",t);break;default:f=u}au(s,f),A=f;for(p in A)if(A.hasOwnProperty(p)){var E=A[p];p==="style"?Bf(t,E):p==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&Hf(t,E)):p==="children"?typeof E=="string"?(s!=="textarea"||E!=="")&&Co(t,E):typeof E=="number"&&Co(t,""+E):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?E!=null&&p==="onScroll"&&je("scroll",t):E!=null&&D(t,p,E,v))}switch(s){case"input":Oe(t),nn(t,u,!1);break;case"textarea":Oe(t),Ff(t);break;case"option":u.value!=null&&t.setAttribute("value",""+ve(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?ai(t,!!u.multiple,p,!1):u.defaultValue!=null&&ai(t,!!u.multiple,u.defaultValue,!0);break;default:typeof f.onClick=="function"&&(t.onclick=Sa)}switch(s){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ct(i),null;case 6:if(t&&i.stateNode!=null)Kp(t,i,t.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=Ki(Jo.current),Ki(kn.current),Ca(i)){if(u=i.stateNode,s=i.memoizedProps,u[On]=i,(p=u.nodeValue!==s)&&(t=Qt,t!==null))switch(t.tag){case 3:ya(u.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ya(u.nodeValue,s,(t.mode&1)!==0)}p&&(i.flags|=4)}else u=(s.nodeType===9?s:s.ownerDocument).createTextNode(u),u[On]=i,i.stateNode=u}return Ct(i),null;case 13:if(Ve(tt),u=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&qt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Zh(),Hr(),i.flags|=98560,p=!1;else if(p=Ca(i),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(r(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[On]=i}else Hr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ct(i),p=!1}else gn!==null&&(Bc(gn),gn=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=s,i):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(tt.current&1)!==0?dt===0&&(dt=3):bc())),i.updateQueue!==null&&(i.flags|=4),Ct(i),null);case 4:return xr(),Rc(t,i),t===null&&jo(i.stateNode.containerInfo),Ct(i),null;case 10:return tc(i.type._context),Ct(i),null;case 17:return xt(i.type)&&Ta(),Ct(i),null;case 19:if(Ve(tt),p=i.memoizedState,p===null)return Ct(i),null;if(u=(i.flags&128)!==0,v=p.rendering,v===null)if(u)rs(p,!1);else{if(dt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(v=ka(t),v!==null){for(i.flags|=128,rs(p,!1),u=v.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=s,s=i.child;s!==null;)p=s,t=u,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,t=v.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return We(tt,tt.current&1|2),i.child}t=t.sibling}p.tail!==null&&rt()>Wr&&(i.flags|=128,u=!0,rs(p,!1),i.lanes=4194304)}else{if(!u)if(t=ka(v),t!==null){if(i.flags|=128,u=!0,s=t.updateQueue,s!==null&&(i.updateQueue=s,i.flags|=4),rs(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Qe)return Ct(i),null}else 2*rt()-p.renderingStartTime>Wr&&s!==1073741824&&(i.flags|=128,u=!0,rs(p,!1),i.lanes=4194304);p.isBackwards?(v.sibling=i.child,i.child=v):(s=p.last,s!==null?s.sibling=v:i.child=v,p.last=v)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=rt(),i.sibling=null,s=tt.current,We(tt,u?s&1|2:s&1),i):(Ct(i),null);case 22:case 23:return xc(),u=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(i.flags|=8192),u&&(i.mode&1)!==0?(Zt&1073741824)!==0&&(Ct(i),i.subtreeFlags&6&&(i.flags|=8192)):Ct(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function Zy(t,i){switch(Ku(i),i.tag){case 1:return xt(i.type)&&Ta(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return xr(),Ve(Gt),Ve(wt),lc(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return sc(i),null;case 13:if(Ve(tt),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Hr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Ve(tt),null;case 4:return xr(),null;case 10:return tc(i.type._context),null;case 22:case 23:return xc(),null;case 24:return null;default:return null}}var ba=!1,Rt=!1,Jy=typeof WeakSet=="function"?WeakSet:Set,q=null;function zr(t,i){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(u){it(t,i,u)}else s.current=null}function Pc(t,i,s){try{s()}catch(u){it(t,i,u)}}var Qp=!1;function eS(t,i){if(xu=aa,t=Ph(),ku(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{s.nodeType,p.nodeType}catch{s=null;break e}var v=0,A=-1,E=-1,k=0,B=0,G=t,L=null;t:for(;;){for(var Q;G!==s||f!==0&&G.nodeType!==3||(A=v+f),G!==p||u!==0&&G.nodeType!==3||(E=v+u),G.nodeType===3&&(v+=G.nodeValue.length),(Q=G.firstChild)!==null;)L=G,G=Q;for(;;){if(G===t)break t;if(L===s&&++k===f&&(A=v),L===p&&++B===u&&(E=v),(Q=G.nextSibling)!==null)break;G=L,L=G.parentNode}G=Q}s=A===-1||E===-1?null:{start:A,end:E}}else s=null}s=s||{start:0,end:0}}else s=null;for(bu={focusedElem:t,selectionRange:s},aa=!1,q=i;q!==null;)if(i=q,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,q=t;else for(;q!==null;){i=q;try{var Z=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var ne=Z.memoizedProps,ot=Z.memoizedState,N=i.stateNode,R=N.getSnapshotBeforeUpdate(i.elementType===i.type?ne:mn(i.type,ne),ot);N.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var O=i.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch($){it(i,i.return,$)}if(t=i.sibling,t!==null){t.return=i.return,q=t;break}q=i.return}return Z=Qp,Qp=!1,Z}function os(t,i,s){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&t)===t){var p=f.destroy;f.destroy=void 0,p!==void 0&&Pc(i,s,p)}f=f.next}while(f!==u)}}function za(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var u=s.create;s.destroy=u()}s=s.next}while(s!==i)}}function Nc(t){var i=t.ref;if(i!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof i=="function"?i(t):i.current=t}}function qp(t){var i=t.alternate;i!==null&&(t.alternate=null,qp(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[On],delete i[Xo],delete i[Yu],delete i[Hy],delete i[Ly])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zp(t){return t.tag===5||t.tag===3||t.tag===4}function Jp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dc(t,i,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?s.nodeType===8?s.parentNode.insertBefore(t,i):s.insertBefore(t,i):(s.nodeType===8?(i=s.parentNode,i.insertBefore(t,s)):(i=s,i.appendChild(t)),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Sa));else if(u!==4&&(t=t.child,t!==null))for(Dc(t,i,s),t=t.sibling;t!==null;)Dc(t,i,s),t=t.sibling}function Oc(t,i,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Oc(t,i,s),t=t.sibling;t!==null;)Oc(t,i,s),t=t.sibling}var yt=null,vn=!1;function Ai(t,i,s){for(s=s.child;s!==null;)eg(t,i,s),s=s.sibling}function eg(t,i,s){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(ta,s)}catch{}switch(s.tag){case 5:Rt||zr(s,i);case 6:var u=yt,f=vn;yt=null,Ai(t,i,s),yt=u,vn=f,yt!==null&&(vn?(t=yt,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):yt.removeChild(s.stateNode));break;case 18:yt!==null&&(vn?(t=yt,s=s.stateNode,t.nodeType===8?Wu(t.parentNode,s):t.nodeType===1&&Wu(t,s),Lo(t)):Wu(yt,s.stateNode));break;case 4:u=yt,f=vn,yt=s.stateNode.containerInfo,vn=!0,Ai(t,i,s),yt=u,vn=f;break;case 0:case 11:case 14:case 15:if(!Rt&&(u=s.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){f=u=u.next;do{var p=f,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&Pc(s,i,v),f=f.next}while(f!==u)}Ai(t,i,s);break;case 1:if(!Rt&&(zr(s,i),u=s.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=s.memoizedProps,u.state=s.memoizedState,u.componentWillUnmount()}catch(A){it(s,i,A)}Ai(t,i,s);break;case 21:Ai(t,i,s);break;case 22:s.mode&1?(Rt=(u=Rt)||s.memoizedState!==null,Ai(t,i,s),Rt=u):Ai(t,i,s);break;default:Ai(t,i,s)}}function tg(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new Jy),i.forEach(function(u){var f=uS.bind(null,t,u);s.has(u)||(s.add(u),u.then(f,f))})}}function yn(t,i){var s=i.deletions;if(s!==null)for(var u=0;u<s.length;u++){var f=s[u];try{var p=t,v=i,A=v;e:for(;A!==null;){switch(A.tag){case 5:yt=A.stateNode,vn=!1;break e;case 3:yt=A.stateNode.containerInfo,vn=!0;break e;case 4:yt=A.stateNode.containerInfo,vn=!0;break e}A=A.return}if(yt===null)throw Error(r(160));eg(p,v,f),yt=null,vn=!1;var E=f.alternate;E!==null&&(E.return=null),f.return=null}catch(k){it(f,i,k)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)ng(i,t),i=i.sibling}function ng(t,i){var s=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yn(i,t),Fn(t),u&4){try{os(3,t,t.return),za(3,t)}catch(ne){it(t,t.return,ne)}try{os(5,t,t.return)}catch(ne){it(t,t.return,ne)}}break;case 1:yn(i,t),Fn(t),u&512&&s!==null&&zr(s,s.return);break;case 5:if(yn(i,t),Fn(t),u&512&&s!==null&&zr(s,s.return),t.flags&32){var f=t.stateNode;try{Co(f,"")}catch(ne){it(t,t.return,ne)}}if(u&4&&(f=t.stateNode,f!=null)){var p=t.memoizedProps,v=s!==null?s.memoizedProps:p,A=t.type,E=t.updateQueue;if(t.updateQueue=null,E!==null)try{A==="input"&&p.type==="radio"&&p.name!=null&&Rn(f,p),lu(A,v);var k=lu(A,p);for(v=0;v<E.length;v+=2){var B=E[v],G=E[v+1];B==="style"?Bf(f,G):B==="dangerouslySetInnerHTML"?Hf(f,G):B==="children"?Co(f,G):D(f,B,G,k)}switch(A){case"input":Bt(f,p);break;case"textarea":Mf(f,p);break;case"select":var L=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!p.multiple;var Q=p.value;Q!=null?ai(f,!!p.multiple,Q,!1):L!==!!p.multiple&&(p.defaultValue!=null?ai(f,!!p.multiple,p.defaultValue,!0):ai(f,!!p.multiple,p.multiple?[]:"",!1))}f[Xo]=p}catch(ne){it(t,t.return,ne)}}break;case 6:if(yn(i,t),Fn(t),u&4){if(t.stateNode===null)throw Error(r(162));f=t.stateNode,p=t.memoizedProps;try{f.nodeValue=p}catch(ne){it(t,t.return,ne)}}break;case 3:if(yn(i,t),Fn(t),u&4&&s!==null&&s.memoizedState.isDehydrated)try{Lo(i.containerInfo)}catch(ne){it(t,t.return,ne)}break;case 4:yn(i,t),Fn(t);break;case 13:yn(i,t),Fn(t),f=t.child,f.flags&8192&&(p=f.memoizedState!==null,f.stateNode.isHidden=p,!p||f.alternate!==null&&f.alternate.memoizedState!==null||(Fc=rt())),u&4&&tg(t);break;case 22:if(B=s!==null&&s.memoizedState!==null,t.mode&1?(Rt=(k=Rt)||B,yn(i,t),Rt=k):yn(i,t),Fn(t),u&8192){if(k=t.memoizedState!==null,(t.stateNode.isHidden=k)&&!B&&(t.mode&1)!==0)for(q=t,B=t.child;B!==null;){for(G=q=B;q!==null;){switch(L=q,Q=L.child,L.tag){case 0:case 11:case 14:case 15:os(4,L,L.return);break;case 1:zr(L,L.return);var Z=L.stateNode;if(typeof Z.componentWillUnmount=="function"){u=L,s=L.return;try{i=u,Z.props=i.memoizedProps,Z.state=i.memoizedState,Z.componentWillUnmount()}catch(ne){it(u,s,ne)}}break;case 5:zr(L,L.return);break;case 22:if(L.memoizedState!==null){og(G);continue}}Q!==null?(Q.return=L,q=Q):og(G)}B=B.sibling}e:for(B=null,G=t;;){if(G.tag===5){if(B===null){B=G;try{f=G.stateNode,k?(p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(A=G.stateNode,E=G.memoizedProps.style,v=E!=null&&E.hasOwnProperty("display")?E.display:null,A.style.display=Lf("display",v))}catch(ne){it(t,t.return,ne)}}}else if(G.tag===6){if(B===null)try{G.stateNode.nodeValue=k?"":G.memoizedProps}catch(ne){it(t,t.return,ne)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===t)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===t)break e;for(;G.sibling===null;){if(G.return===null||G.return===t)break e;B===G&&(B=null),G=G.return}B===G&&(B=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:yn(i,t),Fn(t),u&4&&tg(t);break;case 21:break;default:yn(i,t),Fn(t)}}function Fn(t){var i=t.flags;if(i&2){try{e:{for(var s=t.return;s!==null;){if(Zp(s)){var u=s;break e}s=s.return}throw Error(r(160))}switch(u.tag){case 5:var f=u.stateNode;u.flags&32&&(Co(f,""),u.flags&=-33);var p=Jp(t);Oc(t,p,f);break;case 3:case 4:var v=u.stateNode.containerInfo,A=Jp(t);Dc(t,A,v);break;default:throw Error(r(161))}}catch(E){it(t,t.return,E)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function tS(t,i,s){q=t,ig(t)}function ig(t,i,s){for(var u=(t.mode&1)!==0;q!==null;){var f=q,p=f.child;if(f.tag===22&&u){var v=f.memoizedState!==null||ba;if(!v){var A=f.alternate,E=A!==null&&A.memoizedState!==null||Rt;A=ba;var k=Rt;if(ba=v,(Rt=E)&&!k)for(q=f;q!==null;)v=q,E=v.child,v.tag===22&&v.memoizedState!==null?sg(f):E!==null?(E.return=v,q=E):sg(f);for(;p!==null;)q=p,ig(p),p=p.sibling;q=f,ba=A,Rt=k}rg(t)}else(f.subtreeFlags&8772)!==0&&p!==null?(p.return=f,q=p):rg(t)}}function rg(t){for(;q!==null;){var i=q;if((i.flags&8772)!==0){var s=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Rt||za(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!Rt)if(s===null)u.componentDidMount();else{var f=i.elementType===i.type?s.memoizedProps:mn(i.type,s.memoizedProps);u.componentDidUpdate(f,s.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&op(i,p,u);break;case 3:var v=i.updateQueue;if(v!==null){if(s=null,i.child!==null)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}op(i,v,s)}break;case 5:var A=i.stateNode;if(s===null&&i.flags&4){s=A;var E=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&s.focus();break;case"img":E.src&&(s.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var k=i.alternate;if(k!==null){var B=k.memoizedState;if(B!==null){var G=B.dehydrated;G!==null&&Lo(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Rt||i.flags&512&&Nc(i)}catch(L){it(i,i.return,L)}}if(i===t){q=null;break}if(s=i.sibling,s!==null){s.return=i.return,q=s;break}q=i.return}}function og(t){for(;q!==null;){var i=q;if(i===t){q=null;break}var s=i.sibling;if(s!==null){s.return=i.return,q=s;break}q=i.return}}function sg(t){for(;q!==null;){var i=q;try{switch(i.tag){case 0:case 11:case 15:var s=i.return;try{za(4,i)}catch(E){it(i,s,E)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var f=i.return;try{u.componentDidMount()}catch(E){it(i,f,E)}}var p=i.return;try{Nc(i)}catch(E){it(i,p,E)}break;case 5:var v=i.return;try{Nc(i)}catch(E){it(i,v,E)}}}catch(E){it(i,i.return,E)}if(i===t){q=null;break}var A=i.sibling;if(A!==null){A.return=i.return,q=A;break}q=i.return}}var nS=Math.ceil,$a=x.ReactCurrentDispatcher,kc=x.ReactCurrentOwner,ln=x.ReactCurrentBatchConfig,Le=0,ht=null,at=null,St=0,Zt=0,$r=gi(0),dt=0,ss=null,qi=0,Wa=0,Mc=0,as=null,zt=null,Fc=0,Wr=1/0,Qn=null,Ya=!1,Uc=null,Ti=null,ja=!1,Ii=null,Va=0,ls=0,Hc=null,Xa=-1,Ka=0;function Ot(){return(Le&6)!==0?rt():Xa!==-1?Xa:Xa=rt()}function Ei(t){return(t.mode&1)===0?1:(Le&2)!==0&&St!==0?St&-St:Gy.transition!==null?(Ka===0&&(Ka=Jf()),Ka):(t=ze,t!==0||(t=window.event,t=t===void 0?16:lh(t.type)),t)}function Sn(t,i,s,u){if(50<ls)throw ls=0,Hc=null,Error(r(185));ko(t,s,u),((Le&2)===0||t!==ht)&&(t===ht&&((Le&2)===0&&(Wa|=s),dt===4&&wi(t,St)),$t(t,u),s===1&&Le===0&&(i.mode&1)===0&&(Wr=rt()+500,Ea&&vi()))}function $t(t,i){var s=t.callbackNode;Gv(t,i);var u=ra(t,t===ht?St:0);if(u===0)s!==null&&Qf(s),t.callbackNode=null,t.callbackPriority=0;else if(i=u&-u,t.callbackPriority!==i){if(s!=null&&Qf(s),i===1)t.tag===0?By(lg.bind(null,t)):Vh(lg.bind(null,t)),Fy(function(){(Le&6)===0&&vi()}),s=null;else{switch(eh(u)){case 1:s=gu;break;case 4:s=qf;break;case 16:s=ea;break;case 536870912:s=Zf;break;default:s=ea}s=mg(s,ag.bind(null,t))}t.callbackPriority=i,t.callbackNode=s}}function ag(t,i){if(Xa=-1,Ka=0,(Le&6)!==0)throw Error(r(327));var s=t.callbackNode;if(Yr()&&t.callbackNode!==s)return null;var u=ra(t,t===ht?St:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||i)i=Qa(t,u);else{i=u;var f=Le;Le|=2;var p=cg();(ht!==t||St!==i)&&(Qn=null,Wr=rt()+500,Ji(t,i));do try{oS();break}catch(A){ug(t,A)}while(!0);ec(),$a.current=p,Le=f,at!==null?i=0:(ht=null,St=0,i=dt)}if(i!==0){if(i===2&&(f=mu(t),f!==0&&(u=f,i=Lc(t,f))),i===1)throw s=ss,Ji(t,0),wi(t,u),$t(t,rt()),s;if(i===6)wi(t,u);else{if(f=t.current.alternate,(u&30)===0&&!iS(f)&&(i=Qa(t,u),i===2&&(p=mu(t),p!==0&&(u=p,i=Lc(t,p))),i===1))throw s=ss,Ji(t,0),wi(t,u),$t(t,rt()),s;switch(t.finishedWork=f,t.finishedLanes=u,i){case 0:case 1:throw Error(r(345));case 2:er(t,zt,Qn);break;case 3:if(wi(t,u),(u&130023424)===u&&(i=Fc+500-rt(),10<i)){if(ra(t,0)!==0)break;if(f=t.suspendedLanes,(f&u)!==u){Ot(),t.pingedLanes|=t.suspendedLanes&f;break}t.timeoutHandle=$u(er.bind(null,t,zt,Qn),i);break}er(t,zt,Qn);break;case 4:if(wi(t,u),(u&4194240)===u)break;for(i=t.eventTimes,f=-1;0<u;){var v=31-hn(u);p=1<<v,v=i[v],v>f&&(f=v),u&=~p}if(u=f,u=rt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*nS(u/1960))-u,10<u){t.timeoutHandle=$u(er.bind(null,t,zt,Qn),u);break}er(t,zt,Qn);break;case 5:er(t,zt,Qn);break;default:throw Error(r(329))}}}return $t(t,rt()),t.callbackNode===s?ag.bind(null,t):null}function Lc(t,i){var s=as;return t.current.memoizedState.isDehydrated&&(Ji(t,i).flags|=256),t=Qa(t,i),t!==2&&(i=zt,zt=s,i!==null&&Bc(i)),t}function Bc(t){zt===null?zt=t:zt.push.apply(zt,t)}function iS(t){for(var i=t;;){if(i.flags&16384){var s=i.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var u=0;u<s.length;u++){var f=s[u],p=f.getSnapshot;f=f.value;try{if(!pn(p(),f))return!1}catch{return!1}}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function wi(t,i){for(i&=~Mc,i&=~Wa,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var s=31-hn(i),u=1<<s;t[s]=-1,i&=~u}}function lg(t){if((Le&6)!==0)throw Error(r(327));Yr();var i=ra(t,0);if((i&1)===0)return $t(t,rt()),null;var s=Qa(t,i);if(t.tag!==0&&s===2){var u=mu(t);u!==0&&(i=u,s=Lc(t,u))}if(s===1)throw s=ss,Ji(t,0),wi(t,i),$t(t,rt()),s;if(s===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,er(t,zt,Qn),$t(t,rt()),null}function Gc(t,i){var s=Le;Le|=1;try{return t(i)}finally{Le=s,Le===0&&(Wr=rt()+500,Ea&&vi())}}function Zi(t){Ii!==null&&Ii.tag===0&&(Le&6)===0&&Yr();var i=Le;Le|=1;var s=ln.transition,u=ze;try{if(ln.transition=null,ze=1,t)return t()}finally{ze=u,ln.transition=s,Le=i,(Le&6)===0&&vi()}}function xc(){Zt=$r.current,Ve($r)}function Ji(t,i){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,My(s)),at!==null)for(s=at.return;s!==null;){var u=s;switch(Ku(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Ta();break;case 3:xr(),Ve(Gt),Ve(wt),lc();break;case 5:sc(u);break;case 4:xr();break;case 13:Ve(tt);break;case 19:Ve(tt);break;case 10:tc(u.type._context);break;case 22:case 23:xc()}s=s.return}if(ht=t,at=t=_i(t.current,null),St=Zt=i,dt=0,ss=null,Mc=Wa=qi=0,zt=as=null,Xi!==null){for(i=0;i<Xi.length;i++)if(s=Xi[i],u=s.interleaved,u!==null){s.interleaved=null;var f=u.next,p=s.pending;if(p!==null){var v=p.next;p.next=f,u.next=v}s.pending=u}Xi=null}return t}function ug(t,i){do{var s=at;try{if(ec(),Ma.current=La,Fa){for(var u=nt.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}Fa=!1}if(Qi=0,ft=ct=nt=null,es=!1,ts=0,kc.current=null,s===null||s.return===null){dt=1,ss=i,at=null;break}e:{var p=t,v=s.return,A=s,E=i;if(i=St,A.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var k=E,B=A,G=B.tag;if((B.mode&1)===0&&(G===0||G===11||G===15)){var L=B.alternate;L?(B.updateQueue=L.updateQueue,B.memoizedState=L.memoizedState,B.lanes=L.lanes):(B.updateQueue=null,B.memoizedState=null)}var Q=Fp(v);if(Q!==null){Q.flags&=-257,Up(Q,v,A,p,i),Q.mode&1&&Mp(p,k,i),i=Q,E=k;var Z=i.updateQueue;if(Z===null){var ne=new Set;ne.add(E),i.updateQueue=ne}else Z.add(E);break e}else{if((i&1)===0){Mp(p,k,i),bc();break e}E=Error(r(426))}}else if(Qe&&A.mode&1){var ot=Fp(v);if(ot!==null){(ot.flags&65536)===0&&(ot.flags|=256),Up(ot,v,A,p,i),Zu(br(E,A));break e}}p=E=br(E,A),dt!==4&&(dt=2),as===null?as=[p]:as.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var N=Op(p,E,i);rp(p,N);break e;case 1:A=E;var R=p.type,O=p.stateNode;if((p.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Ti===null||!Ti.has(O)))){p.flags|=65536,i&=-i,p.lanes|=i;var $=kp(p,A,i);rp(p,$);break e}}p=p.return}while(p!==null)}fg(s)}catch(oe){i=oe,at===s&&s!==null&&(at=s=s.return);continue}break}while(!0)}function cg(){var t=$a.current;return $a.current=La,t===null?La:t}function bc(){(dt===0||dt===3||dt===2)&&(dt=4),ht===null||(qi&268435455)===0&&(Wa&268435455)===0||wi(ht,St)}function Qa(t,i){var s=Le;Le|=2;var u=cg();(ht!==t||St!==i)&&(Qn=null,Ji(t,i));do try{rS();break}catch(f){ug(t,f)}while(!0);if(ec(),Le=s,$a.current=u,at!==null)throw Error(r(261));return ht=null,St=0,dt}function rS(){for(;at!==null;)dg(at)}function oS(){for(;at!==null&&!Dv();)dg(at)}function dg(t){var i=gg(t.alternate,t,Zt);t.memoizedProps=t.pendingProps,i===null?fg(t):at=i,kc.current=null}function fg(t){var i=t;do{var s=i.alternate;if(t=i.return,(i.flags&32768)===0){if(s=qy(s,i,Zt),s!==null){at=s;return}}else{if(s=Zy(s,i),s!==null){s.flags&=32767,at=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,at=null;return}}if(i=i.sibling,i!==null){at=i;return}at=i=t}while(i!==null);dt===0&&(dt=5)}function er(t,i,s){var u=ze,f=ln.transition;try{ln.transition=null,ze=1,sS(t,i,s,u)}finally{ln.transition=f,ze=u}return null}function sS(t,i,s,u){do Yr();while(Ii!==null);if((Le&6)!==0)throw Error(r(327));s=t.finishedWork;var f=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var p=s.lanes|s.childLanes;if(xv(t,p),t===ht&&(at=ht=null,St=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||ja||(ja=!0,mg(ea,function(){return Yr(),null})),p=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||p){p=ln.transition,ln.transition=null;var v=ze;ze=1;var A=Le;Le|=4,kc.current=null,eS(t,s),ng(s,t),Cy(bu),aa=!!xu,bu=xu=null,t.current=s,tS(s),Ov(),Le=A,ze=v,ln.transition=p}else t.current=s;if(ja&&(ja=!1,Ii=t,Va=f),p=t.pendingLanes,p===0&&(Ti=null),Fv(s.stateNode),$t(t,rt()),i!==null)for(u=t.onRecoverableError,s=0;s<i.length;s++)f=i[s],u(f.value,{componentStack:f.stack,digest:f.digest});if(Ya)throw Ya=!1,t=Uc,Uc=null,t;return(Va&1)!==0&&t.tag!==0&&Yr(),p=t.pendingLanes,(p&1)!==0?t===Hc?ls++:(ls=0,Hc=t):ls=0,vi(),null}function Yr(){if(Ii!==null){var t=eh(Va),i=ln.transition,s=ze;try{if(ln.transition=null,ze=16>t?16:t,Ii===null)var u=!1;else{if(t=Ii,Ii=null,Va=0,(Le&6)!==0)throw Error(r(331));var f=Le;for(Le|=4,q=t.current;q!==null;){var p=q,v=p.child;if((q.flags&16)!==0){var A=p.deletions;if(A!==null){for(var E=0;E<A.length;E++){var k=A[E];for(q=k;q!==null;){var B=q;switch(B.tag){case 0:case 11:case 15:os(8,B,p)}var G=B.child;if(G!==null)G.return=B,q=G;else for(;q!==null;){B=q;var L=B.sibling,Q=B.return;if(qp(B),B===k){q=null;break}if(L!==null){L.return=Q,q=L;break}q=Q}}}var Z=p.alternate;if(Z!==null){var ne=Z.child;if(ne!==null){Z.child=null;do{var ot=ne.sibling;ne.sibling=null,ne=ot}while(ne!==null)}}q=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,q=v;else e:for(;q!==null;){if(p=q,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:os(9,p,p.return)}var N=p.sibling;if(N!==null){N.return=p.return,q=N;break e}q=p.return}}var R=t.current;for(q=R;q!==null;){v=q;var O=v.child;if((v.subtreeFlags&2064)!==0&&O!==null)O.return=v,q=O;else e:for(v=R;q!==null;){if(A=q,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:za(9,A)}}catch(oe){it(A,A.return,oe)}if(A===v){q=null;break e}var $=A.sibling;if($!==null){$.return=A.return,q=$;break e}q=A.return}}if(Le=f,vi(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(ta,t)}catch{}u=!0}return u}finally{ze=s,ln.transition=i}}return!1}function hg(t,i,s){i=br(s,i),i=Op(t,i,1),t=Si(t,i,1),i=Ot(),t!==null&&(ko(t,1,i),$t(t,i))}function it(t,i,s){if(t.tag===3)hg(t,t,s);else for(;i!==null;){if(i.tag===3){hg(i,t,s);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ti===null||!Ti.has(u))){t=br(s,t),t=kp(i,t,1),i=Si(i,t,1),t=Ot(),i!==null&&(ko(i,1,t),$t(i,t));break}}i=i.return}}function aS(t,i,s){var u=t.pingCache;u!==null&&u.delete(i),i=Ot(),t.pingedLanes|=t.suspendedLanes&s,ht===t&&(St&s)===s&&(dt===4||dt===3&&(St&130023424)===St&&500>rt()-Fc?Ji(t,0):Mc|=s),$t(t,i)}function pg(t,i){i===0&&((t.mode&1)===0?i=1:(i=ia,ia<<=1,(ia&130023424)===0&&(ia=4194304)));var s=Ot();t=Vn(t,i),t!==null&&(ko(t,i,s),$t(t,s))}function lS(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),pg(t,s)}function uS(t,i){var s=0;switch(t.tag){case 13:var u=t.stateNode,f=t.memoizedState;f!==null&&(s=f.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(i),pg(t,s)}var gg;gg=function(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps||Gt.current)bt=!0;else{if((t.lanes&s)===0&&(i.flags&128)===0)return bt=!1,Qy(t,i,s);bt=(t.flags&131072)!==0}else bt=!1,Qe&&(i.flags&1048576)!==0&&Xh(i,_a,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;xa(t,i),t=i.pendingProps;var f=Mr(i,wt.current);Gr(i,s),f=dc(null,i,u,t,f,s);var p=fc();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,xt(u)?(p=!0,Ia(i)):p=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,rc(i),f.updater=Ba,i.stateNode=f,f._reactInternals=i,yc(i,u,t,s),i=Ic(null,i,u,!0,p,s)):(i.tag=0,Qe&&p&&Xu(i),Dt(null,i,f,s),i=i.child),i;case 16:u=i.elementType;e:{switch(xa(t,i),t=i.pendingProps,f=u._init,u=f(u._payload),i.type=u,f=i.tag=dS(u),t=mn(u,t),f){case 0:i=Tc(null,i,u,t,s);break e;case 1:i=bp(null,i,u,t,s);break e;case 11:i=Hp(null,i,u,t,s);break e;case 14:i=Lp(null,i,u,mn(u.type,t),s);break e}throw Error(r(306,u,""))}return i;case 0:return u=i.type,f=i.pendingProps,f=i.elementType===u?f:mn(u,f),Tc(t,i,u,f,s);case 1:return u=i.type,f=i.pendingProps,f=i.elementType===u?f:mn(u,f),bp(t,i,u,f,s);case 3:e:{if(zp(i),t===null)throw Error(r(387));u=i.pendingProps,p=i.memoizedState,f=p.element,ip(t,i),Oa(i,u,null,s);var v=i.memoizedState;if(u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){f=br(Error(r(423)),i),i=$p(t,i,u,s,f);break e}else if(u!==f){f=br(Error(r(424)),i),i=$p(t,i,u,s,f);break e}else for(qt=pi(i.stateNode.containerInfo.firstChild),Qt=i,Qe=!0,gn=null,s=tp(i,null,u,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Hr(),u===f){i=Kn(t,i,s);break e}Dt(t,i,u,s)}i=i.child}return i;case 5:return sp(i),t===null&&qu(i),u=i.type,f=i.pendingProps,p=t!==null?t.memoizedProps:null,v=f.children,zu(u,f)?v=null:p!==null&&zu(u,p)&&(i.flags|=32),xp(t,i),Dt(t,i,v,s),i.child;case 6:return t===null&&qu(i),null;case 13:return Wp(t,i,s);case 4:return oc(i,i.stateNode.containerInfo),u=i.pendingProps,t===null?i.child=Lr(i,null,u,s):Dt(t,i,u,s),i.child;case 11:return u=i.type,f=i.pendingProps,f=i.elementType===u?f:mn(u,f),Hp(t,i,u,f,s);case 7:return Dt(t,i,i.pendingProps,s),i.child;case 8:return Dt(t,i,i.pendingProps.children,s),i.child;case 12:return Dt(t,i,i.pendingProps.children,s),i.child;case 10:e:{if(u=i.type._context,f=i.pendingProps,p=i.memoizedProps,v=f.value,We(Pa,u._currentValue),u._currentValue=v,p!==null)if(pn(p.value,v)){if(p.children===f.children&&!Gt.current){i=Kn(t,i,s);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var A=p.dependencies;if(A!==null){v=p.child;for(var E=A.firstContext;E!==null;){if(E.context===u){if(p.tag===1){E=Xn(-1,s&-s),E.tag=2;var k=p.updateQueue;if(k!==null){k=k.shared;var B=k.pending;B===null?E.next=E:(E.next=B.next,B.next=E),k.pending=E}}p.lanes|=s,E=p.alternate,E!==null&&(E.lanes|=s),nc(p.return,s,i),A.lanes|=s;break}E=E.next}}else if(p.tag===10)v=p.type===i.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(r(341));v.lanes|=s,A=v.alternate,A!==null&&(A.lanes|=s),nc(v,s,i),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===i){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}Dt(t,i,f.children,s),i=i.child}return i;case 9:return f=i.type,u=i.pendingProps.children,Gr(i,s),f=sn(f),u=u(f),i.flags|=1,Dt(t,i,u,s),i.child;case 14:return u=i.type,f=mn(u,i.pendingProps),f=mn(u.type,f),Lp(t,i,u,f,s);case 15:return Bp(t,i,i.type,i.pendingProps,s);case 17:return u=i.type,f=i.pendingProps,f=i.elementType===u?f:mn(u,f),xa(t,i),i.tag=1,xt(u)?(t=!0,Ia(i)):t=!1,Gr(i,s),Np(i,u,f),yc(i,u,f,s),Ic(null,i,u,!0,t,s);case 19:return jp(t,i,s);case 22:return Gp(t,i,s)}throw Error(r(156,i.tag))};function mg(t,i){return Kf(t,i)}function cS(t,i,s,u){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(t,i,s,u){return new cS(t,i,s,u)}function zc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dS(t){if(typeof t=="function")return zc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===De)return 11;if(t===Fe)return 14}return 2}function _i(t,i){var s=t.alternate;return s===null?(s=un(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function qa(t,i,s,u,f,p){var v=2;if(u=t,typeof t=="function")zc(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case Y:return tr(s.children,f,p,i);case ue:v=8,f|=8;break;case we:return t=un(12,s,i,f|2),t.elementType=we,t.lanes=p,t;case Ie:return t=un(13,s,i,f),t.elementType=Ie,t.lanes=p,t;case le:return t=un(19,s,i,f),t.elementType=le,t.lanes=p,t;case J:return Za(s,f,p,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _e:v=10;break e;case xe:v=9;break e;case De:v=11;break e;case Fe:v=14;break e;case ye:v=16,u=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return i=un(v,s,i,f),i.elementType=t,i.type=u,i.lanes=p,i}function tr(t,i,s,u){return t=un(7,t,u,i),t.lanes=s,t}function Za(t,i,s,u){return t=un(22,t,u,i),t.elementType=J,t.lanes=s,t.stateNode={isHidden:!1},t}function $c(t,i,s){return t=un(6,t,null,i),t.lanes=s,t}function Wc(t,i,s){return i=un(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function fS(t,i,s,u,f){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vu(0),this.expirationTimes=vu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vu(0),this.identifierPrefix=u,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Yc(t,i,s,u,f,p,v,A,E){return t=new fS(t,i,s,A,E),i===1?(i=1,p===!0&&(i|=8)):i=0,p=un(3,null,null,i),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},rc(p),t}function hS(t,i,s){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:u==null?null:""+u,children:t,containerInfo:i,implementation:s}}function vg(t){if(!t)return mi;t=t._reactInternals;e:{if($i(t)!==t||t.tag!==1)throw Error(r(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(xt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(t.tag===1){var s=t.type;if(xt(s))return Yh(t,s,i)}return i}function yg(t,i,s,u,f,p,v,A,E){return t=Yc(s,u,!0,t,f,p,v,A,E),t.context=vg(null),s=t.current,u=Ot(),f=Ei(s),p=Xn(u,f),p.callback=i??null,Si(s,p,f),t.current.lanes=f,ko(t,f,u),$t(t,u),t}function Ja(t,i,s,u){var f=i.current,p=Ot(),v=Ei(f);return s=vg(s),i.context===null?i.context=s:i.pendingContext=s,i=Xn(p,v),i.payload={element:t},u=u===void 0?null:u,u!==null&&(i.callback=u),t=Si(f,i,v),t!==null&&(Sn(t,f,v,p),Da(t,f,v)),v}function el(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sg(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function jc(t,i){Sg(t,i),(t=t.alternate)&&Sg(t,i)}function pS(){return null}var Ag=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vc(t){this._internalRoot=t}tl.prototype.render=Vc.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));Ja(t,i,null,null)},tl.prototype.unmount=Vc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Zi(function(){Ja(null,t,null,null)}),i[$n]=null}};function tl(t){this._internalRoot=t}tl.prototype.unstable_scheduleHydration=function(t){if(t){var i=ih();t={blockedOn:null,target:t,priority:i};for(var s=0;s<di.length&&i!==0&&i<di[s].priority;s++);di.splice(s,0,t),s===0&&sh(t)}};function Xc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Tg(){}function gS(t,i,s,u,f){if(f){if(typeof u=="function"){var p=u;u=function(){var k=el(v);p.call(k)}}var v=yg(i,u,t,0,null,!1,!1,"",Tg);return t._reactRootContainer=v,t[$n]=v.current,jo(t.nodeType===8?t.parentNode:t),Zi(),v}for(;f=t.lastChild;)t.removeChild(f);if(typeof u=="function"){var A=u;u=function(){var k=el(E);A.call(k)}}var E=Yc(t,0,!1,null,null,!1,!1,"",Tg);return t._reactRootContainer=E,t[$n]=E.current,jo(t.nodeType===8?t.parentNode:t),Zi(function(){Ja(i,E,s,u)}),E}function il(t,i,s,u,f){var p=s._reactRootContainer;if(p){var v=p;if(typeof f=="function"){var A=f;f=function(){var E=el(v);A.call(E)}}Ja(i,v,t,f)}else v=gS(s,i,t,f,u);return el(v)}th=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var s=Oo(i.pendingLanes);s!==0&&(yu(i,s|1),$t(i,rt()),(Le&6)===0&&(Wr=rt()+500,vi()))}break;case 13:Zi(function(){var u=Vn(t,1);if(u!==null){var f=Ot();Sn(u,t,1,f)}}),jc(t,1)}},Su=function(t){if(t.tag===13){var i=Vn(t,134217728);if(i!==null){var s=Ot();Sn(i,t,134217728,s)}jc(t,134217728)}},nh=function(t){if(t.tag===13){var i=Ei(t),s=Vn(t,i);if(s!==null){var u=Ot();Sn(s,t,i,u)}jc(t,i)}},ih=function(){return ze},rh=function(t,i){var s=ze;try{return ze=t,i()}finally{ze=s}},du=function(t,i,s){switch(i){case"input":if(Bt(t,s),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<s.length;i++){var u=s[i];if(u!==t&&u.form===t.form){var f=Aa(u);if(!f)throw Error(r(90));ce(u),Bt(u,f)}}}break;case"textarea":Mf(t,s);break;case"select":i=s.value,i!=null&&ai(t,!!s.multiple,i,!1)}},zf=Gc,$f=Zi;var mS={usingClientEntryPoint:!1,Events:[Ko,Or,Aa,xf,bf,Gc]},us={findFiberByHostInstance:Wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vS={bundleType:us.bundleType,version:us.version,rendererPackageName:us.rendererPackageName,rendererConfig:us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vf(t),t===null?null:t.stateNode},findFiberByHostInstance:us.findFiberByHostInstance||pS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{ta=rl.inject(vS),Dn=rl}catch{}}return Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mS,Wt.createPortal=function(t,i){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xc(i))throw Error(r(200));return hS(t,i,null,s)},Wt.createRoot=function(t,i){if(!Xc(t))throw Error(r(299));var s=!1,u="",f=Ag;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=Yc(t,1,!1,null,null,s,!1,u,f),t[$n]=i.current,jo(t.nodeType===8?t.parentNode:t),new Vc(i)},Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=Vf(i),t=t===null?null:t.stateNode,t},Wt.flushSync=function(t){return Zi(t)},Wt.hydrate=function(t,i,s){if(!nl(i))throw Error(r(200));return il(null,t,i,!0,s)},Wt.hydrateRoot=function(t,i,s){if(!Xc(t))throw Error(r(405));var u=s!=null&&s.hydratedSources||null,f=!1,p="",v=Ag;if(s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),i=yg(i,null,t,1,s??null,f,!1,p,v),t[$n]=i.current,jo(t),u)for(t=0;t<u.length;t++)s=u[t],f=s._getVersion,f=f(s._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[s,f]:i.mutableSourceEagerHydrationData.push(s,f);return new tl(i)},Wt.render=function(t,i,s){if(!nl(i))throw Error(r(200));return il(null,t,i,!1,s)},Wt.unmountComponentAtNode=function(t){if(!nl(t))throw Error(r(40));return t._reactRootContainer?(Zi(function(){il(null,null,t,!1,function(){t._reactRootContainer=null,t[$n]=null})}),!0):!1},Wt.unstable_batchedUpdates=Gc,Wt.unstable_renderSubtreeIntoContainer=function(t,i,s,u){if(!nl(s))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return il(t,i,s,!1,u)},Wt.version="18.3.1-next-f1338f8080-20240426",Wt}var Ng;function RS(){if(Ng)return qc.exports;Ng=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),qc.exports=CS(),qc.exports}var Dg;function PS(){if(Dg)return ol;Dg=1;var e=RS();return ol.createRoot=e.createRoot,ol.hydrateRoot=e.hydrateRoot,ol}var NS=PS();const DS=Ym(NS),jm=Pe.createContext(void 0),OS=({initialAppState:e,children:n})=>{const[r,o]=Pe.useState(e),[a,l]=Pe.useState(void 0),c=(d,h)=>{o(d),d==="gameOver"&&h?l(h):d!=="gameOver"&&l(void 0)};return He.jsx(jm.Provider,{value:{appState:r,setAppState:c,gameOverDetails:a},children:n})},Yl=()=>{const e=Pe.useContext(jm);if(e===void 0)throw new Error("useGameContext must be used within a GameProvider");return e};var Nt=function(){return Nt=Object.assign||function(n){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])}return n},Nt.apply(this,arguments)};function Os(e,n,r){if(r||arguments.length===2)for(var o=0,a=n.length,l;o<a;o++)(l||!(o in n))&&(l||(l=Array.prototype.slice.call(n,0,o)),l[o]=n[o]);return e.concat(l||Array.prototype.slice.call(n))}var Xe="-ms-",ws="-moz-",be="-webkit-",Vm="comm",jl="rule",Kd="decl",kS="@import",Xm="@keyframes",MS="@layer",Km=Math.abs,Qd=String.fromCharCode,Dd=Object.assign;function FS(e,n){return gt(e,0)^45?(((n<<2^gt(e,0))<<2^gt(e,1))<<2^gt(e,2))<<2^gt(e,3):0}function Qm(e){return e.trim()}function Jn(e,n){return(e=n.exec(e))?e[0]:e}function Re(e,n,r){return e.replace(n,r)}function Rl(e,n,r){return e.indexOf(n,r)}function gt(e,n){return e.charCodeAt(n)|0}function co(e,n,r){return e.slice(n,r)}function Bn(e){return e.length}function qm(e){return e.length}function Ss(e,n){return n.push(e),e}function US(e,n){return e.map(n).join("")}function Og(e,n){return e.filter(function(r){return!Jn(r,n)})}var Vl=1,fo=1,Zm=0,fn=0,lt=0,Io="";function Xl(e,n,r,o,a,l,c,d){return{value:e,root:n,parent:r,type:o,props:a,children:l,line:Vl,column:fo,length:c,return:"",siblings:d}}function Di(e,n){return Dd(Xl("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},n)}function jr(e){for(;e.root;)e=Di(e.root,{children:[e]});Ss(e,e.siblings)}function HS(){return lt}function LS(){return lt=fn>0?gt(Io,--fn):0,fo--,lt===10&&(fo=1,Vl--),lt}function En(){return lt=fn<Zm?gt(Io,fn++):0,fo++,lt===10&&(fo=1,Vl++),lt}function dr(){return gt(Io,fn)}function Pl(){return fn}function Kl(e,n){return co(Io,e,n)}function Od(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function BS(e){return Vl=fo=1,Zm=Bn(Io=e),fn=0,[]}function GS(e){return Io="",e}function ed(e){return Qm(Kl(fn-1,kd(e===91?e+2:e===40?e+1:e)))}function xS(e){for(;(lt=dr())&&lt<33;)En();return Od(e)>2||Od(lt)>3?"":" "}function bS(e,n){for(;--n&&En()&&!(lt<48||lt>102||lt>57&&lt<65||lt>70&&lt<97););return Kl(e,Pl()+(n<6&&dr()==32&&En()==32))}function kd(e){for(;En();)switch(lt){case e:return fn;case 34:case 39:e!==34&&e!==39&&kd(lt);break;case 40:e===41&&kd(e);break;case 92:En();break}return fn}function zS(e,n){for(;En()&&e+lt!==57;)if(e+lt===84&&dr()===47)break;return"/*"+Kl(n,fn-1)+"*"+Qd(e===47?e:En())}function $S(e){for(;!Od(dr());)En();return Kl(e,fn)}function WS(e){return GS(Nl("",null,null,null,[""],e=BS(e),0,[0],e))}function Nl(e,n,r,o,a,l,c,d,h){for(var g=0,m=0,y=c,S=0,w=0,P=0,_=1,T=1,U=1,H=0,D="",x=a,W=l,F=o,Y=D;T;)switch(P=H,H=En()){case 40:if(P!=108&&gt(Y,y-1)==58){Rl(Y+=Re(ed(H),"&","&\f"),"&\f",Km(g?d[g-1]:0))!=-1&&(U=-1);break}case 34:case 39:case 91:Y+=ed(H);break;case 9:case 10:case 13:case 32:Y+=xS(P);break;case 92:Y+=bS(Pl()-1,7);continue;case 47:switch(dr()){case 42:case 47:Ss(YS(zS(En(),Pl()),n,r,h),h);break;default:Y+="/"}break;case 123*_:d[g++]=Bn(Y)*U;case 125*_:case 59:case 0:switch(H){case 0:case 125:T=0;case 59+m:U==-1&&(Y=Re(Y,/\f/g,"")),w>0&&Bn(Y)-y&&Ss(w>32?Mg(Y+";",o,r,y-1,h):Mg(Re(Y," ","")+";",o,r,y-2,h),h);break;case 59:Y+=";";default:if(Ss(F=kg(Y,n,r,g,m,a,d,D,x=[],W=[],y,l),l),H===123)if(m===0)Nl(Y,n,F,F,x,l,y,d,W);else switch(S===99&&gt(Y,3)===110?100:S){case 100:case 108:case 109:case 115:Nl(e,F,F,o&&Ss(kg(e,F,F,0,0,a,d,D,a,x=[],y,W),W),a,W,y,d,o?x:W);break;default:Nl(Y,F,F,F,[""],W,0,d,W)}}g=m=w=0,_=U=1,D=Y="",y=c;break;case 58:y=1+Bn(Y),w=P;default:if(_<1){if(H==123)--_;else if(H==125&&_++==0&&LS()==125)continue}switch(Y+=Qd(H),H*_){case 38:U=m>0?1:(Y+="\f",-1);break;case 44:d[g++]=(Bn(Y)-1)*U,U=1;break;case 64:dr()===45&&(Y+=ed(En())),S=dr(),m=y=Bn(D=Y+=$S(Pl())),H++;break;case 45:P===45&&Bn(Y)==2&&(_=0)}}return l}function kg(e,n,r,o,a,l,c,d,h,g,m,y){for(var S=a-1,w=a===0?l:[""],P=qm(w),_=0,T=0,U=0;_<o;++_)for(var H=0,D=co(e,S+1,S=Km(T=c[_])),x=e;H<P;++H)(x=Qm(T>0?w[H]+" "+D:Re(D,/&\f/g,w[H])))&&(h[U++]=x);return Xl(e,n,r,a===0?jl:d,h,g,m,y)}function YS(e,n,r,o){return Xl(e,n,r,Vm,Qd(HS()),co(e,2,-2),0,o)}function Mg(e,n,r,o,a){return Xl(e,n,r,Kd,co(e,0,o),co(e,o+1,-1),o,a)}function Jm(e,n,r){switch(FS(e,n)){case 5103:return be+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return be+e+e;case 4789:return ws+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return be+e+ws+e+Xe+e+e;case 5936:switch(gt(e,n+11)){case 114:return be+e+Xe+Re(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return be+e+Xe+Re(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return be+e+Xe+Re(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return be+e+Xe+e+e;case 6165:return be+e+Xe+"flex-"+e+e;case 5187:return be+e+Re(e,/(\w+).+(:[^]+)/,be+"box-$1$2"+Xe+"flex-$1$2")+e;case 5443:return be+e+Xe+"flex-item-"+Re(e,/flex-|-self/g,"")+(Jn(e,/flex-|baseline/)?"":Xe+"grid-row-"+Re(e,/flex-|-self/g,""))+e;case 4675:return be+e+Xe+"flex-line-pack"+Re(e,/align-content|flex-|-self/g,"")+e;case 5548:return be+e+Xe+Re(e,"shrink","negative")+e;case 5292:return be+e+Xe+Re(e,"basis","preferred-size")+e;case 6060:return be+"box-"+Re(e,"-grow","")+be+e+Xe+Re(e,"grow","positive")+e;case 4554:return be+Re(e,/([^-])(transform)/g,"$1"+be+"$2")+e;case 6187:return Re(Re(Re(e,/(zoom-|grab)/,be+"$1"),/(image-set)/,be+"$1"),e,"")+e;case 5495:case 3959:return Re(e,/(image-set\([^]*)/,be+"$1$`$1");case 4968:return Re(Re(e,/(.+:)(flex-)?(.*)/,be+"box-pack:$3"+Xe+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+be+e+e;case 4200:if(!Jn(e,/flex-|baseline/))return Xe+"grid-column-align"+co(e,n)+e;break;case 2592:case 3360:return Xe+Re(e,"template-","")+e;case 4384:case 3616:return r&&r.some(function(o,a){return n=a,Jn(o.props,/grid-\w+-end/)})?~Rl(e+(r=r[n].value),"span",0)?e:Xe+Re(e,"-start","")+e+Xe+"grid-row-span:"+(~Rl(r,"span",0)?Jn(r,/\d+/):+Jn(r,/\d+/)-+Jn(e,/\d+/))+";":Xe+Re(e,"-start","")+e;case 4896:case 4128:return r&&r.some(function(o){return Jn(o.props,/grid-\w+-start/)})?e:Xe+Re(Re(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return Re(e,/(.+)-inline(.+)/,be+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Bn(e)-1-n>6)switch(gt(e,n+1)){case 109:if(gt(e,n+4)!==45)break;case 102:return Re(e,/(.+:)(.+)-([^]+)/,"$1"+be+"$2-$3$1"+ws+(gt(e,n+3)==108?"$3":"$2-$3"))+e;case 115:return~Rl(e,"stretch",0)?Jm(Re(e,"stretch","fill-available"),n,r)+e:e}break;case 5152:case 5920:return Re(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(o,a,l,c,d,h,g){return Xe+a+":"+l+g+(c?Xe+a+"-span:"+(d?h:+h-+l)+g:"")+e});case 4949:if(gt(e,n+6)===121)return Re(e,":",":"+be)+e;break;case 6444:switch(gt(e,gt(e,14)===45?18:11)){case 120:return Re(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+be+(gt(e,14)===45?"inline-":"")+"box$3$1"+be+"$2$3$1"+Xe+"$2box$3")+e;case 100:return Re(e,":",":"+Xe)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Re(e,"scroll-","scroll-snap-")+e}return e}function Ul(e,n){for(var r="",o=0;o<e.length;o++)r+=n(e[o],o,e,n)||"";return r}function jS(e,n,r,o){switch(e.type){case MS:if(e.children.length)break;case kS:case Kd:return e.return=e.return||e.value;case Vm:return"";case Xm:return e.return=e.value+"{"+Ul(e.children,o)+"}";case jl:if(!Bn(e.value=e.props.join(",")))return""}return Bn(r=Ul(e.children,o))?e.return=e.value+"{"+r+"}":""}function VS(e){var n=qm(e);return function(r,o,a,l){for(var c="",d=0;d<n;d++)c+=e[d](r,o,a,l)||"";return c}}function XS(e){return function(n){n.root||(n=n.return)&&e(n)}}function KS(e,n,r,o){if(e.length>-1&&!e.return)switch(e.type){case Kd:e.return=Jm(e.value,e.length,r);return;case Xm:return Ul([Di(e,{value:Re(e.value,"@","@"+be)})],o);case jl:if(e.length)return US(r=e.props,function(a){switch(Jn(a,o=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":jr(Di(e,{props:[Re(a,/:(read-\w+)/,":"+ws+"$1")]})),jr(Di(e,{props:[a]})),Dd(e,{props:Og(r,o)});break;case"::placeholder":jr(Di(e,{props:[Re(a,/:(plac\w+)/,":"+be+"input-$1")]})),jr(Di(e,{props:[Re(a,/:(plac\w+)/,":"+ws+"$1")]})),jr(Di(e,{props:[Re(a,/:(plac\w+)/,Xe+"input-$1")]})),jr(Di(e,{props:[a]})),Dd(e,{props:Og(r,o)});break}return""})}}var QS={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},en={},ho=typeof process<"u"&&en!==void 0&&(en.REACT_APP_SC_ATTR||en.SC_ATTR)||"data-styled",e0="active",t0="data-styled-version",Ql="6.1.13",qd=`/*!sc*/
`,Hl=typeof window<"u"&&"HTMLElement"in window,qS=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&en!==void 0&&en.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&en.REACT_APP_SC_DISABLE_SPEEDY!==""?en.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&en.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&en!==void 0&&en.SC_DISABLE_SPEEDY!==void 0&&en.SC_DISABLE_SPEEDY!==""&&en.SC_DISABLE_SPEEDY!=="false"&&en.SC_DISABLE_SPEEDY),ZS={},ql=Object.freeze([]),po=Object.freeze({});function n0(e,n,r){return r===void 0&&(r=po),e.theme!==r.theme&&e.theme||n||r.theme}var i0=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),JS=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,eA=/(^-|-$)/g;function Fg(e){return e.replace(JS,"-").replace(eA,"")}var tA=/(a)(d)/gi,sl=52,Ug=function(e){return String.fromCharCode(e+(e>25?39:97))};function Md(e){var n,r="";for(n=Math.abs(e);n>sl;n=n/sl|0)r=Ug(n%sl)+r;return(Ug(n%sl)+r).replace(tA,"$1-$2")}var td,r0=5381,Jr=function(e,n){for(var r=n.length;r;)e=33*e^n.charCodeAt(--r);return e},o0=function(e){return Jr(r0,e)};function s0(e){return Md(o0(e)>>>0)}function nA(e){return e.displayName||e.name||"Component"}function nd(e){return typeof e=="string"&&!0}var a0=typeof Symbol=="function"&&Symbol.for,l0=a0?Symbol.for("react.memo"):60115,iA=a0?Symbol.for("react.forward_ref"):60112,rA={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},oA={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},u0={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},sA=((td={})[iA]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},td[l0]=u0,td);function Hg(e){return("type"in(n=e)&&n.type.$$typeof)===l0?u0:"$$typeof"in e?sA[e.$$typeof]:rA;var n}var aA=Object.defineProperty,lA=Object.getOwnPropertyNames,Lg=Object.getOwnPropertySymbols,uA=Object.getOwnPropertyDescriptor,cA=Object.getPrototypeOf,Bg=Object.prototype;function c0(e,n,r){if(typeof n!="string"){if(Bg){var o=cA(n);o&&o!==Bg&&c0(e,o,r)}var a=lA(n);Lg&&(a=a.concat(Lg(n)));for(var l=Hg(e),c=Hg(n),d=0;d<a.length;++d){var h=a[d];if(!(h in oA||r&&r[h]||c&&h in c||l&&h in l)){var g=uA(n,h);try{aA(e,h,g)}catch{}}}}return e}function go(e){return typeof e=="function"}function Zd(e){return typeof e=="object"&&"styledComponentId"in e}function ur(e,n){return e&&n?"".concat(e," ").concat(n):e||n||""}function Fd(e,n){if(e.length===0)return"";for(var r=e[0],o=1;o<e.length;o++)r+=e[o];return r}function ks(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Ud(e,n,r){if(r===void 0&&(r=!1),!r&&!ks(e)&&!Array.isArray(e))return n;if(Array.isArray(n))for(var o=0;o<n.length;o++)e[o]=Ud(e[o],n[o]);else if(ks(n))for(var o in n)e[o]=Ud(e[o],n[o]);return e}function Jd(e,n){Object.defineProperty(e,"toString",{value:n})}function js(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(n.length>0?" Args: ".concat(n.join(", ")):""))}var dA=function(){function e(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}return e.prototype.indexOfGroup=function(n){for(var r=0,o=0;o<n;o++)r+=this.groupSizes[o];return r},e.prototype.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var o=this.groupSizes,a=o.length,l=a;n>=l;)if((l<<=1)<0)throw js(16,"".concat(n));this.groupSizes=new Uint32Array(l),this.groupSizes.set(o),this.length=l;for(var c=a;c<l;c++)this.groupSizes[c]=0}for(var d=this.indexOfGroup(n+1),h=(c=0,r.length);c<h;c++)this.tag.insertRule(d,r[c])&&(this.groupSizes[n]++,d++)},e.prototype.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],o=this.indexOfGroup(n),a=o+r;this.groupSizes[n]=0;for(var l=o;l<a;l++)this.tag.deleteRule(o)}},e.prototype.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var o=this.groupSizes[n],a=this.indexOfGroup(n),l=a+o,c=a;c<l;c++)r+="".concat(this.tag.getRule(c)).concat(qd);return r},e}(),Dl=new Map,Ll=new Map,Ol=1,al=function(e){if(Dl.has(e))return Dl.get(e);for(;Ll.has(Ol);)Ol++;var n=Ol++;return Dl.set(e,n),Ll.set(n,e),n},fA=function(e,n){Ol=n+1,Dl.set(e,n),Ll.set(n,e)},hA="style[".concat(ho,"][").concat(t0,'="').concat(Ql,'"]'),pA=new RegExp("^".concat(ho,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),gA=function(e,n,r){for(var o,a=r.split(","),l=0,c=a.length;l<c;l++)(o=a[l])&&e.registerName(n,o)},mA=function(e,n){for(var r,o=((r=n.textContent)!==null&&r!==void 0?r:"").split(qd),a=[],l=0,c=o.length;l<c;l++){var d=o[l].trim();if(d){var h=d.match(pA);if(h){var g=0|parseInt(h[1],10),m=h[2];g!==0&&(fA(m,g),gA(e,m,h[3]),e.getTag().insertRules(g,a)),a.length=0}else a.push(d)}}},Gg=function(e){for(var n=document.querySelectorAll(hA),r=0,o=n.length;r<o;r++){var a=n[r];a&&a.getAttribute(ho)!==e0&&(mA(e,a),a.parentNode&&a.parentNode.removeChild(a))}};function vA(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var d0=function(e){var n=document.head,r=e||n,o=document.createElement("style"),a=function(d){var h=Array.from(d.querySelectorAll("style[".concat(ho,"]")));return h[h.length-1]}(r),l=a!==void 0?a.nextSibling:null;o.setAttribute(ho,e0),o.setAttribute(t0,Ql);var c=vA();return c&&o.setAttribute("nonce",c),r.insertBefore(o,l),o},yA=function(){function e(n){this.element=d0(n),this.element.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var o=document.styleSheets,a=0,l=o.length;a<l;a++){var c=o[a];if(c.ownerNode===r)return c}throw js(17)}(this.element),this.length=0}return e.prototype.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},e.prototype.getRule=function(n){var r=this.sheet.cssRules[n];return r&&r.cssText?r.cssText:""},e}(),SA=function(){function e(n){this.element=d0(n),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(n,r){if(n<=this.length&&n>=0){var o=document.createTextNode(r);return this.element.insertBefore(o,this.nodes[n]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},e.prototype.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},e}(),AA=function(){function e(n){this.rules=[],this.length=0}return e.prototype.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},e.prototype.deleteRule=function(n){this.rules.splice(n,1),this.length--},e.prototype.getRule=function(n){return n<this.length?this.rules[n]:""},e}(),xg=Hl,TA={isServer:!Hl,useCSSOMInjection:!qS},Bl=function(){function e(n,r,o){n===void 0&&(n=po),r===void 0&&(r={});var a=this;this.options=Nt(Nt({},TA),n),this.gs=r,this.names=new Map(o),this.server=!!n.isServer,!this.server&&Hl&&xg&&(xg=!1,Gg(this)),Jd(this,function(){return function(l){for(var c=l.getTag(),d=c.length,h="",g=function(y){var S=function(U){return Ll.get(U)}(y);if(S===void 0)return"continue";var w=l.names.get(S),P=c.getGroup(y);if(w===void 0||!w.size||P.length===0)return"continue";var _="".concat(ho,".g").concat(y,'[id="').concat(S,'"]'),T="";w!==void 0&&w.forEach(function(U){U.length>0&&(T+="".concat(U,","))}),h+="".concat(P).concat(_,'{content:"').concat(T,'"}').concat(qd)},m=0;m<d;m++)g(m);return h}(a)})}return e.registerId=function(n){return al(n)},e.prototype.rehydrate=function(){!this.server&&Hl&&Gg(this)},e.prototype.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new e(Nt(Nt({},this.options),n),this.gs,r&&this.names||void 0)},e.prototype.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(n=function(r){var o=r.useCSSOMInjection,a=r.target;return r.isServer?new AA(a):o?new yA(a):new SA(a)}(this.options),new dA(n)));var n},e.prototype.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},e.prototype.registerName=function(n,r){if(al(n),this.names.has(n))this.names.get(n).add(r);else{var o=new Set;o.add(r),this.names.set(n,o)}},e.prototype.insertRules=function(n,r,o){this.registerName(n,r),this.getTag().insertRules(al(n),o)},e.prototype.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},e.prototype.clearRules=function(n){this.getTag().clearGroup(al(n)),this.clearNames(n)},e.prototype.clearTag=function(){this.tag=void 0},e}(),IA=/&/g,EA=/^\s*\/\/.*$/gm;function f0(e,n){return e.map(function(r){return r.type==="rule"&&(r.value="".concat(n," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(n," ")),r.props=r.props.map(function(o){return"".concat(n," ").concat(o)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=f0(r.children,n)),r})}function wA(e){var n,r,o,a=po,l=a.options,c=l===void 0?po:l,d=a.plugins,h=d===void 0?ql:d,g=function(S,w,P){return P.startsWith(r)&&P.endsWith(r)&&P.replaceAll(r,"").length>0?".".concat(n):S},m=h.slice();m.push(function(S){S.type===jl&&S.value.includes("&")&&(S.props[0]=S.props[0].replace(IA,r).replace(o,g))}),c.prefix&&m.push(KS),m.push(jS);var y=function(S,w,P,_){w===void 0&&(w=""),P===void 0&&(P=""),_===void 0&&(_="&"),n=_,r=w,o=new RegExp("\\".concat(r,"\\b"),"g");var T=S.replace(EA,""),U=WS(P||w?"".concat(P," ").concat(w," { ").concat(T," }"):T);c.namespace&&(U=f0(U,c.namespace));var H=[];return Ul(U,VS(m.concat(XS(function(D){return H.push(D)})))),H};return y.hash=h.length?h.reduce(function(S,w){return w.name||js(15),Jr(S,w.name)},r0).toString():"",y}var _A=new Bl,Hd=wA(),h0=Gn.createContext({shouldForwardProp:void 0,styleSheet:_A,stylis:Hd});h0.Consumer;Gn.createContext(void 0);function Ld(){return Pe.useContext(h0)}var CA=function(){function e(n,r){var o=this;this.inject=function(a,l){l===void 0&&(l=Hd);var c=o.name+l.hash;a.hasNameForId(o.id,c)||a.insertRules(o.id,c,l(o.rules,c,"@keyframes"))},this.name=n,this.id="sc-keyframes-".concat(n),this.rules=r,Jd(this,function(){throw js(12,String(o.name))})}return e.prototype.getName=function(n){return n===void 0&&(n=Hd),this.name+n.hash},e}(),RA=function(e){return e>="A"&&e<="Z"};function bg(e){for(var n="",r=0;r<e.length;r++){var o=e[r];if(r===1&&o==="-"&&e[0]==="-")return e;RA(o)?n+="-"+o.toLowerCase():n+=o}return n.startsWith("ms-")?"-"+n:n}var p0=function(e){return e==null||e===!1||e===""},g0=function(e){var n,r,o=[];for(var a in e){var l=e[a];e.hasOwnProperty(a)&&!p0(l)&&(Array.isArray(l)&&l.isCss||go(l)?o.push("".concat(bg(a),":"),l,";"):ks(l)?o.push.apply(o,Os(Os(["".concat(a," {")],g0(l),!1),["}"],!1)):o.push("".concat(bg(a),": ").concat((n=a,(r=l)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||n in QS||n.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return o};function Li(e,n,r,o){if(p0(e))return[];if(Zd(e))return[".".concat(e.styledComponentId)];if(go(e)){if(!go(l=e)||l.prototype&&l.prototype.isReactComponent||!n)return[e];var a=e(n);return Li(a,n,r,o)}var l;return e instanceof CA?r?(e.inject(r,o),[e.getName(o)]):[e]:ks(e)?g0(e):Array.isArray(e)?Array.prototype.concat.apply(ql,e.map(function(c){return Li(c,n,r,o)})):[e.toString()]}function m0(e){for(var n=0;n<e.length;n+=1){var r=e[n];if(go(r)&&!Zd(r))return!1}return!0}var PA=o0(Ql),NA=function(){function e(n,r,o){this.rules=n,this.staticRulesId="",this.isStatic=(o===void 0||o.isStatic)&&m0(n),this.componentId=r,this.baseHash=Jr(PA,r),this.baseStyle=o,Bl.registerId(r)}return e.prototype.generateAndInjectStyles=function(n,r,o){var a=this.baseStyle?this.baseStyle.generateAndInjectStyles(n,r,o):"";if(this.isStatic&&!o.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))a=ur(a,this.staticRulesId);else{var l=Fd(Li(this.rules,n,r,o)),c=Md(Jr(this.baseHash,l)>>>0);if(!r.hasNameForId(this.componentId,c)){var d=o(l,".".concat(c),void 0,this.componentId);r.insertRules(this.componentId,c,d)}a=ur(a,c),this.staticRulesId=c}else{for(var h=Jr(this.baseHash,o.hash),g="",m=0;m<this.rules.length;m++){var y=this.rules[m];if(typeof y=="string")g+=y;else if(y){var S=Fd(Li(y,n,r,o));h=Jr(h,S+m),g+=S}}if(g){var w=Md(h>>>0);r.hasNameForId(this.componentId,w)||r.insertRules(this.componentId,w,o(g,".".concat(w),void 0,this.componentId)),a=ur(a,w)}}return a},e}(),ef=Gn.createContext(void 0);ef.Consumer;var id={};function DA(e,n,r){var o=Zd(e),a=e,l=!nd(e),c=n.attrs,d=c===void 0?ql:c,h=n.componentId,g=h===void 0?function(x,W){var F=typeof x!="string"?"sc":Fg(x);id[F]=(id[F]||0)+1;var Y="".concat(F,"-").concat(s0(Ql+F+id[F]));return W?"".concat(W,"-").concat(Y):Y}(n.displayName,n.parentComponentId):h,m=n.displayName,y=m===void 0?function(x){return nd(x)?"styled.".concat(x):"Styled(".concat(nA(x),")")}(e):m,S=n.displayName&&n.componentId?"".concat(Fg(n.displayName),"-").concat(n.componentId):n.componentId||g,w=o&&a.attrs?a.attrs.concat(d).filter(Boolean):d,P=n.shouldForwardProp;if(o&&a.shouldForwardProp){var _=a.shouldForwardProp;if(n.shouldForwardProp){var T=n.shouldForwardProp;P=function(x,W){return _(x,W)&&T(x,W)}}else P=_}var U=new NA(r,S,o?a.componentStyle:void 0);function H(x,W){return function(F,Y,ue){var we=F.attrs,_e=F.componentStyle,xe=F.defaultProps,De=F.foldedComponentIds,Ie=F.styledComponentId,le=F.target,Fe=Gn.useContext(ef),ye=Ld(),J=F.shouldForwardProp||ye.shouldForwardProp,b=n0(Y,Fe,xe)||po,j=function(he,re,Se){for(var ve,K=Nt(Nt({},re),{className:void 0,theme:Se}),te=0;te<he.length;te+=1){var Oe=go(ve=he[te])?ve(K):ve;for(var ce in Oe)K[ce]=ce==="className"?ur(K[ce],Oe[ce]):ce==="style"?Nt(Nt({},K[ce]),Oe[ce]):Oe[ce]}return re.className&&(K.className=ur(K.className,re.className)),K}(we,Y,b),z=j.as||le,C={};for(var M in j)j[M]===void 0||M[0]==="$"||M==="as"||M==="theme"&&j.theme===b||(M==="forwardedAs"?C.as=j.forwardedAs:J&&!J(M,z)||(C[M]=j[M]));var V=function(he,re){var Se=Ld(),ve=he.generateAndInjectStyles(re,Se.styleSheet,Se.stylis);return ve}(_e,j),ee=ur(De,Ie);return V&&(ee+=" "+V),j.className&&(ee+=" "+j.className),C[nd(z)&&!i0.has(z)?"class":"className"]=ee,C.ref=ue,Pe.createElement(z,C)}(D,x,W)}H.displayName=y;var D=Gn.forwardRef(H);return D.attrs=w,D.componentStyle=U,D.displayName=y,D.shouldForwardProp=P,D.foldedComponentIds=o?ur(a.foldedComponentIds,a.styledComponentId):"",D.styledComponentId=S,D.target=o?a.target:e,Object.defineProperty(D,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(x){this._foldedDefaultProps=o?function(W){for(var F=[],Y=1;Y<arguments.length;Y++)F[Y-1]=arguments[Y];for(var ue=0,we=F;ue<we.length;ue++)Ud(W,we[ue],!0);return W}({},a.defaultProps,x):x}}),Jd(D,function(){return".".concat(D.styledComponentId)}),l&&c0(D,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),D}function zg(e,n){for(var r=[e[0]],o=0,a=n.length;o<a;o+=1)r.push(n[o],e[o+1]);return r}var $g=function(e){return Object.assign(e,{isCss:!0})};function v0(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(go(e)||ks(e))return $g(Li(zg(ql,Os([e],n,!0))));var o=e;return n.length===0&&o.length===1&&typeof o[0]=="string"?Li(o):$g(Li(zg(o,n)))}function Bd(e,n,r){if(r===void 0&&(r=po),!n)throw js(1,n);var o=function(a){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];return e(n,r,v0.apply(void 0,Os([a],l,!1)))};return o.attrs=function(a){return Bd(e,n,Nt(Nt({},r),{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},o.withConfig=function(a){return Bd(e,n,Nt(Nt({},r),a))},o}var y0=function(e){return Bd(DA,e)},zn=y0;i0.forEach(function(e){zn[e]=y0(e)});var OA=function(){function e(n,r){this.rules=n,this.componentId=r,this.isStatic=m0(n),Bl.registerId(this.componentId+1)}return e.prototype.createStyles=function(n,r,o,a){var l=a(Fd(Li(this.rules,r,o,a)),""),c=this.componentId+n;o.insertRules(c,c,l)},e.prototype.removeStyles=function(n,r){r.clearRules(this.componentId+n)},e.prototype.renderStyles=function(n,r,o,a){n>2&&Bl.registerId(this.componentId+n),this.removeStyles(n,o),this.createStyles(n,r,o,a)},e}();function kA(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=v0.apply(void 0,Os([e],n,!1)),a="sc-global-".concat(s0(JSON.stringify(o))),l=new OA(o,a),c=function(h){var g=Ld(),m=Gn.useContext(ef),y=Gn.useRef(g.styleSheet.allocateGSInstance(a)).current;return g.styleSheet.server&&d(y,h,g.styleSheet,m,g.stylis),Gn.useLayoutEffect(function(){if(!g.styleSheet.server)return d(y,h,g.styleSheet,m,g.stylis),function(){return l.removeStyles(y,g.styleSheet)}},[y,h,g.styleSheet,m,g.stylis]),null};function d(h,g,m,y,S){if(l.isStatic)l.renderStyles(h,ZS,m,S);else{var w=Nt(Nt({},g),{theme:n0(g,y,c.defaultProps)});l.renderStyles(h,w,m,S)}}return Gn.memo(c)}function S0(e,n){var r=Pe.useRef(null),o=Pe.useRef(!1),a=Pe.useRef(e);a.current=e;var l=Pe.useCallback(function(d){o.current&&(a.current(d),r.current=requestAnimationFrame(l))},[]),c=Pe.useMemo(function(){return[function(){o.current&&(o.current=!1,r.current&&cancelAnimationFrame(r.current))},function(){o.current||(o.current=!0,r.current=requestAnimationFrame(l))},function(){return o.current}]},[]);return Pe.useEffect(function(){return c[0]},[]),c}function MA(e,n,r,o,a){var c;(c=e.onExit)==null||c.call(e,o,n);const l=a.find(({id:d})=>d===n);return l!=null&&l.onEnter?l.onEnter(o,r):{...r,enteredAt:o.updateContext.gameState.time}}function FA(e,n){return n.find(({id:r})=>r===e)}function UA(e,n){return e!==n}function HA(e){console.warn(`No handler found for state: ${e}`)}const _s="bushGrowing",lr="bushFull",kl="bushSpreading",Ms="bushDying",Vt=24,Xt=10,Ze=3e3,Je=3e3,tf=2,LA=5,BA=3,GA=12,xA=940,Gd=20,Wg=90,A0=45,T0=240,Zl=10,Fs=80,bA=3,ds=5,tn=150,I0=tn*.8,zA=tn*.2,yr=tn*.95,Gi=30,E0=10,$A=10,WA=.5,mt=30,xi=mt*.75,w0=50,YA=20,jA=Fs*.8,VA=.7,XA=16,_0=40,KA=24,nf=16,QA=72/3,Yg=24,qA=1.25,ZA=1.5,rf=tn*.6,of=50,JA=1,eT=350,C0=Fs*.65,tT=80,nT=50,iT=1,rT=128,R0=10,jg=100,sf=35,xn=mt,P0=.5,Jl=2.5,oT=5,af=.5,lf=1.5,sT=.1,aT=.5,lT=1.5,uT=.25,cT=2.5,dT=45,fT=.05,Us=5,hT=.5,Vg=100,pT=300,eu=30,Hs=1,Xg=tn*.6,gT=tn*.25,mT=tn*.7,vT=tn*.8,Kg=300,yT=600,N0=100,ST=250,AT=120,TT=2,IT=400,ET=1e3,wT=tn*.85,_T=100,CT=3,RT=96,PT=24,NT=600,D0=600,DT=1,OT=24,kT=1,MT=.5,FT=2,xd=24,bd=12,Qg=40,UT=.3,HT=24,qg=500,LT=24,Zg=24,BT=1500,rd=500,GT=400,xT=10,bT=-5,zT=1.5,$T=1.5,WT=1.2,YT=10,jT=150,VT=200,XT=100,KT=100,QT=.7,qT=300,ZT=100,JT=120,Jg=400,mo=10,O0=250,Ls=12,Ml=xi*1.2,k0=10,eI=20,M0=.15,F0=200,vt=30,Eo=vt*.6,uf="#4CAF50",U0="#FF5722",H0="#9C27B0",tI="#2196F3",L0="#FFC107",nI="#FFD700",B0="#DC143C",cf="#FFFFFF",df=[5,5],tu=5,vo=15,iI=20,rI=16,oI=10,sI=16,aI=16,em=["","","","","","","","","",""],zd=8,lI="#FFFFFF",Oi=18,Yt=15,uI="rgba(0, 0, 0, 0.7)",cI=4,Ri=150,Jt=15,qn=10,eo="#555",dI="#f44336",fI="#4CAF50",hI="#2196F3",pI="#FFC107",ll=16,gI=9,nr=32,ul=28,mI=10,vI=8,yI=8,SI=8,cn=28,cl=40,AI="rgba(255, 215, 0, 0.7)",TI="rgba(0, 0, 0, 0.3)",Un=10,tm=8,od=11,Pi=20,sd=40,nm=5,II=10,EI="#FFA500",wI="#808080",to=120,_I=30,CI=20,dl="#2d3748",no="#ffffff",ad="#4a5568",RI=5,G0="#bdc9f792",PI="#272c36ff",NI="#a0aec0",im=300,DI="rgba(255, 255, 255, 0.5)",OI="rgba(0, 0, 0, 0.8)",kI="#FFFFFF",rm=14,om=8,sm=-15,MI="#FFD700",FI=5,UI=60,HI=-50,LI=10,ld=12,am=10,BI="rgba(0, 0, 0, 0.5)",GI="#4CAF50",xI="#F44336",bI="#FFC107",zI="rgba(255, 255, 255, 0.2)",lm="#FFFFFF",$I="#FF6B6B",WI=5,x0=30,fs=50,fl=8,um=10,YI="rgba(0, 0, 0, 0.5)",jI="#FFFFFF",VI=33,XI=400,KI=20,QI=10,qI="rgba(0, 0, 0, 0.7)",ZI="#FFFFFF",ud=20,cm=16,JI=.5,dm=5,b0="#FFD700",eE=40,ff=4,z0=3,tE=5,$0=20,W0=5,nE="#FFFFFF",iE="#FF6B6B",Be=1,cr=3,rE=70,fm=600,oE=1.5,Y0=.1,sE=15,aE=5e3,ir=80,hl=10,lE=12,uE=24,cE=tn*.9,dE=24,pl=300,rr=15,fE=8,hE="rgba(0, 0, 0, 0.8)",pE="#FFFFFF",cd=14,hm=10,Hn=20,gE="#FF6B6B",mE="#4CAF50",pm="#FFD700",vE="rgba(255, 255, 0, 0.3)",yE=2,SE=500,AE=120,TE=45,IE="#FFD700",EE=3,wE=4,j0=12,_E=120,gm=50,CE=12,V0=30,RE=2,Lt=50,PE=150,Cs=2,dd=8,NE=.5,DE=1,OE=80,kE=.7,X0=20,ME=140,mm=40,FE=12,K0=40,UE=3,Bi=60,Tn=40,Qr=50,vm=320,Q0=25,HE=60,q0=2,LE=90,BE=.7,GE=1.5,Rs=3,fd=15,hf=80,Z0=10,nu=80,wo=40,J0=2,Gl=30,ti=100,ni=20,ii=60,io=10,fr=40,ro=12,hr=48,oo=12,pr=50,so=18,gr=60,ao=.5,Ui=2.5,lo=.25,Hi=2,ri=.1,As=.9;function Ce(e,n,r,o,a){const l={id:e.nextVisualEffectId,type:n,position:r,startTime:e.time,duration:o,entityId:a};return e.visualEffects.push(l),e.nextVisualEffectId++,l.id}var se=(e=>(e[e.Hunger=0]="Hunger",e[e.Procreation=1]="Procreation",e[e.Pregnant=2]="Pregnant",e[e.TargetAcquired=3]="TargetAcquired",e[e.Attack=4]="Attack",e[e.Partnered=5]="Partnered",e[e.BushClaimed=6]="BushClaimed",e[e.BushClaimLost=7]="BushClaimLost",e[e.Eating=8]="Eating",e[e.ChildFed=9]="ChildFed",e[e.AttackDeflected=10]="AttackDeflected",e[e.AttackResisted=11]="AttackResisted",e[e.Hit=12]="Hit",e[e.SeizeBuildup=13]="SeizeBuildup",e[e.Seize=14]="Seize",e[e.CallToAttack=15]="CallToAttack",e[e.CallToFollow=16]="CallToFollow",e[e.AutopilotMoveTarget=17]="AutopilotMoveTarget",e))(se||{}),oi=(e=>(e.Berry="berry",e.Meat="meat",e))(oi||{});const ev={berry:"",meat:""},xE={id:_s,update:(e,n)=>{const{entity:r,updateContext:o}=n,a=o.deltaTime*(Vt/Xt);return r.age+=a,r.age>=r.lifespan?{nextState:Ms,data:{...e,enteredAt:o.gameState.time}}:(r.ownerId&&r.claimedUntil&&o.gameState.time>r.claimedUntil&&(Ce(o.gameState,se.BushClaimLost,r.position,Be),r.ownerId=void 0,r.claimedUntil=void 0),r.timeSinceLastBerryRegen+=a,r.timeSinceLastBerryRegen>=GA&&r.food.length<r.maxFood&&(r.food.push({type:oi.Berry}),r.timeSinceLastBerryRegen=0),r.food.length>=r.maxFood?{nextState:lr,data:{...e,enteredAt:o.gameState.time,previousState:_s}}:{nextState:_s,data:e})},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},bE={id:lr,update:(e,n)=>{const{entity:r,updateContext:o}=n,a=o.deltaTime*(Vt/Xt);return r.age+=a,r.age>=r.lifespan?{nextState:Ms,data:{...e,enteredAt:o.gameState.time,previousState:lr}}:r.food.length<r.maxFood?{nextState:_s,data:{...e,enteredAt:o.gameState.time,previousState:lr}}:(r.ownerId&&r.claimedUntil&&o.gameState.time>r.claimedUntil&&(Ce(o.gameState,se.BushClaimLost,r.position,Be),r.ownerId=void 0,r.claimedUntil=void 0),r.timeSinceLastSpreadAttempt+=a,r.timeSinceLastSpreadAttempt>=Wg&&(r.timeSinceLastSpreadAttempt=0,o.gameState.time-r.timeSinceLastHarvest>=Wg&&Math.random()<o.gameState.ecosystem.berryBushSpreadChance)?{nextState:kl,data:{...e,enteredAt:o.gameState.time,previousState:lr}}:{nextState:lr,data:e})},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})};function bn(e,n){return{x:e.x+n.x,y:e.y+n.y}}function tv(e,n){return{x:e.x-n.x,y:e.y-n.y}}function Tt(e,n){return{x:e.x*n,y:e.y*n}}function yo(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function et(e){const n=yo(e);return n===0?{x:0,y:0}:Tt(e,1/n)}function zE(e,n){return yo(tv(e,n))}function pf(e,n,r){return{x:e.x+(n.x-e.x)*r,y:e.y+(n.y-e.y)*r}}function gf(e){if(e.length===0)return{x:0,y:0};const n=e.reduce((r,o)=>({x:r.x+o.x,y:r.y+o.y}),{x:0,y:0});return{x:n.x/e.length,y:n.y/e.length}}function $e(e,n,r,o){let a=n.x-e.x,l=n.y-e.y;return Math.abs(a)>r/2&&(a=a-Math.sign(a)*r),Math.abs(l)>o/2&&(l=l-Math.sign(l)*o),{x:a,y:l}}function jt(e,n,r){const o=$e(e,n,r.width,r.height);return et(o)}function X(e,n,r,o){const a=$e(e,n,r,o);return yo(a)}function $E(e,n){return e.x*n.x+e.y*n.y}function WE(e,n){const r=$E(e,n),o=yo(e),a=yo(n);if(o===0||a===0)return 0;const l=Math.max(-1,Math.min(1,r/(o*a)));return Math.acos(l)}function YE(e,n,r){const o=Math.max(0,Math.min(1,r)),a={r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)},l={r:parseInt(n.substring(1,3),16),g:parseInt(n.substring(3,5),16),b:parseInt(n.substring(5,7),16)},c=Math.round(a.r+(l.r-a.r)*o),d=Math.round(a.g+(l.g-a.g)*o),h=Math.round(a.b+(l.b-a.b)*o),g=m=>("00"+m.toString(16)).slice(-2);return`#${g(c)}${g(d)}${g(h)}`}var Ht=(e=>(e.Friendly="Friendly",e.Hostile="Hostile",e))(Ht||{});function ym(e,n,r){return n.search.human.byRadius(e.position,r).filter(l=>{if(l.id===e.id||l.gender===e.gender||!l.isAdult||l.hunger>=yr||(l.procreationCooldown||0)>0||l.gender==="female"&&l.isPregnant)return!1;const c=l.id===e.motherId||l.id===e.fatherId,d=e.id===l.motherId||e.id===l.fatherId;return!c&&!d})}function si(e){if(e.length===0)return;const n=e.filter(a=>a.gender==="male"),r=e.filter(a=>a.gender==="female"),o=(a,l)=>a.age!==l.age?l.age-a.age:a.id-l.id;if(n.sort(o),n.length>0)return n[0];if(r.sort(o),r.length>0)return r[0]}function It(e,n){const r=e,o=r.search.human.byProperty("motherId",n.id),a=r.search.human.byProperty("fatherId",n.id);return[...o,...a]}function nv(e,n,r){var a;if(e.id===n.id||e.motherId===n.id||e.fatherId===n.id||n.motherId===e.id||n.fatherId===e.id||e.motherId&&e.motherId===n.motherId||e.fatherId&&e.fatherId===n.fatherId||(a=e.partnerIds)!=null&&a.includes(n.id))return!0;if(e.motherId){const l=r.entities.entities.get(e.motherId);if(l&&(l.motherId===n.id||l.fatherId===n.id))return!0}if(e.fatherId){const l=r.entities.entities.get(e.fatherId);if(l&&(l.motherId===n.id||l.fatherId===n.id))return!0}if(n.motherId){const l=r.entities.entities.get(n.motherId);if(l&&(l.motherId===e.id||l.fatherId===e.id))return!0}if(n.fatherId){const l=r.entities.entities.get(n.fatherId);if(l&&(l.motherId===e.id||l.fatherId===e.id))return!0}return!1}function $d(e,n){var l,c,d,h;if(e.id===n.id||e.motherId===n.id||e.fatherId===n.id||n.motherId===e.id||n.fatherId===e.id||(l=e.partnerIds)!=null&&l.includes(n.id)||(c=n.partnerIds)!=null&&c.includes(e.id))return!0;if(e.fatherId===void 0&&e.motherId===void 0||n.fatherId===void 0&&n.motherId===void 0)return!1;const r=e.motherId===n.motherId||e.fatherId===n.fatherId,o=n.motherId===e.motherId||n.fatherId===e.fatherId,a=((d=e.ancestorIds)==null?void 0:d.some(g=>n.ancestorIds.includes(g)))||((h=n.ancestorIds)==null?void 0:h.some(g=>e.ancestorIds.includes(g)));return r||o||a}function jE(e,n){const r=[];if(e.motherId){const o=n.entities.entities.get(e.motherId);o&&r.push(o)}if(e.fatherId){const o=n.entities.entities.get(e.fatherId);o&&r.push(o)}return r}function VE(e,n){if(e.gender!=="female"||!e.partnerIds||e.partnerIds.length===0)return null;for(const r of e.partnerIds){const o=n.entities.entities.get(r);if(o&&o.gender==="male")return o}return null}function XE(e,n){var r;if(!e.isAdult&&e.fatherId){const o=n.entities.entities.get(e.fatherId);if(o&&o.type==="human")return o}if(e.isAdult&&e.fatherId){const o=n.entities.entities.get(e.fatherId);if(o&&o.type==="human"&&((r=si(It(n,o)))==null?void 0:r.id)===e.id)return o}return e.isAdult&&e.gender==="female"&&e.partnerIds&&e.partnerIds.length>0?VE(e,n):null}function xl(e,n){var o;const r=new Set;if(e.motherId){const a=n.entities.entities.get(e.motherId);a&&r.add(a)}if(e.fatherId){const a=n.entities.entities.get(e.fatherId);a&&r.add(a)}return(o=e.partnerIds)==null||o.forEach(a=>{const l=n.entities.entities.get(a);l&&r.add(l)}),It(n,e).forEach(a=>r.add(a)),Array.from(r)}function iv(e,n){const r=new Map;function o(a){const l=It(n,a);for(const c of l)r.has(c.id)||(r.set(c.id,c),o(c))}return o(e),Array.from(r.values())}function Bs(e,n){return n.search.human.byProperty("leaderId",e)}function rv(e,n){var c,d;const r=new Map,o=Array.from(e.entities.entities.values()).filter(h=>h.type==="human");for(const h of o)h.leaderId&&(r.has(h.leaderId)||r.set(h.leaderId,{leaderId:h.leaderId,tribeBadge:h.tribeBadge||"?",members:[]}),(c=r.get(h.leaderId))==null||c.members.push(h));const a=n?(d=e.entities.entities.get(n))==null?void 0:d.diplomacy:void 0,l=Array.from(r.values()).map(h=>{const g=e.entities.entities.get(h.leaderId),m=h.members.filter(S=>S.isAdult).length,y=h.members.length-m;return{leaderId:h.leaderId,tribeBadge:h.tribeBadge,adultCount:m,childCount:y,isPlayerTribe:h.leaderId===n,leaderAge:(g==null?void 0:g.age)??0,leaderGender:(g==null?void 0:g.gender)??"male",diplomacyStatus:(a==null?void 0:a.get(h.leaderId??-1))??Ht.Friendly}});return l.sort((h,g)=>h.isPlayerTribe?-1:g.isPlayerTribe?1:g.adultCount+g.childCount-(h.adultCount+h.childCount)),l}function Ne(e,n,r,o,a){const l=n,c=o,d="position"in e&&e.id?e:null,h=d?d.position:e,g=l.search[r].byRadius(h,c);let m=null,y=c;for(const S of g){if(S.id===(d==null?void 0:d.id)||a&&!a(S))continue;const w=X(h,S.position,n.mapDimensions.width,n.mapDimensions.height);w<y&&(y=w,m=S)}return m}function ov(e,n,r,o){return n.search[r].byRadius(e,o)}function sv(e,n,r,o){return ov(e,n,r,o).length}function Et(e){const r=e.search.human.byProperty("isPlayer",!0);return r.length>0?r[0]:void 0}function KE(e,n){var c;const o=n.search.human.byProperty("activeAction","attacking");let a=null,l=1/0;for(const d of o){if(d.attackTargetId!==e)continue;const h=X(d.position,((c=n.entities.entities.get(e))==null?void 0:c.position)||{x:0,y:0},n.mapDimensions.width,n.mapDimensions.height);h<l&&(a=d,l=h)}return a}function QE(e){return Array.from(e.entities.entities.values()).filter(n=>n.type==="human")}function qE(e,n,r){const o=Array.from(n.entities.entities.values()).reverse();for(const a of o)if(zE(e,a.position)<a.radius)return a}function mf(e,n,r,o){const a=Math.random()*Math.PI*2,l=Math.sqrt(Math.random())*n,c={x:Math.cos(a)*l,y:Math.sin(a)*l},d=bn(e,c);return{x:(d.x%r+r)%r,y:(d.y%o+o)%o}}function So(e,n,r,o){const a=n,l={left:e.x-r,top:e.y-r,right:e.x+r,bottom:e.y+r},c=[...a.search.human.byRect(l),...a.search.berryBush.byRect(l),...a.search.corpse.byRect(l)];for(const d of c){if(o!==void 0&&d.id===o)continue;if(X(e,d.position,n.mapDimensions.width,n.mapDimensions.height)<r+d.radius)return!0}return!1}function vf(e,n,r,o,a){const l=n.mapDimensions.width,c=n.mapDimensions.height;if(!So(e,n,o,a))return e;const d=o;for(let h=d;h<=r;h+=d){const g=Math.ceil(2*Math.PI*h/d);for(let m=0;m<g;m++){const y=m/g*2*Math.PI,S={x:Math.cos(y)*h,y:Math.sin(y)*h},w=bn(e,S),P={x:(w.x%l+l)%l,y:(w.y%c+c)%c};if(!So(P,n,o,a))return P}}return null}function Sr(e,n){const r=Bs(e,n);if(r.length===0){const a=n.entities.entities.get(e);return a?a.position:{x:0,y:0}}const o=r.map(a=>a.position);return gf(o)}function Sm(e,n){const o=[...xl(e,n),e].map(a=>a.position);return gf(o)}function ZE(e,n,r){return n.search.human.byRadius(e.position,r).filter(a=>{var l;return a.activeAction==="procreating"&&a.gender===e.gender&&typeof a.target=="number"&&((l=e.partnerIds)==null?void 0:l.includes(a.target))})[0]}function JE(e,n,r){if(!e.leaderId)return;const o=n,a=o.search.berryBush.byRadius(e.position,r).filter(l=>l.ownerId===e.id);for(const l of a)if(l.claimedUntil&&n.time<l.claimedUntil){const c=o.search.human.byRadius(l.position,mt);for(const d of c)if(!$d(d,e)&&d.activeAction==="gathering"&&d.target===l.id)return d}}function ew(e,n,r){const o=xl(e,n),a=n;for(const l of o){if(X(e.position,l.position,n.mapDimensions.width,n.mapDimensions.height)>r)continue;const d=a.search.human.byProperty("attackTargetId",l.id);for(const h of d)if(h.leaderId!==e.leaderId)return{familyMember:l,aggressor:h}}}function tw(e,n){const o=n.search.human.byRadius(e.position,qT);let a,l=1/0;for(const c of o){if(c.id===e.id||c.hitpoints<=0||c.hitpoints/c.maxHitpoints>QT||nv(e,c,n))continue;const d=X(e.position,c.position,n.mapDimensions.width,n.mapDimensions.height);d<l&&(l=d,a=c)}return a}function nw(e,n){const r=Ne(e,n,"berryBush",Vg,a=>a.ownerId===e.id);return r?vf(r.position,n,Vg,eu,r.id):null}function yf(e,n,r){return n.search.human.byRadius(e.position,r).filter(a=>_o(e,a,n))}function iw(e,n,r){const o=r.search.human.byProperty("leaderId",e);let a=0;for(const l of o)l.attackTargetId===n&&a++;return a}function Am(e,n,r,o){const a=r.search.berryBush.byRadius(e,n),l=r.search.human.byRadius(e,n).filter(h=>h.leaderId!==o);let c=a.length*xT;c+=l.length*bT;let d;if(l.length>0){const h={};for(const m of l)m.leaderId&&(h[m.leaderId]=(h[m.leaderId]||0)+1);let g=0;for(const m in h)h[m]>g&&(g=h[m],d=parseInt(m,10))}return{score:c,occupyingTribeId:d}}function bl(e){return e.filter(n=>n.isAdult).reduce((n,r)=>{let o=r.hitpoints;return o+=(r.maxAge-r.age)*.5,o+=r.food.length*2,n+o},0)}function rw(e,n){if(e.id!==e.leaderId)return null;const r=n,o=Sr(e.id,n),{score:a}=Am(o,rd/2,r,e.id);let l=null,c=a;const d=GT,h=BT;for(let g=e.position.x-h;g<e.position.x+h;g+=d)for(let m=e.position.y-h;m<e.position.y+h;m+=d){const y={x:(g%n.mapDimensions.width+n.mapDimensions.width)%n.mapDimensions.width,y:(m%n.mapDimensions.height+n.mapDimensions.height)%n.mapDimensions.height};if(X(o,y,n.mapDimensions.width,n.mapDimensions.height)<rd*2)continue;const{score:w}=Am(y,rd/2,r,e.id);w>c*zT&&(c=w,l=y)}return l}let hd=0;function Wd(){const e=em[hd];return hd=(hd+1)%em.length,e}var Ee=(e=>(e.Gather="Gather",e.Eat="Eat",e.Procreate="Procreate",e.Attack="Attack",e.Plant="Plant",e.CallToAttack="CallToAttack",e.TribeSplit="TribeSplit",e.FollowMe="FollowMe",e.FeedChild="FeedChild",e.HuntPrey="HuntPrey",e.DefendAgainstPredator="DefendAgainstPredator",e.AutopilotMove="AutopilotMove",e.AutopilotGather="AutopilotGather",e.AutopilotAttack="AutopilotAttack",e.AutopilotProcreate="AutopilotProcreate",e.AutopilotPlant="AutopilotPlant",e.AutopilotFeedChild="AutopilotFeedChild",e.AutopilotFollowMe="AutopilotFollowMe",e))(Ee||{});const iu={Gather:"",Eat:"",Procreate:"",Attack:"",Plant:"",CallToAttack:"",TribeSplit:"",FollowMe:"",FeedChild:"",HuntPrey:"",DefendAgainstPredator:"",AutopilotMove:"",AutopilotGather:"",AutopilotAttack:"",AutopilotProcreate:"",AutopilotPlant:"",AutopilotFeedChild:"",AutopilotFollowMe:""},av={Gather:"Gather",Eat:"Eat",Procreate:"Procreate",Attack:"Attack",Plant:"Plant",CallToAttack:"Call to Attack",TribeSplit:"Split Tribe",FollowMe:"Follow Me",FeedChild:"Feed Child",HuntPrey:"Hunt Prey",DefendAgainstPredator:"Defend",AutopilotMove:"Walk",AutopilotGather:"Gather",AutopilotAttack:"Attack",AutopilotProcreate:"Procreate",AutopilotPlant:"Plant",AutopilotFeedChild:"Feed",AutopilotFollowMe:"Follow"};var qr=(e=>(e.Time="Time",e.Hunger="Hunger",e.Hitpoints="Hitpoints",e.Food="Food",e.Autopilot="Autopilot",e.Muted="Muted",e.Family="Family",e.Tribes="Tribes",e))(qr||{});const hs={Time:"",Hunger:"",Hitpoints:"",Food:"",Autopilot:"",Muted:"",Family:"",Tribes:""};var Ue=(e=>(e.ToggleMute="ToggleMute",e.TogglePause="TogglePause",e.FastForward="FastForward",e.DismissTutorial="DismissTutorial",e.CommandEat="CommandEat",e.CommandPlant="CommandPlant",e.CommandCallToAttack="CommandCallToAttack",e.CommandFollowMe="CommandFollowMe",e.CommandGather="CommandGather",e.CommandTribeSplit="CommandTribeSplit",e.ToggleProcreationBehavior="ToggleProcreationBehavior",e.ToggleAttackBehavior="ToggleAttackBehavior",e.ToggleFeedChildBehavior="ToggleFeedChildBehavior",e.TogglePlantingBehavior="TogglePlantingBehavior",e.ToggleGatheringBehavior="ToggleGatheringBehavior",e.ToggleAutopilotFollowLeaderBehavior="ToggleAutopilotFollowLeaderBehavior",e.ToggleDiplomacy="ToggleDiplomacy",e))(Ue||{}),Gs=(e=>(e.Hello="HELLO",e.NewTribeFormed="NEW_TRIBE_FORMED",e.NoHeir="NO_HEIR",e.ChildrenStarving="CHILDREN_STARVING",e))(Gs||{});let ow=0;function sw(){return`notification-${Date.now()}-${ow++}`}function Yd(e,n){if(n.identifier){const o=e.notifications.find(a=>a.identifier===n.identifier);if(o){if(o.dismissedUntil&&e.time<o.dismissedUntil)return;o.message=n.message,o.timestamp=e.time,o.creationTime=Date.now(),o.duration=n.duration,o.targetEntityIds=n.targetEntityIds,o.highlightedEntityIds=n.highlightedEntityIds,o.targetPosition=n.targetPosition,o.targetArea=n.targetArea,o.targetRadius=n.targetRadius,o.isDismissed=!1,o.dismissedUntil=void 0;return}}const r={...n,id:sw(),timestamp:e.time,creationTime:Date.now(),isDismissed:!1};e.notifications.push(r)}function aw(e,n){const r=e.notifications.find(o=>o.id===n);r&&(r.isDismissed=!0,r.identifier&&(r.dismissedUntil=e.time+dE))}function lw(e){const n=e.time;e.notifications=e.notifications.filter(r=>r.duration===0?!0:!(n-r.timestamp>r.duration))}const pd=""+new URL("attack-D4MA8VWK.mp3",import.meta.url).href,uw=""+new URL("gather-CU75596W.mp3",import.meta.url).href,cw=""+new URL("eat-DCjHq2QD.mp3",import.meta.url).href,gd=""+new URL("procreate-CfE4r5Cp.mp3",import.meta.url).href,dw=""+new URL("birth-Cbd67GHT.mp3",import.meta.url).href,fw=""+new URL("child-fed-DzEPuMid.mp3",import.meta.url).href,hw=""+new URL("human-death-B6HFLXES.mp3",import.meta.url).href,pw=""+new URL("game-over-C5dqkyER.mp3",import.meta.url).href,gw=""+new URL("button-click-DomLUeaU.mp3",import.meta.url).href,mw=""+new URL("soundtrack-1-BdlYUGye.mp3",import.meta.url).href;var Te=(e=>(e[e.Attack=0]="Attack",e[e.Gather=1]="Gather",e[e.Eat=2]="Eat",e[e.Procreate=3]="Procreate",e[e.Birth=4]="Birth",e[e.ChildFed=5]="ChildFed",e[e.HumanDeath=6]="HumanDeath",e[e.Seize=7]="Seize",e[e.CallToAttack=8]="CallToAttack",e[e.TribeSplit=9]="TribeSplit",e[e.CallToFollow=10]="CallToFollow",e[e.GameOver=11]="GameOver",e[e.ButtonClick=12]="ButtonClick",e[e.SoundTrack1=13]="SoundTrack1",e))(Te||{});const vw=new Map([[0,pd],[1,uw],[2,cw],[3,gd],[4,dw],[5,fw],[6,hw],[11,pw],[12,gw],[7,pd],[8,pd],[9,gd],[10,gd],[13,mw]]);let ps,xs;function yw(){if(!(typeof window>"u"))return xs}function Sf(){if(!(typeof window>"u"))return!ps&&typeof window.AudioContext=="function"&&(ps=new window.AudioContext,xs=ps.createGain(),xs.connect(ps.destination),Ps(.1,!1)),ps}function Ps(e,n){xs&&(xs.gain.value=n?0:e/10)}const lv=new Map;let gl=!1,Tm=!1;async function Sw(){if(Tm||gl)return;const e=Sf();if(!e){console.error("AudioContext not supported. Cannot load sounds.");return}e.state==="suspended"&&e.resume(),gl=!0,console.log("Starting sound loading...");const n=[];vw.forEach((r,o)=>{const a=fetch(r).then(l=>{if(!l.ok)throw new Error(`Failed to fetch sound: ${r}`);return l.arrayBuffer()}).then(l=>e.decodeAudioData(l)).then(l=>{lv.set(o,l)}).catch(l=>{console.error(`Error loading sound ${Te[o]} from ${r}:`,l)});n.push(a)});try{await Promise.all(n),Tm=!0,gl=!1,console.log("All sounds loaded successfully.")}catch(r){gl=!1,console.error("An error occurred while loading sounds:",r)}}const Ns=new Map;function Af(e,n){const r=Sf(),o=yw();if(!r||!o||o.gain.value===0&&(n==null?void 0:n.trackId)===void 0)return;r.state==="suspended"&&r.resume();const a=lv.get(e);if(!a){console.warn(`Sound buffer not found for type: ${Te[e]}`);return}if(n!=null&&n.trackId&&Ns.has(n.trackId))return;const l=r.createBufferSource();l.buffer=a,l.loop=(n==null?void 0:n.loop)??!1;const c=r.createGain(),d=r.createStereoPanner();let h=c;if(n!=null&&n.position&&(n!=null&&n.listenerPosition)&&(n!=null&&n.worldDimensions)){const g=$e(n.listenerPosition,n.position,n.worldDimensions.width,n.worldDimensions.height),m=X(n.listenerPosition,n.position,n.worldDimensions.width,n.worldDimensions.height);if(m>fm)return;const y=1-Math.pow(m/fm,oE);c.gain.value=Math.max(0,y);const S=Math.sin(g.x/m*(Math.PI/2));d.pan.value=isNaN(S)?0:S,c.connect(d),h=d}else{const g=e===Te.GameOver?.4:e===Te.SoundTrack1?1:.2;c.gain.value=g}l.connect(h),h.connect(o),l.start(0),n!=null&&n.trackId&&(Ns.set(n.trackId,{sourceNode:l,gainNode:c}),l.onended=()=>{Ns.delete(n.trackId)})}function Im(e,n=1){const r=Ns.get(e),o=Sf();if(r&&o){const{sourceNode:a,gainNode:l}=r,c=o.currentTime;l.gain.setValueAtTime(l.gain.value,c),l.gain.linearRampToValueAtTime(0,c+n),a.stop(c+n),a.onended=null,Ns.delete(e)}}function ke(e,n,r){const o=Et(e.gameState);o&&Af(n,{position:r,listenerPosition:o.position,worldDimensions:e.gameState.mapDimensions,masterVolume:e.gameState.masterVolume,isMuted:e.gameState.isMuted})}function Aw(e,n,r){const o=r.mapDimensions.width,a=r.mapDimensions.height,l=n.radius*2;for(let c=qg;c<o/2;c+=50)for(let d=0;d<10;d++){const h=mf(e,c,o,a);if(!(X(e,h,o,a)<qg)&&!So(h,r,l,n.id))return h}return null}function Tf(e,n){if(!e.isAdult||e.gender!=="male"||e.leaderId===e.id||!e.leaderId)return{canSplit:!1};if(!e.leaderId)return{canSplit:!1};const r=n.entities.entities.get(e.leaderId);if(!r||r.type!=="human")return{canSplit:!1};const o=si(It(n,r));if(o&&o.id===e.id)return{canSplit:!1};const a=Bs(e.leaderId,n);if(a.length<Qg)return{canSplit:!1};const c=iv(e,n).length+1,d=Math.min(a.length*UT,Qg);return{canSplit:c>=d,progress:c/d}}function If(e,n){var c;if(!Tf(e,n).canSplit)return;const r=e.leaderId?n.entities.entities.get(e.leaderId):void 0,o=Wd(),a=iv(e,n);e.leaderId=e.id,e.tribeBadge=o,e.diplomacy=new Map,r&&((c=r.diplomacy)==null||c.set(e.id,Ht.Hostile));for(const d of a)d.leaderId=e.id,d.tribeBadge=o;Yd(n,{type:Gs.NewTribeFormed,message:`A new tribe has formed! ${o}`,duration:uE,targetEntityIds:[e.id],highlightedEntityIds:[e.id,...a.map(d=>d.id)]}),ke({gameState:n},Te.TribeSplit,e.position)}function Ef(e,n){const r=[];if(n.food.length>0&&n.hunger>Gi&&r.push({type:Ee.Eat,action:"eating",key:"f"}),n.food.length<n.maxFood){const l=Ne(n,e,"berryBush",mt,h=>h.food.length>0),c=Ne(n,e,"corpse",mt,h=>h.food.length>0);let d=null;l&&c?d=X(n.position,l.position,e.mapDimensions.width,e.mapDimensions.height)<=X(n.position,c.position,e.mapDimensions.width,e.mapDimensions.height)?l:c:d=l||c,d&&r.push({type:Ee.Gather,action:"gathering",key:"e",targetEntity:d})}const o=Ne(n,e,"human",mt,l=>Ar(n,l,e));if(o&&r.push({type:Ee.Procreate,action:"procreating",key:"r",targetEntity:o}),n.food.length>0&&n.isAdult){const l=Ne(n,e,"human",mt,c=>{const d=c;return!d.isAdult&&(d.motherId===n.id||d.fatherId===n.id)&&d.hunger>=Gi});l&&r.push({type:Ee.FeedChild,action:"feeding",key:"h",targetEntity:l})}const a=Ne(n,e,"human",xn,l=>_o(n,l,e))??Ne(n,e,"predator",xn)??Ne(n,e,"prey",xn);return a&&r.push({type:Ee.Attack,action:"attacking",key:"q",targetEntity:a}),n.food.filter(l=>l.type===oi.Berry).length>=Us&&r.push({type:Ee.Plant,action:"planting",key:"b"}),n.leaderId===n.id&&!n.isCallingToAttack&&yf(n,e,O0).length>0&&r.push({type:Ee.CallToAttack,action:"idle",key:"v"}),Tf(n,e).canSplit&&r.push({type:Ee.TribeSplit,action:"idle",key:"k"}),n.leaderId===n.id&&!n.isCallingToFollow&&r.push({type:Ee.FollowMe,action:"idle",key:"c"}),r}const _o=(e,n,r)=>{var o,a,l,c;if(e.id===n.id)return!1;if(e.leaderId&&!n.leaderId)return!0;if(e.leaderId===n.leaderId)return!1;if(e.leaderId&&n.leaderId){const d=(a=(o=r.entities.entities.get(e.leaderId))==null?void 0:o.diplomacy)==null?void 0:a.get(n.leaderId),h=(c=(l=r.entities.entities.get(n.leaderId))==null?void 0:l.diplomacy)==null?void 0:c.get(e.leaderId);return d===Ht.Hostile||h===Ht.Hostile}return!1},Ar=(e,n,r)=>{if(e.id===n.id||e.gender===n.gender||!e.isAdult||!n.isAdult||e.hunger>=yr||n.hunger>=yr||(e.procreationCooldown||0)>0||(n.procreationCooldown||0)>0||_o(e,n,r))return!1;const o=e.gender==="female"?e:n;return!(o.isPregnant||o.age>_0)},Tw={id:kl,update:(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:a}=o,l=o.deltaTime*(Vt/Xt);if(r.age+=l,r.age>=r.lifespan)return{nextState:Ms,data:{...e,enteredAt:a.time,previousState:kl}};const c=mf(r.position,r.spreadRadius,a.mapDimensions.width,a.mapDimensions.height);return So(c,a,15)||Ks(a.entities,c,a.time),{nextState:lr,data:{...e,enteredAt:a.time,previousState:kl}}},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},Iw={id:Ms,update:e=>({nextState:Ms,data:e}),onEnter:(e,n)=>(Qs(e.updateContext.gameState.entities,e.entity.id),{...n,enteredAt:e.updateContext.gameState.time})},Ew=[xE,bE,Tw,Iw],At="humanIdle",ar="humanMoving",Ts="humanEating",ru="humanGathering",bs="humanProcreating",bi="humanAttacking",Fl="humanPlanting",ww={id:At,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="attacking"&&r.attackTargetId?{nextState:bi,data:{...e,enteredAt:o.gameState.time,previousState:At,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:(r.hunger>=I0?(r.debuffs=r.debuffs.filter(a=>a.type!=="slow"),r.debuffs.push({type:"slow",startTime:o.gameState.time,duration:.1})):r.debuffs=r.debuffs.filter(a=>a.type!=="slow"),r.activeAction==="moving"?{nextState:ar,data:{...e,enteredAt:o.gameState.time,previousState:At,target:r.target}}:r.activeAction==="gathering"?{nextState:ru,data:{...e,enteredAt:o.gameState.time,previousState:At,target:r.target}}:r.activeAction==="eating"?{nextState:Ts,data:{...e,enteredAt:o.gameState.time,previousState:At}}:r.activeAction==="planting"&&r.target?{nextState:Fl,data:{...e,enteredAt:o.gameState.time,previousState:At,plantingSpot:r.target}}:{nextState:At,data:e})},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function uv(e){let n=$A;return e.hunger>=I0&&(n*=WA),e.age>=jA&&(n*=VA),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}const md=7.5;class _w{constructor(){me(this,"id",ar)}update(n,r){var h;const{entity:o,updateContext:a}=r;if(o.activeAction==="attacking"&&o.attackTargetId)return{nextState:bi,data:{...n,enteredAt:a.gameState.time,previousState:ar,attackTargetId:o.attackTargetId,attackStartTime:a.gameState.time}};if(o.activeAction!=="moving")return{nextState:At,data:{...n,enteredAt:a.gameState.time,previousState:ar}};let l;if(typeof o.target=="object"?l=o.target:typeof o.target=="number"&&(l=(h=r.updateContext.gameState.entities.entities.get(o.target))==null?void 0:h.position),!l&&(o.direction.x!==0||o.direction.y!==0)&&(l={x:o.position.x+o.direction.x*md*2,y:o.position.y+o.direction.y*md*2}),!l)return{nextState:At,data:{...n,enteredAt:a.gameState.time,previousState:ar}};const c=$e(o.position,l,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=et(c),o.acceleration=uv(o),X(o.position,l,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)<md?{nextState:At,data:{...n,enteredAt:a.gameState.time,previousState:ar}}:{nextState:ar,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}}const Cw=new _w,Rw={id:Ts,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction!=="eating"?{nextState:At,data:{...e,enteredAt:o.gameState.time,previousState:Ts}}:(r.food.length>0&&(!r.eatingCooldownTime||o.gameState.time>=r.eatingCooldownTime)&&r.hunger>Gi&&(r.hunger=Math.max(0,r.hunger-Gi),r.food.pop(),r.eatingCooldownTime=o.gameState.time+1,ke(o,Te.Eat,r.position),(!r.lastEatingEffectTime||o.gameState.time-r.lastEatingEffectTime>2)&&(Ce(o.gameState,se.Eating,r.position,Be,r.id),r.lastEatingEffectTime=o.gameState.time)),r.hunger<=0||r.food.length<=0?{nextState:At,data:{...e,enteredAt:o.gameState.time,previousState:Ts}}:{nextState:Ts,data:e})},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};class Pw{constructor(){me(this,"id",ru)}update(n,r){return r.entity.activeAction!=="gathering"?{nextState:"humanIdle",data:{...n,enteredAt:r.updateContext.gameState.time,previousState:this.id}}:{nextState:this.id,data:n}}}const Nw=new Pw,Dw=(e,n)=>(n.procreationEndTime=e.updateContext.gameState.time+(n.duration||2),n),Ow=(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:a}=o;if(a.time<(e.procreationEndTime||0))return{nextState:bs,data:e};const l=a.entities.entities.get(e.partnerId);if(l&&l.type==="human"&&!l.isPregnant&&r.hunger<yr&&l.hunger<yr&&!r.procreationCooldown&&!l.procreationCooldown){const c=r.gender==="female"?r:l.gender==="female"?l:void 0,d=r.gender==="male"?r:l.gender==="male"?l:void 0;c&&d&&(c.isPregnant=!0,c.gestationTime=QA,c.pregnancyFatherId=d.id,r.procreationCooldown=Yg,l.procreationCooldown=Yg,ke(o,Te.Procreate,c.position))}return r.activeAction="idle",l&&(l.activeAction="idle"),{nextState:At,data:{...e,enteredAt:a.time,previousState:bs}}},kw={id:bs,onEnter:Dw,update:Ow},Mw={id:bi,onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time,attackStartTime:e.updateContext.gameState.time}),update:(e,n)=>{if(n.entity.activeAction!=="attacking"||!n.entity.attackTargetId)return n.entity.activeAction="idle",{nextState:At,data:{...e}};const r=n.updateContext.gameState.entities.entities.get(n.entity.attackTargetId);if(!r)return n.entity.activeAction="idle",{nextState:At,data:{...e}};const o=X(n.entity.position,r.position,n.updateContext.gameState.mapDimensions.width,n.updateContext.gameState.mapDimensions.height),a=$e(n.entity.position,r.position,n.updateContext.gameState.mapDimensions.width,n.updateContext.gameState.mapDimensions.height);return n.entity.direction=et(a),o>xn?n.entity.acceleration=uv(n.entity):n.entity.acceleration=0,{nextState:bi,data:e}}},Fw={id:Fl,update:(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:a}=o;if(a.time-e.enteredAt>=hT){if(r.food.filter(d=>d.type===oi.Berry).length>=Us){for(let h=0;h<Us;h++){const g=r.food.findIndex(m=>m.type===oi.Berry);g>-1&&r.food.splice(g,1)}const d=Ks(a.entities,e.plantingSpot,a.time);d.ownerId=r.id,d.claimedUntil=a.time+T0}return{nextState:At,data:{...e,enteredAt:a.time,previousState:Fl}}}return{nextState:Fl,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},Uw=[ww,Cw,Rw,Nw,kw,Mw,Fw],In="preyIdle",Fi="preyMoving",Is="preyGrazing",Es="preyProcreating",Hw={id:In,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:Fi,data:{...e,enteredAt:o.gameState.time,previousState:In,target:r.target}}:r.activeAction==="grazing"?{nextState:Is,data:{...e,enteredAt:o.gameState.time,previousState:In}}:r.activeAction==="procreating"?{nextState:Es,data:{...e,enteredAt:o.gameState.time,previousState:In}}:{nextState:In,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function Lw(e){let n=CE;return e.isAdult||(n*=.7),e.hunger>=OE&&(n*=kE),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}function Bw(e,n){const r=e>>16&255,o=e>>8&255,a=e&255,l=n>>16&255,c=n>>8&255,d=n&255;let h=Math.floor((r+l)/2),g=Math.floor((o+c)/2),m=Math.floor((a+d)/2);return Math.random()<.05&&(h=Math.max(0,Math.min(255,h+(Math.random()-.5)*60))),Math.random()<.05&&(g=Math.max(0,Math.min(255,g+(Math.random()-.5)*60))),Math.random()<.05&&(m=Math.max(0,Math.min(255,m+(Math.random()-.5)*60))),h<<16|g<<8|m}function zs(){const e=Math.floor(Math.random()*100)+100,n=Math.floor(Math.random()*80)+60,r=Math.floor(Math.random()*60)+20;return e<<16|n<<8|r}const vd=10;class Gw{constructor(){me(this,"id",Fi)}update(n,r){var h;const{entity:o,updateContext:a}=r;if(o.activeAction!=="moving")return{nextState:In,data:{...n,enteredAt:a.gameState.time,previousState:Fi}};let l;if(typeof o.target=="object"?l=o.target:typeof o.target=="number"&&(l=(h=r.updateContext.gameState.entities.entities.get(o.target))==null?void 0:h.position),!l&&(o.direction.x!==0||o.direction.y!==0)&&(l={x:o.position.x+o.direction.x*vd*2,y:o.position.y+o.direction.y*vd*2}),!l)return{nextState:In,data:{...n,enteredAt:a.gameState.time,previousState:Fi}};const c=$e(o.position,l,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=et(c),o.acceleration=Lw(o),X(o.position,l,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)<vd?{nextState:In,data:{...n,enteredAt:a.gameState.time,previousState:Fi}}:{nextState:Fi,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}onEnter(n,r){return{...r,enteredAt:n.updateContext.gameState.time}}}const xw=new Gw,bw={id:Is,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:Fi,data:{...e,enteredAt:o.gameState.time,previousState:Is,target:r.target}}:r.activeAction!=="grazing"?{nextState:In,data:{...e,enteredAt:o.gameState.time,previousState:Is}}:{nextState:Is,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},zw={id:Es,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:Fi,data:{...e,enteredAt:o.gameState.time,previousState:Es,target:r.target}}:r.activeAction!=="procreating"?{nextState:In,data:{...e,enteredAt:o.gameState.time,previousState:Es}}:{nextState:Es,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},$w=[Hw,xw,bw,zw],Ut="predatorIdle",ki="predatorMoving",ei="predatorAttacking",Zr="predatorProcreating",mr="predatorEating",Ww={id:Ut,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="eating"?{nextState:mr,data:{...e,enteredAt:o.gameState.time,previousState:Ut,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}}:r.activeAction==="attacking"&&r.attackTargetId?{nextState:ei,data:{...e,enteredAt:o.gameState.time,previousState:Ut,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:r.activeAction==="moving"?{nextState:ki,data:{...e,enteredAt:o.gameState.time,previousState:Ut,target:r.target}}:r.activeAction==="procreating"?{nextState:Zr,data:{...e,enteredAt:o.gameState.time,previousState:Ut}}:{nextState:Ut,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function cv(e){let n=FE;return e.hunger>=LE&&(n*=BE),e.isAdult||(n*=.7),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}function Yw(e,n){const r=e>>16&255,o=e>>8&255,a=e&255,l=n>>16&255,c=n>>8&255,d=n&255;let h=Math.floor((r+l)/2),g=Math.floor((o+c)/2),m=Math.floor((a+d)/2);return Math.random()<.05&&(h=Math.max(0,Math.min(255,h+(Math.random()-.5)*60))),Math.random()<.05&&(g=Math.max(0,Math.min(255,g+(Math.random()-.5)*60))),Math.random()<.05&&(m=Math.max(0,Math.min(255,m+(Math.random()-.5)*60))),h<<16|g<<8|m}function $s(){const e=Math.floor(Math.random()*60)+60,n=Math.floor(Math.random()*50)+40,r=Math.floor(Math.random()*40)+20;return e<<16|n<<8|r}const yd=12;class jw{constructor(){me(this,"id",ki)}update(n,r){var h;const{entity:o,updateContext:a}=r;if(o.activeAction==="eating")return{nextState:mr,data:{...n,enteredAt:a.gameState.time,previousState:ki,preyId:o.attackTargetId,eatingStartTime:a.gameState.time}};if(o.activeAction==="attacking"&&o.attackTargetId)return{nextState:ei,data:{...n,enteredAt:a.gameState.time,previousState:ki,attackTargetId:o.attackTargetId,attackStartTime:a.gameState.time}};if(o.activeAction!=="moving")return{nextState:Ut,data:{...n,enteredAt:a.gameState.time,previousState:ki}};let l;if(typeof o.target=="object"?l=o.target:typeof o.target=="number"&&(l=(h=r.updateContext.gameState.entities.entities.get(o.target))==null?void 0:h.position),!l&&(o.direction.x!==0||o.direction.y!==0)&&(l={x:o.position.x+o.direction.x*yd*2,y:o.position.y+o.direction.y*yd*2}),!l)return{nextState:Ut,data:{...n,enteredAt:a.gameState.time,previousState:ki}};const c=$e(o.position,l,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=et(c),o.acceleration=cv(o),X(o.position,l,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)<yd?{nextState:Ut,data:{...n,enteredAt:a.gameState.time,previousState:ki}}:{nextState:ki,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}onEnter(n,r){return{...r,enteredAt:n.updateContext.gameState.time}}}const Vw=new jw,Xw={id:ei,update:(e,n)=>{const{entity:r,updateContext:o}=n;if(r.activeAction==="eating")return{nextState:mr,data:{...e,enteredAt:o.gameState.time,previousState:ei,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}};if(r.activeAction!=="attacking"||!r.attackTargetId)return r.activeAction="idle",{nextState:Ut,data:{...e,enteredAt:o.gameState.time,previousState:ei}};const a=o.gameState.entities.entities.get(r.attackTargetId);if(!a)return r.activeAction="idle",{nextState:Ut,data:{...e,enteredAt:o.gameState.time,previousState:ei}};if(a.type==="prey"&&a.hitpoints<=0||a.type==="predator"&&a.hitpoints<=0||a.type==="human"&&a.hitpoints<=0)return r.activeAction="idle",{nextState:Ut,data:{...e,enteredAt:o.gameState.time,previousState:ei}};const c=X(r.position,a.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height),d=$e(r.position,a.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height);return r.direction=et(d),c>Tn?r.acceleration=cv(r):r.acceleration=0,{nextState:ei,data:e}},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},Kw={id:Zr,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="eating"?{nextState:mr,data:{...e,enteredAt:o.gameState.time,previousState:Zr,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}}:r.activeAction==="attacking"&&r.attackTargetId?{nextState:ei,data:{...e,enteredAt:o.gameState.time,previousState:Zr,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:r.activeAction!=="procreating"?{nextState:Ut,data:{...e,enteredAt:o.gameState.time,previousState:Zr}}:{nextState:Zr,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},Qw={id:mr,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction!=="eating"?{nextState:Ut,data:{...e,enteredAt:o.gameState.time,previousState:mr}}:{nextState:mr,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},qw=[Ww,Vw,Xw,Kw,Qw],Em=[...Ew,...Uw,...$w,...qw];function Zw(e,n,r){const o=FA(e,Em);if(!o)return HA(e),[e,n];const{nextState:a,data:l}=o.update(n,r);return UA(e,a)?[a,MA(o,a,l,r,Em)]:[a,l]}function Jw(e,n,r){const{gameState:o}=n,a=r*(Vt/Xt);if(e.isAdult=e.age>=nf,e.isCallingToAttack&&e.callToAttackEndTime&&o.time>e.callToAttackEndTime&&(e.isCallingToAttack=!1,e.callToAttackEndTime=void 0),e.isCallingToFollow&&e.callToFollowEndTime&&o.time>e.callToFollowEndTime&&(e.isCallingToFollow=!1,e.callToFollowEndTime=void 0),e.movementSlowdown&&o.time>e.movementSlowdown.endTime&&(e.movementSlowdown=void 0),e.hitpoints<e.maxHitpoints){const c=1-e.hunger/100*aT,d=sT*c*a;e.hitpoints=Math.min(e.maxHitpoints,e.hitpoints+d)}if(e.hunger+=r*(ds/(Vt/Xt)),e.hunger>rE&&(!e.lastHungerEffectTime||o.time-e.lastHungerEffectTime>cr*2)&&(Ce(o,se.Hunger,e.position,cr,e.id),e.lastHungerEffectTime=o.time),e.age+=r/Zl,e.isPlayer){const c=It(o,e).filter(d=>d.hunger>=cE);if(c.length>0){const d=c.map(h=>h.id);Yd(o,{identifier:"children_starving",type:Gs.ChildrenStarving,message:"Your children are starving!",duration:lE,targetEntityIds:d,highlightedEntityIds:d})}}if(e.gender==="female"&&e.isPregnant&&e.gestationTime&&(e.gestationTime-=a,e.hunger+=r*((ds*qA-ds)/(Vt/Xt)),(!e.lastPregnantEffectTime||o.time-e.lastPregnantEffectTime>cr*3)&&(Ce(o,se.Pregnant,e.position,cr,e.id),e.lastPregnantEffectTime=o.time),e.gestationTime<=0&&(aC(e,e.pregnancyFatherId,n),e.isPregnant=!1,e.gestationTime=0,e.pregnancyFatherId=void 0)),e.procreationCooldown&&(e.procreationCooldown-=a,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.attackCooldown&&(e.attackCooldown-=a,e.attackCooldown<0&&(e.attackCooldown=0)),e.feedParentCooldownTime&&(e.feedParentCooldownTime-=a,e.feedParentCooldownTime<0&&(e.feedParentCooldownTime=0)),e.feedChildCooldownTime&&(e.feedChildCooldownTime-=a,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0)),e.leaderMetaStrategyCooldown&&(e.leaderMetaStrategyCooldown-=a,e.leaderMetaStrategyCooldown<0&&(e.leaderMetaStrategyCooldown=0)),e.isAdult?e.radius===Eo&&(e.radius=vt):e.hunger+=r*((ds*ZA-ds)/(Vt/Xt)),e.isAdult&&e.food.length>0&&(!e.feedParentCooldownTime||e.feedParentCooldownTime<=0)){const c=[];if(e.motherId){const d=o.entities.entities.get(e.motherId);d&&c.push(d)}if(e.fatherId){const d=o.entities.entities.get(e.fatherId);d&&c.push(d)}for(const d of c)if(d.age>=C0&&d.hunger>=tT&&X(e.position,d.position,o.mapDimensions.width,o.mapDimensions.height)<=nT){e.food.pop(),d.hunger=Math.max(0,d.hunger-Gi),e.feedParentCooldownTime=iT;break}}let l;if(e.hitpoints<=0?l="killed":e.hunger>=tn?e.food.length>0&&e.isAdult?(e.food.pop(),e.hunger=Math.max(0,e.hunger-Gi)):l="hunger":e.age>=e.maxAge&&(l="oldAge"),l){if(e.leaderId===e.id){const c=si(It(o,e));c?(c.leaderId=c.id,c.tribeBadge=e.tribeBadge,c.diplomacy=new Map(e.diplomacy),o.entities.entities.forEach(d=>{if(d.type==="human"&&d.leaderId===e.id){const h=d;h.leaderId=c.id}})):o.entities.entities.forEach(d=>{if(d.type==="human"&&d.leaderId===e.id){const h=d;h.leaderId=void 0,h.tribeBadge=void 0}})}if(e.isPlayer){const c=si(It(o,e));c?(c.isPlayer=!0,o.generationCount++):(o.gameOver=!0,o.causeOfGameOver=l,Yd(o,{identifier:"no_heir",type:Gs.NoHeir,message:"Your lineage has ended. You have no heir.",duration:0}))}rC(o.entities,e.position,e.gender,e.age,e.radius,e.id,o.time,e.food,e.hunger),Qs(o.entities,e.id);return}e.animationProgress===void 0&&(e.animationProgress=0),e.animationSpeed===void 0&&(e.animationSpeed=1),e.animationProgress+=r*e.animationSpeed,e.animationProgress>=1&&(e.animationProgress=0)}function e_(e,n){const r=n.gameState.time-e.timeOfDeath;e.decayProgress=Math.min(1,r/rT);const o=Math.floor(R0*(1-e.decayProgress));e.food.length>o&&e.food.splice(o),e.decayProgress>=1&&e.food.length<=0&&Qs(n.gameState.entities,e.id)}function t_(e,n,r){const o=r*(Vt/Xt);e.age+=r/Zl,e.isAdult=e.age>=Cs;let a=n.gameState.ecosystem.preyHungerIncreasePerHour*o;if(e.isPregnant&&(a*=1.2),e.hunger+=a,e.isPregnant&&e.gestationTime!==void 0&&(e.gestationTime-=o,e.gestationTime<=0)){const c={x:e.position.x+(Math.random()-.5)*40,y:e.position.y+(Math.random()-.5)*40};c.x=Math.max(20,Math.min(n.gameState.mapDimensions.width-20,c.x)),c.y=Math.max(20,Math.min(n.gameState.mapDimensions.height-20,c.y));const d=Math.random()<.5?"male":"female",h=e,g=e.fatherId?n.gameState.entities.entities.get(e.fatherId):void 0;let m;if(g)m=Bw(h.geneCode,g.geneCode);else{m=h.geneCode;const y=Math.floor((Math.random()-.5)*4096);m=Math.max(0,Math.min(16777215,m+y))}Ao(n.gameState.entities,c,d,0,V0*.5,m,e.id,e.fatherId),Ce(n.gameState,se.Procreation,e.position,cr,e.id),ke(n,Te.Birth,e.position),e.isPregnant=!1,e.gestationTime=0,e.procreationCooldown=n.gameState.ecosystem.preyProcreationCooldown,e.fatherId=void 0}e.procreationCooldown&&e.procreationCooldown>0&&(e.procreationCooldown-=o,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.eatingCooldownTime&&e.eatingCooldownTime>n.gameState.time||(e.eatingCooldownTime=void 0),e.fleeCooldown&&e.fleeCooldown>0&&(e.fleeCooldown-=o,e.fleeCooldown<0&&(e.fleeCooldown=0)),e.feedChildCooldownTime&&e.feedChildCooldownTime>0&&(e.feedChildCooldownTime-=o,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0));let l=!1;e.hunger>=_E&&(l=!0),e.hitpoints<=0&&(l=!0),e.age>=j0&&(l=!0),l&&(oC(n.gameState.entities,e.position,e.gender,e.age,e.radius,e.id,n.gameState.time,e.geneCode),Qs(n.gameState.entities,e.id))}function n_(e,n,r){const o=r*(Vt/Xt);e.age+=r/Zl,e.isAdult=e.age>=Rs;let a=n.gameState.ecosystem.predatorHungerIncreasePerHour*o;if(e.isPregnant&&(a*=1.3),e.hunger+=a,e.isPregnant&&e.gestationTime!==void 0&&(e.gestationTime-=o,e.gestationTime<=0)){const c={x:e.position.x+(Math.random()-.5)*50,y:e.position.y+(Math.random()-.5)*50};c.x=Math.max(25,Math.min(n.gameState.mapDimensions.width-25,c.x)),c.y=Math.max(25,Math.min(n.gameState.mapDimensions.height-25,c.y));const d=Math.random()<.5?"male":"female",h=e,g=e.pregnancyFatherId?n.gameState.entities.entities.get(e.pregnancyFatherId):void 0;let m;if(g)m=Yw(h.geneCode,g.geneCode);else{m=h.geneCode;const y=Math.floor((Math.random()-.5)*4096);m=Math.max(0,Math.min(16777215,m+y))}To(n.gameState.entities,c,d,0,K0*.6,m,e.id,e.pregnancyFatherId),Ce(n.gameState,se.Procreation,e.position,cr,e.id),ke(n,Te.Birth,e.position),e.isPregnant=!1,e.gestationTime=0,e.procreationCooldown=n.gameState.ecosystem.predatorProcreationCooldown,e.pregnancyFatherId=void 0}e.procreationCooldown&&e.procreationCooldown>0&&(e.procreationCooldown-=o,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.attackCooldown&&e.attackCooldown>0&&(e.attackCooldown-=o,e.attackCooldown<0&&(e.attackCooldown=0)),e.huntCooldown&&e.huntCooldown>0&&(e.huntCooldown-=o,e.huntCooldown<0&&(e.huntCooldown=0)),e.feedChildCooldownTime&&e.feedChildCooldownTime>0&&(e.feedChildCooldownTime-=o,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0));let l=!1;e.hunger>=ME&&(l=!0),e.hitpoints<=0&&(l=!0),e.age>=X0&&(l=!0),l&&(sC(n.gameState.entities,e.position,e.gender,e.age,e.radius,e.id,n.gameState.time,e.geneCode),Qs(n.gameState.entities,e.id))}var Vs=(e=>(e[e.BehaviorTreeBased=0]="BehaviorTreeBased",e))(Vs||{});function wf(e,n){if(e.aiBehaviorTree&&e.aiBlackboard){const r=e.aiBlackboard.get("lastAiUpdateTime")??0;n.gameState.time-r>=Hs&&(e.aiBehaviorTree.execute(e,n,e.aiBlackboard),e.aiBlackboard.set("lastAiUpdateTime",n.gameState.time))}else console.warn(`Behavior Tree AI ticked for human ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle"}function i_(e,n){switch(e.aiBlackboard&&e.aiBlackboard.cleanupOldEntries(n.gameState.time),e.aiType){case Vs.BehaviorTreeBased:default:wf(e,n);break}}function r_(e,n){e.aiBehaviorTree&&e.aiBlackboard?wf(e,n):(console.warn(`Behavior Tree AI ticked for prey ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle")}function o_(e,n){e.aiBehaviorTree&&e.aiBlackboard?wf(e,n):(console.warn(`Behavior Tree AI ticked for predator ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle")}function s_(e,n){e.forces.push(Tt(e.velocity,-.1));const r=Tt(et(e.direction),e.acceleration);e.forces.push(r),e.debuffs.forEach(o=>{n.gameState.time-o.startTime<o.duration&&o.type==="slow"&&(e.velocity=Tt(e.velocity,.5))}),e.debuffs=e.debuffs.filter(o=>n.gameState.time-o.startTime<o.duration),e.velocity=bn(e.velocity,e.forces.reduce(bn,{x:0,y:0})),yo(e.velocity)<.001&&(e.velocity={x:0,y:0}),e.position=bn(e.position,Tt(e.velocity,n.deltaTime)),e.position.x=(e.position.x%n.gameState.mapDimensions.width+n.gameState.mapDimensions.width)%n.gameState.mapDimensions.width,e.position.y=(e.position.y%n.gameState.mapDimensions.height+n.gameState.mapDimensions.height)%n.gameState.mapDimensions.height,e.forces=[],e.type==="human"?Jw(e,n,n.deltaTime):e.type==="corpse"?e_(e,n):e.type==="prey"?t_(e,n,n.deltaTime):e.type==="predator"&&n_(e,n,n.deltaTime),e.type==="human"&&i_(e,n),e.type==="prey"?r_(e,n):e.type==="predator"&&o_(e,n),e.stateMachine&&(e.stateMachine=Zw(...e.stateMachine,{entity:e,updateContext:n}))}var I=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.FAILURE=1]="FAILURE",e[e.RUNNING=2]="RUNNING",e[e.NOT_EVALUATED=3]="NOT_EVALUATED",e))(I||{});const wm="Human Behavior",a_=1;class l_{constructor(){me(this,"nodeData",new Map);me(this,"pathStack",[]);me(this,"startTimeStack",[])}nodeStart(n){this.pathStack.push(n),this.startTimeStack.push(performance.now())}nodeEnd(){if(this.startTimeStack.length===0||this.pathStack.length===0){console.error("BTProfiler: nodeEnd() called without a matching nodeStart().");return}const n=performance.now(),r=this.startTimeStack.pop(),o=n-r,a=this.pathStack.join(" > "),l=this.nodeData.get(a)??{path:a,totalTime:0,callCount:0,minTime:1/0,maxTime:-1/0};l.totalTime+=o,l.callCount++,l.minTime=Math.min(l.minTime,o),l.maxTime=Math.max(l.maxTime,o),this.nodeData.set(a,l),this.pathStack.pop()}report(n={}){const{showAll:r=!1}=n,o=Array.from(this.nodeData.values());if(o.length===0){console.log("--- Behavior Tree Profiler: No data collected. ---");return}let a=o,l="--- Behavior Tree Full Report ---";if(!r){const d=this.nodeData.get(wm);if(d){const h=d.totalTime*a_/100;a=o.filter(g=>g.totalTime>h&&g.path!==wm),l="--- Behavior Tree Problem Report ---"}else console.log('BTProfiler: Root node "Human Behavior" not found. Showing full report.'),l="--- Behavior Tree Full Report (Root Not Found) ---"}const c=a.sort((d,h)=>h.totalTime-d.totalTime);console.log(l),c.length>0?console.table(c.map(d=>({Path:d.path,"Total Time (ms)":d.totalTime.toFixed(3),Calls:d.callCount,"Avg Time (ms)":(d.totalTime/d.callCount).toFixed(3),"Min Time (ms)":d.minTime.toFixed(3),"Max Time (ms)":d.maxTime.toFixed(3)}))):console.log("No significant performance problems detected."),console.log("------------------------------------")}reset(){this.nodeData.clear(),this.pathStack=[],this.startTimeStack=[]}}const ut=new l_;function wn(e){return Array.isArray(e)?e:[e,""]}class ge{constructor(n,r,o=0){me(this,"name");me(this,"lastStatus");me(this,"depth");this.children=n,this.name=r,this.depth=o,this.children.forEach(a=>{a.depth=(this.depth??0)+1})}execute(n,r,o){this.name&&ut.nodeStart(this.name);try{for(const a of this.children){const[l,c]=wn(a.execute(n,r,o));if(l!==I.SUCCESS)return this.lastStatus=l,this.name&&o.recordNodeExecution(this.name,l,r.gameState.time,this.depth,c),l}return this.lastStatus=I.SUCCESS,this.name&&o.recordNodeExecution(this.name,I.SUCCESS,r.gameState.time,this.depth,""),I.SUCCESS}finally{this.name&&ut.nodeEnd()}}}class _n{constructor(n,r,o=0){me(this,"name");me(this,"lastStatus");me(this,"depth");me(this,"runningChildIndex");this.children=n,this.name=r,this.depth=o,this.children.forEach(a=>{a.depth=(this.depth??0)+1})}execute(n,r,o){this.name&&ut.nodeStart(this.name);try{const a=this.runningChildIndex??0;for(let l=a;l<this.children.length;l++){const c=this.children[l],[d,h]=wn(c.execute(n,r,o));if(d!==I.FAILURE){if(d===I.SUCCESS)return delete this.runningChildIndex,this.lastStatus=I.SUCCESS,this.name&&o.recordNodeExecution(this.name,I.SUCCESS,r.gameState.time,this.depth,h),I.SUCCESS;if(d===I.RUNNING)return this.runningChildIndex=l,this.lastStatus=I.RUNNING,this.name&&o.recordNodeExecution(this.name,I.RUNNING,r.gameState.time,this.depth,h),I.RUNNING}}return delete this.runningChildIndex,this.lastStatus=I.FAILURE,this.name&&o.recordNodeExecution(this.name,I.FAILURE,r.gameState.time,this.depth,""),I.FAILURE}finally{this.name&&ut.nodeEnd()}}}class ae{constructor(n,r,o=0){me(this,"name");me(this,"lastStatus");me(this,"depth");this.action=n,this.name=r,this.depth=o}execute(n,r,o){this.name&&ut.nodeStart(this.name);try{const[a,l]=wn(this.action(n,r,o));return this.lastStatus=a,this.name&&o.recordNodeExecution(this.name,a,r.gameState.time,this.depth,l),a}finally{this.name&&ut.nodeEnd()}}}class ie{constructor(n,r,o=0){me(this,"name");me(this,"lastStatus");me(this,"depth");this.condition=n,this.name=r,this.depth=o}execute(n,r,o){this.name&&ut.nodeStart(this.name);try{const[a,l]=wn(this.condition(n,r,o)),c=a?I.SUCCESS:I.FAILURE;return this.lastStatus=c,this.name&&o.recordNodeExecution(this.name,c,r.gameState.time,this.depth,l),c}finally{this.name&&ut.nodeEnd()}}}class zl{constructor(n,r,o,a=0){me(this,"name");me(this,"lastStatus");me(this,"depth");me(this,"startTimeKey");this.child=n,this.timeoutDurationHours=r,this.name=o,this.depth=a,this.child.depth=(this.depth??0)+1,this.startTimeKey=`timeout_${this.name}_startTime`}execute(n,r,o){ut.nodeStart(this.name);try{const a=r.gameState.time;let l=o.get(this.startTimeKey);const[c,d]=wn(this.child.execute(n,r,o));if(c===I.RUNNING){l===void 0&&(o.set(this.startTimeKey,a),l=a);const h=a-l;if(h>this.timeoutDurationHours){o.delete(this.startTimeKey),this.lastStatus=I.FAILURE;const m=`Timed out after ${h.toFixed(2)}h.`;return o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,m),this.lastStatus}this.lastStatus=I.RUNNING;const g=`Running for ${h.toFixed(2)}h. ${d}`;return o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,g),this.lastStatus}return l!==void 0&&o.delete(this.startTimeKey),this.lastStatus=c,o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,d),this.lastStatus}finally{ut.nodeEnd()}}}class Ws{constructor(n,r,o,a=0,l){me(this,"name");me(this,"lastStatus");me(this,"depth");me(this,"statusKey");me(this,"timestampKey");this.child=n,this.cacheDurationHours=r,this.validityCheck=l,this.name=o,this.depth=a,this.child.depth=(this.depth??0)+1,this.statusKey=`caching_${this.name}_status`,this.timestampKey=`caching_${this.name}_timestamp`}execute(n,r,o){ut.nodeStart(this.name);try{const a=r.gameState.time,l=o.get(this.statusKey),c=o.get(this.timestampKey);if(l!==void 0&&c!==void 0){const m=a-c>this.cacheDurationHours,y=this.validityCheck?this.validityCheck(n,r,o):!0;if(!m&&y){const S=(c+this.cacheDurationHours-a).toFixed(2),w=`Cache hit. Status: ${I[l]}. ${S}h left.`;return this.lastStatus=l,o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,w),this.lastStatus}}const[d,h]=wn(this.child.execute(n,r,o));(d===I.SUCCESS||d===I.FAILURE)&&(o.set(this.statusKey,d),o.set(this.timestampKey,a)),this.lastStatus=d;const g=`Cache miss. Child returned ${I[d]}. ${h}`;return o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,g),this.lastStatus}finally{ut.nodeEnd()}}}class Tr{constructor(n,r,o,a=0){me(this,"name");me(this,"lastStatus");me(this,"depth");me(this,"cooldownKey");this.cooldownDurationHours=n,this.child=r,this.name=o,this.depth=a,this.child.depth=(this.depth??0)+1,this.cooldownKey=`cooldown_${this.name}`}execute(n,r,o){ut.nodeStart(this.name);try{const a=r.gameState.time,l=o.get(this.cooldownKey);if(this.child.lastStatus===I.RUNNING){const[h,g]=wn(this.child.execute(n,r,o));if(this.lastStatus=h,this.name){const m=`Continuing running child. ${g}`;o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,m)}return this.lastStatus}if(l!==void 0&&a<l){const g=`Cooldown active, ${(l-a).toFixed(2)}h left`;return this.lastStatus=I.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,g),this.lastStatus}const[c,d]=wn(this.child.execute(n,r,o));return(c===I.SUCCESS||c===I.RUNNING)&&o.set(this.cooldownKey,a+this.cooldownDurationHours),this.lastStatus=c,this.name&&o.recordNodeExecution(this.name,this.lastStatus,a,this.depth,d),this.lastStatus}finally{ut.nodeEnd()}}}class or{constructor(n,r,o,a=0){me(this,"name");me(this,"lastStatus");me(this,"depth");this.child=n,this.behaviorKey=r,this.name=o,this.depth=a;const l=(c,d)=>{c.depth=d,c.children?c.children.forEach(h=>l(h,d+1)):c.child&&l(c.child,d+1)};l(this.child,(this.depth??0)+1)}execute(n,r,o){this.name&&ut.nodeStart(this.name);try{if(n.isPlayer&&!r.gameState.autopilotControls.behaviors[this.behaviorKey]){const d=`Player autopilot for '${this.behaviorKey}' is disabled.`;return this.lastStatus=I.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,d),this.lastStatus}const[l,c]=wn(this.child.execute(n,r,o));return this.lastStatus=l,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,c),this.lastStatus}finally{this.name&&ut.nodeEnd()}}}class u_{constructor(n,r,o=0){me(this,"name");me(this,"lastStatus");me(this,"depth");this.child=n,this.name=r,this.depth=o;const a=(l,c)=>{l.depth=c,l.children?l.children.forEach(d=>a(d,c+1)):l.child&&a(l.child,c+1)};a(this.child,(this.depth??0)+1)}execute(n,r,o){this.name&&ut.nodeStart(this.name);try{if(n.isPlayer&&r.gameState.autopilotControls.isManuallyMoving)return this.lastStatus=I.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,"Manual movement active, AI blocked."),this.lastStatus;const[a,l]=wn(this.child.execute(n,r,o));return this.lastStatus=a,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,l),this.lastStatus}finally{this.name&&ut.nodeEnd()}}}class gs{constructor(n,r,o=0){me(this,"name");me(this,"lastStatus");me(this,"depth");this.child=n,this.name=r,this.depth=o;const a=(l,c)=>{l.depth=c,l.children?l.children.forEach(d=>a(d,c+1)):l.child&&a(l.child,c+1)};a(this.child,(this.depth??0)+1)}execute(n,r,o){this.name&&ut.nodeStart(this.name);try{if(n.isPlayer)return this.lastStatus=I.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,"Player controlled, AI blocked."),this.lastStatus;const[a,l]=wn(this.child.execute(n,r,o));return this.lastStatus=a,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,l),this.lastStatus}finally{this.name&&ut.nodeEnd()}}}function c_(e){return new ge([new ie((n,r)=>{const o=n.hunger>=Xg,a=n.food.length>0,l=!n.eatingCooldownTime||r.gameState.time>=n.eatingCooldownTime;return[!!(n.isAdult&&o&&a&&l),`${Math.floor(n.hunger-Xg)}, ${n.food.length}, ${n.eatingCooldownTime?Math.floor(n.eatingCooldownTime-r.gameState.time):""}`]},"Can Eat",e+1),new ae(n=>(n.direction={x:0,y:0},n.target=void 0,n.activeAction="eating",I.RUNNING),"Eat",e+1)],"Eating",e)}function d_(e){return new ge([new ie((n,r,o)=>{if(n.isAdult&&n.hitpoints>n.maxHitpoints*M0||n.isAdult&&n.hunger>wT)return!1;const a=KE(n.id,r.gameState);return a?(o.set("fleeThreat",a),!0):!1},"Should Flee",e+1),new ae((n,r,o)=>{const a=o.get("fleeThreat");if(!a)return I.FAILURE;n.activeAction="moving";const l=$e(a.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),c=et(l),d=bn(n.position,Tt(c,F0));return n.target={x:(d.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(d.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},n.direction=c,I.RUNNING},"Execute Flee",e+1)],"Flee",e)}const ms="foodSource";function f_(e){const n=new ae((o,a,l)=>{const c=new Map,d=Ne(o,a.gameState,"berryBush",Jg,m=>{if(m.food.length===0)return!1;if(!m.ownerId||!m.claimedUntil||a.gameState.time>=m.claimedUntil)return!0;const y=a.gameState.entities.entities.get(m.ownerId);if(!y||y.leaderId===o.leaderId)return!0;const S=c.get(y.id)??X(o.position,y.position,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height);return c.set(y.id,S),S>JT}),h=Ne(o,a.gameState,"corpse",Jg,m=>m.food.length>0);let g=null;if(d&&h){const m=X(o.position,d.position,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height),y=X(o.position,h.position,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height);g=m<=y?d:h}else g=d||h;return g?(l.set(ms,g),[I.SUCCESS,`Found food: ${g.type} at ${g.position.x.toFixed(0)},${g.position.y.toFixed(0)}`]):[I.FAILURE,"No food source found"]},"Find Closest Food Source",e+4),r=new ae((o,a,l)=>{const c=l.get(ms);return!c||c.food.length===0?(l.delete(ms),[I.FAILURE,"Food source is invalid or depleted"]):X(o.position,c.position,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)<xi?(o.activeAction="gathering",o.direction={x:0,y:0},o.target=c.id,l.delete(ms),[I.SUCCESS,`Gathering from ${c.type}`]):(o.activeAction="moving",o.target=c.id,o.direction=jt(o.position,c.position,a.gameState.mapDimensions),[I.RUNNING,`Moving to ${c.type}`])},"Move To Food and Gather",e+3);return new ge([new ie((o,a)=>{const l=o.food.length<o.maxFood,c=o.hunger>gT,d=It(a.gameState,o).filter(h=>h.hunger>rf);return[(o.isAdult&&l&&(c||d.length>0))??!1,`${c?"H":""}, ${d.length>0?" HC("+d.length+")":""}`]},"Should Gather Food",e+1),new _n([new ge([new ie((o,a,l)=>l.has(ms),"Has Food Source?",e+2),r],"Continue Gathering Action",e+2),new ge([new Ws(n,MT,"Cache Food Source Search",e+3),r],"Find New Food Source and Gather",e+2)],"Perform or Start Gathering",e+1)],"Gather Food",e)}function h_(e){return new ae((n,r,o)=>(n.activeAction="idle",n.direction={x:0,y:0},n.target=void 0,o.set("wanderTarget",void 0),I.SUCCESS),"Idle",e)}const ml="procreationWanderStartTime",_m=(e,n,r)=>n.find(o=>Ar(e,o,r));function p_(e){const n=new ie((l,c,d)=>{const h=ym(l,c.gameState,xi),g=_m(l,h,c.gameState);return g?(d.set("procreationPartner",g),!0):!1},"Find Immediate Partner"),r=new ae((l,c,d)=>{var g;const h=d.get("procreationPartner");return h?(l.activeAction="procreating",l.target=void 0,d.delete("procreationPartner"),d.delete(ml),(g=l.partnerIds)!=null&&g.includes(h.id)||(l.partnerIds=l.partnerIds?[...l.partnerIds,h.id]:[h.id]),I.SUCCESS):I.FAILURE},"Start Procreating"),o=new ie((l,c,d)=>{const h=ym(l,c.gameState,ET),g=_m(l,h,c.gameState);return g?(d.set("procreationPartner",g),!0):!1},"Locate Distant Partner"),a=new ae((l,c,d)=>{const h=d.get("procreationPartner");if(!h)return I.FAILURE;if(X(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<xi)return I.SUCCESS;l.activeAction="moving",l.target=h.id;const m=$e(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height);return l.direction=et(m),I.RUNNING},"Move Towards Partner");return new ge([new ie(l=>!(!l.isAdult||l.gender==="female"&&l.isPregnant||l.age<XA||l.gender==="female"&&l.age>_0),"Is Fertile (age, not pregnant)",e+1),new ie(l=>l.hunger<yr,"Is Healthy (hunger)",e+1),new ie(l=>(l.procreationCooldown||0)<=0,"Is Ready (cooldown)",e+1),new _n([new ge([new ie((l,c)=>sv(l.position,c.gameState,"berryBush",IT)>=TT,"Is Environment Viable (food)",e+3),new ae((l,c,d)=>(d.delete(ml),I.SUCCESS),"Clear Wander Timer",e+3)],"Sufficient Food Path",e+2),new ge([new ie((l,c)=>{if(l.gender==="male"){const d=It(c.gameState,l);return!si(d)}return!1},"Is Male Without Heir",e+3),new ae((l,c,d)=>{const h=d.get(ml);if(h===void 0)return d.set(ml,c.gameState.time),[I.FAILURE,"Starting heirless wander timer"];const g=c.gameState.time-h;return g>=KA?[I.SUCCESS,`Wandered for ${g.toFixed(1)}h, proceeding without food`]:[I.FAILURE,`Wandering for heir, ${g.toFixed(1)}h elapsed`]},"Check Wander Timer",e+3)],"Heirless Desperation Path",e+2)],"Check Environment Or Desperation",e+1),new ie((l,c,d)=>{var g;const h=d.get("procreationPartner");return h&&((g=h.partnerIds)!=null&&g.length)&&!h.partnerIds.includes(l.id)&&h.partnerIds.map(m=>c.gameState.entities.entities.get(m)).filter(m=>!!m).some(m=>X(l.position,m.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<ZT)?[!1,"Partner's primary partner is too close"]:!0},"Is Partner's Primary Partner Nearby",e+1),new _n([new ge([n,r],"Procreate With Immediate Partner",e+2),new Tr(DT,new ge([o,a],"Seek Distant Partner Action",e+3),"Seek Distant Partner Cooldown",e+2)],"Find Partner And Procreate",e+1)],"Procreate",e)}const Vr="attackTarget",sr="homeCenter",Sd=150;function g_(e){return new ge([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const{gameState:a}=r;if(n.activeAction==="attacking"&&n.attackTargetId){const c=a.entities.entities.get(n.attackTargetId);if(c&&c.hitpoints>0&&X(n.position,c.position,a.mapDimensions.width,a.mapDimensions.height)<=Sd){if(o.set(Vr,c),!o.get(sr)){const d=n.leaderId?Sr(n.leaderId,a):xl(n,a).length>0?Sm(n,a):n.position;o.set(sr,d)}return!0}}const l=Ne(n,a,"human",Sd,c=>c.hitpoints>0&&_o(n,c,a));if(l){o.set(Vr,l);const c=n.leaderId?Sr(n.leaderId,a):xl(n,a).length>0?Sm(n,a):n.position;return o.set(sr,c),!0}return o.set(Vr,void 0),o.set(sr,void 0),!1},"Find Attack Target",e+1),new ae((n,r,o)=>{const a=o.get(Vr),l=o.get(sr);if(!a||!l)return I.FAILURE;const{gameState:c}=r;return X(n.position,l,c.mapDimensions.width,c.mapDimensions.height)>D0?(n.activeAction="idle",n.attackTargetId=void 0,o.set(Vr,void 0),o.set(sr,void 0),I.FAILURE):a.hitpoints<=0||X(n.position,a.position,c.mapDimensions.width,c.mapDimensions.height)>Sd?(n.activeAction==="attacking"&&(n.activeAction="idle",n.attackTargetId=void 0),o.set(Vr,void 0),o.set(sr,void 0),I.SUCCESS):(n.activeAction==="attacking"&&n.attackTargetId===a.id||(n.activeAction="attacking",n.attackTargetId=a.id),I.RUNNING)},"Execute Attack",e+1)],"Attack",e)}const m_=(e,n,r)=>{const o=It(n.gameState,e).filter(c=>!c.isAdult);if(o.length===0)return I.FAILURE;let a=null,l=rf;for(const c of o)c.hunger>=l&&(l=c.hunger,a=c);return a?(r.set("targetChild",a),I.SUCCESS):I.FAILURE},v_=(e,n,r)=>{const o=r.get("targetChild");return o?X(e.position,o.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>of?(e.activeAction="moving",e.target=o.id,e.direction=jt(e.position,o.position,n.gameState.mapDimensions),I.RUNNING):(e.activeAction="feeding",e.target=void 0,r.set("targetChild",void 0),I.SUCCESS):I.FAILURE};function y_(e){return new ge([new ie(n=>(n.isAdult&&n.food.length>0&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child",e+1),new ae(m_,"Find Hungriest Child",e+1),new ae(v_,"Move To Child and Feed",e+1)],"Feed Child",e)}function S_(e){return new ge([new ie(n=>!n.isAdult&&n.hunger>=rf,"Is Hungry Child",e+1),new ae((n,r,o)=>{const a=jE(n,r.gameState);if(a.length===0)return I.FAILURE;const l=Ne(n,r.gameState,"human",eT,c=>a.some(d=>d.id===c.id)&&c.food.length>0);return l?(o.set("targetParent",l),I.SUCCESS):I.FAILURE},"Find Parent With Food",e+1),new ae((n,r,o)=>{const a=o.get("targetParent");if(!a)return I.FAILURE;const l=X(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",l<=of?(n.target=void 0,I.SUCCESS):(n.target=a.id,n.activeAction="moving",I.RUNNING)},"Move To Parent",e+1)],"Seek Food From Parent",e)}const vl="plantingSpot";function A_(e){const n=new ae((o,a,l)=>{const c=l.get(vl);return!c||So(c,a.gameState,eu,o.id)?(l.delete(vl),[I.FAILURE,"Planting spot is invalid or now occupied"]):X(o.position,c,a.gameState.mapDimensions.width,a.gameState.mapDimensions.height)>xi?(o.activeAction="moving",o.target=c,o.direction=jt(o.position,c,a.gameState.mapDimensions),[I.RUNNING,"Moving to planting spot"]):(o.activeAction="planting",o.target=c,[I.RUNNING,"Planting state initiated"])},"Move To Spot and Plant",e+3),r=new ae((o,a,l)=>{const c=nw(o,a.gameState);return c?(l.set(vl,c),[I.SUCCESS,`Found new spot at ${c.x.toFixed(0)}, ${c.y.toFixed(0)}`]):[I.FAILURE,"No suitable planting spot found"]},"Find Optimal Planting Spot",e+3);return new ge([new ie(o=>{const a=o.food.filter(c=>c.type===oi.Berry).length>=Us,l=o.hunger<mT;return(o.isAdult&&a&&l)??!1},"Can Plant",e+1),new ie((o,a)=>{const l=sv(o.position,a.gameState,"berryBush",pT),c=It(a.gameState,o);return!(c.length===0||l>=c.length*5)},"Has Not Enough Nearby Bushes",e+1),new _n([new ge([new ie((o,a,l)=>l.has(vl),"Has Planting Spot?",e+2),n],"Continue Planting Action",e+2),new Tr(kT,r,"Find Planting Spot Cooldown",e+2)],"Perform or Start Planting",e+1)],"Plant Bush",e)}const Ad="enemiesNearby";function T_(e){const n=new ie(l=>l.id===l.leaderId,"Is Leader?",e+1),r=new ie(l=>!l.isCallingToAttack,"Is Not Already Calling?",e+1),o=new ae((l,c,d)=>{const h=yf(l,c.gameState,O0);return h.length>0?(d.set(Ad,h),I.SUCCESS):I.FAILURE},"Find Nearby Enemies",e+1),a=new _n([new ge([new ie((l,c,d)=>{const h=d.get(Ad);if(!h||h.length===0)return!1;const g=Bs(l.id,c.gameState),m=bl(g),y=bl(h);return m>y*WT},"Is Strong Enough?",e+3),new ae((l,c)=>(l.isCallingToAttack=!0,l.callToAttackEndTime=c.gameState.time+mo,Ce(c.gameState,se.CallToAttack,l.position,mo),ke(c,Te.CallToAttack,l.position),l.activeAction="idle",l.target=void 0,I.SUCCESS),"Issue Call to Attack",e+3)],"Attack",e+2),new ae((l,c,d)=>{const h=d.get(Ad);if(!h||h.length===0)return I.FAILURE;const g=h.map(P=>P.position),m=gf(g),y=$e(m,l.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height),S=et(y),w=bn(l.position,Tt(S,F0*2));return l.activeAction="moving",l.target={x:(w.x%c.gameState.mapDimensions.width+c.gameState.mapDimensions.width)%c.gameState.mapDimensions.width,y:(w.y%c.gameState.mapDimensions.height+c.gameState.mapDimensions.height)%c.gameState.mapDimensions.height},l.direction=S,I.SUCCESS},"Retreat",e+2)],"Attack or Retreat",e+2);return new ge([n,r,o,new Tr(YT,a,"Leader Combat Cooldown",e+1)],"Leader Combat Strategy",e)}const Td="combatTarget",Id="homeCenter";function I_(e){const n=new ie(c=>c.isAdult&&c.leaderId?c.id!==c.leaderId:!1,"Is Tribe Follower?",e+1),r=new ie(c=>c.hunger<vT&&c.hitpoints>=c.maxHitpoints*M0,"Is Fit for Combat?",e+1),o=new ie((c,d)=>{const h=d.gameState.entities.entities.get(c.leaderId);return!!(h!=null&&h.isCallingToAttack)},"Is Leader Calling to Attack?",e+1),a=new ae((c,d,h)=>{const{gameState:g}=d,m=g.entities.entities.get(c.leaderId);if(!m)return I.FAILURE;const y=yf(m,g,_T);if(y.length===0)return I.FAILURE;y.sort((S,w)=>{const P=X(c.position,S.position,g.mapDimensions.width,g.mapDimensions.height),_=X(c.position,w.position,g.mapDimensions.width,g.mapDimensions.height);return P-_});for(const S of y)if(iw(m.id,S.id,g)<CT){h.set(Td,S);const P=Sr(m.id,g);return h.set(Id,P),I.SUCCESS}return I.FAILURE},"Find Best Target",e+1),l=new ae((c,d,h)=>{const g=h.get(Td),m=h.get(Id);if(!g||!m)return I.FAILURE;const{gameState:y}=d;return X(c.position,m,y.mapDimensions.width,y.mapDimensions.height)>D0?(c.activeAction==="attacking"&&c.attackTargetId===g.id&&(c.activeAction="idle",c.attackTargetId=void 0),h.set(Td,void 0),h.set(Id,void 0),I.FAILURE):((!c.lastTargetAcquiredEffectTime||d.gameState.time-c.lastTargetAcquiredEffectTime>Be*5)&&(Ce(d.gameState,se.TargetAcquired,c.position,Be,c.id),c.lastTargetAcquiredEffectTime=d.gameState.time),c.activeAction="attacking",c.attackTargetId=g.id,c.target=void 0,I.RUNNING)},"Attack Target",e+1);return new ge([n,r,o,a,l],"Tribe Member Combat",e)}function E_(e){const n=new ie((m,y)=>{if(!m.isAdult||m.gender!=="male")return!1;const S=m.partnerIds&&m.partnerIds.length>0,w=It(y.gameState,m).length>0;return S||w},"Is Adult Male With Family?",e+1),r=new ie((m,y)=>{var _;const S=Et(y.gameState);if(S){const T=si(It(y.gameState,S));if((T==null?void 0:T.id)===m.id)return!1}if(!m.fatherId)return!1;const w=y.gameState.entities.entities.get(m.fatherId);return!w||((_=si(It(y.gameState,w)))==null?void 0:_.id)===m.id?!1:X(m.position,w.position,y.gameState.mapDimensions.width,y.gameState.mapDimensions.height)<NT},"Is Too Close To Father?",e+1),o=new ie((m,y,S)=>S.get("territoryMoveTarget")!==void 0,"Is Moving To Territory?",e+3),a=new ae((m,y,S)=>{const w=S.get("territoryMoveTarget"),P=S.get("territoryMoveStartTime");if(!w||!P)return[I.FAILURE,"Missing move data"];if(y.gameState.time-P>RT)return S.delete("territoryMoveTarget"),S.delete("territoryMoveStartTime"),[I.FAILURE,"Territory move timed out"];if(X(m.position,w,y.gameState.mapDimensions.width,y.gameState.mapDimensions.height)<xi)return S.delete("territoryMoveTarget"),S.delete("territoryMoveStartTime"),[I.SUCCESS,"Arrived at new territory"];m.activeAction="moving",m.target=w;const U=$e(m.position,m.target,y.gameState.mapDimensions.width,y.gameState.mapDimensions.height);return m.direction=et(U),[I.RUNNING,"Continuing move to territory"]},"Check Timeout & Arrival",e+3),l=new ge([o,a],"Handle In-Progress Move",e+2),c=new ie((m,y,S)=>S.get("territoryMoveTarget")===void 0,"Should Start New Move?",e+4),d=new ae((m,y,S)=>{const w=mf(m.position,y.gameState.mapDimensions.width/4,y.gameState.mapDimensions.width,y.gameState.mapDimensions.height);S.set("territoryMoveTarget",w),S.set("territoryMoveStartTime",y.gameState.time),m.activeAction="moving",m.target=w;const P=$e(m.position,m.target,y.gameState.mapDimensions.width,y.gameState.mapDimensions.height);return m.direction=et(P),[I.RUNNING,"Started moving to new territory"]},"Start New Territory Move",e+4),h=new ge([c,d],"Start New Territory Move Action",e+3),g=new _n([l,new Tr(OT,h,"Establish Territory Cooldown",e+2)],"Establish or Continue Move",e+1);return new ge([n,r,g],"Establish Family Territory",e)}function w_(e){return new ge([new ae((n,r,o)=>{const a=XE(n,r.gameState);return a?(o.set("patriarchTarget",a),[I.SUCCESS,`Found patriarch: ${a.id}`]):(o.delete("patriarchTarget"),[I.FAILURE,"No patriarch found"])},"Find Patriarch",e+1),new ae((n,r,o)=>{const a=o.get("patriarchTarget");if(!a)return[I.FAILURE,"Patriarch target missing from blackboard"];const l=X(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(l>N0){n.activeAction="moving",n.target=a.id;const c=$e(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=et(c),[I.RUNNING,`Moving to patriarch at ${l.toFixed(0)}`]}return n.activeAction="idle",n.target=void 0,n.direction={x:0,y:0},[I.SUCCESS,`Arrived at patriarch at ${l.toFixed(0)}`]},"Move Towards Patriarch",e+1)],"Follow Patriarch",e)}const Ed="tribeSplitMigrationTarget";function __(e){const n=new ge([new ie((r,o)=>{const{canSplit:a,progress:l}=Tf(r,o.gameState);return a?[!0,`Progress: ${(l??0)*100}%`]:[!1,"Cannot split"]},"Can Split Tribe?",e+2),new ae((r,o,a)=>{const{gameState:l}=o;let c=a.get(Ed);if(!c){if(!r.leaderId)return I.FAILURE;const h=Sr(r.leaderId,l),g=Aw(h,r,l);if(g)a.set(Ed,g),c=g;else return I.FAILURE}return X(r.position,c,l.mapDimensions.width,l.mapDimensions.height)<xi?(a.delete(Ed),r.activeAction="idle",r.target=void 0,I.SUCCESS):(r.activeAction="moving",r.target=c,I.RUNNING)},"Move to New Territory",e+2),new ae((r,o)=>(If(r,o.gameState),I.SUCCESS),"Perform Tribe Split",e+2)],"Tribe Split Action",e+1);return new Tr(HT,n,"Tribe Split Cooldown",e)}const yl="jealousyAttackTarget";function C_(e){return new ge([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const a=ZE(n,r.gameState,jT);return a?(o.set(yl,a),[!0,`Partner cheating with ${a.id}`]):(o.delete(yl),!1)},"Check for Infidelity",e+1),new ae((n,r,o)=>{const a=o.get(yl);return!a||a.hitpoints<=0?(o.delete(yl),[I.FAILURE,"Target is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?I.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[I.RUNNING,`Attacking ${a.id}`])},"Execute Jealousy Attack",e+1)],"Jealousy Attack",e)}const Sl="defendAggressor";function R_(e){return new ge([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const a=ew(n,r.gameState,VT);return a?(o.set(Sl,a),[!0,`Family member ${a.familyMember.id} attacked by ${a.aggressor.id}`]):(o.delete(Sl),!1)},"Check Family Under Attack",e+1),new ae((n,r,o)=>{const a=o.get(Sl);return!a||a.hitpoints<=0?(o.delete(Sl),[I.FAILURE,"Target invalid/dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?I.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[I.RUNNING,`Attacking aggressor ${a.id}`])},"Execute Family Defense Attack",e+1)],"Defend Family",e)}const Al="bushIntruder";function P_(e){return new ge([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const a=JE(n,r.gameState,XT);return a?(o.set(Al,a),[!0,`Intruder ${a.id} stealing berries`]):(o.delete(Al),!1)},"Check For Intruders on Bushes",e+1),new ae((n,r,o)=>{const a=o.get(Al);return!a||a.hitpoints<=0?(o.delete(Al),[I.FAILURE,"Intruder is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?I.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[I.RUNNING,`Attacking intruder ${a.id}`])},"Execute Bush Defense Attack",e+1)],"Defend Claimed Bush",e)}const Tl="desperateAttackTarget";function N_(e){return new ge([new ie(n=>n.hunger>KT,"Is Starving",e+1),new ie((n,r)=>{if(!n.isAdult)return[!1,"Not an adult"];const o=Ne(n,r.gameState,"berryBush",mt,l=>l.food.length>0),a=Ne(n,r.gameState,"corpse",mt,l=>l.food.length>0);return!o&&!a},"No Other Food Available",e+1),new ie((n,r,o)=>{const a=tw(n,r.gameState);return a?(o.set(Tl,a),[!0,`Found weak target ${a.id}`]):(o.delete(Tl),!1)},"Find Weak Target",e+1),new ae((n,r,o)=>{const a=o.get(Tl);return!a||a.hitpoints<=0?(o.delete(Tl),[I.FAILURE,"Target is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===a.id?I.RUNNING:(n.activeAction="attacking",n.attackTargetId=a.id,[I.RUNNING,`Desperately attacking ${a.id}`])},"Execute Desperate Attack",e+1)],"Desperate Attack",e)}function D_(e,n,r,o){const a=e.entities.entities.get(r.targetEntityId);return!a||!("hitpoints"in a)||a.hitpoints<=0?(e.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):X(n.position,a.position,e.mapDimensions.width,e.mapDimensions.height)<=Ml?(n.activeAction="attacking",n.attackTargetId=a.id,e.autopilotControls.activeAutopilotAction=void 0,I.SUCCESS):(n.activeAction="moving",n.target=a.id,n.direction=jt(n.position,a.position,e.mapDimensions),I.RUNNING)}function O_(e){return new ge([new ie((n,r)=>n.isPlayer===!0&&!!r.gameState.autopilotControls.activeAutopilotAction,"Has Player Command",e+1),new ae((n,r)=>{const{gameState:o}=r,a=o.autopilotControls.activeAutopilotAction;if(!a)return I.FAILURE;switch(a.action){case Ee.AutopilotMove:{const l=a.position;return X(n.position,l,o.mapDimensions.width,o.mapDimensions.height)<eI?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction==="moving"&&(n.activeAction="idle",n.target=void 0),I.SUCCESS):(n.activeAction="moving",n.target=l,n.direction=jt(n.position,l,o.mapDimensions),I.RUNNING)}case Ee.AutopilotGather:{const l=o.entities.entities.get(a.targetEntityId);return!l||l.food.length===0?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):X(n.position,l.position,o.mapDimensions.width,o.mapDimensions.height)>xi?(n.activeAction="moving",n.target=l.id,n.direction=jt(n.position,l.position,o.mapDimensions),I.RUNNING):(n.activeAction="gathering",n.target=l.id,o.autopilotControls.activeAutopilotAction=void 0,I.SUCCESS)}case Ee.AutopilotAttack:return D_(o,n,a);case Ee.AutopilotProcreate:{const l=o.entities.entities.get(a.targetEntityId);return!l||l.type!=="human"||!Ar(n,l,r.gameState)?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):X(n.position,l.position,o.mapDimensions.width,o.mapDimensions.height)<=Ml?(n.activeAction="procreating",o.autopilotControls.activeAutopilotAction=void 0,I.SUCCESS):(n.activeAction="moving",n.target=l.id,n.direction=jt(n.position,l.position,o.mapDimensions),I.RUNNING)}case Ee.AutopilotPlant:{if(n.activeAction==="planting")return I.RUNNING;const l=a.position;return So(l,o,eu,n.id)?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):X(n.position,l,o.mapDimensions.width,o.mapDimensions.height)<=Ml?(n.activeAction="planting",n.target=l,o.autopilotControls.activeAutopilotAction=void 0,o.hasPlayerPlantedBush=!0,I.RUNNING):(n.activeAction="moving",n.target=l,n.direction=jt(n.position,l,o.mapDimensions),I.RUNNING)}case Ee.AutopilotFeedChild:{const l=o.entities.entities.get(a.targetEntityId);return!l||l.type!=="human"||l.isAdult||n.food.length===0?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):X(n.position,l.position,o.mapDimensions.width,o.mapDimensions.height)<=Ml?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction="feeding",I.SUCCESS):(n.activeAction="moving",n.target=l.id,n.direction=jt(n.position,l.position,o.mapDimensions),I.RUNNING)}case Ee.AutopilotFollowMe:{const l=o.entities.entities.get(a.targetEntityId);return!l||l.type!=="human"||l.id!==l.leaderId?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):X(n.position,l.position,o.mapDimensions.width,o.mapDimensions.height)<=N0?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction==="moving"&&(n.activeAction="idle"),I.SUCCESS):(n.activeAction="moving",n.target=l.id,n.direction=jt(n.position,l.position,o.mapDimensions),I.RUNNING)}default:return o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE}},"Execute Player Command",e+1)],"Player Command Handler",e)}function k_(e){return new ge([new ie(n=>!!n.leaderId&&n.leaderId!==n.id,"Is Follower",e+1),new ie((n,r)=>{if(!n.leaderId)return!1;const o=r.gameState.entities.entities.get(n.leaderId);return!!o&&o.isCallingToFollow===!0},"Is Leader Calling To Follow",e+1),new ie(n=>n.hunger<AT,"Is Not Critically Hungry",e+1),new ae((n,r)=>{if(!n.leaderId)return I.FAILURE;const o=r.gameState.entities.entities.get(n.leaderId);return o?X(n.position,o.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>ST?(n.activeAction="moving",n.target=o.id,n.direction=jt(n.position,o.position,r.gameState.mapDimensions),I.RUNNING):(n.activeAction==="moving"&&n.target===o.id&&(n.activeAction="idle",n.target=void 0),I.SUCCESS):I.FAILURE},"Execute Follow Leader",e+1)],"Follow Leader Command",e)}const Cm="tribeMigrationCheckCooldown";function M_(e){const n=new ge([new ie(o=>!!o.leaderId&&o.leaderId===o.id,"Is Tribe Leader",e+2),new ie((o,a)=>{var c;const l=(c=o.aiBlackboard)==null?void 0:c.get(Cm);return l?a.gameState.time-l>=Zg:!0},"Is Migration Check Cooldown Over",e+2),new ae((o,a)=>{var c;(c=o.aiBlackboard)==null||c.set(Cm,a.gameState.time);const l=rw(o,a.gameState);return l?(o.isCallingToFollow=!0,o.callToFollowEndTime=a.gameState.time+Ls,o.target=l,o.activeAction="moving",I.SUCCESS):I.FAILURE},"Execute Tribe Migration",e+2)],"Tribe Migration Strategy",e+1),r=new Ws(n,bd,"Cache Tribe Migration",e+1);return new Tr(Zg,r,"Tribe Migration Cooldown",e)}function F_(e){const n=new ie(o=>o.id===o.leaderId,"Is Leader?",e+1),r=new ae((o,a)=>{var g,m,y;const{gameState:l}=a,c=Bs(o.id,l),d=bl(c),h=rv(l).filter(S=>S.leaderId!==o.id);for(const S of h){const w=Bs(S.leaderId,l),P=bl(w),_=((g=o.diplomacy)==null?void 0:g.get(S.leaderId))||Ht.Friendly;d>P*$T?_!==Ht.Hostile&&((m=o.diplomacy)==null||m.set(S.leaderId,Ht.Hostile)):_!==Ht.Friendly&&((y=o.diplomacy)==null||y.set(S.leaderId,Ht.Friendly))}return I.SUCCESS},"Evaluate Diplomacy",e+2);return new ge([n,new Tr(LT,r,"Diplomacy Cooldown",e+1)],"Manage Diplomacy",e)}const Il="huntTarget";function U_(e){return new ge([new Ws(new ie((r,o,a)=>{var h;if(!r.isAdult)return[!1,"Not an adult"];if(!r.leaderId)return[!1,"Not in a tribe"];const l=Sr(r.leaderId,o.gameState),c=((h=ov(l,o.gameState,"berryBush",Kg))==null?void 0:h.map(g=>g.id))||[],d=Ne(l,o.gameState,"prey",Kg,g=>typeof g.target=="number"&&c.includes(g.target));return d?(a.set(Il,d.id),!0):!1},"Find Prey Target",e+2),FT,"Cache Find Prey",e+1),new zl(new ae((r,o,a)=>{if(!r.leaderId)return I.FAILURE;const l=a.get(Il);if(!l)return I.FAILURE;const c=o.gameState.entities.entities.get(l);if(!c||c.hitpoints<=0)return a.delete(Il),r.activeAction="idle",r.attackTargetId=void 0,I.SUCCESS;const{gameState:d}=o,h=Sr(r.leaderId,d);return X(r.position,h,d.mapDimensions.width,d.mapDimensions.height)>yT?(a.delete(Il),r.activeAction="idle",r.attackTargetId=void 0,I.FAILURE):(r.activeAction="attacking",r.attackTargetId=c.id,I.RUNNING)},"Hunt Prey Action",e+2),xd,"Hunt Prey Timeout",e+1)],"Human Hunt Prey Sequence",e)}const El="defendTarget",wd=150;function H_(e){return new ge([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult - children flee instead"];const{gameState:a}=r;if(n.activeAction==="attacking"&&n.attackTargetId){const c=a.entities.entities.get(n.attackTargetId);if(c&&c.type==="predator"&&c.hitpoints>0&&X(n.position,c.position,a.mapDimensions.width,a.mapDimensions.height)<=wd)return o.set(El,c),[!0,"Continuing defense"]}const l=Ne(n,a,"predator",wd,c=>c.hitpoints>0&&(c.isAdult||!1));if(l){const c=X(n.position,l.position,a.mapDimensions.width,a.mapDimensions.height),d=l.attackTargetId===n.id,h=c<80;if(d||h)return o.set(El,l),[!0,"Predator threat detected"]}return o.set(El,void 0),[!1,"No predator threat"]},"Detect Predator Threat",e+1),new ae((n,r,o)=>{const a=o.get(El);if(!a)return I.FAILURE;const{gameState:l}=r,c=X(n.position,a.position,l.mapDimensions.width,l.mapDimensions.height);return a.hitpoints<=0||c>wd*1.5?(n.activeAction="idle",n.attackTargetId=void 0,I.SUCCESS):(n.activeAction="attacking",n.attackTargetId=a.id,I.RUNNING)},"Defend Against Predator",e+1)],"Human Defend Against Predator",e)}function L_(e){return new ge([new ie((n,r,o)=>{const a=Ne(n,r.gameState,"predator",Lt*2,()=>!0),l=Ne(n,r.gameState,"human",Lt*2,()=>!0);let c=null,d=1/0;if(a){const h=X(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);h<d&&(d=h,c=a)}if(l){const h=X(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);h<d&&(d=h,c=l)}return c&&d<Lt*1.5?(o.set("fleeThreat",c),o.set("fleeDistance",d),!0):!1},"Detect Threat",e+1),new ae((n,r,o)=>{const a=o.get("fleeThreat");if(!a)return I.FAILURE;n.activeAction="moving";const l=$e(a.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),c=et(l),d=bn(n.position,Tt(c,PE));return n.target={x:(d.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(d.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},n.direction=c,n.fleeCooldown=r.gameState.time+2,I.RUNNING},"Execute Flee",e+1)],"Prey Flee",e)}function B_(e){return new ge([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];if(n.hunger<=30||n.eatingCooldownTime&&n.eatingCooldownTime>r.gameState.time)return!1;const a=Ne(n,r.gameState,"berryBush",Lt*10,l=>l.food.length>0);return a?X(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=Lt?(o.set("grazingTarget",a),!0):(o.set("grazingTarget",a),o.set("needToMoveToTarget",!0),!0):!1},"Find Berry Bush",e+1),new ae((n,r,o)=>{const a=o.get("grazingTarget"),l=o.get("needToMoveToTarget");if(!a)return I.FAILURE;const c=X(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Lt)return n.activeAction="grazing",n.target=a.id,n.direction={x:0,y:0},o.delete("needToMoveToTarget"),I.RUNNING;if(l||c>Lt){n.activeAction="moving",n.target=a.id;const d=jt(n.position,a.position,r.gameState.mapDimensions);return n.direction=d,I.RUNNING}return I.FAILURE},"Move to Bush or Graze",e+1)],"Prey Graze",e)}function G_(e){const n=new ie((l,c,d)=>{const h=Ne(l,c.gameState,"prey",Lt,g=>g.id!==l.id&&g.gender!==l.gender&&!!g.isAdult&&g.age>=Cs&&g.age<=dd&&!g.isPregnant&&(!g.procreationCooldown||g.procreationCooldown<=0)&&g.hunger<200);return h?(d.set("procreationPartner",h),!0):!1},"Find Immediate Partner",e+2),r=new ae((l,c,d)=>{const h=d.get("procreationPartner");return h?(l.activeAction="procreating",l.target=h.id,l.direction={x:0,y:0},d.delete("procreationPartner"),I.SUCCESS):I.FAILURE},"Start Procreating",e+2),o=new ie((l,c,d)=>{const h=Ne(l,c.gameState,"prey",Lt*10,g=>g.id!==l.id&&g.gender!==l.gender&&!!g.isAdult&&g.age>=Cs&&g.age<=dd&&!g.isPregnant&&(!g.procreationCooldown||g.procreationCooldown<=0)&&g.hunger<200);return h?(d.set("procreationPartner",h),!0):!1},"Locate Distant Partner",e+2),a=new ae((l,c,d)=>{const h=d.get("procreationPartner");if(!h)return I.FAILURE;if(X(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<=Lt)return I.SUCCESS;l.activeAction="moving",l.target=h.id;const m=$e(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height);return l.direction=et(m),I.RUNNING},"Move Towards Partner",e+2);return new ge([new ie(l=>!!(l.isAdult&&!l.isPregnant&&l.age>=Cs&&l.age<=dd&&l.hunger<200&&(!l.procreationCooldown||l.procreationCooldown<=0)),"Is Fertile and Ready",e+1),new _n([new ge([n,r],"Procreate With Immediate Partner",e+2),new ge([o,a],"Seek Distant Partner",e+2)],"Find Partner And Procreate",e+1)],"Prey Procreate",e)}const x_=(e,n,r)=>{const o=n.gameState.search.prey.byProperty("motherId",e.id).filter(c=>!c.isAdult&&c.type==="prey");if(o.length===0)return I.FAILURE;let a=null,l=nu;for(const c of o)c.hunger>=l&&(l=c.hunger,a=c);return a?(r.set("targetChild",a),I.SUCCESS):I.FAILURE},b_=(e,n,r)=>{const o=r.get("targetChild");return o?X(e.position,o.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>wo?(e.activeAction="moving",e.target=o.id,e.direction=jt(e.position,o.position,n.gameState.mapDimensions),I.RUNNING):(e.activeAction="feeding",e.target=void 0,r.set("targetChild",void 0),I.SUCCESS):I.FAILURE};function z_(e){return new ge([new ie(n=>(n.isAdult&&n.gender==="female"&&n.hunger<80&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child (Female Only)",e+1),new ae(x_,"Find Hungriest Prey Child",e+1),new ae(b_,"Move To Child and Feed",e+1)],"Feed Prey Child",e)}function $_(e){return new ge([new ie(n=>!n.isAdult&&n.hunger>=nu,"Is Hungry Prey Child",e+1),new ae((n,r,o)=>{if(!n.motherId)return I.FAILURE;const a=r.gameState.entities.entities.get(n.motherId);return a?(o.set("targetParent",a),I.SUCCESS):I.FAILURE},"Find Female Parent",e+1),new ae((n,r,o)=>{const a=o.get("targetParent");if(!a)return I.FAILURE;const l=X(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",l<=wo?(n.target=void 0,I.SUCCESS):(n.target=a.id,n.activeAction="moving",I.RUNNING)},"Move To Female Parent",e+1)],"Seek Food From Female Parent",e)}function W_(e){return new ge([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];if(n.hunger<=50||n.huntCooldown&&n.huntCooldown>0)return!1;const a=Ne(n,r.gameState,"prey",Qr*10,l=>l.hitpoints>0);if(a){const l=X(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(l<=Qr)return o.set("huntTarget",a),!0;if(l<=Qr*10)return o.set("huntTarget",a),o.set("needToApproach",!0),!0}return!1},"Find Prey Target",e+1),new zl(new ae((n,r,o)=>{const a=o.get("huntTarget"),l=o.get("needToApproach");if(!a||a.hitpoints<=0)return I.FAILURE;const c=X(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Qr)return n.activeAction="attacking",n.attackTargetId=a.id,n.target=a.id,n.direction={x:0,y:0},o.delete("needToApproach"),I.RUNNING;if(l||c>Qr){n.activeAction="moving",n.target=a.id;const d=$e(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=et(d),I.RUNNING}return I.FAILURE},"Hunt or Approach Prey",e+2),10,"Hunt Timeout (10 hour)",e+1)],"Predator Hunt",e)}function Y_(e){return new ge([new ie((n,r,o)=>{const a=n.hunger>100,l=n.hitpoints<n.maxHitpoints*.5;if(!a&&!l||n.attackCooldown&&n.attackCooldown>0)return!1;const c=Ne(n,r.gameState,"human",Tn*2,d=>d.hitpoints>0);if(c){const d=X(n.position,c.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(d<=Tn)return o.set("attackTarget",c),!0;if(a&&d<=Tn*2)return o.set("attackTarget",c),o.set("needToApproach",!0),!0}return!1},"Find Human Target",e+1),new ae((n,r,o)=>{const a=o.get("attackTarget"),l=o.get("needToApproach");if(!a||a.hitpoints<=0)return I.FAILURE;const c=X(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Tn)return n.activeAction="attacking",n.attackTargetId=a.id,n.target=a.id,n.direction={x:0,y:0},o.delete("needToApproach"),I.RUNNING;if(l||c>Tn){n.activeAction="moving",n.target=a.id;const d=$e(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=et(d),I.RUNNING}return I.FAILURE},"Attack or Approach Human",e+1)],"Predator Attack Human",e)}function j_(e){const n=new ie((l,c,d)=>{const h=Ne(l,c.gameState,"predator",Bi,g=>g.id!==l.id&&g.gender!==l.gender&&!!g.isAdult&&g.age>=Rs&&g.age<=fd&&!g.isPregnant&&(!g.procreationCooldown||g.procreationCooldown<=0)&&g.hunger<200);return h?(d.set("procreationPartner",h),!0):!1},"Find Immediate Partner",e+2),r=new ae((l,c,d)=>{const h=d.get("procreationPartner");return h?(l.activeAction="procreating",l.target=h.id,l.direction={x:0,y:0},d.delete("procreationPartner"),I.SUCCESS):I.FAILURE},"Start Procreating",e+2),o=new ie((l,c,d)=>{const h=Ne(l,c.gameState,"predator",Bi*10,g=>g.id!==l.id&&g.gender!==l.gender&&!!g.isAdult&&g.age>=Rs&&g.age<=fd&&!g.isPregnant&&(!g.procreationCooldown||g.procreationCooldown<=0)&&g.hunger<200);return h?(d.set("procreationPartner",h),!0):!1},"Locate Distant Partner",e+2),a=new ae((l,c,d)=>{const h=d.get("procreationPartner");if(!h)return I.FAILURE;if(X(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<=Bi)return I.SUCCESS;l.activeAction="moving",l.target=h.id;const m=$e(l.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height);return l.direction=et(m),I.RUNNING},"Move Towards Partner",e+2);return new ge([new ie(l=>!!(l.isAdult&&!l.isPregnant&&l.age>=Rs&&l.age<=fd&&l.hunger<200&&(!l.procreationCooldown||l.procreationCooldown<=0)),"Is Fertile and Ready",e+1),new _n([new ge([n,r],"Procreate With Immediate Partner",e+2),new ge([o,a],"Seek Distant Partner",e+2)],"Find Partner And Procreate",e+1)],"Predator Procreate",e)}const V_=(e,n,r)=>{const o=n.gameState.search.predator.byProperty("motherId",e.id).filter(c=>!c.isAdult&&c.type==="predator");if(o.length===0)return I.FAILURE;let a=null,l=nu;for(const c of o)c.hunger>=l&&(l=c.hunger,a=c);return a?(r.set("targetChild",a),I.SUCCESS):I.FAILURE},X_=(e,n,r)=>{const o=r.get("targetChild");return o?X(e.position,o.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>wo?(e.activeAction="moving",e.target=o.id,e.direction=jt(e.position,o.position,n.gameState.mapDimensions),I.RUNNING):(e.activeAction="feeding",e.target=void 0,r.set("targetChild",void 0),I.SUCCESS):I.FAILURE};function K_(e){return new ge([new ie(n=>(n.isAdult&&n.gender==="female"&&n.hunger<90&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child (Female Only)",e+1),new ae(V_,"Find Hungriest Predator Child",e+1),new ae(X_,"Move To Child and Feed",e+1)],"Feed Predator Child",e)}function Q_(e){return new ge([new ie(n=>!n.isAdult&&n.hunger>=nu,"Is Hungry Predator Child",e+1),new ae((n,r,o)=>{if(!n.motherId)return I.FAILURE;const a=r.gameState.entities.entities.get(n.motherId);return a?(o.set("targetParent",a),I.SUCCESS):I.FAILURE},"Find Female Parent",e+1),new ae((n,r,o)=>{const a=o.get("targetParent");if(!a)return I.FAILURE;const l=X(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",l<=wo?(n.target=void 0,I.SUCCESS):(n.target=a.id,n.activeAction="moving",I.RUNNING)},"Move To Female Parent",e+1)],"Seek Food From Female Parent",e)}function dv(e){return new ae((n,r,o)=>{n.activeAction="idle";let a=o.get("wanderTarget"),l=o.get("wanderStartTime");const c=r.gameState.time;if(!a||!l||c-l>2){const d=Math.random()*2*Math.PI,h=50+Math.random()*100,g={x:Math.cos(d),y:Math.sin(d)},m=bn(n.position,Tt(g,h));a={x:(m.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(m.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},o.set("wanderTarget",a),o.set("wanderStartTime",c)}if(a){n.target=a;let d=a.x-n.position.x,h=a.y-n.position.y;const g=r.gameState.mapDimensions.width,m=r.gameState.mapDimensions.height;Math.abs(d)>g/2&&(d=d>0?d-g:d+g),Math.abs(h)>m/2&&(h=h>0?h-m:h+m);const y=et({x:d,y:h});n.direction=y}return I.SUCCESS},"Animal Wander",e)}function q_(e){return new ge([new ie((n,r,o)=>{if(n.hunger>90||n.hitpoints<n.maxHitpoints*.3||n.activeAction==="grazing"||n.activeAction==="procreating")return!1;const a=r.gameState.entities.entities.values(),l=[];for(const c of a)if(c.type==="prey"&&c.id!==n.id){const d=c;d.hitpoints>0&&d.isAdult&&X(n.position,d.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=Lt*5&&l.push(d)}if(l.length>=2){let c=0,d=0;for(const m of l)c+=m.position.x,d+=m.position.y;c/=l.length,d/=l.length;const h={x:c,y:d};if(X(n.position,h,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Lt*2)return o.set("herdCenter",h),o.set("herdSize",l.length),!0}return!1},"Find Herd",e+1),new ae((n,r,o)=>{const a=o.get("herdCenter");if(!a)return I.FAILURE;if(X(n.position,a,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Lt*2){n.activeAction="moving",n.target=a;const c=$e(n.position,a,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=et(c),I.RUNNING}else return n.activeAction="idle",n.direction={x:0,y:0},I.SUCCESS},"Join Herd",e+1)],"Prey Herd Behavior",e)}function Z_(e){return new ge([new ie((n,r,o)=>{if(n.hunger>100||n.hitpoints<n.maxHitpoints*.4||n.activeAction==="attacking"||n.activeAction==="procreating")return!1;const a=Ne(n,r.gameState,"predator",Bi*4,l=>l.id!==n.id&&l.hitpoints>0&&l.isAdult&&n.fatherId!==void 0&&l.fatherId===n.fatherId&&l.age>=n.age||l.hitpoints>n.hitpoints);return a&&X(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Bi*2?(o.set("packLeader",a),!0):!1},"Find Pack Leader",e+1),new ae((n,r,o)=>{const a=o.get("packLeader");if(!a||a.hitpoints<=0)return I.FAILURE;if(X(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Bi*2){n.activeAction="moving",n.target=a.id;const c=$e(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=et(c),I.RUNNING}else return n.activeAction="idle",n.direction={x:0,y:0},I.SUCCESS},"Follow Pack Leader",e+1)],"Predator Pack Behavior",e)}function J_(e){return new ge([new ie((n,r,o)=>{if(!n.isAdult||n.hitpoints<n.maxHitpoints*.6||n.hunger>120||n.attackCooldown&&n.attackCooldown>0)return!1;const a=Ne(n,r.gameState,"predator",vm,l=>!!(l.id!==n.id&&l.hitpoints>0&&l.isAdult&&n.fatherId!==l.fatherId&&n.gender===l.gender&&n.fatherId!==void 0&&l.fatherId!==void 0));if(a){const l=X(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(l<=Tn)return o.set("territorialTarget",a),!0;if(l<=vm)return o.set("territorialTarget",a),o.set("needToApproach",!0),!0}return!1},"Find Territorial Rival",e+1),new ae((n,r,o)=>{const a=o.get("territorialTarget"),l=o.get("needToApproach");if(!a||a.hitpoints<=0)return I.FAILURE;const c=X(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Tn)return n.activeAction="attacking",n.attackTargetId=a.id,n.target=a.id,n.direction={x:0,y:0},o.delete("needToApproach"),I.RUNNING;if(l||c>Tn){n.activeAction="moving",n.target=a.id;const d=$e(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=et(d),I.RUNNING}return I.FAILURE},"Territorial Fight or Approach",e+1)],"Predator Territorial Defense",e)}function eC(){const e=new _n([d_(2),R_(2),H_(2),C_(2),P_(2),N_(2),O_(2),new gs(T_(3),"Gated Leader Combat Strategy",2),new gs(F_(3),"Gated Diplomacy",2),I_(2),new or(g_(3),"attack","Gated Attacking",2),c_(2),new zl(new or(f_(4),"gathering","Gated Gathering",3),xd,"Timeout Gathering",2),new or(y_(3),"feedChildren","Gated Feed Child",2),S_(2),new zl(new or(A_(4),"planting","Gated Planting",3),xd,"Timeout Planting",2),new or(U_(3),"attack","Gated Hunt Prey",2),new or(p_(3),"procreation","Gated Procreation",2),new Ws(__(3),bd,"Cache Tribe Split",2),new gs(M_(3),"Gated Tribe Migration",2),new Ws(E_(3),bd,"Cache Establish Territory",2),new or(k_(3),"followLeader","Gated Follow Leader",2),new gs(w_(2),"Gated Follow Patriarch",2),new gs(h_(2),"Gated Idle Wander",2)],"AI Root Selector",1);return new u_(e,"Manual Control Gate",0)}function tC(){return new _n([L_(1),z_(1),$_(1),B_(1),G_(1),q_(1),dv(1)],"Prey Behavior Root",0)}function nC(){return new _n([W_(1),Y_(1),K_(1),Q_(1),J_(1),j_(1),Z_(1),dv(1)],"Predator Behavior Root",0)}class _f{constructor(){me(this,"data",new Map);me(this,"nodeExecutionData",new Map)}set(n,r){this.data.set(n,r)}get(n){return this.data.get(n)}delete(n){this.data.delete(n)}has(n){return this.data.has(n)}recordNodeExecution(n,r,o,a,l){const c=this.nodeExecutionData.get(n)||{lastExecuted:0,status:I.FAILURE,depth:0,debugInfo:"",executionHistory:[]},d=c.executionHistory[c.executionHistory.length-1];d&&o-(d==null?void 0:d.time)>Hs&&c.executionHistory.push({time:d.time+Hs,status:I.NOT_EVALUATED}),c.executionHistory.push({time:o,status:r});const h=x0/Xt*Vt,g=o-h;c.executionHistory=c.executionHistory.filter(y=>y.time>=g);const m={...c,lastExecuted:o,status:r,depth:a,debugInfo:l};this.nodeExecutionData.set(n,m)}getNodeExecutionData(){return this.nodeExecutionData}cleanupOldEntries(n){const r=PT,o=[];for(const[a,l]of this.nodeExecutionData.entries())n-l.lastExecuted>r&&o.push(a);for(const a of o)this.nodeExecutionData.delete(a)}}function iC(e){e.gameState.entities.entities.forEach(r=>{s_(r,e)})}function fv(){return{entities:new Map,nextEntityId:1}}function Xs(e,n,r){const o={id:e.nextEntityId++,type:n,velocity:{x:0,y:0},direction:{x:0,y:0},acceleration:0,forces:[],debuffs:[],...r};return e.entities.set(o.id,o),o}function Ks(e,n,r){return Xs(e,"berryBush",{position:n,radius:Gd,food:Array.from({length:BA},()=>({type:oi.Berry})).map(a=>({...a,id:e.nextEntityId++})),maxFood:LA,lifespan:xA,age:0,spreadRadius:Gd,timeSinceLastBerryRegen:0,timeSinceLastSpreadAttempt:0,timeSinceLastHarvest:0,stateMachine:[_s,{enteredAt:r,previousState:void 0}]})}function $l(e,n,r,o,a=!1,l=YA,c=w0,d,h,g=[],m,y){const S=l>=nf;return Xs(e,"human",{position:n,radius:S?vt:Eo,hunger:c,hitpoints:jg,maxHitpoints:jg,age:l,gender:o,isPlayer:a,food:[],maxFood:E0,maxAge:Fs,isAdult:S,isPregnant:!1,gestationTime:0,procreationCooldown:0,attackCooldown:0,motherId:d,fatherId:h,ancestorIds:g,stateMachine:[At,{enteredAt:r,previousState:void 0}],leaderId:m,tribeBadge:y,aiType:Vs.BehaviorTreeBased,aiBehaviorTree:eC(),aiBlackboard:new _f})}function Cf(e,n,r,o,a,l,c,d,h,g,m){let y,S;switch(c){case"human":y=R0,S=yr;break;case"prey":y=2,S=120;break;case"predator":y=4,S=140;break}return Xs(e,"corpse",{position:n,radius:a,gender:r,age:o,originalEntityId:l,originalEntityType:c,timeOfDeath:d,decayProgress:0,geneCode:m,food:[...Array.from({length:Math.max(y*Math.max(S-g,0)/S,0)},()=>({type:oi.Meat})),...h].map(P=>({...P,id:e.nextEntityId++})),stateMachine:void 0})}function rC(e,n,r,o,a,l,c,d,h){return Cf(e,n,r,o,a,l,"human",c,d,h)}function oC(e,n,r,o,a,l,c,d){return Cf(e,n,r,o,a,l,"prey",c,[],0,d)}function sC(e,n,r,o,a,l,c,d){return Cf(e,n,r,o,a,l,"predator",c,[],0,d)}function aC(e,n,r){const o=n?r.gameState.entities.entities.get(n):void 0,a=[...e.ancestorIds||[],e.id],l=o?[...o.ancestorIds||[],o.id]:[],c=[...a,...l],d=[...new Set(c)],h=d.slice(Math.max(d.length-bA,0)),g=Math.random()<.5?"male":"female",m=bn(e.position,{x:5,y:5}),y=$l(r.gameState.entities,m,r.gameState.time,g,!1,0,w0/2,e.id,n,h,(o==null?void 0:o.leaderId)??e.leaderId,(o==null?void 0:o.tribeBadge)??e.tribeBadge);return ke(r,Te.Birth,e.position),y}function Qs(e,n){return e.entities.get(n)?(e.entities.delete(n),!0):!1}function Ao(e,n,r,o=RE,a=V0,l,c,d){const h=o>=Cs,g=Date.now();return Xs(e,"prey",{position:n,radius:h?vt*.7:Eo*.7,hunger:a,hitpoints:gm,maxHitpoints:gm,age:o,maxAge:j0,gender:r,isAdult:h,isPregnant:!1,gestationTime:0,procreationCooldown:0,geneCode:l,motherId:c,fatherId:d,stateMachine:[In,{enteredAt:g,previousState:void 0}],aiType:Vs.BehaviorTreeBased,aiBehaviorTree:tC(),aiBlackboard:new _f})}function To(e,n,r,o=UE,a=K0,l,c,d){const h=o>=Rs,g=Date.now();return Xs(e,"predator",{position:n,radius:h?vt*.9:Eo*.9,hunger:a,hitpoints:mm,maxHitpoints:mm,age:o,maxAge:X0,gender:r,isAdult:h,isPregnant:!1,gestationTime:0,procreationCooldown:0,geneCode:l,motherId:c,fatherId:d,stateMachine:[Ut,{enteredAt:g,previousState:void 0}],aiType:Vs.BehaviorTreeBased,aiBehaviorTree:nC(),aiBlackboard:new _f})}class lC{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(n,r){let o=this.length++;for(;o>0;){const a=o-1>>1,l=this.values[a];if(r>=l)break;this.ids[o]=this.ids[a],this.values[o]=l,o=a}this.ids[o]=n,this.values[o]=r}pop(){if(this.length===0)return;const n=this.ids[0];if(this.length--,this.length>0){const r=this.ids[0]=this.ids[this.length],o=this.values[0]=this.values[this.length],a=this.length>>1;let l=0;for(;l<a;){let c=(l<<1)+1;const d=c+1;let h=this.ids[c],g=this.values[c];const m=this.values[d];if(d<this.length&&m<g&&(c=d,h=this.ids[d],g=m),g>=o)break;this.ids[l]=h,this.values[l]=g,l=c}this.ids[l]=r,this.values[l]=o}return n}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}const Rm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],_d=3;class Rf{static from(n,r=0){if(r%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!n||n.byteLength===void 0||n.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[o,a]=new Uint8Array(n,r+0,2);if(o!==251)throw new Error("Data does not appear to be in a Flatbush format.");const l=a>>4;if(l!==_d)throw new Error(`Got v${l} data when expected v${_d}.`);const c=Rm[a&15];if(!c)throw new Error("Unrecognized array type.");const[d]=new Uint16Array(n,r+2,1),[h]=new Uint32Array(n,r+4,1);return new Rf(h,d,c,void 0,n,r)}constructor(n,r=16,o=Float64Array,a=ArrayBuffer,l,c=0){if(n===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(n)||n<=0)throw new Error(`Unexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+r,2),65535),this.byteOffset=c;let d=n,h=d;this._levelBounds=[d*4];do d=Math.ceil(d/this.nodeSize),h+=d,this._levelBounds.push(h*4);while(d!==1);this.ArrayType=o,this.IndexArrayType=h<16384?Uint16Array:Uint32Array;const g=Rm.indexOf(this.ArrayType),m=h*4*this.ArrayType.BYTES_PER_ELEMENT;if(g<0)throw new Error(`Unexpected typed array class: ${o}.`);l&&l.byteLength!==void 0&&!l.buffer?(this.data=l,this._boxes=new this.ArrayType(this.data,c+8,h*4),this._indices=new this.IndexArrayType(this.data,c+8+m,h),this._pos=h*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1]):(this.data=new a(8+m+h*this.IndexArrayType.BYTES_PER_ELEMENT),this._boxes=new this.ArrayType(this.data,8,h*4),this._indices=new this.IndexArrayType(this.data,8+m,h),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(this.data,0,2).set([251,(_d<<4)+g]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=n),this._queue=new lC}add(n,r,o=n,a=r){const l=this._pos>>2,c=this._boxes;return this._indices[l]=l,c[this._pos++]=n,c[this._pos++]=r,c[this._pos++]=o,c[this._pos++]=a,n<this.minX&&(this.minX=n),r<this.minY&&(this.minY=r),o>this.maxX&&(this.maxX=o),a>this.maxY&&(this.maxY=a),l}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const n=this._boxes;if(this.numItems<=this.nodeSize){n[this._pos++]=this.minX,n[this._pos++]=this.minY,n[this._pos++]=this.maxX,n[this._pos++]=this.maxY;return}const r=this.maxX-this.minX||1,o=this.maxY-this.minY||1,a=new Uint32Array(this.numItems),l=65535;for(let c=0,d=0;c<this.numItems;c++){const h=n[d++],g=n[d++],m=n[d++],y=n[d++],S=Math.floor(l*((h+m)/2-this.minX)/r),w=Math.floor(l*((g+y)/2-this.minY)/o);a[c]=cC(S,w)}jd(a,n,this._indices,0,this.numItems-1,this.nodeSize);for(let c=0,d=0;c<this._levelBounds.length-1;c++){const h=this._levelBounds[c];for(;d<h;){const g=d;let m=n[d++],y=n[d++],S=n[d++],w=n[d++];for(let P=1;P<this.nodeSize&&d<h;P++)m=Math.min(m,n[d++]),y=Math.min(y,n[d++]),S=Math.max(S,n[d++]),w=Math.max(w,n[d++]);this._indices[this._pos>>2]=g,n[this._pos++]=m,n[this._pos++]=y,n[this._pos++]=S,n[this._pos++]=w}}}search(n,r,o,a,l){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let c=this._boxes.length-4;const d=[],h=[];for(;c!==void 0;){const g=Math.min(c+this.nodeSize*4,Nm(c,this._levelBounds));for(let m=c;m<g;m+=4){if(o<this._boxes[m]||a<this._boxes[m+1]||n>this._boxes[m+2]||r>this._boxes[m+3])continue;const y=this._indices[m>>2]|0;c>=this.numItems*4?d.push(y):(l===void 0||l(y))&&h.push(y)}c=d.pop()}return h}neighbors(n,r,o=1/0,a=1/0,l){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let c=this._boxes.length-4;const d=this._queue,h=[],g=a*a;e:for(;c!==void 0;){const m=Math.min(c+this.nodeSize*4,Nm(c,this._levelBounds));for(let y=c;y<m;y+=4){const S=this._indices[y>>2]|0,w=Pm(n,this._boxes[y],this._boxes[y+2]),P=Pm(r,this._boxes[y+1],this._boxes[y+3]),_=w*w+P*P;_>g||(c>=this.numItems*4?d.push(S<<1,_):(l===void 0||l(S))&&d.push((S<<1)+1,_))}for(;d.length&&d.peek()&1;)if(d.peekValue()>g||(h.push(d.pop()>>1),h.length===o))break e;c=d.length?d.pop()>>1:void 0}return d.clear(),h}}function Pm(e,n,r){return e<n?n-e:e<=r?0:e-r}function Nm(e,n){let r=0,o=n.length-1;for(;r<o;){const a=r+o>>1;n[a]>e?o=a:r=a+1}return n[r]}function jd(e,n,r,o,a,l){if(Math.floor(o/l)>=Math.floor(a/l))return;const c=e[o+a>>1];let d=o-1,h=a+1;for(;;){do d++;while(e[d]<c);do h--;while(e[h]>c);if(d>=h)break;uC(e,n,r,d,h)}jd(e,n,r,o,h,l),jd(e,n,r,h+1,a,l)}function uC(e,n,r,o,a){const l=e[o];e[o]=e[a],e[a]=l;const c=4*o,d=4*a,h=n[c],g=n[c+1],m=n[c+2],y=n[c+3];n[c]=n[d],n[c+1]=n[d+1],n[c+2]=n[d+2],n[c+3]=n[d+3],n[d]=h,n[d+1]=g,n[d+2]=m,n[d+3]=y;const S=r[o];r[o]=r[a],r[a]=S}function cC(e,n){let r=e^n,o=65535^r,a=65535^(e|n),l=e&(n^65535),c=r|o>>1,d=r>>1^r,h=a>>1^o&l>>1^a,g=r&a>>1^l>>1^l;r=c,o=d,a=h,l=g,c=r&r>>2^o&o>>2,d=r&o>>2^o&(r^o)>>2,h^=r&a>>2^o&l>>2,g^=o&a>>2^(r^o)&l>>2,r=c,o=d,a=h,l=g,c=r&r>>4^o&o>>4,d=r&o>>4^o&(r^o)>>4,h^=r&a>>4^o&l>>4,g^=o&a>>4^(r^o)&l>>4,r=c,o=d,a=h,l=g,h^=r&a>>8^o&l>>8,g^=o&a>>8^(r^o)&l>>8,r=h^h>>1,o=g^g>>1;let m=e^n,y=o|65535^(m|r);return m=(m|m<<8)&16711935,m=(m|m<<4)&252645135,m=(m|m<<2)&858993459,m=(m|m<<1)&1431655765,y=(y|y<<8)&16711935,y=(y|y<<4)&252645135,y=(y|y<<2)&858993459,y=(y|y<<1)&1431655765,(y<<1|m)>>>0}function vs(e,n){if(e.length===0)return{byRect:()=>[],byRadius:()=>[],byProperty:()=>[],resetPropertyCache:()=>{},count:()=>0};const r=new Rf(e.length),o=new Map;for(const l of e)r.add(l.position.x,l.position.y,l.position.x,l.position.y);return r.finish(),{byRect(l){return r.search(l.left,l.top,l.right,l.bottom).map(d=>e[d])},byRadius(l,c){return r.neighbors(l.x,l.y,void 0,c).map(h=>e[h])},byProperty(l,c){var d;if(!o.has(l)){const h=new Map;for(const g of e){const m=g[l];h.has(m)||h.set(m,[]),h.get(m).push(g)}o.set(l,h)}return((d=o.get(l))==null?void 0:d.get(c))||[]},resetPropertyCache(){o.clear()},count(){return e.length}}}function Pf(e){const n=Array.from(e.entities.entities.values()),r=n.filter(h=>h.type==="human"),o=n.filter(h=>h.type==="berryBush"),a=n.filter(h=>h.type==="corpse"),l=n.filter(h=>h.type==="prey"),c=n.filter(h=>h.type==="predator");return{...e,search:{human:vs(r),berryBush:vs(o),corpse:vs(a),prey:vs(l),predator:vs(c)}}}var Mt=(e=>(e.MOVE="MOVE",e.HUNGER="HUNGER",e.EAT="EAT",e.FIND_BUSH="FIND_BUSH",e.GATHER="GATHER",e.PROCREATE="PROCREATE",e.PLANT_BUSH="PLANT_BUSH",e.AUTOPILOT="AUTOPILOT",e.ANIMALS_INTRODUCTION="ANIMALS_INTRODUCTION",e.HUNT_PREY="HUNT_PREY",e.DEFEND_FROM_PREDATORS="DEFEND_FROM_PREDATORS",e))(Mt||{}),vr=(e=>(e.HUNGER_BAR="HUNGER_BAR",e.FOOD_BAR="FOOD_BAR",e.COMMAND_BUTTONS="COMMAND_BUTTONS",e))(vr||{}),Ft=(e=>(e[e.FADING_IN=0]="FADING_IN",e[e.ACTIVE=1]="ACTIVE",e[e.FADING_OUT=2]="FADING_OUT",e[e.INACTIVE=3]="INACTIVE",e))(Ft||{});const dC=[{key:Mt.MOVE,title:"Movement",text:"Use WASD or Arrow Keys to move your character around the world.",condition:e=>e.hasPlayerMovedEver||e.hasPlayerEnabledAutopilot>2,isCompleted:!1},{key:Mt.HUNGER,title:"Hunger",text:"Your character gets hungry over time. Watch the hunger bar!",condition:(e,n)=>n.hunger>zA,isCompleted:!1,minDisplayTime:dm,highlightedUIElements:[vr.HUNGER_BAR]},{key:Mt.FIND_BUSH,title:"Find Food",text:"Look for berry bushes. They are your primary source of food.",condition:(e,n)=>!!Ne(n,e,"berryBush",mt*5,o=>o.food.length>0),getTargets:(e,n)=>{const r=[];for(const o of e.entities.entities.values())o.type==="berryBush"&&o.food.length>0&&X(n.position,o.position,e.mapDimensions.width,e.mapDimensions.height)<500&&r.push(o);return r.map(o=>o.id)},isCompleted:!1,minDisplayTime:dm},{key:Mt.GATHER,title:"Gather Berries",text:"Get close to a bush and press 'E' to gather berries.",condition:(e,n)=>n.food.length>0,getTargets:(e,n)=>{const r=Ne(n,e,"berryBush",mt,o=>o.food.length>0);return r?[r.id]:[]},isCompleted:!1},{key:Mt.EAT,title:"Eat",text:"When you are hungry and have food, press 'F' to eat.",condition:(e,n)=>n.activeAction==="eating",isCompleted:!1,highlightedUIElements:[vr.FOOD_BAR]},{key:Mt.PROCREATE,title:"Procreate",text:"Find a mate and press 'R' to start a family. This is how you continue your lineage.",condition:(e,n)=>It(e,n).length>0,getTargets:(e,n)=>{const r=Ne(n,e,"human",mt,o=>Ar(n,o,e));return r?[r.id]:[]},isCompleted:!1},{key:Mt.PLANT_BUSH,title:"Farming",text:"You can plant new berry bushes. Carry some berries and press 'B' to plant.",condition:(e,n)=>Ef(e,n).some(o=>o.type===Ee.Plant)||e.hasPlayerPlantedBush===!0,isCompleted:!1},{key:Mt.AUTOPILOT,title:"Autopilot!",text:"You can turn autopilot for specific actions, press Shift and click on the action button to enable it.",condition:e=>e.hasPlayerEnabledAutopilot>2,highlightedUIElements:[vr.COMMAND_BUTTONS],isCompleted:!1},{key:Mt.ANIMALS_INTRODUCTION,title:"Wild Animals!",text:"Your world now has wild animals! Prey provide meat when hunted, but beware of predators that may attack.",condition:e=>Array.from(e.entities.entities.values()).some(r=>r.type==="prey"||r.type==="predator"),isCompleted:!1,dependsOn:Mt.AUTOPILOT},{key:Mt.HUNT_PREY,title:"Hunt for Meat",text:"Click on prey animals to hunt them for meat. Hunting provides more food than gathering berries!",condition:(e,n)=>{const r=Ne(n,e,"prey",150);return n.hunger>40&&!!r},getTargets:(e,n)=>{const r=Ne(n,e,"prey",150);return r?[r.id]:[]},isCompleted:!1,dependsOn:Mt.ANIMALS_INTRODUCTION},{key:Mt.DEFEND_FROM_PREDATORS,title:"Predators",text:"Predators may attack when hungry! Click on them to fight back. Fighting together with family is more effective.",condition:(e,n)=>!!Ne(n,e,"predator",120),getTargets:(e,n)=>{const r=Ne(n,e,"predator",120);return r?[r.id]:[]},isCompleted:!1,dependsOn:Mt.HUNT_PREY}];function hv(){return{steps:dC.map(e=>({...e,isCompleted:!1}))}}function pv(){return{currentStepIndex:0,completedSteps:new Set,isActive:!0,transitionState:Ft.FADING_IN,transitionAlpha:0,highlightedEntityIds:new Set,stepStartTime:null,activeUIHighlights:new Set}}function fC(e){for(let n=0;n<e.tutorial.steps.length;n++){const r=e.tutorial.steps[n];if(!r.isCompleted)if(r.dependsOn){if(e.tutorialState.completedSteps.has(r.dependsOn))return n}else return n}return null}function hC(e,n){const r=e.tutorialState;if(!r.isActive){r.transitionState=Ft.INACTIVE,r.highlightedEntityIds.clear(),r.activeUIHighlights.clear();return}const o=Et(e);if(!o){r.isActive=!1,r.transitionState=Ft.INACTIVE,r.highlightedEntityIds.clear(),r.activeUIHighlights.clear();return}const a=e.tutorial.steps[r.currentStepIndex];if(!a){r.isActive=!1,r.transitionState=Ft.INACTIVE,r.highlightedEntityIds.clear(),r.activeUIHighlights.clear();return}const l=1/JI;switch(r.transitionState){case Ft.FADING_IN:r.stepStartTime===null&&(r.stepStartTime=e.time),r.transitionAlpha+=l*n,r.transitionAlpha>=1&&(r.transitionAlpha=1,r.transitionState=Ft.ACTIVE);break;case Ft.ACTIVE:{e.time-(r.stepStartTime||e.time)>=(a.minDisplayTime||0)&&a.condition(e,o)&&(a.isCompleted=!0,r.completedSteps.add(a.key),r.transitionState=Ft.FADING_OUT);break}case Ft.FADING_OUT:if(r.transitionAlpha-=l*n,r.transitionAlpha<=0){r.transitionAlpha=0,r.stepStartTime=null;const d=fC(e);d!==null?(r.currentStepIndex=d,r.transitionState=Ft.FADING_IN):(r.isActive=!1,r.transitionState=Ft.INACTIVE)}break}r.transitionState!==Ft.FADING_OUT&&r.transitionState!==Ft.INACTIVE?(a.getTargets?r.highlightedEntityIds=new Set(a.getTargets(e,o)):r.highlightedEntityIds.clear(),a.highlightedUIElements?r.activeUIHighlights=new Set(a.highlightedUIElements):r.activeUIHighlights.clear()):(r.highlightedEntityIds.clear(),r.activeUIHighlights.clear())}function pC(){const e=fv(),n=0;for(let y=0;y<A0;y++){const S={x:Math.random()*Ze,y:Math.random()*Je};Ks(e,S,n)}const r=Ze/2,o=Je/2,a=$l(e,{x:r,y:o},n,"male",!0);$l(e,{x:r+50,y:o},n,"female",!1);for(let y=0;y<Z0;y++){const S={x:r+Ze*(Math.random()-Math.random()),y:o+Je*(Math.random()-Math.random())};Ao(e,S,"male",void 0,void 0,zs()),Ao(e,{x:S.x+20,y:S.y},"female",void 0,void 0,zs())}const l={x:r+Ze*(Math.random()-Math.random()),y:o+Je*(Math.random()-Math.random())};To(e,l,"male",void 0,void 0,$s()),To(e,{x:l.x+20,y:l.y},"female",void 0,void 0,$s());const c=[{id:"muteButton",action:Ue.ToggleMute,currentWidth:to,rect:{x:0,y:0,width:0,height:0},text:"",backgroundColor:"",textColor:no},{id:"pauseButton",action:Ue.TogglePause,currentWidth:to,rect:{x:0,y:0,width:0,height:0},text:"",backgroundColor:"",textColor:no}],d=hv(),h=pv(),g={time:n,entities:e,mapDimensions:{width:Ze,height:Je},generationCount:1,gameOver:!1,visualEffects:[],nextVisualEffectId:0,viewportCenter:{...a.position},isPaused:!1,autopilotControls:{behaviors:{procreation:!1,planting:!1,gathering:!1,attack:!1,feedChildren:!0,followLeader:!1},hoveredAutopilotAction:void 0,activeAutopilotAction:void 0,isManuallyMoving:!1},hasPlayerMovedEver:!1,hasPlayerPlantedBush:!1,hasPlayerEnabledAutopilot:0,masterVolume:Y0,isMuted:!1,uiButtons:c,tutorial:d,tutorialState:h,hoveredButtonId:void 0,mousePosition:{x:0,y:0},notifications:[{id:"welcome",type:Gs.Hello,message:"Welcome to the game!",duration:50,targetEntityIds:[a.id],highlightedEntityIds:[a.id],timestamp:0,isDismissed:!1,creationTime:Date.now()}],ecosystem:{preyGestationPeriod:fr,preyProcreationCooldown:hr,predatorGestationPeriod:pr,predatorProcreationCooldown:gr,preyHungerIncreasePerHour:Ui,predatorHungerIncreasePerHour:Hi,berryBushSpreadChance:ri}},m=Pf(g);return console.log("Game world initialized:",m),m}function gC(){const e=fv(),n=0;for(let c=0;c<A0;c++){const d={x:Math.random()*Ze,y:Math.random()*Je};Ks(e,d,n)}for(let c=0;c<sE;c++){const d={x:Math.random()*Ze,y:Math.random()*Je},h=Math.random()<.5?"male":"female";$l(e,d,n,h,!1)}for(let c=0;c<Z0;c++){const d={x:Math.random()*Ze,y:Math.random()*Je};Ao(e,d,"male",void 0,void 0,zs()),Ao(e,{x:d.x+20,y:d.y},"female",void 0,void 0,zs())}const r={x:Math.random()*Ze,y:Math.random()*Je};To(e,r,"male",void 0,void 0,$s()),To(e,{x:r.x+20,y:r.y},"female",void 0,void 0,$s());const o=hv(),a=pv(),l={time:n,entities:e,mapDimensions:{width:Ze,height:Je},generationCount:0,gameOver:!1,visualEffects:[],nextVisualEffectId:0,viewportCenter:{x:Ze/2,y:Je/2},isPaused:!1,autopilotControls:{behaviors:{procreation:!1,planting:!1,gathering:!1,attack:!1,feedChildren:!0,followLeader:!1},hoveredAutopilotAction:void 0,activeAutopilotAction:void 0,isManuallyMoving:!1},hasPlayerMovedEver:!1,hasPlayerPlantedBush:!1,hasPlayerEnabledAutopilot:0,masterVolume:Y0,isMuted:!0,uiButtons:[],tutorial:o,tutorialState:a,hoveredButtonId:void 0,mousePosition:{x:0,y:0},notifications:[],ecosystem:{preyGestationPeriod:fr,preyProcreationCooldown:hr,predatorGestationPeriod:pr,predatorProcreationCooldown:gr,preyHungerIncreasePerHour:Ui,predatorHungerIncreasePerHour:Hi,berryBushSpreadChance:ri}};return Pf(l)}const mC="humanProcreation",vC="human",yC="human",SC=mt,AC=(e,n,r)=>Ar(e,n,r.gameState)?e.gender==="male"?e.activeAction==="procreating":e.activeAction==="procreating"&&n.activeAction==="procreating":!1,TC=(e,n,r)=>{var h,g;const{gameState:o}=r,a={x:(e.position.x+n.position.x)/2,y:(e.position.y+n.position.y)/2},l=e.gender==="male"?e:n,c=e.gender==="female"?e:n,d=(l.partnerIds||[]).length===0;if(e.stateMachine=[bs,{partnerId:n.id,previousState:(h=e.stateMachine)==null?void 0:h[0]}],n.stateMachine=[bs,{partnerId:e.id,previousState:(g=n.stateMachine)==null?void 0:g[0]}],e.partnerIds||(e.partnerIds=[]),e.partnerIds.includes(n.id)||e.partnerIds.push(n.id),n.partnerIds||(n.partnerIds=[]),n.partnerIds.includes(e.id)||n.partnerIds.push(e.id),d&&l.leaderId&&l.leaderId!==l.id){const m=o.entities.entities.get(l.leaderId);if(m){const y=$d(l,m),S=$d(c,m);if(!y&&!S){const w=Wd();l.leaderId=l.id,l.tribeBadge=w,l.diplomacy=new Map,c.leaderId=l.id,c.tribeBadge=w}}}else if(!e.leaderId&&!n.leaderId&&l&&c){const m=Wd();l.leaderId=l.id,l.tribeBadge=m,l.diplomacy=new Map,c.leaderId=l.id,c.tribeBadge=m}e.activeAction=void 0,Ce(o,se.Procreation,a,cr),Ce(o,se.Partnered,e.position,Be,e.id),Ce(o,se.Partnered,n.position,Be,n.id),e.lastPartneredEffectTime=o.time,n.lastPartneredEffectTime=o.time,n.activeAction=void 0,ke(r,Te.Procreate,a)},IC={id:mC,sourceType:vC,targetType:yC,maxDistance:SC,checker:AC,perform:TC},EC={id:"humanChildFeeding",sourceType:"human",targetType:"human",maxDistance:of,checker:(e,n)=>e.isAdult===!0&&e.food.length>0&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=Gi&&e.activeAction==="feeding",perform:(e,n,r)=>{e.food.pop(),n.hunger=Math.max(0,n.hunger-Gi),e.feedChildCooldownTime=JA,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(Ce(r.gameState,se.ChildFed,n.position,Be,n.id),n.lastChildFedEffectTime=r.gameState.time),ke(r,Te.ChildFed,n.position)}},wC={id:"human-attack",sourceType:"human",targetType:"human",maxDistance:xn,checker:(e,n,r)=>{var l;if(((l=e.stateMachine)==null?void 0:l[0])!==bi||e.attackTargetId!==n.id||(e.attackCooldown||0)>0)return!1;const o=e.stateMachine[1];return r.gameState.time-o.attackStartTime>=P0},perform:(e,n,r)=>{const o=$e(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),a=WE(et(o),n.direction);if(Math.abs(a)<dT*Math.PI/180&&Math.random()<fT)Ce(r.gameState,se.AttackDeflected,n.position,Be,n.id);else{let d=sf;e.gender==="male"&&(d*=lT),e.isAdult||(d*=uT),(!n.isAdult||n.age>=C0)&&e.isAdult&&(d*=cT),n.hitpoints-=d,n.movementSlowdown={modifier:af,endTime:r.gameState.time+lf},Ce(r.gameState,se.Hit,n.position,Be,n.id);const g=$e(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),m=Tt(g,oT);n.forces.push(m),n.hitpoints<=0?ke(r,Te.HumanDeath,n.position):ke(r,Te.Attack,e.position)}e.attackCooldown=Jl;const c=e.stateMachine[1];c.attackStartTime=r.gameState.time,Ce(r.gameState,se.Attack,e.position,Be,e.id)}},_C={id:"human-collision",sourceType:"human",targetType:"human",maxDistance:vt*2,checker:(e,n,{gameState:r})=>X(e.position,n.position,r.mapDimensions.width,r.mapDimensions.height)<(e.radius+n.radius)/3,perform:(e,n,{gameState:r})=>{const o=X(e.position,n.position,r.mapDimensions.width,r.mapDimensions.height);if(o===0){e.forces.push({x:.1,y:0}),n.forces.push({x:-.1,y:0});return}const l=(e.radius+n.radius-o)*.05,c=et(tv(e.position,n.position)),d=Tt(c,l);e.forces.push(d),n.forces.push(Tt(d,-1))}},CC={id:"humanBerryBushGather",sourceType:"human",targetType:"berryBush",maxDistance:mt,checker:(e,n,r)=>{var o;return e.isAdult&&n.food.length>0&&((o=e.stateMachine)==null?void 0:o[0])===ru&&e.food.length<e.maxFood&&(!e.gatheringCooldownTime||e.gatheringCooldownTime<r.gameState.time)||!1},perform:(e,n,r)=>{const o=n.food.pop();o&&e.food.push(o),e.gatheringCooldownTime=r.gameState.time+1,n.timeSinceLastHarvest=r.gameState.time,n.ownerId=e.id,n.claimedUntil=r.gameState.time+T0,Ce(r.gameState,se.BushClaimed,n.position,Be),ke(r,Te.Gather,e.position)}},RC={id:"corpseGather",sourceType:"human",targetType:"corpse",maxDistance:mt,checker:(e,n,r)=>{var o;return e.isAdult&&n.food.length>0&&((o=e.stateMachine)==null?void 0:o[0])===ru&&e.food.length<e.maxFood&&(!e.gatheringCooldownTime||e.gatheringCooldownTime<r.gameState.time)||!1},perform:(e,n,r)=>{const o=n.food.pop();o&&e.food.push(o),e.gatheringCooldownTime=r.gameState.time+1,ke(r,Te.Gather,e.position)}},PC=[CC,RC],NC={id:"prey-eat-berry-bush",sourceType:"prey",targetType:"berryBush",maxDistance:Lt,checker:(e,n,r)=>!!(e.isAdult&&n.food.length>0&&e.hunger>30&&(!e.eatingCooldownTime||e.eatingCooldownTime<r.gameState.time)),perform:(e,n,r)=>{n.food.pop()&&(e.hunger=Math.max(0,e.hunger-25),n.lifespan-=DE,n.timeSinceLastHarvest=r.gameState.time,e.eatingCooldownTime=r.gameState.time+NE,Ce(r.gameState,se.BushClaimed,n.position,Be,e.id),ke(r,Te.Gather,e.position))}},DC={id:"predator-hunt-prey",sourceType:"predator",targetType:"prey",maxDistance:Qr,checker:(e,n,r)=>!!(e.isAdult&&e.hunger>50&&(!e.huntCooldown||e.huntCooldown<=0)&&n.hitpoints>0),perform:(e,n,r)=>{n.hitpoints-=HE;const o=$e(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),a=Tt(o,8);n.forces.push(a),e.huntCooldown=GE,n.hitpoints<=0?(ke(r,Te.HumanDeath,n.position),Ce(r.gameState,se.Hit,n.position,Be,n.id)):(Ce(r.gameState,se.Hit,n.position,Be,n.id),n.fleeCooldown=5,ke(r,Te.Attack,e.position)),Ce(r.gameState,se.Attack,e.position,Be,e.id)}},OC={id:"human-hunt-prey",sourceType:"human",targetType:"prey",maxDistance:xn,checker:(e,n,r)=>{var o;return!!(((o=e.stateMachine)==null?void 0:o[0])===bi&&e.attackTargetId===n.id&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&e.isAdult)},perform:(e,n,r)=>{let o=sf*1.2;e.gender==="male"&&(o*=1.3),n.hitpoints-=o;const a=$e(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),l=Tt(a,6);n.forces.push(l),e.attackCooldown=Jl,n.hitpoints<=0?(ke(r,Te.HumanDeath,n.position),Ce(r.gameState,se.Hit,n.position,Be,n.id)):(Ce(r.gameState,se.Hit,n.position,Be,n.id),n.fleeCooldown=8,ke(r,Te.Attack,e.position)),Ce(r.gameState,se.Attack,e.position,Be,e.id)}},kC={id:"predator-attack-human",sourceType:"predator",targetType:"human",maxDistance:Tn,checker:(e,n,r)=>{var o;return!!(e.isAdult&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&(e.hunger>100||n.attackTargetId===e.id||n.attackTargetId&&((o=r.gameState.entities.entities.get(n.attackTargetId))==null?void 0:o.type)==="predator"))},perform:(e,n,r)=>{let o=Q0;e.hunger>120&&(o*=1.3),n.hitpoints-=o,n.movementSlowdown={modifier:af,endTime:r.gameState.time+lf};const a=$e(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),l=Tt(a,7);n.forces.push(l),e.attackCooldown=q0,n.hitpoints<=0?(e.hunger=Math.max(0,e.hunger-hf),ke(r,Te.HumanDeath,n.position),Ce(r.gameState,se.Hit,n.position,Be,n.id)):(Ce(r.gameState,se.Hit,n.position,Be,n.id),ke(r,Te.Attack,e.position)),Ce(r.gameState,se.Attack,e.position,Be,e.id)}},MC={id:"human-attack-predator",sourceType:"human",targetType:"predator",maxDistance:xn,checker:(e,n,r)=>{var o;return!!(((o=e.stateMachine)==null?void 0:o[0])===bi&&e.attackTargetId===n.id&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&e.isAdult)},perform:(e,n,r)=>{let o=sf*.8;e.gender==="male"&&(o*=1.2);const a=Array.from(r.gameState.entities.entities.values()).filter(d=>d.type==="human"&&d.id!==e.id).filter(d=>{const h=d;return Math.sqrt(Math.pow(h.position.x-e.position.x,2)+Math.pow(h.position.y-e.position.y,2))<100&&h.activeAction==="attacking"&&h.attackTargetId===n.id}).length;a>0&&(o*=1+a*.2),n.hitpoints-=o;const l=$e(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),c=Tt(l,8);n.forces.push(c),e.attackCooldown=Jl,n.hitpoints<=0?(ke(r,Te.HumanDeath,n.position),Ce(r.gameState,se.Hit,n.position,Be,n.id)):(Ce(r.gameState,se.Hit,n.position,Be,n.id),n.hitpoints<n.maxHitpoints*.3&&(n.hunger+=20),ke(r,Te.Attack,e.position)),Ce(r.gameState,se.Attack,e.position,Be,e.id)}},FC={id:"prey-procreation",sourceType:"prey",targetType:"prey",maxDistance:Lt,checker:(e,n,r)=>!!(e.isAdult&&n.isAdult&&e.gender!==n.gender&&e.id!==n.id&&!e.isPregnant&&!n.isPregnant&&e.hunger<200&&n.hunger<200&&(!e.procreationCooldown||e.procreationCooldown<=0)&&(!n.procreationCooldown||n.procreationCooldown<=0)),perform:(e,n,r)=>{const o=e.gender==="female"?e:n;o.isPregnant=!0,o.gestationTime=r.gameState.ecosystem.preyGestationPeriod,e.procreationCooldown=r.gameState.ecosystem.preyProcreationCooldown,n.procreationCooldown=r.gameState.ecosystem.preyProcreationCooldown,Ce(r.gameState,se.Procreation,o.position,Be,o.id),ke(r,Te.Procreate,o.position)}},UC={id:"predator-procreation",sourceType:"predator",targetType:"predator",maxDistance:Bi,checker:(e,n,r)=>!!(e.isAdult&&n.isAdult&&e.gender!==n.gender&&e.id!==n.id&&!e.isPregnant&&!n.isPregnant&&e.hunger<200&&n.hunger<200&&(!e.procreationCooldown||e.procreationCooldown<=0)&&(!n.procreationCooldown||n.procreationCooldown<=0)),perform:(e,n,r)=>{const o=e.gender==="female"?e:n;o.isPregnant=!0,o.pregnancyFatherId=e.gender==="male"?e.id:n.id,o.gestationTime=r.gameState.ecosystem.predatorGestationPeriod,e.procreationCooldown=r.gameState.ecosystem.predatorProcreationCooldown,n.procreationCooldown=r.gameState.ecosystem.predatorProcreationCooldown,Ce(r.gameState,se.Procreation,o.position,Be,o.id),ke(r,Te.Procreate,o.position)}},HC={id:"preyChildFeeding",sourceType:"prey",targetType:"prey",maxDistance:wo,checker:(e,n)=>e.isAdult===!0&&e.gender==="female"&&e.hunger<80&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=Gl&&e.activeAction==="feeding",perform:(e,n,r)=>{e.hunger=Math.min(120,e.hunger+10),n.hunger=Math.max(0,n.hunger-Gl),e.feedChildCooldownTime=J0,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(Ce(r.gameState,se.ChildFed,n.position,Be,n.id),n.lastChildFedEffectTime=r.gameState.time),ke(r,Te.ChildFed,n.position)}},LC={id:"predatorChildFeeding",sourceType:"predator",targetType:"predator",maxDistance:wo,checker:(e,n)=>e.isAdult===!0&&e.gender==="female"&&e.hunger<90&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=Gl&&e.activeAction==="feeding",perform:(e,n,r)=>{e.hunger=Math.min(140,e.hunger+15),n.hunger=Math.max(0,n.hunger-Gl),e.feedChildCooldownTime=J0,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(Ce(r.gameState,se.ChildFed,n.position,Be,n.id),n.lastChildFedEffectTime=r.gameState.time),ke(r,Te.ChildFed,n.position)}},BC={id:"predator-eat-corpse",sourceType:"predator",targetType:"corpse",maxDistance:Bi,checker:(e,n,r)=>!!(e.isAdult&&e.hunger>30&&n.food.length>0&&(!e.eatingCooldownTime||e.eatingCooldownTime<=r.gameState.time)),perform:(e,n,r)=>{n.food.pop()&&(e.hunger=Math.max(0,e.hunger-hf),e.eatingCooldownTime=r.gameState.time+2,Ce(r.gameState,se.Eating,e.position,Be,e.id),ke(r,Te.Gather,e.position))}},GC={id:"predator-attack-rival",sourceType:"predator",targetType:"predator",maxDistance:Tn,checker:(e,n,r)=>{var o;return!!(e.isAdult&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&(e.hunger>100||n.attackTargetId===e.id||n.attackTargetId&&((o=r.gameState.entities.entities.get(n.attackTargetId))==null?void 0:o.type)==="predator"))},perform:(e,n,r)=>{let o=Q0;e.hunger>120&&(o*=1.3),n.hitpoints-=o,n.movementSlowdown={modifier:af,endTime:r.gameState.time+lf};const a=$e(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),l=Tt(a,7);n.forces.push(l),e.attackCooldown=q0,n.hitpoints<=0?(e.hunger=Math.max(0,e.hunger-hf),ke(r,Te.HumanDeath,n.position),Ce(r.gameState,se.Hit,n.position,Be,n.id)):(Ce(r.gameState,se.Hit,n.position,Be,n.id),ke(r,Te.Attack,e.position)),Ce(r.gameState,se.Attack,e.position,Be,e.id)}},xC=[_C,...PC,IC,EC,wC,NC,HC,LC,BC,DC,OC,MC,kC,GC,FC,UC];function bC(e){const{gameState:n}=e,r=n,o=Array.from(n.entities.entities.values());for(const a of xC)for(const l of o){if(a.sourceType&&l.type!==a.sourceType)continue;const c=r.search[a.targetType].byRadius(l.position,a.maxDistance);for(const d of c){if(l.id===d.id)continue;X(l.position,d.position,n.mapDimensions.width,n.mapDimensions.height)<=a.maxDistance&&a.checker(l,d,e)&&a.perform(l,d,e)}}}function zC(e){e.visualEffects=e.visualEffects.filter(n=>e.time-n.startTime<=n.duration)}function $C(e){const n=e.search.berryBush.byProperty("type","berryBush"),r=e.search.predator.byProperty("type","predator"),o=e.search.human.byProperty("type","human");for(let a=0;a<20;a++){let l;if(n.length>0&&a<15){const h=n[Math.floor(Math.random()*n.length)],g=Math.random()*2*Math.PI,m=50+Math.random()*100;l={x:Math.max(50,Math.min(Ze-50,h.position.x+Math.cos(g)*m)),y:Math.max(50,Math.min(Je-50,h.position.y+Math.sin(g)*m))}}else l={x:50+Math.random()*(Ze-100),y:50+Math.random()*(Je-100)};let c=!0;const d=100;for(const h of r)if(Math.sqrt((l.x-h.position.x)**2+(l.y-h.position.y)**2)<d){c=!1;break}if(c){for(const h of o)if(Math.sqrt((l.x-h.position.x)**2+(l.y-h.position.y)**2)<d){c=!1;break}}if(c)return l}return{x:Ze*.3+Math.random()*Ze*.4,y:Je*.3+Math.random()*Je*.4}}function WC(e){const n=e.search.prey.byProperty("type","prey"),r=e.search.human.byProperty("type","human");for(let a=0;a<15;a++){let l;if(n.length>0&&a<10){const h=n[Math.floor(Math.random()*n.length)],g=Math.random()*2*Math.PI,m=100+Math.random()*150;l={x:Math.max(50,Math.min(Ze-50,h.position.x+Math.cos(g)*m)),y:Math.max(50,Math.min(Je-50,h.position.y+Math.sin(g)*m))}}else l={x:50+Math.random()*(Ze-100),y:50+Math.random()*(Je-100)};let c=!0;const d=150;for(const h of r)if(Math.sqrt((l.x-h.position.x)**2+(l.y-h.position.y)**2)<d){c=!1;break}if(c)return l}switch(Math.floor(Math.random()*4)){case 0:return{x:Math.random()*Ze,y:50+Math.random()*100};case 1:return{x:Ze-150+Math.random()*100,y:Math.random()*Je};case 2:return{x:Math.random()*Ze,y:Je-150+Math.random()*100};default:return{x:50+Math.random()*100,y:Math.random()*Je}}}function YC(e){const n=e.search.human.byProperty("type","human"),r=e.search.berryBush.byProperty("type","berryBush");for(let o=0;o<20;o++){const a={x:50+Math.random()*(Ze-100),y:50+Math.random()*(Je-100)};let l=!0;const c=80,d=60;for(const h of n)if(Math.sqrt((a.x-h.position.x)**2+(a.y-h.position.y)**2)<c){l=!1;break}if(l){for(const h of r)if(Math.sqrt((a.x-h.position.x)**2+(a.y-h.position.y)**2)<d){l=!1;break}}if(l)return a}return{x:Math.random()*Ze,y:Math.random()*Je}}function gv(e,n=4){console.log(` Respawning ${n} prey to prevent extinction`);const r=e;for(let o=0;o<n;o++){const a=$C(r),l=o%2===0?"male":"female";Ao(e.entities,a,l,void 0,void 0,zs())}}function mv(e,n=2){console.log(` Respawning ${n} predators to prevent extinction`);const r=e;for(let o=0;o<n;o++){const a=WC(r),l=o%2===0?"male":"female";To(e.entities,a,l,void 0,void 0,$s())}}function jC(e){const n=e,r=n.search.prey.count(),o=n.search.predator.count();let a=!1;return r===0&&(gv(e,6),a=!0),o===0&&(mv(e,3),a=!0),a}function VC(e){const n=e,r=n.search.prey.count(),o=n.search.predator.count(),a=n.search.berryBush.count();let l=!1;if(r>0&&r<5){const c=Math.max(2,Math.floor(8-r));gv(e,c),l=!0}if(o>0&&o<2){const c=Math.max(1,Math.floor(3-o));mv(e,c),l=!0}if(a<5){console.log(` Boosting bush count from ${a} to help ecosystem`);for(let c=0;c<5;c++){const d=YC(n);Ks(e.entities,d,e.time)}l=!0}return l}const XC=1,KC=.3,QC=.8,Dm=.8,qC=.99,ZC=.05;var vv=(e=>(e[e.INCREASE_PREY_GESTATION=0]="INCREASE_PREY_GESTATION",e[e.DECREASE_PREY_GESTATION=1]="DECREASE_PREY_GESTATION",e[e.INCREASE_PREY_PROCREATION_COOLDOWN=2]="INCREASE_PREY_PROCREATION_COOLDOWN",e[e.DECREASE_PREY_PROCREATION_COOLDOWN=3]="DECREASE_PREY_PROCREATION_COOLDOWN",e[e.INCREASE_PREY_HUNGER=4]="INCREASE_PREY_HUNGER",e[e.DECREASE_PREY_HUNGER=5]="DECREASE_PREY_HUNGER",e[e.INCREASE_PREDATOR_GESTATION=6]="INCREASE_PREDATOR_GESTATION",e[e.DECREASE_PREDATOR_GESTATION=7]="DECREASE_PREDATOR_GESTATION",e[e.INCREASE_PREDATOR_PROCREATION_COOLDOWN=8]="INCREASE_PREDATOR_PROCREATION_COOLDOWN",e[e.DECREASE_PREDATOR_PROCREATION_COOLDOWN=9]="DECREASE_PREDATOR_PROCREATION_COOLDOWN",e[e.INCREASE_PREDATOR_HUNGER=10]="INCREASE_PREDATOR_HUNGER",e[e.DECREASE_PREDATOR_HUNGER=11]="DECREASE_PREDATOR_HUNGER",e[e.INCREASE_BUSH_SPREAD=12]="INCREASE_BUSH_SPREAD",e[e.DECREASE_BUSH_SPREAD=13]="DECREASE_BUSH_SPREAD",e[e.NO_ACTION=14]="NO_ACTION",e))(vv||{});const Cd=Object.keys(vv).length/2;class JC{constructor(){me(this,"qTable",new Map);me(this,"epsilon",Dm);me(this,"lastState",null);me(this,"lastAction",null)}discretizeState(n,r,o){const a=Math.min(4,Math.floor(n/25)),l=Math.min(4,Math.floor(r/5)),c=Math.min(4,Math.floor(o/15));return`${a}-${l}-${c}`}getQValue(n,r){return this.qTable.has(n)||this.qTable.set(n,new Map),this.qTable.get(n).get(r)||0}setQValue(n,r,o){this.qTable.has(n)||this.qTable.set(n,new Map),this.qTable.get(n).set(r,o)}getBestAction(n){let r=0,o=this.getQValue(n,0);for(let a=1;a<Cd;a++){const l=this.getQValue(n,a);l>o&&(o=l,r=a)}return r}chooseAction(n){return Math.random()<this.epsilon?Math.floor(Math.random()*Cd):this.getBestAction(n)}applyEmergencyCorrections(n,r,o,a){n<ti*.5&&(a.ecosystem.preyGestationPeriod=Math.max(io,a.ecosystem.preyGestationPeriod*.8),a.ecosystem.preyProcreationCooldown=Math.max(ro,a.ecosystem.preyProcreationCooldown*.8),a.ecosystem.preyHungerIncreasePerHour=Math.max(ao,a.ecosystem.preyHungerIncreasePerHour*.9)),r<ni*.6&&(a.ecosystem.predatorGestationPeriod=Math.max(oo,a.ecosystem.predatorGestationPeriod*.75),a.ecosystem.predatorProcreationCooldown=Math.max(so,a.ecosystem.predatorProcreationCooldown*.75),a.ecosystem.predatorHungerIncreasePerHour=Math.max(lo,a.ecosystem.predatorHungerIncreasePerHour*.85)),o<ii*.5&&(a.ecosystem.berryBushSpreadChance=Math.min(As,a.ecosystem.berryBushSpreadChance*1.2)),n>ti*1.4&&(a.ecosystem.preyHungerIncreasePerHour=Math.min(Ui,a.ecosystem.preyHungerIncreasePerHour*1.05)),r>ni*1.4&&(a.ecosystem.predatorHungerIncreasePerHour=Math.min(Hi,a.ecosystem.predatorHungerIncreasePerHour*1.05)),o>ii*1.4&&(a.ecosystem.berryBushSpreadChance=Math.max(ri,a.ecosystem.berryBushSpreadChance*.95))}calculateReward(n,r,o){const a=Math.abs(n-ti),l=Math.abs(r-ni),c=Math.abs(o-ii),d=a/ti,h=l/ni,g=c/ii,m=d+h+g;return 100*Math.exp(-m*2)-50}applyAction(n,r){switch(n){case 0:r.ecosystem.preyGestationPeriod=Math.min(fr,r.ecosystem.preyGestationPeriod+.2*(fr-io));break;case 1:r.ecosystem.preyGestationPeriod=Math.max(io,r.ecosystem.preyGestationPeriod-.2*(fr-io));break;case 2:r.ecosystem.preyProcreationCooldown=Math.min(hr,r.ecosystem.preyProcreationCooldown+.2*(hr-ro));break;case 3:r.ecosystem.preyProcreationCooldown=Math.max(ro,r.ecosystem.preyProcreationCooldown-.2*(hr-ro));break;case 4:r.ecosystem.preyHungerIncreasePerHour=Math.min(Ui,r.ecosystem.preyHungerIncreasePerHour+.2*(Ui-ao));break;case 5:r.ecosystem.preyHungerIncreasePerHour=Math.max(ao,r.ecosystem.preyHungerIncreasePerHour-.2*(Ui-ao));break;case 6:r.ecosystem.predatorGestationPeriod=Math.min(pr,r.ecosystem.predatorGestationPeriod+.2*(pr-oo));break;case 7:r.ecosystem.predatorGestationPeriod=Math.max(oo,r.ecosystem.predatorGestationPeriod-.2*(pr-oo));break;case 8:r.ecosystem.predatorProcreationCooldown=Math.min(gr,r.ecosystem.predatorProcreationCooldown+.2*(gr-so));break;case 9:r.ecosystem.predatorProcreationCooldown=Math.max(so,r.ecosystem.predatorProcreationCooldown-.2*(gr-so));break;case 10:r.ecosystem.predatorHungerIncreasePerHour=Math.min(Hi,r.ecosystem.predatorHungerIncreasePerHour+.2*(Hi-lo));break;case 11:r.ecosystem.predatorHungerIncreasePerHour=Math.max(lo,r.ecosystem.predatorHungerIncreasePerHour-.2*(Hi-lo));break;case 12:r.ecosystem.berryBushSpreadChance=Math.min(As,r.ecosystem.berryBushSpreadChance+.2*(As-ri));break;case 13:r.ecosystem.berryBushSpreadChance=Math.max(ri,r.ecosystem.berryBushSpreadChance-.2*(As-ri));break}}updateQTable(n,r,o,a){const l=this.getQValue(n,r),c=Math.max(...Array.from({length:Cd},(h,g)=>this.getQValue(a,g))),d=l+KC*(o+QC*c-l);this.setQValue(n,r,d)}step(n){const r=n,o=r.search.prey.count(),a=r.search.predator.count(),l=r.search.berryBush.count();this.applyEmergencyCorrections(o,a,l,n);const c=this.discretizeState(o,a,l);if(this.lastState!==null&&this.lastAction!==null){const h=this.calculateReward(o,a,l);this.updateQTable(this.lastState,this.lastAction,h,c)}const d=this.chooseAction(c);this.applyAction(d,n),this.epsilon=Math.max(ZC,this.epsilon*qC),this.lastState=c,this.lastAction=d}reset(){this.qTable.clear(),this.epsilon=Dm,this.lastState=null,this.lastAction=null}getStats(){return{qTableSize:this.qTable.size,explorationRate:this.epsilon}}}let yv=new JC;function e1(e){jC(e),VC(e),e.ecosystem.lastUpdateTime||(e.ecosystem.preyGestationPeriod=io+(fr-io)*.3,e.ecosystem.preyProcreationCooldown=ro+(hr-ro)*.3,e.ecosystem.preyHungerIncreasePerHour=ao+(Ui-ao)*.3,e.ecosystem.predatorGestationPeriod=oo+(pr-oo)*.3,e.ecosystem.predatorProcreationCooldown=so+(gr-so)*.3,e.ecosystem.predatorHungerIncreasePerHour=lo+(Hi-lo)*.3,e.ecosystem.berryBushSpreadChance=ri+(As-ri)*.7),yv.step(e)}function t1(e){e.ecosystem.lastUpdateTime||(e.ecosystem.lastUpdateTime=0),!(e.time-e.ecosystem.lastUpdateTime<XC)&&(e.ecosystem.lastUpdateTime=e.time,e1(e))}function n1(){return yv.getStats()}const i1=1/60;function r1(e,n){const r=Et(e);r&&(e.viewportCenter=pf(e.viewportCenter,r.position,tf*n))}function o1(e){for(const r of e.entities.entities.values())r.isHighlighted=!1;const n=e.notifications.filter(r=>!r.isDismissed);for(const r of n)if(r.highlightedEntityIds)for(const o of r.highlightedEntityIds){const a=e.entities.entities.get(o);a&&(a.isHighlighted=!0)}}function ou(e,n){if(e.isPaused)return e;for(;n>0;){const r=Pf(e),o=Math.min(n,i1);if(r.gameOver)return r;const a=o*(Vt/Xt);r.time+=a,r1(r,o),lw(r),t1(r),o1(r),iC({gameState:r,deltaTime:o}),bC({gameState:r,deltaTime:o}),zC(r),hC(r,o),e=r,n-=o}return e}function Om(e,n,r){e.save();const{x:o,y:a,width:l,height:c}=n.rect,d=RI;if(e.beginPath(),e.moveTo(o+d,a),e.lineTo(o+l-d,a),e.quadraticCurveTo(o+l,a,o+l,a+d),e.lineTo(o+l,a+c-d),e.quadraticCurveTo(o+l,a+c,o+l-d,a+c),e.lineTo(o+d,a+c),e.quadraticCurveTo(o,a+c,o,a+c-d),e.lineTo(o,a+d),e.quadraticCurveTo(o,a,o+d,a),e.closePath(),e.fillStyle=n.isDisabled?PI:n.backgroundColor,e.fill(),n.activated){e.save();const h=(Math.sin(Date.now()/1e3*FI)+1)/2;e.strokeStyle=MI,e.lineWidth=2+h*2,e.globalAlpha=.7+h*.3,e.stroke(),e.restore()}if(n.lastActivated){const h=Date.now()-n.lastActivated;if(h<im){const g=1-h/im;e.fillStyle=DI,e.globalAlpha=g,e.fill(),e.globalAlpha=1}}r&&!n.isDisabled&&(e.fillStyle=G0,e.globalAlpha=.5,e.fill(),e.globalAlpha=1),e.fillStyle=n.isDisabled?NI:n.textColor,n.icon?(e.font=`${c*.55}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(n.icon,o+l/2,a+c/2),n.text&&(e.font=`${c*.18}px "Press Start 2P", Arial`,e.textAlign="right",e.textBaseline="bottom",e.fillText(n.text,o+l-4,a+c-2))):(e.textAlign="center",e.textBaseline="middle",e.fillText(n.text,o+l/2,a+c/2)),e.restore()}function s1(e,n,r,o){e.save(),e.font=`${rm}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="bottom";const l=e.measureText(r).width,c=rm,d=l+om*2,h=c+om*2,g=o.x-d/2,m=e.canvas.height,y=n.y<m/2?n.y+n.height-sm:n.y-h+sm;e.fillStyle=OI,e.fillRect(g,y,d,h),e.fillStyle=kI,e.fillText(r,o.x,y+h/2+c/2),e.restore()}function a1(e,n,r){e.save();const o=Et(n),a=[{id:"fastForwardButton",action:Ue.FastForward,text:"FFWD [T]",currentWidth:to*1.3,backgroundColor:dl,textColor:no,tooltip:"Fast-forward time",rect:{x:0,y:0,width:0,height:0}},{id:"pauseButton",action:Ue.TogglePause,text:n.isPaused?"UN[P]AUSE":"[P]AUSE",backgroundColor:n.isPaused?ad:dl,currentWidth:n.isPaused?to*1.4:to*1.1,tooltip:n.isPaused?"Resume Game":"Pause Game",rect:{x:0,y:0,width:0,height:0},textColor:no},{id:"muteButton",action:Ue.ToggleMute,text:n.isMuted?"UN[M]UTE":"[M]UTE",backgroundColor:n.isMuted?ad:dl,tooltip:`Toggle Sound (${n.isMuted?"Muted":"Enabled"})`,currentWidth:to,rect:{x:0,y:0,width:0,height:0},textColor:no}];if(n.uiButtons.push(...a),o){const g=Ef(n,o),m=new Set(g.map(H=>H.type));let y=[{playerAction:Ee.Gather,buttonAction:Ue.CommandGather,shortcut:"E",name:"Gather",toggleKey:"gathering",condition:()=>o.isAdult===!0},{playerAction:Ee.Eat,buttonAction:Ue.CommandEat,shortcut:"F",name:"Eat"},{playerAction:Ee.Plant,buttonAction:Ue.CommandPlant,shortcut:"B",name:"Plant",toggleKey:"planting",condition:()=>o.isAdult===!0},{playerAction:Ee.Procreate,buttonAction:Ue.ToggleProcreationBehavior,shortcut:"R",name:"Procreation",toggleKey:"procreation",condition:()=>o.isAdult===!0},{playerAction:Ee.FeedChild,buttonAction:Ue.ToggleFeedChildBehavior,shortcut:"H",name:"Feed Child",toggleKey:"feedChildren",condition:()=>o.isAdult===!0},{playerAction:Ee.Attack,buttonAction:Ue.ToggleAttackBehavior,shortcut:"Q",name:"Attack",toggleKey:"attack",condition:()=>o.isAdult===!0},{playerAction:Ee.FollowMe,buttonAction:Ue.CommandFollowMe,shortcut:"C",name:"Follow Me",toggleKey:"followLeader",condition:()=>o.isAdult===!0},{playerAction:Ee.CallToAttack,buttonAction:Ue.CommandCallToAttack,shortcut:"V",name:"Call to Attack",condition:()=>o.isAdult===!0},{playerAction:Ee.TribeSplit,buttonAction:Ue.CommandTribeSplit,shortcut:"K",name:"Split Tribe",condition:()=>o.leaderId!==void 0&&o.leaderId!==o.id&&o.isAdult===!0}];y=y.filter(H=>H.condition?H.condition():!0);const S=1,w=y.length,P=w*ir+(w-1)*hl,_=S*ir+(S-1)*hl,T=(r-P)/2,U=e.canvas.height-_-20;y.forEach((H,D)=>{const x=D%w,W=Math.floor(D/w),F=T+x*(ir+hl),Y=U+W*(ir+hl),ue=!!H.toggleKey,we=ue&&n.autopilotControls.behaviors[H.toggleKey],_e=!m.has(H.playerAction),xe=!n.hasPlayerEnabledAutopilot||n.hasPlayerEnabledAutopilot<3?" (Press Shift to toggle Auto)":"",De=ue?`${H.name}${xe}`:H.name,Ie=we?ad:dl,le={id:`commandButton_${H.name}`,action:H.buttonAction,rect:{x:F,y:Y,width:ir,height:ir},icon:iu[H.playerAction],text:H.shortcut,backgroundColor:Ie,textColor:no,currentWidth:ir,tooltip:De,isDisabled:_e,activated:we};n.uiButtons.push(le)})}let l=r-Yt;a.forEach(g=>{const m=Yt,y=l-g.currentWidth;g.rect={x:y,y:m,width:g.currentWidth,height:_I},Om(e,g,n.hoveredButtonId===g.id),l-=g.currentWidth+CI});let c=null;n.uiButtons.filter(g=>g.id.startsWith("commandButton_")).forEach(g=>{c||(c={x:g.rect.x,y:g.rect.y,width:g.rect.width,height:g.rect.height}),c.x=Math.min(c.x,g.rect.x),c.y=Math.min(c.y,g.rect.y),c.width=Math.max(c.width,g.rect.x+g.rect.width-c.x),c.height=Math.max(c.height,g.rect.y+g.rect.height-c.y),Om(e,g,n.hoveredButtonId===g.id)});const h=n.hoveredButtonId?n.uiButtons.find(g=>g.id===n.hoveredButtonId):void 0;return h&&h.tooltip&&n.mousePosition&&s1(e,h.rect,h.tooltip,n.mousePosition),e.restore(),{commandButtonsRect:c}}function l1(e){e.save(),e.fillStyle=YI,e.fillRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle=jI,e.font=`${VI}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("PAUSED",e.canvas.width/2,e.canvas.height/2),e.restore()}function km(e,n,r,o){const a=n.x-r.width/2,l=n.y-r.height/2,c=a+e.x,d=l+e.y,h=(c%o.width+o.width)%o.width,g=(d%o.height+o.height)%o.height;return{x:h,y:g}}function Nf(e,n,r,o){let a=e.x-n.x,l=e.y-n.y;return Math.abs(a)>o.width/2&&(a=a-Math.sign(a)*o.width),Math.abs(l)>o.height/2&&(l=l-Math.sign(l)*o.height),{x:a+r.width/2,y:l+r.height/2}}function An(e,n,r,o,a,...l){const c={...a.position};for(let d=-r;d<=r;d+=r)for(let h=-n;h<=n;h+=n)a.position.x=c.x+h,a.position.y=c.y+d,o(e,a,...l);a.position=c}const u1=25,c1=0,Mm=28;function Sv(e,n,r,o,a,l,c,d,h,g){e.save();const{x:m,y}=Nf(n,c,{width:d,height:h},g);e.strokeStyle=o,e.lineWidth=l,e.setLineDash(a),e.beginPath(),e.arc(m,y,r+tu,0,2*Math.PI),e.stroke(),e.restore()}function d1(e,n,r,o,a,l,c){if(n=n.filter(y=>y.type!==Ee.FollowMe),n.length===0)return;e.save(),n.forEach(y=>{y.targetEntity&&Sv(e,y.targetEntity.position,y.targetEntity.radius,cf,df,2,o,a,l,c)}),e.font=`${vo}px "Press Start 2P", Arial`,e.fillStyle="white",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=5;const{x:d,y:h}=Nf(r.position,o,{width:a,height:l},c);let g=0,m={};n.forEach(y=>{const S=iu[y.type];if(y.targetEntity){m[y.targetEntity.id]=(m[y.targetEntity.id]||0)+1;const w=y.targetEntity.position.x-o.x+a/2,P=y.targetEntity.position.y-o.y+l/2,_=`${S}${y.key.toUpperCase()}`,T=P-y.targetEntity.radius-tu-vo/2-(m[y.targetEntity.id]-1)*Mm;e.fillText(_,w,T)}else{e.textAlign="left";const w=`${S}${y.key.toUpperCase()}`,P=d+u1,T=h+c1+g*Mm;e.fillText(w,P,T),g++,e.textAlign="center"}}),e.restore()}const pe=(e,n,r,o,a,l,c)=>{l==="transparent"||o<=0||a<=0||(e.fillStyle=l,e.fillRect(Math.floor(n*c),Math.floor(r*c),Math.ceil(o*c),Math.ceil(a*c)))},Fm=10,Um=10,Ln=6,Zn=4,wl=2,f1=5,dn=4,h1=2,Pt=4,p1=2,qe=3,Xr=2,Mi=0,Ds=Mi+Zn-1,kt=Ds,st=Ds+dn-1,g1="rgba(0, 0, 0, 0.4)",m1=4,v1=1,Df={name:"tribe-human-2d",referenceImage:"swos.png",description:`A 2D human character asset for the Tribe game. This includes ensuring that the unique animations for stances like 'eat' and 'procreate' do not erroneously appear in other stances, such as 'walk', which was observed in the provided rendered media. The 'idle' animation was updated to a leg sway to better match the provided video for that stance, replacing a simpler body bob.

# Visual style

Human characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like people from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the character to give it a sense of depth.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 1 and 60, with 20 being the average age.
- gender: 
  - The male characters should have only pants, while female cover their breasts with a top. The clothing should be simple and muted, reflecting a stone-age style.
  - Female characters should have long hair, while male should have short hair and beard.
  - Male characters should have a more robust, muscular build
  - Female characters should have thinner arms and legs, with a more pronounced waist and hips.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'gathering': The character is gathering food from berry bushes, with arms reaching out and a slight bend at the knees.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or dust particles to indicate movement.
- 'attacking': The character performs an attack animation, with arms raised and a forward motion.
- 'defending': The character takes a defensive stance, with arms raised and a slight bend at the knees.
- 'stunned': The character is stunned and laying on the ground, with limbs relaxed and a neutral expression.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a skeleton over time.

`,stances:["idle","walk","gathering","eat","procreate","dead","attacking","defending","stunned"],render(e,n,r,o,a,l,c,d="male",h=20,g=[1,0],m=!1,y=0){const S=["dead","stunned"].includes(c),w=S?Um+4:Fm,P=S?Fm+4:Um+qe,_=.15,T=Math.min(o*(1-2*_)/w,a*(1-2*_)/P),U=w*T,H=P*T,D=n+(o-U)/2,x=r+(a-H)/2;e.save(),g[0]<0&&!S?(e.translate(D+U,x),e.scale(-1,1)):e.translate(D,x);const F="#D09A5A",Y=h>50?"#BDBDBD":"#281808",ue="#7F5C4A",we="#6B4F3A",_e="#E0D8C0",xe="#A0522D",De=1-Math.max(0,Math.min(100,y))/100*.2,Ie=d==="male"?1.1:.9,le=.8+(Math.max(1,Math.min(h,60))-1)/59*.2;let Fe=f1*De*Ie*le,ye=h1*De*Ie*le,J=p1*De*le;m&&d==="female"&&(Fe*=1.5);const b=Math.round((w-Fe)/2),j=Math.round((w-Ln)/2),z=b-ye,C=b+Fe,M=1,V=b+(Fe/2-M/2)-J,ee=b+(Fe/2+M/2),he=g[1]<-.2&&Math.abs(g[0])<.7,re=K=>{e.fillStyle=g1,e.beginPath();const te=w/2,Oe=K;e.ellipse(Math.floor(te*T),Math.floor(Oe*T),Math.max(1,Math.floor(m1*T)),Math.max(1,Math.floor(v1*T)),0,0,2*Math.PI),e.fill()},Se=(K,te)=>{d==="male"?(pe(e,b,Ds+K,Fe,dn-Xr,te,T),pe(e,b,Ds+dn-Xr+K,Fe,Xr,ue,T)):pe(e,b,Ds+K,Fe,dn,we,T)},ve=(K,te)=>{he?pe(e,j,Mi+K,Ln,Zn,Y,T):(pe(e,j,Mi+K,Ln,Zn,te,T),pe(e,j,Mi+K,Ln,wl,Y,T),d==="female"?(pe(e,j-1,Mi+wl+K,1,Zn,Y,T),pe(e,j+Ln,Mi+wl+K,1,Zn,Y,T)):pe(e,j+1,Mi+2+K,Ln-2,Zn-2,Y,T))};switch(c){case"idle":{const K=l*Math.PI*2,te=Math.sin(K)*.5,ce=(Math.cos(K*2)+1)*.25;re(st+qe+1),pe(e,V+te,st+ce,J,qe,F,T),pe(e,ee-te,st+ce,J,qe,F,T),Se(ce,F),pe(e,z,kt+ce,ye,Pt,F,T),pe(e,C,kt+ce,ye,Pt,F,T),ve(ce,F);break}case"walk":{const K=l*Math.PI*2,te=Math.sin(K)*2,ce=Math.abs(Math.cos(K))*1;re(st+qe+1),pe(e,V+te,st+ce,J,qe,F,T),pe(e,ee-te,st+ce,J,qe,F,T),Se(ce,F),pe(e,z-te,kt+ce,ye,Pt,F,T),pe(e,C+te,kt+ce,ye,Pt,F,T),ve(ce,F);break}case"gathering":{const K=l*Math.PI*2,te=1,Oe=(Math.sin(K)+1)/2*2,ce=te+Math.abs(Math.cos(K))*.5;re(st+qe+1),pe(e,V,st+ce,J,qe-te,F,T),pe(e,ee,st+ce,J,qe-te,F,T),Se(ce,F),pe(e,z+1,kt+ce-Oe,ye,Pt,F,T),pe(e,C-1,kt+ce-Oe,ye,Pt,F,T),ve(ce,F);break}case"eat":{re(st+qe+1),pe(e,V,st+1,J,qe-1,F,T),pe(e,ee,st+1,J,qe-1,F,T),Se(1,F);const Oe=(Math.sin(l*Math.PI*4)+1)/2,ce=j+Ln/2,Cn=Mi+Zn/2,Ke=C+(ce-C)*Oe,Ye=kt+1+(Cn-(kt+1))*Oe;pe(e,z,kt+1,ye,Pt,F,T),pe(e,Ke,Ye,ye,Pt,F,T),pe(e,Ke,Ye-1,1,1,xe,T),ve(1,F);break}case"procreate":{const K=(Math.sin(l*Math.PI*8)+1)/4,te=(Math.sin(l*Math.PI*6)+1)*.5,Oe=1.5,ce=Oe-te;re(st+qe+1),pe(e,V,st+ce,J,qe-Oe,F,T),pe(e,ee,st+ce,J,qe-Oe,F,T),Se(ce,F),pe(e,z,kt+ce,ye,Pt,F,T),pe(e,C,kt+ce,ye,Pt,F,T),ve(ce,F),e.globalAlpha=K,Se(ce,"white"),e.globalAlpha=1;break}case"attacking":{const K=Math.sin(l*Math.PI)*1.5,te=Math.abs(Math.sin(l*Math.PI));re(st+qe+1),pe(e,V-K,st+te,J,qe,F,T),pe(e,ee+K*.5,st+te,J,qe,F,T),Se(te,F),pe(e,z,kt+te-2,ye,Pt,F,T),pe(e,C,kt+te-2.5,ye,Pt,F,T),ve(te,F);break}case"defending":{re(st+qe+1),pe(e,V,st+1,J,qe-1,F,T),pe(e,ee,st+1,J,qe-1,F,T),Se(1,F),pe(e,z-1,kt+1-1,ye,Pt,F,T),pe(e,C+1,kt+1-1,ye,Pt,F,T),ve(1,F);break}case"stunned":case"dead":{const K=c==="dead",te=K?Math.min(1,l):0,Oe=te>.5?_e:F,ce=d==="male"?ue:we,Cn=te>.8?"transparent":Y,Ke=w/2,Ye=P/2,Rn=2;re(P-1),pe(e,Ke-J-Rn,Ye,J,qe,Oe,T),pe(e,Ke+Rn,Ye,J,qe,Oe,T),pe(e,Ke-ye-Rn,Ye-dn+1,ye,Pt,Oe,T),pe(e,Ke+Rn,Ye-dn+1,ye,Pt,Oe,T);const Bt=Ke-Fe/2,nn=Ye-dn/2;d==="male"?(te<.7&&pe(e,Bt,nn+dn-Xr,Fe,Xr,ce,T),pe(e,Bt,nn,Fe,dn-Xr,Oe,T)):te<.7?pe(e,Bt,nn,Fe,dn,ce,T):pe(e,Bt,nn,Fe,dn,Oe,T);const Pn=Ke-Ln/2,Nn=Ye-dn/2-Zn+1;if(pe(e,Pn,Nn,Ln,Zn,Oe,T),Cn!=="transparent"&&pe(e,Pn,Nn,Ln,wl,Cn,T),K&&te>.6){const ai="#B0A890";for(let zi=0;zi<3;zi++)pe(e,Bt+1,nn+zi*1+1,Fe-2,.5,ai,T)}break}default:pe(e,0,0,w,P,"magenta",T);break}e.restore()}};function y1(e,n,r,o,a){const l=n.x,c=n.y-r-o/2;e.save(),e.fillStyle=a,e.strokeStyle=a,e.lineWidth=1.5,e.beginPath(),e.rect(l-o/2,c,o,o/2),e.fill(),e.beginPath(),e.moveTo(l-o/2,c),e.lineTo(l-o/4,c-o/3),e.lineTo(l-o/6,c),e.moveTo(l-o/6,c),e.lineTo(l,c-o/2),e.lineTo(l+o/6,c),e.moveTo(l+o/6,c),e.lineTo(l+o/4,c-o/3),e.lineTo(l+o/2,c),e.stroke(),e.restore()}function Ys(e,n,r,o,a,l=!1,c=!1,d=!1,h=!1){o<nf&&(r=r*.75),Df.render(e,n.x-r/2,n.y-r/2,r,r,0,"idle",a,o,[0,0],!1,0);let g,m;l?(g=mI,m=uf):c?(g=vI,m=L0):d?(g=yI,m=H0):h&&(g=SI,m=U0),g&&m&&y1(e,n,r/2,g,m)}function S1(e,n,r,o,a,l){if(e.save(),o.length===0){e.restore();return}const c=o.length*a,d=4;let h;const g=c+(o.length-1)*d;o.length>1&&g>l?h=(l-c)/(o.length-1):h=d,o.length<=1&&(h=0);for(let m=0;m<o.length;m++){const{member:y,isPlayer:S,isHeir:w,isPartner:P,isParent:_}=o[m],T=n+m*(a+h)+a/2,U=r+a/4;Ys(e,{x:T,y:U},a,y.age,y.gender,S,w,P,_)}e.restore()}function A1(e,n,r,o,a){if(r.length===0)return;e.save();const l=Un,c=" 00",d=" 00";e.font=`${od}px "Press Start 2P", Arial`;const h=e.measureText(c).width,g=e.measureText(d).width,m=Un+cn+Un+cn+Un+Pi+h+Un/2+Pi+g,y=r.length*cl+(r.length-1)*tm,S=a-y-Un;e.fillStyle=TI,e.fillRect(l,S,m,y);for(let w=0;w<r.length;w++){const P=r[w],_=S+w*(cl+tm),T=_+cl/2;P.isPlayerTribe&&(e.fillStyle=AI,e.fillRect(l,_,m,cl));let U=l+Un;if(e.font=`${cn}px "Press Start 2P", Arial`,e.textBaseline="middle",e.textAlign="left",e.fillText(P.tribeBadge,U,T-cn/4),U+=cn+Un,!P.isPlayerTribe){const H=P.diplomacyStatus===Ht.Friendly?"":"",D=`diplomacyButton_${P.leaderId}`,x={x:U,y:T-cn/2,width:cn,height:cn},W={id:D,action:Ue.ToggleDiplomacy,rect:x,text:"",icon:H,backgroundColor:"transparent",textColor:"white",currentWidth:cn,tooltip:`Toggle diplomacy with this tribe (Currently: ${P.diplomacyStatus})`,targetTribeId:P.leaderId};n.uiButtons.push(W),n.hoveredButtonId===D&&(e.fillStyle=G0,e.globalAlpha=.5,e.fillRect(x.x,x.y,x.width,x.height),e.globalAlpha=1),e.font=`${cn*.8}px "Press Start 2P", Arial`,e.textBaseline="middle",e.textAlign="center",e.fillText(H,U+cn/2,T)}U+=cn+Un,P.adultCount>0&&(Ys(e,{x:U+Pi/2,y:T},Pi,25,"male"),U+=Pi/2,e.font=`${od}px "Press Start 2P", Arial`,e.fillStyle="white",e.textBaseline="middle",e.textAlign="left",e.fillText(` ${P.adultCount}`,U,T),U+=e.measureText(` ${P.adultCount}`).width+Un/2),P.childCount>0&&(Ys(e,{x:U+Pi/2,y:T},Pi,1,"female"),U+=Pi/2,e.font=`${od}px "Press Start 2P", Arial`,e.fillStyle="white",e.textBaseline="middle",e.textAlign="left",e.fillText(` ${P.childCount}`,U,T))}e.restore()}function T1(e,n,r,o,a){const l=$0,c=W0,d=n+o-l-c,h=r+c;e.save(),e.lineWidth=2,e.strokeStyle=a?iE:nE,e.beginPath();const g=5;e.moveTo(d+g,h+g),e.lineTo(d+l-g,h+l-g),e.moveTo(d+l-g,h+g),e.lineTo(d+g,h+l-g),e.stroke(),e.restore()}function I1(e,n,r,o){const{tutorialState:a,tutorial:l}=n;if(a.transitionState===Ft.INACTIVE)return;const c=l.steps[a.currentStepIndex];if(!c)return;e.save(),e.globalAlpha=a.transitionAlpha;const d=XI,h=KI,g=QI,m=`${ud}px "Press Start 2P", Arial`,y=`${cm}px "Press Start 2P", Arial`,S=ZI,w=cm*1.5;e.font=y;const P=c.text.split(" ");let _="";const T=[];for(let _e=0;_e<P.length;_e++){const xe=_+P[_e]+" ";e.measureText(xe).width>d-h*2&&_e>0?(T.push(_),_=P[_e]+" "):_=xe}T.push(_);const U=h*2+ud+h/2+T.length*w,H=(r-d)/2,D=o-U-160;e.fillStyle=qI,e.beginPath(),e.moveTo(H+g,D),e.lineTo(H+d-g,D),e.quadraticCurveTo(H+d,D,H+d,D+g),e.lineTo(H+d,D+U-g),e.quadraticCurveTo(H+d,D+U,H+d-g,D+U),e.lineTo(H+g,D+U),e.quadraticCurveTo(H,D+U,H,D+U-g),e.lineTo(H,D+g),e.quadraticCurveTo(H,D,H+g,D),e.closePath(),e.fill(),e.fillStyle=S,e.textAlign="center",e.textBaseline="top",e.font=m,e.fillText(c.title,H+d/2,D+h),e.font=y;let x=D+h+ud+h/2;for(const _e of T)e.fillText(_e,H+d/2,x),x+=w;const W=n.hoveredButtonId==="tutorial-dismiss";T1(e,H,D,d,W),e.restore();const F=$0,Y=W0,ue=H+d-F-Y,we=D+Y;return{x:ue,y:we,width:F,height:F}}function Rd(e,n,r){e.save();const o=tE,a={x:n.x-o,y:n.y-o,width:n.width+o*2,height:n.height+o*2};e.strokeStyle=b0,e.lineWidth=z0+Math.sin(r*ff)*1.5,e.setLineDash([8,8]),e.strokeRect(a.x,a.y,a.width,a.height),e.restore()}function E1(e,n){e.fillStyle="white",e.font='30px "Press Start 2P", Arial',e.textAlign="center",e.fillText("Game Over!",e.canvas.width/2,e.canvas.height/2-60),e.font='20px "Press Start 2P", Arial',e.fillText("Lineage Extinct.",e.canvas.width/2,e.canvas.height/2-20),e.fillText(`Cause: ${n.causeOfGameOver||"Unknown"}`,e.canvas.width/2,e.canvas.height/2+20)}const Vd=10,w1=3,Hm=Vd*.7;function _1(e,n,r,o,a){const{position:l,food:c,maxFood:d,ownerId:h,claimedUntil:g}=n;if(e.beginPath(),e.arc(l.x,l.y,Vd,0,Math.PI*2),e.fillStyle="#228B22",e.fill(),e.strokeStyle="#006400",e.lineWidth=1,e.stroke(),h&&g&&g>a&&o){const m=r.entities.entities.get(h);if(m){let y;m.id===o.id?y=uf:nv(o,m,r)?y=nI:y=B0,y&&(e.strokeStyle=y,e.lineWidth=1+Math.sin(a*2)*.5,e.beginPath(),e.arc(l.x,l.y,Vd+2,0,Math.PI*2),e.stroke())}}if(c.length>0){const m=Math.PI*2/Math.min(c.length,d);for(let y=0;y<c.length;y++){const S=y*m,w=l.x+Hm*Math.cos(S),P=l.y+Hm*Math.sin(S);e.beginPath(),e.arc(w,P,w1,0,Math.PI*2),e.fillStyle="#FF0000",e.fill()}}}const Lm=(e,n,r=70,o=50)=>{const a=e>>n&255;return`hsl(${Math.floor(a/255*360)}, ${r}%, ${o}%)`},C1=(e,n)=>{const r=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(!r)return e;const[o,a,l]=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])];return`hsl(${o}, ${a}%, ${Math.max(0,l-n)}%)`},_l=(e,n,r,o,a,l,c,d=!1)=>{e.save(),e.translate(n,r),e.rotate(l),e.fillStyle=d?C1(c,15):c,e.beginPath(),e.roundRect(-o/2,0,o,a,o/2),e.fill(),e.restore()},Pd=(e,n)=>{const r=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/),o=75;if(!r)return`hsl(0, 0%, ${o}%)`;const[,a,l,c]=r.map(Number),d=l*(1-n),h=c+(o-c)*n;return`hsl(${a}, ${d}%, ${h}%)`},Av={name:"tribe-prey-2d",referenceImage:"swos.png",description:`A 2D prey asset for the Tribe game, featuring various stances and animations.

Prey is an animal which can be hunted by predators or humans in the Tribe game.

Preys look like small 4 leg mammals, with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Visual style

Prey characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like creatures from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in away that conveys their actions clearly.

Prey walks on all fours, unlike human (two legs).

Each prey is described by a unique gene code, which is a number that defines its appearance, size, and other characteristics. The gene code is used to generate the character's appearance, including body proportions, color, and other visual features. The gene code is a 32-bit integer, with each bit representing a specific characteristic of the character.

Prey should have should have visible body parts, such as head, torso, arms, and legs. The body parts should be connected and should not overlap. The character's body parts should be simple shapes, such as circles and rectangles, with solid colors and no gradients or patterns.

Preys are supposed to be sympathetic and friendly, so the character's face should have a friendly expression, with a smile and bright eyes. The character's eyes should be large and expressive, with a simple design.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the a character to give it a sense of depth.

IMPORTANT: The character is visible from the side, just like in Sensible Soccer.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 0 and 12, with 2 being the average age.
- gender:
  - 'male': Male prey are larger and more robust, with a more pronounced musculature.
  - 'female': Female prey are smaller and more agile, with a leaner build.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or a dust particles to indicate movement.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a grey skeleton over time. The character pose and body parts should not be animated in this stance, as the character is dead so it should not move.`,stances:["idle","walk","eat","dead","procreate"],render(e,n,r,o,a,l,c,d={gender:"male",age:2,direction:[1,0],isPregnant:!1,hungryLevel:0,geneCode:8405024}){e.save(),e.imageSmoothingEnabled=!1;const h=o*.15,g=n+o/2,m=r+a/2,y=o-h*2,S=a-h*2,{gender:w,age:P,direction:_,isPregnant:T,hungryLevel:U,geneCode:H}=d,D=.8+Math.min(P,10)/10*.4,x=w==="male"?1.05:.95,W=1-U/100*.3,F=y*.5*W*D*x;let Y=S*.3*D*x;const ue=y*.15*D*x,we=F*.2,_e=S*.3,xe=Lm(H,0,30,50);let De=Lm(H,8,50,40);if(P>45){const re=Math.min(1,(P-45)/15);De=Pd(De,re)}e.translate(g,m),_[0]<0&&e.scale(-1,1);const Ie=Math.sin(l*Math.PI*2),le=Math.cos(l*Math.PI*2),Fe=_e+Y*.2;if(c==="dead"){const re=Math.min(l,1);e.translate(0,S*.2),e.rotate(Math.PI/2);const Se=Pd(De,re),ve=Pd(xe,re);e.globalAlpha=.5+re*.5,e.strokeStyle=Se,e.lineWidth=we*.5,e.beginPath(),e.moveTo(-F*.4,0),e.lineTo(F*.4,0),e.stroke();for(let K=-1;K<=1;K+=1)e.beginPath(),e.arc(0,0,Y*.4,Math.PI*.4*K-Math.PI*.2,Math.PI*.4*K+Math.PI*.2),e.stroke();e.fillStyle=ve,e.beginPath(),e.arc(F*.5,0,ue,0,Math.PI*2),e.fill(),e.fillStyle="black",e.beginPath(),e.arc(F*.55,0,ue*.3,0,Math.PI*2),e.fill(),e.restore();return}e.fillStyle="rgba(0, 0, 0, 0.1)",e.beginPath(),e.ellipse(0,Fe,F*.7,F*.25,0,0,2*Math.PI),e.fill();let ye=0,J=0,b=0,j=0,z=0,C=0;switch(c){case"idle":J=Ie*(S*.02),b=Ie*.05,j=-Ie*.05,z=-Ie*.05,C=Ie*.05;break;case"walk":J=Math.abs(le)*(S*-.04),b=Ie*.7,j=-Ie*.7,z=-Ie*.7,C=Ie*.7;break;case"eat":ye=S*.1,J=S*.05,ye+=Ie*(S*.02);break;case"procreate":J=S*.05;const re=(1-le)*-y*.05;e.translate(re,0),e.shadowColor="rgba(255, 182, 193, 0.9)",e.shadowBlur=10;break}T&&w==="female"&&(Y*=1.6);const M=J,V=M-Y*.2;_l(e,F*-.35,V,we,_e,z,De,!0),_l(e,F*.35,V,we,_e,C,De,!0),e.fillStyle=De,e.beginPath(),e.ellipse(0,M,F/2,Y/2,0,0,2*Math.PI),e.fill();const ee=F*.45,he=V+ye;e.fillStyle=xe,e.beginPath(),e.arc(ee,he,ue,0,Math.PI*2),e.fill(),_[1]>=0&&(e.fillStyle="black",e.beginPath(),e.arc(ee+ue*.3,he-ue*.2,ue*.15,0,Math.PI*2),e.fill()),_l(e,F*-.35,V,we,_e,b,De),_l(e,F*.35,V,we,_e,j,De),e.restore()}};function R1(e,n){let[r,o,a]=e.match(/\d+/g).map(Number);return r=Math.max(0,r-n),o=Math.max(0,o-n),a=Math.max(0,a-n),`rgb(${r}, ${o}, ${a})`}function P1(e){const n=(e&16711680)>>16,r=(e&65280)>>8,o=e&255,a=`rgb(${n}, ${r}, ${o})`,l=R1(a,40),c=(e&255)%100+50,d=(e>>8&255)%100,h=(e>>16&255)%100,g=`rgb(${c}, ${d}, ${h})`,m=(e&8388608)!==0?"#00aaff":"#ffaa00";return{furColor:a,darkerFurColor:l,skinColor:g,eyeColor:m}}const Tv={name:"tribe-predator-2d",referenceImage:"swos.png",description:`A 2D predator asset for the Tribe game, featuring various stances and animations.

Predator is an animal which can hunt and attack humans in the Tribe game. It is designed to be a threat to the player, adding an element of danger and challenge to the game world.

Predator look like bears or wolves, with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Visual style

Predator characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like creatures from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in away that conveys their actions clearly.

Predator walks on arms and legs, unlike human (two legs).

Each predator is described by a unique gene code, which is a number that defines its appearance, size, and other characteristics. The gene code is used to generate the character's appearance, including body proportions, color, and other visual features. The gene code is a 32-bit integer, with each bit representing a specific characteristic of the character.

Predator should have visible ears, eyes, and mouth with teeth. It must have a tail. Front legs should be shorter than back legs, and they should be positioned closer to the body. The character's body should be wider at the top and narrower at the bottom, with a slight curve to the back. The character's head should be larger than the body, with a pronounced jaw and sharp teeth.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the a character to give it a sense of depth.

IMPORTANT: The character is visible from the side, just like in Sensible Soccer.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 1 and 20, with 3 being the average age.
- gender:
  - 'male': Male predators are larger and more robust, with a more pronounced musculature.
  - 'female': Female predators are smaller and more agile, with a leaner build.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or a dust particles to indicate movement.
- 'attacking': The character performs an attack animation, with arms raised and a forward motion.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a grey skeleton over time. The character pose and body parts should not be animated in this stance, as the character is dead so it should not move.`,stances:["idle","walk","eat","dead","attacking","procreate"],render(e,n,r,o,a,l,c,d={gender:"male",age:20,direction:[1,0],isPregnant:!1,hungryLevel:0,geneCode:8405024}){const{gender:h,age:g,direction:m,isPregnant:y,hungryLevel:S,geneCode:w}=d;e.save();const P=o*.15,_=Math.max(1,Math.floor((o-P*2)/10)),T=m[0]<0;e.translate(n+o/2,r+a/2),T&&e.scale(-1,1);const U=P1(w),H=.8+Math.min(g,20)/20*.4,D=h==="male"?1.05:.95,x=1-S/100*.25,W=H*D*x,F=Math.max(0,Math.min(1,(g-15)/5));e.filter=`grayscale(${F})`;const Y=U.furColor,ue=U.darkerFurColor,we=U.eyeColor,_e="#FFFFFF",xe="#c75c5c",De="#E0E0E0",Ie="#A0A0A0",le=a/2-2*_,Fe=Math.sin(l*Math.PI*2),ye=Math.abs(Fe);if(e.fillStyle="rgba(0,0,0,0.15)",e.beginPath(),e.ellipse(0,le,_*4,_,0,0,2*Math.PI),e.fill(),e.filter="none",c==="dead"){const Ke=Math.min(1,l*2);e.save(),e.translate(0,le-_*3),e.rotate(-Math.PI/2);const Ye=(Rn,Bt,nn,Pn,Nn=!1)=>{e.fillStyle=Nn?Ie:De,e.fillRect(Rn*_,Bt*_,nn*_,Pn*_)};Ke<1&&(e.globalAlpha=1-Ke,e.fillStyle=Y,e.beginPath(),e.ellipse(0,0,_*3,_*5,0,0,Math.PI*2),e.fill(),e.globalAlpha=1),Ke>0&&(e.globalAlpha=Ke,Ye(-1,-4,2,2),Ye(1,-3.5,1,1,!0),Ye(-.5,-2,1,5,!0),Ye(-2.5,-1,5,.5),Ye(-2.5,0,5,.5),Ye(-2.5,1,5,.5),Ye(-3,-2,-1,2,!0),Ye(3,-2,1,2),Ye(-3,2,-1,2,!0),Ye(3,2,1,2),e.globalAlpha=1),e.restore(),e.restore();return}e.fillStyle=Y;let J=0,b=0,j=0,z=[0,0,0,0];switch(c){case"idle":J=Fe*_*.1;break;case"walk":const Ke=Math.sin(l*Math.PI*4);J=Math.abs(Ke)*-_*.5,z=[Ke*_,-Ke*_,-Ke*_,Ke*_];break;case"attacking":const Ye=Math.sin(l*Math.PI*4);b=_*2+Ye*_,j=_*2,J=_;break;case"eat":j=_*3+ye*_,J=_*1.5,e.fillStyle=xe,e.fillRect(-_,le-_,_*2,_);break;case"procreate":J=Math.sin(l*Math.PI*8)*_*.3,e.fillStyle="rgba(139, 69, 19, 0.5)";for(let Bt=0;Bt<5;Bt++){const nn=(Math.random()-.5)*_*8,Pn=le+(Math.random()-.5)*_*2;ye>.5&&e.fillRect(nn,Pn,_*.5,_*.5)}break}const C=_*3*W*(y?1.3:1),M=_*5*W,V=-M/1.5,ee=le-C-_*2.5+J;e.fillStyle=Y,e.beginPath(),e.moveTo(V-_*.5,ee+C*.5),e.quadraticCurveTo(V-_*3,ee-_,V-_*2+Fe*_,ee+C+_),e.fill();const he=_*1.2*W,re=_*3*W,Se=_*2.5*W,ve=V+M*.8,K=V+M*.2;e.fillStyle=ue,e.fillRect(K,le-Se,he,Se+z[2]),e.fillRect(ve,le-re,he,re+z[0]),e.fillStyle=Y,e.beginPath(),e.moveTo(V,ee+C),e.lineTo(V,ee+_),e.quadraticCurveTo(V+M/2,ee,V+M,ee+_),e.lineTo(V+M,ee+C),e.fill(),e.fillStyle=Y,e.fillRect(K+_/2,le-Se,he,Se+z[3]),e.fillRect(ve+_/2,le-re,he,re+z[1]);const te=_*3.5*W,Oe=V+M-te*.3+b,ce=ee-te*.3+j;e.fillStyle=Y,e.beginPath(),e.arc(Oe,ce,te/2,0,Math.PI*2),e.fill(),e.beginPath(),e.ellipse(Oe+te*.4,ce+te*.2,_*1.5,_,0,0,Math.PI*2),e.fill(),m[1]>=0&&(e.fillStyle=we,e.fillRect(Oe+_*.5,ce-_*.5,_*.5,_*.5),c==="attacking"&&(e.fillStyle=_e,e.fillRect(Oe+te*.5,ce+te*.4,_,_*.4))),e.fillStyle=ue,e.beginPath(),e.moveTo(Oe-te*.4,ce-te*.3),e.lineTo(Oe,ce-te*.7),e.lineTo(Oe,ce-te*.2),e.fill(),e.restore()}};function N1(e,n){const{position:r,gender:o,age:a,decayProgress:l,food:c,radius:d,originalEntityType:h,geneCode:g}=n;if(e.save(),e.globalAlpha=1-l,h==="human"?Df.render(e,r.x-d,r.y-d,d*2,d*2,l,"dead",o,a,[0,0],!1,0):h==="prey"?Av.render(e,r.x-d,r.y-d,d*2,d*2,l,"dead",{gender:o,age:a,direction:[0,0],isPregnant:!1,hungryLevel:0,geneCode:g||8405024}):h==="predator"&&Tv.render(e,r.x-d,r.y-d,d*2,d*2,l,"dead",{gender:o,age:a,direction:[0,0],isPregnant:!1,hungryLevel:0,geneCode:g||8405024}),e.restore(),c.length>0){e.save(),e.font=`${gI}px Arial`,e.textAlign="center",e.textBaseline="middle";const m=vt*.9,y=Math.PI/E0*3;c.forEach((S,w)=>{const P=w*y,_=r.x+m*Math.cos(P)*Math.atan2(w,w),T=r.y+m*Math.sin(P)*Math.atan2(w,w),U=ev[S.type];e.fillText(U,_,T)}),e.restore()}}function uo(e,n,r,o,a,l,c,d){e.save(),e.fillStyle=c,e.fillRect(n,r,o,a),e.fillStyle=d,e.fillRect(n,r,o*Math.max(0,l),a),e.restore()}function D1(e,n,r,o,a,l){if(e.save(),o.length===0){e.restore();return}const c=o.length*a;let d;c>l||c+(o.length-1)*4>l?d=(l-c)/(o.length-1):d=4,o.length===1&&(d=0);for(let h=0;h<o.length;h++){const g=ev[o[h].type];e.fillText(g,n+h*(a+d),r)}e.restore()}function O1(e,n,r,o,a){const l=n.autopilotControls.hoveredAutopilotAction;if(!l)return;let c,d=vt/2;const h=iu[l.action],g=av[l.action],m=`${h} ${g}`;if("targetEntityId"in l){const y=n.entities.entities.get(l.targetEntityId);y&&(c=y.position,d=y.radius)}else"position"in l&&(c=l.position);if(c){Sv(e,c,d,cf,df,2,r,o,a,n.mapDimensions),e.save(),e.font=`${vo}px "Press Start 2P", Arial`,e.fillStyle="white",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=5;const{x:y,y:S}=Nf(c,r,{width:o,height:a},n.mapDimensions),w=S-d-tu-vo/2;e.fillText(m,y,w),e.restore()}}function k1(e,n,r,o,a){e.save();const l=(Math.sin(a*ff)+1)/2,c=r+tu+l*5;e.strokeStyle=cf,e.lineWidth=2,e.setLineDash(df),e.beginPath(),e.arc(n.x,n.y,c,0,Math.PI*2),e.stroke(),e.setLineDash([]);const d=iu[o],h=av[o];if(d){e.font=`${vo*1.5}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle";const g=n.y-c-25;e.fillText(d,n.x,g),e.font=`${vo*.8}px "Press Start 2P", Arial`,e.fillText(h,n.x,g+25)}e.restore()}function M1(e,n,r){e.save();const o=30,a=70,l=3,c=a/l;for(let d=0;d<l;d++){const h=d*c,g=(r*o+h)%a,m=1-g/a;e.strokeStyle=`rgba(255, 215, 0, ${m*.7})`,e.lineWidth=1+(1-m)*2,e.beginPath(),e.arc(n.x,n.y,g,0,Math.PI*2),e.stroke()}e.restore()}function F1(e,n){const{activeAutopilotAction:r,behaviors:o}=n.autopilotControls,a=Et(n);if(!a)return;const l=(c,d)=>{M1(c,d.position,n.time)};if(a.isCallingToFollow&&An(e,n.mapDimensions.width,n.mapDimensions.height,l,{position:a.position}),o.followLeader&&!r&&An(e,n.mapDimensions.width,n.mapDimensions.height,l,{position:a.position},70),r){let c,d=15;if("position"in r)c=r.position;else if("targetEntityId"in r){const h=n.entities.entities.get(r.targetEntityId);h&&(c=h.position,d=h.radius||30)}if(c&&r.action!==Ee.AutopilotFollowMe&&!a.isCallingToFollow){const h=(g,m)=>{k1(g,m.position,d,r.action,n.time)};An(e,n.mapDimensions.width,n.mapDimensions.height,h,{position:{...c}},c,d+30)}}}function Bm(e,n,r,o,a,l,c=!0){const d=n.split(" ");let h="";const g=[];for(let m=0;m<d.length;m++){const y=h+d[m]+" ";e.measureText(y).width>a&&m>0?(g.push(h),h=d[m]+" "):h=y}if(g.push(h),c)for(let m=0;m<g.length;m++)e.fillText(g[m],r,o+m*l);return g.length*l}function U1(e){return 1-Math.pow(1-e,3)}function H1(e,n,r,o){n.notificationButtonRects={dismiss:new Map,view:new Map};const a=n.notifications.filter(c=>!c.isDismissed);if(a.length===0)return;e.save();let l=o-AE;for(const c of a){const d=r-pl-rr;e.font=`${cd}px "Press Start 2P", Arial`;const h=d+rr,g=pl-rr*2,m=Bm(e,c.message,-9999,-9999,g,cd*1.2,!1),y=rr*2+m+Hn,S=l-y,w=Date.now()-c.creationTime,P=Math.min(w/SE,1),_=U1(P),T=o,U=T+(S-T)*_;e.fillStyle=hE,e.beginPath(),e.roundRect(d,U,pl,y,fE),e.fill(),e.fillStyle=pE,e.textBaseline="top",Bm(e,c.message,h,U+rr,g,cd*1.2,!0);const H=U+y-Hn-rr/2,D=d+pl-Hn-rr/2,x={x:D,y:H,width:Hn,height:Hn};n.notificationButtonRects.dismiss.set(c.id,x);const W=n.hoveredButtonId===`notification-dismiss-${c.id}`;if(e.fillStyle=W?pm:gE,e.font=`${Hn}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("",x.x+x.width/2,x.y+x.height/2),c.targetEntityIds||c.targetPosition||c.targetArea||c.targetRadius){const ue={x:D-Hn-hm,y:H,width:Hn,height:Hn};n.notificationButtonRects.view.set(c.id,ue);const we=n.hoveredButtonId===`notification-view-${c.id}`;e.fillStyle=we?pm:mE,e.font=`${Hn*(we?1.5:1.2)}px Arial`,e.fillText("",ue.x+ue.width/2,ue.y+ue.height/2)}l-=y+hm}e.restore()}function Of(e,n,r){if(!n.aiBehaviorTree||!n.aiBlackboard)return;const o=n.aiBlackboard.getNodeExecutionData(),a=n.aiBehaviorTree;e.save(),e.font=`${LI}px Arial`,e.textAlign="left",e.textBaseline="top";const l=S=>{switch(S){case I.SUCCESS:return GI;case I.FAILURE:return xI;case I.RUNNING:return bI;case I.NOT_EVALUATED:case null:default:return zI}},c=S=>{if(!S.name||!o.has(S.name))return{width:0,height:0};let w=0,P=0;const _=o.get(S.name),T=` ${S.name}`+(_!=null&&_.debugInfo?`: ${_.debugInfo}`:""),U=e.measureText(T).width,H=(S.depth??0)*am+8+U+um+fs+20;if(w=Math.max(w,H),P+=ld,S.children)for(const D of S.children){const x=c(D);w=Math.max(w,x.width),P+=x.height}else if(S.child){const D=c(S.child);w=Math.max(w,D.width),P+=D.height}return{width:w,height:P}},d=(S,w,P,_)=>{if(!S.name||!o.has(S.name))return w;let T=w;const U=o.get(S.name),H=P+2+(S.depth??0)*am;let D=I.NOT_EVALUATED,x=lm,W="";if(U){D=U.status,W=U.debugInfo;const ue=WI/Xt*Vt,we=r-U.lastExecuted,_e=Math.max(0,1-we/ue);x=YE(lm,$I,_e),we>Hs&&(D=I.NOT_EVALUATED)}const F=l(D);e.fillStyle=F,e.fillText("",H,T),e.fillStyle=x;const Y=` ${S.name}`+(W?`: ${W}`:"");if(e.fillText(Y,H+8,T),U&&U.executionHistory.length>0){const{executionHistory:ue}=U,we=x0/Xt*Vt,_e=r,xe=_e-we,De=P+_-fs-um;let Ie=De;const le=T+(ld-fl)/2,Fe=ue.filter(V=>V.time<xe);let ye=Fe.length>0?Fe[Fe.length-1].status:null,J=xe;const b=ue.filter(V=>V.time>=xe&&V.time<=_e),j=fs/we;e.fillStyle="rgba(255, 255, 255, 0.1)",e.fillRect(De,le,fs,fl);for(const V of b){const he=(V.time-J)*j;he>0&&(e.fillStyle=l(ye),e.fillRect(Ie,le,he,fl),Ie+=he),ye=V.status,J=V.time}r-J>Hs&&(ye=I.NOT_EVALUATED);const C=(_e-J)*j;e.fillStyle=l(ye);const M=De+fs-Ie;e.fillRect(Ie,le,Math.min(C,M),fl)}if(T+=ld,S.children)for(const ue of S.children)T=d(ue,T,P,_);else S.child&&(T=d(S.child,T,P,_));return T},{width:h,height:g}=c(a);if(g===0){e.restore();return}const m=n.position.x+UI,y=n.position.y+HI-g/2;e.fillStyle=BI,e.fillRect(m,y,h,g+4),d(a,y+2,m,h),e.restore()}const L1={moving:"walk",gathering:"gathering",eating:"eat",feeding:"eat",procreating:"procreate",idle:"idle",attacking:"attacking",planting:"gathering"};function B1(e,n){var d;const{radius:r,position:o,activeAction:a="idle"}=n,l=((d=n.stateMachine)==null?void 0:d[0])||"N/A",c=n.isAdult?vt+20:vt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${a}`,o.x,o.y-c),e.fillText(`State: ${l}`,o.x,o.y-c+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-c+20),e.fillText(`Cooldown: ${n.attackCooldown||"N/A"}`,o.x,o.y-c+30),e.fillText(`Tribe: ${n.leaderId||"N/A"}`,o.x,o.y-c+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(255, 0, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function G1(e,n,r,o,a){e.save(),e.font=`${zd}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(r,n.x,n.y-(o?vt:Eo)-zd-a),e.restore()}function x1(e,n,r,o,a){const l=n.x,c=n.y-r-o/2;e.save(),e.fillStyle=a,e.strokeStyle=a,e.lineWidth=1.5,e.beginPath(),e.rect(l-o/2,c,o,o/2),e.fill(),e.beginPath(),e.moveTo(l-o/2,c),e.lineTo(l-o/4,c-o/3),e.lineTo(l-o/6,c),e.moveTo(l-o/6,c),e.lineTo(l,c-o/2),e.lineTo(l+o/6,c),e.moveTo(l+o/6,c),e.lineTo(l+o/4,c-o/3),e.lineTo(l+o/2,c),e.stroke(),e.restore()}function b1(e,n,r){var d;const{position:o,radius:a}=n,l=o.x-sd/2,c=o.y-a-II;if(((d=n.stateMachine)==null?void 0:d[0])===bi){const h=n.stateMachine[1],g=r-h.attackStartTime,m=Math.min(g/P0,1);uo(e,l,c,sd,nm,m,eo,EI)}else if(n.attackCooldown&&n.attackCooldown>0){const h=1-n.attackCooldown/Jl;uo(e,l,c,sd,nm,h,eo,wI)}}function z1(e,n,r){const a="";e.save(),e.font="15px Arial",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=3,e.fillText(a,n.x,n.y-r),e.restore()}function $1(e,n,r=!1,o=!1,a=!1,l=!1,c=!1,d=!1,h=!1,g=!1,m,y){const{position:S,activeAction:w="idle"}=n,P=n.isAdult?vt:vt*.6,_=L1[w]||"idle";Df.render(e,S.x-P,S.y-P,P*2,P*2,n.animationProgress||0,_,n.gender,n.age,[n.direction.x,n.direction.y],n.isPregnant??!1,n.hunger),d&&(e.save(),e.strokeStyle=B0,e.lineWidth=2,e.beginPath(),e.arc(S.x,S.y,P+3,0,2*Math.PI),e.stroke(),e.restore());let T,U;if(c?(T=rI,U=L0):r?(T=iI,U=uf):a?(T=oI,U=tI):o?(T=sI,U=U0):l&&(T=aI,U=H0),T&&U&&x1(e,S,P,T,U),n.tribeBadge&&G1(e,S,n.tribeBadge,n.isAdult??!1,T??0),h){let D=(n.isAdult?vt:Eo)+5;T&&(D+=T),n.tribeBadge&&(D+=zd),z1(e,S,D)}const H=g&&(y===void 0||n.id===y);H&&n.aiBlackboard&&Of(e,n,m),b1(e,n,m),H&&B1(e,n)}const W1={grazing:"eat",moving:"walk",procreating:"procreate",feeding:"eat",idle:"idle"};function Y1(e,n){var d;const{radius:r,position:o,activeAction:a="idle"}=n,l=((d=n.stateMachine)==null?void 0:d[0])||"N/A",c=n.isAdult?vt+20:vt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${a}`,o.x,o.y-c),e.fillText(`State: ${l}`,o.x,o.y-c+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-c+20),e.fillText(`Hunger: ${Math.round(n.hunger)}`,o.x,o.y-c+30),e.fillText(`Age: ${Math.round(n.age)}`,o.x,o.y-c+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(0, 255, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function j1(e,n,r=!1,o=0,a){var m,y;const{position:l,activeAction:c="idle"}=n,d=n.isAdult?n.radius:n.radius*.6,h=W1[c]||"idle";if(Av.render(e,l.x-d,l.y-d,d*2,d*2,n.animationProgress||0,h,{gender:n.gender,age:n.age,direction:[((m=n.direction)==null?void 0:m.x)||1,((y=n.direction)==null?void 0:y.y)||0],isPregnant:n.isPregnant??!1,hungryLevel:n.hunger,geneCode:n.geneCode}),n.hitpoints<n.maxHitpoints){const S=d*1.5,w=3,P=l.x-S/2,_=l.y-d-8;e.fillStyle="#555",e.fillRect(P,_,S,w);const T=n.hitpoints/n.maxHitpoints;e.fillStyle=T>.5?"#4CAF50":T>.25?"#FFC107":"#F44336",e.fillRect(P,_,S*T,w)}const g=r&&(a===void 0||n.id===a);g&&n.aiBlackboard&&Of(e,n,o),g&&Y1(e,n)}const V1={attacking:"attacking",eating:"eat",moving:"walk",procreating:"procreate",feeding:"eat",idle:"idle"};function X1(e,n){var d;const{radius:r,position:o,activeAction:a="idle"}=n,l=((d=n.stateMachine)==null?void 0:d[0])||"N/A",c=n.isAdult?vt+20:vt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${a}`,o.x,o.y-c),e.fillText(`State: ${l}`,o.x,o.y-c+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-c+20),e.fillText(`Hunger: ${Math.round(n.hunger)}`,o.x,o.y-c+30),e.fillText(`Age: ${Math.round(n.age)}`,o.x,o.y-c+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(255, 0, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function K1(e,n,r=!1,o=0,a){var m,y;const{position:l,activeAction:c="idle"}=n,d=n.isAdult?n.radius:n.radius*.6,h=V1[c]||"idle";if(Tv.render(e,l.x-d,l.y-d,d*2,d*2,n.animationProgress||0,h,{gender:n.gender,age:n.age,direction:[((m=n.direction)==null?void 0:m.x)||1,((y=n.direction)==null?void 0:y.y)||0],isPregnant:n.isPregnant??!1,hungryLevel:n.hunger,geneCode:n.geneCode}),n.hitpoints<n.maxHitpoints){const S=d*1.5,w=3,P=l.x-S/2,_=l.y-d-8;e.fillStyle="#555",e.fillRect(P,_,S,w);const T=n.hitpoints/n.maxHitpoints;e.fillStyle=T>.5?"#4CAF50":T>.25?"#FFC107":"#F44336",e.fillRect(P,_,S*T,w)}(n.attackCooldown&&n.attackCooldown>0||n.huntCooldown&&n.huntCooldown>0)&&(e.strokeStyle="#FF8C00",e.lineWidth=3,e.beginPath(),e.arc(l.x,l.y,d+3,0,2*Math.PI),e.stroke());const g=r&&(a===void 0||n.id===a);g&&n.aiBlackboard&&Of(e,n,o),g&&X1(e,n)}const Iv=15;function Gm(e,n,r,o,a=1.5){const l=r-n.startTime,c=Math.min(l/n.duration,1),d=1-c,g=1+Math.sin(c*Math.PI*2)*(a-1),m=Iv*g;e.save(),e.globalAlpha=d,e.beginPath(),e.arc(n.position.x,n.position.y,Math.max(0,m),0,Math.PI*2),e.fillStyle=o,e.fill(),e.restore()}function Kr(e,n,r,o,a=2){const l=r-n.startTime,c=Math.min(l/n.duration,1),d=1-c,h=Iv*2*c;e.save(),e.globalAlpha=d,e.beginPath(),e.arc(n.position.x,n.position.y,h,0,Math.PI*2),e.strokeStyle=o,e.lineWidth=a,e.stroke(),e.restore()}function Ni(e,n,r,o){const a=r-n.startTime,l=Math.min(a/n.duration,1),c=1-l,d=-20*l;e.save(),e.globalAlpha=c,e.font="20px Arial",e.textAlign="center",e.fillText(o,n.position.x,n.position.y+d),e.restore()}function Q1(e,n,r){switch(n.type){case se.Hunger:Gm(e,n,r,"rgba(255, 165, 0, 0.7)",1);break;case se.Procreation:Ni(e,n,r,"");break;case se.Pregnant:Gm(e,n,r,"rgba(255, 105, 180, 0.7)",1.2);break;case se.TargetAcquired:Kr(e,n,r,"rgba(255, 0, 0, 0.8)",3);break;case se.Attack:Ni(e,n,r,"");break;case se.Partnered:Ni(e,n,r,"");break;case se.BushClaimed:Kr(e,n,r,"rgba(0, 255, 0, 0.7)",2);break;case se.BushClaimLost:Kr(e,n,r,"rgba(128, 128, 128, 0.7)",2);break;case se.Eating:Ni(e,n,r,"");break;case se.ChildFed:Ni(e,n,r,"");break;case se.AttackDeflected:Ni(e,n,r,"");break;case se.AttackResisted:Ni(e,n,r,"");break;case se.Hit:Ni(e,n,r,"");break;case se.SeizeBuildup:Kr(e,n,r,"rgba(255, 215, 0, 0.8)",4);break;case se.Seize:Kr(e,n,r,"rgba(148, 0, 211, 0.8)",4);break;case se.CallToAttack:Kr(e,n,r,"rgba(255, 255, 0, 0.8)",4);break}}function xm(e,n,r,o,a,l,c){e.save();const{position:d}=n;e.strokeStyle=o,e.lineWidth=a+Math.sin(c*l)*(a/2),e.setLineDash([8,8]),e.beginPath(),e.arc(d.x,d.y,r,0,2*Math.PI),e.stroke(),e.restore()}function q1(e,n,r){const o=Et(n),a=o?It(n,o):[],l=si(a),{width:c,height:d}=n.mapDimensions;Array.from(n.entities.entities.values()).sort((m,y)=>m.position.y-y.position.y||m.id-y.id).forEach(m=>{var y,S;if(m.type==="berryBush")An(e,c,d,_1,m,n,o,n.time);else if(m.type==="human"){const w=m,P=w.id===(o==null?void 0:o.id),_=a.some(F=>F.id===w.id),T=w.id===(l==null?void 0:l.id),U=o&&(w.id===o.motherId||w.id===o.fatherId),H=o&&(((y=w.partnerIds)==null?void 0:y.includes(o.id))||((S=o.partnerIds)==null?void 0:S.includes(w.id))),D=(o==null?void 0:o.attackTargetId)===w.id,x=w.leaderId?n.entities.entities.get(w.leaderId):void 0,W=o?w.leaderId===o.id&&w.activeAction==="moving"&&w.target===w.leaderId&&(x==null?void 0:x.isCallingToFollow):!1;An(e,c,d,$1,w,P,U,_,H,T,D,W,r,n.time,n.debugCharacterId)}else m.type==="corpse"?An(e,c,d,N1,m):m.type==="prey"?An(e,c,d,j1,m,r,n.time,n.debugCharacterId):m.type==="predator"&&An(e,c,d,K1,m,r,n.time,n.debugCharacterId)}),n.visualEffects.forEach(m=>{An(e,c,d,Q1,m,n.time)});const g=n.notifications.filter(m=>!m.isDismissed);for(const m of g)if(m.highlightedEntityIds&&m.renderHighlights)for(const y of m.highlightedEntityIds){const S=n.entities.entities.get(y);S&&An(e,c,d,xm,S,TE,IE,wE,EE,n.time)}if(n.tutorialState.isActive&&n.tutorialState.highlightedEntityIds.size>0)for(const m of n.tutorialState.highlightedEntityIds){const y=n.entities.entities.get(m);y&&An(e,c,d,xm,y,eE,b0,z0,ff,n.time)}}function Z1(e,n,r,o,a,l){let c=null,d=null;e.textAlign="left";let h=Yt+Oi;const m=n.time/(Vt/Xt)/Zl%1,y=hs[qr.Time],S=25,w=Yt+S;e.fillText(y,Yt,h+Jt/2+Oi/3),uo(e,w,h,Ri,Jt,m,eo,pI),h+=Jt+qn;const P=h+nr/2,_=h+(nr-Jt)/2,T=5;Ys(e,{x:Yt*2,y:P},nr,5,r.gender,!1,!1,!1);const U=Yt+nr+T,H=Ri+S-(nr+T)*2;uo(e,U,_,H,Jt,Math.floor(r.age)/Fs,eo,hI),Ys(e,{x:U+H+T+nr/2,y:P},nr,Fs,r.gender,!1,!1,!1),h+=Jt+qn*2;const D=[],x=new Set;if(D.push({member:r,isPlayer:!0,isHeir:!1,isPartner:!1,isParent:!1}),x.add(r.id),o&&!x.has(o.id)&&(D.push({member:o,isPlayer:!1,isHeir:!0,isPartner:!1,isParent:!1}),x.add(o.id)),a.forEach(le=>{x.has(le.id)||(D.push({member:le,isPlayer:!1,isHeir:!1,isPartner:!0,isParent:!1}),x.add(le.id))}),l.forEach(le=>{x.has(le.id)||(D.push({member:le,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!1}),x.add(le.id))}),r.motherId&&!x.has(r.motherId)){const le=n.entities.entities.get(r.motherId);le&&(D.push({member:le,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!0}),x.add(le.id))}if(r.fatherId&&!x.has(r.fatherId)){const le=n.entities.entities.get(r.fatherId);le&&(D.push({member:le,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!0}),x.add(le.id))}const W=hs[qr.Family],F=10,Y=Yt+Oi+F,ue=Ri+S-(Oi+F),we=h+ul/2;e.font=`${Oi}px "Press Start 2P", Arial`,e.textBaseline="middle",e.fillText(W,Yt,we);const _e=h+ul/2;S1(e,Y,_e,D,ul,ue),h+=ul+qn,e.textBaseline="alphabetic";const xe=hs[qr.Hitpoints];e.fillText(xe,Yt,h+Jt/2+Oi/3),uo(e,w,h,Ri,Jt,r.hitpoints/r.maxHitpoints,eo,fI),h+=Jt+qn;const De=hs[qr.Hunger];e.fillText(De,Yt,h+Jt/2+Oi/3),uo(e,w,h,Ri,Jt,(tn-r.hunger)/tn,eo,dI),c={x:Yt,y:h-qn/2,width:Ri+S,height:Jt+qn},h+=Jt+qn,e.textBaseline="middle";const Ie=hs[qr.Food];return e.fillText(Ie,Yt,h+ll/2),D1(e,w,h+ll/2,r.food,ll,Ri),d={x:Yt,y:h-qn/5,width:Ri+S,height:ll+qn},e.textBaseline="alphabetic",{hungerBarRect:c,foodBarRect:d}}let ys=[],bm=0;const J1=36,eR=200;function tR(e,n,r,o){const a=n.search.prey.count(),l=n.search.predator.count(),c=n.search.berryBush.count();n.time-bm>=J1&&(ys.push({time:n.time,prey:a,predators:l,bushes:c}),ys.length>eR&&(ys=ys.slice(-200)),bm=n.time);const d=Ze*Je,h=a/d*1e6,g=l/d*1e6,m=c/d*1e6,y=n1(),S=Math.floor(n.time/(24*365)),w=Math.floor(n.time%(24*365)/24),P=Math.floor(n.time%24),_=400,T=Math.min(o*.8,600),U=r-_-10,H=10;e.save(),e.fillStyle="rgba(0, 0, 0, 0.9)",e.fillRect(U,H,_,T),e.strokeStyle="#444",e.lineWidth=2,e.strokeRect(U,H,_,T),e.fillStyle="white",e.font="12px monospace",e.textAlign="left";let D=H+20;const x=14,W=U+15;e.fillStyle="#66ccff",e.font="bold 14px monospace",e.fillText(" Ecosystem Debugger",W,D),D+=25,e.fillStyle="white",e.font="12px monospace",e.fillText(`Game Time: Year ${S}, Day ${w}, Hour ${P}`,W,D),D+=x,e.fillText(`Map Size: ${Ze}  ${Je} pixels`,W,D),D+=20,e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Q-Learning Status",W,D),D+=18,y&&(e.fillText(`Q-Table Size: ${y.qTableSize} entries`,W,D),D+=x,e.fillText(`Exploration Rate: ${(y.explorationRate*100).toFixed(1)}%`,W,D),D+=x);const F=ys.slice(-20);F.length>1&&(e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Population Trends (Last 20 Points)",W,D),D+=30,nR(e,W,D,F),D+=50),e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Density (per 1000 px)",W,D),D+=18,e.fillStyle="white",e.font="12px monospace";const Y=(ti/d*1e6).toFixed(2),ue=(ni/d*1e6).toFixed(2),we=(ii/d*1e6).toFixed(2);e.fillText(`Prey: ${h.toFixed(2)} (target: ${Y})`,W,D),D+=x,e.fillText(`Predators: ${g.toFixed(2)} (target: ${ue})`,W,D),D+=x,e.fillText(`Bushes: ${m.toFixed(2)} (target: ${we})`,W,D),D+=20,e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Current Population Status",W,D),D+=18,e.fillStyle="white",e.font="12px monospace";const _e=Math.round(a/ti*100),xe=Math.round(l/ni*100),De=Math.round(c/ii*100),Ie=le=>le<50?"#ff4444":le<80?"#ffaa44":le>120?"#44aaff":"#44ff44";e.fillStyle=Ie(_e),e.fillText(`Prey: ${a}/${ti} (${_e}%)`,W,D),D+=x,e.fillStyle=Ie(xe),e.fillText(`Predators: ${l}/${ni} (${xe}%)`,W,D),D+=x,e.fillStyle=Ie(De),e.fillText(`Bushes: ${c}/${ii} (${De}%)`,W,D),D+=20,e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Current Parameters",W,D),D+=18,e.fillStyle="white",e.font="10px monospace",e.fillText("Prey:",W,D),D+=13,e.fillText(` Gestation: ${n.ecosystem.preyGestationPeriod.toFixed(1)}h`,W,D),D+=11,e.fillText(` Procreation: ${n.ecosystem.preyProcreationCooldown.toFixed(1)}h`,W,D),D+=11,e.fillText(` Hunger: ${n.ecosystem.preyHungerIncreasePerHour.toFixed(1)}/h`,W,D),D+=13,e.fillText("Predators:",W,D),D+=13,e.fillText(` Gestation: ${n.ecosystem.predatorGestationPeriod.toFixed(1)}h`,W,D),D+=11,e.fillText(` Procreation: ${n.ecosystem.predatorProcreationCooldown.toFixed(1)}h`,W,D),D+=11,e.fillText(` Hunger: ${n.ecosystem.predatorHungerIncreasePerHour.toFixed(1)}/h`,W,D),D+=13,e.fillText("Bushes:",W,D),D+=13,e.fillText(` Spread Chance: ${(n.ecosystem.berryBushSpreadChance*100).toFixed(1)}%`,W,D),D+=15,e.fillStyle="#888",e.font="10px monospace",e.textAlign="center",e.fillText("Press '1' to toggle this debugger",U+_/2,H+T-10),e.restore()}function nR(e,n,r,o){if(o.length<2)return;const d={prey:Math.max(...o.map(g=>g.prey),ti),predators:Math.max(...o.map(g=>g.predators),ni),bushes:Math.max(...o.map(g=>g.bushes),ii)};[{data:o.map(g=>g.prey),color:"#44ff44",label:"Prey",target:ti,max:d.prey},{data:o.map(g=>g.predators),color:"#ff4444",label:"Predators",target:ni,max:d.predators},{data:o.map(g=>g.bushes),color:"#ffaa44",label:"Bushes",target:ii,max:d.bushes}].forEach((g,m)=>{const y=n+m*115,S=r;e.fillStyle=g.color,e.font="10px monospace",e.fillText(g.label,y,S-5),e.strokeStyle="#333",e.lineWidth=1,e.strokeRect(y,S,100,30),e.beginPath(),e.strokeStyle=g.color;for(let P=0;P<g.data.length;P++){const _=y+P/(g.data.length-1)*100,T=S+30-g.data[P]/g.max*30;P===0?e.moveTo(_,T):e.lineTo(_,T)}e.stroke(),e.beginPath(),e.strokeStyle="#888",e.setLineDash([2,2]);const w=S+30-g.target/g.max*30;e.moveTo(y,w),e.lineTo(y+100,w),e.stroke(),e.setLineDash([])})}function Wl(e,n,r,o,a,l=!1,c=!1){var h;if(e.save(),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="#2c5234",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.translate(e.canvas.width/2-o.x,e.canvas.height/2-o.y),!l&&n.gameOver){e.restore(),E1(e,n);return}q1(e,n,r);const d=n.notifications.filter(g=>!g.isDismissed);for(const g of d){const m=(Math.sin(n.time*yE)+1)/2;e.globalAlpha=m*.5+.25,e.fillStyle=vE,g.targetArea&&e.fillRect(g.targetArea.x,g.targetArea.y,g.targetArea.width,g.targetArea.height),g.targetRadius&&(e.beginPath(),e.arc(g.targetRadius.x,g.targetRadius.y,g.targetRadius.radius,0,Math.PI*2),e.fill())}if(e.globalAlpha=1,F1(e,n),e.restore(),!l){e.fillStyle=lI,e.font=`${Oi}px "Press Start 2P", Arial`,e.shadowColor=uI,e.shadowBlur=cI,n.uiButtons=[];const g=Et(n);let m=null,y=null;if(g){const P=It(n,g),_=si(P),T=((h=g.partnerIds)==null?void 0:h.map(H=>n.entities.entities.get(H)).filter(H=>H!==void 0))||[],U=Z1(e,n,g,_,T,P);m=U.hungerBarRect,y=U.foodBarRect}const S=rv(n,g==null?void 0:g.leaderId);A1(e,n,S,e.canvas.width,e.canvas.height);const{commandButtonsRect:w}=a1(e,n,e.canvas.width);if(e.shadowColor="transparent",e.shadowBlur=0,g&&(O1(e,n,o,e.canvas.width,e.canvas.height),a.length>0&&d1(e,a,g,o,e.canvas.width,e.canvas.height,n.mapDimensions)),n.tutorialState.activeUIHighlights.size>0){const{activeUIHighlights:P}=n.tutorialState;P.has(vr.HUNGER_BAR)&&m&&Rd(e,m,n.time),P.has(vr.FOOD_BAR)&&y&&Rd(e,y,n.time),P.has(vr.COMMAND_BUTTONS)&&w&&Rd(e,w,n.time)}if(n.tutorialState.isActive){const P=I1(e,n,e.canvas.width,e.canvas.height);P&&n.uiButtons.push({id:"tutorial-dismiss",action:Ue.DismissTutorial,rect:P,text:"",currentWidth:P.width,backgroundColor:"transparent",textColor:"transparent"})}H1(e,n,e.canvas.width,e.canvas.height),c&&tR(e,n,e.canvas.width,e.canvas.height),n.isPaused&&l1(e)}}const iR=zn.div`
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
`,rR=zn.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #2c5234;
`,oR=zn.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  z-index: 1;
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0.7) 100%);
`,sR=zn.h1`
  font-family: 'Press Start 2P', cursive;
  font-size: 4rem;
  color: #fff;
  text-shadow: 4px 4px 0px #ff0000;
  margin-bottom: 2rem;
`,aR=zn.button`
  font-family: 'Press Start 2P', cursive;
  font-size: 1.5rem;
  padding: 1rem 2rem;
  color: #fff;
  background-color: #ff0000;
  border: 2px solid #fff;
  box-shadow: 4px 4px 0px #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;

  &:hover {
    background-color: #fff;
    color: #ff0000;
    box-shadow: 4px 4px 0px #ff0000;
  }
`,Nd="intro-soundtrack",zm=()=>{const{setAppState:e}=Yl(),n=Pe.useRef(null),r=Pe.useRef(null),o=Pe.useRef(gC()),a=Pe.useRef(),l=Pe.useRef(o.current.viewportCenter),c=Pe.useRef();Pe.useEffect(()=>(Af(Te.SoundTrack1,{loop:!0,trackId:Nd}),()=>{Im(Nd,2)}),[]),Pe.useEffect(()=>{const m=n.current;if(!m)return;r.current=m.getContext("2d");const y=()=>{m&&r.current&&(m.width=window.innerWidth,m.height=window.innerHeight,Wl(r.current,o.current,!1,l.current,[],!0,!1))};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),Pe.useEffect(()=>{const m=()=>{const S=QE(o.current);if(S.length>0){const w=Math.floor(Math.random()*S.length);c.current=S[w].id}};m();const y=setInterval(m,aE);return()=>clearInterval(y)},[]);const[d,h]=S0(m=>{if(!r.current)return;if(a.current===void 0){a.current=m;return}const y=Math.min((m-a.current)/1e3,1);o.current=ou(o.current,y);const S=c.current?o.current.entities.entities.get(c.current):void 0;if(S){const{mapDimensions:w}=o.current,{width:P,height:_}=w;let T={...S.position};const U=T.x-l.current.x;Math.abs(U)>P/2&&(U>0?T.x-=P:T.x+=P);const H=T.y-l.current.y;Math.abs(H)>_/2&&(H>0?T.y-=_:T.y+=_);let D=pf(l.current,T,tf*y);D={x:(D.x%P+P)%P,y:(D.y%_+_)%_},l.current=D}Wl(r.current,o.current,!1,l.current,[],!0,!1),a.current=m});Pe.useEffect(()=>(h(),d),[h,d]);const g=()=>{Im(Nd,2),e("game")};return He.jsxs(iR,{children:[He.jsx(rR,{ref:n}),He.jsxs(oR,{children:[He.jsx(sR,{children:"Tribe"}),He.jsx(aR,{onClick:g,children:"Start Game"})]})]})};function lR(){console.log("Tribe game initialized with detailed 2D world state.");const e=pC();return e.ecosystem={preyGestationPeriod:fr,preyProcreationCooldown:hr,predatorGestationPeriod:pr,predatorProcreationCooldown:gr,preyHungerIncreasePerHour:Ui,predatorHungerIncreasePerHour:Hi,berryBushSpreadChance:ri},e}const uR=({canvasRef:e,ctxRef:n,gameStateRef:r,isDebugOnRef:o,viewportCenterRef:a,playerActionHintsRef:l})=>(Pe.useEffect(()=>{const c=e.current;if(!c)return;n.current=c.getContext("2d");const d=()=>{c&&n.current&&r.current&&(c.width=window.innerWidth,c.height=window.innerHeight,Wl(n.current,r.current,o.current===!0,a.current,l.current,!1,!1))};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),He.jsx("canvas",{ref:e,style:{display:"block",background:"#2c5234"}})),cR=(e,n,r)=>{let o;const a=qE(e,r);if(a)if(n.isAdult&&a.type==="berryBush"&&a.food.length>0)o={action:Ee.AutopilotGather,targetEntityId:a.id};else if(n.isAdult&&a.type==="corpse"&&a.food.length>0)o={action:Ee.AutopilotGather,targetEntityId:a.id};else if(a.type==="human"){const l=a;n.isAdult&&_o(n,l,r)?o={action:Ee.AutopilotAttack,targetEntityId:l.id}:Ar(n,l,r)?o={action:Ee.AutopilotProcreate,targetEntityId:l.id}:n.food.length>0&&!l.isAdult&&(l.motherId===n.id||l.fatherId===n.id)&&(o={action:Ee.AutopilotFeedChild,targetEntityId:l.id})}else a.type==="prey"?o={action:Ee.AutopilotAttack,targetEntityId:a.id}:a.type==="predator"&&(o={action:Ee.AutopilotAttack,targetEntityId:a.id});else r.autopilotControls.isManuallyPlanting&&n.food.filter(l=>l.type===oi.Berry).length>=Us&&vf(e,r,1,eu,n.id)?o={action:Ee.AutopilotPlant,position:e}:o={action:Ee.AutopilotMove,position:e};return o},dR=(e,n)=>{if(e.isPaused||!Et(e))return;const o=e.autopilotControls.hoveredAutopilotAction;e.autopilotControls.activeAutopilotAction=void 0,o?(e.autopilotControls.activeAutopilotAction=o,(o.action===Ee.AutopilotMove||o.action===Ee.AutopilotGather)&&(e.hasPlayerMovedEver=!0),o.action===Ee.AutopilotPlant&&(e.hasPlayerPlantedBush=!0)):e.autopilotControls.activeAutopilotAction={action:Ee.AutopilotMove,position:n},e.autopilotControls.isManuallyMoving=!1,e.autopilotControls.isManuallyPlanting=!1},fR=(e,n,r,o)=>{var c,d;let a=!0,l=n;switch(e){case"m":n.isMuted=!n.isMuted,Ps(n.masterVolume,n.isMuted);break;case"=":case"+":const h=Math.min(1,n.masterVolume+.1);n.masterVolume=parseFloat(h.toFixed(1)),Ps(n.masterVolume,n.isMuted);break;case"-":const g=Math.max(0,n.masterVolume-.1);n.masterVolume=parseFloat(g.toFixed(1)),Ps(n.masterVolume,n.isMuted);break;case"t":l=ou(n,k0);break;case" ":case"p":n.isPaused=!n.isPaused;break;case"":case"`":r.current=!r.current,r.current?l.debugCharacterId=((c=Et(l))==null?void 0:c.id)??((d=Array.from(l.entities.entities.values()).find(y=>y.type==="human"||y.type==="prey"||y.type==="predator"))==null?void 0:d.id):l.debugCharacterId=void 0;break;case"1":o&&(o.current=!o.current);break;case"tab":r.current=!0;const m=Array.from(l.entities.entities.values()).filter(y=>y.type==="human"||y.type==="prey"||y.type==="predator");if(m.length>0){const y=m.sort((_,T)=>{if(_.type==="human"&&_.isPlayer)return-1;if(T.type==="human"&&T.isPlayer)return 1;if(_.type!==T.type){const U={human:0,prey:1,predator:2},H=U[_.type]??999,D=U[T.type]??999;return H-D}return _.id-T.id}),S=l.debugCharacterId,P=((S?y.findIndex(_=>_.id===S):-1)+1)%y.length;l.debugCharacterId=y[P].id}else l.debugCharacterId=void 0;break;default:a=!1;break}return{newState:l,handled:a}},hR=(e,n,r,o,a)=>{const l={gameState:r};if(n&&["e","b","r","h"].includes(e)&&r.hasPlayerEnabledAutopilot++,e==="e"){if(n){r.autopilotControls.behaviors.gathering=!r.autopilotControls.behaviors.gathering;return}const c=Ne(o,r,"berryBush",mt,g=>g.food.length>0&&o.food.length<o.maxFood),d=Ne(o,r,"corpse",mt,g=>g.food.length>0&&o.food.length<o.maxFood);let h=null;c&&d?h=X(o.position,c.position,r.mapDimensions.width,r.mapDimensions.height)<=X(o.position,d.position,r.mapDimensions.width,r.mapDimensions.height)?c:d:h=c||d,h&&(o.activeAction="gathering",ke(l,Te.Gather,o.position))}else if(e==="r"){if(n){r.autopilotControls.behaviors.procreation=!r.autopilotControls.behaviors.procreation;return}Ne(o,r,"human",mt,d=>Ar(o,d,r))&&(o.activeAction="procreating",ke(l,Te.Procreate,o.position))}else if(e==="f")o.food.length>0&&(o.activeAction="eating",ke(l,Te.Eat,o.position));else if(e==="h"){if(n){r.autopilotControls.behaviors.feedChildren=!r.autopilotControls.behaviors.feedChildren;return}const c=a.find(d=>d.type===Ee.FeedChild);c&&c.targetEntity&&(o.activeAction="feeding",o.target=c.targetEntity.id)}else if(e==="arrowup"||e==="w")o.direction.y=-1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowdown"||e==="s")o.direction.y=1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowleft"||e==="a")o.direction.x=-1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowright"||e==="d")o.direction.x=1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="q"){if(n){r.autopilotControls.behaviors.attack=!r.autopilotControls.behaviors.attack;return}const c=Ne(o,r,"human",xn,d=>_o(o,d,r))??Ne(o,r,"predator",xn)??Ne(o,r,"prey",xn);c&&(o.activeAction="attacking",o.attackTargetId=c.id)}else if(e==="b"){if(n){r.autopilotControls.behaviors.planting=!r.autopilotControls.behaviors.planting;return}if(a.find(d=>d.type===Ee.Plant)){const d=vf(o.position,r,50,Gd);d&&(o.activeAction="planting",o.target=d,r.hasPlayerPlantedBush=!0)}}else e==="v"?(o.isCallingToAttack=!0,o.callToAttackEndTime=r.time+mo,Ce(r,se.CallToAttack,o.position,mo),ke(l,Te.CallToAttack,o.position)):e==="c"?(o.isCallingToFollow=!0,o.callToFollowEndTime=r.time+Ls,Ce(r,se.CallToFollow,o.position,Ls),ke(l,Te.CallToFollow,o.position)):e==="k"&&If(o,r)},pR=(e,n,r,o)=>{e==="arrowup"||e==="w"||e==="arrowdown"||e==="s"?n.direction.y=0:(e==="arrowleft"||e==="a"||e==="arrowright"||e==="d")&&(n.direction.x=0),!o.current.has("arrowup")&&!o.current.has("arrowdown")&&!o.current.has("arrowleft")&&!o.current.has("arrowright")&&!o.current.has("w")&&!o.current.has("a")&&!o.current.has("s")&&!o.current.has("d")&&(n.activeAction==="moving"&&(n.activeAction="idle"),r.autopilotControls.isManuallyMoving=!1),!o.current.has("e")&&n.activeAction==="gathering"&&(n.activeAction="idle"),!o.current.has("f")&&n.activeAction==="eating"&&(n.activeAction="idle"),!o.current.has("r")&&n.activeAction==="procreating"&&(n.activeAction="idle"),!o.current.has("h")&&n.activeAction==="feeding"&&(n.activeAction="idle")},gR=(e,n,r)=>{let a=Et(e);if(e.debugCharacterId){const l=e.entities.entities.get(e.debugCharacterId);l&&"position"in l&&(a=l)}if(a){const{mapDimensions:l}=e,{width:c,height:d}=l;let h={...a.position};const g=h.x-n.x;Math.abs(g)>c/2&&(g>0?h.x-=c:h.x+=c);const m=h.y-n.y;Math.abs(m)>d/2&&(m>0?h.y-=d:h.y+=d);let y=pf(n,h,tf*r);return y={x:(y.x%c+c)%c,y:(y.y%d+d)%d},y}return e.viewportCenter};function mR(e,n){const{width:r,height:o}=e.mapDimensions;e.viewportCenter={x:(n.x%r+r)%r,y:(n.y%o+o)%o}}const vR=(e,n,r)=>{const o={gameState:r},a=Et(r);a&&ke(o,Te.ButtonClick,a.position);const l=r.uiButtons.find(d=>d.id===e.id);l&&(l.lastActivated=Date.now()),n&&[Ue.CommandGather,Ue.CommandPlant,Ue.ToggleProcreationBehavior].includes(e.action)&&r.hasPlayerEnabledAutopilot++;const{behaviors:c}=r.autopilotControls;switch(e.action){case Ue.ToggleMute:r.isMuted=!r.isMuted,Ps(r.masterVolume,r.isMuted);break;case Ue.TogglePause:r.isPaused=!r.isPaused;break;case Ue.FastForward:return ou(r,k0);case Ue.DismissTutorial:r.tutorialState.isActive=!1;break;case Ue.CommandEat:a&&a.food.length>0&&(a.activeAction="eating");break;case Ue.CommandGather:n?c.gathering=!c.gathering:a&&(a.activeAction="gathering");break;case Ue.CommandPlant:n?c.planting=!c.planting:a&&(r.autopilotControls.isManuallyPlanting=!0);break;case Ue.ToggleProcreationBehavior:c.procreation=!c.procreation;break;case Ue.ToggleAttackBehavior:c.attack=!c.attack;break;case Ue.ToggleFeedChildBehavior:c.feedChildren=!c.feedChildren;break;case Ue.ToggleAutopilotFollowLeaderBehavior:c.followLeader=!c.followLeader;break;case Ue.CommandCallToAttack:a&&a.leaderId===a.id&&(a.isCallingToAttack=!0,a.callToAttackEndTime=r.time+mo,Ce(r,se.CallToAttack,a.position,mo),ke(o,Te.CallToAttack,a.position));break;case Ue.CommandFollowMe:n?c.followLeader=!c.followLeader:a&&a.leaderId===a.id&&(a.isCallingToFollow=!0,a.callToFollowEndTime=r.time+Ls,Ce(r,se.CallToFollow,a.position,Ls),ke(o,Te.CallToFollow,a.position));break;case Ue.CommandTribeSplit:a&&If(a,r);break;case Ue.ToggleDiplomacy:if(a&&a.leaderId&&e.targetTribeId){const d=a.leaderId,h=e.targetTribeId,g=r.entities.entities.get(h),m=a.diplomacy,y=g==null?void 0:g.diplomacy;if(m&&y){const w=(m.get(h)||Ht.Friendly)===Ht.Friendly?Ht.Hostile:Ht.Friendly;m.set(h,w),y.set(d,w)}}break}return r};function yR(e,n,r){if(!e.notificationButtonRects)return!1;const o=Et(e);for(const[a,l]of e.notificationButtonRects.dismiss.entries())if(n>=l.x&&n<=l.x+l.width&&r>=l.y&&r<=l.y+l.height)return aw(e,a),o&&ke({gameState:e},Te.ButtonClick,o.position),!0;for(const[a,l]of e.notificationButtonRects.view.entries())if(n>=l.x&&n<=l.x+l.width&&r>=l.y&&r<=l.y+l.height){const c=e.notifications.find(d=>d.id===a);if(c){let d=c.targetPosition;if(!d&&c.targetEntityIds&&c.targetEntityIds.length>0){const h=e.entities.entities.get(c.targetEntityIds[0]);h&&(d=h.position)}return d&&mR(e,d),o&&ke({gameState:e},Te.ButtonClick,o.position),c.highlightedEntityIds&&(c.renderHighlights=!c.renderHighlights),!0}}return!1}const SR=({isActive:e,gameStateRef:n,canvasRef:r,viewportCenterRef:o,playerActionHintsRef:a,isDebugOnRef:l,isEcosystemDebugOnRef:c,keysPressed:d})=>(Pe.useEffect(()=>{const h=g=>{if(!e()||n.current.gameOver||!r.current||!g.target||g.target!==r.current)return;const m=r.current.getBoundingClientRect(),y=g.clientX-m.left,S=g.clientY-m.top;if(yR(n.current,y,S))return;const P=n.current.uiButtons.find(T=>y>=T.rect.x&&y<=T.rect.x+T.rect.width&&S>=T.rect.y&&S<=T.rect.y+T.rect.height);if(P){n.current=vR(P,g.shiftKey,n.current);return}const _=km({x:y,y:S},o.current,{width:r.current.width,height:r.current.height},n.current.mapDimensions);dR(n.current,_)};return window.addEventListener("mousedown",h),()=>{window.removeEventListener("mousedown",h)}},[e,r,n,o]),Pe.useEffect(()=>{const h=g=>{if(!e()||!r.current)return;const m=r.current.getBoundingClientRect(),y=g.clientX-m.left,S=g.clientY-m.top;n.current.mousePosition={x:y,y:S};let w;if(n.current.notificationButtonRects){for(const[_,T]of n.current.notificationButtonRects.dismiss.entries())if(y>=T.x&&y<=T.x+T.width&&S>=T.y&&S<=T.y+T.height){w=`notification-dismiss-${_}`;break}if(!w){for(const[_,T]of n.current.notificationButtonRects.view.entries())if(y>=T.x&&y<=T.x+T.width&&S>=T.y&&S<=T.y+T.height){w=`notification-view-${_}`;break}}}if(!w)for(let _=n.current.uiButtons.length-1;_>=0;_--){const T=n.current.uiButtons[_];if(y>=T.rect.x&&y<=T.rect.x+T.rect.width&&S>=T.rect.y&&S<=T.rect.y+T.rect.height){w=T.id;break}}if(n.current.hoveredButtonId=w,w){n.current.autopilotControls.hoveredAutopilotAction=void 0;return}const P=Et(n.current);if(P){const _=km({x:y,y:S},o.current,{width:r.current.width,height:r.current.height},n.current.mapDimensions);n.current.autopilotControls.hoveredAutopilotAction=cR(_,P,n.current)}else n.current.autopilotControls.hoveredAutopilotAction=void 0};return window.addEventListener("mousemove",h),()=>{window.removeEventListener("mousemove",h)}},[e,r,n,o]),Pe.useEffect(()=>{const h=m=>{if(!e()||n.current.gameOver)return;const y=m.key.toLowerCase();if((y===" "||y==="p"||y==="tab")&&m.preventDefault(),y==="escape"){n.current.autopilotControls.activeAutopilotAction=void 0;return}const S=fR(y,n.current,l,c);if(n.current=S.newState,S.handled)return;const w=Et(n.current);w&&(d.current.add(y),hR(y,m.shiftKey,n.current,w,a.current))},g=m=>{if(!e()||n.current.gameOver)return;const y=m.key.toLowerCase();d.current.delete(y);const S=Et(n.current);S&&pR(y,S,n.current,d)};return window.addEventListener("keydown",h),window.addEventListener("keyup",g),()=>{window.removeEventListener("keydown",h),window.removeEventListener("keyup",g)}},[e,n,a,l,d]),null),AR=({gameStateRef:e,ctxRef:n,isDebugOnRef:r,isEcosystemDebugOnRef:o,viewportCenterRef:a,playerActionHintsRef:l,keysPressed:c,canvasRef:d,setAppState:h,appState:g})=>{const m=Pe.useRef(),[y,S,w]=S0(P=>{if(!n.current||!m.current){m.current=P;return}const _=Math.min(P-m.current,1e3)/1e3;e.current=ou(e.current,_);const T=Et(e.current);T?l.current=Ef(e.current,T):l.current=[],a.current=gR(e.current,a.current,_),Wl(n.current,e.current,r.current,a.current,l.current,!1,o.current),m.current=P,e.current.gameOver&&g!=="gameOver"&&(Af(Te.GameOver,{masterVolume:e.current.masterVolume,isMuted:e.current.isMuted}),h("gameOver",{generations:e.current.generationCount,cause:e.current.causeOfGameOver||"Unknown"}))});return Pe.useEffect(()=>(S(),y),[S,y]),He.jsx(SR,{isActive:w,gameStateRef:e,canvasRef:d,viewportCenterRef:a,playerActionHintsRef:l,isDebugOnRef:r,isEcosystemDebugOnRef:o,keysPressed:c})},$m=()=>{const[e]=Pe.useState(()=>lR());return He.jsx(TR,{initialState:e})},TR=({initialState:e})=>{const n=Pe.useRef(null),r=Pe.useRef(null),o=Pe.useRef(e),a=Pe.useRef(new Set),l=Pe.useRef(!1),c=Pe.useRef(!1),d=Pe.useRef(e.viewportCenter),h=Pe.useRef([]),{appState:g,setAppState:m}=Yl();return He.jsxs(He.Fragment,{children:[He.jsx(uR,{canvasRef:n,ctxRef:r,gameStateRef:o,isDebugOnRef:l,viewportCenterRef:d,playerActionHintsRef:h}),He.jsx(AR,{gameStateRef:o,ctxRef:r,isDebugOnRef:l,isEcosystemDebugOnRef:c,viewportCenterRef:d,playerActionHintsRef:h,keysPressed:a,canvasRef:n,setAppState:m,appState:g})]})},IR=zn.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  background-color: rgba(0, 0, 0, 0.75); // Semi-transparent overlay
  color: #fff;
  padding: 20px;
  z-index: 10; // Ensure it's on top
`,ER=zn.h1`
  font-family: 'Press Start 2P', cursive;
  font-size: 4rem;
  color: #ff4136; // Red for emphasis
  text-shadow: 4px 4px 0px #000;
  margin-bottom: 1.5rem;
`,Cl=zn.p`
  font-family: 'Press Start 2P', cursive;
  font-size: 1.2rem;
  margin: 0.5em 0;
  color: #fff;
  text-shadow: 2px 2px 0px #000;
`,wR=zn.button`
  font-family: 'Press Start 2P', cursive;
  font-size: 1rem;
  padding: 1rem 2rem;
  margin-top: 2em;
  color: #fff;
  background-color: #ff4136; // Red button
  border: 2px solid #fff;
  box-shadow: 4px 4px 0px #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  text-transform: uppercase;

  &:hover {
    background-color: #fff;
    color: #ff4136;
    box-shadow: 4px 4px 0px #ff4136;
  }
`,_R=()=>{const{setAppState:e,gameOverDetails:n}=Yl(),r=()=>{e("intro")};return He.jsxs(IR,{children:[He.jsx(ER,{children:"Game Over"}),He.jsx(Cl,{children:"Your tribe's lineage has ended."}),n&&He.jsxs(He.Fragment,{children:[He.jsxs(Cl,{children:["Generations Survived: ",n.generations]}),He.jsxs(Cl,{children:["Cause of Extinction: ",n.cause]})]}),!n&&He.jsx(Cl,{children:"Game details are unavailable."}),He.jsx(wR,{onClick:r,children:"Return to Menu"})]})},CR=kA`
  /* CSS Reset */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    padding: 0;
    font-family: 'Press Start 2P', 'Arial', sans-serif;
    background-color: #121212;
    color: #f0f0f0;
    line-height: 1.6;
  }

  /* Additional global styles */
  h1, h2, h3, h4, h5, h6 {
    margin-top: 0;
  }

  button {
    cursor: pointer;
    font-family: inherit;
  }

  /* Prevent overflow issues */
  html, body {
    height: 100%;
    overflow-x: hidden;
  }

  /* Root element for React app */
  #root {
    height: 100%;
  }
`;function RR(e,n){Pe.useEffect(()=>{const r=()=>{const o=document.location.hash==="#game"?"game":"intro";n(o)};return window.addEventListener("hashchange",r),r(),()=>{window.removeEventListener("hashchange",r)}},[]),Pe.useEffect(()=>{e==="game"?document.location.hash="#game":e==="intro"&&(document.location.hash="")},[e])}const PR=()=>{const{appState:e,setAppState:n}=Yl();RR(e,n);const r=()=>{switch(e){case"intro":return He.jsx(zm,{});case"game":return He.jsx($m,{});case"gameOver":return He.jsxs(He.Fragment,{children:[He.jsx($m,{}),He.jsx(_R,{})]});default:return He.jsx(zm,{})}};return He.jsxs(He.Fragment,{children:[He.jsx(CR,{}),r()]})},Wm=document.getElementById("root");Wm?Sw().then(()=>{DS.createRoot(Wm).render(He.jsx(Gn.StrictMode,{children:He.jsx(OS,{initialAppState:document.location.hash==="#game"?"game":"intro",children:He.jsx(PR,{})})}))}):console.error("Failed to find the root element");
