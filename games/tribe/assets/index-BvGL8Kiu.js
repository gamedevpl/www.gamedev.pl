var lS=Object.defineProperty;var uS=(e,n,r)=>n in e?lS(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var Ie=(e,n,r)=>uS(e,typeof n!="symbol"?n+"":n,r);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(l){if(l.ep)return;l.ep=!0;const a=r(l);fetch(l.href,a)}})();function Lm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Uc={exports:{}},Xo={},Lc={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gp;function cS(){if(gp)return Oe;gp=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function S(C){return C===null||typeof C!="object"?null:(C=y&&C[y]||C["@@iterator"],typeof C=="function"?C:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,_={};function T(C,O,V){this.props=C,this.context=O,this.refs=_,this.updater=V||E}T.prototype.isReactComponent={},T.prototype.setState=function(C,O){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,O,"setState")},T.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function U(){}U.prototype=T.prototype;function L(C,O,V){this.props=C,this.context=O,this.refs=_,this.updater=V||E}var D=L.prototype=new U;D.constructor=L,P(D,T.prototype),D.isPureReactComponent=!0;var x=Array.isArray,W=Object.prototype.hasOwnProperty,F={current:null},Y={key:!0,ref:!0,__self:!0,__source:!0};function ue(C,O,V){var ee,he={},re=null,ye=null;if(O!=null)for(ee in O.ref!==void 0&&(ye=O.ref),O.key!==void 0&&(re=""+O.key),O)W.call(O,ee)&&!Y.hasOwnProperty(ee)&&(he[ee]=O[ee]);var me=arguments.length-2;if(me===1)he.children=V;else if(1<me){for(var K=Array(me),te=0;te<me;te++)K[te]=arguments[te+2];he.children=K}if(C&&C.defaultProps)for(ee in me=C.defaultProps,me)he[ee]===void 0&&(he[ee]=me[ee]);return{$$typeof:e,type:C,key:re,ref:ye,props:he,_owner:F.current}}function Ee(C,O){return{$$typeof:e,type:C.type,key:O,ref:C.ref,props:C.props,_owner:C._owner}}function _e(C){return typeof C=="object"&&C!==null&&C.$$typeof===e}function xe(C){var O={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(V){return O[V]})}var De=/\/+/g;function Te(C,O){return typeof C=="object"&&C!==null&&C.key!=null?xe(""+C.key):O.toString(36)}function le(C,O,V,ee,he){var re=typeof C;(re==="undefined"||re==="boolean")&&(C=null);var ye=!1;if(C===null)ye=!0;else switch(re){case"string":case"number":ye=!0;break;case"object":switch(C.$$typeof){case e:case n:ye=!0}}if(ye)return ye=C,he=he(ye),C=ee===""?"."+Te(ye,0):ee,x(he)?(V="",C!=null&&(V=C.replace(De,"$&/")+"/"),le(he,O,V,"",function(te){return te})):he!=null&&(_e(he)&&(he=Ee(he,V+(!he.key||ye&&ye.key===he.key?"":(""+he.key).replace(De,"$&/")+"/")+C)),O.push(he)),1;if(ye=0,ee=ee===""?".":ee+":",x(C))for(var me=0;me<C.length;me++){re=C[me];var K=ee+Te(re,me);ye+=le(re,O,V,K,he)}else if(K=S(C),typeof K=="function")for(C=K.call(C),me=0;!(re=C.next()).done;)re=re.value,K=ee+Te(re,me++),ye+=le(re,O,V,K,he);else if(re==="object")throw O=String(C),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return ye}function Fe(C,O,V){if(C==null)return C;var ee=[],he=0;return le(C,ee,"","",function(re){return O.call(V,re,he++)}),ee}function ve(C){if(C._status===-1){var O=C._result;O=O(),O.then(function(V){(C._status===0||C._status===-1)&&(C._status=1,C._result=V)},function(V){(C._status===0||C._status===-1)&&(C._status=2,C._result=V)}),C._status===-1&&(C._status=0,C._result=O)}if(C._status===1)return C._result.default;throw C._result}var J={current:null},b={transition:null},j={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:b,ReactCurrentOwner:F};function $(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:Fe,forEach:function(C,O,V){Fe(C,function(){O.apply(this,arguments)},V)},count:function(C){var O=0;return Fe(C,function(){O++}),O},toArray:function(C){return Fe(C,function(O){return O})||[]},only:function(C){if(!_e(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Oe.Component=T,Oe.Fragment=r,Oe.Profiler=l,Oe.PureComponent=L,Oe.StrictMode=o,Oe.Suspense=h,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,Oe.act=$,Oe.cloneElement=function(C,O,V){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var ee=P({},C.props),he=C.key,re=C.ref,ye=C._owner;if(O!=null){if(O.ref!==void 0&&(re=O.ref,ye=F.current),O.key!==void 0&&(he=""+O.key),C.type&&C.type.defaultProps)var me=C.type.defaultProps;for(K in O)W.call(O,K)&&!Y.hasOwnProperty(K)&&(ee[K]=O[K]===void 0&&me!==void 0?me[K]:O[K])}var K=arguments.length-2;if(K===1)ee.children=V;else if(1<K){me=Array(K);for(var te=0;te<K;te++)me[te]=arguments[te+2];ee.children=me}return{$$typeof:e,type:C.type,key:he,ref:re,props:ee,_owner:ye}},Oe.createContext=function(C){return C={$$typeof:c,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:a,_context:C},C.Consumer=C},Oe.createElement=ue,Oe.createFactory=function(C){var O=ue.bind(null,C);return O.type=C,O},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(C){return{$$typeof:d,render:C}},Oe.isValidElement=_e,Oe.lazy=function(C){return{$$typeof:m,_payload:{_status:-1,_result:C},_init:ve}},Oe.memo=function(C,O){return{$$typeof:p,type:C,compare:O===void 0?null:O}},Oe.startTransition=function(C){var O=b.transition;b.transition={};try{C()}finally{b.transition=O}},Oe.unstable_act=$,Oe.useCallback=function(C,O){return J.current.useCallback(C,O)},Oe.useContext=function(C){return J.current.useContext(C)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(C){return J.current.useDeferredValue(C)},Oe.useEffect=function(C,O){return J.current.useEffect(C,O)},Oe.useId=function(){return J.current.useId()},Oe.useImperativeHandle=function(C,O,V){return J.current.useImperativeHandle(C,O,V)},Oe.useInsertionEffect=function(C,O){return J.current.useInsertionEffect(C,O)},Oe.useLayoutEffect=function(C,O){return J.current.useLayoutEffect(C,O)},Oe.useMemo=function(C,O){return J.current.useMemo(C,O)},Oe.useReducer=function(C,O,V){return J.current.useReducer(C,O,V)},Oe.useRef=function(C){return J.current.useRef(C)},Oe.useState=function(C){return J.current.useState(C)},Oe.useSyncExternalStore=function(C,O,V){return J.current.useSyncExternalStore(C,O,V)},Oe.useTransition=function(){return J.current.useTransition()},Oe.version="18.3.1",Oe}var pp;function Od(){return pp||(pp=1,Lc.exports=cS()),Lc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp;function dS(){if(mp)return Xo;mp=1;var e=Od(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,h,p){var m,y={},S=null,E=null;p!==void 0&&(S=""+p),h.key!==void 0&&(S=""+h.key),h.ref!==void 0&&(E=h.ref);for(m in h)o.call(h,m)&&!a.hasOwnProperty(m)&&(y[m]=h[m]);if(d&&d.defaultProps)for(m in h=d.defaultProps,h)y[m]===void 0&&(y[m]=h[m]);return{$$typeof:n,type:d,key:S,ref:E,props:y,_owner:l.current}}return Xo.Fragment=r,Xo.jsx=c,Xo.jsxs=c,Xo}var vp;function fS(){return vp||(vp=1,Uc.exports=dS()),Uc.exports}var Le=fS(),Pe=Od();const Gn=Lm(Pe);var Ya={},Hc={exports:{}},Wt={},Bc={exports:{}},Gc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp;function hS(){return yp||(yp=1,function(e){function n(b,j){var $=b.length;b.push(j);e:for(;0<$;){var C=$-1>>>1,O=b[C];if(0<l(O,j))b[C]=j,b[$]=O,$=C;else break e}}function r(b){return b.length===0?null:b[0]}function o(b){if(b.length===0)return null;var j=b[0],$=b.pop();if($!==j){b[0]=$;e:for(var C=0,O=b.length,V=O>>>1;C<V;){var ee=2*(C+1)-1,he=b[ee],re=ee+1,ye=b[re];if(0>l(he,$))re<O&&0>l(ye,he)?(b[C]=ye,b[re]=$,C=re):(b[C]=he,b[ee]=$,C=ee);else if(re<O&&0>l(ye,$))b[C]=ye,b[re]=$,C=re;else break e}}return j}function l(b,j){var $=b.sortIndex-j.sortIndex;return $!==0?$:b.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var h=[],p=[],m=1,y=null,S=3,E=!1,P=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(b){for(var j=r(p);j!==null;){if(j.callback===null)o(p);else if(j.startTime<=b)o(p),j.sortIndex=j.expirationTime,n(h,j);else break;j=r(p)}}function x(b){if(_=!1,D(b),!P)if(r(h)!==null)P=!0,ve(W);else{var j=r(p);j!==null&&J(x,j.startTime-b)}}function W(b,j){P=!1,_&&(_=!1,U(ue),ue=-1),E=!0;var $=S;try{for(D(j),y=r(h);y!==null&&(!(y.expirationTime>j)||b&&!xe());){var C=y.callback;if(typeof C=="function"){y.callback=null,S=y.priorityLevel;var O=C(y.expirationTime<=j);j=e.unstable_now(),typeof O=="function"?y.callback=O:y===r(h)&&o(h),D(j)}else o(h);y=r(h)}if(y!==null)var V=!0;else{var ee=r(p);ee!==null&&J(x,ee.startTime-j),V=!1}return V}finally{y=null,S=$,E=!1}}var F=!1,Y=null,ue=-1,Ee=5,_e=-1;function xe(){return!(e.unstable_now()-_e<Ee)}function De(){if(Y!==null){var b=e.unstable_now();_e=b;var j=!0;try{j=Y(!0,b)}finally{j?Te():(F=!1,Y=null)}}else F=!1}var Te;if(typeof L=="function")Te=function(){L(De)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,Fe=le.port2;le.port1.onmessage=De,Te=function(){Fe.postMessage(null)}}else Te=function(){T(De,0)};function ve(b){Y=b,F||(F=!0,Te())}function J(b,j){ue=T(function(){b(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){P||E||(P=!0,ve(W))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ee=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(b){switch(S){case 1:case 2:case 3:var j=3;break;default:j=S}var $=S;S=j;try{return b()}finally{S=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,j){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var $=S;S=b;try{return j()}finally{S=$}},e.unstable_scheduleCallback=function(b,j,$){var C=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?C+$:C):$=C,b){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=$+O,b={id:m++,callback:j,priorityLevel:b,startTime:$,expirationTime:O,sortIndex:-1},$>C?(b.sortIndex=$,n(p,b),r(h)===null&&b===r(p)&&(_?(U(ue),ue=-1):_=!0,J(x,$-C))):(b.sortIndex=O,n(h,b),P||E||(P=!0,ve(W))),b},e.unstable_shouldYield=xe,e.unstable_wrapCallback=function(b){var j=S;return function(){var $=S;S=j;try{return b.apply(this,arguments)}finally{S=$}}}}(Gc)),Gc}var Sp;function gS(){return Sp||(Sp=1,Bc.exports=hS()),Bc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ap;function pS(){if(Ap)return Wt;Ap=1;var e=Od(),n=gS();function r(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function a(t,i){c(t,i),c(t+"Capture",i)}function c(t,i){for(l[t]=i,t=0;t<i.length;t++)o.add(i[t])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function S(t){return h.call(y,t)?!0:h.call(m,t)?!1:p.test(t)?y[t]=!0:(m[t]=!0,!1)}function E(t,i,s,u){if(s!==null&&s.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function P(t,i,s,u){if(i===null||typeof i>"u"||E(t,i,s,u))return!0;if(u)return!1;if(s!==null)switch(s.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function _(t,i,s,u,f,g,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=f,this.mustUseProperty=s,this.propertyName=t,this.type=i,this.sanitizeURL=g,this.removeEmptyString=v}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){T[t]=new _(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];T[i]=new _(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){T[t]=new _(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){T[t]=new _(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){T[t]=new _(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){T[t]=new _(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){T[t]=new _(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){T[t]=new _(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){T[t]=new _(t,5,!1,t.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function L(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(U,L);T[i]=new _(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(U,L);T[i]=new _(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(U,L);T[i]=new _(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){T[t]=new _(t,1,!1,t.toLowerCase(),null,!1,!1)}),T.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){T[t]=new _(t,1,!1,t.toLowerCase(),null,!0,!0)});function D(t,i,s,u){var f=T.hasOwnProperty(i)?T[i]:null;(f!==null?f.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(P(i,s,f,u)&&(s=null),u||f===null?S(i)&&(s===null?t.removeAttribute(i):t.setAttribute(i,""+s)):f.mustUseProperty?t[f.propertyName]=s===null?f.type===3?!1:"":s:(i=f.attributeName,u=f.attributeNamespace,s===null?t.removeAttribute(i):(f=f.type,s=f===3||f===4&&s===!0?"":""+s,u?t.setAttributeNS(u,i,s):t.setAttribute(i,s))))}var x=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),F=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),ue=Symbol.for("react.strict_mode"),Ee=Symbol.for("react.profiler"),_e=Symbol.for("react.provider"),xe=Symbol.for("react.context"),De=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),Fe=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),b=Symbol.iterator;function j(t){return t===null||typeof t!="object"?null:(t=b&&t[b]||t["@@iterator"],typeof t=="function"?t:null)}var $=Object.assign,C;function O(t){if(C===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);C=i&&i[1]||""}return`
`+C+t}var V=!1;function ee(t,i){if(!t||V)return"";V=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(M){var u=M}Reflect.construct(t,[],i)}else{try{i.call()}catch(M){u=M}t.call(i.prototype)}else{try{throw Error()}catch(M){u=M}t()}}catch(M){if(M&&u&&typeof M.stack=="string"){for(var f=M.stack.split(`
`),g=u.stack.split(`
`),v=f.length-1,A=g.length-1;1<=v&&0<=A&&f[v]!==g[A];)A--;for(;1<=v&&0<=A;v--,A--)if(f[v]!==g[A]){if(v!==1||A!==1)do if(v--,A--,0>A||f[v]!==g[A]){var w=`
`+f[v].replace(" at new "," at ");return t.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",t.displayName)),w}while(1<=v&&0<=A);break}}}finally{V=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?O(t):""}function he(t){switch(t.tag){case 5:return O(t.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return t=ee(t.type,!1),t;case 11:return t=ee(t.type.render,!1),t;case 1:return t=ee(t.type,!0),t;default:return""}}function re(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Y:return"Fragment";case F:return"Portal";case Ee:return"Profiler";case ue:return"StrictMode";case Te:return"Suspense";case le:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xe:return(t.displayName||"Context")+".Consumer";case _e:return(t._context.displayName||"Context")+".Provider";case De:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fe:return i=t.displayName||null,i!==null?i:re(t.type)||"Memo";case ve:i=t._payload,t=t._init;try{return re(t(i))}catch{}}return null}function ye(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(i);case 8:return i===ue?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function me(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function K(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function te(t){var i=K(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),u=""+t[i];if(!t.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,g=s.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){u=""+v,g.call(this,v)}}),Object.defineProperty(t,i,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ke(t){t._valueTracker||(t._valueTracker=te(t))}function ce(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),u="";return t&&(u=K(t)?t.checked?"true":"false":t.value),t=u,t!==s?(i.setValue(t),!0):!1}function Cn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ke(t,i){var s=i.checked;return $({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Ye(t,i){var s=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;s=me(i.value!=null?i.value:s),t._wrapperState={initialChecked:u,initialValue:s,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Rn(t,i){i=i.checked,i!=null&&D(t,"checked",i,!1)}function Bt(t,i){Rn(t,i);var s=me(i.value),u=i.type;if(s!=null)u==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?Pn(t,i.type,s):i.hasOwnProperty("defaultValue")&&Pn(t,i.type,me(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function nn(t,i,s){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,s||i===t.value||(t.value=i),t.defaultValue=i}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Pn(t,i,s){(i!=="number"||Cn(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Nn=Array.isArray;function ii(t,i,s,u){if(t=t.options,i){i={};for(var f=0;f<s.length;f++)i["$"+s[f]]=!0;for(s=0;s<t.length;s++)f=i.hasOwnProperty("$"+t[s].value),t[s].selected!==f&&(t[s].selected=f),f&&u&&(t[s].defaultSelected=!0)}else{for(s=""+me(s),i=null,f=0;f<t.length;f++){if(t[f].value===s){t[f].selected=!0,u&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function Li(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return $({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ef(t,i){var s=i.value;if(s==null){if(s=i.children,i=i.defaultValue,s!=null){if(i!=null)throw Error(r(92));if(Nn(s)){if(1<s.length)throw Error(r(93));s=s[0]}i=s}i==null&&(i=""),s=i}t._wrapperState={initialValue:me(s)}}function _f(t,i){var s=me(i.value),u=me(i.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),i.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),u!=null&&(t.defaultValue=""+u)}function Cf(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function Rf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jl(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?Rf(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hs,Pf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,s,u,f){MSApp.execUnsafeLocalFunction(function(){return t(i,s,u,f)})}:t}(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(Hs=Hs||document.createElement("div"),Hs.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Hs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function uo(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var co={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fv=["Webkit","ms","Moz","O"];Object.keys(co).forEach(function(t){fv.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),co[i]=co[t]})});function Nf(t,i,s){return i==null||typeof i=="boolean"||i===""?"":s||typeof i!="number"||i===0||co.hasOwnProperty(t)&&co[t]?(""+i).trim():i+"px"}function Df(t,i){t=t.style;for(var s in i)if(i.hasOwnProperty(s)){var u=s.indexOf("--")===0,f=Nf(s,i[s],u);s==="float"&&(s="cssFloat"),u?t.setProperty(s,f):t[s]=f}}var hv=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vl(t,i){if(i){if(hv[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function Xl(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kl=null;function Ql(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ql=null,fr=null,hr=null;function kf(t){if(t=Oo(t)){if(typeof ql!="function")throw Error(r(280));var i=t.stateNode;i&&(i=sa(i),ql(t.stateNode,t.type,i))}}function Mf(t){fr?hr?hr.push(t):hr=[t]:fr=t}function Of(){if(fr){var t=fr,i=hr;if(hr=fr=null,kf(t),i)for(t=0;t<i.length;t++)kf(i[t])}}function Ff(t,i){return t(i)}function Uf(){}var Zl=!1;function Lf(t,i,s){if(Zl)return t(i,s);Zl=!0;try{return Ff(t,i,s)}finally{Zl=!1,(fr!==null||hr!==null)&&(Uf(),Of())}}function fo(t,i){var s=t.stateNode;if(s===null)return null;var u=sa(s);if(u===null)return null;s=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(r(231,i,typeof s));return s}var Jl=!1;if(d)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){Jl=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{Jl=!1}function gv(t,i,s,u,f,g,v,A,w){var M=Array.prototype.slice.call(arguments,3);try{i.apply(s,M)}catch(B){this.onError(B)}}var go=!1,Bs=null,Gs=!1,eu=null,pv={onError:function(t){go=!0,Bs=t}};function mv(t,i,s,u,f,g,v,A,w){go=!1,Bs=null,gv.apply(pv,arguments)}function vv(t,i,s,u,f,g,v,A,w){if(mv.apply(this,arguments),go){if(go){var M=Bs;go=!1,Bs=null}else throw Error(r(198));Gs||(Gs=!0,eu=M)}}function Hi(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function Hf(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function Bf(t){if(Hi(t)!==t)throw Error(r(188))}function yv(t){var i=t.alternate;if(!i){if(i=Hi(t),i===null)throw Error(r(188));return i!==t?null:t}for(var s=t,u=i;;){var f=s.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){s=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===s)return Bf(f),t;if(g===u)return Bf(f),i;g=g.sibling}throw Error(r(188))}if(s.return!==u.return)s=f,u=g;else{for(var v=!1,A=f.child;A;){if(A===s){v=!0,s=f,u=g;break}if(A===u){v=!0,u=f,s=g;break}A=A.sibling}if(!v){for(A=g.child;A;){if(A===s){v=!0,s=g,u=f;break}if(A===u){v=!0,u=g,s=f;break}A=A.sibling}if(!v)throw Error(r(189))}}if(s.alternate!==u)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?t:i}function Gf(t){return t=yv(t),t!==null?xf(t):null}function xf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=xf(t);if(i!==null)return i;t=t.sibling}return null}var bf=n.unstable_scheduleCallback,$f=n.unstable_cancelCallback,Sv=n.unstable_shouldYield,Av=n.unstable_requestPaint,rt=n.unstable_now,Tv=n.unstable_getCurrentPriorityLevel,tu=n.unstable_ImmediatePriority,zf=n.unstable_UserBlockingPriority,xs=n.unstable_NormalPriority,Iv=n.unstable_LowPriority,Wf=n.unstable_IdlePriority,bs=null,Dn=null;function wv(t){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(bs,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:Cv,Ev=Math.log,_v=Math.LN2;function Cv(t){return t>>>=0,t===0?32:31-(Ev(t)/_v|0)|0}var $s=64,zs=4194304;function po(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ws(t,i){var s=t.pendingLanes;if(s===0)return 0;var u=0,f=t.suspendedLanes,g=t.pingedLanes,v=s&268435455;if(v!==0){var A=v&~f;A!==0?u=po(A):(g&=v,g!==0&&(u=po(g)))}else v=s&~f,v!==0?u=po(v):g!==0&&(u=po(g));if(u===0)return 0;if(i!==0&&i!==u&&(i&f)===0&&(f=u&-u,g=i&-i,f>=g||f===16&&(g&4194240)!==0))return i;if((u&4)!==0&&(u|=s&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=u;0<i;)s=31-hn(i),f=1<<s,u|=t[s],i&=~f;return u}function Rv(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pv(t,i){for(var s=t.suspendedLanes,u=t.pingedLanes,f=t.expirationTimes,g=t.pendingLanes;0<g;){var v=31-hn(g),A=1<<v,w=f[v];w===-1?((A&s)===0||(A&u)!==0)&&(f[v]=Rv(A,i)):w<=i&&(t.expiredLanes|=A),g&=~A}}function nu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yf(){var t=$s;return $s<<=1,($s&4194240)===0&&($s=64),t}function iu(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function mo(t,i,s){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-hn(i),t[i]=s}function Nv(t,i){var s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<s;){var f=31-hn(s),g=1<<f;i[f]=0,u[f]=-1,t[f]=-1,s&=~g}}function ru(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var u=31-hn(s),f=1<<u;f&i|t[u]&i&&(t[u]|=i),s&=~f}}var $e=0;function jf(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Vf,ou,Xf,Kf,Qf,su=!1,Ys=[],ri=null,oi=null,si=null,vo=new Map,yo=new Map,ai=[],Dv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qf(t,i){switch(t){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":vo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":yo.delete(i.pointerId)}}function So(t,i,s,u,f,g){return t===null||t.nativeEvent!==g?(t={blockedOn:i,domEventName:s,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},i!==null&&(i=Oo(i),i!==null&&ou(i)),t):(t.eventSystemFlags|=u,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function kv(t,i,s,u,f){switch(i){case"focusin":return ri=So(ri,t,i,s,u,f),!0;case"dragenter":return oi=So(oi,t,i,s,u,f),!0;case"mouseover":return si=So(si,t,i,s,u,f),!0;case"pointerover":var g=f.pointerId;return vo.set(g,So(vo.get(g)||null,t,i,s,u,f)),!0;case"gotpointercapture":return g=f.pointerId,yo.set(g,So(yo.get(g)||null,t,i,s,u,f)),!0}return!1}function Zf(t){var i=Bi(t.target);if(i!==null){var s=Hi(i);if(s!==null){if(i=s.tag,i===13){if(i=Hf(s),i!==null){t.blockedOn=i,Qf(t.priority,function(){Xf(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function js(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=lu(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var u=new s.constructor(s.type,s);Kl=u,s.target.dispatchEvent(u),Kl=null}else return i=Oo(s),i!==null&&ou(i),t.blockedOn=s,!1;i.shift()}return!0}function Jf(t,i,s){js(t)&&s.delete(i)}function Mv(){su=!1,ri!==null&&js(ri)&&(ri=null),oi!==null&&js(oi)&&(oi=null),si!==null&&js(si)&&(si=null),vo.forEach(Jf),yo.forEach(Jf)}function Ao(t,i){t.blockedOn===i&&(t.blockedOn=null,su||(su=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Mv)))}function To(t){function i(f){return Ao(f,t)}if(0<Ys.length){Ao(Ys[0],t);for(var s=1;s<Ys.length;s++){var u=Ys[s];u.blockedOn===t&&(u.blockedOn=null)}}for(ri!==null&&Ao(ri,t),oi!==null&&Ao(oi,t),si!==null&&Ao(si,t),vo.forEach(i),yo.forEach(i),s=0;s<ai.length;s++)u=ai[s],u.blockedOn===t&&(u.blockedOn=null);for(;0<ai.length&&(s=ai[0],s.blockedOn===null);)Zf(s),s.blockedOn===null&&ai.shift()}var gr=x.ReactCurrentBatchConfig,Vs=!0;function Ov(t,i,s,u){var f=$e,g=gr.transition;gr.transition=null;try{$e=1,au(t,i,s,u)}finally{$e=f,gr.transition=g}}function Fv(t,i,s,u){var f=$e,g=gr.transition;gr.transition=null;try{$e=4,au(t,i,s,u)}finally{$e=f,gr.transition=g}}function au(t,i,s,u){if(Vs){var f=lu(t,i,s,u);if(f===null)_u(t,i,u,Xs,s),qf(t,u);else if(kv(f,t,i,s,u))u.stopPropagation();else if(qf(t,u),i&4&&-1<Dv.indexOf(t)){for(;f!==null;){var g=Oo(f);if(g!==null&&Vf(g),g=lu(t,i,s,u),g===null&&_u(t,i,u,Xs,s),g===f)break;f=g}f!==null&&u.stopPropagation()}else _u(t,i,u,null,s)}}var Xs=null;function lu(t,i,s,u){if(Xs=null,t=Ql(u),t=Bi(t),t!==null)if(i=Hi(t),i===null)t=null;else if(s=i.tag,s===13){if(t=Hf(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return Xs=t,null}function eh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tv()){case tu:return 1;case zf:return 4;case xs:case Iv:return 16;case Wf:return 536870912;default:return 16}default:return 16}}var li=null,uu=null,Ks=null;function th(){if(Ks)return Ks;var t,i=uu,s=i.length,u,f="value"in li?li.value:li.textContent,g=f.length;for(t=0;t<s&&i[t]===f[t];t++);var v=s-t;for(u=1;u<=v&&i[s-u]===f[g-u];u++);return Ks=f.slice(t,1<u?1-u:void 0)}function Qs(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function qs(){return!0}function nh(){return!1}function Kt(t){function i(s,u,f,g,v){this._reactName=s,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(s=t[A],this[A]=s?s(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?qs:nh,this.isPropagationStopped=nh,this}return $(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=qs)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=qs)},persist:function(){},isPersistent:qs}),i}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cu=Kt(pr),Io=$({},pr,{view:0,detail:0}),Uv=Kt(Io),du,fu,wo,Zs=$({},Io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wo&&(wo&&t.type==="mousemove"?(du=t.screenX-wo.screenX,fu=t.screenY-wo.screenY):fu=du=0,wo=t),du)},movementY:function(t){return"movementY"in t?t.movementY:fu}}),ih=Kt(Zs),Lv=$({},Zs,{dataTransfer:0}),Hv=Kt(Lv),Bv=$({},Io,{relatedTarget:0}),hu=Kt(Bv),Gv=$({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),xv=Kt(Gv),bv=$({},pr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$v=Kt(bv),zv=$({},pr,{data:0}),rh=Kt(zv),Wv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vv(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=jv[t])?!!i[t]:!1}function gu(){return Vv}var Xv=$({},Io,{key:function(t){if(t.key){var i=Wv[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Qs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gu,charCode:function(t){return t.type==="keypress"?Qs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Kv=Kt(Xv),Qv=$({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oh=Kt(Qv),qv=$({},Io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gu}),Zv=Kt(qv),Jv=$({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ey=Kt(Jv),ty=$({},Zs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ny=Kt(ty),iy=[9,13,27,32],pu=d&&"CompositionEvent"in window,Eo=null;d&&"documentMode"in document&&(Eo=document.documentMode);var ry=d&&"TextEvent"in window&&!Eo,sh=d&&(!pu||Eo&&8<Eo&&11>=Eo),ah=" ",lh=!1;function uh(t,i){switch(t){case"keyup":return iy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ch(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mr=!1;function oy(t,i){switch(t){case"compositionend":return ch(i);case"keypress":return i.which!==32?null:(lh=!0,ah);case"textInput":return t=i.data,t===ah&&lh?null:t;default:return null}}function sy(t,i){if(mr)return t==="compositionend"||!pu&&uh(t,i)?(t=th(),Ks=uu=li=null,mr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return sh&&i.locale!=="ko"?null:i.data;default:return null}}var ay={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!ay[t.type]:i==="textarea"}function fh(t,i,s,u){Mf(u),i=ia(i,"onChange"),0<i.length&&(s=new cu("onChange","change",null,s,u),t.push({event:s,listeners:i}))}var _o=null,Co=null;function ly(t){Dh(t,0)}function Js(t){var i=Tr(t);if(ce(i))return t}function uy(t,i){if(t==="change")return i}var hh=!1;if(d){var mu;if(d){var vu="oninput"in document;if(!vu){var gh=document.createElement("div");gh.setAttribute("oninput","return;"),vu=typeof gh.oninput=="function"}mu=vu}else mu=!1;hh=mu&&(!document.documentMode||9<document.documentMode)}function ph(){_o&&(_o.detachEvent("onpropertychange",mh),Co=_o=null)}function mh(t){if(t.propertyName==="value"&&Js(Co)){var i=[];fh(i,Co,t,Ql(t)),Lf(ly,i)}}function cy(t,i,s){t==="focusin"?(ph(),_o=i,Co=s,_o.attachEvent("onpropertychange",mh)):t==="focusout"&&ph()}function dy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Js(Co)}function fy(t,i){if(t==="click")return Js(i)}function hy(t,i){if(t==="input"||t==="change")return Js(i)}function gy(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var gn=typeof Object.is=="function"?Object.is:gy;function Ro(t,i){if(gn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),u=Object.keys(i);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var f=s[u];if(!h.call(i,f)||!gn(t[f],i[f]))return!1}return!0}function vh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yh(t,i){var s=vh(t);t=0;for(var u;s;){if(s.nodeType===3){if(u=t+s.textContent.length,t<=i&&u>=i)return{node:s,offset:i-t};t=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=vh(s)}}function Sh(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Sh(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Ah(){for(var t=window,i=Cn();i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=Cn(t.document)}return i}function yu(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function py(t){var i=Ah(),s=t.focusedElem,u=t.selectionRange;if(i!==s&&s&&s.ownerDocument&&Sh(s.ownerDocument.documentElement,s)){if(u!==null&&yu(s)){if(i=u.start,t=u.end,t===void 0&&(t=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(t,s.value.length);else if(t=(i=s.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var f=s.textContent.length,g=Math.min(u.start,f);u=u.end===void 0?g:Math.min(u.end,f),!t.extend&&g>u&&(f=u,u=g,g=f),f=yh(s,g);var v=yh(s,u);f&&v&&(t.rangeCount!==1||t.anchorNode!==f.node||t.anchorOffset!==f.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),t.removeAllRanges(),g>u?(t.addRange(i),t.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),t.addRange(i)))}}for(i=[],t=s;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)t=i[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var my=d&&"documentMode"in document&&11>=document.documentMode,vr=null,Su=null,Po=null,Au=!1;function Th(t,i,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Au||vr==null||vr!==Cn(u)||(u=vr,"selectionStart"in u&&yu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Po&&Ro(Po,u)||(Po=u,u=ia(Su,"onSelect"),0<u.length&&(i=new cu("onSelect","select",null,i,s),t.push({event:i,listeners:u}),i.target=vr)))}function ea(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var yr={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionend:ea("Transition","TransitionEnd")},Tu={},Ih={};d&&(Ih=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function ta(t){if(Tu[t])return Tu[t];if(!yr[t])return t;var i=yr[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in Ih)return Tu[t]=i[s];return t}var wh=ta("animationend"),Eh=ta("animationiteration"),_h=ta("animationstart"),Ch=ta("transitionend"),Rh=new Map,Ph="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ui(t,i){Rh.set(t,i),a(i,[t])}for(var Iu=0;Iu<Ph.length;Iu++){var wu=Ph[Iu],vy=wu.toLowerCase(),yy=wu[0].toUpperCase()+wu.slice(1);ui(vy,"on"+yy)}ui(wh,"onAnimationEnd"),ui(Eh,"onAnimationIteration"),ui(_h,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(Ch,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sy=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function Nh(t,i,s){var u=t.type||"unknown-event";t.currentTarget=s,vv(u,i,void 0,t),t.currentTarget=null}function Dh(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var u=t[s],f=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var v=u.length-1;0<=v;v--){var A=u[v],w=A.instance,M=A.currentTarget;if(A=A.listener,w!==g&&f.isPropagationStopped())break e;Nh(f,A,M),g=w}else for(v=0;v<u.length;v++){if(A=u[v],w=A.instance,M=A.currentTarget,A=A.listener,w!==g&&f.isPropagationStopped())break e;Nh(f,A,M),g=w}}}if(Gs)throw t=eu,Gs=!1,eu=null,t}function je(t,i){var s=i[ku];s===void 0&&(s=i[ku]=new Set);var u=t+"__bubble";s.has(u)||(kh(i,t,2,!1),s.add(u))}function Eu(t,i,s){var u=0;i&&(u|=4),kh(s,t,u,i)}var na="_reactListening"+Math.random().toString(36).slice(2);function Do(t){if(!t[na]){t[na]=!0,o.forEach(function(s){s!=="selectionchange"&&(Sy.has(s)||Eu(s,!1,t),Eu(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[na]||(i[na]=!0,Eu("selectionchange",!1,i))}}function kh(t,i,s,u){switch(eh(i)){case 1:var f=Ov;break;case 4:f=Fv;break;default:f=au}s=f.bind(null,i,s,t),f=void 0,!Jl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?t.addEventListener(i,s,{capture:!0,passive:f}):t.addEventListener(i,s,!0):f!==void 0?t.addEventListener(i,s,{passive:f}):t.addEventListener(i,s,!1)}function _u(t,i,s,u,f){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var A=u.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(v===4)for(v=u.return;v!==null;){var w=v.tag;if((w===3||w===4)&&(w=v.stateNode.containerInfo,w===f||w.nodeType===8&&w.parentNode===f))return;v=v.return}for(;A!==null;){if(v=Bi(A),v===null)return;if(w=v.tag,w===5||w===6){u=g=v;continue e}A=A.parentNode}}u=u.return}Lf(function(){var M=g,B=Ql(s),G=[];e:{var H=Rh.get(t);if(H!==void 0){var Q=cu,Z=t;switch(t){case"keypress":if(Qs(s)===0)break e;case"keydown":case"keyup":Q=Kv;break;case"focusin":Z="focus",Q=hu;break;case"focusout":Z="blur",Q=hu;break;case"beforeblur":case"afterblur":Q=hu;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=ih;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Hv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Zv;break;case wh:case Eh:case _h:Q=xv;break;case Ch:Q=ey;break;case"scroll":Q=Uv;break;case"wheel":Q=ny;break;case"copy":case"cut":case"paste":Q=$v;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=oh}var ne=(i&4)!==0,ot=!ne&&t==="scroll",N=ne?H!==null?H+"Capture":null:H;ne=[];for(var R=M,k;R!==null;){k=R;var z=k.stateNode;if(k.tag===5&&z!==null&&(k=z,N!==null&&(z=fo(R,N),z!=null&&ne.push(ko(R,z,k)))),ot)break;R=R.return}0<ne.length&&(H=new Q(H,Z,null,s,B),G.push({event:H,listeners:ne}))}}if((i&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",H&&s!==Kl&&(Z=s.relatedTarget||s.fromElement)&&(Bi(Z)||Z[zn]))break e;if((Q||H)&&(H=B.window===B?B:(H=B.ownerDocument)?H.defaultView||H.parentWindow:window,Q?(Z=s.relatedTarget||s.toElement,Q=M,Z=Z?Bi(Z):null,Z!==null&&(ot=Hi(Z),Z!==ot||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(Q=null,Z=M),Q!==Z)){if(ne=ih,z="onMouseLeave",N="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(ne=oh,z="onPointerLeave",N="onPointerEnter",R="pointer"),ot=Q==null?H:Tr(Q),k=Z==null?H:Tr(Z),H=new ne(z,R+"leave",Q,s,B),H.target=ot,H.relatedTarget=k,z=null,Bi(B)===M&&(ne=new ne(N,R+"enter",Z,s,B),ne.target=k,ne.relatedTarget=ot,z=ne),ot=z,Q&&Z)t:{for(ne=Q,N=Z,R=0,k=ne;k;k=Sr(k))R++;for(k=0,z=N;z;z=Sr(z))k++;for(;0<R-k;)ne=Sr(ne),R--;for(;0<k-R;)N=Sr(N),k--;for(;R--;){if(ne===N||N!==null&&ne===N.alternate)break t;ne=Sr(ne),N=Sr(N)}ne=null}else ne=null;Q!==null&&Mh(G,H,Q,ne,!1),Z!==null&&ot!==null&&Mh(G,ot,Z,ne,!0)}}e:{if(H=M?Tr(M):window,Q=H.nodeName&&H.nodeName.toLowerCase(),Q==="select"||Q==="input"&&H.type==="file")var oe=uy;else if(dh(H))if(hh)oe=hy;else{oe=dy;var de=cy}else(Q=H.nodeName)&&Q.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(oe=fy);if(oe&&(oe=oe(t,M))){fh(G,oe,s,B);break e}de&&de(t,H,M),t==="focusout"&&(de=H._wrapperState)&&de.controlled&&H.type==="number"&&Pn(H,"number",H.value)}switch(de=M?Tr(M):window,t){case"focusin":(dh(de)||de.contentEditable==="true")&&(vr=de,Su=M,Po=null);break;case"focusout":Po=Su=vr=null;break;case"mousedown":Au=!0;break;case"contextmenu":case"mouseup":case"dragend":Au=!1,Th(G,s,B);break;case"selectionchange":if(my)break;case"keydown":case"keyup":Th(G,s,B)}var fe;if(pu)e:{switch(t){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else mr?uh(t,s)&&(Se="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Se="onCompositionStart");Se&&(sh&&s.locale!=="ko"&&(mr||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&mr&&(fe=th()):(li=B,uu="value"in li?li.value:li.textContent,mr=!0)),de=ia(M,Se),0<de.length&&(Se=new rh(Se,t,null,s,B),G.push({event:Se,listeners:de}),fe?Se.data=fe:(fe=ch(s),fe!==null&&(Se.data=fe)))),(fe=ry?oy(t,s):sy(t,s))&&(M=ia(M,"onBeforeInput"),0<M.length&&(B=new rh("onBeforeInput","beforeinput",null,s,B),G.push({event:B,listeners:M}),B.data=fe))}Dh(G,i)})}function ko(t,i,s){return{instance:t,listener:i,currentTarget:s}}function ia(t,i){for(var s=i+"Capture",u=[];t!==null;){var f=t,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=fo(t,s),g!=null&&u.unshift(ko(t,g,f)),g=fo(t,i),g!=null&&u.push(ko(t,g,f))),t=t.return}return u}function Sr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Mh(t,i,s,u,f){for(var g=i._reactName,v=[];s!==null&&s!==u;){var A=s,w=A.alternate,M=A.stateNode;if(w!==null&&w===u)break;A.tag===5&&M!==null&&(A=M,f?(w=fo(s,g),w!=null&&v.unshift(ko(s,w,A))):f||(w=fo(s,g),w!=null&&v.push(ko(s,w,A)))),s=s.return}v.length!==0&&t.push({event:i,listeners:v})}var Ay=/\r\n?/g,Ty=/\u0000|\uFFFD/g;function Oh(t){return(typeof t=="string"?t:""+t).replace(Ay,`
`).replace(Ty,"")}function ra(t,i,s){if(i=Oh(i),Oh(t)!==i&&s)throw Error(r(425))}function oa(){}var Cu=null,Ru=null;function Pu(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Nu=typeof setTimeout=="function"?setTimeout:void 0,Iy=typeof clearTimeout=="function"?clearTimeout:void 0,Fh=typeof Promise=="function"?Promise:void 0,wy=typeof queueMicrotask=="function"?queueMicrotask:typeof Fh<"u"?function(t){return Fh.resolve(null).then(t).catch(Ey)}:Nu;function Ey(t){setTimeout(function(){throw t})}function Du(t,i){var s=i,u=0;do{var f=s.nextSibling;if(t.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(u===0){t.removeChild(f),To(i);return}u--}else s!=="$"&&s!=="$?"&&s!=="$!"||u++;s=f}while(s);To(i)}function ci(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function Uh(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return t;i--}else s==="/$"&&i++}t=t.previousSibling}return null}var Ar=Math.random().toString(36).slice(2),kn="__reactFiber$"+Ar,Mo="__reactProps$"+Ar,zn="__reactContainer$"+Ar,ku="__reactEvents$"+Ar,_y="__reactListeners$"+Ar,Cy="__reactHandles$"+Ar;function Bi(t){var i=t[kn];if(i)return i;for(var s=t.parentNode;s;){if(i=s[zn]||s[kn]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=Uh(t);t!==null;){if(s=t[kn])return s;t=Uh(t)}return i}t=s,s=t.parentNode}return null}function Oo(t){return t=t[kn]||t[zn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Tr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function sa(t){return t[Mo]||null}var Mu=[],Ir=-1;function di(t){return{current:t}}function Ve(t){0>Ir||(t.current=Mu[Ir],Mu[Ir]=null,Ir--)}function We(t,i){Ir++,Mu[Ir]=t.current,t.current=i}var fi={},Et=di(fi),Gt=di(!1),Gi=fi;function wr(t,i){var s=t.type.contextTypes;if(!s)return fi;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in s)f[g]=i[g];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=f),f}function xt(t){return t=t.childContextTypes,t!=null}function aa(){Ve(Gt),Ve(Et)}function Lh(t,i,s){if(Et.current!==fi)throw Error(r(168));We(Et,i),We(Gt,s)}function Hh(t,i,s){var u=t.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return s;u=u.getChildContext();for(var f in u)if(!(f in i))throw Error(r(108,ye(t)||"Unknown",f));return $({},s,u)}function la(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fi,Gi=Et.current,We(Et,t),We(Gt,Gt.current),!0}function Bh(t,i,s){var u=t.stateNode;if(!u)throw Error(r(169));s?(t=Hh(t,i,Gi),u.__reactInternalMemoizedMergedChildContext=t,Ve(Gt),Ve(Et),We(Et,t)):Ve(Gt),We(Gt,s)}var Wn=null,ua=!1,Ou=!1;function Gh(t){Wn===null?Wn=[t]:Wn.push(t)}function Ry(t){ua=!0,Gh(t)}function hi(){if(!Ou&&Wn!==null){Ou=!0;var t=0,i=$e;try{var s=Wn;for($e=1;t<s.length;t++){var u=s[t];do u=u(!0);while(u!==null)}Wn=null,ua=!1}catch(f){throw Wn!==null&&(Wn=Wn.slice(t+1)),bf(tu,hi),f}finally{$e=i,Ou=!1}}return null}var Er=[],_r=0,ca=null,da=0,rn=[],on=0,xi=null,Yn=1,jn="";function bi(t,i){Er[_r++]=da,Er[_r++]=ca,ca=t,da=i}function xh(t,i,s){rn[on++]=Yn,rn[on++]=jn,rn[on++]=xi,xi=t;var u=Yn;t=jn;var f=32-hn(u)-1;u&=~(1<<f),s+=1;var g=32-hn(i)+f;if(30<g){var v=f-f%5;g=(u&(1<<v)-1).toString(32),u>>=v,f-=v,Yn=1<<32-hn(i)+f|s<<f|u,jn=g+t}else Yn=1<<g|s<<f|u,jn=t}function Fu(t){t.return!==null&&(bi(t,1),xh(t,1,0))}function Uu(t){for(;t===ca;)ca=Er[--_r],Er[_r]=null,da=Er[--_r],Er[_r]=null;for(;t===xi;)xi=rn[--on],rn[on]=null,jn=rn[--on],rn[on]=null,Yn=rn[--on],rn[on]=null}var Qt=null,qt=null,Qe=!1,pn=null;function bh(t,i){var s=un(5,null,null,0);s.elementType="DELETED",s.stateNode=i,s.return=t,i=t.deletions,i===null?(t.deletions=[s],t.flags|=16):i.push(s)}function $h(t,i){switch(t.tag){case 5:var s=t.type;return i=i.nodeType!==1||s.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,Qt=t,qt=ci(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,Qt=t,qt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(s=xi!==null?{id:Yn,overflow:jn}:null,t.memoizedState={dehydrated:i,treeContext:s,retryLane:1073741824},s=un(18,null,null,0),s.stateNode=i,s.return=t,t.child=s,Qt=t,qt=null,!0):!1;default:return!1}}function Lu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hu(t){if(Qe){var i=qt;if(i){var s=i;if(!$h(t,i)){if(Lu(t))throw Error(r(418));i=ci(s.nextSibling);var u=Qt;i&&$h(t,i)?bh(u,s):(t.flags=t.flags&-4097|2,Qe=!1,Qt=t)}}else{if(Lu(t))throw Error(r(418));t.flags=t.flags&-4097|2,Qe=!1,Qt=t}}}function zh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function fa(t){if(t!==Qt)return!1;if(!Qe)return zh(t),Qe=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!Pu(t.type,t.memoizedProps)),i&&(i=qt)){if(Lu(t))throw Wh(),Error(r(418));for(;i;)bh(t,i),i=ci(i.nextSibling)}if(zh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(i===0){qt=ci(t.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++}t=t.nextSibling}qt=null}}else qt=Qt?ci(t.stateNode.nextSibling):null;return!0}function Wh(){for(var t=qt;t;)t=ci(t.nextSibling)}function Cr(){qt=Qt=null,Qe=!1}function Bu(t){pn===null?pn=[t]:pn.push(t)}var Py=x.ReactCurrentBatchConfig;function Fo(t,i,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var u=s.stateNode}if(!u)throw Error(r(147,t));var f=u,g=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(v){var A=f.refs;v===null?delete A[g]:A[g]=v},i._stringRef=g,i)}if(typeof t!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,t))}return t}function ha(t,i){throw t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function Yh(t){var i=t._init;return i(t._payload)}function jh(t){function i(N,R){if(t){var k=N.deletions;k===null?(N.deletions=[R],N.flags|=16):k.push(R)}}function s(N,R){if(!t)return null;for(;R!==null;)i(N,R),R=R.sibling;return null}function u(N,R){for(N=new Map;R!==null;)R.key!==null?N.set(R.key,R):N.set(R.index,R),R=R.sibling;return N}function f(N,R){return N=Ti(N,R),N.index=0,N.sibling=null,N}function g(N,R,k){return N.index=k,t?(k=N.alternate,k!==null?(k=k.index,k<R?(N.flags|=2,R):k):(N.flags|=2,R)):(N.flags|=1048576,R)}function v(N){return t&&N.alternate===null&&(N.flags|=2),N}function A(N,R,k,z){return R===null||R.tag!==6?(R=Nc(k,N.mode,z),R.return=N,R):(R=f(R,k),R.return=N,R)}function w(N,R,k,z){var oe=k.type;return oe===Y?B(N,R,k.props.children,z,k.key):R!==null&&(R.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===ve&&Yh(oe)===R.type)?(z=f(R,k.props),z.ref=Fo(N,R,k),z.return=N,z):(z=Ha(k.type,k.key,k.props,null,N.mode,z),z.ref=Fo(N,R,k),z.return=N,z)}function M(N,R,k,z){return R===null||R.tag!==4||R.stateNode.containerInfo!==k.containerInfo||R.stateNode.implementation!==k.implementation?(R=Dc(k,N.mode,z),R.return=N,R):(R=f(R,k.children||[]),R.return=N,R)}function B(N,R,k,z,oe){return R===null||R.tag!==7?(R=Ki(k,N.mode,z,oe),R.return=N,R):(R=f(R,k),R.return=N,R)}function G(N,R,k){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Nc(""+R,N.mode,k),R.return=N,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case W:return k=Ha(R.type,R.key,R.props,null,N.mode,k),k.ref=Fo(N,null,R),k.return=N,k;case F:return R=Dc(R,N.mode,k),R.return=N,R;case ve:var z=R._init;return G(N,z(R._payload),k)}if(Nn(R)||j(R))return R=Ki(R,N.mode,k,null),R.return=N,R;ha(N,R)}return null}function H(N,R,k,z){var oe=R!==null?R.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return oe!==null?null:A(N,R,""+k,z);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case W:return k.key===oe?w(N,R,k,z):null;case F:return k.key===oe?M(N,R,k,z):null;case ve:return oe=k._init,H(N,R,oe(k._payload),z)}if(Nn(k)||j(k))return oe!==null?null:B(N,R,k,z,null);ha(N,k)}return null}function Q(N,R,k,z,oe){if(typeof z=="string"&&z!==""||typeof z=="number")return N=N.get(k)||null,A(R,N,""+z,oe);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case W:return N=N.get(z.key===null?k:z.key)||null,w(R,N,z,oe);case F:return N=N.get(z.key===null?k:z.key)||null,M(R,N,z,oe);case ve:var de=z._init;return Q(N,R,k,de(z._payload),oe)}if(Nn(z)||j(z))return N=N.get(k)||null,B(R,N,z,oe,null);ha(R,z)}return null}function Z(N,R,k,z){for(var oe=null,de=null,fe=R,Se=R=0,gt=null;fe!==null&&Se<k.length;Se++){fe.index>Se?(gt=fe,fe=null):gt=fe.sibling;var Ge=H(N,fe,k[Se],z);if(Ge===null){fe===null&&(fe=gt);break}t&&fe&&Ge.alternate===null&&i(N,fe),R=g(Ge,R,Se),de===null?oe=Ge:de.sibling=Ge,de=Ge,fe=gt}if(Se===k.length)return s(N,fe),Qe&&bi(N,Se),oe;if(fe===null){for(;Se<k.length;Se++)fe=G(N,k[Se],z),fe!==null&&(R=g(fe,R,Se),de===null?oe=fe:de.sibling=fe,de=fe);return Qe&&bi(N,Se),oe}for(fe=u(N,fe);Se<k.length;Se++)gt=Q(fe,N,Se,k[Se],z),gt!==null&&(t&&gt.alternate!==null&&fe.delete(gt.key===null?Se:gt.key),R=g(gt,R,Se),de===null?oe=gt:de.sibling=gt,de=gt);return t&&fe.forEach(function(Ii){return i(N,Ii)}),Qe&&bi(N,Se),oe}function ne(N,R,k,z){var oe=j(k);if(typeof oe!="function")throw Error(r(150));if(k=oe.call(k),k==null)throw Error(r(151));for(var de=oe=null,fe=R,Se=R=0,gt=null,Ge=k.next();fe!==null&&!Ge.done;Se++,Ge=k.next()){fe.index>Se?(gt=fe,fe=null):gt=fe.sibling;var Ii=H(N,fe,Ge.value,z);if(Ii===null){fe===null&&(fe=gt);break}t&&fe&&Ii.alternate===null&&i(N,fe),R=g(Ii,R,Se),de===null?oe=Ii:de.sibling=Ii,de=Ii,fe=gt}if(Ge.done)return s(N,fe),Qe&&bi(N,Se),oe;if(fe===null){for(;!Ge.done;Se++,Ge=k.next())Ge=G(N,Ge.value,z),Ge!==null&&(R=g(Ge,R,Se),de===null?oe=Ge:de.sibling=Ge,de=Ge);return Qe&&bi(N,Se),oe}for(fe=u(N,fe);!Ge.done;Se++,Ge=k.next())Ge=Q(fe,N,Se,Ge.value,z),Ge!==null&&(t&&Ge.alternate!==null&&fe.delete(Ge.key===null?Se:Ge.key),R=g(Ge,R,Se),de===null?oe=Ge:de.sibling=Ge,de=Ge);return t&&fe.forEach(function(aS){return i(N,aS)}),Qe&&bi(N,Se),oe}function ot(N,R,k,z){if(typeof k=="object"&&k!==null&&k.type===Y&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case W:e:{for(var oe=k.key,de=R;de!==null;){if(de.key===oe){if(oe=k.type,oe===Y){if(de.tag===7){s(N,de.sibling),R=f(de,k.props.children),R.return=N,N=R;break e}}else if(de.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===ve&&Yh(oe)===de.type){s(N,de.sibling),R=f(de,k.props),R.ref=Fo(N,de,k),R.return=N,N=R;break e}s(N,de);break}else i(N,de);de=de.sibling}k.type===Y?(R=Ki(k.props.children,N.mode,z,k.key),R.return=N,N=R):(z=Ha(k.type,k.key,k.props,null,N.mode,z),z.ref=Fo(N,R,k),z.return=N,N=z)}return v(N);case F:e:{for(de=k.key;R!==null;){if(R.key===de)if(R.tag===4&&R.stateNode.containerInfo===k.containerInfo&&R.stateNode.implementation===k.implementation){s(N,R.sibling),R=f(R,k.children||[]),R.return=N,N=R;break e}else{s(N,R);break}else i(N,R);R=R.sibling}R=Dc(k,N.mode,z),R.return=N,N=R}return v(N);case ve:return de=k._init,ot(N,R,de(k._payload),z)}if(Nn(k))return Z(N,R,k,z);if(j(k))return ne(N,R,k,z);ha(N,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,R!==null&&R.tag===6?(s(N,R.sibling),R=f(R,k),R.return=N,N=R):(s(N,R),R=Nc(k,N.mode,z),R.return=N,N=R),v(N)):s(N,R)}return ot}var Rr=jh(!0),Vh=jh(!1),ga=di(null),pa=null,Pr=null,Gu=null;function xu(){Gu=Pr=pa=null}function bu(t){var i=ga.current;Ve(ga),t._currentValue=i}function $u(t,i,s){for(;t!==null;){var u=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),t===s)break;t=t.return}}function Nr(t,i){pa=t,Gu=Pr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(bt=!0),t.firstContext=null)}function sn(t){var i=t._currentValue;if(Gu!==t)if(t={context:t,memoizedValue:i,next:null},Pr===null){if(pa===null)throw Error(r(308));Pr=t,pa.dependencies={lanes:0,firstContext:t}}else Pr=Pr.next=t;return i}var $i=null;function zu(t){$i===null?$i=[t]:$i.push(t)}function Xh(t,i,s,u){var f=i.interleaved;return f===null?(s.next=s,zu(i)):(s.next=f.next,f.next=s),i.interleaved=s,Vn(t,u)}function Vn(t,i){t.lanes|=i;var s=t.alternate;for(s!==null&&(s.lanes|=i),s=t,t=t.return;t!==null;)t.childLanes|=i,s=t.alternate,s!==null&&(s.childLanes|=i),s=t,t=t.return;return s.tag===3?s.stateNode:null}var gi=!1;function Wu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kh(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function pi(t,i,s){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(He&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,Vn(t,s)}return f=u.interleaved,f===null?(i.next=i,zu(u)):(i.next=f.next,f.next=i),u.interleaved=i,Vn(t,s)}function ma(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194240)!==0)){var u=i.lanes;u&=t.pendingLanes,s|=u,i.lanes=s,ru(t,s)}}function Qh(t,i){var s=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var f=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var v={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};g===null?f=g=v:g=g.next=v,s=s.next}while(s!==null);g===null?f=g=i:g=g.next=i}else f=g=i;s={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,effects:u.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}function va(t,i,s,u){var f=t.updateQueue;gi=!1;var g=f.firstBaseUpdate,v=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var w=A,M=w.next;w.next=null,v===null?g=M:v.next=M,v=w;var B=t.alternate;B!==null&&(B=B.updateQueue,A=B.lastBaseUpdate,A!==v&&(A===null?B.firstBaseUpdate=M:A.next=M,B.lastBaseUpdate=w))}if(g!==null){var G=f.baseState;v=0,B=M=w=null,A=g;do{var H=A.lane,Q=A.eventTime;if((u&H)===H){B!==null&&(B=B.next={eventTime:Q,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var Z=t,ne=A;switch(H=i,Q=s,ne.tag){case 1:if(Z=ne.payload,typeof Z=="function"){G=Z.call(Q,G,H);break e}G=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=ne.payload,H=typeof Z=="function"?Z.call(Q,G,H):Z,H==null)break e;G=$({},G,H);break e;case 2:gi=!0}}A.callback!==null&&A.lane!==0&&(t.flags|=64,H=f.effects,H===null?f.effects=[A]:H.push(A))}else Q={eventTime:Q,lane:H,tag:A.tag,payload:A.payload,callback:A.callback,next:null},B===null?(M=B=Q,w=G):B=B.next=Q,v|=H;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;H=A,A=H.next,H.next=null,f.lastBaseUpdate=H,f.shared.pending=null}}while(!0);if(B===null&&(w=G),f.baseState=w,f.firstBaseUpdate=M,f.lastBaseUpdate=B,i=f.shared.interleaved,i!==null){f=i;do v|=f.lane,f=f.next;while(f!==i)}else g===null&&(f.shared.lanes=0);Yi|=v,t.lanes=v,t.memoizedState=G}}function qh(t,i,s){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var u=t[i],f=u.callback;if(f!==null){if(u.callback=null,u=s,typeof f!="function")throw Error(r(191,f));f.call(u)}}}var Uo={},Mn=di(Uo),Lo=di(Uo),Ho=di(Uo);function zi(t){if(t===Uo)throw Error(r(174));return t}function Yu(t,i){switch(We(Ho,i),We(Lo,t),We(Mn,Uo),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:jl(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=jl(i,t)}Ve(Mn),We(Mn,i)}function Dr(){Ve(Mn),Ve(Lo),Ve(Ho)}function Zh(t){zi(Ho.current);var i=zi(Mn.current),s=jl(i,t.type);i!==s&&(We(Lo,t),We(Mn,s))}function ju(t){Lo.current===t&&(Ve(Mn),Ve(Lo))}var tt=di(0);function ya(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Vu=[];function Xu(){for(var t=0;t<Vu.length;t++)Vu[t]._workInProgressVersionPrimary=null;Vu.length=0}var Sa=x.ReactCurrentDispatcher,Ku=x.ReactCurrentBatchConfig,Wi=0,nt=null,ct=null,ft=null,Aa=!1,Bo=!1,Go=0,Ny=0;function _t(){throw Error(r(321))}function Qu(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!gn(t[s],i[s]))return!1;return!0}function qu(t,i,s,u,f,g){if(Wi=g,nt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Sa.current=t===null||t.memoizedState===null?Oy:Fy,t=s(u,f),Bo){g=0;do{if(Bo=!1,Go=0,25<=g)throw Error(r(301));g+=1,ft=ct=null,i.updateQueue=null,Sa.current=Uy,t=s(u,f)}while(Bo)}if(Sa.current=wa,i=ct!==null&&ct.next!==null,Wi=0,ft=ct=nt=null,Aa=!1,i)throw Error(r(300));return t}function Zu(){var t=Go!==0;return Go=0,t}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?nt.memoizedState=ft=t:ft=ft.next=t,ft}function an(){if(ct===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var i=ft===null?nt.memoizedState:ft.next;if(i!==null)ft=i,ct=t;else{if(t===null)throw Error(r(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},ft===null?nt.memoizedState=ft=t:ft=ft.next=t}return ft}function xo(t,i){return typeof i=="function"?i(t):i}function Ju(t){var i=an(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var u=ct,f=u.baseQueue,g=s.pending;if(g!==null){if(f!==null){var v=f.next;f.next=g.next,g.next=v}u.baseQueue=f=g,s.pending=null}if(f!==null){g=f.next,u=u.baseState;var A=v=null,w=null,M=g;do{var B=M.lane;if((Wi&B)===B)w!==null&&(w=w.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),u=M.hasEagerState?M.eagerState:t(u,M.action);else{var G={lane:B,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};w===null?(A=w=G,v=u):w=w.next=G,nt.lanes|=B,Yi|=B}M=M.next}while(M!==null&&M!==g);w===null?v=u:w.next=A,gn(u,i.memoizedState)||(bt=!0),i.memoizedState=u,i.baseState=v,i.baseQueue=w,s.lastRenderedState=u}if(t=s.interleaved,t!==null){f=t;do g=f.lane,nt.lanes|=g,Yi|=g,f=f.next;while(f!==t)}else f===null&&(s.lanes=0);return[i.memoizedState,s.dispatch]}function ec(t){var i=an(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var u=s.dispatch,f=s.pending,g=i.memoizedState;if(f!==null){s.pending=null;var v=f=f.next;do g=t(g,v.action),v=v.next;while(v!==f);gn(g,i.memoizedState)||(bt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),s.lastRenderedState=g}return[g,u]}function Jh(){}function eg(t,i){var s=nt,u=an(),f=i(),g=!gn(u.memoizedState,f);if(g&&(u.memoizedState=f,bt=!0),u=u.queue,tc(ig.bind(null,s,u,t),[t]),u.getSnapshot!==i||g||ft!==null&&ft.memoizedState.tag&1){if(s.flags|=2048,bo(9,ng.bind(null,s,u,f,i),void 0,null),ht===null)throw Error(r(349));(Wi&30)!==0||tg(s,i,f)}return f}function tg(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=nt.updateQueue,i===null?(i={lastEffect:null,stores:null},nt.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function ng(t,i,s,u){i.value=s,i.getSnapshot=u,rg(i)&&og(t)}function ig(t,i,s){return s(function(){rg(i)&&og(t)})}function rg(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!gn(t,s)}catch{return!0}}function og(t){var i=Vn(t,1);i!==null&&Sn(i,t,1,-1)}function sg(t){var i=On();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:t},i.queue=t,t=t.dispatch=My.bind(null,nt,t),[i.memoizedState,t]}function bo(t,i,s,u){return t={tag:t,create:i,destroy:s,deps:u,next:null},i=nt.updateQueue,i===null?(i={lastEffect:null,stores:null},nt.updateQueue=i,i.lastEffect=t.next=t):(s=i.lastEffect,s===null?i.lastEffect=t.next=t:(u=s.next,s.next=t,t.next=u,i.lastEffect=t)),t}function ag(){return an().memoizedState}function Ta(t,i,s,u){var f=On();nt.flags|=t,f.memoizedState=bo(1|i,s,void 0,u===void 0?null:u)}function Ia(t,i,s,u){var f=an();u=u===void 0?null:u;var g=void 0;if(ct!==null){var v=ct.memoizedState;if(g=v.destroy,u!==null&&Qu(u,v.deps)){f.memoizedState=bo(i,s,g,u);return}}nt.flags|=t,f.memoizedState=bo(1|i,s,g,u)}function lg(t,i){return Ta(8390656,8,t,i)}function tc(t,i){return Ia(2048,8,t,i)}function ug(t,i){return Ia(4,2,t,i)}function cg(t,i){return Ia(4,4,t,i)}function dg(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function fg(t,i,s){return s=s!=null?s.concat([t]):null,Ia(4,4,dg.bind(null,i,t),s)}function nc(){}function hg(t,i){var s=an();i=i===void 0?null:i;var u=s.memoizedState;return u!==null&&i!==null&&Qu(i,u[1])?u[0]:(s.memoizedState=[t,i],t)}function gg(t,i){var s=an();i=i===void 0?null:i;var u=s.memoizedState;return u!==null&&i!==null&&Qu(i,u[1])?u[0]:(t=t(),s.memoizedState=[t,i],t)}function pg(t,i,s){return(Wi&21)===0?(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=s):(gn(s,i)||(s=Yf(),nt.lanes|=s,Yi|=s,t.baseState=!0),i)}function Dy(t,i){var s=$e;$e=s!==0&&4>s?s:4,t(!0);var u=Ku.transition;Ku.transition={};try{t(!1),i()}finally{$e=s,Ku.transition=u}}function mg(){return an().memoizedState}function ky(t,i,s){var u=Si(t);if(s={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null},vg(t))yg(i,s);else if(s=Xh(t,i,s,u),s!==null){var f=kt();Sn(s,t,u,f),Sg(s,i,u)}}function My(t,i,s){var u=Si(t),f={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null};if(vg(t))yg(i,f);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var v=i.lastRenderedState,A=g(v,s);if(f.hasEagerState=!0,f.eagerState=A,gn(A,v)){var w=i.interleaved;w===null?(f.next=f,zu(i)):(f.next=w.next,w.next=f),i.interleaved=f;return}}catch{}finally{}s=Xh(t,i,f,u),s!==null&&(f=kt(),Sn(s,t,u,f),Sg(s,i,u))}}function vg(t){var i=t.alternate;return t===nt||i!==null&&i===nt}function yg(t,i){Bo=Aa=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function Sg(t,i,s){if((s&4194240)!==0){var u=i.lanes;u&=t.pendingLanes,s|=u,i.lanes=s,ru(t,s)}}var wa={readContext:sn,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},Oy={readContext:sn,useCallback:function(t,i){return On().memoizedState=[t,i===void 0?null:i],t},useContext:sn,useEffect:lg,useImperativeHandle:function(t,i,s){return s=s!=null?s.concat([t]):null,Ta(4194308,4,dg.bind(null,i,t),s)},useLayoutEffect:function(t,i){return Ta(4194308,4,t,i)},useInsertionEffect:function(t,i){return Ta(4,2,t,i)},useMemo:function(t,i){var s=On();return i=i===void 0?null:i,t=t(),s.memoizedState=[t,i],t},useReducer:function(t,i,s){var u=On();return i=s!==void 0?s(i):i,u.memoizedState=u.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},u.queue=t,t=t.dispatch=ky.bind(null,nt,t),[u.memoizedState,t]},useRef:function(t){var i=On();return t={current:t},i.memoizedState=t},useState:sg,useDebugValue:nc,useDeferredValue:function(t){return On().memoizedState=t},useTransition:function(){var t=sg(!1),i=t[0];return t=Dy.bind(null,t[1]),On().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,s){var u=nt,f=On();if(Qe){if(s===void 0)throw Error(r(407));s=s()}else{if(s=i(),ht===null)throw Error(r(349));(Wi&30)!==0||tg(u,i,s)}f.memoizedState=s;var g={value:s,getSnapshot:i};return f.queue=g,lg(ig.bind(null,u,g,t),[t]),u.flags|=2048,bo(9,ng.bind(null,u,g,s,i),void 0,null),s},useId:function(){var t=On(),i=ht.identifierPrefix;if(Qe){var s=jn,u=Yn;s=(u&~(1<<32-hn(u)-1)).toString(32)+s,i=":"+i+"R"+s,s=Go++,0<s&&(i+="H"+s.toString(32)),i+=":"}else s=Ny++,i=":"+i+"r"+s.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},Fy={readContext:sn,useCallback:hg,useContext:sn,useEffect:tc,useImperativeHandle:fg,useInsertionEffect:ug,useLayoutEffect:cg,useMemo:gg,useReducer:Ju,useRef:ag,useState:function(){return Ju(xo)},useDebugValue:nc,useDeferredValue:function(t){var i=an();return pg(i,ct.memoizedState,t)},useTransition:function(){var t=Ju(xo)[0],i=an().memoizedState;return[t,i]},useMutableSource:Jh,useSyncExternalStore:eg,useId:mg,unstable_isNewReconciler:!1},Uy={readContext:sn,useCallback:hg,useContext:sn,useEffect:tc,useImperativeHandle:fg,useInsertionEffect:ug,useLayoutEffect:cg,useMemo:gg,useReducer:ec,useRef:ag,useState:function(){return ec(xo)},useDebugValue:nc,useDeferredValue:function(t){var i=an();return ct===null?i.memoizedState=t:pg(i,ct.memoizedState,t)},useTransition:function(){var t=ec(xo)[0],i=an().memoizedState;return[t,i]},useMutableSource:Jh,useSyncExternalStore:eg,useId:mg,unstable_isNewReconciler:!1};function mn(t,i){if(t&&t.defaultProps){i=$({},i),t=t.defaultProps;for(var s in t)i[s]===void 0&&(i[s]=t[s]);return i}return i}function ic(t,i,s,u){i=t.memoizedState,s=s(u,i),s=s==null?i:$({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Ea={isMounted:function(t){return(t=t._reactInternals)?Hi(t)===t:!1},enqueueSetState:function(t,i,s){t=t._reactInternals;var u=kt(),f=Si(t),g=Xn(u,f);g.payload=i,s!=null&&(g.callback=s),i=pi(t,g,f),i!==null&&(Sn(i,t,f,u),ma(i,t,f))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var u=kt(),f=Si(t),g=Xn(u,f);g.tag=1,g.payload=i,s!=null&&(g.callback=s),i=pi(t,g,f),i!==null&&(Sn(i,t,f,u),ma(i,t,f))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=kt(),u=Si(t),f=Xn(s,u);f.tag=2,i!=null&&(f.callback=i),i=pi(t,f,u),i!==null&&(Sn(i,t,u,s),ma(i,t,u))}};function Ag(t,i,s,u,f,g,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,g,v):i.prototype&&i.prototype.isPureReactComponent?!Ro(s,u)||!Ro(f,g):!0}function Tg(t,i,s){var u=!1,f=fi,g=i.contextType;return typeof g=="object"&&g!==null?g=sn(g):(f=xt(i)?Gi:Et.current,u=i.contextTypes,g=(u=u!=null)?wr(t,f):fi),i=new i(s,g),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ea,t.stateNode=i,i._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=f,t.__reactInternalMemoizedMaskedChildContext=g),i}function Ig(t,i,s,u){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,u),i.state!==t&&Ea.enqueueReplaceState(i,i.state,null)}function rc(t,i,s,u){var f=t.stateNode;f.props=s,f.state=t.memoizedState,f.refs={},Wu(t);var g=i.contextType;typeof g=="object"&&g!==null?f.context=sn(g):(g=xt(i)?Gi:Et.current,f.context=wr(t,g)),f.state=t.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(ic(t,i,g,s),f.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&Ea.enqueueReplaceState(f,f.state,null),va(t,s,f,u),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308)}function kr(t,i){try{var s="",u=i;do s+=he(u),u=u.return;while(u);var f=s}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:t,source:i,stack:f,digest:null}}function oc(t,i,s){return{value:t,source:null,stack:s??null,digest:i??null}}function sc(t,i){try{console.error(i.value)}catch(s){setTimeout(function(){throw s})}}var Ly=typeof WeakMap=="function"?WeakMap:Map;function wg(t,i,s){s=Xn(-1,s),s.tag=3,s.payload={element:null};var u=i.value;return s.callback=function(){ka||(ka=!0,Tc=u),sc(t,i)},s}function Eg(t,i,s){s=Xn(-1,s),s.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var f=i.value;s.payload=function(){return u(f)},s.callback=function(){sc(t,i)}}var g=t.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(s.callback=function(){sc(t,i),typeof u!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),s}function _g(t,i,s){var u=t.pingCache;if(u===null){u=t.pingCache=new Ly;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(s)||(f.add(s),t=Qy.bind(null,t,i,s),i.then(t,t))}function Cg(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function Rg(t,i,s,u,f){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(i=Xn(-1,1),i.tag=2,pi(s,i,1))),s.lanes|=1),t):(t.flags|=65536,t.lanes=f,t)}var Hy=x.ReactCurrentOwner,bt=!1;function Dt(t,i,s,u){i.child=t===null?Vh(i,null,s,u):Rr(i,t.child,s,u)}function Pg(t,i,s,u,f){s=s.render;var g=i.ref;return Nr(i,f),u=qu(t,i,s,u,g,f),s=Zu(),t!==null&&!bt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~f,Kn(t,i,f)):(Qe&&s&&Fu(i),i.flags|=1,Dt(t,i,u,f),i.child)}function Ng(t,i,s,u,f){if(t===null){var g=s.type;return typeof g=="function"&&!Pc(g)&&g.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(i.tag=15,i.type=g,Dg(t,i,g,u,f)):(t=Ha(s.type,null,u,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(g=t.child,(t.lanes&f)===0){var v=g.memoizedProps;if(s=s.compare,s=s!==null?s:Ro,s(v,u)&&t.ref===i.ref)return Kn(t,i,f)}return i.flags|=1,t=Ti(g,u),t.ref=i.ref,t.return=i,i.child=t}function Dg(t,i,s,u,f){if(t!==null){var g=t.memoizedProps;if(Ro(g,u)&&t.ref===i.ref)if(bt=!1,i.pendingProps=u=g,(t.lanes&f)!==0)(t.flags&131072)!==0&&(bt=!0);else return i.lanes=t.lanes,Kn(t,i,f)}return ac(t,i,s,u,f)}function kg(t,i,s){var u=i.pendingProps,f=u.children,g=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Or,Zt),Zt|=s;else{if((s&1073741824)===0)return t=g!==null?g.baseLanes|s:s,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,We(Or,Zt),Zt|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=g!==null?g.baseLanes:s,We(Or,Zt),Zt|=u}else g!==null?(u=g.baseLanes|s,i.memoizedState=null):u=s,We(Or,Zt),Zt|=u;return Dt(t,i,f,s),i.child}function Mg(t,i){var s=i.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(i.flags|=512,i.flags|=2097152)}function ac(t,i,s,u,f){var g=xt(s)?Gi:Et.current;return g=wr(i,g),Nr(i,f),s=qu(t,i,s,u,g,f),u=Zu(),t!==null&&!bt?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~f,Kn(t,i,f)):(Qe&&u&&Fu(i),i.flags|=1,Dt(t,i,s,f),i.child)}function Og(t,i,s,u,f){if(xt(s)){var g=!0;la(i)}else g=!1;if(Nr(i,f),i.stateNode===null)Ca(t,i),Tg(i,s,u),rc(i,s,u,f),u=!0;else if(t===null){var v=i.stateNode,A=i.memoizedProps;v.props=A;var w=v.context,M=s.contextType;typeof M=="object"&&M!==null?M=sn(M):(M=xt(s)?Gi:Et.current,M=wr(i,M));var B=s.getDerivedStateFromProps,G=typeof B=="function"||typeof v.getSnapshotBeforeUpdate=="function";G||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==u||w!==M)&&Ig(i,v,u,M),gi=!1;var H=i.memoizedState;v.state=H,va(i,u,v,f),w=i.memoizedState,A!==u||H!==w||Gt.current||gi?(typeof B=="function"&&(ic(i,s,B,u),w=i.memoizedState),(A=gi||Ag(i,s,A,u,H,w,M))?(G||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=w),v.props=u,v.state=w,v.context=M,u=A):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{v=i.stateNode,Kh(t,i),A=i.memoizedProps,M=i.type===i.elementType?A:mn(i.type,A),v.props=M,G=i.pendingProps,H=v.context,w=s.contextType,typeof w=="object"&&w!==null?w=sn(w):(w=xt(s)?Gi:Et.current,w=wr(i,w));var Q=s.getDerivedStateFromProps;(B=typeof Q=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==G||H!==w)&&Ig(i,v,u,w),gi=!1,H=i.memoizedState,v.state=H,va(i,u,v,f);var Z=i.memoizedState;A!==G||H!==Z||Gt.current||gi?(typeof Q=="function"&&(ic(i,s,Q,u),Z=i.memoizedState),(M=gi||Ag(i,s,M,u,H,Z,w)||!1)?(B||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,Z,w),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,Z,w)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Z),v.props=u,v.state=Z,v.context=w,u=M):(typeof v.componentDidUpdate!="function"||A===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),u=!1)}return lc(t,i,s,u,g,f)}function lc(t,i,s,u,f,g){Mg(t,i);var v=(i.flags&128)!==0;if(!u&&!v)return f&&Bh(i,s,!1),Kn(t,i,g);u=i.stateNode,Hy.current=i;var A=v&&typeof s.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,t!==null&&v?(i.child=Rr(i,t.child,null,g),i.child=Rr(i,null,A,g)):Dt(t,i,A,g),i.memoizedState=u.state,f&&Bh(i,s,!0),i.child}function Fg(t){var i=t.stateNode;i.pendingContext?Lh(t,i.pendingContext,i.pendingContext!==i.context):i.context&&Lh(t,i.context,!1),Yu(t,i.containerInfo)}function Ug(t,i,s,u,f){return Cr(),Bu(f),i.flags|=256,Dt(t,i,s,u),i.child}var uc={dehydrated:null,treeContext:null,retryLane:0};function cc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lg(t,i,s){var u=i.pendingProps,f=tt.current,g=!1,v=(i.flags&128)!==0,A;if((A=v)||(A=t!==null&&t.memoizedState===null?!1:(f&2)!==0),A?(g=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(f|=1),We(tt,f&1),t===null)return Hu(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=u.children,t=u.fallback,g?(u=i.mode,g=i.child,v={mode:"hidden",children:v},(u&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=v):g=Ba(v,u,0,null),t=Ki(t,u,s,null),g.return=i,t.return=i,g.sibling=t,i.child=g,i.child.memoizedState=cc(s),i.memoizedState=uc,t):dc(i,v));if(f=t.memoizedState,f!==null&&(A=f.dehydrated,A!==null))return By(t,i,v,u,A,f,s);if(g){g=u.fallback,v=i.mode,f=t.child,A=f.sibling;var w={mode:"hidden",children:u.children};return(v&1)===0&&i.child!==f?(u=i.child,u.childLanes=0,u.pendingProps=w,i.deletions=null):(u=Ti(f,w),u.subtreeFlags=f.subtreeFlags&14680064),A!==null?g=Ti(A,g):(g=Ki(g,v,s,null),g.flags|=2),g.return=i,u.return=i,u.sibling=g,i.child=u,u=g,g=i.child,v=t.child.memoizedState,v=v===null?cc(s):{baseLanes:v.baseLanes|s,cachePool:null,transitions:v.transitions},g.memoizedState=v,g.childLanes=t.childLanes&~s,i.memoizedState=uc,u}return g=t.child,t=g.sibling,u=Ti(g,{mode:"visible",children:u.children}),(i.mode&1)===0&&(u.lanes=s),u.return=i,u.sibling=null,t!==null&&(s=i.deletions,s===null?(i.deletions=[t],i.flags|=16):s.push(t)),i.child=u,i.memoizedState=null,u}function dc(t,i){return i=Ba({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function _a(t,i,s,u){return u!==null&&Bu(u),Rr(i,t.child,null,s),t=dc(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function By(t,i,s,u,f,g,v){if(s)return i.flags&256?(i.flags&=-257,u=oc(Error(r(422))),_a(t,i,v,u)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(g=u.fallback,f=i.mode,u=Ba({mode:"visible",children:u.children},f,0,null),g=Ki(g,f,v,null),g.flags|=2,u.return=i,g.return=i,u.sibling=g,i.child=u,(i.mode&1)!==0&&Rr(i,t.child,null,v),i.child.memoizedState=cc(v),i.memoizedState=uc,g);if((i.mode&1)===0)return _a(t,i,v,null);if(f.data==="$!"){if(u=f.nextSibling&&f.nextSibling.dataset,u)var A=u.dgst;return u=A,g=Error(r(419)),u=oc(g,u,void 0),_a(t,i,v,u)}if(A=(v&t.childLanes)!==0,bt||A){if(u=ht,u!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(u.suspendedLanes|v))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Vn(t,f),Sn(u,t,f,-1))}return Rc(),u=oc(Error(r(421))),_a(t,i,v,u)}return f.data==="$?"?(i.flags|=128,i.child=t.child,i=qy.bind(null,t),f._reactRetry=i,null):(t=g.treeContext,qt=ci(f.nextSibling),Qt=i,Qe=!0,pn=null,t!==null&&(rn[on++]=Yn,rn[on++]=jn,rn[on++]=xi,Yn=t.id,jn=t.overflow,xi=i),i=dc(i,u.children),i.flags|=4096,i)}function Hg(t,i,s){t.lanes|=i;var u=t.alternate;u!==null&&(u.lanes|=i),$u(t.return,i,s)}function fc(t,i,s,u,f){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:f}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=s,g.tailMode=f)}function Bg(t,i,s){var u=i.pendingProps,f=u.revealOrder,g=u.tail;if(Dt(t,i,u.children,s),u=tt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hg(t,s,i);else if(t.tag===19)Hg(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(We(tt,u),(i.mode&1)===0)i.memoizedState=null;else switch(f){case"forwards":for(s=i.child,f=null;s!==null;)t=s.alternate,t!==null&&ya(t)===null&&(f=s),s=s.sibling;s=f,s===null?(f=i.child,i.child=null):(f=s.sibling,s.sibling=null),fc(i,!1,f,s,g);break;case"backwards":for(s=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&ya(t)===null){i.child=f;break}t=f.sibling,f.sibling=s,s=f,f=t}fc(i,!0,s,null,g);break;case"together":fc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ca(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function Kn(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),Yi|=i.lanes,(s&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,s=Ti(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=Ti(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function Gy(t,i,s){switch(i.tag){case 3:Fg(i),Cr();break;case 5:Zh(i);break;case 1:xt(i.type)&&la(i);break;case 4:Yu(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,f=i.memoizedProps.value;We(ga,u._currentValue),u._currentValue=f;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(We(tt,tt.current&1),i.flags|=128,null):(s&i.child.childLanes)!==0?Lg(t,i,s):(We(tt,tt.current&1),t=Kn(t,i,s),t!==null?t.sibling:null);We(tt,tt.current&1);break;case 19:if(u=(s&i.childLanes)!==0,(t.flags&128)!==0){if(u)return Bg(t,i,s);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),We(tt,tt.current),u)break;return null;case 22:case 23:return i.lanes=0,kg(t,i,s)}return Kn(t,i,s)}var Gg,hc,xg,bg;Gg=function(t,i){for(var s=i.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},hc=function(){},xg=function(t,i,s,u){var f=t.memoizedProps;if(f!==u){t=i.stateNode,zi(Mn.current);var g=null;switch(s){case"input":f=Ke(t,f),u=Ke(t,u),g=[];break;case"select":f=$({},f,{value:void 0}),u=$({},u,{value:void 0}),g=[];break;case"textarea":f=Li(t,f),u=Li(t,u),g=[];break;default:typeof f.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=oa)}Vl(s,u);var v;s=null;for(M in f)if(!u.hasOwnProperty(M)&&f.hasOwnProperty(M)&&f[M]!=null)if(M==="style"){var A=f[M];for(v in A)A.hasOwnProperty(v)&&(s||(s={}),s[v]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(l.hasOwnProperty(M)?g||(g=[]):(g=g||[]).push(M,null));for(M in u){var w=u[M];if(A=f!=null?f[M]:void 0,u.hasOwnProperty(M)&&w!==A&&(w!=null||A!=null))if(M==="style")if(A){for(v in A)!A.hasOwnProperty(v)||w&&w.hasOwnProperty(v)||(s||(s={}),s[v]="");for(v in w)w.hasOwnProperty(v)&&A[v]!==w[v]&&(s||(s={}),s[v]=w[v])}else s||(g||(g=[]),g.push(M,s)),s=w;else M==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,A=A?A.__html:void 0,w!=null&&A!==w&&(g=g||[]).push(M,w)):M==="children"?typeof w!="string"&&typeof w!="number"||(g=g||[]).push(M,""+w):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(l.hasOwnProperty(M)?(w!=null&&M==="onScroll"&&je("scroll",t),g||A===w||(g=[])):(g=g||[]).push(M,w))}s&&(g=g||[]).push("style",s);var M=g;(i.updateQueue=M)&&(i.flags|=4)}},bg=function(t,i,s,u){s!==u&&(i.flags|=4)};function $o(t,i){if(!Qe)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Ct(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,u=0;if(i)for(var f=t.child;f!==null;)s|=f.lanes|f.childLanes,u|=f.subtreeFlags&14680064,u|=f.flags&14680064,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)s|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=u,t.childLanes=s,i}function xy(t,i,s){var u=i.pendingProps;switch(Uu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(i),null;case 1:return xt(i.type)&&aa(),Ct(i),null;case 3:return u=i.stateNode,Dr(),Ve(Gt),Ve(Et),Xu(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(fa(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,pn!==null&&(Ec(pn),pn=null))),hc(t,i),Ct(i),null;case 5:ju(i);var f=zi(Ho.current);if(s=i.type,t!==null&&i.stateNode!=null)xg(t,i,s,u,f),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(r(166));return Ct(i),null}if(t=zi(Mn.current),fa(i)){u=i.stateNode,s=i.type;var g=i.memoizedProps;switch(u[kn]=i,u[Mo]=g,t=(i.mode&1)!==0,s){case"dialog":je("cancel",u),je("close",u);break;case"iframe":case"object":case"embed":je("load",u);break;case"video":case"audio":for(f=0;f<No.length;f++)je(No[f],u);break;case"source":je("error",u);break;case"img":case"image":case"link":je("error",u),je("load",u);break;case"details":je("toggle",u);break;case"input":Ye(u,g),je("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!g.multiple},je("invalid",u);break;case"textarea":Ef(u,g),je("invalid",u)}Vl(s,g),f=null;for(var v in g)if(g.hasOwnProperty(v)){var A=g[v];v==="children"?typeof A=="string"?u.textContent!==A&&(g.suppressHydrationWarning!==!0&&ra(u.textContent,A,t),f=["children",A]):typeof A=="number"&&u.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&ra(u.textContent,A,t),f=["children",""+A]):l.hasOwnProperty(v)&&A!=null&&v==="onScroll"&&je("scroll",u)}switch(s){case"input":ke(u),nn(u,g,!0);break;case"textarea":ke(u),Cf(u);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(u.onclick=oa)}u=f,i.updateQueue=u,u!==null&&(i.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Rf(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=v.createElement(s,{is:u.is}):(t=v.createElement(s),s==="select"&&(v=t,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):t=v.createElementNS(t,s),t[kn]=i,t[Mo]=u,Gg(t,i,!1,!1),i.stateNode=t;e:{switch(v=Xl(s,u),s){case"dialog":je("cancel",t),je("close",t),f=u;break;case"iframe":case"object":case"embed":je("load",t),f=u;break;case"video":case"audio":for(f=0;f<No.length;f++)je(No[f],t);f=u;break;case"source":je("error",t),f=u;break;case"img":case"image":case"link":je("error",t),je("load",t),f=u;break;case"details":je("toggle",t),f=u;break;case"input":Ye(t,u),f=Ke(t,u),je("invalid",t);break;case"option":f=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},f=$({},u,{value:void 0}),je("invalid",t);break;case"textarea":Ef(t,u),f=Li(t,u),je("invalid",t);break;default:f=u}Vl(s,f),A=f;for(g in A)if(A.hasOwnProperty(g)){var w=A[g];g==="style"?Df(t,w):g==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&Pf(t,w)):g==="children"?typeof w=="string"?(s!=="textarea"||w!=="")&&uo(t,w):typeof w=="number"&&uo(t,""+w):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(l.hasOwnProperty(g)?w!=null&&g==="onScroll"&&je("scroll",t):w!=null&&D(t,g,w,v))}switch(s){case"input":ke(t),nn(t,u,!1);break;case"textarea":ke(t),Cf(t);break;case"option":u.value!=null&&t.setAttribute("value",""+me(u.value));break;case"select":t.multiple=!!u.multiple,g=u.value,g!=null?ii(t,!!u.multiple,g,!1):u.defaultValue!=null&&ii(t,!!u.multiple,u.defaultValue,!0);break;default:typeof f.onClick=="function"&&(t.onclick=oa)}switch(s){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ct(i),null;case 6:if(t&&i.stateNode!=null)bg(t,i,t.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=zi(Ho.current),zi(Mn.current),fa(i)){if(u=i.stateNode,s=i.memoizedProps,u[kn]=i,(g=u.nodeValue!==s)&&(t=Qt,t!==null))switch(t.tag){case 3:ra(u.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ra(u.nodeValue,s,(t.mode&1)!==0)}g&&(i.flags|=4)}else u=(s.nodeType===9?s:s.ownerDocument).createTextNode(u),u[kn]=i,i.stateNode=u}return Ct(i),null;case 13:if(Ve(tt),u=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&qt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Wh(),Cr(),i.flags|=98560,g=!1;else if(g=fa(i),u!==null&&u.dehydrated!==null){if(t===null){if(!g)throw Error(r(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[kn]=i}else Cr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ct(i),g=!1}else pn!==null&&(Ec(pn),pn=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=s,i):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(tt.current&1)!==0?dt===0&&(dt=3):Rc())),i.updateQueue!==null&&(i.flags|=4),Ct(i),null);case 4:return Dr(),hc(t,i),t===null&&Do(i.stateNode.containerInfo),Ct(i),null;case 10:return bu(i.type._context),Ct(i),null;case 17:return xt(i.type)&&aa(),Ct(i),null;case 19:if(Ve(tt),g=i.memoizedState,g===null)return Ct(i),null;if(u=(i.flags&128)!==0,v=g.rendering,v===null)if(u)$o(g,!1);else{if(dt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(v=ya(t),v!==null){for(i.flags|=128,$o(g,!1),u=v.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=s,s=i.child;s!==null;)g=s,t=u,g.flags&=14680066,v=g.alternate,v===null?(g.childLanes=0,g.lanes=t,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=v.childLanes,g.lanes=v.lanes,g.child=v.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=v.memoizedProps,g.memoizedState=v.memoizedState,g.updateQueue=v.updateQueue,g.type=v.type,t=v.dependencies,g.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return We(tt,tt.current&1|2),i.child}t=t.sibling}g.tail!==null&&rt()>Fr&&(i.flags|=128,u=!0,$o(g,!1),i.lanes=4194304)}else{if(!u)if(t=ya(v),t!==null){if(i.flags|=128,u=!0,s=t.updateQueue,s!==null&&(i.updateQueue=s,i.flags|=4),$o(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Qe)return Ct(i),null}else 2*rt()-g.renderingStartTime>Fr&&s!==1073741824&&(i.flags|=128,u=!0,$o(g,!1),i.lanes=4194304);g.isBackwards?(v.sibling=i.child,i.child=v):(s=g.last,s!==null?s.sibling=v:i.child=v,g.last=v)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=rt(),i.sibling=null,s=tt.current,We(tt,u?s&1|2:s&1),i):(Ct(i),null);case 22:case 23:return Cc(),u=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(i.flags|=8192),u&&(i.mode&1)!==0?(Zt&1073741824)!==0&&(Ct(i),i.subtreeFlags&6&&(i.flags|=8192)):Ct(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function by(t,i){switch(Uu(i),i.tag){case 1:return xt(i.type)&&aa(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Dr(),Ve(Gt),Ve(Et),Xu(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return ju(i),null;case 13:if(Ve(tt),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Cr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Ve(tt),null;case 4:return Dr(),null;case 10:return bu(i.type._context),null;case 22:case 23:return Cc(),null;case 24:return null;default:return null}}var Ra=!1,Rt=!1,$y=typeof WeakSet=="function"?WeakSet:Set,q=null;function Mr(t,i){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(u){it(t,i,u)}else s.current=null}function gc(t,i,s){try{s()}catch(u){it(t,i,u)}}var $g=!1;function zy(t,i){if(Cu=Vs,t=Ah(),yu(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var v=0,A=-1,w=-1,M=0,B=0,G=t,H=null;t:for(;;){for(var Q;G!==s||f!==0&&G.nodeType!==3||(A=v+f),G!==g||u!==0&&G.nodeType!==3||(w=v+u),G.nodeType===3&&(v+=G.nodeValue.length),(Q=G.firstChild)!==null;)H=G,G=Q;for(;;){if(G===t)break t;if(H===s&&++M===f&&(A=v),H===g&&++B===u&&(w=v),(Q=G.nextSibling)!==null)break;G=H,H=G.parentNode}G=Q}s=A===-1||w===-1?null:{start:A,end:w}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ru={focusedElem:t,selectionRange:s},Vs=!1,q=i;q!==null;)if(i=q,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,q=t;else for(;q!==null;){i=q;try{var Z=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var ne=Z.memoizedProps,ot=Z.memoizedState,N=i.stateNode,R=N.getSnapshotBeforeUpdate(i.elementType===i.type?ne:mn(i.type,ne),ot);N.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var k=i.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(z){it(i,i.return,z)}if(t=i.sibling,t!==null){t.return=i.return,q=t;break}q=i.return}return Z=$g,$g=!1,Z}function zo(t,i,s){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&t)===t){var g=f.destroy;f.destroy=void 0,g!==void 0&&gc(i,s,g)}f=f.next}while(f!==u)}}function Pa(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var u=s.create;s.destroy=u()}s=s.next}while(s!==i)}}function pc(t){var i=t.ref;if(i!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof i=="function"?i(t):i.current=t}}function zg(t){var i=t.alternate;i!==null&&(t.alternate=null,zg(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[kn],delete i[Mo],delete i[ku],delete i[_y],delete i[Cy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Wg(t){return t.tag===5||t.tag===3||t.tag===4}function Yg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mc(t,i,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?s.nodeType===8?s.parentNode.insertBefore(t,i):s.insertBefore(t,i):(s.nodeType===8?(i=s.parentNode,i.insertBefore(t,s)):(i=s,i.appendChild(t)),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=oa));else if(u!==4&&(t=t.child,t!==null))for(mc(t,i,s),t=t.sibling;t!==null;)mc(t,i,s),t=t.sibling}function vc(t,i,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(vc(t,i,s),t=t.sibling;t!==null;)vc(t,i,s),t=t.sibling}var yt=null,vn=!1;function mi(t,i,s){for(s=s.child;s!==null;)jg(t,i,s),s=s.sibling}function jg(t,i,s){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(bs,s)}catch{}switch(s.tag){case 5:Rt||Mr(s,i);case 6:var u=yt,f=vn;yt=null,mi(t,i,s),yt=u,vn=f,yt!==null&&(vn?(t=yt,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):yt.removeChild(s.stateNode));break;case 18:yt!==null&&(vn?(t=yt,s=s.stateNode,t.nodeType===8?Du(t.parentNode,s):t.nodeType===1&&Du(t,s),To(t)):Du(yt,s.stateNode));break;case 4:u=yt,f=vn,yt=s.stateNode.containerInfo,vn=!0,mi(t,i,s),yt=u,vn=f;break;case 0:case 11:case 14:case 15:if(!Rt&&(u=s.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){f=u=u.next;do{var g=f,v=g.destroy;g=g.tag,v!==void 0&&((g&2)!==0||(g&4)!==0)&&gc(s,i,v),f=f.next}while(f!==u)}mi(t,i,s);break;case 1:if(!Rt&&(Mr(s,i),u=s.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=s.memoizedProps,u.state=s.memoizedState,u.componentWillUnmount()}catch(A){it(s,i,A)}mi(t,i,s);break;case 21:mi(t,i,s);break;case 22:s.mode&1?(Rt=(u=Rt)||s.memoizedState!==null,mi(t,i,s),Rt=u):mi(t,i,s);break;default:mi(t,i,s)}}function Vg(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new $y),i.forEach(function(u){var f=Zy.bind(null,t,u);s.has(u)||(s.add(u),u.then(f,f))})}}function yn(t,i){var s=i.deletions;if(s!==null)for(var u=0;u<s.length;u++){var f=s[u];try{var g=t,v=i,A=v;e:for(;A!==null;){switch(A.tag){case 5:yt=A.stateNode,vn=!1;break e;case 3:yt=A.stateNode.containerInfo,vn=!0;break e;case 4:yt=A.stateNode.containerInfo,vn=!0;break e}A=A.return}if(yt===null)throw Error(r(160));jg(g,v,f),yt=null,vn=!1;var w=f.alternate;w!==null&&(w.return=null),f.return=null}catch(M){it(f,i,M)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Xg(i,t),i=i.sibling}function Xg(t,i){var s=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yn(i,t),Fn(t),u&4){try{zo(3,t,t.return),Pa(3,t)}catch(ne){it(t,t.return,ne)}try{zo(5,t,t.return)}catch(ne){it(t,t.return,ne)}}break;case 1:yn(i,t),Fn(t),u&512&&s!==null&&Mr(s,s.return);break;case 5:if(yn(i,t),Fn(t),u&512&&s!==null&&Mr(s,s.return),t.flags&32){var f=t.stateNode;try{uo(f,"")}catch(ne){it(t,t.return,ne)}}if(u&4&&(f=t.stateNode,f!=null)){var g=t.memoizedProps,v=s!==null?s.memoizedProps:g,A=t.type,w=t.updateQueue;if(t.updateQueue=null,w!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&Rn(f,g),Xl(A,v);var M=Xl(A,g);for(v=0;v<w.length;v+=2){var B=w[v],G=w[v+1];B==="style"?Df(f,G):B==="dangerouslySetInnerHTML"?Pf(f,G):B==="children"?uo(f,G):D(f,B,G,M)}switch(A){case"input":Bt(f,g);break;case"textarea":_f(f,g);break;case"select":var H=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var Q=g.value;Q!=null?ii(f,!!g.multiple,Q,!1):H!==!!g.multiple&&(g.defaultValue!=null?ii(f,!!g.multiple,g.defaultValue,!0):ii(f,!!g.multiple,g.multiple?[]:"",!1))}f[Mo]=g}catch(ne){it(t,t.return,ne)}}break;case 6:if(yn(i,t),Fn(t),u&4){if(t.stateNode===null)throw Error(r(162));f=t.stateNode,g=t.memoizedProps;try{f.nodeValue=g}catch(ne){it(t,t.return,ne)}}break;case 3:if(yn(i,t),Fn(t),u&4&&s!==null&&s.memoizedState.isDehydrated)try{To(i.containerInfo)}catch(ne){it(t,t.return,ne)}break;case 4:yn(i,t),Fn(t);break;case 13:yn(i,t),Fn(t),f=t.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Ac=rt())),u&4&&Vg(t);break;case 22:if(B=s!==null&&s.memoizedState!==null,t.mode&1?(Rt=(M=Rt)||B,yn(i,t),Rt=M):yn(i,t),Fn(t),u&8192){if(M=t.memoizedState!==null,(t.stateNode.isHidden=M)&&!B&&(t.mode&1)!==0)for(q=t,B=t.child;B!==null;){for(G=q=B;q!==null;){switch(H=q,Q=H.child,H.tag){case 0:case 11:case 14:case 15:zo(4,H,H.return);break;case 1:Mr(H,H.return);var Z=H.stateNode;if(typeof Z.componentWillUnmount=="function"){u=H,s=H.return;try{i=u,Z.props=i.memoizedProps,Z.state=i.memoizedState,Z.componentWillUnmount()}catch(ne){it(u,s,ne)}}break;case 5:Mr(H,H.return);break;case 22:if(H.memoizedState!==null){qg(G);continue}}Q!==null?(Q.return=H,q=Q):qg(G)}B=B.sibling}e:for(B=null,G=t;;){if(G.tag===5){if(B===null){B=G;try{f=G.stateNode,M?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=G.stateNode,w=G.memoizedProps.style,v=w!=null&&w.hasOwnProperty("display")?w.display:null,A.style.display=Nf("display",v))}catch(ne){it(t,t.return,ne)}}}else if(G.tag===6){if(B===null)try{G.stateNode.nodeValue=M?"":G.memoizedProps}catch(ne){it(t,t.return,ne)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===t)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===t)break e;for(;G.sibling===null;){if(G.return===null||G.return===t)break e;B===G&&(B=null),G=G.return}B===G&&(B=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:yn(i,t),Fn(t),u&4&&Vg(t);break;case 21:break;default:yn(i,t),Fn(t)}}function Fn(t){var i=t.flags;if(i&2){try{e:{for(var s=t.return;s!==null;){if(Wg(s)){var u=s;break e}s=s.return}throw Error(r(160))}switch(u.tag){case 5:var f=u.stateNode;u.flags&32&&(uo(f,""),u.flags&=-33);var g=Yg(t);vc(t,g,f);break;case 3:case 4:var v=u.stateNode.containerInfo,A=Yg(t);mc(t,A,v);break;default:throw Error(r(161))}}catch(w){it(t,t.return,w)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Wy(t,i,s){q=t,Kg(t)}function Kg(t,i,s){for(var u=(t.mode&1)!==0;q!==null;){var f=q,g=f.child;if(f.tag===22&&u){var v=f.memoizedState!==null||Ra;if(!v){var A=f.alternate,w=A!==null&&A.memoizedState!==null||Rt;A=Ra;var M=Rt;if(Ra=v,(Rt=w)&&!M)for(q=f;q!==null;)v=q,w=v.child,v.tag===22&&v.memoizedState!==null?Zg(f):w!==null?(w.return=v,q=w):Zg(f);for(;g!==null;)q=g,Kg(g),g=g.sibling;q=f,Ra=A,Rt=M}Qg(t)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,q=g):Qg(t)}}function Qg(t){for(;q!==null;){var i=q;if((i.flags&8772)!==0){var s=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Rt||Pa(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!Rt)if(s===null)u.componentDidMount();else{var f=i.elementType===i.type?s.memoizedProps:mn(i.type,s.memoizedProps);u.componentDidUpdate(f,s.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&qh(i,g,u);break;case 3:var v=i.updateQueue;if(v!==null){if(s=null,i.child!==null)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}qh(i,v,s)}break;case 5:var A=i.stateNode;if(s===null&&i.flags&4){s=A;var w=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&s.focus();break;case"img":w.src&&(s.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var M=i.alternate;if(M!==null){var B=M.memoizedState;if(B!==null){var G=B.dehydrated;G!==null&&To(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Rt||i.flags&512&&pc(i)}catch(H){it(i,i.return,H)}}if(i===t){q=null;break}if(s=i.sibling,s!==null){s.return=i.return,q=s;break}q=i.return}}function qg(t){for(;q!==null;){var i=q;if(i===t){q=null;break}var s=i.sibling;if(s!==null){s.return=i.return,q=s;break}q=i.return}}function Zg(t){for(;q!==null;){var i=q;try{switch(i.tag){case 0:case 11:case 15:var s=i.return;try{Pa(4,i)}catch(w){it(i,s,w)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var f=i.return;try{u.componentDidMount()}catch(w){it(i,f,w)}}var g=i.return;try{pc(i)}catch(w){it(i,g,w)}break;case 5:var v=i.return;try{pc(i)}catch(w){it(i,v,w)}}}catch(w){it(i,i.return,w)}if(i===t){q=null;break}var A=i.sibling;if(A!==null){A.return=i.return,q=A;break}q=i.return}}var Yy=Math.ceil,Na=x.ReactCurrentDispatcher,yc=x.ReactCurrentOwner,ln=x.ReactCurrentBatchConfig,He=0,ht=null,at=null,St=0,Zt=0,Or=di(0),dt=0,Wo=null,Yi=0,Da=0,Sc=0,Yo=null,$t=null,Ac=0,Fr=1/0,Qn=null,ka=!1,Tc=null,vi=null,Ma=!1,yi=null,Oa=0,jo=0,Ic=null,Fa=-1,Ua=0;function kt(){return(He&6)!==0?rt():Fa!==-1?Fa:Fa=rt()}function Si(t){return(t.mode&1)===0?1:(He&2)!==0&&St!==0?St&-St:Py.transition!==null?(Ua===0&&(Ua=Yf()),Ua):(t=$e,t!==0||(t=window.event,t=t===void 0?16:eh(t.type)),t)}function Sn(t,i,s,u){if(50<jo)throw jo=0,Ic=null,Error(r(185));mo(t,s,u),((He&2)===0||t!==ht)&&(t===ht&&((He&2)===0&&(Da|=s),dt===4&&Ai(t,St)),zt(t,u),s===1&&He===0&&(i.mode&1)===0&&(Fr=rt()+500,ua&&hi()))}function zt(t,i){var s=t.callbackNode;Pv(t,i);var u=Ws(t,t===ht?St:0);if(u===0)s!==null&&$f(s),t.callbackNode=null,t.callbackPriority=0;else if(i=u&-u,t.callbackPriority!==i){if(s!=null&&$f(s),i===1)t.tag===0?Ry(ep.bind(null,t)):Gh(ep.bind(null,t)),wy(function(){(He&6)===0&&hi()}),s=null;else{switch(jf(u)){case 1:s=tu;break;case 4:s=zf;break;case 16:s=xs;break;case 536870912:s=Wf;break;default:s=xs}s=lp(s,Jg.bind(null,t))}t.callbackPriority=i,t.callbackNode=s}}function Jg(t,i){if(Fa=-1,Ua=0,(He&6)!==0)throw Error(r(327));var s=t.callbackNode;if(Ur()&&t.callbackNode!==s)return null;var u=Ws(t,t===ht?St:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||i)i=La(t,u);else{i=u;var f=He;He|=2;var g=np();(ht!==t||St!==i)&&(Qn=null,Fr=rt()+500,Vi(t,i));do try{Xy();break}catch(A){tp(t,A)}while(!0);xu(),Na.current=g,He=f,at!==null?i=0:(ht=null,St=0,i=dt)}if(i!==0){if(i===2&&(f=nu(t),f!==0&&(u=f,i=wc(t,f))),i===1)throw s=Wo,Vi(t,0),Ai(t,u),zt(t,rt()),s;if(i===6)Ai(t,u);else{if(f=t.current.alternate,(u&30)===0&&!jy(f)&&(i=La(t,u),i===2&&(g=nu(t),g!==0&&(u=g,i=wc(t,g))),i===1))throw s=Wo,Vi(t,0),Ai(t,u),zt(t,rt()),s;switch(t.finishedWork=f,t.finishedLanes=u,i){case 0:case 1:throw Error(r(345));case 2:Xi(t,$t,Qn);break;case 3:if(Ai(t,u),(u&130023424)===u&&(i=Ac+500-rt(),10<i)){if(Ws(t,0)!==0)break;if(f=t.suspendedLanes,(f&u)!==u){kt(),t.pingedLanes|=t.suspendedLanes&f;break}t.timeoutHandle=Nu(Xi.bind(null,t,$t,Qn),i);break}Xi(t,$t,Qn);break;case 4:if(Ai(t,u),(u&4194240)===u)break;for(i=t.eventTimes,f=-1;0<u;){var v=31-hn(u);g=1<<v,v=i[v],v>f&&(f=v),u&=~g}if(u=f,u=rt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Yy(u/1960))-u,10<u){t.timeoutHandle=Nu(Xi.bind(null,t,$t,Qn),u);break}Xi(t,$t,Qn);break;case 5:Xi(t,$t,Qn);break;default:throw Error(r(329))}}}return zt(t,rt()),t.callbackNode===s?Jg.bind(null,t):null}function wc(t,i){var s=Yo;return t.current.memoizedState.isDehydrated&&(Vi(t,i).flags|=256),t=La(t,i),t!==2&&(i=$t,$t=s,i!==null&&Ec(i)),t}function Ec(t){$t===null?$t=t:$t.push.apply($t,t)}function jy(t){for(var i=t;;){if(i.flags&16384){var s=i.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var u=0;u<s.length;u++){var f=s[u],g=f.getSnapshot;f=f.value;try{if(!gn(g(),f))return!1}catch{return!1}}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ai(t,i){for(i&=~Sc,i&=~Da,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var s=31-hn(i),u=1<<s;t[s]=-1,i&=~u}}function ep(t){if((He&6)!==0)throw Error(r(327));Ur();var i=Ws(t,0);if((i&1)===0)return zt(t,rt()),null;var s=La(t,i);if(t.tag!==0&&s===2){var u=nu(t);u!==0&&(i=u,s=wc(t,u))}if(s===1)throw s=Wo,Vi(t,0),Ai(t,i),zt(t,rt()),s;if(s===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,Xi(t,$t,Qn),zt(t,rt()),null}function _c(t,i){var s=He;He|=1;try{return t(i)}finally{He=s,He===0&&(Fr=rt()+500,ua&&hi())}}function ji(t){yi!==null&&yi.tag===0&&(He&6)===0&&Ur();var i=He;He|=1;var s=ln.transition,u=$e;try{if(ln.transition=null,$e=1,t)return t()}finally{$e=u,ln.transition=s,He=i,(He&6)===0&&hi()}}function Cc(){Zt=Or.current,Ve(Or)}function Vi(t,i){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,Iy(s)),at!==null)for(s=at.return;s!==null;){var u=s;switch(Uu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&aa();break;case 3:Dr(),Ve(Gt),Ve(Et),Xu();break;case 5:ju(u);break;case 4:Dr();break;case 13:Ve(tt);break;case 19:Ve(tt);break;case 10:bu(u.type._context);break;case 22:case 23:Cc()}s=s.return}if(ht=t,at=t=Ti(t.current,null),St=Zt=i,dt=0,Wo=null,Sc=Da=Yi=0,$t=Yo=null,$i!==null){for(i=0;i<$i.length;i++)if(s=$i[i],u=s.interleaved,u!==null){s.interleaved=null;var f=u.next,g=s.pending;if(g!==null){var v=g.next;g.next=f,u.next=v}s.pending=u}$i=null}return t}function tp(t,i){do{var s=at;try{if(xu(),Sa.current=wa,Aa){for(var u=nt.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}Aa=!1}if(Wi=0,ft=ct=nt=null,Bo=!1,Go=0,yc.current=null,s===null||s.return===null){dt=1,Wo=i,at=null;break}e:{var g=t,v=s.return,A=s,w=i;if(i=St,A.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var M=w,B=A,G=B.tag;if((B.mode&1)===0&&(G===0||G===11||G===15)){var H=B.alternate;H?(B.updateQueue=H.updateQueue,B.memoizedState=H.memoizedState,B.lanes=H.lanes):(B.updateQueue=null,B.memoizedState=null)}var Q=Cg(v);if(Q!==null){Q.flags&=-257,Rg(Q,v,A,g,i),Q.mode&1&&_g(g,M,i),i=Q,w=M;var Z=i.updateQueue;if(Z===null){var ne=new Set;ne.add(w),i.updateQueue=ne}else Z.add(w);break e}else{if((i&1)===0){_g(g,M,i),Rc();break e}w=Error(r(426))}}else if(Qe&&A.mode&1){var ot=Cg(v);if(ot!==null){(ot.flags&65536)===0&&(ot.flags|=256),Rg(ot,v,A,g,i),Bu(kr(w,A));break e}}g=w=kr(w,A),dt!==4&&(dt=2),Yo===null?Yo=[g]:Yo.push(g),g=v;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var N=wg(g,w,i);Qh(g,N);break e;case 1:A=w;var R=g.type,k=g.stateNode;if((g.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(vi===null||!vi.has(k)))){g.flags|=65536,i&=-i,g.lanes|=i;var z=Eg(g,A,i);Qh(g,z);break e}}g=g.return}while(g!==null)}rp(s)}catch(oe){i=oe,at===s&&s!==null&&(at=s=s.return);continue}break}while(!0)}function np(){var t=Na.current;return Na.current=wa,t===null?wa:t}function Rc(){(dt===0||dt===3||dt===2)&&(dt=4),ht===null||(Yi&268435455)===0&&(Da&268435455)===0||Ai(ht,St)}function La(t,i){var s=He;He|=2;var u=np();(ht!==t||St!==i)&&(Qn=null,Vi(t,i));do try{Vy();break}catch(f){tp(t,f)}while(!0);if(xu(),He=s,Na.current=u,at!==null)throw Error(r(261));return ht=null,St=0,dt}function Vy(){for(;at!==null;)ip(at)}function Xy(){for(;at!==null&&!Sv();)ip(at)}function ip(t){var i=ap(t.alternate,t,Zt);t.memoizedProps=t.pendingProps,i===null?rp(t):at=i,yc.current=null}function rp(t){var i=t;do{var s=i.alternate;if(t=i.return,(i.flags&32768)===0){if(s=xy(s,i,Zt),s!==null){at=s;return}}else{if(s=by(s,i),s!==null){s.flags&=32767,at=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,at=null;return}}if(i=i.sibling,i!==null){at=i;return}at=i=t}while(i!==null);dt===0&&(dt=5)}function Xi(t,i,s){var u=$e,f=ln.transition;try{ln.transition=null,$e=1,Ky(t,i,s,u)}finally{ln.transition=f,$e=u}return null}function Ky(t,i,s,u){do Ur();while(yi!==null);if((He&6)!==0)throw Error(r(327));s=t.finishedWork;var f=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var g=s.lanes|s.childLanes;if(Nv(t,g),t===ht&&(at=ht=null,St=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Ma||(Ma=!0,lp(xs,function(){return Ur(),null})),g=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||g){g=ln.transition,ln.transition=null;var v=$e;$e=1;var A=He;He|=4,yc.current=null,zy(t,s),Xg(s,t),py(Ru),Vs=!!Cu,Ru=Cu=null,t.current=s,Wy(s),Av(),He=A,$e=v,ln.transition=g}else t.current=s;if(Ma&&(Ma=!1,yi=t,Oa=f),g=t.pendingLanes,g===0&&(vi=null),wv(s.stateNode),zt(t,rt()),i!==null)for(u=t.onRecoverableError,s=0;s<i.length;s++)f=i[s],u(f.value,{componentStack:f.stack,digest:f.digest});if(ka)throw ka=!1,t=Tc,Tc=null,t;return(Oa&1)!==0&&t.tag!==0&&Ur(),g=t.pendingLanes,(g&1)!==0?t===Ic?jo++:(jo=0,Ic=t):jo=0,hi(),null}function Ur(){if(yi!==null){var t=jf(Oa),i=ln.transition,s=$e;try{if(ln.transition=null,$e=16>t?16:t,yi===null)var u=!1;else{if(t=yi,yi=null,Oa=0,(He&6)!==0)throw Error(r(331));var f=He;for(He|=4,q=t.current;q!==null;){var g=q,v=g.child;if((q.flags&16)!==0){var A=g.deletions;if(A!==null){for(var w=0;w<A.length;w++){var M=A[w];for(q=M;q!==null;){var B=q;switch(B.tag){case 0:case 11:case 15:zo(8,B,g)}var G=B.child;if(G!==null)G.return=B,q=G;else for(;q!==null;){B=q;var H=B.sibling,Q=B.return;if(zg(B),B===M){q=null;break}if(H!==null){H.return=Q,q=H;break}q=Q}}}var Z=g.alternate;if(Z!==null){var ne=Z.child;if(ne!==null){Z.child=null;do{var ot=ne.sibling;ne.sibling=null,ne=ot}while(ne!==null)}}q=g}}if((g.subtreeFlags&2064)!==0&&v!==null)v.return=g,q=v;else e:for(;q!==null;){if(g=q,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:zo(9,g,g.return)}var N=g.sibling;if(N!==null){N.return=g.return,q=N;break e}q=g.return}}var R=t.current;for(q=R;q!==null;){v=q;var k=v.child;if((v.subtreeFlags&2064)!==0&&k!==null)k.return=v,q=k;else e:for(v=R;q!==null;){if(A=q,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Pa(9,A)}}catch(oe){it(A,A.return,oe)}if(A===v){q=null;break e}var z=A.sibling;if(z!==null){z.return=A.return,q=z;break e}q=A.return}}if(He=f,hi(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(bs,t)}catch{}u=!0}return u}finally{$e=s,ln.transition=i}}return!1}function op(t,i,s){i=kr(s,i),i=wg(t,i,1),t=pi(t,i,1),i=kt(),t!==null&&(mo(t,1,i),zt(t,i))}function it(t,i,s){if(t.tag===3)op(t,t,s);else for(;i!==null;){if(i.tag===3){op(i,t,s);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(vi===null||!vi.has(u))){t=kr(s,t),t=Eg(i,t,1),i=pi(i,t,1),t=kt(),i!==null&&(mo(i,1,t),zt(i,t));break}}i=i.return}}function Qy(t,i,s){var u=t.pingCache;u!==null&&u.delete(i),i=kt(),t.pingedLanes|=t.suspendedLanes&s,ht===t&&(St&s)===s&&(dt===4||dt===3&&(St&130023424)===St&&500>rt()-Ac?Vi(t,0):Sc|=s),zt(t,i)}function sp(t,i){i===0&&((t.mode&1)===0?i=1:(i=zs,zs<<=1,(zs&130023424)===0&&(zs=4194304)));var s=kt();t=Vn(t,i),t!==null&&(mo(t,i,s),zt(t,s))}function qy(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),sp(t,s)}function Zy(t,i){var s=0;switch(t.tag){case 13:var u=t.stateNode,f=t.memoizedState;f!==null&&(s=f.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(i),sp(t,s)}var ap;ap=function(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps||Gt.current)bt=!0;else{if((t.lanes&s)===0&&(i.flags&128)===0)return bt=!1,Gy(t,i,s);bt=(t.flags&131072)!==0}else bt=!1,Qe&&(i.flags&1048576)!==0&&xh(i,da,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;Ca(t,i),t=i.pendingProps;var f=wr(i,Et.current);Nr(i,s),f=qu(null,i,u,t,f,s);var g=Zu();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,xt(u)?(g=!0,la(i)):g=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Wu(i),f.updater=Ea,i.stateNode=f,f._reactInternals=i,rc(i,u,t,s),i=lc(null,i,u,!0,g,s)):(i.tag=0,Qe&&g&&Fu(i),Dt(null,i,f,s),i=i.child),i;case 16:u=i.elementType;e:{switch(Ca(t,i),t=i.pendingProps,f=u._init,u=f(u._payload),i.type=u,f=i.tag=eS(u),t=mn(u,t),f){case 0:i=ac(null,i,u,t,s);break e;case 1:i=Og(null,i,u,t,s);break e;case 11:i=Pg(null,i,u,t,s);break e;case 14:i=Ng(null,i,u,mn(u.type,t),s);break e}throw Error(r(306,u,""))}return i;case 0:return u=i.type,f=i.pendingProps,f=i.elementType===u?f:mn(u,f),ac(t,i,u,f,s);case 1:return u=i.type,f=i.pendingProps,f=i.elementType===u?f:mn(u,f),Og(t,i,u,f,s);case 3:e:{if(Fg(i),t===null)throw Error(r(387));u=i.pendingProps,g=i.memoizedState,f=g.element,Kh(t,i),va(i,u,null,s);var v=i.memoizedState;if(u=v.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){f=kr(Error(r(423)),i),i=Ug(t,i,u,s,f);break e}else if(u!==f){f=kr(Error(r(424)),i),i=Ug(t,i,u,s,f);break e}else for(qt=ci(i.stateNode.containerInfo.firstChild),Qt=i,Qe=!0,pn=null,s=Vh(i,null,u,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Cr(),u===f){i=Kn(t,i,s);break e}Dt(t,i,u,s)}i=i.child}return i;case 5:return Zh(i),t===null&&Hu(i),u=i.type,f=i.pendingProps,g=t!==null?t.memoizedProps:null,v=f.children,Pu(u,f)?v=null:g!==null&&Pu(u,g)&&(i.flags|=32),Mg(t,i),Dt(t,i,v,s),i.child;case 6:return t===null&&Hu(i),null;case 13:return Lg(t,i,s);case 4:return Yu(i,i.stateNode.containerInfo),u=i.pendingProps,t===null?i.child=Rr(i,null,u,s):Dt(t,i,u,s),i.child;case 11:return u=i.type,f=i.pendingProps,f=i.elementType===u?f:mn(u,f),Pg(t,i,u,f,s);case 7:return Dt(t,i,i.pendingProps,s),i.child;case 8:return Dt(t,i,i.pendingProps.children,s),i.child;case 12:return Dt(t,i,i.pendingProps.children,s),i.child;case 10:e:{if(u=i.type._context,f=i.pendingProps,g=i.memoizedProps,v=f.value,We(ga,u._currentValue),u._currentValue=v,g!==null)if(gn(g.value,v)){if(g.children===f.children&&!Gt.current){i=Kn(t,i,s);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var A=g.dependencies;if(A!==null){v=g.child;for(var w=A.firstContext;w!==null;){if(w.context===u){if(g.tag===1){w=Xn(-1,s&-s),w.tag=2;var M=g.updateQueue;if(M!==null){M=M.shared;var B=M.pending;B===null?w.next=w:(w.next=B.next,B.next=w),M.pending=w}}g.lanes|=s,w=g.alternate,w!==null&&(w.lanes|=s),$u(g.return,s,i),A.lanes|=s;break}w=w.next}}else if(g.tag===10)v=g.type===i.type?null:g.child;else if(g.tag===18){if(v=g.return,v===null)throw Error(r(341));v.lanes|=s,A=v.alternate,A!==null&&(A.lanes|=s),$u(v,s,i),v=g.sibling}else v=g.child;if(v!==null)v.return=g;else for(v=g;v!==null;){if(v===i){v=null;break}if(g=v.sibling,g!==null){g.return=v.return,v=g;break}v=v.return}g=v}Dt(t,i,f.children,s),i=i.child}return i;case 9:return f=i.type,u=i.pendingProps.children,Nr(i,s),f=sn(f),u=u(f),i.flags|=1,Dt(t,i,u,s),i.child;case 14:return u=i.type,f=mn(u,i.pendingProps),f=mn(u.type,f),Ng(t,i,u,f,s);case 15:return Dg(t,i,i.type,i.pendingProps,s);case 17:return u=i.type,f=i.pendingProps,f=i.elementType===u?f:mn(u,f),Ca(t,i),i.tag=1,xt(u)?(t=!0,la(i)):t=!1,Nr(i,s),Tg(i,u,f),rc(i,u,f,s),lc(null,i,u,!0,t,s);case 19:return Bg(t,i,s);case 22:return kg(t,i,s)}throw Error(r(156,i.tag))};function lp(t,i){return bf(t,i)}function Jy(t,i,s,u){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(t,i,s,u){return new Jy(t,i,s,u)}function Pc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eS(t){if(typeof t=="function")return Pc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===De)return 11;if(t===Fe)return 14}return 2}function Ti(t,i){var s=t.alternate;return s===null?(s=un(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Ha(t,i,s,u,f,g){var v=2;if(u=t,typeof t=="function")Pc(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case Y:return Ki(s.children,f,g,i);case ue:v=8,f|=8;break;case Ee:return t=un(12,s,i,f|2),t.elementType=Ee,t.lanes=g,t;case Te:return t=un(13,s,i,f),t.elementType=Te,t.lanes=g,t;case le:return t=un(19,s,i,f),t.elementType=le,t.lanes=g,t;case J:return Ba(s,f,g,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _e:v=10;break e;case xe:v=9;break e;case De:v=11;break e;case Fe:v=14;break e;case ve:v=16,u=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return i=un(v,s,i,f),i.elementType=t,i.type=u,i.lanes=g,i}function Ki(t,i,s,u){return t=un(7,t,u,i),t.lanes=s,t}function Ba(t,i,s,u){return t=un(22,t,u,i),t.elementType=J,t.lanes=s,t.stateNode={isHidden:!1},t}function Nc(t,i,s){return t=un(6,t,null,i),t.lanes=s,t}function Dc(t,i,s){return i=un(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function tS(t,i,s,u,f){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iu(0),this.expirationTimes=iu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iu(0),this.identifierPrefix=u,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function kc(t,i,s,u,f,g,v,A,w){return t=new tS(t,i,s,A,w),i===1?(i=1,g===!0&&(i|=8)):i=0,g=un(3,null,null,i),t.current=g,g.stateNode=t,g.memoizedState={element:u,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wu(g),t}function nS(t,i,s){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:u==null?null:""+u,children:t,containerInfo:i,implementation:s}}function up(t){if(!t)return fi;t=t._reactInternals;e:{if(Hi(t)!==t||t.tag!==1)throw Error(r(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(xt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(t.tag===1){var s=t.type;if(xt(s))return Hh(t,s,i)}return i}function cp(t,i,s,u,f,g,v,A,w){return t=kc(s,u,!0,t,f,g,v,A,w),t.context=up(null),s=t.current,u=kt(),f=Si(s),g=Xn(u,f),g.callback=i??null,pi(s,g,f),t.current.lanes=f,mo(t,f,u),zt(t,u),t}function Ga(t,i,s,u){var f=i.current,g=kt(),v=Si(f);return s=up(s),i.context===null?i.context=s:i.pendingContext=s,i=Xn(g,v),i.payload={element:t},u=u===void 0?null:u,u!==null&&(i.callback=u),t=pi(f,i,v),t!==null&&(Sn(t,f,v,g),ma(t,f,v)),v}function xa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dp(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function Mc(t,i){dp(t,i),(t=t.alternate)&&dp(t,i)}function iS(){return null}var fp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Oc(t){this._internalRoot=t}ba.prototype.render=Oc.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));Ga(t,i,null,null)},ba.prototype.unmount=Oc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;ji(function(){Ga(null,t,null,null)}),i[zn]=null}};function ba(t){this._internalRoot=t}ba.prototype.unstable_scheduleHydration=function(t){if(t){var i=Kf();t={blockedOn:null,target:t,priority:i};for(var s=0;s<ai.length&&i!==0&&i<ai[s].priority;s++);ai.splice(s,0,t),s===0&&Zf(t)}};function Fc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $a(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hp(){}function rS(t,i,s,u,f){if(f){if(typeof u=="function"){var g=u;u=function(){var M=xa(v);g.call(M)}}var v=cp(i,u,t,0,null,!1,!1,"",hp);return t._reactRootContainer=v,t[zn]=v.current,Do(t.nodeType===8?t.parentNode:t),ji(),v}for(;f=t.lastChild;)t.removeChild(f);if(typeof u=="function"){var A=u;u=function(){var M=xa(w);A.call(M)}}var w=kc(t,0,!1,null,null,!1,!1,"",hp);return t._reactRootContainer=w,t[zn]=w.current,Do(t.nodeType===8?t.parentNode:t),ji(function(){Ga(i,w,s,u)}),w}function za(t,i,s,u,f){var g=s._reactRootContainer;if(g){var v=g;if(typeof f=="function"){var A=f;f=function(){var w=xa(v);A.call(w)}}Ga(i,v,t,f)}else v=rS(s,i,t,f,u);return xa(v)}Vf=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var s=po(i.pendingLanes);s!==0&&(ru(i,s|1),zt(i,rt()),(He&6)===0&&(Fr=rt()+500,hi()))}break;case 13:ji(function(){var u=Vn(t,1);if(u!==null){var f=kt();Sn(u,t,1,f)}}),Mc(t,1)}},ou=function(t){if(t.tag===13){var i=Vn(t,134217728);if(i!==null){var s=kt();Sn(i,t,134217728,s)}Mc(t,134217728)}},Xf=function(t){if(t.tag===13){var i=Si(t),s=Vn(t,i);if(s!==null){var u=kt();Sn(s,t,i,u)}Mc(t,i)}},Kf=function(){return $e},Qf=function(t,i){var s=$e;try{return $e=t,i()}finally{$e=s}},ql=function(t,i,s){switch(i){case"input":if(Bt(t,s),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<s.length;i++){var u=s[i];if(u!==t&&u.form===t.form){var f=sa(u);if(!f)throw Error(r(90));ce(u),Bt(u,f)}}}break;case"textarea":_f(t,s);break;case"select":i=s.value,i!=null&&ii(t,!!s.multiple,i,!1)}},Ff=_c,Uf=ji;var oS={usingClientEntryPoint:!1,Events:[Oo,Tr,sa,Mf,Of,_c]},Vo={findFiberByHostInstance:Bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sS={bundleType:Vo.bundleType,version:Vo.version,rendererPackageName:Vo.rendererPackageName,rendererConfig:Vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Gf(t),t===null?null:t.stateNode},findFiberByHostInstance:Vo.findFiberByHostInstance||iS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wa.isDisabled&&Wa.supportsFiber)try{bs=Wa.inject(sS),Dn=Wa}catch{}}return Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oS,Wt.createPortal=function(t,i){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fc(i))throw Error(r(200));return nS(t,i,null,s)},Wt.createRoot=function(t,i){if(!Fc(t))throw Error(r(299));var s=!1,u="",f=fp;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=kc(t,1,!1,null,null,s,!1,u,f),t[zn]=i.current,Do(t.nodeType===8?t.parentNode:t),new Oc(i)},Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=Gf(i),t=t===null?null:t.stateNode,t},Wt.flushSync=function(t){return ji(t)},Wt.hydrate=function(t,i,s){if(!$a(i))throw Error(r(200));return za(null,t,i,!0,s)},Wt.hydrateRoot=function(t,i,s){if(!Fc(t))throw Error(r(405));var u=s!=null&&s.hydratedSources||null,f=!1,g="",v=fp;if(s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),i=cp(i,null,t,1,s??null,f,!1,g,v),t[zn]=i.current,Do(t),u)for(t=0;t<u.length;t++)s=u[t],f=s._getVersion,f=f(s._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[s,f]:i.mutableSourceEagerHydrationData.push(s,f);return new ba(i)},Wt.render=function(t,i,s){if(!$a(i))throw Error(r(200));return za(null,t,i,!1,s)},Wt.unmountComponentAtNode=function(t){if(!$a(t))throw Error(r(40));return t._reactRootContainer?(ji(function(){za(null,null,t,!1,function(){t._reactRootContainer=null,t[zn]=null})}),!0):!1},Wt.unstable_batchedUpdates=_c,Wt.unstable_renderSubtreeIntoContainer=function(t,i,s,u){if(!$a(s))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return za(t,i,s,!1,u)},Wt.version="18.3.1-next-f1338f8080-20240426",Wt}var Tp;function mS(){if(Tp)return Hc.exports;Tp=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Hc.exports=pS(),Hc.exports}var Ip;function vS(){if(Ip)return Ya;Ip=1;var e=mS();return Ya.createRoot=e.createRoot,Ya.hydrateRoot=e.hydrateRoot,Ya}var yS=vS();const SS=Lm(yS),Hm=Pe.createContext(void 0),AS=({initialAppState:e,children:n})=>{const[r,o]=Pe.useState(e),[l,a]=Pe.useState(void 0),c=(d,h)=>{o(d),d==="gameOver"&&h?a(h):d!=="gameOver"&&a(void 0)};return Le.jsx(Hm.Provider,{value:{appState:r,setAppState:c,gameOverDetails:l},children:n})},kl=()=>{const e=Pe.useContext(Hm);if(e===void 0)throw new Error("useGameContext must be used within a GameProvider");return e};var Nt=function(){return Nt=Object.assign||function(n){for(var r,o=1,l=arguments.length;o<l;o++){r=arguments[o];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},Nt.apply(this,arguments)};function vs(e,n,r){if(r||arguments.length===2)for(var o=0,l=n.length,a;o<l;o++)(a||!(o in n))&&(a||(a=Array.prototype.slice.call(n,0,o)),a[o]=n[o]);return e.concat(a||Array.prototype.slice.call(n))}var Xe="-ms-",as="-moz-",be="-webkit-",Bm="comm",Ml="rule",Fd="decl",TS="@import",Gm="@keyframes",IS="@layer",xm=Math.abs,Ud=String.fromCharCode,pd=Object.assign;function wS(e,n){return pt(e,0)^45?(((n<<2^pt(e,0))<<2^pt(e,1))<<2^pt(e,2))<<2^pt(e,3):0}function bm(e){return e.trim()}function Jn(e,n){return(e=n.exec(e))?e[0]:e}function Re(e,n,r){return e.replace(n,r)}function hl(e,n,r){return e.indexOf(n,r)}function pt(e,n){return e.charCodeAt(n)|0}function Xr(e,n,r){return e.slice(n,r)}function Bn(e){return e.length}function $m(e){return e.length}function is(e,n){return n.push(e),e}function ES(e,n){return e.map(n).join("")}function wp(e,n){return e.filter(function(r){return!Jn(r,n)})}var Ol=1,Kr=1,zm=0,fn=0,lt=0,oo="";function Fl(e,n,r,o,l,a,c,d){return{value:e,root:n,parent:r,type:o,props:l,children:a,line:Ol,column:Kr,length:c,return:"",siblings:d}}function Ci(e,n){return pd(Fl("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},n)}function Lr(e){for(;e.root;)e=Ci(e.root,{children:[e]});is(e,e.siblings)}function _S(){return lt}function CS(){return lt=fn>0?pt(oo,--fn):0,Kr--,lt===10&&(Kr=1,Ol--),lt}function wn(){return lt=fn<zm?pt(oo,fn++):0,Kr++,lt===10&&(Kr=1,Ol++),lt}function or(){return pt(oo,fn)}function gl(){return fn}function Ul(e,n){return Xr(oo,e,n)}function md(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function RS(e){return Ol=Kr=1,zm=Bn(oo=e),fn=0,[]}function PS(e){return oo="",e}function xc(e){return bm(Ul(fn-1,vd(e===91?e+2:e===40?e+1:e)))}function NS(e){for(;(lt=or())&&lt<33;)wn();return md(e)>2||md(lt)>3?"":" "}function DS(e,n){for(;--n&&wn()&&!(lt<48||lt>102||lt>57&&lt<65||lt>70&&lt<97););return Ul(e,gl()+(n<6&&or()==32&&wn()==32))}function vd(e){for(;wn();)switch(lt){case e:return fn;case 34:case 39:e!==34&&e!==39&&vd(lt);break;case 40:e===41&&vd(e);break;case 92:wn();break}return fn}function kS(e,n){for(;wn()&&e+lt!==57;)if(e+lt===84&&or()===47)break;return"/*"+Ul(n,fn-1)+"*"+Ud(e===47?e:wn())}function MS(e){for(;!md(or());)wn();return Ul(e,fn)}function OS(e){return PS(pl("",null,null,null,[""],e=RS(e),0,[0],e))}function pl(e,n,r,o,l,a,c,d,h){for(var p=0,m=0,y=c,S=0,E=0,P=0,_=1,T=1,U=1,L=0,D="",x=l,W=a,F=o,Y=D;T;)switch(P=L,L=wn()){case 40:if(P!=108&&pt(Y,y-1)==58){hl(Y+=Re(xc(L),"&","&\f"),"&\f",xm(p?d[p-1]:0))!=-1&&(U=-1);break}case 34:case 39:case 91:Y+=xc(L);break;case 9:case 10:case 13:case 32:Y+=NS(P);break;case 92:Y+=DS(gl()-1,7);continue;case 47:switch(or()){case 42:case 47:is(FS(kS(wn(),gl()),n,r,h),h);break;default:Y+="/"}break;case 123*_:d[p++]=Bn(Y)*U;case 125*_:case 59:case 0:switch(L){case 0:case 125:T=0;case 59+m:U==-1&&(Y=Re(Y,/\f/g,"")),E>0&&Bn(Y)-y&&is(E>32?_p(Y+";",o,r,y-1,h):_p(Re(Y," ","")+";",o,r,y-2,h),h);break;case 59:Y+=";";default:if(is(F=Ep(Y,n,r,p,m,l,d,D,x=[],W=[],y,a),a),L===123)if(m===0)pl(Y,n,F,F,x,a,y,d,W);else switch(S===99&&pt(Y,3)===110?100:S){case 100:case 108:case 109:case 115:pl(e,F,F,o&&is(Ep(e,F,F,0,0,l,d,D,l,x=[],y,W),W),l,W,y,d,o?x:W);break;default:pl(Y,F,F,F,[""],W,0,d,W)}}p=m=E=0,_=U=1,D=Y="",y=c;break;case 58:y=1+Bn(Y),E=P;default:if(_<1){if(L==123)--_;else if(L==125&&_++==0&&CS()==125)continue}switch(Y+=Ud(L),L*_){case 38:U=m>0?1:(Y+="\f",-1);break;case 44:d[p++]=(Bn(Y)-1)*U,U=1;break;case 64:or()===45&&(Y+=xc(wn())),S=or(),m=y=Bn(D=Y+=MS(gl())),L++;break;case 45:P===45&&Bn(Y)==2&&(_=0)}}return a}function Ep(e,n,r,o,l,a,c,d,h,p,m,y){for(var S=l-1,E=l===0?a:[""],P=$m(E),_=0,T=0,U=0;_<o;++_)for(var L=0,D=Xr(e,S+1,S=xm(T=c[_])),x=e;L<P;++L)(x=bm(T>0?E[L]+" "+D:Re(D,/&\f/g,E[L])))&&(h[U++]=x);return Fl(e,n,r,l===0?Ml:d,h,p,m,y)}function FS(e,n,r,o){return Fl(e,n,r,Bm,Ud(_S()),Xr(e,2,-2),0,o)}function _p(e,n,r,o,l){return Fl(e,n,r,Fd,Xr(e,0,o),Xr(e,o+1,-1),o,l)}function Wm(e,n,r){switch(wS(e,n)){case 5103:return be+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return be+e+e;case 4789:return as+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return be+e+as+e+Xe+e+e;case 5936:switch(pt(e,n+11)){case 114:return be+e+Xe+Re(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return be+e+Xe+Re(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return be+e+Xe+Re(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return be+e+Xe+e+e;case 6165:return be+e+Xe+"flex-"+e+e;case 5187:return be+e+Re(e,/(\w+).+(:[^]+)/,be+"box-$1$2"+Xe+"flex-$1$2")+e;case 5443:return be+e+Xe+"flex-item-"+Re(e,/flex-|-self/g,"")+(Jn(e,/flex-|baseline/)?"":Xe+"grid-row-"+Re(e,/flex-|-self/g,""))+e;case 4675:return be+e+Xe+"flex-line-pack"+Re(e,/align-content|flex-|-self/g,"")+e;case 5548:return be+e+Xe+Re(e,"shrink","negative")+e;case 5292:return be+e+Xe+Re(e,"basis","preferred-size")+e;case 6060:return be+"box-"+Re(e,"-grow","")+be+e+Xe+Re(e,"grow","positive")+e;case 4554:return be+Re(e,/([^-])(transform)/g,"$1"+be+"$2")+e;case 6187:return Re(Re(Re(e,/(zoom-|grab)/,be+"$1"),/(image-set)/,be+"$1"),e,"")+e;case 5495:case 3959:return Re(e,/(image-set\([^]*)/,be+"$1$`$1");case 4968:return Re(Re(e,/(.+:)(flex-)?(.*)/,be+"box-pack:$3"+Xe+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+be+e+e;case 4200:if(!Jn(e,/flex-|baseline/))return Xe+"grid-column-align"+Xr(e,n)+e;break;case 2592:case 3360:return Xe+Re(e,"template-","")+e;case 4384:case 3616:return r&&r.some(function(o,l){return n=l,Jn(o.props,/grid-\w+-end/)})?~hl(e+(r=r[n].value),"span",0)?e:Xe+Re(e,"-start","")+e+Xe+"grid-row-span:"+(~hl(r,"span",0)?Jn(r,/\d+/):+Jn(r,/\d+/)-+Jn(e,/\d+/))+";":Xe+Re(e,"-start","")+e;case 4896:case 4128:return r&&r.some(function(o){return Jn(o.props,/grid-\w+-start/)})?e:Xe+Re(Re(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return Re(e,/(.+)-inline(.+)/,be+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Bn(e)-1-n>6)switch(pt(e,n+1)){case 109:if(pt(e,n+4)!==45)break;case 102:return Re(e,/(.+:)(.+)-([^]+)/,"$1"+be+"$2-$3$1"+as+(pt(e,n+3)==108?"$3":"$2-$3"))+e;case 115:return~hl(e,"stretch",0)?Wm(Re(e,"stretch","fill-available"),n,r)+e:e}break;case 5152:case 5920:return Re(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(o,l,a,c,d,h,p){return Xe+l+":"+a+p+(c?Xe+l+"-span:"+(d?h:+h-+a)+p:"")+e});case 4949:if(pt(e,n+6)===121)return Re(e,":",":"+be)+e;break;case 6444:switch(pt(e,pt(e,14)===45?18:11)){case 120:return Re(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+be+(pt(e,14)===45?"inline-":"")+"box$3$1"+be+"$2$3$1"+Xe+"$2box$3")+e;case 100:return Re(e,":",":"+Xe)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Re(e,"scroll-","scroll-snap-")+e}return e}function Tl(e,n){for(var r="",o=0;o<e.length;o++)r+=n(e[o],o,e,n)||"";return r}function US(e,n,r,o){switch(e.type){case IS:if(e.children.length)break;case TS:case Fd:return e.return=e.return||e.value;case Bm:return"";case Gm:return e.return=e.value+"{"+Tl(e.children,o)+"}";case Ml:if(!Bn(e.value=e.props.join(",")))return""}return Bn(r=Tl(e.children,o))?e.return=e.value+"{"+r+"}":""}function LS(e){var n=$m(e);return function(r,o,l,a){for(var c="",d=0;d<n;d++)c+=e[d](r,o,l,a)||"";return c}}function HS(e){return function(n){n.root||(n=n.return)&&e(n)}}function BS(e,n,r,o){if(e.length>-1&&!e.return)switch(e.type){case Fd:e.return=Wm(e.value,e.length,r);return;case Gm:return Tl([Ci(e,{value:Re(e.value,"@","@"+be)})],o);case Ml:if(e.length)return ES(r=e.props,function(l){switch(Jn(l,o=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Lr(Ci(e,{props:[Re(l,/:(read-\w+)/,":"+as+"$1")]})),Lr(Ci(e,{props:[l]})),pd(e,{props:wp(r,o)});break;case"::placeholder":Lr(Ci(e,{props:[Re(l,/:(plac\w+)/,":"+be+"input-$1")]})),Lr(Ci(e,{props:[Re(l,/:(plac\w+)/,":"+as+"$1")]})),Lr(Ci(e,{props:[Re(l,/:(plac\w+)/,Xe+"input-$1")]})),Lr(Ci(e,{props:[l]})),pd(e,{props:wp(r,o)});break}return""})}}var GS={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},en={},Qr=typeof process<"u"&&en!==void 0&&(en.REACT_APP_SC_ATTR||en.SC_ATTR)||"data-styled",Ym="active",jm="data-styled-version",Ll="6.1.13",Ld=`/*!sc*/
`,Il=typeof window<"u"&&"HTMLElement"in window,xS=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&en!==void 0&&en.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&en.REACT_APP_SC_DISABLE_SPEEDY!==""?en.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&en.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&en!==void 0&&en.SC_DISABLE_SPEEDY!==void 0&&en.SC_DISABLE_SPEEDY!==""&&en.SC_DISABLE_SPEEDY!=="false"&&en.SC_DISABLE_SPEEDY),bS={},Hl=Object.freeze([]),qr=Object.freeze({});function Vm(e,n,r){return r===void 0&&(r=qr),e.theme!==r.theme&&e.theme||n||r.theme}var Xm=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),$S=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,zS=/(^-|-$)/g;function Cp(e){return e.replace($S,"-").replace(zS,"")}var WS=/(a)(d)/gi,ja=52,Rp=function(e){return String.fromCharCode(e+(e>25?39:97))};function yd(e){var n,r="";for(n=Math.abs(e);n>ja;n=n/ja|0)r=Rp(n%ja)+r;return(Rp(n%ja)+r).replace(WS,"$1-$2")}var bc,Km=5381,zr=function(e,n){for(var r=n.length;r;)e=33*e^n.charCodeAt(--r);return e},Qm=function(e){return zr(Km,e)};function qm(e){return yd(Qm(e)>>>0)}function YS(e){return e.displayName||e.name||"Component"}function $c(e){return typeof e=="string"&&!0}var Zm=typeof Symbol=="function"&&Symbol.for,Jm=Zm?Symbol.for("react.memo"):60115,jS=Zm?Symbol.for("react.forward_ref"):60112,VS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},XS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},e0={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},KS=((bc={})[jS]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},bc[Jm]=e0,bc);function Pp(e){return("type"in(n=e)&&n.type.$$typeof)===Jm?e0:"$$typeof"in e?KS[e.$$typeof]:VS;var n}var QS=Object.defineProperty,qS=Object.getOwnPropertyNames,Np=Object.getOwnPropertySymbols,ZS=Object.getOwnPropertyDescriptor,JS=Object.getPrototypeOf,Dp=Object.prototype;function t0(e,n,r){if(typeof n!="string"){if(Dp){var o=JS(n);o&&o!==Dp&&t0(e,o,r)}var l=qS(n);Np&&(l=l.concat(Np(n)));for(var a=Pp(e),c=Pp(n),d=0;d<l.length;++d){var h=l[d];if(!(h in XS||r&&r[h]||c&&h in c||a&&h in a)){var p=ZS(n,h);try{QS(e,h,p)}catch{}}}}return e}function Zr(e){return typeof e=="function"}function Hd(e){return typeof e=="object"&&"styledComponentId"in e}function ir(e,n){return e&&n?"".concat(e," ").concat(n):e||n||""}function Sd(e,n){if(e.length===0)return"";for(var r=e[0],o=1;o<e.length;o++)r+=e[o];return r}function ys(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Ad(e,n,r){if(r===void 0&&(r=!1),!r&&!ys(e)&&!Array.isArray(e))return n;if(Array.isArray(n))for(var o=0;o<n.length;o++)e[o]=Ad(e[o],n[o]);else if(ys(n))for(var o in n)e[o]=Ad(e[o],n[o]);return e}function Bd(e,n){Object.defineProperty(e,"toString",{value:n})}function Ms(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(n.length>0?" Args: ".concat(n.join(", ")):""))}var eA=function(){function e(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}return e.prototype.indexOfGroup=function(n){for(var r=0,o=0;o<n;o++)r+=this.groupSizes[o];return r},e.prototype.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var o=this.groupSizes,l=o.length,a=l;n>=a;)if((a<<=1)<0)throw Ms(16,"".concat(n));this.groupSizes=new Uint32Array(a),this.groupSizes.set(o),this.length=a;for(var c=l;c<a;c++)this.groupSizes[c]=0}for(var d=this.indexOfGroup(n+1),h=(c=0,r.length);c<h;c++)this.tag.insertRule(d,r[c])&&(this.groupSizes[n]++,d++)},e.prototype.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],o=this.indexOfGroup(n),l=o+r;this.groupSizes[n]=0;for(var a=o;a<l;a++)this.tag.deleteRule(o)}},e.prototype.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var o=this.groupSizes[n],l=this.indexOfGroup(n),a=l+o,c=l;c<a;c++)r+="".concat(this.tag.getRule(c)).concat(Ld);return r},e}(),ml=new Map,wl=new Map,vl=1,Va=function(e){if(ml.has(e))return ml.get(e);for(;wl.has(vl);)vl++;var n=vl++;return ml.set(e,n),wl.set(n,e),n},tA=function(e,n){vl=n+1,ml.set(e,n),wl.set(n,e)},nA="style[".concat(Qr,"][").concat(jm,'="').concat(Ll,'"]'),iA=new RegExp("^".concat(Qr,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),rA=function(e,n,r){for(var o,l=r.split(","),a=0,c=l.length;a<c;a++)(o=l[a])&&e.registerName(n,o)},oA=function(e,n){for(var r,o=((r=n.textContent)!==null&&r!==void 0?r:"").split(Ld),l=[],a=0,c=o.length;a<c;a++){var d=o[a].trim();if(d){var h=d.match(iA);if(h){var p=0|parseInt(h[1],10),m=h[2];p!==0&&(tA(m,p),rA(e,m,h[3]),e.getTag().insertRules(p,l)),l.length=0}else l.push(d)}}},kp=function(e){for(var n=document.querySelectorAll(nA),r=0,o=n.length;r<o;r++){var l=n[r];l&&l.getAttribute(Qr)!==Ym&&(oA(e,l),l.parentNode&&l.parentNode.removeChild(l))}};function sA(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var n0=function(e){var n=document.head,r=e||n,o=document.createElement("style"),l=function(d){var h=Array.from(d.querySelectorAll("style[".concat(Qr,"]")));return h[h.length-1]}(r),a=l!==void 0?l.nextSibling:null;o.setAttribute(Qr,Ym),o.setAttribute(jm,Ll);var c=sA();return c&&o.setAttribute("nonce",c),r.insertBefore(o,a),o},aA=function(){function e(n){this.element=n0(n),this.element.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var o=document.styleSheets,l=0,a=o.length;l<a;l++){var c=o[l];if(c.ownerNode===r)return c}throw Ms(17)}(this.element),this.length=0}return e.prototype.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},e.prototype.getRule=function(n){var r=this.sheet.cssRules[n];return r&&r.cssText?r.cssText:""},e}(),lA=function(){function e(n){this.element=n0(n),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(n,r){if(n<=this.length&&n>=0){var o=document.createTextNode(r);return this.element.insertBefore(o,this.nodes[n]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},e.prototype.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},e}(),uA=function(){function e(n){this.rules=[],this.length=0}return e.prototype.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},e.prototype.deleteRule=function(n){this.rules.splice(n,1),this.length--},e.prototype.getRule=function(n){return n<this.length?this.rules[n]:""},e}(),Mp=Il,cA={isServer:!Il,useCSSOMInjection:!xS},El=function(){function e(n,r,o){n===void 0&&(n=qr),r===void 0&&(r={});var l=this;this.options=Nt(Nt({},cA),n),this.gs=r,this.names=new Map(o),this.server=!!n.isServer,!this.server&&Il&&Mp&&(Mp=!1,kp(this)),Bd(this,function(){return function(a){for(var c=a.getTag(),d=c.length,h="",p=function(y){var S=function(U){return wl.get(U)}(y);if(S===void 0)return"continue";var E=a.names.get(S),P=c.getGroup(y);if(E===void 0||!E.size||P.length===0)return"continue";var _="".concat(Qr,".g").concat(y,'[id="').concat(S,'"]'),T="";E!==void 0&&E.forEach(function(U){U.length>0&&(T+="".concat(U,","))}),h+="".concat(P).concat(_,'{content:"').concat(T,'"}').concat(Ld)},m=0;m<d;m++)p(m);return h}(l)})}return e.registerId=function(n){return Va(n)},e.prototype.rehydrate=function(){!this.server&&Il&&kp(this)},e.prototype.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new e(Nt(Nt({},this.options),n),this.gs,r&&this.names||void 0)},e.prototype.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(n=function(r){var o=r.useCSSOMInjection,l=r.target;return r.isServer?new uA(l):o?new aA(l):new lA(l)}(this.options),new eA(n)));var n},e.prototype.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},e.prototype.registerName=function(n,r){if(Va(n),this.names.has(n))this.names.get(n).add(r);else{var o=new Set;o.add(r),this.names.set(n,o)}},e.prototype.insertRules=function(n,r,o){this.registerName(n,r),this.getTag().insertRules(Va(n),o)},e.prototype.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},e.prototype.clearRules=function(n){this.getTag().clearGroup(Va(n)),this.clearNames(n)},e.prototype.clearTag=function(){this.tag=void 0},e}(),dA=/&/g,fA=/^\s*\/\/.*$/gm;function i0(e,n){return e.map(function(r){return r.type==="rule"&&(r.value="".concat(n," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(n," ")),r.props=r.props.map(function(o){return"".concat(n," ").concat(o)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=i0(r.children,n)),r})}function hA(e){var n,r,o,l=qr,a=l.options,c=a===void 0?qr:a,d=l.plugins,h=d===void 0?Hl:d,p=function(S,E,P){return P.startsWith(r)&&P.endsWith(r)&&P.replaceAll(r,"").length>0?".".concat(n):S},m=h.slice();m.push(function(S){S.type===Ml&&S.value.includes("&")&&(S.props[0]=S.props[0].replace(dA,r).replace(o,p))}),c.prefix&&m.push(BS),m.push(US);var y=function(S,E,P,_){E===void 0&&(E=""),P===void 0&&(P=""),_===void 0&&(_="&"),n=_,r=E,o=new RegExp("\\".concat(r,"\\b"),"g");var T=S.replace(fA,""),U=OS(P||E?"".concat(P," ").concat(E," { ").concat(T," }"):T);c.namespace&&(U=i0(U,c.namespace));var L=[];return Tl(U,LS(m.concat(HS(function(D){return L.push(D)})))),L};return y.hash=h.length?h.reduce(function(S,E){return E.name||Ms(15),zr(S,E.name)},Km).toString():"",y}var gA=new El,Td=hA(),r0=Gn.createContext({shouldForwardProp:void 0,styleSheet:gA,stylis:Td});r0.Consumer;Gn.createContext(void 0);function Id(){return Pe.useContext(r0)}var pA=function(){function e(n,r){var o=this;this.inject=function(l,a){a===void 0&&(a=Td);var c=o.name+a.hash;l.hasNameForId(o.id,c)||l.insertRules(o.id,c,a(o.rules,c,"@keyframes"))},this.name=n,this.id="sc-keyframes-".concat(n),this.rules=r,Bd(this,function(){throw Ms(12,String(o.name))})}return e.prototype.getName=function(n){return n===void 0&&(n=Td),this.name+n.hash},e}(),mA=function(e){return e>="A"&&e<="Z"};function Op(e){for(var n="",r=0;r<e.length;r++){var o=e[r];if(r===1&&o==="-"&&e[0]==="-")return e;mA(o)?n+="-"+o.toLowerCase():n+=o}return n.startsWith("ms-")?"-"+n:n}var o0=function(e){return e==null||e===!1||e===""},s0=function(e){var n,r,o=[];for(var l in e){var a=e[l];e.hasOwnProperty(l)&&!o0(a)&&(Array.isArray(a)&&a.isCss||Zr(a)?o.push("".concat(Op(l),":"),a,";"):ys(a)?o.push.apply(o,vs(vs(["".concat(l," {")],s0(a),!1),["}"],!1)):o.push("".concat(Op(l),": ").concat((n=l,(r=a)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||n in GS||n.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return o};function ki(e,n,r,o){if(o0(e))return[];if(Hd(e))return[".".concat(e.styledComponentId)];if(Zr(e)){if(!Zr(a=e)||a.prototype&&a.prototype.isReactComponent||!n)return[e];var l=e(n);return ki(l,n,r,o)}var a;return e instanceof pA?r?(e.inject(r,o),[e.getName(o)]):[e]:ys(e)?s0(e):Array.isArray(e)?Array.prototype.concat.apply(Hl,e.map(function(c){return ki(c,n,r,o)})):[e.toString()]}function a0(e){for(var n=0;n<e.length;n+=1){var r=e[n];if(Zr(r)&&!Hd(r))return!1}return!0}var vA=Qm(Ll),yA=function(){function e(n,r,o){this.rules=n,this.staticRulesId="",this.isStatic=(o===void 0||o.isStatic)&&a0(n),this.componentId=r,this.baseHash=zr(vA,r),this.baseStyle=o,El.registerId(r)}return e.prototype.generateAndInjectStyles=function(n,r,o){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(n,r,o):"";if(this.isStatic&&!o.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))l=ir(l,this.staticRulesId);else{var a=Sd(ki(this.rules,n,r,o)),c=yd(zr(this.baseHash,a)>>>0);if(!r.hasNameForId(this.componentId,c)){var d=o(a,".".concat(c),void 0,this.componentId);r.insertRules(this.componentId,c,d)}l=ir(l,c),this.staticRulesId=c}else{for(var h=zr(this.baseHash,o.hash),p="",m=0;m<this.rules.length;m++){var y=this.rules[m];if(typeof y=="string")p+=y;else if(y){var S=Sd(ki(y,n,r,o));h=zr(h,S+m),p+=S}}if(p){var E=yd(h>>>0);r.hasNameForId(this.componentId,E)||r.insertRules(this.componentId,E,o(p,".".concat(E),void 0,this.componentId)),l=ir(l,E)}}return l},e}(),Gd=Gn.createContext(void 0);Gd.Consumer;var zc={};function SA(e,n,r){var o=Hd(e),l=e,a=!$c(e),c=n.attrs,d=c===void 0?Hl:c,h=n.componentId,p=h===void 0?function(x,W){var F=typeof x!="string"?"sc":Cp(x);zc[F]=(zc[F]||0)+1;var Y="".concat(F,"-").concat(qm(Ll+F+zc[F]));return W?"".concat(W,"-").concat(Y):Y}(n.displayName,n.parentComponentId):h,m=n.displayName,y=m===void 0?function(x){return $c(x)?"styled.".concat(x):"Styled(".concat(YS(x),")")}(e):m,S=n.displayName&&n.componentId?"".concat(Cp(n.displayName),"-").concat(n.componentId):n.componentId||p,E=o&&l.attrs?l.attrs.concat(d).filter(Boolean):d,P=n.shouldForwardProp;if(o&&l.shouldForwardProp){var _=l.shouldForwardProp;if(n.shouldForwardProp){var T=n.shouldForwardProp;P=function(x,W){return _(x,W)&&T(x,W)}}else P=_}var U=new yA(r,S,o?l.componentStyle:void 0);function L(x,W){return function(F,Y,ue){var Ee=F.attrs,_e=F.componentStyle,xe=F.defaultProps,De=F.foldedComponentIds,Te=F.styledComponentId,le=F.target,Fe=Gn.useContext(Gd),ve=Id(),J=F.shouldForwardProp||ve.shouldForwardProp,b=Vm(Y,Fe,xe)||qr,j=function(he,re,ye){for(var me,K=Nt(Nt({},re),{className:void 0,theme:ye}),te=0;te<he.length;te+=1){var ke=Zr(me=he[te])?me(K):me;for(var ce in ke)K[ce]=ce==="className"?ir(K[ce],ke[ce]):ce==="style"?Nt(Nt({},K[ce]),ke[ce]):ke[ce]}return re.className&&(K.className=ir(K.className,re.className)),K}(Ee,Y,b),$=j.as||le,C={};for(var O in j)j[O]===void 0||O[0]==="$"||O==="as"||O==="theme"&&j.theme===b||(O==="forwardedAs"?C.as=j.forwardedAs:J&&!J(O,$)||(C[O]=j[O]));var V=function(he,re){var ye=Id(),me=he.generateAndInjectStyles(re,ye.styleSheet,ye.stylis);return me}(_e,j),ee=ir(De,Te);return V&&(ee+=" "+V),j.className&&(ee+=" "+j.className),C[$c($)&&!Xm.has($)?"class":"className"]=ee,C.ref=ue,Pe.createElement($,C)}(D,x,W)}L.displayName=y;var D=Gn.forwardRef(L);return D.attrs=E,D.componentStyle=U,D.displayName=y,D.shouldForwardProp=P,D.foldedComponentIds=o?ir(l.foldedComponentIds,l.styledComponentId):"",D.styledComponentId=S,D.target=o?l.target:e,Object.defineProperty(D,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(x){this._foldedDefaultProps=o?function(W){for(var F=[],Y=1;Y<arguments.length;Y++)F[Y-1]=arguments[Y];for(var ue=0,Ee=F;ue<Ee.length;ue++)Ad(W,Ee[ue],!0);return W}({},l.defaultProps,x):x}}),Bd(D,function(){return".".concat(D.styledComponentId)}),a&&t0(D,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),D}function Fp(e,n){for(var r=[e[0]],o=0,l=n.length;o<l;o+=1)r.push(n[o],e[o+1]);return r}var Up=function(e){return Object.assign(e,{isCss:!0})};function l0(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(Zr(e)||ys(e))return Up(ki(Fp(Hl,vs([e],n,!0))));var o=e;return n.length===0&&o.length===1&&typeof o[0]=="string"?ki(o):Up(ki(Fp(o,n)))}function wd(e,n,r){if(r===void 0&&(r=qr),!n)throw Ms(1,n);var o=function(l){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];return e(n,r,l0.apply(void 0,vs([l],a,!1)))};return o.attrs=function(l){return wd(e,n,Nt(Nt({},r),{attrs:Array.prototype.concat(r.attrs,l).filter(Boolean)}))},o.withConfig=function(l){return wd(e,n,Nt(Nt({},r),l))},o}var u0=function(e){return wd(SA,e)},$n=u0;Xm.forEach(function(e){$n[e]=u0(e)});var AA=function(){function e(n,r){this.rules=n,this.componentId=r,this.isStatic=a0(n),El.registerId(this.componentId+1)}return e.prototype.createStyles=function(n,r,o,l){var a=l(Sd(ki(this.rules,r,o,l)),""),c=this.componentId+n;o.insertRules(c,c,a)},e.prototype.removeStyles=function(n,r){r.clearRules(this.componentId+n)},e.prototype.renderStyles=function(n,r,o,l){n>2&&El.registerId(this.componentId+n),this.removeStyles(n,o),this.createStyles(n,r,o,l)},e}();function TA(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=l0.apply(void 0,vs([e],n,!1)),l="sc-global-".concat(qm(JSON.stringify(o))),a=new AA(o,l),c=function(h){var p=Id(),m=Gn.useContext(Gd),y=Gn.useRef(p.styleSheet.allocateGSInstance(l)).current;return p.styleSheet.server&&d(y,h,p.styleSheet,m,p.stylis),Gn.useLayoutEffect(function(){if(!p.styleSheet.server)return d(y,h,p.styleSheet,m,p.stylis),function(){return a.removeStyles(y,p.styleSheet)}},[y,h,p.styleSheet,m,p.stylis]),null};function d(h,p,m,y,S){if(a.isStatic)a.renderStyles(h,bS,m,S);else{var E=Nt(Nt({},p),{theme:Vm(p,y,c.defaultProps)});a.renderStyles(h,E,m,S)}}return Gn.memo(c)}function c0(e,n){var r=Pe.useRef(null),o=Pe.useRef(!1),l=Pe.useRef(e);l.current=e;var a=Pe.useCallback(function(d){o.current&&(l.current(d),r.current=requestAnimationFrame(a))},[]),c=Pe.useMemo(function(){return[function(){o.current&&(o.current=!1,r.current&&cancelAnimationFrame(r.current))},function(){o.current||(o.current=!0,r.current=requestAnimationFrame(a))},function(){return o.current}]},[]);return Pe.useEffect(function(){return c[0]},[]),c}function IA(e,n,r,o,l){var c;(c=e.onExit)==null||c.call(e,o,n);const a=l.find(({id:d})=>d===n);return a!=null&&a.onEnter?a.onEnter(o,r):{...r,enteredAt:o.updateContext.gameState.time}}function wA(e,n){return n.find(({id:r})=>r===e)}function EA(e,n){return e!==n}function _A(e){console.warn(`No handler found for state: ${e}`)}const ls="bushGrowing",nr="bushFull",yl="bushSpreading",Ss="bushDying",Vt=24,Xt=10,Ze=3e3,Je=3e3,xd=2,CA=5,RA=3,PA=12,NA=940,Ed=20,Lp=90,d0=45,f0=240,Bl=10,As=80,DA=3,Ko=5,tn=150,h0=tn*.8,kA=tn*.2,lr=tn*.95,Oi=30,g0=10,MA=10,OA=.5,mt=30,Fi=mt*.75,p0=50,FA=20,UA=As*.8,LA=.7,HA=16,m0=40,BA=24,bd=16,GA=72/3,Hp=24,xA=1.25,bA=1.5,$d=tn*.6,zd=50,$A=1,zA=350,v0=As*.65,WA=80,YA=50,jA=1,VA=128,y0=10,Bp=100,Wd=35,xn=mt,S0=.5,Gl=2.5,XA=5,Yd=.5,jd=1.5,KA=.1,QA=.5,qA=1.5,ZA=.25,JA=2.5,eT=45,tT=.05,Ts=5,nT=.5,Gp=100,iT=300,xl=30,Is=1,xp=tn*.6,rT=tn*.25,oT=tn*.7,sT=tn*.8,bp=300,aT=600,A0=100,lT=250,uT=120,cT=2,dT=400,fT=1e3,hT=tn*.85,gT=100,pT=3,mT=96,vT=24,yT=600,T0=600,ST=1,AT=24,TT=1,IT=.5,wT=2,_d=24,Cd=12,$p=40,ET=.3,_T=24,zp=500,CT=24,Wp=24,RT=1500,Wc=500,PT=400,NT=10,DT=-5,kT=1.5,MT=1.5,OT=1.2,FT=10,UT=150,LT=200,HT=100,BT=100,GT=.7,xT=300,bT=100,$T=120,Yp=400,Jr=10,I0=250,ws=12,Sl=Fi*1.2,w0=10,zT=20,E0=.15,_0=200,vt=30,so=vt*.6,Vd="#4CAF50",C0="#FF5722",R0="#9C27B0",WT="#2196F3",P0="#FFC107",YT="#FFD700",N0="#DC143C",Xd="#FFFFFF",Kd=[5,5],bl=5,eo=15,jT=20,VT=16,XT=10,KT=16,QT=16,jp=["","","","","","","","","",""],Rd=8,qT="#FFFFFF",Ri=18,Yt=15,ZT="rgba(0, 0, 0, 0.7)",JT=4,wi=150,Jt=15,qn=10,Wr="#555",eI="#f44336",tI="#4CAF50",nI="#2196F3",iI="#FFC107",Xa=16,rI=9,Qi=32,Ka=28,oI=10,sI=8,aI=8,lI=8,cn=28,Qa=40,uI="rgba(255, 215, 0, 0.7)",cI="rgba(0, 0, 0, 0.3)",Un=10,Vp=8,Yc=11,Ei=20,jc=40,Xp=5,dI=10,fI="#FFA500",hI="#808080",Yr=120,gI=30,pI=20,qa="#2d3748",jr="#ffffff",Vc="#4a5568",mI=5,D0="#bdc9f792",vI="#272c36ff",yI="#a0aec0",Kp=300,SI="rgba(255, 255, 255, 0.5)",AI="rgba(0, 0, 0, 0.8)",TI="#FFFFFF",Qp=14,qp=8,Zp=-15,II="#FFD700",wI=5,EI=60,_I=-50,CI=10,Xc=12,Jp=10,RI="rgba(0, 0, 0, 0.5)",PI="#4CAF50",NI="#F44336",DI="#FFC107",kI="rgba(255, 255, 255, 0.2)",em="#FFFFFF",MI="#FF6B6B",OI=5,k0=30,Qo=50,Za=8,tm=10,FI="rgba(0, 0, 0, 0.5)",UI="#FFFFFF",LI=33,HI=400,BI=20,GI=10,xI="rgba(0, 0, 0, 0.7)",bI="#FFFFFF",Kc=20,nm=16,$I=.5,im=5,M0="#FFD700",zI=40,Qd=4,O0=3,WI=5,F0=20,U0=5,YI="#FFFFFF",jI="#FF6B6B",Be=1,rr=3,VI=70,rm=600,XI=1.5,L0=.1,KI=15,QI=5e3,qi=80,Ja=10,qI=12,ZI=24,JI=tn*.9,ew=24,el=300,Zi=15,tw=8,nw="rgba(0, 0, 0, 0.8)",iw="#FFFFFF",Qc=14,om=10,Ln=20,rw="#FF6B6B",ow="#4CAF50",sm="#FFD700",sw="rgba(255, 255, 0, 0.3)",aw=2,lw=500,uw=120,cw=45,dw="#FFD700",fw=3,hw=4,H0=12,gw=120,am=50,pw=12,B0=30,mw=2,Ht=50,vw=150,us=2,qc=8,yw=.5,Sw=1,Aw=80,Tw=.7,G0=20,Iw=140,lm=40,ww=12,x0=40,Ew=3,Mi=60,Tn=40,xr=50,um=320,b0=25,_w=60,$0=2,Cw=90,Rw=.7,Pw=1.5,cs=3,Zc=15,qd=80,z0=10,$l=80,ao=40,W0=2,_l=30,ds=100,fs=20,hs=60,Zd=40,Jd=48,ef=50,tf=60,nf=2.5,rf=2,of=.1;function Ce(e,n,r,o,l){const a={id:e.nextVisualEffectId,type:n,position:r,startTime:e.time,duration:o,entityId:l};return e.visualEffects.push(a),e.nextVisualEffectId++,a.id}var se=(e=>(e[e.Hunger=0]="Hunger",e[e.Procreation=1]="Procreation",e[e.Pregnant=2]="Pregnant",e[e.TargetAcquired=3]="TargetAcquired",e[e.Attack=4]="Attack",e[e.Partnered=5]="Partnered",e[e.BushClaimed=6]="BushClaimed",e[e.BushClaimLost=7]="BushClaimLost",e[e.Eating=8]="Eating",e[e.ChildFed=9]="ChildFed",e[e.AttackDeflected=10]="AttackDeflected",e[e.AttackResisted=11]="AttackResisted",e[e.Hit=12]="Hit",e[e.SeizeBuildup=13]="SeizeBuildup",e[e.Seize=14]="Seize",e[e.CallToAttack=15]="CallToAttack",e[e.CallToFollow=16]="CallToFollow",e[e.AutopilotMoveTarget=17]="AutopilotMoveTarget",e))(se||{}),ti=(e=>(e.Berry="berry",e.Meat="meat",e))(ti||{});const Y0={berry:"",meat:""},Nw={id:ls,update:(e,n)=>{const{entity:r,updateContext:o}=n,l=o.deltaTime*(Vt/Xt);return r.age+=l,r.age>=r.lifespan?{nextState:Ss,data:{...e,enteredAt:o.gameState.time}}:(r.ownerId&&r.claimedUntil&&o.gameState.time>r.claimedUntil&&(Ce(o.gameState,se.BushClaimLost,r.position,Be),r.ownerId=void 0,r.claimedUntil=void 0),r.timeSinceLastBerryRegen+=l,r.timeSinceLastBerryRegen>=PA&&r.food.length<r.maxFood&&(r.food.push({type:ti.Berry}),r.timeSinceLastBerryRegen=0),r.food.length>=r.maxFood?{nextState:nr,data:{...e,enteredAt:o.gameState.time,previousState:ls}}:{nextState:ls,data:e})},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},Dw={id:nr,update:(e,n)=>{const{entity:r,updateContext:o}=n,l=o.deltaTime*(Vt/Xt);return r.age+=l,r.age>=r.lifespan?{nextState:Ss,data:{...e,enteredAt:o.gameState.time,previousState:nr}}:r.food.length<r.maxFood?{nextState:ls,data:{...e,enteredAt:o.gameState.time,previousState:nr}}:(r.ownerId&&r.claimedUntil&&o.gameState.time>r.claimedUntil&&(Ce(o.gameState,se.BushClaimLost,r.position,Be),r.ownerId=void 0,r.claimedUntil=void 0),r.timeSinceLastSpreadAttempt+=l,r.timeSinceLastSpreadAttempt>=Lp&&(r.timeSinceLastSpreadAttempt=0,o.gameState.time-r.timeSinceLastHarvest>=Lp&&Math.random()<o.gameState.ecosystem.berryBushSpreadChance)?{nextState:yl,data:{...e,enteredAt:o.gameState.time,previousState:nr}}:{nextState:nr,data:e})},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})};function bn(e,n){return{x:e.x+n.x,y:e.y+n.y}}function j0(e,n){return{x:e.x-n.x,y:e.y-n.y}}function Tt(e,n){return{x:e.x*n,y:e.y*n}}function to(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function et(e){const n=to(e);return n===0?{x:0,y:0}:Tt(e,1/n)}function kw(e,n){return to(j0(e,n))}function sf(e,n,r){return{x:e.x+(n.x-e.x)*r,y:e.y+(n.y-e.y)*r}}function af(e){if(e.length===0)return{x:0,y:0};const n=e.reduce((r,o)=>({x:r.x+o.x,y:r.y+o.y}),{x:0,y:0});return{x:n.x/e.length,y:n.y/e.length}}function ze(e,n,r,o){let l=n.x-e.x,a=n.y-e.y;return Math.abs(l)>r/2&&(l=l-Math.sign(l)*r),Math.abs(a)>o/2&&(a=a-Math.sign(a)*o),{x:l,y:a}}function jt(e,n,r){const o=ze(e,n,r.width,r.height);return et(o)}function X(e,n,r,o){const l=ze(e,n,r,o);return to(l)}function Mw(e,n){return e.x*n.x+e.y*n.y}function Ow(e,n){const r=Mw(e,n),o=to(e),l=to(n);if(o===0||l===0)return 0;const a=Math.max(-1,Math.min(1,r/(o*l)));return Math.acos(a)}function Fw(e,n,r){const o=Math.max(0,Math.min(1,r)),l={r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)},a={r:parseInt(n.substring(1,3),16),g:parseInt(n.substring(3,5),16),b:parseInt(n.substring(5,7),16)},c=Math.round(l.r+(a.r-l.r)*o),d=Math.round(l.g+(a.g-l.g)*o),h=Math.round(l.b+(a.b-l.b)*o),p=m=>("00"+m.toString(16)).slice(-2);return`#${p(c)}${p(d)}${p(h)}`}var Lt=(e=>(e.Friendly="Friendly",e.Hostile="Hostile",e))(Lt||{});function cm(e,n,r){return n.search.human.byRadius(e.position,r).filter(a=>{if(a.id===e.id||a.gender===e.gender||!a.isAdult||a.hunger>=lr||(a.procreationCooldown||0)>0||a.gender==="female"&&a.isPregnant)return!1;const c=a.id===e.motherId||a.id===e.fatherId,d=e.id===a.motherId||e.id===a.fatherId;return!c&&!d})}function ni(e){if(e.length===0)return;const n=e.filter(l=>l.gender==="male"),r=e.filter(l=>l.gender==="female"),o=(l,a)=>l.age!==a.age?a.age-l.age:l.id-a.id;if(n.sort(o),n.length>0)return n[0];if(r.sort(o),r.length>0)return r[0]}function It(e,n){const r=e,o=r.search.human.byProperty("motherId",n.id),l=r.search.human.byProperty("fatherId",n.id);return[...o,...l]}function V0(e,n,r){var l;if(e.id===n.id||e.motherId===n.id||e.fatherId===n.id||n.motherId===e.id||n.fatherId===e.id||e.motherId&&e.motherId===n.motherId||e.fatherId&&e.fatherId===n.fatherId||(l=e.partnerIds)!=null&&l.includes(n.id))return!0;if(e.motherId){const a=r.entities.entities.get(e.motherId);if(a&&(a.motherId===n.id||a.fatherId===n.id))return!0}if(e.fatherId){const a=r.entities.entities.get(e.fatherId);if(a&&(a.motherId===n.id||a.fatherId===n.id))return!0}if(n.motherId){const a=r.entities.entities.get(n.motherId);if(a&&(a.motherId===e.id||a.fatherId===e.id))return!0}if(n.fatherId){const a=r.entities.entities.get(n.fatherId);if(a&&(a.motherId===e.id||a.fatherId===e.id))return!0}return!1}function Pd(e,n){var a,c,d,h;if(e.id===n.id||e.motherId===n.id||e.fatherId===n.id||n.motherId===e.id||n.fatherId===e.id||(a=e.partnerIds)!=null&&a.includes(n.id)||(c=n.partnerIds)!=null&&c.includes(e.id))return!0;if(e.fatherId===void 0&&e.motherId===void 0||n.fatherId===void 0&&n.motherId===void 0)return!1;const r=e.motherId===n.motherId||e.fatherId===n.fatherId,o=n.motherId===e.motherId||n.fatherId===e.fatherId,l=((d=e.ancestorIds)==null?void 0:d.some(p=>n.ancestorIds.includes(p)))||((h=n.ancestorIds)==null?void 0:h.some(p=>e.ancestorIds.includes(p)));return r||o||l}function Uw(e,n){const r=[];if(e.motherId){const o=n.entities.entities.get(e.motherId);o&&r.push(o)}if(e.fatherId){const o=n.entities.entities.get(e.fatherId);o&&r.push(o)}return r}function Lw(e,n){if(e.gender!=="female"||!e.partnerIds||e.partnerIds.length===0)return null;for(const r of e.partnerIds){const o=n.entities.entities.get(r);if(o&&o.gender==="male")return o}return null}function Hw(e,n){var r;if(!e.isAdult&&e.fatherId){const o=n.entities.entities.get(e.fatherId);if(o&&o.type==="human")return o}if(e.isAdult&&e.fatherId){const o=n.entities.entities.get(e.fatherId);if(o&&o.type==="human"&&((r=ni(It(n,o)))==null?void 0:r.id)===e.id)return o}return e.isAdult&&e.gender==="female"&&e.partnerIds&&e.partnerIds.length>0?Lw(e,n):null}function Cl(e,n){var o;const r=new Set;if(e.motherId){const l=n.entities.entities.get(e.motherId);l&&r.add(l)}if(e.fatherId){const l=n.entities.entities.get(e.fatherId);l&&r.add(l)}return(o=e.partnerIds)==null||o.forEach(l=>{const a=n.entities.entities.get(l);a&&r.add(a)}),It(n,e).forEach(l=>r.add(l)),Array.from(r)}function X0(e,n){const r=new Map;function o(l){const a=It(n,l);for(const c of a)r.has(c.id)||(r.set(c.id,c),o(c))}return o(e),Array.from(r.values())}function Es(e,n){return n.search.human.byProperty("leaderId",e)}function K0(e,n){var c,d;const r=new Map,o=Array.from(e.entities.entities.values()).filter(h=>h.type==="human");for(const h of o)h.leaderId&&(r.has(h.leaderId)||r.set(h.leaderId,{leaderId:h.leaderId,tribeBadge:h.tribeBadge||"?",members:[]}),(c=r.get(h.leaderId))==null||c.members.push(h));const l=n?(d=e.entities.entities.get(n))==null?void 0:d.diplomacy:void 0,a=Array.from(r.values()).map(h=>{const p=e.entities.entities.get(h.leaderId),m=h.members.filter(S=>S.isAdult).length,y=h.members.length-m;return{leaderId:h.leaderId,tribeBadge:h.tribeBadge,adultCount:m,childCount:y,isPlayerTribe:h.leaderId===n,leaderAge:(p==null?void 0:p.age)??0,leaderGender:(p==null?void 0:p.gender)??"male",diplomacyStatus:(l==null?void 0:l.get(h.leaderId??-1))??Lt.Friendly}});return a.sort((h,p)=>h.isPlayerTribe?-1:p.isPlayerTribe?1:p.adultCount+p.childCount-(h.adultCount+h.childCount)),a}function Ne(e,n,r,o,l){const a=n,c=o,d="position"in e&&e.id?e:null,h=d?d.position:e,p=a.search[r].byRadius(h,c);let m=null,y=c;for(const S of p){if(S.id===(d==null?void 0:d.id)||l&&!l(S))continue;const E=X(h,S.position,n.mapDimensions.width,n.mapDimensions.height);E<y&&(y=E,m=S)}return m}function Q0(e,n,r,o){return n.search[r].byRadius(e,o)}function q0(e,n,r,o){return Q0(e,n,r,o).length}function wt(e){const r=e.search.human.byProperty("isPlayer",!0);return r.length>0?r[0]:void 0}function Bw(e,n){var c;const o=n.search.human.byProperty("activeAction","attacking");let l=null,a=1/0;for(const d of o){if(d.attackTargetId!==e)continue;const h=X(d.position,((c=n.entities.entities.get(e))==null?void 0:c.position)||{x:0,y:0},n.mapDimensions.width,n.mapDimensions.height);h<a&&(l=d,a=h)}return l}function Gw(e){return Array.from(e.entities.entities.values()).filter(n=>n.type==="human")}function xw(e,n,r){const o=Array.from(n.entities.entities.values()).reverse();for(const l of o)if(kw(e,l.position)<l.radius)return l}function lf(e,n,r,o){const l=Math.random()*Math.PI*2,a=Math.sqrt(Math.random())*n,c={x:Math.cos(l)*a,y:Math.sin(l)*a},d=bn(e,c);return{x:(d.x%r+r)%r,y:(d.y%o+o)%o}}function no(e,n,r,o){const l=n,a={left:e.x-r,top:e.y-r,right:e.x+r,bottom:e.y+r},c=[...l.search.human.byRect(a),...l.search.berryBush.byRect(a),...l.search.corpse.byRect(a)];for(const d of c){if(o!==void 0&&d.id===o)continue;if(X(e,d.position,n.mapDimensions.width,n.mapDimensions.height)<r+d.radius)return!0}return!1}function uf(e,n,r,o,l){const a=n.mapDimensions.width,c=n.mapDimensions.height;if(!no(e,n,o,l))return e;const d=o;for(let h=d;h<=r;h+=d){const p=Math.ceil(2*Math.PI*h/d);for(let m=0;m<p;m++){const y=m/p*2*Math.PI,S={x:Math.cos(y)*h,y:Math.sin(y)*h},E=bn(e,S),P={x:(E.x%a+a)%a,y:(E.y%c+c)%c};if(!no(P,n,o,l))return P}}return null}function ur(e,n){const r=Es(e,n);if(r.length===0){const l=n.entities.entities.get(e);return l?l.position:{x:0,y:0}}const o=r.map(l=>l.position);return af(o)}function dm(e,n){const o=[...Cl(e,n),e].map(l=>l.position);return af(o)}function bw(e,n,r){return n.search.human.byRadius(e.position,r).filter(l=>{var a;return l.activeAction==="procreating"&&l.gender===e.gender&&typeof l.target=="number"&&((a=e.partnerIds)==null?void 0:a.includes(l.target))})[0]}function $w(e,n,r){if(!e.leaderId)return;const o=n,l=o.search.berryBush.byRadius(e.position,r).filter(a=>a.ownerId===e.id);for(const a of l)if(a.claimedUntil&&n.time<a.claimedUntil){const c=o.search.human.byRadius(a.position,mt);for(const d of c)if(!Pd(d,e)&&d.activeAction==="gathering"&&d.target===a.id)return d}}function zw(e,n,r){const o=Cl(e,n),l=n;for(const a of o){if(X(e.position,a.position,n.mapDimensions.width,n.mapDimensions.height)>r)continue;const d=l.search.human.byProperty("attackTargetId",a.id);for(const h of d)if(h.leaderId!==e.leaderId)return{familyMember:a,aggressor:h}}}function Ww(e,n){const o=n.search.human.byRadius(e.position,xT);let l,a=1/0;for(const c of o){if(c.id===e.id||c.hitpoints<=0||c.hitpoints/c.maxHitpoints>GT||V0(e,c,n))continue;const d=X(e.position,c.position,n.mapDimensions.width,n.mapDimensions.height);d<a&&(a=d,l=c)}return l}function Yw(e,n){const r=Ne(e,n,"berryBush",Gp,l=>l.ownerId===e.id);return r?uf(r.position,n,Gp,xl,r.id):null}function cf(e,n,r){return n.search.human.byRadius(e.position,r).filter(l=>lo(e,l,n))}function jw(e,n,r){const o=r.search.human.byProperty("leaderId",e);let l=0;for(const a of o)a.attackTargetId===n&&l++;return l}function fm(e,n,r,o){const l=r.search.berryBush.byRadius(e,n),a=r.search.human.byRadius(e,n).filter(h=>h.leaderId!==o);let c=l.length*NT;c+=a.length*DT;let d;if(a.length>0){const h={};for(const m of a)m.leaderId&&(h[m.leaderId]=(h[m.leaderId]||0)+1);let p=0;for(const m in h)h[m]>p&&(p=h[m],d=parseInt(m,10))}return{score:c,occupyingTribeId:d}}function Rl(e){return e.filter(n=>n.isAdult).reduce((n,r)=>{let o=r.hitpoints;return o+=(r.maxAge-r.age)*.5,o+=r.food.length*2,n+o},0)}function Vw(e,n){if(e.id!==e.leaderId)return null;const r=n,o=ur(e.id,n),{score:l}=fm(o,Wc/2,r,e.id);let a=null,c=l;const d=PT,h=RT;for(let p=e.position.x-h;p<e.position.x+h;p+=d)for(let m=e.position.y-h;m<e.position.y+h;m+=d){const y={x:(p%n.mapDimensions.width+n.mapDimensions.width)%n.mapDimensions.width,y:(m%n.mapDimensions.height+n.mapDimensions.height)%n.mapDimensions.height};if(X(o,y,n.mapDimensions.width,n.mapDimensions.height)<Wc*2)continue;const{score:E}=fm(y,Wc/2,r,e.id);E>c*kT&&(c=E,a=y)}return a}let Jc=0;function Nd(){const e=jp[Jc];return Jc=(Jc+1)%jp.length,e}var we=(e=>(e.Gather="Gather",e.Eat="Eat",e.Procreate="Procreate",e.Attack="Attack",e.Plant="Plant",e.CallToAttack="CallToAttack",e.TribeSplit="TribeSplit",e.FollowMe="FollowMe",e.FeedChild="FeedChild",e.HuntPrey="HuntPrey",e.DefendAgainstPredator="DefendAgainstPredator",e.AutopilotMove="AutopilotMove",e.AutopilotGather="AutopilotGather",e.AutopilotAttack="AutopilotAttack",e.AutopilotProcreate="AutopilotProcreate",e.AutopilotPlant="AutopilotPlant",e.AutopilotFeedChild="AutopilotFeedChild",e.AutopilotFollowMe="AutopilotFollowMe",e))(we||{});const zl={Gather:"",Eat:"",Procreate:"",Attack:"",Plant:"",CallToAttack:"",TribeSplit:"",FollowMe:"",FeedChild:"",HuntPrey:"",DefendAgainstPredator:"",AutopilotMove:"",AutopilotGather:"",AutopilotAttack:"",AutopilotProcreate:"",AutopilotPlant:"",AutopilotFeedChild:"",AutopilotFollowMe:""},Z0={Gather:"Gather",Eat:"Eat",Procreate:"Procreate",Attack:"Attack",Plant:"Plant",CallToAttack:"Call to Attack",TribeSplit:"Split Tribe",FollowMe:"Follow Me",FeedChild:"Feed Child",HuntPrey:"Hunt Prey",DefendAgainstPredator:"Defend",AutopilotMove:"Walk",AutopilotGather:"Gather",AutopilotAttack:"Attack",AutopilotProcreate:"Procreate",AutopilotPlant:"Plant",AutopilotFeedChild:"Feed",AutopilotFollowMe:"Follow"};var br=(e=>(e.Time="Time",e.Hunger="Hunger",e.Hitpoints="Hitpoints",e.Food="Food",e.Autopilot="Autopilot",e.Muted="Muted",e.Family="Family",e.Tribes="Tribes",e))(br||{});const qo={Time:"",Hunger:"",Hitpoints:"",Food:"",Autopilot:"",Muted:"",Family:"",Tribes:""};var Ue=(e=>(e.ToggleMute="ToggleMute",e.TogglePause="TogglePause",e.FastForward="FastForward",e.DismissTutorial="DismissTutorial",e.CommandEat="CommandEat",e.CommandPlant="CommandPlant",e.CommandCallToAttack="CommandCallToAttack",e.CommandFollowMe="CommandFollowMe",e.CommandGather="CommandGather",e.CommandTribeSplit="CommandTribeSplit",e.ToggleProcreationBehavior="ToggleProcreationBehavior",e.ToggleAttackBehavior="ToggleAttackBehavior",e.ToggleFeedChildBehavior="ToggleFeedChildBehavior",e.TogglePlantingBehavior="TogglePlantingBehavior",e.ToggleGatheringBehavior="ToggleGatheringBehavior",e.ToggleAutopilotFollowLeaderBehavior="ToggleAutopilotFollowLeaderBehavior",e.ToggleDiplomacy="ToggleDiplomacy",e))(Ue||{}),_s=(e=>(e.Hello="HELLO",e.NewTribeFormed="NEW_TRIBE_FORMED",e.NoHeir="NO_HEIR",e.ChildrenStarving="CHILDREN_STARVING",e))(_s||{});let Xw=0;function Kw(){return`notification-${Date.now()}-${Xw++}`}function Dd(e,n){if(n.identifier){const o=e.notifications.find(l=>l.identifier===n.identifier);if(o){if(o.dismissedUntil&&e.time<o.dismissedUntil)return;o.message=n.message,o.timestamp=e.time,o.creationTime=Date.now(),o.duration=n.duration,o.targetEntityIds=n.targetEntityIds,o.highlightedEntityIds=n.highlightedEntityIds,o.targetPosition=n.targetPosition,o.targetArea=n.targetArea,o.targetRadius=n.targetRadius,o.isDismissed=!1,o.dismissedUntil=void 0;return}}const r={...n,id:Kw(),timestamp:e.time,creationTime:Date.now(),isDismissed:!1};e.notifications.push(r)}function Qw(e,n){const r=e.notifications.find(o=>o.id===n);r&&(r.isDismissed=!0,r.identifier&&(r.dismissedUntil=e.time+ew))}function qw(e){const n=e.time;e.notifications=e.notifications.filter(r=>r.duration===0?!0:!(n-r.timestamp>r.duration))}const ed=""+new URL("attack-D4MA8VWK.mp3",import.meta.url).href,Zw=""+new URL("gather-CU75596W.mp3",import.meta.url).href,Jw=""+new URL("eat-DCjHq2QD.mp3",import.meta.url).href,td=""+new URL("procreate-CfE4r5Cp.mp3",import.meta.url).href,eE=""+new URL("birth-Cbd67GHT.mp3",import.meta.url).href,tE=""+new URL("child-fed-DzEPuMid.mp3",import.meta.url).href,nE=""+new URL("human-death-B6HFLXES.mp3",import.meta.url).href,iE=""+new URL("game-over-C5dqkyER.mp3",import.meta.url).href,rE=""+new URL("button-click-DomLUeaU.mp3",import.meta.url).href,oE=""+new URL("soundtrack-1-BdlYUGye.mp3",import.meta.url).href;var Ae=(e=>(e[e.Attack=0]="Attack",e[e.Gather=1]="Gather",e[e.Eat=2]="Eat",e[e.Procreate=3]="Procreate",e[e.Birth=4]="Birth",e[e.ChildFed=5]="ChildFed",e[e.HumanDeath=6]="HumanDeath",e[e.Seize=7]="Seize",e[e.CallToAttack=8]="CallToAttack",e[e.TribeSplit=9]="TribeSplit",e[e.CallToFollow=10]="CallToFollow",e[e.GameOver=11]="GameOver",e[e.ButtonClick=12]="ButtonClick",e[e.SoundTrack1=13]="SoundTrack1",e))(Ae||{});const sE=new Map([[0,ed],[1,Zw],[2,Jw],[3,td],[4,eE],[5,tE],[6,nE],[11,iE],[12,rE],[7,ed],[8,ed],[9,td],[10,td],[13,oE]]);let Zo,Cs;function aE(){if(!(typeof window>"u"))return Cs}function df(){if(!(typeof window>"u"))return!Zo&&typeof window.AudioContext=="function"&&(Zo=new window.AudioContext,Cs=Zo.createGain(),Cs.connect(Zo.destination),gs(.1,!1)),Zo}function gs(e,n){Cs&&(Cs.gain.value=n?0:e/10)}const J0=new Map;let tl=!1,hm=!1;async function lE(){if(hm||tl)return;const e=df();if(!e){console.error("AudioContext not supported. Cannot load sounds.");return}e.state==="suspended"&&e.resume(),tl=!0,console.log("Starting sound loading...");const n=[];sE.forEach((r,o)=>{const l=fetch(r).then(a=>{if(!a.ok)throw new Error(`Failed to fetch sound: ${r}`);return a.arrayBuffer()}).then(a=>e.decodeAudioData(a)).then(a=>{J0.set(o,a)}).catch(a=>{console.error(`Error loading sound ${Ae[o]} from ${r}:`,a)});n.push(l)});try{await Promise.all(n),hm=!0,tl=!1,console.log("All sounds loaded successfully.")}catch(r){tl=!1,console.error("An error occurred while loading sounds:",r)}}const ps=new Map;function ff(e,n){const r=df(),o=aE();if(!r||!o||o.gain.value===0&&(n==null?void 0:n.trackId)===void 0)return;r.state==="suspended"&&r.resume();const l=J0.get(e);if(!l){console.warn(`Sound buffer not found for type: ${Ae[e]}`);return}if(n!=null&&n.trackId&&ps.has(n.trackId))return;const a=r.createBufferSource();a.buffer=l,a.loop=(n==null?void 0:n.loop)??!1;const c=r.createGain(),d=r.createStereoPanner();let h=c;if(n!=null&&n.position&&(n!=null&&n.listenerPosition)&&(n!=null&&n.worldDimensions)){const p=ze(n.listenerPosition,n.position,n.worldDimensions.width,n.worldDimensions.height),m=X(n.listenerPosition,n.position,n.worldDimensions.width,n.worldDimensions.height);if(m>rm)return;const y=1-Math.pow(m/rm,XI);c.gain.value=Math.max(0,y);const S=Math.sin(p.x/m*(Math.PI/2));d.pan.value=isNaN(S)?0:S,c.connect(d),h=d}else{const p=e===Ae.GameOver?.4:e===Ae.SoundTrack1?1:.2;c.gain.value=p}a.connect(h),h.connect(o),a.start(0),n!=null&&n.trackId&&(ps.set(n.trackId,{sourceNode:a,gainNode:c}),a.onended=()=>{ps.delete(n.trackId)})}function gm(e,n=1){const r=ps.get(e),o=df();if(r&&o){const{sourceNode:l,gainNode:a}=r,c=o.currentTime;a.gain.setValueAtTime(a.gain.value,c),a.gain.linearRampToValueAtTime(0,c+n),l.stop(c+n),l.onended=null,ps.delete(e)}}function Me(e,n,r){const o=wt(e.gameState);o&&ff(n,{position:r,listenerPosition:o.position,worldDimensions:e.gameState.mapDimensions,masterVolume:e.gameState.masterVolume,isMuted:e.gameState.isMuted})}function uE(e,n,r){const o=r.mapDimensions.width,l=r.mapDimensions.height,a=n.radius*2;for(let c=zp;c<o/2;c+=50)for(let d=0;d<10;d++){const h=lf(e,c,o,l);if(!(X(e,h,o,l)<zp)&&!no(h,r,a,n.id))return h}return null}function hf(e,n){if(!e.isAdult||e.gender!=="male"||e.leaderId===e.id||!e.leaderId)return{canSplit:!1};if(!e.leaderId)return{canSplit:!1};const r=n.entities.entities.get(e.leaderId);if(!r||r.type!=="human")return{canSplit:!1};const o=ni(It(n,r));if(o&&o.id===e.id)return{canSplit:!1};const l=Es(e.leaderId,n);if(l.length<$p)return{canSplit:!1};const c=X0(e,n).length+1,d=Math.min(l.length*ET,$p);return{canSplit:c>=d,progress:c/d}}function gf(e,n){var c;if(!hf(e,n).canSplit)return;const r=e.leaderId?n.entities.entities.get(e.leaderId):void 0,o=Nd(),l=X0(e,n);e.leaderId=e.id,e.tribeBadge=o,e.diplomacy=new Map,r&&((c=r.diplomacy)==null||c.set(e.id,Lt.Hostile));for(const d of l)d.leaderId=e.id,d.tribeBadge=o;Dd(n,{type:_s.NewTribeFormed,message:`A new tribe has formed! ${o}`,duration:ZI,targetEntityIds:[e.id],highlightedEntityIds:[e.id,...l.map(d=>d.id)]}),Me({gameState:n},Ae.TribeSplit,e.position)}function pf(e,n){const r=[];if(n.food.length>0&&n.hunger>Oi&&r.push({type:we.Eat,action:"eating",key:"f"}),n.food.length<n.maxFood){const a=Ne(n,e,"berryBush",mt,h=>h.food.length>0),c=Ne(n,e,"corpse",mt,h=>h.food.length>0);let d=null;a&&c?d=X(n.position,a.position,e.mapDimensions.width,e.mapDimensions.height)<=X(n.position,c.position,e.mapDimensions.width,e.mapDimensions.height)?a:c:d=a||c,d&&r.push({type:we.Gather,action:"gathering",key:"e",targetEntity:d})}const o=Ne(n,e,"human",mt,a=>cr(n,a,e));if(o&&r.push({type:we.Procreate,action:"procreating",key:"r",targetEntity:o}),n.food.length>0&&n.isAdult){const a=Ne(n,e,"human",mt,c=>{const d=c;return!d.isAdult&&(d.motherId===n.id||d.fatherId===n.id)&&d.hunger>=Oi});a&&r.push({type:we.FeedChild,action:"feeding",key:"h",targetEntity:a})}const l=Ne(n,e,"human",xn,a=>lo(n,a,e))??Ne(n,e,"predator",xn)??Ne(n,e,"prey",xn);return l&&r.push({type:we.Attack,action:"attacking",key:"q",targetEntity:l}),n.food.filter(a=>a.type===ti.Berry).length>=Ts&&r.push({type:we.Plant,action:"planting",key:"b"}),n.leaderId===n.id&&!n.isCallingToAttack&&cf(n,e,I0).length>0&&r.push({type:we.CallToAttack,action:"idle",key:"v"}),hf(n,e).canSplit&&r.push({type:we.TribeSplit,action:"idle",key:"k"}),n.leaderId===n.id&&!n.isCallingToFollow&&r.push({type:we.FollowMe,action:"idle",key:"c"}),r}const lo=(e,n,r)=>{var o,l,a,c;if(e.id===n.id)return!1;if(e.leaderId&&!n.leaderId)return!0;if(e.leaderId===n.leaderId)return!1;if(e.leaderId&&n.leaderId){const d=(l=(o=r.entities.entities.get(e.leaderId))==null?void 0:o.diplomacy)==null?void 0:l.get(n.leaderId),h=(c=(a=r.entities.entities.get(n.leaderId))==null?void 0:a.diplomacy)==null?void 0:c.get(e.leaderId);return d===Lt.Hostile||h===Lt.Hostile}return!1},cr=(e,n,r)=>{if(e.id===n.id||e.gender===n.gender||!e.isAdult||!n.isAdult||e.hunger>=lr||n.hunger>=lr||(e.procreationCooldown||0)>0||(n.procreationCooldown||0)>0||lo(e,n,r))return!1;const o=e.gender==="female"?e:n;return!(o.isPregnant||o.age>m0)},cE={id:yl,update:(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:l}=o,a=o.deltaTime*(Vt/Xt);if(r.age+=a,r.age>=r.lifespan)return{nextState:Ss,data:{...e,enteredAt:l.time,previousState:yl}};const c=lf(r.position,r.spreadRadius,l.mapDimensions.width,l.mapDimensions.height);return no(c,l,15)||Us(l.entities,c,l.time),{nextState:nr,data:{...e,enteredAt:l.time,previousState:yl}}},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},dE={id:Ss,update:e=>({nextState:Ss,data:e}),onEnter:(e,n)=>(Ls(e.updateContext.gameState.entities,e.entity.id),{...n,enteredAt:e.updateContext.gameState.time})},fE=[Nw,Dw,cE,dE],At="humanIdle",tr="humanMoving",rs="humanEating",Wl="humanGathering",Rs="humanProcreating",Ui="humanAttacking",Al="humanPlanting",hE={id:At,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="attacking"&&r.attackTargetId?{nextState:Ui,data:{...e,enteredAt:o.gameState.time,previousState:At,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:(r.hunger>=h0?(r.debuffs=r.debuffs.filter(l=>l.type!=="slow"),r.debuffs.push({type:"slow",startTime:o.gameState.time,duration:.1})):r.debuffs=r.debuffs.filter(l=>l.type!=="slow"),r.activeAction==="moving"?{nextState:tr,data:{...e,enteredAt:o.gameState.time,previousState:At,target:r.target}}:r.activeAction==="gathering"?{nextState:Wl,data:{...e,enteredAt:o.gameState.time,previousState:At,target:r.target}}:r.activeAction==="eating"?{nextState:rs,data:{...e,enteredAt:o.gameState.time,previousState:At}}:r.activeAction==="planting"&&r.target?{nextState:Al,data:{...e,enteredAt:o.gameState.time,previousState:At,plantingSpot:r.target}}:{nextState:At,data:e})},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function ev(e){let n=MA;return e.hunger>=h0&&(n*=OA),e.age>=UA&&(n*=LA),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}const nd=7.5;class gE{constructor(){Ie(this,"id",tr)}update(n,r){var h;const{entity:o,updateContext:l}=r;if(o.activeAction==="attacking"&&o.attackTargetId)return{nextState:Ui,data:{...n,enteredAt:l.gameState.time,previousState:tr,attackTargetId:o.attackTargetId,attackStartTime:l.gameState.time}};if(o.activeAction!=="moving")return{nextState:At,data:{...n,enteredAt:l.gameState.time,previousState:tr}};let a;if(typeof o.target=="object"?a=o.target:typeof o.target=="number"&&(a=(h=r.updateContext.gameState.entities.entities.get(o.target))==null?void 0:h.position),!a&&(o.direction.x!==0||o.direction.y!==0)&&(a={x:o.position.x+o.direction.x*nd*2,y:o.position.y+o.direction.y*nd*2}),!a)return{nextState:At,data:{...n,enteredAt:l.gameState.time,previousState:tr}};const c=ze(o.position,a,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=et(c),o.acceleration=ev(o),X(o.position,a,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height)<nd?{nextState:At,data:{...n,enteredAt:l.gameState.time,previousState:tr}}:{nextState:tr,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}}const pE=new gE,mE={id:rs,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction!=="eating"?{nextState:At,data:{...e,enteredAt:o.gameState.time,previousState:rs}}:(r.food.length>0&&(!r.eatingCooldownTime||o.gameState.time>=r.eatingCooldownTime)&&r.hunger>Oi&&(r.hunger=Math.max(0,r.hunger-Oi),r.food.pop(),r.eatingCooldownTime=o.gameState.time+1,Me(o,Ae.Eat,r.position),(!r.lastEatingEffectTime||o.gameState.time-r.lastEatingEffectTime>2)&&(Ce(o.gameState,se.Eating,r.position,Be,r.id),r.lastEatingEffectTime=o.gameState.time)),r.hunger<=0||r.food.length<=0?{nextState:At,data:{...e,enteredAt:o.gameState.time,previousState:rs}}:{nextState:rs,data:e})},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};class vE{constructor(){Ie(this,"id",Wl)}update(n,r){return r.entity.activeAction!=="gathering"?{nextState:"humanIdle",data:{...n,enteredAt:r.updateContext.gameState.time,previousState:this.id}}:{nextState:this.id,data:n}}}const yE=new vE,SE=(e,n)=>(n.procreationEndTime=e.updateContext.gameState.time+(n.duration||2),n),AE=(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:l}=o;if(l.time<(e.procreationEndTime||0))return{nextState:Rs,data:e};const a=l.entities.entities.get(e.partnerId);if(a&&a.type==="human"&&!a.isPregnant&&r.hunger<lr&&a.hunger<lr&&!r.procreationCooldown&&!a.procreationCooldown){const c=r.gender==="female"?r:a.gender==="female"?a:void 0,d=r.gender==="male"?r:a.gender==="male"?a:void 0;c&&d&&(c.isPregnant=!0,c.gestationTime=GA,c.pregnancyFatherId=d.id,r.procreationCooldown=Hp,a.procreationCooldown=Hp,Me(o,Ae.Procreate,c.position))}return r.activeAction="idle",a&&(a.activeAction="idle"),{nextState:At,data:{...e,enteredAt:l.time,previousState:Rs}}},TE={id:Rs,onEnter:SE,update:AE},IE={id:Ui,onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time,attackStartTime:e.updateContext.gameState.time}),update:(e,n)=>{if(n.entity.activeAction!=="attacking"||!n.entity.attackTargetId)return n.entity.activeAction="idle",{nextState:At,data:{...e}};const r=n.updateContext.gameState.entities.entities.get(n.entity.attackTargetId);if(!r)return n.entity.activeAction="idle",{nextState:At,data:{...e}};const o=X(n.entity.position,r.position,n.updateContext.gameState.mapDimensions.width,n.updateContext.gameState.mapDimensions.height),l=ze(n.entity.position,r.position,n.updateContext.gameState.mapDimensions.width,n.updateContext.gameState.mapDimensions.height);return n.entity.direction=et(l),o>xn?n.entity.acceleration=ev(n.entity):n.entity.acceleration=0,{nextState:Ui,data:e}}},wE={id:Al,update:(e,n)=>{const{entity:r,updateContext:o}=n,{gameState:l}=o;if(l.time-e.enteredAt>=nT){if(r.food.filter(d=>d.type===ti.Berry).length>=Ts){for(let h=0;h<Ts;h++){const p=r.food.findIndex(m=>m.type===ti.Berry);p>-1&&r.food.splice(p,1)}const d=Us(l.entities,e.plantingSpot,l.time);d.ownerId=r.id,d.claimedUntil=l.time+f0}return{nextState:At,data:{...e,enteredAt:l.time,previousState:Al}}}return{nextState:Al,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},EE=[hE,pE,mE,yE,TE,IE,wE],In="preyIdle",Di="preyMoving",os="preyGrazing",ss="preyProcreating",_E={id:In,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:Di,data:{...e,enteredAt:o.gameState.time,previousState:In,target:r.target}}:r.activeAction==="grazing"?{nextState:os,data:{...e,enteredAt:o.gameState.time,previousState:In}}:r.activeAction==="procreating"?{nextState:ss,data:{...e,enteredAt:o.gameState.time,previousState:In}}:{nextState:In,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function CE(e){let n=pw;return e.isAdult||(n*=.7),e.hunger>=Aw&&(n*=Tw),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}function RE(e,n){const r=e>>16&255,o=e>>8&255,l=e&255,a=n>>16&255,c=n>>8&255,d=n&255;let h=Math.floor((r+a)/2),p=Math.floor((o+c)/2),m=Math.floor((l+d)/2);return Math.random()<.05&&(h=Math.max(0,Math.min(255,h+(Math.random()-.5)*60))),Math.random()<.05&&(p=Math.max(0,Math.min(255,p+(Math.random()-.5)*60))),Math.random()<.05&&(m=Math.max(0,Math.min(255,m+(Math.random()-.5)*60))),h<<16|p<<8|m}function Ps(){const e=Math.floor(Math.random()*100)+100,n=Math.floor(Math.random()*80)+60,r=Math.floor(Math.random()*60)+20;return e<<16|n<<8|r}const id=10;class PE{constructor(){Ie(this,"id",Di)}update(n,r){var h;const{entity:o,updateContext:l}=r;if(o.activeAction!=="moving")return{nextState:In,data:{...n,enteredAt:l.gameState.time,previousState:Di}};let a;if(typeof o.target=="object"?a=o.target:typeof o.target=="number"&&(a=(h=r.updateContext.gameState.entities.entities.get(o.target))==null?void 0:h.position),!a&&(o.direction.x!==0||o.direction.y!==0)&&(a={x:o.position.x+o.direction.x*id*2,y:o.position.y+o.direction.y*id*2}),!a)return{nextState:In,data:{...n,enteredAt:l.gameState.time,previousState:Di}};const c=ze(o.position,a,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=et(c),o.acceleration=CE(o),X(o.position,a,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height)<id?{nextState:In,data:{...n,enteredAt:l.gameState.time,previousState:Di}}:{nextState:Di,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}onEnter(n,r){return{...r,enteredAt:n.updateContext.gameState.time}}}const NE=new PE,DE={id:os,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:Di,data:{...e,enteredAt:o.gameState.time,previousState:os,target:r.target}}:r.activeAction!=="grazing"?{nextState:In,data:{...e,enteredAt:o.gameState.time,previousState:os}}:{nextState:os,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},kE={id:ss,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="moving"?{nextState:Di,data:{...e,enteredAt:o.gameState.time,previousState:ss,target:r.target}}:r.activeAction!=="procreating"?{nextState:In,data:{...e,enteredAt:o.gameState.time,previousState:ss}}:{nextState:ss,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},ME=[_E,NE,DE,kE],Ut="predatorIdle",Pi="predatorMoving",ei="predatorAttacking",$r="predatorProcreating",sr="predatorEating",OE={id:Ut,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="eating"?{nextState:sr,data:{...e,enteredAt:o.gameState.time,previousState:Ut,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}}:r.activeAction==="attacking"&&r.attackTargetId?{nextState:ei,data:{...e,enteredAt:o.gameState.time,previousState:Ut,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:r.activeAction==="moving"?{nextState:Pi,data:{...e,enteredAt:o.gameState.time,previousState:Ut,target:r.target}}:r.activeAction==="procreating"?{nextState:$r,data:{...e,enteredAt:o.gameState.time,previousState:Ut}}:{nextState:Ut,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})};function tv(e){let n=ww;return e.hunger>=Cw&&(n*=Rw),e.isAdult||(n*=.7),e.movementSlowdown&&(n*=e.movementSlowdown.modifier),n}function FE(e,n){const r=e>>16&255,o=e>>8&255,l=e&255,a=n>>16&255,c=n>>8&255,d=n&255;let h=Math.floor((r+a)/2),p=Math.floor((o+c)/2),m=Math.floor((l+d)/2);return Math.random()<.05&&(h=Math.max(0,Math.min(255,h+(Math.random()-.5)*60))),Math.random()<.05&&(p=Math.max(0,Math.min(255,p+(Math.random()-.5)*60))),Math.random()<.05&&(m=Math.max(0,Math.min(255,m+(Math.random()-.5)*60))),h<<16|p<<8|m}function Ns(){const e=Math.floor(Math.random()*60)+60,n=Math.floor(Math.random()*50)+40,r=Math.floor(Math.random()*40)+20;return e<<16|n<<8|r}const rd=12;class UE{constructor(){Ie(this,"id",Pi)}update(n,r){var h;const{entity:o,updateContext:l}=r;if(o.activeAction==="eating")return{nextState:sr,data:{...n,enteredAt:l.gameState.time,previousState:Pi,preyId:o.attackTargetId,eatingStartTime:l.gameState.time}};if(o.activeAction==="attacking"&&o.attackTargetId)return{nextState:ei,data:{...n,enteredAt:l.gameState.time,previousState:Pi,attackTargetId:o.attackTargetId,attackStartTime:l.gameState.time}};if(o.activeAction!=="moving")return{nextState:Ut,data:{...n,enteredAt:l.gameState.time,previousState:Pi}};let a;if(typeof o.target=="object"?a=o.target:typeof o.target=="number"&&(a=(h=r.updateContext.gameState.entities.entities.get(o.target))==null?void 0:h.position),!a&&(o.direction.x!==0||o.direction.y!==0)&&(a={x:o.position.x+o.direction.x*rd*2,y:o.position.y+o.direction.y*rd*2}),!a)return{nextState:Ut,data:{...n,enteredAt:l.gameState.time,previousState:Pi}};const c=ze(o.position,a,r.updateContext.gameState.mapDimensions.width,r.updateContext.gameState.mapDimensions.height);return o.direction=et(c),o.acceleration=tv(o),X(o.position,a,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height)<rd?{nextState:Ut,data:{...n,enteredAt:l.gameState.time,previousState:Pi}}:{nextState:Pi,data:n}}onExit(n){const{entity:r}=n;r.acceleration=0}onEnter(n,r){return{...r,enteredAt:n.updateContext.gameState.time}}}const LE=new UE,HE={id:ei,update:(e,n)=>{const{entity:r,updateContext:o}=n;if(r.activeAction==="eating")return{nextState:sr,data:{...e,enteredAt:o.gameState.time,previousState:ei,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}};if(r.activeAction!=="attacking"||!r.attackTargetId)return r.activeAction="idle",{nextState:Ut,data:{...e,enteredAt:o.gameState.time,previousState:ei}};const l=o.gameState.entities.entities.get(r.attackTargetId);if(!l)return r.activeAction="idle",{nextState:Ut,data:{...e,enteredAt:o.gameState.time,previousState:ei}};if(l.type==="prey"&&l.hitpoints<=0||l.type==="predator"&&l.hitpoints<=0||l.type==="human"&&l.hitpoints<=0)return r.activeAction="idle",{nextState:Ut,data:{...e,enteredAt:o.gameState.time,previousState:ei}};const c=X(r.position,l.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height),d=ze(r.position,l.position,o.gameState.mapDimensions.width,o.gameState.mapDimensions.height);return r.direction=et(d),c>Tn?r.acceleration=tv(r):r.acceleration=0,{nextState:ei,data:e}},onEnter:(e,n)=>({...n,enteredAt:e.updateContext.gameState.time})},BE={id:$r,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction==="eating"?{nextState:sr,data:{...e,enteredAt:o.gameState.time,previousState:$r,preyId:r.attackTargetId,eatingStartTime:o.gameState.time}}:r.activeAction==="attacking"&&r.attackTargetId?{nextState:ei,data:{...e,enteredAt:o.gameState.time,previousState:$r,attackTargetId:r.attackTargetId,attackStartTime:o.gameState.time}}:r.activeAction!=="procreating"?{nextState:Ut,data:{...e,enteredAt:o.gameState.time,previousState:$r}}:{nextState:$r,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},GE={id:sr,update:(e,n)=>{const{entity:r,updateContext:o}=n;return r.activeAction!=="eating"?{nextState:Ut,data:{...e,enteredAt:o.gameState.time,previousState:sr}}:{nextState:sr,data:e}},onEnter:(e,n)=>(e.entity.acceleration=0,e.entity.velocity={x:0,y:0},{...n,enteredAt:e.updateContext.gameState.time})},xE=[OE,LE,HE,BE,GE],pm=[...fE,...EE,...ME,...xE];function bE(e,n,r){const o=wA(e,pm);if(!o)return _A(e),[e,n];const{nextState:l,data:a}=o.update(n,r);return EA(e,l)?[l,IA(o,l,a,r,pm)]:[l,a]}function $E(e,n,r){const{gameState:o}=n,l=r*(Vt/Xt);if(e.isAdult=e.age>=bd,e.isCallingToAttack&&e.callToAttackEndTime&&o.time>e.callToAttackEndTime&&(e.isCallingToAttack=!1,e.callToAttackEndTime=void 0),e.isCallingToFollow&&e.callToFollowEndTime&&o.time>e.callToFollowEndTime&&(e.isCallingToFollow=!1,e.callToFollowEndTime=void 0),e.movementSlowdown&&o.time>e.movementSlowdown.endTime&&(e.movementSlowdown=void 0),e.hitpoints<e.maxHitpoints){const c=1-e.hunger/100*QA,d=KA*c*l;e.hitpoints=Math.min(e.maxHitpoints,e.hitpoints+d)}if(e.hunger+=r*(Ko/(Vt/Xt)),e.hunger>VI&&(!e.lastHungerEffectTime||o.time-e.lastHungerEffectTime>rr*2)&&(Ce(o,se.Hunger,e.position,rr,e.id),e.lastHungerEffectTime=o.time),e.age+=r/Bl,e.isPlayer){const c=It(o,e).filter(d=>d.hunger>=JI);if(c.length>0){const d=c.map(h=>h.id);Dd(o,{identifier:"children_starving",type:_s.ChildrenStarving,message:"Your children are starving!",duration:qI,targetEntityIds:d,highlightedEntityIds:d})}}if(e.gender==="female"&&e.isPregnant&&e.gestationTime&&(e.gestationTime-=l,e.hunger+=r*((Ko*xA-Ko)/(Vt/Xt)),(!e.lastPregnantEffectTime||o.time-e.lastPregnantEffectTime>rr*3)&&(Ce(o,se.Pregnant,e.position,rr,e.id),e.lastPregnantEffectTime=o.time),e.gestationTime<=0&&(Q_(e,e.pregnancyFatherId,n),e.isPregnant=!1,e.gestationTime=0,e.pregnancyFatherId=void 0)),e.procreationCooldown&&(e.procreationCooldown-=l,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.attackCooldown&&(e.attackCooldown-=l,e.attackCooldown<0&&(e.attackCooldown=0)),e.feedParentCooldownTime&&(e.feedParentCooldownTime-=l,e.feedParentCooldownTime<0&&(e.feedParentCooldownTime=0)),e.feedChildCooldownTime&&(e.feedChildCooldownTime-=l,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0)),e.leaderMetaStrategyCooldown&&(e.leaderMetaStrategyCooldown-=l,e.leaderMetaStrategyCooldown<0&&(e.leaderMetaStrategyCooldown=0)),e.isAdult?e.radius===so&&(e.radius=vt):e.hunger+=r*((Ko*bA-Ko)/(Vt/Xt)),e.isAdult&&e.food.length>0&&(!e.feedParentCooldownTime||e.feedParentCooldownTime<=0)){const c=[];if(e.motherId){const d=o.entities.entities.get(e.motherId);d&&c.push(d)}if(e.fatherId){const d=o.entities.entities.get(e.fatherId);d&&c.push(d)}for(const d of c)if(d.age>=v0&&d.hunger>=WA&&X(e.position,d.position,o.mapDimensions.width,o.mapDimensions.height)<=YA){e.food.pop(),d.hunger=Math.max(0,d.hunger-Oi),e.feedParentCooldownTime=jA;break}}let a;if(e.hitpoints<=0?a="killed":e.hunger>=tn?e.food.length>0&&e.isAdult?(e.food.pop(),e.hunger=Math.max(0,e.hunger-Oi)):a="hunger":e.age>=e.maxAge&&(a="oldAge"),a){if(e.leaderId===e.id){const c=ni(It(o,e));c?(c.leaderId=c.id,c.tribeBadge=e.tribeBadge,c.diplomacy=new Map(e.diplomacy),o.entities.entities.forEach(d=>{if(d.type==="human"&&d.leaderId===e.id){const h=d;h.leaderId=c.id}})):o.entities.entities.forEach(d=>{if(d.type==="human"&&d.leaderId===e.id){const h=d;h.leaderId=void 0,h.tribeBadge=void 0}})}if(e.isPlayer){const c=ni(It(o,e));c?(c.isPlayer=!0,o.generationCount++):(o.gameOver=!0,o.causeOfGameOver=a,Dd(o,{identifier:"no_heir",type:_s.NoHeir,message:"Your lineage has ended. You have no heir.",duration:0}))}V_(o.entities,e.position,e.gender,e.age,e.radius,e.id,o.time,e.food,e.hunger),Ls(o.entities,e.id);return}e.animationProgress===void 0&&(e.animationProgress=0),e.animationSpeed===void 0&&(e.animationSpeed=1),e.animationProgress+=r*e.animationSpeed,e.animationProgress>=1&&(e.animationProgress=0)}function zE(e,n){const r=n.gameState.time-e.timeOfDeath;e.decayProgress=Math.min(1,r/VA);const o=Math.floor(y0*(1-e.decayProgress));e.food.length>o&&e.food.splice(o),e.decayProgress>=1&&e.food.length<=0&&Ls(n.gameState.entities,e.id)}function WE(e,n,r){const o=r*(Vt/Xt);e.age+=r/Bl,e.isAdult=e.age>=us;let l=n.gameState.ecosystem.preyHungerIncreasePerHour*o;if(e.isPregnant&&(l*=1.2),e.hunger+=l,e.isPregnant&&e.gestationTime!==void 0&&(e.gestationTime-=o,e.gestationTime<=0)){const c={x:e.position.x+(Math.random()-.5)*40,y:e.position.y+(Math.random()-.5)*40};c.x=Math.max(20,Math.min(n.gameState.mapDimensions.width-20,c.x)),c.y=Math.max(20,Math.min(n.gameState.mapDimensions.height-20,c.y));const d=Math.random()<.5?"male":"female",h=e,p=e.fatherId?n.gameState.entities.entities.get(e.fatherId):void 0;let m;if(p)m=RE(h.geneCode,p.geneCode);else{m=h.geneCode;const y=Math.floor((Math.random()-.5)*4096);m=Math.max(0,Math.min(16777215,m+y))}io(n.gameState.entities,c,d,0,B0*.5,m,e.id,e.fatherId),Ce(n.gameState,se.Procreation,e.position,rr,e.id),Me(n,Ae.Birth,e.position),e.isPregnant=!1,e.gestationTime=0,e.procreationCooldown=n.gameState.ecosystem.preyProcreationCooldown,e.fatherId=void 0}e.procreationCooldown&&e.procreationCooldown>0&&(e.procreationCooldown-=o,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.eatingCooldownTime&&e.eatingCooldownTime>n.gameState.time||(e.eatingCooldownTime=void 0),e.fleeCooldown&&e.fleeCooldown>0&&(e.fleeCooldown-=o,e.fleeCooldown<0&&(e.fleeCooldown=0)),e.feedChildCooldownTime&&e.feedChildCooldownTime>0&&(e.feedChildCooldownTime-=o,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0));let a=!1;e.hunger>=gw&&(a=!0),e.hitpoints<=0&&(a=!0),e.age>=H0&&(a=!0),a&&(X_(n.gameState.entities,e.position,e.gender,e.age,e.radius,e.id,n.gameState.time,e.geneCode),Ls(n.gameState.entities,e.id))}function YE(e,n,r){const o=r*(Vt/Xt);e.age+=r/Bl,e.isAdult=e.age>=cs;let l=n.gameState.ecosystem.predatorHungerIncreasePerHour*o;if(e.isPregnant&&(l*=1.3),e.hunger+=l,e.isPregnant&&e.gestationTime!==void 0&&(e.gestationTime-=o,e.gestationTime<=0)){const c={x:e.position.x+(Math.random()-.5)*50,y:e.position.y+(Math.random()-.5)*50};c.x=Math.max(25,Math.min(n.gameState.mapDimensions.width-25,c.x)),c.y=Math.max(25,Math.min(n.gameState.mapDimensions.height-25,c.y));const d=Math.random()<.5?"male":"female",h=e,p=e.pregnancyFatherId?n.gameState.entities.entities.get(e.pregnancyFatherId):void 0;let m;if(p)m=FE(h.geneCode,p.geneCode);else{m=h.geneCode;const y=Math.floor((Math.random()-.5)*4096);m=Math.max(0,Math.min(16777215,m+y))}ro(n.gameState.entities,c,d,0,x0*.6,m,e.id,e.pregnancyFatherId),Ce(n.gameState,se.Procreation,e.position,rr,e.id),Me(n,Ae.Birth,e.position),e.isPregnant=!1,e.gestationTime=0,e.procreationCooldown=n.gameState.ecosystem.predatorProcreationCooldown,e.pregnancyFatherId=void 0}e.procreationCooldown&&e.procreationCooldown>0&&(e.procreationCooldown-=o,e.procreationCooldown<0&&(e.procreationCooldown=0)),e.attackCooldown&&e.attackCooldown>0&&(e.attackCooldown-=o,e.attackCooldown<0&&(e.attackCooldown=0)),e.huntCooldown&&e.huntCooldown>0&&(e.huntCooldown-=o,e.huntCooldown<0&&(e.huntCooldown=0)),e.feedChildCooldownTime&&e.feedChildCooldownTime>0&&(e.feedChildCooldownTime-=o,e.feedChildCooldownTime<0&&(e.feedChildCooldownTime=0));let a=!1;e.hunger>=Iw&&(a=!0),e.hitpoints<=0&&(a=!0),e.age>=G0&&(a=!0),a&&(K_(n.gameState.entities,e.position,e.gender,e.age,e.radius,e.id,n.gameState.time,e.geneCode),Ls(n.gameState.entities,e.id))}var Os=(e=>(e[e.BehaviorTreeBased=0]="BehaviorTreeBased",e))(Os||{});function mf(e,n){if(e.aiBehaviorTree&&e.aiBlackboard){const r=e.aiBlackboard.get("lastAiUpdateTime")??0;n.gameState.time-r>=Is&&(e.aiBehaviorTree.execute(e,n,e.aiBlackboard),e.aiBlackboard.set("lastAiUpdateTime",n.gameState.time))}else console.warn(`Behavior Tree AI ticked for human ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle"}function jE(e,n){switch(e.aiBlackboard&&e.aiBlackboard.cleanupOldEntries(n.gameState.time),e.aiType){case Os.BehaviorTreeBased:default:mf(e,n);break}}function VE(e,n){e.aiBehaviorTree&&e.aiBlackboard?mf(e,n):(console.warn(`Behavior Tree AI ticked for prey ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle")}function XE(e,n){e.aiBehaviorTree&&e.aiBlackboard?mf(e,n):(console.warn(`Behavior Tree AI ticked for predator ${e.id}, but the tree or blackboard was missing.`),e.activeAction="idle")}function KE(e,n){e.forces.push(Tt(e.velocity,-.1));const r=Tt(et(e.direction),e.acceleration);e.forces.push(r),e.debuffs.forEach(o=>{n.gameState.time-o.startTime<o.duration&&o.type==="slow"&&(e.velocity=Tt(e.velocity,.5))}),e.debuffs=e.debuffs.filter(o=>n.gameState.time-o.startTime<o.duration),e.velocity=bn(e.velocity,e.forces.reduce(bn,{x:0,y:0})),to(e.velocity)<.001&&(e.velocity={x:0,y:0}),e.position=bn(e.position,Tt(e.velocity,n.deltaTime)),e.position.x=(e.position.x%n.gameState.mapDimensions.width+n.gameState.mapDimensions.width)%n.gameState.mapDimensions.width,e.position.y=(e.position.y%n.gameState.mapDimensions.height+n.gameState.mapDimensions.height)%n.gameState.mapDimensions.height,e.forces=[],e.type==="human"?$E(e,n,n.deltaTime):e.type==="corpse"?zE(e,n):e.type==="prey"?WE(e,n,n.deltaTime):e.type==="predator"&&YE(e,n,n.deltaTime),e.type==="human"&&jE(e,n),e.type==="prey"?VE(e,n):e.type==="predator"&&XE(e,n),e.stateMachine&&(e.stateMachine=bE(...e.stateMachine,{entity:e,updateContext:n}))}var I=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.FAILURE=1]="FAILURE",e[e.RUNNING=2]="RUNNING",e[e.NOT_EVALUATED=3]="NOT_EVALUATED",e))(I||{});const mm="Human Behavior",QE=1;class qE{constructor(){Ie(this,"nodeData",new Map);Ie(this,"pathStack",[]);Ie(this,"startTimeStack",[])}nodeStart(n){this.pathStack.push(n),this.startTimeStack.push(performance.now())}nodeEnd(){if(this.startTimeStack.length===0||this.pathStack.length===0){console.error("BTProfiler: nodeEnd() called without a matching nodeStart().");return}const n=performance.now(),r=this.startTimeStack.pop(),o=n-r,l=this.pathStack.join(" > "),a=this.nodeData.get(l)??{path:l,totalTime:0,callCount:0,minTime:1/0,maxTime:-1/0};a.totalTime+=o,a.callCount++,a.minTime=Math.min(a.minTime,o),a.maxTime=Math.max(a.maxTime,o),this.nodeData.set(l,a),this.pathStack.pop()}report(n={}){const{showAll:r=!1}=n,o=Array.from(this.nodeData.values());if(o.length===0){console.log("--- Behavior Tree Profiler: No data collected. ---");return}let l=o,a="--- Behavior Tree Full Report ---";if(!r){const d=this.nodeData.get(mm);if(d){const h=d.totalTime*QE/100;l=o.filter(p=>p.totalTime>h&&p.path!==mm),a="--- Behavior Tree Problem Report ---"}else console.log('BTProfiler: Root node "Human Behavior" not found. Showing full report.'),a="--- Behavior Tree Full Report (Root Not Found) ---"}const c=l.sort((d,h)=>h.totalTime-d.totalTime);console.log(a),c.length>0?console.table(c.map(d=>({Path:d.path,"Total Time (ms)":d.totalTime.toFixed(3),Calls:d.callCount,"Avg Time (ms)":(d.totalTime/d.callCount).toFixed(3),"Min Time (ms)":d.minTime.toFixed(3),"Max Time (ms)":d.maxTime.toFixed(3)}))):console.log("No significant performance problems detected."),console.log("------------------------------------")}reset(){this.nodeData.clear(),this.pathStack=[],this.startTimeStack=[]}}const ut=new qE;function En(e){return Array.isArray(e)?e:[e,""]}class pe{constructor(n,r,o=0){Ie(this,"name");Ie(this,"lastStatus");Ie(this,"depth");this.children=n,this.name=r,this.depth=o,this.children.forEach(l=>{l.depth=(this.depth??0)+1})}execute(n,r,o){this.name&&ut.nodeStart(this.name);try{for(const l of this.children){const[a,c]=En(l.execute(n,r,o));if(a!==I.SUCCESS)return this.lastStatus=a,this.name&&o.recordNodeExecution(this.name,a,r.gameState.time,this.depth,c),a}return this.lastStatus=I.SUCCESS,this.name&&o.recordNodeExecution(this.name,I.SUCCESS,r.gameState.time,this.depth,""),I.SUCCESS}finally{this.name&&ut.nodeEnd()}}}class _n{constructor(n,r,o=0){Ie(this,"name");Ie(this,"lastStatus");Ie(this,"depth");Ie(this,"runningChildIndex");this.children=n,this.name=r,this.depth=o,this.children.forEach(l=>{l.depth=(this.depth??0)+1})}execute(n,r,o){this.name&&ut.nodeStart(this.name);try{const l=this.runningChildIndex??0;for(let a=l;a<this.children.length;a++){const c=this.children[a],[d,h]=En(c.execute(n,r,o));if(d!==I.FAILURE){if(d===I.SUCCESS)return delete this.runningChildIndex,this.lastStatus=I.SUCCESS,this.name&&o.recordNodeExecution(this.name,I.SUCCESS,r.gameState.time,this.depth,h),I.SUCCESS;if(d===I.RUNNING)return this.runningChildIndex=a,this.lastStatus=I.RUNNING,this.name&&o.recordNodeExecution(this.name,I.RUNNING,r.gameState.time,this.depth,h),I.RUNNING}}return delete this.runningChildIndex,this.lastStatus=I.FAILURE,this.name&&o.recordNodeExecution(this.name,I.FAILURE,r.gameState.time,this.depth,""),I.FAILURE}finally{this.name&&ut.nodeEnd()}}}class ae{constructor(n,r,o=0){Ie(this,"name");Ie(this,"lastStatus");Ie(this,"depth");this.action=n,this.name=r,this.depth=o}execute(n,r,o){this.name&&ut.nodeStart(this.name);try{const[l,a]=En(this.action(n,r,o));return this.lastStatus=l,this.name&&o.recordNodeExecution(this.name,l,r.gameState.time,this.depth,a),l}finally{this.name&&ut.nodeEnd()}}}class ie{constructor(n,r,o=0){Ie(this,"name");Ie(this,"lastStatus");Ie(this,"depth");this.condition=n,this.name=r,this.depth=o}execute(n,r,o){this.name&&ut.nodeStart(this.name);try{const[l,a]=En(this.condition(n,r,o)),c=l?I.SUCCESS:I.FAILURE;return this.lastStatus=c,this.name&&o.recordNodeExecution(this.name,c,r.gameState.time,this.depth,a),c}finally{this.name&&ut.nodeEnd()}}}class Pl{constructor(n,r,o,l=0){Ie(this,"name");Ie(this,"lastStatus");Ie(this,"depth");Ie(this,"startTimeKey");this.child=n,this.timeoutDurationHours=r,this.name=o,this.depth=l,this.child.depth=(this.depth??0)+1,this.startTimeKey=`timeout_${this.name}_startTime`}execute(n,r,o){ut.nodeStart(this.name);try{const l=r.gameState.time;let a=o.get(this.startTimeKey);const[c,d]=En(this.child.execute(n,r,o));if(c===I.RUNNING){a===void 0&&(o.set(this.startTimeKey,l),a=l);const h=l-a;if(h>this.timeoutDurationHours){o.delete(this.startTimeKey),this.lastStatus=I.FAILURE;const m=`Timed out after ${h.toFixed(2)}h.`;return o.recordNodeExecution(this.name,this.lastStatus,l,this.depth,m),this.lastStatus}this.lastStatus=I.RUNNING;const p=`Running for ${h.toFixed(2)}h. ${d}`;return o.recordNodeExecution(this.name,this.lastStatus,l,this.depth,p),this.lastStatus}return a!==void 0&&o.delete(this.startTimeKey),this.lastStatus=c,o.recordNodeExecution(this.name,this.lastStatus,l,this.depth,d),this.lastStatus}finally{ut.nodeEnd()}}}class Ds{constructor(n,r,o,l=0,a){Ie(this,"name");Ie(this,"lastStatus");Ie(this,"depth");Ie(this,"statusKey");Ie(this,"timestampKey");this.child=n,this.cacheDurationHours=r,this.validityCheck=a,this.name=o,this.depth=l,this.child.depth=(this.depth??0)+1,this.statusKey=`caching_${this.name}_status`,this.timestampKey=`caching_${this.name}_timestamp`}execute(n,r,o){ut.nodeStart(this.name);try{const l=r.gameState.time,a=o.get(this.statusKey),c=o.get(this.timestampKey);if(a!==void 0&&c!==void 0){const m=l-c>this.cacheDurationHours,y=this.validityCheck?this.validityCheck(n,r,o):!0;if(!m&&y){const S=(c+this.cacheDurationHours-l).toFixed(2),E=`Cache hit. Status: ${I[a]}. ${S}h left.`;return this.lastStatus=a,o.recordNodeExecution(this.name,this.lastStatus,l,this.depth,E),this.lastStatus}}const[d,h]=En(this.child.execute(n,r,o));(d===I.SUCCESS||d===I.FAILURE)&&(o.set(this.statusKey,d),o.set(this.timestampKey,l)),this.lastStatus=d;const p=`Cache miss. Child returned ${I[d]}. ${h}`;return o.recordNodeExecution(this.name,this.lastStatus,l,this.depth,p),this.lastStatus}finally{ut.nodeEnd()}}}class dr{constructor(n,r,o,l=0){Ie(this,"name");Ie(this,"lastStatus");Ie(this,"depth");Ie(this,"cooldownKey");this.cooldownDurationHours=n,this.child=r,this.name=o,this.depth=l,this.child.depth=(this.depth??0)+1,this.cooldownKey=`cooldown_${this.name}`}execute(n,r,o){ut.nodeStart(this.name);try{const l=r.gameState.time,a=o.get(this.cooldownKey);if(this.child.lastStatus===I.RUNNING){const[h,p]=En(this.child.execute(n,r,o));if(this.lastStatus=h,this.name){const m=`Continuing running child. ${p}`;o.recordNodeExecution(this.name,this.lastStatus,l,this.depth,m)}return this.lastStatus}if(a!==void 0&&l<a){const p=`Cooldown active, ${(a-l).toFixed(2)}h left`;return this.lastStatus=I.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,l,this.depth,p),this.lastStatus}const[c,d]=En(this.child.execute(n,r,o));return(c===I.SUCCESS||c===I.RUNNING)&&o.set(this.cooldownKey,l+this.cooldownDurationHours),this.lastStatus=c,this.name&&o.recordNodeExecution(this.name,this.lastStatus,l,this.depth,d),this.lastStatus}finally{ut.nodeEnd()}}}class Ji{constructor(n,r,o,l=0){Ie(this,"name");Ie(this,"lastStatus");Ie(this,"depth");this.child=n,this.behaviorKey=r,this.name=o,this.depth=l;const a=(c,d)=>{c.depth=d,c.children?c.children.forEach(h=>a(h,d+1)):c.child&&a(c.child,d+1)};a(this.child,(this.depth??0)+1)}execute(n,r,o){this.name&&ut.nodeStart(this.name);try{if(n.isPlayer&&!r.gameState.autopilotControls.behaviors[this.behaviorKey]){const d=`Player autopilot for '${this.behaviorKey}' is disabled.`;return this.lastStatus=I.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,d),this.lastStatus}const[a,c]=En(this.child.execute(n,r,o));return this.lastStatus=a,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,c),this.lastStatus}finally{this.name&&ut.nodeEnd()}}}class ZE{constructor(n,r,o=0){Ie(this,"name");Ie(this,"lastStatus");Ie(this,"depth");this.child=n,this.name=r,this.depth=o;const l=(a,c)=>{a.depth=c,a.children?a.children.forEach(d=>l(d,c+1)):a.child&&l(a.child,c+1)};l(this.child,(this.depth??0)+1)}execute(n,r,o){this.name&&ut.nodeStart(this.name);try{if(n.isPlayer&&r.gameState.autopilotControls.isManuallyMoving)return this.lastStatus=I.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,"Manual movement active, AI blocked."),this.lastStatus;const[l,a]=En(this.child.execute(n,r,o));return this.lastStatus=l,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,a),this.lastStatus}finally{this.name&&ut.nodeEnd()}}}class Jo{constructor(n,r,o=0){Ie(this,"name");Ie(this,"lastStatus");Ie(this,"depth");this.child=n,this.name=r,this.depth=o;const l=(a,c)=>{a.depth=c,a.children?a.children.forEach(d=>l(d,c+1)):a.child&&l(a.child,c+1)};l(this.child,(this.depth??0)+1)}execute(n,r,o){this.name&&ut.nodeStart(this.name);try{if(n.isPlayer)return this.lastStatus=I.FAILURE,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,"Player controlled, AI blocked."),this.lastStatus;const[l,a]=En(this.child.execute(n,r,o));return this.lastStatus=l,this.name&&o.recordNodeExecution(this.name,this.lastStatus,r.gameState.time,this.depth,a),this.lastStatus}finally{this.name&&ut.nodeEnd()}}}function JE(e){return new pe([new ie((n,r)=>{const o=n.hunger>=xp,l=n.food.length>0,a=!n.eatingCooldownTime||r.gameState.time>=n.eatingCooldownTime;return[!!(n.isAdult&&o&&l&&a),`${Math.floor(n.hunger-xp)}, ${n.food.length}, ${n.eatingCooldownTime?Math.floor(n.eatingCooldownTime-r.gameState.time):""}`]},"Can Eat",e+1),new ae(n=>(n.direction={x:0,y:0},n.target=void 0,n.activeAction="eating",I.RUNNING),"Eat",e+1)],"Eating",e)}function e_(e){return new pe([new ie((n,r,o)=>{if(n.isAdult&&n.hitpoints>n.maxHitpoints*E0||n.isAdult&&n.hunger>hT)return!1;const l=Bw(n.id,r.gameState);return l?(o.set("fleeThreat",l),!0):!1},"Should Flee",e+1),new ae((n,r,o)=>{const l=o.get("fleeThreat");if(!l)return I.FAILURE;n.activeAction="moving";const a=ze(l.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),c=et(a),d=bn(n.position,Tt(c,_0));return n.target={x:(d.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(d.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},n.direction=c,I.RUNNING},"Execute Flee",e+1)],"Flee",e)}const es="foodSource";function t_(e){const n=new ae((o,l,a)=>{const c=new Map,d=Ne(o,l.gameState,"berryBush",Yp,m=>{if(m.food.length===0)return!1;if(!m.ownerId||!m.claimedUntil||l.gameState.time>=m.claimedUntil)return!0;const y=l.gameState.entities.entities.get(m.ownerId);if(!y||y.leaderId===o.leaderId)return!0;const S=c.get(y.id)??X(o.position,y.position,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height);return c.set(y.id,S),S>$T}),h=Ne(o,l.gameState,"corpse",Yp,m=>m.food.length>0);let p=null;if(d&&h){const m=X(o.position,d.position,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height),y=X(o.position,h.position,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height);p=m<=y?d:h}else p=d||h;return p?(a.set(es,p),[I.SUCCESS,`Found food: ${p.type} at ${p.position.x.toFixed(0)},${p.position.y.toFixed(0)}`]):[I.FAILURE,"No food source found"]},"Find Closest Food Source",e+4),r=new ae((o,l,a)=>{const c=a.get(es);return!c||c.food.length===0?(a.delete(es),[I.FAILURE,"Food source is invalid or depleted"]):X(o.position,c.position,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height)<Fi?(o.activeAction="gathering",o.direction={x:0,y:0},o.target=c.id,a.delete(es),[I.SUCCESS,`Gathering from ${c.type}`]):(o.activeAction="moving",o.target=c.id,o.direction=jt(o.position,c.position,l.gameState.mapDimensions),[I.RUNNING,`Moving to ${c.type}`])},"Move To Food and Gather",e+3);return new pe([new ie((o,l)=>{const a=o.food.length<o.maxFood,c=o.hunger>rT,d=It(l.gameState,o).filter(h=>h.hunger>$d);return[(o.isAdult&&a&&(c||d.length>0))??!1,`${c?"H":""}, ${d.length>0?" HC("+d.length+")":""}`]},"Should Gather Food",e+1),new _n([new pe([new ie((o,l,a)=>a.has(es),"Has Food Source?",e+2),r],"Continue Gathering Action",e+2),new pe([new Ds(n,IT,"Cache Food Source Search",e+3),r],"Find New Food Source and Gather",e+2)],"Perform or Start Gathering",e+1)],"Gather Food",e)}function n_(e){return new ae((n,r,o)=>(n.activeAction="idle",n.direction={x:0,y:0},n.target=void 0,o.set("wanderTarget",void 0),I.SUCCESS),"Idle",e)}const nl="procreationWanderStartTime",vm=(e,n,r)=>n.find(o=>cr(e,o,r));function i_(e){const n=new ie((a,c,d)=>{const h=cm(a,c.gameState,Fi),p=vm(a,h,c.gameState);return p?(d.set("procreationPartner",p),!0):!1},"Find Immediate Partner"),r=new ae((a,c,d)=>{var p;const h=d.get("procreationPartner");return h?(a.activeAction="procreating",a.target=void 0,d.delete("procreationPartner"),d.delete(nl),(p=a.partnerIds)!=null&&p.includes(h.id)||(a.partnerIds=a.partnerIds?[...a.partnerIds,h.id]:[h.id]),I.SUCCESS):I.FAILURE},"Start Procreating"),o=new ie((a,c,d)=>{const h=cm(a,c.gameState,fT),p=vm(a,h,c.gameState);return p?(d.set("procreationPartner",p),!0):!1},"Locate Distant Partner"),l=new ae((a,c,d)=>{const h=d.get("procreationPartner");if(!h)return I.FAILURE;if(X(a.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<Fi)return I.SUCCESS;a.activeAction="moving",a.target=h.id;const m=ze(a.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height);return a.direction=et(m),I.RUNNING},"Move Towards Partner");return new pe([new ie(a=>!(!a.isAdult||a.gender==="female"&&a.isPregnant||a.age<HA||a.gender==="female"&&a.age>m0),"Is Fertile (age, not pregnant)",e+1),new ie(a=>a.hunger<lr,"Is Healthy (hunger)",e+1),new ie(a=>(a.procreationCooldown||0)<=0,"Is Ready (cooldown)",e+1),new _n([new pe([new ie((a,c)=>q0(a.position,c.gameState,"berryBush",dT)>=cT,"Is Environment Viable (food)",e+3),new ae((a,c,d)=>(d.delete(nl),I.SUCCESS),"Clear Wander Timer",e+3)],"Sufficient Food Path",e+2),new pe([new ie((a,c)=>{if(a.gender==="male"){const d=It(c.gameState,a);return!ni(d)}return!1},"Is Male Without Heir",e+3),new ae((a,c,d)=>{const h=d.get(nl);if(h===void 0)return d.set(nl,c.gameState.time),[I.FAILURE,"Starting heirless wander timer"];const p=c.gameState.time-h;return p>=BA?[I.SUCCESS,`Wandered for ${p.toFixed(1)}h, proceeding without food`]:[I.FAILURE,`Wandering for heir, ${p.toFixed(1)}h elapsed`]},"Check Wander Timer",e+3)],"Heirless Desperation Path",e+2)],"Check Environment Or Desperation",e+1),new ie((a,c,d)=>{var p;const h=d.get("procreationPartner");return h&&((p=h.partnerIds)!=null&&p.length)&&!h.partnerIds.includes(a.id)&&h.partnerIds.map(m=>c.gameState.entities.entities.get(m)).filter(m=>!!m).some(m=>X(a.position,m.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<bT)?[!1,"Partner's primary partner is too close"]:!0},"Is Partner's Primary Partner Nearby",e+1),new _n([new pe([n,r],"Procreate With Immediate Partner",e+2),new dr(ST,new pe([o,l],"Seek Distant Partner Action",e+3),"Seek Distant Partner Cooldown",e+2)],"Find Partner And Procreate",e+1)],"Procreate",e)}const Hr="attackTarget",er="homeCenter",od=150;function r_(e){return new pe([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const{gameState:l}=r;if(n.activeAction==="attacking"&&n.attackTargetId){const c=l.entities.entities.get(n.attackTargetId);if(c&&c.hitpoints>0&&X(n.position,c.position,l.mapDimensions.width,l.mapDimensions.height)<=od){if(o.set(Hr,c),!o.get(er)){const d=n.leaderId?ur(n.leaderId,l):Cl(n,l).length>0?dm(n,l):n.position;o.set(er,d)}return!0}}const a=Ne(n,l,"human",od,c=>c.hitpoints>0&&lo(n,c,l));if(a){o.set(Hr,a);const c=n.leaderId?ur(n.leaderId,l):Cl(n,l).length>0?dm(n,l):n.position;return o.set(er,c),!0}return o.set(Hr,void 0),o.set(er,void 0),!1},"Find Attack Target",e+1),new ae((n,r,o)=>{const l=o.get(Hr),a=o.get(er);if(!l||!a)return I.FAILURE;const{gameState:c}=r;return X(n.position,a,c.mapDimensions.width,c.mapDimensions.height)>T0?(n.activeAction="idle",n.attackTargetId=void 0,o.set(Hr,void 0),o.set(er,void 0),I.FAILURE):l.hitpoints<=0||X(n.position,l.position,c.mapDimensions.width,c.mapDimensions.height)>od?(n.activeAction==="attacking"&&(n.activeAction="idle",n.attackTargetId=void 0),o.set(Hr,void 0),o.set(er,void 0),I.SUCCESS):(n.activeAction==="attacking"&&n.attackTargetId===l.id||(n.activeAction="attacking",n.attackTargetId=l.id),I.RUNNING)},"Execute Attack",e+1)],"Attack",e)}const o_=(e,n,r)=>{const o=It(n.gameState,e).filter(c=>!c.isAdult);if(o.length===0)return I.FAILURE;let l=null,a=$d;for(const c of o)c.hunger>=a&&(a=c.hunger,l=c);return l?(r.set("targetChild",l),I.SUCCESS):I.FAILURE},s_=(e,n,r)=>{const o=r.get("targetChild");return o?X(e.position,o.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>zd?(e.activeAction="moving",e.target=o.id,e.direction=jt(e.position,o.position,n.gameState.mapDimensions),I.RUNNING):(e.activeAction="feeding",e.target=void 0,r.set("targetChild",void 0),I.SUCCESS):I.FAILURE};function a_(e){return new pe([new ie(n=>(n.isAdult&&n.food.length>0&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child",e+1),new ae(o_,"Find Hungriest Child",e+1),new ae(s_,"Move To Child and Feed",e+1)],"Feed Child",e)}function l_(e){return new pe([new ie(n=>!n.isAdult&&n.hunger>=$d,"Is Hungry Child",e+1),new ae((n,r,o)=>{const l=Uw(n,r.gameState);if(l.length===0)return I.FAILURE;const a=Ne(n,r.gameState,"human",zA,c=>l.some(d=>d.id===c.id)&&c.food.length>0);return a?(o.set("targetParent",a),I.SUCCESS):I.FAILURE},"Find Parent With Food",e+1),new ae((n,r,o)=>{const l=o.get("targetParent");if(!l)return I.FAILURE;const a=X(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",a<=zd?(n.target=void 0,I.SUCCESS):(n.target=l.id,n.activeAction="moving",I.RUNNING)},"Move To Parent",e+1)],"Seek Food From Parent",e)}const il="plantingSpot";function u_(e){const n=new ae((o,l,a)=>{const c=a.get(il);return!c||no(c,l.gameState,xl,o.id)?(a.delete(il),[I.FAILURE,"Planting spot is invalid or now occupied"]):X(o.position,c,l.gameState.mapDimensions.width,l.gameState.mapDimensions.height)>Fi?(o.activeAction="moving",o.target=c,o.direction=jt(o.position,c,l.gameState.mapDimensions),[I.RUNNING,"Moving to planting spot"]):(o.activeAction="planting",o.target=c,[I.RUNNING,"Planting state initiated"])},"Move To Spot and Plant",e+3),r=new ae((o,l,a)=>{const c=Yw(o,l.gameState);return c?(a.set(il,c),[I.SUCCESS,`Found new spot at ${c.x.toFixed(0)}, ${c.y.toFixed(0)}`]):[I.FAILURE,"No suitable planting spot found"]},"Find Optimal Planting Spot",e+3);return new pe([new ie(o=>{const l=o.food.filter(c=>c.type===ti.Berry).length>=Ts,a=o.hunger<oT;return(o.isAdult&&l&&a)??!1},"Can Plant",e+1),new ie((o,l)=>{const a=q0(o.position,l.gameState,"berryBush",iT),c=It(l.gameState,o);return!(c.length===0||a>=c.length*5)},"Has Not Enough Nearby Bushes",e+1),new _n([new pe([new ie((o,l,a)=>a.has(il),"Has Planting Spot?",e+2),n],"Continue Planting Action",e+2),new dr(TT,r,"Find Planting Spot Cooldown",e+2)],"Perform or Start Planting",e+1)],"Plant Bush",e)}const sd="enemiesNearby";function c_(e){const n=new ie(a=>a.id===a.leaderId,"Is Leader?",e+1),r=new ie(a=>!a.isCallingToAttack,"Is Not Already Calling?",e+1),o=new ae((a,c,d)=>{const h=cf(a,c.gameState,I0);return h.length>0?(d.set(sd,h),I.SUCCESS):I.FAILURE},"Find Nearby Enemies",e+1),l=new _n([new pe([new ie((a,c,d)=>{const h=d.get(sd);if(!h||h.length===0)return!1;const p=Es(a.id,c.gameState),m=Rl(p),y=Rl(h);return m>y*OT},"Is Strong Enough?",e+3),new ae((a,c)=>(a.isCallingToAttack=!0,a.callToAttackEndTime=c.gameState.time+Jr,Ce(c.gameState,se.CallToAttack,a.position,Jr),Me(c,Ae.CallToAttack,a.position),a.activeAction="idle",a.target=void 0,I.SUCCESS),"Issue Call to Attack",e+3)],"Attack",e+2),new ae((a,c,d)=>{const h=d.get(sd);if(!h||h.length===0)return I.FAILURE;const p=h.map(P=>P.position),m=af(p),y=ze(m,a.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height),S=et(y),E=bn(a.position,Tt(S,_0*2));return a.activeAction="moving",a.target={x:(E.x%c.gameState.mapDimensions.width+c.gameState.mapDimensions.width)%c.gameState.mapDimensions.width,y:(E.y%c.gameState.mapDimensions.height+c.gameState.mapDimensions.height)%c.gameState.mapDimensions.height},a.direction=S,I.SUCCESS},"Retreat",e+2)],"Attack or Retreat",e+2);return new pe([n,r,o,new dr(FT,l,"Leader Combat Cooldown",e+1)],"Leader Combat Strategy",e)}const ad="combatTarget",ld="homeCenter";function d_(e){const n=new ie(c=>c.isAdult&&c.leaderId?c.id!==c.leaderId:!1,"Is Tribe Follower?",e+1),r=new ie(c=>c.hunger<sT&&c.hitpoints>=c.maxHitpoints*E0,"Is Fit for Combat?",e+1),o=new ie((c,d)=>{const h=d.gameState.entities.entities.get(c.leaderId);return!!(h!=null&&h.isCallingToAttack)},"Is Leader Calling to Attack?",e+1),l=new ae((c,d,h)=>{const{gameState:p}=d,m=p.entities.entities.get(c.leaderId);if(!m)return I.FAILURE;const y=cf(m,p,gT);if(y.length===0)return I.FAILURE;y.sort((S,E)=>{const P=X(c.position,S.position,p.mapDimensions.width,p.mapDimensions.height),_=X(c.position,E.position,p.mapDimensions.width,p.mapDimensions.height);return P-_});for(const S of y)if(jw(m.id,S.id,p)<pT){h.set(ad,S);const P=ur(m.id,p);return h.set(ld,P),I.SUCCESS}return I.FAILURE},"Find Best Target",e+1),a=new ae((c,d,h)=>{const p=h.get(ad),m=h.get(ld);if(!p||!m)return I.FAILURE;const{gameState:y}=d;return X(c.position,m,y.mapDimensions.width,y.mapDimensions.height)>T0?(c.activeAction==="attacking"&&c.attackTargetId===p.id&&(c.activeAction="idle",c.attackTargetId=void 0),h.set(ad,void 0),h.set(ld,void 0),I.FAILURE):((!c.lastTargetAcquiredEffectTime||d.gameState.time-c.lastTargetAcquiredEffectTime>Be*5)&&(Ce(d.gameState,se.TargetAcquired,c.position,Be,c.id),c.lastTargetAcquiredEffectTime=d.gameState.time),c.activeAction="attacking",c.attackTargetId=p.id,c.target=void 0,I.RUNNING)},"Attack Target",e+1);return new pe([n,r,o,l,a],"Tribe Member Combat",e)}function f_(e){const n=new ie((m,y)=>{if(!m.isAdult||m.gender!=="male")return!1;const S=m.partnerIds&&m.partnerIds.length>0,E=It(y.gameState,m).length>0;return S||E},"Is Adult Male With Family?",e+1),r=new ie((m,y)=>{var _;const S=wt(y.gameState);if(S){const T=ni(It(y.gameState,S));if((T==null?void 0:T.id)===m.id)return!1}if(!m.fatherId)return!1;const E=y.gameState.entities.entities.get(m.fatherId);return!E||((_=ni(It(y.gameState,E)))==null?void 0:_.id)===m.id?!1:X(m.position,E.position,y.gameState.mapDimensions.width,y.gameState.mapDimensions.height)<yT},"Is Too Close To Father?",e+1),o=new ie((m,y,S)=>S.get("territoryMoveTarget")!==void 0,"Is Moving To Territory?",e+3),l=new ae((m,y,S)=>{const E=S.get("territoryMoveTarget"),P=S.get("territoryMoveStartTime");if(!E||!P)return[I.FAILURE,"Missing move data"];if(y.gameState.time-P>mT)return S.delete("territoryMoveTarget"),S.delete("territoryMoveStartTime"),[I.FAILURE,"Territory move timed out"];if(X(m.position,E,y.gameState.mapDimensions.width,y.gameState.mapDimensions.height)<Fi)return S.delete("territoryMoveTarget"),S.delete("territoryMoveStartTime"),[I.SUCCESS,"Arrived at new territory"];m.activeAction="moving",m.target=E;const U=ze(m.position,m.target,y.gameState.mapDimensions.width,y.gameState.mapDimensions.height);return m.direction=et(U),[I.RUNNING,"Continuing move to territory"]},"Check Timeout & Arrival",e+3),a=new pe([o,l],"Handle In-Progress Move",e+2),c=new ie((m,y,S)=>S.get("territoryMoveTarget")===void 0,"Should Start New Move?",e+4),d=new ae((m,y,S)=>{const E=lf(m.position,y.gameState.mapDimensions.width/4,y.gameState.mapDimensions.width,y.gameState.mapDimensions.height);S.set("territoryMoveTarget",E),S.set("territoryMoveStartTime",y.gameState.time),m.activeAction="moving",m.target=E;const P=ze(m.position,m.target,y.gameState.mapDimensions.width,y.gameState.mapDimensions.height);return m.direction=et(P),[I.RUNNING,"Started moving to new territory"]},"Start New Territory Move",e+4),h=new pe([c,d],"Start New Territory Move Action",e+3),p=new _n([a,new dr(AT,h,"Establish Territory Cooldown",e+2)],"Establish or Continue Move",e+1);return new pe([n,r,p],"Establish Family Territory",e)}function h_(e){return new pe([new ae((n,r,o)=>{const l=Hw(n,r.gameState);return l?(o.set("patriarchTarget",l),[I.SUCCESS,`Found patriarch: ${l.id}`]):(o.delete("patriarchTarget"),[I.FAILURE,"No patriarch found"])},"Find Patriarch",e+1),new ae((n,r,o)=>{const l=o.get("patriarchTarget");if(!l)return[I.FAILURE,"Patriarch target missing from blackboard"];const a=X(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(a>A0){n.activeAction="moving",n.target=l.id;const c=ze(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=et(c),[I.RUNNING,`Moving to patriarch at ${a.toFixed(0)}`]}return n.activeAction="idle",n.target=void 0,n.direction={x:0,y:0},[I.SUCCESS,`Arrived at patriarch at ${a.toFixed(0)}`]},"Move Towards Patriarch",e+1)],"Follow Patriarch",e)}const ud="tribeSplitMigrationTarget";function g_(e){const n=new pe([new ie((r,o)=>{const{canSplit:l,progress:a}=hf(r,o.gameState);return l?[!0,`Progress: ${(a??0)*100}%`]:[!1,"Cannot split"]},"Can Split Tribe?",e+2),new ae((r,o,l)=>{const{gameState:a}=o;let c=l.get(ud);if(!c){if(!r.leaderId)return I.FAILURE;const h=ur(r.leaderId,a),p=uE(h,r,a);if(p)l.set(ud,p),c=p;else return I.FAILURE}return X(r.position,c,a.mapDimensions.width,a.mapDimensions.height)<Fi?(l.delete(ud),r.activeAction="idle",r.target=void 0,I.SUCCESS):(r.activeAction="moving",r.target=c,I.RUNNING)},"Move to New Territory",e+2),new ae((r,o)=>(gf(r,o.gameState),I.SUCCESS),"Perform Tribe Split",e+2)],"Tribe Split Action",e+1);return new dr(_T,n,"Tribe Split Cooldown",e)}const rl="jealousyAttackTarget";function p_(e){return new pe([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const l=bw(n,r.gameState,UT);return l?(o.set(rl,l),[!0,`Partner cheating with ${l.id}`]):(o.delete(rl),!1)},"Check for Infidelity",e+1),new ae((n,r,o)=>{const l=o.get(rl);return!l||l.hitpoints<=0?(o.delete(rl),[I.FAILURE,"Target is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===l.id?I.RUNNING:(n.activeAction="attacking",n.attackTargetId=l.id,[I.RUNNING,`Attacking ${l.id}`])},"Execute Jealousy Attack",e+1)],"Jealousy Attack",e)}const ol="defendAggressor";function m_(e){return new pe([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const l=zw(n,r.gameState,LT);return l?(o.set(ol,l),[!0,`Family member ${l.familyMember.id} attacked by ${l.aggressor.id}`]):(o.delete(ol),!1)},"Check Family Under Attack",e+1),new ae((n,r,o)=>{const l=o.get(ol);return!l||l.hitpoints<=0?(o.delete(ol),[I.FAILURE,"Target invalid/dead"]):n.activeAction==="attacking"&&n.attackTargetId===l.id?I.RUNNING:(n.activeAction="attacking",n.attackTargetId=l.id,[I.RUNNING,`Attacking aggressor ${l.id}`])},"Execute Family Defense Attack",e+1)],"Defend Family",e)}const sl="bushIntruder";function v_(e){return new pe([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];const l=$w(n,r.gameState,HT);return l?(o.set(sl,l),[!0,`Intruder ${l.id} stealing berries`]):(o.delete(sl),!1)},"Check For Intruders on Bushes",e+1),new ae((n,r,o)=>{const l=o.get(sl);return!l||l.hitpoints<=0?(o.delete(sl),[I.FAILURE,"Intruder is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===l.id?I.RUNNING:(n.activeAction="attacking",n.attackTargetId=l.id,[I.RUNNING,`Attacking intruder ${l.id}`])},"Execute Bush Defense Attack",e+1)],"Defend Claimed Bush",e)}const al="desperateAttackTarget";function y_(e){return new pe([new ie(n=>n.hunger>BT,"Is Starving",e+1),new ie((n,r)=>{if(!n.isAdult)return[!1,"Not an adult"];const o=Ne(n,r.gameState,"berryBush",mt,a=>a.food.length>0),l=Ne(n,r.gameState,"corpse",mt,a=>a.food.length>0);return!o&&!l},"No Other Food Available",e+1),new ie((n,r,o)=>{const l=Ww(n,r.gameState);return l?(o.set(al,l),[!0,`Found weak target ${l.id}`]):(o.delete(al),!1)},"Find Weak Target",e+1),new ae((n,r,o)=>{const l=o.get(al);return!l||l.hitpoints<=0?(o.delete(al),[I.FAILURE,"Target is invalid or dead"]):n.activeAction==="attacking"&&n.attackTargetId===l.id?I.RUNNING:(n.activeAction="attacking",n.attackTargetId=l.id,[I.RUNNING,`Desperately attacking ${l.id}`])},"Execute Desperate Attack",e+1)],"Desperate Attack",e)}function S_(e,n,r,o){const l=e.entities.entities.get(r.targetEntityId);return!l||!("hitpoints"in l)||l.hitpoints<=0?(e.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):X(n.position,l.position,e.mapDimensions.width,e.mapDimensions.height)<=Sl?(n.activeAction="attacking",n.attackTargetId=l.id,e.autopilotControls.activeAutopilotAction=void 0,I.SUCCESS):(n.activeAction="moving",n.target=l.id,n.direction=jt(n.position,l.position,e.mapDimensions),I.RUNNING)}function A_(e){return new pe([new ie((n,r)=>n.isPlayer===!0&&!!r.gameState.autopilotControls.activeAutopilotAction,"Has Player Command",e+1),new ae((n,r)=>{const{gameState:o}=r,l=o.autopilotControls.activeAutopilotAction;if(!l)return I.FAILURE;switch(l.action){case we.AutopilotMove:{const a=l.position;return X(n.position,a,o.mapDimensions.width,o.mapDimensions.height)<zT?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction==="moving"&&(n.activeAction="idle",n.target=void 0),I.SUCCESS):(n.activeAction="moving",n.target=a,n.direction=jt(n.position,a,o.mapDimensions),I.RUNNING)}case we.AutopilotGather:{const a=o.entities.entities.get(l.targetEntityId);return!a||a.food.length===0?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):X(n.position,a.position,o.mapDimensions.width,o.mapDimensions.height)>Fi?(n.activeAction="moving",n.target=a.id,n.direction=jt(n.position,a.position,o.mapDimensions),I.RUNNING):(n.activeAction="gathering",n.target=a.id,o.autopilotControls.activeAutopilotAction=void 0,I.SUCCESS)}case we.AutopilotAttack:return S_(o,n,l);case we.AutopilotProcreate:{const a=o.entities.entities.get(l.targetEntityId);return!a||a.type!=="human"||!cr(n,a,r.gameState)?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):X(n.position,a.position,o.mapDimensions.width,o.mapDimensions.height)<=Sl?(n.activeAction="procreating",o.autopilotControls.activeAutopilotAction=void 0,I.SUCCESS):(n.activeAction="moving",n.target=a.id,n.direction=jt(n.position,a.position,o.mapDimensions),I.RUNNING)}case we.AutopilotPlant:{if(n.activeAction==="planting")return I.RUNNING;const a=l.position;return no(a,o,xl,n.id)?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):X(n.position,a,o.mapDimensions.width,o.mapDimensions.height)<=Sl?(n.activeAction="planting",n.target=a,o.autopilotControls.activeAutopilotAction=void 0,o.hasPlayerPlantedBush=!0,I.RUNNING):(n.activeAction="moving",n.target=a,n.direction=jt(n.position,a,o.mapDimensions),I.RUNNING)}case we.AutopilotFeedChild:{const a=o.entities.entities.get(l.targetEntityId);return!a||a.type!=="human"||a.isAdult||n.food.length===0?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):X(n.position,a.position,o.mapDimensions.width,o.mapDimensions.height)<=Sl?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction="feeding",I.SUCCESS):(n.activeAction="moving",n.target=a.id,n.direction=jt(n.position,a.position,o.mapDimensions),I.RUNNING)}case we.AutopilotFollowMe:{const a=o.entities.entities.get(l.targetEntityId);return!a||a.type!=="human"||a.id!==a.leaderId?(o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE):X(n.position,a.position,o.mapDimensions.width,o.mapDimensions.height)<=A0?(o.autopilotControls.activeAutopilotAction=void 0,n.activeAction==="moving"&&(n.activeAction="idle"),I.SUCCESS):(n.activeAction="moving",n.target=a.id,n.direction=jt(n.position,a.position,o.mapDimensions),I.RUNNING)}default:return o.autopilotControls.activeAutopilotAction=void 0,I.FAILURE}},"Execute Player Command",e+1)],"Player Command Handler",e)}function T_(e){return new pe([new ie(n=>!!n.leaderId&&n.leaderId!==n.id,"Is Follower",e+1),new ie((n,r)=>{if(!n.leaderId)return!1;const o=r.gameState.entities.entities.get(n.leaderId);return!!o&&o.isCallingToFollow===!0},"Is Leader Calling To Follow",e+1),new ie(n=>n.hunger<uT,"Is Not Critically Hungry",e+1),new ae((n,r)=>{if(!n.leaderId)return I.FAILURE;const o=r.gameState.entities.entities.get(n.leaderId);return o?X(n.position,o.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>lT?(n.activeAction="moving",n.target=o.id,n.direction=jt(n.position,o.position,r.gameState.mapDimensions),I.RUNNING):(n.activeAction==="moving"&&n.target===o.id&&(n.activeAction="idle",n.target=void 0),I.SUCCESS):I.FAILURE},"Execute Follow Leader",e+1)],"Follow Leader Command",e)}const ym="tribeMigrationCheckCooldown";function I_(e){const n=new pe([new ie(o=>!!o.leaderId&&o.leaderId===o.id,"Is Tribe Leader",e+2),new ie((o,l)=>{var c;const a=(c=o.aiBlackboard)==null?void 0:c.get(ym);return a?l.gameState.time-a>=Wp:!0},"Is Migration Check Cooldown Over",e+2),new ae((o,l)=>{var c;(c=o.aiBlackboard)==null||c.set(ym,l.gameState.time);const a=Vw(o,l.gameState);return a?(o.isCallingToFollow=!0,o.callToFollowEndTime=l.gameState.time+ws,o.target=a,o.activeAction="moving",I.SUCCESS):I.FAILURE},"Execute Tribe Migration",e+2)],"Tribe Migration Strategy",e+1),r=new Ds(n,Cd,"Cache Tribe Migration",e+1);return new dr(Wp,r,"Tribe Migration Cooldown",e)}function w_(e){const n=new ie(o=>o.id===o.leaderId,"Is Leader?",e+1),r=new ae((o,l)=>{var p,m,y;const{gameState:a}=l,c=Es(o.id,a),d=Rl(c),h=K0(a).filter(S=>S.leaderId!==o.id);for(const S of h){const E=Es(S.leaderId,a),P=Rl(E),_=((p=o.diplomacy)==null?void 0:p.get(S.leaderId))||Lt.Friendly;d>P*MT?_!==Lt.Hostile&&((m=o.diplomacy)==null||m.set(S.leaderId,Lt.Hostile)):_!==Lt.Friendly&&((y=o.diplomacy)==null||y.set(S.leaderId,Lt.Friendly))}return I.SUCCESS},"Evaluate Diplomacy",e+2);return new pe([n,new dr(CT,r,"Diplomacy Cooldown",e+1)],"Manage Diplomacy",e)}const ll="huntTarget";function E_(e){return new pe([new Ds(new ie((r,o,l)=>{var h;if(!r.isAdult)return[!1,"Not an adult"];if(!r.leaderId)return[!1,"Not in a tribe"];const a=ur(r.leaderId,o.gameState),c=((h=Q0(a,o.gameState,"berryBush",bp))==null?void 0:h.map(p=>p.id))||[],d=Ne(a,o.gameState,"prey",bp,p=>typeof p.target=="number"&&c.includes(p.target));return d?(l.set(ll,d.id),!0):!1},"Find Prey Target",e+2),wT,"Cache Find Prey",e+1),new Pl(new ae((r,o,l)=>{if(!r.leaderId)return I.FAILURE;const a=l.get(ll);if(!a)return I.FAILURE;const c=o.gameState.entities.entities.get(a);if(!c||c.hitpoints<=0)return l.delete(ll),r.activeAction="idle",r.attackTargetId=void 0,I.SUCCESS;const{gameState:d}=o,h=ur(r.leaderId,d);return X(r.position,h,d.mapDimensions.width,d.mapDimensions.height)>aT?(l.delete(ll),r.activeAction="idle",r.attackTargetId=void 0,I.FAILURE):(r.activeAction="attacking",r.attackTargetId=c.id,I.RUNNING)},"Hunt Prey Action",e+2),_d,"Hunt Prey Timeout",e+1)],"Human Hunt Prey Sequence",e)}const ul="defendTarget",cd=150;function __(e){return new pe([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult - children flee instead"];const{gameState:l}=r;if(n.activeAction==="attacking"&&n.attackTargetId){const c=l.entities.entities.get(n.attackTargetId);if(c&&c.type==="predator"&&c.hitpoints>0&&X(n.position,c.position,l.mapDimensions.width,l.mapDimensions.height)<=cd)return o.set(ul,c),[!0,"Continuing defense"]}const a=Ne(n,l,"predator",cd,c=>c.hitpoints>0&&(c.isAdult||!1));if(a){const c=X(n.position,a.position,l.mapDimensions.width,l.mapDimensions.height),d=a.attackTargetId===n.id,h=c<80;if(d||h)return o.set(ul,a),[!0,"Predator threat detected"]}return o.set(ul,void 0),[!1,"No predator threat"]},"Detect Predator Threat",e+1),new ae((n,r,o)=>{const l=o.get(ul);if(!l)return I.FAILURE;const{gameState:a}=r,c=X(n.position,l.position,a.mapDimensions.width,a.mapDimensions.height);return l.hitpoints<=0||c>cd*1.5?(n.activeAction="idle",n.attackTargetId=void 0,I.SUCCESS):(n.activeAction="attacking",n.attackTargetId=l.id,I.RUNNING)},"Defend Against Predator",e+1)],"Human Defend Against Predator",e)}function C_(e){return new pe([new ie((n,r,o)=>{const l=Ne(n,r.gameState,"predator",Ht*2,()=>!0),a=Ne(n,r.gameState,"human",Ht*2,()=>!0);let c=null,d=1/0;if(l){const h=X(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);h<d&&(d=h,c=l)}if(a){const h=X(n.position,a.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);h<d&&(d=h,c=a)}return c&&d<Ht*1.5?(o.set("fleeThreat",c),o.set("fleeDistance",d),!0):!1},"Detect Threat",e+1),new ae((n,r,o)=>{const l=o.get("fleeThreat");if(!l)return I.FAILURE;n.activeAction="moving";const a=ze(l.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),c=et(a),d=bn(n.position,Tt(c,vw));return n.target={x:(d.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(d.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},n.direction=c,n.fleeCooldown=r.gameState.time+2,I.RUNNING},"Execute Flee",e+1)],"Prey Flee",e)}function R_(e){return new pe([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];if(n.hunger<=30||n.eatingCooldownTime&&n.eatingCooldownTime>r.gameState.time)return!1;const l=Ne(n,r.gameState,"berryBush",Ht*10,a=>a.food.length>0);return l?X(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=Ht?(o.set("grazingTarget",l),!0):(o.set("grazingTarget",l),o.set("needToMoveToTarget",!0),!0):!1},"Find Berry Bush",e+1),new ae((n,r,o)=>{const l=o.get("grazingTarget"),a=o.get("needToMoveToTarget");if(!l)return I.FAILURE;const c=X(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Ht)return n.activeAction="grazing",n.target=l.id,n.direction={x:0,y:0},o.delete("needToMoveToTarget"),I.RUNNING;if(a||c>Ht){n.activeAction="moving",n.target=l.id;const d=jt(n.position,l.position,r.gameState.mapDimensions);return n.direction=d,I.RUNNING}return I.FAILURE},"Move to Bush or Graze",e+1)],"Prey Graze",e)}function P_(e){const n=new ie((a,c,d)=>{const h=Ne(a,c.gameState,"prey",Ht,p=>p.id!==a.id&&p.gender!==a.gender&&!!p.isAdult&&p.age>=us&&p.age<=qc&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return h?(d.set("procreationPartner",h),!0):!1},"Find Immediate Partner",e+2),r=new ae((a,c,d)=>{const h=d.get("procreationPartner");return h?(a.activeAction="procreating",a.target=h.id,a.direction={x:0,y:0},d.delete("procreationPartner"),I.SUCCESS):I.FAILURE},"Start Procreating",e+2),o=new ie((a,c,d)=>{const h=Ne(a,c.gameState,"prey",Ht*10,p=>p.id!==a.id&&p.gender!==a.gender&&!!p.isAdult&&p.age>=us&&p.age<=qc&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return h?(d.set("procreationPartner",h),!0):!1},"Locate Distant Partner",e+2),l=new ae((a,c,d)=>{const h=d.get("procreationPartner");if(!h)return I.FAILURE;if(X(a.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<=Ht)return I.SUCCESS;a.activeAction="moving",a.target=h.id;const m=ze(a.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height);return a.direction=et(m),I.RUNNING},"Move Towards Partner",e+2);return new pe([new ie(a=>!!(a.isAdult&&!a.isPregnant&&a.age>=us&&a.age<=qc&&a.hunger<200&&(!a.procreationCooldown||a.procreationCooldown<=0)),"Is Fertile and Ready",e+1),new _n([new pe([n,r],"Procreate With Immediate Partner",e+2),new pe([o,l],"Seek Distant Partner",e+2)],"Find Partner And Procreate",e+1)],"Prey Procreate",e)}const N_=(e,n,r)=>{const o=n.gameState.search.prey.byProperty("motherId",e.id).filter(c=>!c.isAdult&&c.type==="prey");if(o.length===0)return I.FAILURE;let l=null,a=$l;for(const c of o)c.hunger>=a&&(a=c.hunger,l=c);return l?(r.set("targetChild",l),I.SUCCESS):I.FAILURE},D_=(e,n,r)=>{const o=r.get("targetChild");return o?X(e.position,o.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>ao?(e.activeAction="moving",e.target=o.id,e.direction=jt(e.position,o.position,n.gameState.mapDimensions),I.RUNNING):(e.activeAction="feeding",e.target=void 0,r.set("targetChild",void 0),I.SUCCESS):I.FAILURE};function k_(e){return new pe([new ie(n=>(n.isAdult&&n.gender==="female"&&n.hunger<80&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child (Female Only)",e+1),new ae(N_,"Find Hungriest Prey Child",e+1),new ae(D_,"Move To Child and Feed",e+1)],"Feed Prey Child",e)}function M_(e){return new pe([new ie(n=>!n.isAdult&&n.hunger>=$l,"Is Hungry Prey Child",e+1),new ae((n,r,o)=>{if(!n.motherId)return I.FAILURE;const l=r.gameState.entities.entities.get(n.motherId);return l?(o.set("targetParent",l),I.SUCCESS):I.FAILURE},"Find Female Parent",e+1),new ae((n,r,o)=>{const l=o.get("targetParent");if(!l)return I.FAILURE;const a=X(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",a<=ao?(n.target=void 0,I.SUCCESS):(n.target=l.id,n.activeAction="moving",I.RUNNING)},"Move To Female Parent",e+1)],"Seek Food From Female Parent",e)}function O_(e){return new pe([new ie((n,r,o)=>{if(!n.isAdult)return[!1,"Not an adult"];if(n.hunger<=50||n.huntCooldown&&n.huntCooldown>0)return!1;const l=Ne(n,r.gameState,"prey",xr*10,a=>a.hitpoints>0);if(l){const a=X(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(a<=xr)return o.set("huntTarget",l),!0;if(a<=xr*10)return o.set("huntTarget",l),o.set("needToApproach",!0),!0}return!1},"Find Prey Target",e+1),new Pl(new ae((n,r,o)=>{const l=o.get("huntTarget"),a=o.get("needToApproach");if(!l||l.hitpoints<=0)return I.FAILURE;const c=X(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=xr)return n.activeAction="attacking",n.attackTargetId=l.id,n.target=l.id,n.direction={x:0,y:0},o.delete("needToApproach"),I.RUNNING;if(a||c>xr){n.activeAction="moving",n.target=l.id;const d=ze(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=et(d),I.RUNNING}return I.FAILURE},"Hunt or Approach Prey",e+2),10,"Hunt Timeout (10 hour)",e+1)],"Predator Hunt",e)}function F_(e){return new pe([new ie((n,r,o)=>{const l=n.hunger>100,a=n.hitpoints<n.maxHitpoints*.5;if(!l&&!a||n.attackCooldown&&n.attackCooldown>0)return!1;const c=Ne(n,r.gameState,"human",Tn*2,d=>d.hitpoints>0);if(c){const d=X(n.position,c.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(d<=Tn)return o.set("attackTarget",c),!0;if(l&&d<=Tn*2)return o.set("attackTarget",c),o.set("needToApproach",!0),!0}return!1},"Find Human Target",e+1),new ae((n,r,o)=>{const l=o.get("attackTarget"),a=o.get("needToApproach");if(!l||l.hitpoints<=0)return I.FAILURE;const c=X(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Tn)return n.activeAction="attacking",n.attackTargetId=l.id,n.target=l.id,n.direction={x:0,y:0},o.delete("needToApproach"),I.RUNNING;if(a||c>Tn){n.activeAction="moving",n.target=l.id;const d=ze(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=et(d),I.RUNNING}return I.FAILURE},"Attack or Approach Human",e+1)],"Predator Attack Human",e)}function U_(e){const n=new ie((a,c,d)=>{const h=Ne(a,c.gameState,"predator",Mi,p=>p.id!==a.id&&p.gender!==a.gender&&!!p.isAdult&&p.age>=cs&&p.age<=Zc&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return h?(d.set("procreationPartner",h),!0):!1},"Find Immediate Partner",e+2),r=new ae((a,c,d)=>{const h=d.get("procreationPartner");return h?(a.activeAction="procreating",a.target=h.id,a.direction={x:0,y:0},d.delete("procreationPartner"),I.SUCCESS):I.FAILURE},"Start Procreating",e+2),o=new ie((a,c,d)=>{const h=Ne(a,c.gameState,"predator",Mi*10,p=>p.id!==a.id&&p.gender!==a.gender&&!!p.isAdult&&p.age>=cs&&p.age<=Zc&&!p.isPregnant&&(!p.procreationCooldown||p.procreationCooldown<=0)&&p.hunger<200);return h?(d.set("procreationPartner",h),!0):!1},"Locate Distant Partner",e+2),l=new ae((a,c,d)=>{const h=d.get("procreationPartner");if(!h)return I.FAILURE;if(X(a.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height)<=Mi)return I.SUCCESS;a.activeAction="moving",a.target=h.id;const m=ze(a.position,h.position,c.gameState.mapDimensions.width,c.gameState.mapDimensions.height);return a.direction=et(m),I.RUNNING},"Move Towards Partner",e+2);return new pe([new ie(a=>!!(a.isAdult&&!a.isPregnant&&a.age>=cs&&a.age<=Zc&&a.hunger<200&&(!a.procreationCooldown||a.procreationCooldown<=0)),"Is Fertile and Ready",e+1),new _n([new pe([n,r],"Procreate With Immediate Partner",e+2),new pe([o,l],"Seek Distant Partner",e+2)],"Find Partner And Procreate",e+1)],"Predator Procreate",e)}const L_=(e,n,r)=>{const o=n.gameState.search.predator.byProperty("motherId",e.id).filter(c=>!c.isAdult&&c.type==="predator");if(o.length===0)return I.FAILURE;let l=null,a=$l;for(const c of o)c.hunger>=a&&(a=c.hunger,l=c);return l?(r.set("targetChild",l),I.SUCCESS):I.FAILURE},H_=(e,n,r)=>{const o=r.get("targetChild");return o?X(e.position,o.position,n.gameState.mapDimensions.width,n.gameState.mapDimensions.height)>ao?(e.activeAction="moving",e.target=o.id,e.direction=jt(e.position,o.position,n.gameState.mapDimensions),I.RUNNING):(e.activeAction="feeding",e.target=void 0,r.set("targetChild",void 0),I.SUCCESS):I.FAILURE};function B_(e){return new pe([new ie(n=>(n.isAdult&&n.gender==="female"&&n.hunger<90&&(!n.feedChildCooldownTime||n.feedChildCooldownTime<=0))??!1,"Can Feed Child (Female Only)",e+1),new ae(L_,"Find Hungriest Predator Child",e+1),new ae(H_,"Move To Child and Feed",e+1)],"Feed Predator Child",e)}function G_(e){return new pe([new ie(n=>!n.isAdult&&n.hunger>=$l,"Is Hungry Predator Child",e+1),new ae((n,r,o)=>{if(!n.motherId)return I.FAILURE;const l=r.gameState.entities.entities.get(n.motherId);return l?(o.set("targetParent",l),I.SUCCESS):I.FAILURE},"Find Female Parent",e+1),new ae((n,r,o)=>{const l=o.get("targetParent");if(!l)return I.FAILURE;const a=X(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.activeAction="idle",a<=ao?(n.target=void 0,I.SUCCESS):(n.target=l.id,n.activeAction="moving",I.RUNNING)},"Move To Female Parent",e+1)],"Seek Food From Female Parent",e)}function nv(e){return new ae((n,r,o)=>{n.activeAction="idle";let l=o.get("wanderTarget"),a=o.get("wanderStartTime");const c=r.gameState.time;if(!l||!a||c-a>2){const d=Math.random()*2*Math.PI,h=50+Math.random()*100,p={x:Math.cos(d),y:Math.sin(d)},m=bn(n.position,Tt(p,h));l={x:(m.x%r.gameState.mapDimensions.width+r.gameState.mapDimensions.width)%r.gameState.mapDimensions.width,y:(m.y%r.gameState.mapDimensions.height+r.gameState.mapDimensions.height)%r.gameState.mapDimensions.height},o.set("wanderTarget",l),o.set("wanderStartTime",c)}if(l){n.target=l;let d=l.x-n.position.x,h=l.y-n.position.y;const p=r.gameState.mapDimensions.width,m=r.gameState.mapDimensions.height;Math.abs(d)>p/2&&(d=d>0?d-p:d+p),Math.abs(h)>m/2&&(h=h>0?h-m:h+m);const y=et({x:d,y:h});n.direction=y}return I.SUCCESS},"Animal Wander",e)}function x_(e){return new pe([new ie((n,r,o)=>{if(n.hunger>90||n.hitpoints<n.maxHitpoints*.3||n.activeAction==="grazing"||n.activeAction==="procreating")return!1;const l=r.gameState.entities.entities.values(),a=[];for(const c of l)if(c.type==="prey"&&c.id!==n.id){const d=c;d.hitpoints>0&&d.isAdult&&X(n.position,d.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)<=Ht*5&&a.push(d)}if(a.length>=2){let c=0,d=0;for(const m of a)c+=m.position.x,d+=m.position.y;c/=a.length,d/=a.length;const h={x:c,y:d};if(X(n.position,h,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Ht*2)return o.set("herdCenter",h),o.set("herdSize",a.length),!0}return!1},"Find Herd",e+1),new ae((n,r,o)=>{const l=o.get("herdCenter");if(!l)return I.FAILURE;if(X(n.position,l,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Ht*2){n.activeAction="moving",n.target=l;const c=ze(n.position,l,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=et(c),I.RUNNING}else return n.activeAction="idle",n.direction={x:0,y:0},I.SUCCESS},"Join Herd",e+1)],"Prey Herd Behavior",e)}function b_(e){return new pe([new ie((n,r,o)=>{if(n.hunger>100||n.hitpoints<n.maxHitpoints*.4||n.activeAction==="attacking"||n.activeAction==="procreating")return!1;const l=Ne(n,r.gameState,"predator",Mi*4,a=>a.id!==n.id&&a.hitpoints>0&&a.isAdult&&n.fatherId!==void 0&&a.fatherId===n.fatherId&&a.age>=n.age||a.hitpoints>n.hitpoints);return l&&X(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Mi*2?(o.set("packLeader",l),!0):!1},"Find Pack Leader",e+1),new ae((n,r,o)=>{const l=o.get("packLeader");if(!l||l.hitpoints<=0)return I.FAILURE;if(X(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height)>Mi*2){n.activeAction="moving",n.target=l.id;const c=ze(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=et(c),I.RUNNING}else return n.activeAction="idle",n.direction={x:0,y:0},I.SUCCESS},"Follow Pack Leader",e+1)],"Predator Pack Behavior",e)}function $_(e){return new pe([new ie((n,r,o)=>{if(!n.isAdult||n.hitpoints<n.maxHitpoints*.6||n.hunger>120||n.attackCooldown&&n.attackCooldown>0)return!1;const l=Ne(n,r.gameState,"predator",um,a=>!!(a.id!==n.id&&a.hitpoints>0&&a.isAdult&&n.fatherId!==a.fatherId&&n.gender===a.gender&&n.fatherId!==void 0&&a.fatherId!==void 0));if(l){const a=X(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(a<=Tn)return o.set("territorialTarget",l),!0;if(a<=um)return o.set("territorialTarget",l),o.set("needToApproach",!0),!0}return!1},"Find Territorial Rival",e+1),new ae((n,r,o)=>{const l=o.get("territorialTarget"),a=o.get("needToApproach");if(!l||l.hitpoints<=0)return I.FAILURE;const c=X(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);if(c<=Tn)return n.activeAction="attacking",n.attackTargetId=l.id,n.target=l.id,n.direction={x:0,y:0},o.delete("needToApproach"),I.RUNNING;if(a||c>Tn){n.activeAction="moving",n.target=l.id;const d=ze(n.position,l.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height);return n.direction=et(d),I.RUNNING}return I.FAILURE},"Territorial Fight or Approach",e+1)],"Predator Territorial Defense",e)}function z_(){const e=new _n([e_(2),m_(2),__(2),p_(2),v_(2),y_(2),A_(2),new Jo(c_(3),"Gated Leader Combat Strategy",2),new Jo(w_(3),"Gated Diplomacy",2),d_(2),new Ji(r_(3),"attack","Gated Attacking",2),JE(2),new Pl(new Ji(t_(4),"gathering","Gated Gathering",3),_d,"Timeout Gathering",2),new Ji(a_(3),"feedChildren","Gated Feed Child",2),l_(2),new Pl(new Ji(u_(4),"planting","Gated Planting",3),_d,"Timeout Planting",2),new Ji(E_(3),"attack","Gated Hunt Prey",2),new Ji(i_(3),"procreation","Gated Procreation",2),new Ds(g_(3),Cd,"Cache Tribe Split",2),new Jo(I_(3),"Gated Tribe Migration",2),new Ds(f_(3),Cd,"Cache Establish Territory",2),new Ji(T_(3),"followLeader","Gated Follow Leader",2),new Jo(h_(2),"Gated Follow Patriarch",2),new Jo(n_(2),"Gated Idle Wander",2)],"AI Root Selector",1);return new ZE(e,"Manual Control Gate",0)}function W_(){return new _n([C_(1),k_(1),M_(1),R_(1),P_(1),x_(1),nv(1)],"Prey Behavior Root",0)}function Y_(){return new _n([O_(1),F_(1),B_(1),G_(1),$_(1),U_(1),b_(1),nv(1)],"Predator Behavior Root",0)}class vf{constructor(){Ie(this,"data",new Map);Ie(this,"nodeExecutionData",new Map)}set(n,r){this.data.set(n,r)}get(n){return this.data.get(n)}delete(n){this.data.delete(n)}has(n){return this.data.has(n)}recordNodeExecution(n,r,o,l,a){const c=this.nodeExecutionData.get(n)||{lastExecuted:0,status:I.FAILURE,depth:0,debugInfo:"",executionHistory:[]},d=c.executionHistory[c.executionHistory.length-1];d&&o-(d==null?void 0:d.time)>Is&&c.executionHistory.push({time:d.time+Is,status:I.NOT_EVALUATED}),c.executionHistory.push({time:o,status:r});const h=k0/Xt*Vt,p=o-h;c.executionHistory=c.executionHistory.filter(y=>y.time>=p);const m={...c,lastExecuted:o,status:r,depth:l,debugInfo:a};this.nodeExecutionData.set(n,m)}getNodeExecutionData(){return this.nodeExecutionData}cleanupOldEntries(n){const r=vT,o=[];for(const[l,a]of this.nodeExecutionData.entries())n-a.lastExecuted>r&&o.push(l);for(const l of o)this.nodeExecutionData.delete(l)}}function j_(e){e.gameState.entities.entities.forEach(r=>{KE(r,e)})}function iv(){return{entities:new Map,nextEntityId:1}}function Fs(e,n,r){const o={id:e.nextEntityId++,type:n,velocity:{x:0,y:0},direction:{x:0,y:0},acceleration:0,forces:[],debuffs:[],...r};return e.entities.set(o.id,o),o}function Us(e,n,r){return Fs(e,"berryBush",{position:n,radius:Ed,food:Array.from({length:RA},()=>({type:ti.Berry})).map(l=>({...l,id:e.nextEntityId++})),maxFood:CA,lifespan:NA,age:0,spreadRadius:Ed,timeSinceLastBerryRegen:0,timeSinceLastSpreadAttempt:0,timeSinceLastHarvest:0,stateMachine:[ls,{enteredAt:r,previousState:void 0}]})}function Nl(e,n,r,o,l=!1,a=FA,c=p0,d,h,p=[],m,y){const S=a>=bd;return Fs(e,"human",{position:n,radius:S?vt:so,hunger:c,hitpoints:Bp,maxHitpoints:Bp,age:a,gender:o,isPlayer:l,food:[],maxFood:g0,maxAge:As,isAdult:S,isPregnant:!1,gestationTime:0,procreationCooldown:0,attackCooldown:0,motherId:d,fatherId:h,ancestorIds:p,stateMachine:[At,{enteredAt:r,previousState:void 0}],leaderId:m,tribeBadge:y,aiType:Os.BehaviorTreeBased,aiBehaviorTree:z_(),aiBlackboard:new vf})}function yf(e,n,r,o,l,a,c,d,h,p,m){let y,S;switch(c){case"human":y=y0,S=lr;break;case"prey":y=2,S=120;break;case"predator":y=4,S=140;break}return Fs(e,"corpse",{position:n,radius:l,gender:r,age:o,originalEntityId:a,originalEntityType:c,timeOfDeath:d,decayProgress:0,geneCode:m,food:[...Array.from({length:Math.max(y*Math.max(S-p,0)/S,0)},()=>({type:ti.Meat})),...h].map(P=>({...P,id:e.nextEntityId++})),stateMachine:void 0})}function V_(e,n,r,o,l,a,c,d,h){return yf(e,n,r,o,l,a,"human",c,d,h)}function X_(e,n,r,o,l,a,c,d){return yf(e,n,r,o,l,a,"prey",c,[],0,d)}function K_(e,n,r,o,l,a,c,d){return yf(e,n,r,o,l,a,"predator",c,[],0,d)}function Q_(e,n,r){const o=n?r.gameState.entities.entities.get(n):void 0,l=[...e.ancestorIds||[],e.id],a=o?[...o.ancestorIds||[],o.id]:[],c=[...l,...a],d=[...new Set(c)],h=d.slice(Math.max(d.length-DA,0)),p=Math.random()<.5?"male":"female",m=bn(e.position,{x:5,y:5}),y=Nl(r.gameState.entities,m,r.gameState.time,p,!1,0,p0/2,e.id,n,h,(o==null?void 0:o.leaderId)??e.leaderId,(o==null?void 0:o.tribeBadge)??e.tribeBadge);return Me(r,Ae.Birth,e.position),y}function Ls(e,n){return e.entities.get(n)?(e.entities.delete(n),!0):!1}function io(e,n,r,o=mw,l=B0,a,c,d){const h=o>=us,p=Date.now();return Fs(e,"prey",{position:n,radius:h?vt*.7:so*.7,hunger:l,hitpoints:am,maxHitpoints:am,age:o,maxAge:H0,gender:r,isAdult:h,isPregnant:!1,gestationTime:0,procreationCooldown:0,geneCode:a,motherId:c,fatherId:d,stateMachine:[In,{enteredAt:p,previousState:void 0}],aiType:Os.BehaviorTreeBased,aiBehaviorTree:W_(),aiBlackboard:new vf})}function ro(e,n,r,o=Ew,l=x0,a,c,d){const h=o>=cs,p=Date.now();return Fs(e,"predator",{position:n,radius:h?vt*.9:so*.9,hunger:l,hitpoints:lm,maxHitpoints:lm,age:o,maxAge:G0,gender:r,isAdult:h,isPregnant:!1,gestationTime:0,procreationCooldown:0,geneCode:a,motherId:c,fatherId:d,stateMachine:[Ut,{enteredAt:p,previousState:void 0}],aiType:Os.BehaviorTreeBased,aiBehaviorTree:Y_(),aiBlackboard:new vf})}class q_{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(n,r){let o=this.length++;for(;o>0;){const l=o-1>>1,a=this.values[l];if(r>=a)break;this.ids[o]=this.ids[l],this.values[o]=a,o=l}this.ids[o]=n,this.values[o]=r}pop(){if(this.length===0)return;const n=this.ids[0];if(this.length--,this.length>0){const r=this.ids[0]=this.ids[this.length],o=this.values[0]=this.values[this.length],l=this.length>>1;let a=0;for(;a<l;){let c=(a<<1)+1;const d=c+1;let h=this.ids[c],p=this.values[c];const m=this.values[d];if(d<this.length&&m<p&&(c=d,h=this.ids[d],p=m),p>=o)break;this.ids[a]=h,this.values[a]=p,a=c}this.ids[a]=r,this.values[a]=o}return n}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}const Sm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],dd=3;class Sf{static from(n,r=0){if(r%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!n||n.byteLength===void 0||n.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[o,l]=new Uint8Array(n,r+0,2);if(o!==251)throw new Error("Data does not appear to be in a Flatbush format.");const a=l>>4;if(a!==dd)throw new Error(`Got v${a} data when expected v${dd}.`);const c=Sm[l&15];if(!c)throw new Error("Unrecognized array type.");const[d]=new Uint16Array(n,r+2,1),[h]=new Uint32Array(n,r+4,1);return new Sf(h,d,c,void 0,n,r)}constructor(n,r=16,o=Float64Array,l=ArrayBuffer,a,c=0){if(n===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(n)||n<=0)throw new Error(`Unexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+r,2),65535),this.byteOffset=c;let d=n,h=d;this._levelBounds=[d*4];do d=Math.ceil(d/this.nodeSize),h+=d,this._levelBounds.push(h*4);while(d!==1);this.ArrayType=o,this.IndexArrayType=h<16384?Uint16Array:Uint32Array;const p=Sm.indexOf(this.ArrayType),m=h*4*this.ArrayType.BYTES_PER_ELEMENT;if(p<0)throw new Error(`Unexpected typed array class: ${o}.`);a&&a.byteLength!==void 0&&!a.buffer?(this.data=a,this._boxes=new this.ArrayType(this.data,c+8,h*4),this._indices=new this.IndexArrayType(this.data,c+8+m,h),this._pos=h*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1]):(this.data=new l(8+m+h*this.IndexArrayType.BYTES_PER_ELEMENT),this._boxes=new this.ArrayType(this.data,8,h*4),this._indices=new this.IndexArrayType(this.data,8+m,h),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(this.data,0,2).set([251,(dd<<4)+p]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=n),this._queue=new q_}add(n,r,o=n,l=r){const a=this._pos>>2,c=this._boxes;return this._indices[a]=a,c[this._pos++]=n,c[this._pos++]=r,c[this._pos++]=o,c[this._pos++]=l,n<this.minX&&(this.minX=n),r<this.minY&&(this.minY=r),o>this.maxX&&(this.maxX=o),l>this.maxY&&(this.maxY=l),a}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const n=this._boxes;if(this.numItems<=this.nodeSize){n[this._pos++]=this.minX,n[this._pos++]=this.minY,n[this._pos++]=this.maxX,n[this._pos++]=this.maxY;return}const r=this.maxX-this.minX||1,o=this.maxY-this.minY||1,l=new Uint32Array(this.numItems),a=65535;for(let c=0,d=0;c<this.numItems;c++){const h=n[d++],p=n[d++],m=n[d++],y=n[d++],S=Math.floor(a*((h+m)/2-this.minX)/r),E=Math.floor(a*((p+y)/2-this.minY)/o);l[c]=J_(S,E)}kd(l,n,this._indices,0,this.numItems-1,this.nodeSize);for(let c=0,d=0;c<this._levelBounds.length-1;c++){const h=this._levelBounds[c];for(;d<h;){const p=d;let m=n[d++],y=n[d++],S=n[d++],E=n[d++];for(let P=1;P<this.nodeSize&&d<h;P++)m=Math.min(m,n[d++]),y=Math.min(y,n[d++]),S=Math.max(S,n[d++]),E=Math.max(E,n[d++]);this._indices[this._pos>>2]=p,n[this._pos++]=m,n[this._pos++]=y,n[this._pos++]=S,n[this._pos++]=E}}}search(n,r,o,l,a){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let c=this._boxes.length-4;const d=[],h=[];for(;c!==void 0;){const p=Math.min(c+this.nodeSize*4,Tm(c,this._levelBounds));for(let m=c;m<p;m+=4){if(o<this._boxes[m]||l<this._boxes[m+1]||n>this._boxes[m+2]||r>this._boxes[m+3])continue;const y=this._indices[m>>2]|0;c>=this.numItems*4?d.push(y):(a===void 0||a(y))&&h.push(y)}c=d.pop()}return h}neighbors(n,r,o=1/0,l=1/0,a){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let c=this._boxes.length-4;const d=this._queue,h=[],p=l*l;e:for(;c!==void 0;){const m=Math.min(c+this.nodeSize*4,Tm(c,this._levelBounds));for(let y=c;y<m;y+=4){const S=this._indices[y>>2]|0,E=Am(n,this._boxes[y],this._boxes[y+2]),P=Am(r,this._boxes[y+1],this._boxes[y+3]),_=E*E+P*P;_>p||(c>=this.numItems*4?d.push(S<<1,_):(a===void 0||a(S))&&d.push((S<<1)+1,_))}for(;d.length&&d.peek()&1;)if(d.peekValue()>p||(h.push(d.pop()>>1),h.length===o))break e;c=d.length?d.pop()>>1:void 0}return d.clear(),h}}function Am(e,n,r){return e<n?n-e:e<=r?0:e-r}function Tm(e,n){let r=0,o=n.length-1;for(;r<o;){const l=r+o>>1;n[l]>e?o=l:r=l+1}return n[r]}function kd(e,n,r,o,l,a){if(Math.floor(o/a)>=Math.floor(l/a))return;const c=e[o+l>>1];let d=o-1,h=l+1;for(;;){do d++;while(e[d]<c);do h--;while(e[h]>c);if(d>=h)break;Z_(e,n,r,d,h)}kd(e,n,r,o,h,a),kd(e,n,r,h+1,l,a)}function Z_(e,n,r,o,l){const a=e[o];e[o]=e[l],e[l]=a;const c=4*o,d=4*l,h=n[c],p=n[c+1],m=n[c+2],y=n[c+3];n[c]=n[d],n[c+1]=n[d+1],n[c+2]=n[d+2],n[c+3]=n[d+3],n[d]=h,n[d+1]=p,n[d+2]=m,n[d+3]=y;const S=r[o];r[o]=r[l],r[l]=S}function J_(e,n){let r=e^n,o=65535^r,l=65535^(e|n),a=e&(n^65535),c=r|o>>1,d=r>>1^r,h=l>>1^o&a>>1^l,p=r&l>>1^a>>1^a;r=c,o=d,l=h,a=p,c=r&r>>2^o&o>>2,d=r&o>>2^o&(r^o)>>2,h^=r&l>>2^o&a>>2,p^=o&l>>2^(r^o)&a>>2,r=c,o=d,l=h,a=p,c=r&r>>4^o&o>>4,d=r&o>>4^o&(r^o)>>4,h^=r&l>>4^o&a>>4,p^=o&l>>4^(r^o)&a>>4,r=c,o=d,l=h,a=p,h^=r&l>>8^o&a>>8,p^=o&l>>8^(r^o)&a>>8,r=h^h>>1,o=p^p>>1;let m=e^n,y=o|65535^(m|r);return m=(m|m<<8)&16711935,m=(m|m<<4)&252645135,m=(m|m<<2)&858993459,m=(m|m<<1)&1431655765,y=(y|y<<8)&16711935,y=(y|y<<4)&252645135,y=(y|y<<2)&858993459,y=(y|y<<1)&1431655765,(y<<1|m)>>>0}function ts(e,n){if(e.length===0)return{byRect:()=>[],byRadius:()=>[],byProperty:()=>[],resetPropertyCache:()=>{},count:()=>0};const r=new Sf(e.length),o=new Map;for(const a of e)r.add(a.position.x,a.position.y,a.position.x,a.position.y);return r.finish(),{byRect(a){return r.search(a.left,a.top,a.right,a.bottom).map(d=>e[d])},byRadius(a,c){return r.neighbors(a.x,a.y,void 0,c).map(h=>e[h])},byProperty(a,c){var d;if(!o.has(a)){const h=new Map;for(const p of e){const m=p[a];h.has(m)||h.set(m,[]),h.get(m).push(p)}o.set(a,h)}return((d=o.get(a))==null?void 0:d.get(c))||[]},resetPropertyCache(){o.clear()},count(){return e.length}}}function Af(e){const n=Array.from(e.entities.entities.values()),r=n.filter(h=>h.type==="human"),o=n.filter(h=>h.type==="berryBush"),l=n.filter(h=>h.type==="corpse"),a=n.filter(h=>h.type==="prey"),c=n.filter(h=>h.type==="predator");return{...e,search:{human:ts(r),berryBush:ts(o),corpse:ts(l),prey:ts(a),predator:ts(c)}}}var Ot=(e=>(e.MOVE="MOVE",e.HUNGER="HUNGER",e.EAT="EAT",e.FIND_BUSH="FIND_BUSH",e.GATHER="GATHER",e.PROCREATE="PROCREATE",e.PLANT_BUSH="PLANT_BUSH",e.AUTOPILOT="AUTOPILOT",e.ANIMALS_INTRODUCTION="ANIMALS_INTRODUCTION",e.HUNT_PREY="HUNT_PREY",e.DEFEND_FROM_PREDATORS="DEFEND_FROM_PREDATORS",e))(Ot||{}),ar=(e=>(e.HUNGER_BAR="HUNGER_BAR",e.FOOD_BAR="FOOD_BAR",e.COMMAND_BUTTONS="COMMAND_BUTTONS",e))(ar||{}),Ft=(e=>(e[e.FADING_IN=0]="FADING_IN",e[e.ACTIVE=1]="ACTIVE",e[e.FADING_OUT=2]="FADING_OUT",e[e.INACTIVE=3]="INACTIVE",e))(Ft||{});const e1=[{key:Ot.MOVE,title:"Movement",text:"Use WASD or Arrow Keys to move your character around the world.",condition:e=>e.hasPlayerMovedEver||e.hasPlayerEnabledAutopilot>2,isCompleted:!1},{key:Ot.HUNGER,title:"Hunger",text:"Your character gets hungry over time. Watch the hunger bar!",condition:(e,n)=>n.hunger>kA,isCompleted:!1,minDisplayTime:im,highlightedUIElements:[ar.HUNGER_BAR]},{key:Ot.FIND_BUSH,title:"Find Food",text:"Look for berry bushes. They are your primary source of food.",condition:(e,n)=>!!Ne(n,e,"berryBush",mt*5,o=>o.food.length>0),getTargets:(e,n)=>{const r=[];for(const o of e.entities.entities.values())o.type==="berryBush"&&o.food.length>0&&X(n.position,o.position,e.mapDimensions.width,e.mapDimensions.height)<500&&r.push(o);return r.map(o=>o.id)},isCompleted:!1,minDisplayTime:im},{key:Ot.GATHER,title:"Gather Berries",text:"Get close to a bush and press 'E' to gather berries.",condition:(e,n)=>n.food.length>0,getTargets:(e,n)=>{const r=Ne(n,e,"berryBush",mt,o=>o.food.length>0);return r?[r.id]:[]},isCompleted:!1},{key:Ot.EAT,title:"Eat",text:"When you are hungry and have food, press 'F' to eat.",condition:(e,n)=>n.activeAction==="eating",isCompleted:!1,highlightedUIElements:[ar.FOOD_BAR]},{key:Ot.PROCREATE,title:"Procreate",text:"Find a mate and press 'R' to start a family. This is how you continue your lineage.",condition:(e,n)=>It(e,n).length>0,getTargets:(e,n)=>{const r=Ne(n,e,"human",mt,o=>cr(n,o,e));return r?[r.id]:[]},isCompleted:!1},{key:Ot.PLANT_BUSH,title:"Farming",text:"You can plant new berry bushes. Carry some berries and press 'B' to plant.",condition:(e,n)=>pf(e,n).some(o=>o.type===we.Plant)||e.hasPlayerPlantedBush===!0,isCompleted:!1},{key:Ot.AUTOPILOT,title:"Autopilot!",text:"You can turn autopilot for specific actions, press Shift and click on the action button to enable it.",condition:e=>e.hasPlayerEnabledAutopilot>2,highlightedUIElements:[ar.COMMAND_BUTTONS],isCompleted:!1},{key:Ot.ANIMALS_INTRODUCTION,title:"Wild Animals!",text:"Your world now has wild animals! Prey provide meat when hunted, but beware of predators that may attack.",condition:e=>Array.from(e.entities.entities.values()).some(r=>r.type==="prey"||r.type==="predator"),isCompleted:!1,dependsOn:Ot.AUTOPILOT},{key:Ot.HUNT_PREY,title:"Hunt for Meat",text:"Click on prey animals to hunt them for meat. Hunting provides more food than gathering berries!",condition:(e,n)=>{const r=Ne(n,e,"prey",150);return n.hunger>40&&!!r},getTargets:(e,n)=>{const r=Ne(n,e,"prey",150);return r?[r.id]:[]},isCompleted:!1,dependsOn:Ot.ANIMALS_INTRODUCTION},{key:Ot.DEFEND_FROM_PREDATORS,title:"Predators",text:"Predators may attack when hungry! Click on them to fight back. Fighting together with family is more effective.",condition:(e,n)=>!!Ne(n,e,"predator",120),getTargets:(e,n)=>{const r=Ne(n,e,"predator",120);return r?[r.id]:[]},isCompleted:!1,dependsOn:Ot.HUNT_PREY}];function rv(){return{steps:e1.map(e=>({...e,isCompleted:!1}))}}function ov(){return{currentStepIndex:0,completedSteps:new Set,isActive:!0,transitionState:Ft.FADING_IN,transitionAlpha:0,highlightedEntityIds:new Set,stepStartTime:null,activeUIHighlights:new Set}}function t1(e){for(let n=0;n<e.tutorial.steps.length;n++){const r=e.tutorial.steps[n];if(!r.isCompleted)if(r.dependsOn){if(e.tutorialState.completedSteps.has(r.dependsOn))return n}else return n}return null}function n1(e,n){const r=e.tutorialState;if(!r.isActive){r.transitionState=Ft.INACTIVE,r.highlightedEntityIds.clear(),r.activeUIHighlights.clear();return}const o=wt(e);if(!o){r.isActive=!1,r.transitionState=Ft.INACTIVE,r.highlightedEntityIds.clear(),r.activeUIHighlights.clear();return}const l=e.tutorial.steps[r.currentStepIndex];if(!l){r.isActive=!1,r.transitionState=Ft.INACTIVE,r.highlightedEntityIds.clear(),r.activeUIHighlights.clear();return}const a=1/$I;switch(r.transitionState){case Ft.FADING_IN:r.stepStartTime===null&&(r.stepStartTime=e.time),r.transitionAlpha+=a*n,r.transitionAlpha>=1&&(r.transitionAlpha=1,r.transitionState=Ft.ACTIVE);break;case Ft.ACTIVE:{e.time-(r.stepStartTime||e.time)>=(l.minDisplayTime||0)&&l.condition(e,o)&&(l.isCompleted=!0,r.completedSteps.add(l.key),r.transitionState=Ft.FADING_OUT);break}case Ft.FADING_OUT:if(r.transitionAlpha-=a*n,r.transitionAlpha<=0){r.transitionAlpha=0,r.stepStartTime=null;const d=t1(e);d!==null?(r.currentStepIndex=d,r.transitionState=Ft.FADING_IN):(r.isActive=!1,r.transitionState=Ft.INACTIVE)}break}r.transitionState!==Ft.FADING_OUT&&r.transitionState!==Ft.INACTIVE?(l.getTargets?r.highlightedEntityIds=new Set(l.getTargets(e,o)):r.highlightedEntityIds.clear(),l.highlightedUIElements?r.activeUIHighlights=new Set(l.highlightedUIElements):r.activeUIHighlights.clear()):(r.highlightedEntityIds.clear(),r.activeUIHighlights.clear())}function i1(){const e=iv(),n=0;for(let y=0;y<d0;y++){const S={x:Math.random()*Ze,y:Math.random()*Je};Us(e,S,n)}const r=Ze/2,o=Je/2,l=Nl(e,{x:r,y:o},n,"male",!0);Nl(e,{x:r+50,y:o},n,"female",!1);for(let y=0;y<z0;y++){const S={x:r+Ze*(Math.random()-Math.random()),y:o+Je*(Math.random()-Math.random())};io(e,S,"male",void 0,void 0,Ps()),io(e,{x:S.x+20,y:S.y},"female",void 0,void 0,Ps())}const a={x:r+Ze*(Math.random()-Math.random()),y:o+Je*(Math.random()-Math.random())};ro(e,a,"male",void 0,void 0,Ns()),ro(e,{x:a.x+20,y:a.y},"female",void 0,void 0,Ns());const c=[{id:"muteButton",action:Ue.ToggleMute,currentWidth:Yr,rect:{x:0,y:0,width:0,height:0},text:"",backgroundColor:"",textColor:jr},{id:"pauseButton",action:Ue.TogglePause,currentWidth:Yr,rect:{x:0,y:0,width:0,height:0},text:"",backgroundColor:"",textColor:jr}],d=rv(),h=ov(),p={time:n,entities:e,mapDimensions:{width:Ze,height:Je},generationCount:1,gameOver:!1,visualEffects:[],nextVisualEffectId:0,viewportCenter:{...l.position},isPaused:!1,autopilotControls:{behaviors:{procreation:!1,planting:!1,gathering:!1,attack:!1,feedChildren:!0,followLeader:!1},hoveredAutopilotAction:void 0,activeAutopilotAction:void 0,isManuallyMoving:!1},hasPlayerMovedEver:!1,hasPlayerPlantedBush:!1,hasPlayerEnabledAutopilot:0,masterVolume:L0,isMuted:!1,uiButtons:c,tutorial:d,tutorialState:h,hoveredButtonId:void 0,mousePosition:{x:0,y:0},notifications:[{id:"welcome",type:_s.Hello,message:"Welcome to the game!",duration:50,targetEntityIds:[l.id],highlightedEntityIds:[l.id],timestamp:0,isDismissed:!1,creationTime:Date.now()}],ecosystem:{preyGestationPeriod:Zd,preyProcreationCooldown:Jd,predatorGestationPeriod:ef,predatorProcreationCooldown:tf,preyHungerIncreasePerHour:nf,predatorHungerIncreasePerHour:rf,berryBushSpreadChance:of}},m=Af(p);return console.log("Game world initialized:",m),m}function r1(){const e=iv(),n=0;for(let c=0;c<d0;c++){const d={x:Math.random()*Ze,y:Math.random()*Je};Us(e,d,n)}for(let c=0;c<KI;c++){const d={x:Math.random()*Ze,y:Math.random()*Je},h=Math.random()<.5?"male":"female";Nl(e,d,n,h,!1)}for(let c=0;c<z0;c++){const d={x:Math.random()*Ze,y:Math.random()*Je};io(e,d,"male",void 0,void 0,Ps()),io(e,{x:d.x+20,y:d.y},"female",void 0,void 0,Ps())}const r={x:Math.random()*Ze,y:Math.random()*Je};ro(e,r,"male",void 0,void 0,Ns()),ro(e,{x:r.x+20,y:r.y},"female",void 0,void 0,Ns());const o=rv(),l=ov(),a={time:n,entities:e,mapDimensions:{width:Ze,height:Je},generationCount:0,gameOver:!1,visualEffects:[],nextVisualEffectId:0,viewportCenter:{x:Ze/2,y:Je/2},isPaused:!1,autopilotControls:{behaviors:{procreation:!1,planting:!1,gathering:!1,attack:!1,feedChildren:!0,followLeader:!1},hoveredAutopilotAction:void 0,activeAutopilotAction:void 0,isManuallyMoving:!1},hasPlayerMovedEver:!1,hasPlayerPlantedBush:!1,hasPlayerEnabledAutopilot:0,masterVolume:L0,isMuted:!0,uiButtons:[],tutorial:o,tutorialState:l,hoveredButtonId:void 0,mousePosition:{x:0,y:0},notifications:[],ecosystem:{preyGestationPeriod:Zd,preyProcreationCooldown:Jd,predatorGestationPeriod:ef,predatorProcreationCooldown:tf,preyHungerIncreasePerHour:nf,predatorHungerIncreasePerHour:rf,berryBushSpreadChance:of}};return Af(a)}const o1="humanProcreation",s1="human",a1="human",l1=mt,u1=(e,n,r)=>cr(e,n,r.gameState)?e.gender==="male"?e.activeAction==="procreating":e.activeAction==="procreating"&&n.activeAction==="procreating":!1,c1=(e,n,r)=>{var h,p;const{gameState:o}=r,l={x:(e.position.x+n.position.x)/2,y:(e.position.y+n.position.y)/2},a=e.gender==="male"?e:n,c=e.gender==="female"?e:n,d=(a.partnerIds||[]).length===0;if(e.stateMachine=[Rs,{partnerId:n.id,previousState:(h=e.stateMachine)==null?void 0:h[0]}],n.stateMachine=[Rs,{partnerId:e.id,previousState:(p=n.stateMachine)==null?void 0:p[0]}],e.partnerIds||(e.partnerIds=[]),e.partnerIds.includes(n.id)||e.partnerIds.push(n.id),n.partnerIds||(n.partnerIds=[]),n.partnerIds.includes(e.id)||n.partnerIds.push(e.id),d&&a.leaderId&&a.leaderId!==a.id){const m=o.entities.entities.get(a.leaderId);if(m){const y=Pd(a,m),S=Pd(c,m);if(!y&&!S){const E=Nd();a.leaderId=a.id,a.tribeBadge=E,a.diplomacy=new Map,c.leaderId=a.id,c.tribeBadge=E}}}else if(!e.leaderId&&!n.leaderId&&a&&c){const m=Nd();a.leaderId=a.id,a.tribeBadge=m,a.diplomacy=new Map,c.leaderId=a.id,c.tribeBadge=m}e.activeAction=void 0,Ce(o,se.Procreation,l,rr),Ce(o,se.Partnered,e.position,Be,e.id),Ce(o,se.Partnered,n.position,Be,n.id),e.lastPartneredEffectTime=o.time,n.lastPartneredEffectTime=o.time,n.activeAction=void 0,Me(r,Ae.Procreate,l)},d1={id:o1,sourceType:s1,targetType:a1,maxDistance:l1,checker:u1,perform:c1},f1={id:"humanChildFeeding",sourceType:"human",targetType:"human",maxDistance:zd,checker:(e,n)=>e.isAdult===!0&&e.food.length>0&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=Oi&&e.activeAction==="feeding",perform:(e,n,r)=>{e.food.pop(),n.hunger=Math.max(0,n.hunger-Oi),e.feedChildCooldownTime=$A,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(Ce(r.gameState,se.ChildFed,n.position,Be,n.id),n.lastChildFedEffectTime=r.gameState.time),Me(r,Ae.ChildFed,n.position)}},h1={id:"human-attack",sourceType:"human",targetType:"human",maxDistance:xn,checker:(e,n,r)=>{var a;if(((a=e.stateMachine)==null?void 0:a[0])!==Ui||e.attackTargetId!==n.id||(e.attackCooldown||0)>0)return!1;const o=e.stateMachine[1];return r.gameState.time-o.attackStartTime>=S0},perform:(e,n,r)=>{const o=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),l=Ow(et(o),n.direction);if(Math.abs(l)<eT*Math.PI/180&&Math.random()<tT)Ce(r.gameState,se.AttackDeflected,n.position,Be,n.id);else{let d=Wd;e.gender==="male"&&(d*=qA),e.isAdult||(d*=ZA),(!n.isAdult||n.age>=v0)&&e.isAdult&&(d*=JA),n.hitpoints-=d,n.movementSlowdown={modifier:Yd,endTime:r.gameState.time+jd},Ce(r.gameState,se.Hit,n.position,Be,n.id);const p=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),m=Tt(p,XA);n.forces.push(m),n.hitpoints<=0?Me(r,Ae.HumanDeath,n.position):Me(r,Ae.Attack,e.position)}e.attackCooldown=Gl;const c=e.stateMachine[1];c.attackStartTime=r.gameState.time,Ce(r.gameState,se.Attack,e.position,Be,e.id)}},g1={id:"human-collision",sourceType:"human",targetType:"human",maxDistance:vt*2,checker:(e,n,{gameState:r})=>X(e.position,n.position,r.mapDimensions.width,r.mapDimensions.height)<(e.radius+n.radius)/3,perform:(e,n,{gameState:r})=>{const o=X(e.position,n.position,r.mapDimensions.width,r.mapDimensions.height);if(o===0){e.forces.push({x:.1,y:0}),n.forces.push({x:-.1,y:0});return}const a=(e.radius+n.radius-o)*.05,c=et(j0(e.position,n.position)),d=Tt(c,a);e.forces.push(d),n.forces.push(Tt(d,-1))}},p1={id:"humanBerryBushGather",sourceType:"human",targetType:"berryBush",maxDistance:mt,checker:(e,n,r)=>{var o;return e.isAdult&&n.food.length>0&&((o=e.stateMachine)==null?void 0:o[0])===Wl&&e.food.length<e.maxFood&&(!e.gatheringCooldownTime||e.gatheringCooldownTime<r.gameState.time)||!1},perform:(e,n,r)=>{const o=n.food.pop();o&&e.food.push(o),e.gatheringCooldownTime=r.gameState.time+1,n.timeSinceLastHarvest=r.gameState.time,n.ownerId=e.id,n.claimedUntil=r.gameState.time+f0,Ce(r.gameState,se.BushClaimed,n.position,Be),Me(r,Ae.Gather,e.position)}},m1={id:"corpseGather",sourceType:"human",targetType:"corpse",maxDistance:mt,checker:(e,n,r)=>{var o;return e.isAdult&&n.food.length>0&&((o=e.stateMachine)==null?void 0:o[0])===Wl&&e.food.length<e.maxFood&&(!e.gatheringCooldownTime||e.gatheringCooldownTime<r.gameState.time)||!1},perform:(e,n,r)=>{const o=n.food.pop();o&&e.food.push(o),e.gatheringCooldownTime=r.gameState.time+1,Me(r,Ae.Gather,e.position)}},v1=[p1,m1],y1={id:"prey-eat-berry-bush",sourceType:"prey",targetType:"berryBush",maxDistance:Ht,checker:(e,n,r)=>!!(e.isAdult&&n.food.length>0&&e.hunger>30&&(!e.eatingCooldownTime||e.eatingCooldownTime<r.gameState.time)),perform:(e,n,r)=>{n.food.pop()&&(e.hunger=Math.max(0,e.hunger-25),n.lifespan-=Sw,n.timeSinceLastHarvest=r.gameState.time,e.eatingCooldownTime=r.gameState.time+yw,Ce(r.gameState,se.BushClaimed,n.position,Be,e.id),Me(r,Ae.Gather,e.position))}},S1={id:"predator-hunt-prey",sourceType:"predator",targetType:"prey",maxDistance:xr,checker:(e,n,r)=>!!(e.isAdult&&e.hunger>50&&(!e.huntCooldown||e.huntCooldown<=0)&&n.hitpoints>0),perform:(e,n,r)=>{n.hitpoints-=_w;const o=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),l=Tt(o,8);n.forces.push(l),e.huntCooldown=Pw,n.hitpoints<=0?(Me(r,Ae.HumanDeath,n.position),Ce(r.gameState,se.Hit,n.position,Be,n.id)):(Ce(r.gameState,se.Hit,n.position,Be,n.id),n.fleeCooldown=5,Me(r,Ae.Attack,e.position)),Ce(r.gameState,se.Attack,e.position,Be,e.id)}},A1={id:"human-hunt-prey",sourceType:"human",targetType:"prey",maxDistance:xn,checker:(e,n,r)=>{var o;return!!(((o=e.stateMachine)==null?void 0:o[0])===Ui&&e.attackTargetId===n.id&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&e.isAdult)},perform:(e,n,r)=>{let o=Wd*1.2;e.gender==="male"&&(o*=1.3),n.hitpoints-=o;const l=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),a=Tt(l,6);n.forces.push(a),e.attackCooldown=Gl,n.hitpoints<=0?(Me(r,Ae.HumanDeath,n.position),Ce(r.gameState,se.Hit,n.position,Be,n.id)):(Ce(r.gameState,se.Hit,n.position,Be,n.id),n.fleeCooldown=8,Me(r,Ae.Attack,e.position)),Ce(r.gameState,se.Attack,e.position,Be,e.id)}},T1={id:"predator-attack-human",sourceType:"predator",targetType:"human",maxDistance:Tn,checker:(e,n,r)=>{var o;return!!(e.isAdult&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&(e.hunger>100||n.attackTargetId===e.id||n.attackTargetId&&((o=r.gameState.entities.entities.get(n.attackTargetId))==null?void 0:o.type)==="predator"))},perform:(e,n,r)=>{let o=b0;e.hunger>120&&(o*=1.3),n.hitpoints-=o,n.movementSlowdown={modifier:Yd,endTime:r.gameState.time+jd};const l=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),a=Tt(l,7);n.forces.push(a),e.attackCooldown=$0,n.hitpoints<=0?(e.hunger=Math.max(0,e.hunger-qd),Me(r,Ae.HumanDeath,n.position),Ce(r.gameState,se.Hit,n.position,Be,n.id)):(Ce(r.gameState,se.Hit,n.position,Be,n.id),Me(r,Ae.Attack,e.position)),Ce(r.gameState,se.Attack,e.position,Be,e.id)}},I1={id:"human-attack-predator",sourceType:"human",targetType:"predator",maxDistance:xn,checker:(e,n,r)=>{var o;return!!(((o=e.stateMachine)==null?void 0:o[0])===Ui&&e.attackTargetId===n.id&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&e.isAdult)},perform:(e,n,r)=>{let o=Wd*.8;e.gender==="male"&&(o*=1.2);const l=Array.from(r.gameState.entities.entities.values()).filter(d=>d.type==="human"&&d.id!==e.id).filter(d=>{const h=d;return Math.sqrt(Math.pow(h.position.x-e.position.x,2)+Math.pow(h.position.y-e.position.y,2))<100&&h.activeAction==="attacking"&&h.attackTargetId===n.id}).length;l>0&&(o*=1+l*.2),n.hitpoints-=o;const a=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),c=Tt(a,8);n.forces.push(c),e.attackCooldown=Gl,n.hitpoints<=0?(Me(r,Ae.HumanDeath,n.position),Ce(r.gameState,se.Hit,n.position,Be,n.id)):(Ce(r.gameState,se.Hit,n.position,Be,n.id),n.hitpoints<n.maxHitpoints*.3&&(n.hunger+=20),Me(r,Ae.Attack,e.position)),Ce(r.gameState,se.Attack,e.position,Be,e.id)}},w1={id:"prey-procreation",sourceType:"prey",targetType:"prey",maxDistance:Ht,checker:(e,n,r)=>!!(e.isAdult&&n.isAdult&&e.gender!==n.gender&&e.id!==n.id&&!e.isPregnant&&!n.isPregnant&&e.hunger<200&&n.hunger<200&&(!e.procreationCooldown||e.procreationCooldown<=0)&&(!n.procreationCooldown||n.procreationCooldown<=0)),perform:(e,n,r)=>{const o=e.gender==="female"?e:n;o.isPregnant=!0,o.gestationTime=r.gameState.ecosystem.preyGestationPeriod,e.procreationCooldown=r.gameState.ecosystem.preyProcreationCooldown,n.procreationCooldown=r.gameState.ecosystem.preyProcreationCooldown,Ce(r.gameState,se.Procreation,o.position,Be,o.id),Me(r,Ae.Procreate,o.position)}},E1={id:"predator-procreation",sourceType:"predator",targetType:"predator",maxDistance:Mi,checker:(e,n,r)=>!!(e.isAdult&&n.isAdult&&e.gender!==n.gender&&e.id!==n.id&&!e.isPregnant&&!n.isPregnant&&e.hunger<200&&n.hunger<200&&(!e.procreationCooldown||e.procreationCooldown<=0)&&(!n.procreationCooldown||n.procreationCooldown<=0)),perform:(e,n,r)=>{const o=e.gender==="female"?e:n;o.isPregnant=!0,o.pregnancyFatherId=e.gender==="male"?e.id:n.id,o.gestationTime=r.gameState.ecosystem.predatorGestationPeriod,e.procreationCooldown=r.gameState.ecosystem.predatorProcreationCooldown,n.procreationCooldown=r.gameState.ecosystem.predatorProcreationCooldown,Ce(r.gameState,se.Procreation,o.position,Be,o.id),Me(r,Ae.Procreate,o.position)}},_1={id:"preyChildFeeding",sourceType:"prey",targetType:"prey",maxDistance:ao,checker:(e,n)=>e.isAdult===!0&&e.gender==="female"&&e.hunger<80&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=_l&&e.activeAction==="feeding",perform:(e,n,r)=>{e.hunger=Math.min(120,e.hunger+10),n.hunger=Math.max(0,n.hunger-_l),e.feedChildCooldownTime=W0,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(Ce(r.gameState,se.ChildFed,n.position,Be,n.id),n.lastChildFedEffectTime=r.gameState.time),Me(r,Ae.ChildFed,n.position)}},C1={id:"predatorChildFeeding",sourceType:"predator",targetType:"predator",maxDistance:ao,checker:(e,n)=>e.isAdult===!0&&e.gender==="female"&&e.hunger<90&&(!e.feedChildCooldownTime||e.feedChildCooldownTime<=0)&&n.isAdult===!1&&(n.motherId===e.id||n.fatherId===e.id)&&n.hunger>=_l&&e.activeAction==="feeding",perform:(e,n,r)=>{e.hunger=Math.min(140,e.hunger+15),n.hunger=Math.max(0,n.hunger-_l),e.feedChildCooldownTime=W0,(!n.lastChildFedEffectTime||r.gameState.time-n.lastChildFedEffectTime>2)&&(Ce(r.gameState,se.ChildFed,n.position,Be,n.id),n.lastChildFedEffectTime=r.gameState.time),Me(r,Ae.ChildFed,n.position)}},R1={id:"predator-eat-corpse",sourceType:"predator",targetType:"corpse",maxDistance:Mi,checker:(e,n,r)=>!!(e.isAdult&&e.hunger>30&&n.food.length>0&&(!e.eatingCooldownTime||e.eatingCooldownTime<=r.gameState.time)),perform:(e,n,r)=>{n.food.pop()&&(e.hunger=Math.max(0,e.hunger-qd),e.eatingCooldownTime=r.gameState.time+2,Ce(r.gameState,se.Eating,e.position,Be,e.id),Me(r,Ae.Gather,e.position))}},P1={id:"predator-attack-rival",sourceType:"predator",targetType:"predator",maxDistance:Tn,checker:(e,n,r)=>{var o;return!!(e.isAdult&&(!e.attackCooldown||e.attackCooldown<=0)&&n.hitpoints>0&&(e.hunger>100||n.attackTargetId===e.id||n.attackTargetId&&((o=r.gameState.entities.entities.get(n.attackTargetId))==null?void 0:o.type)==="predator"))},perform:(e,n,r)=>{let o=b0;e.hunger>120&&(o*=1.3),n.hitpoints-=o,n.movementSlowdown={modifier:Yd,endTime:r.gameState.time+jd};const l=ze(e.position,n.position,r.gameState.mapDimensions.width,r.gameState.mapDimensions.height),a=Tt(l,7);n.forces.push(a),e.attackCooldown=$0,n.hitpoints<=0?(e.hunger=Math.max(0,e.hunger-qd),Me(r,Ae.HumanDeath,n.position),Ce(r.gameState,se.Hit,n.position,Be,n.id)):(Ce(r.gameState,se.Hit,n.position,Be,n.id),Me(r,Ae.Attack,e.position)),Ce(r.gameState,se.Attack,e.position,Be,e.id)}},N1=[g1,...v1,d1,f1,h1,y1,_1,C1,R1,S1,A1,I1,T1,P1,w1,E1];function D1(e){const{gameState:n}=e,r=n,o=Array.from(n.entities.entities.values());for(const l of N1)for(const a of o){if(l.sourceType&&a.type!==l.sourceType)continue;const c=r.search[l.targetType].byRadius(a.position,l.maxDistance);for(const d of c){if(a.id===d.id)continue;X(a.position,d.position,n.mapDimensions.width,n.mapDimensions.height)<=l.maxDistance&&l.checker(a,d,e)&&l.perform(a,d,e)}}}function k1(e){e.visualEffects=e.visualEffects.filter(n=>e.time-n.startTime<=n.duration)}function M1(e){const n=e.search.berryBush.byProperty("type","berryBush"),r=e.search.predator.byProperty("type","predator"),o=e.search.human.byProperty("type","human");for(let l=0;l<20;l++){let a;if(n.length>0&&l<15){const h=n[Math.floor(Math.random()*n.length)],p=Math.random()*2*Math.PI,m=50+Math.random()*100;a={x:Math.max(50,Math.min(Ze-50,h.position.x+Math.cos(p)*m)),y:Math.max(50,Math.min(Je-50,h.position.y+Math.sin(p)*m))}}else a={x:50+Math.random()*(Ze-100),y:50+Math.random()*(Je-100)};let c=!0;const d=100;for(const h of r)if(Math.sqrt((a.x-h.position.x)**2+(a.y-h.position.y)**2)<d){c=!1;break}if(c){for(const h of o)if(Math.sqrt((a.x-h.position.x)**2+(a.y-h.position.y)**2)<d){c=!1;break}}if(c)return a}return{x:Ze*.3+Math.random()*Ze*.4,y:Je*.3+Math.random()*Je*.4}}function O1(e){const n=e.search.prey.byProperty("type","prey"),r=e.search.human.byProperty("type","human");for(let l=0;l<15;l++){let a;if(n.length>0&&l<10){const h=n[Math.floor(Math.random()*n.length)],p=Math.random()*2*Math.PI,m=100+Math.random()*150;a={x:Math.max(50,Math.min(Ze-50,h.position.x+Math.cos(p)*m)),y:Math.max(50,Math.min(Je-50,h.position.y+Math.sin(p)*m))}}else a={x:50+Math.random()*(Ze-100),y:50+Math.random()*(Je-100)};let c=!0;const d=150;for(const h of r)if(Math.sqrt((a.x-h.position.x)**2+(a.y-h.position.y)**2)<d){c=!1;break}if(c)return a}switch(Math.floor(Math.random()*4)){case 0:return{x:Math.random()*Ze,y:50+Math.random()*100};case 1:return{x:Ze-150+Math.random()*100,y:Math.random()*Je};case 2:return{x:Math.random()*Ze,y:Je-150+Math.random()*100};default:return{x:50+Math.random()*100,y:Math.random()*Je}}}function F1(e){const n=e.search.human.byProperty("type","human"),r=e.search.berryBush.byProperty("type","berryBush");for(let o=0;o<20;o++){const l={x:50+Math.random()*(Ze-100),y:50+Math.random()*(Je-100)};let a=!0;const c=80,d=60;for(const h of n)if(Math.sqrt((l.x-h.position.x)**2+(l.y-h.position.y)**2)<c){a=!1;break}if(a){for(const h of r)if(Math.sqrt((l.x-h.position.x)**2+(l.y-h.position.y)**2)<d){a=!1;break}}if(a)return l}return{x:Math.random()*Ze,y:Math.random()*Je}}function sv(e,n=4){console.log(` Respawning ${n} prey to prevent extinction`);const r=e;for(let o=0;o<n;o++){const l=M1(r),a=o%2===0?"male":"female";io(e.entities,l,a,void 0,void 0,Ps())}}function av(e,n=2){console.log(` Respawning ${n} predators to prevent extinction`);const r=e;for(let o=0;o<n;o++){const l=O1(r),a=o%2===0?"male":"female";ro(e.entities,l,a,void 0,void 0,Ns())}}function U1(e){const n=e,r=n.search.prey.count(),o=n.search.predator.count();let l=!1;return r===0&&(sv(e,6),l=!0),o===0&&(av(e,3),l=!0),l}function L1(e){const n=e,r=n.search.prey.count(),o=n.search.predator.count(),l=n.search.berryBush.count();let a=!1;if(r>0&&r<5){const c=Math.max(2,Math.floor(8-r));sv(e,c),a=!0}if(o>0&&o<2){const c=Math.max(1,Math.floor(3-o));av(e,c),a=!0}if(l<5){console.log(` Boosting bush count from ${l} to help ecosystem`);for(let c=0;c<5;c++){const d=F1(n);Us(e.entities,d,e.time)}a=!0}return a}const H1=5;function B1(e){U1(e),L1(e)}function G1(e){e.ecosystem.lastUpdateTime||(e.ecosystem.lastUpdateTime=0),!(e.time-e.ecosystem.lastUpdateTime<H1)&&(e.ecosystem.lastUpdateTime=e.time,B1(e))}function x1(){return{qTableSize:0,explorationRate:0}}const b1=1/60;function $1(e,n){const r=wt(e);r&&(e.viewportCenter=sf(e.viewportCenter,r.position,xd*n))}function z1(e){for(const r of e.entities.entities.values())r.isHighlighted=!1;const n=e.notifications.filter(r=>!r.isDismissed);for(const r of n)if(r.highlightedEntityIds)for(const o of r.highlightedEntityIds){const l=e.entities.entities.get(o);l&&(l.isHighlighted=!0)}}function Yl(e,n){if(e.isPaused)return e;for(;n>0;){const r=Af(e),o=Math.min(n,b1);if(r.gameOver)return r;const l=o*(Vt/Xt);r.time+=l,$1(r,o),qw(r),G1(r),z1(r),j_({gameState:r,deltaTime:o}),D1({gameState:r,deltaTime:o}),k1(r),n1(r,o),e=r,n-=o}return e}function Im(e,n,r){e.save();const{x:o,y:l,width:a,height:c}=n.rect,d=mI;if(e.beginPath(),e.moveTo(o+d,l),e.lineTo(o+a-d,l),e.quadraticCurveTo(o+a,l,o+a,l+d),e.lineTo(o+a,l+c-d),e.quadraticCurveTo(o+a,l+c,o+a-d,l+c),e.lineTo(o+d,l+c),e.quadraticCurveTo(o,l+c,o,l+c-d),e.lineTo(o,l+d),e.quadraticCurveTo(o,l,o+d,l),e.closePath(),e.fillStyle=n.isDisabled?vI:n.backgroundColor,e.fill(),n.activated){e.save();const h=(Math.sin(Date.now()/1e3*wI)+1)/2;e.strokeStyle=II,e.lineWidth=2+h*2,e.globalAlpha=.7+h*.3,e.stroke(),e.restore()}if(n.lastActivated){const h=Date.now()-n.lastActivated;if(h<Kp){const p=1-h/Kp;e.fillStyle=SI,e.globalAlpha=p,e.fill(),e.globalAlpha=1}}r&&!n.isDisabled&&(e.fillStyle=D0,e.globalAlpha=.5,e.fill(),e.globalAlpha=1),e.fillStyle=n.isDisabled?yI:n.textColor,n.icon?(e.font=`${c*.55}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(n.icon,o+a/2,l+c/2),n.text&&(e.font=`${c*.18}px "Press Start 2P", Arial`,e.textAlign="right",e.textBaseline="bottom",e.fillText(n.text,o+a-4,l+c-2))):(e.textAlign="center",e.textBaseline="middle",e.fillText(n.text,o+a/2,l+c/2)),e.restore()}function W1(e,n,r,o){e.save(),e.font=`${Qp}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="bottom";const a=e.measureText(r).width,c=Qp,d=a+qp*2,h=c+qp*2,p=o.x-d/2,m=e.canvas.height,y=n.y<m/2?n.y+n.height-Zp:n.y-h+Zp;e.fillStyle=AI,e.fillRect(p,y,d,h),e.fillStyle=TI,e.fillText(r,o.x,y+h/2+c/2),e.restore()}function Y1(e,n,r){e.save();const o=wt(n),l=[{id:"fastForwardButton",action:Ue.FastForward,text:"FFWD [T]",currentWidth:Yr*1.3,backgroundColor:qa,textColor:jr,tooltip:"Fast-forward time",rect:{x:0,y:0,width:0,height:0}},{id:"pauseButton",action:Ue.TogglePause,text:n.isPaused?"UN[P]AUSE":"[P]AUSE",backgroundColor:n.isPaused?Vc:qa,currentWidth:n.isPaused?Yr*1.4:Yr*1.1,tooltip:n.isPaused?"Resume Game":"Pause Game",rect:{x:0,y:0,width:0,height:0},textColor:jr},{id:"muteButton",action:Ue.ToggleMute,text:n.isMuted?"UN[M]UTE":"[M]UTE",backgroundColor:n.isMuted?Vc:qa,tooltip:`Toggle Sound (${n.isMuted?"Muted":"Enabled"})`,currentWidth:Yr,rect:{x:0,y:0,width:0,height:0},textColor:jr}];if(n.uiButtons.push(...l),o){const p=pf(n,o),m=new Set(p.map(L=>L.type));let y=[{playerAction:we.Gather,buttonAction:Ue.CommandGather,shortcut:"E",name:"Gather",toggleKey:"gathering",condition:()=>o.isAdult===!0},{playerAction:we.Eat,buttonAction:Ue.CommandEat,shortcut:"F",name:"Eat"},{playerAction:we.Plant,buttonAction:Ue.CommandPlant,shortcut:"B",name:"Plant",toggleKey:"planting",condition:()=>o.isAdult===!0},{playerAction:we.Procreate,buttonAction:Ue.ToggleProcreationBehavior,shortcut:"R",name:"Procreation",toggleKey:"procreation",condition:()=>o.isAdult===!0},{playerAction:we.FeedChild,buttonAction:Ue.ToggleFeedChildBehavior,shortcut:"H",name:"Feed Child",toggleKey:"feedChildren",condition:()=>o.isAdult===!0},{playerAction:we.Attack,buttonAction:Ue.ToggleAttackBehavior,shortcut:"Q",name:"Attack",toggleKey:"attack",condition:()=>o.isAdult===!0},{playerAction:we.FollowMe,buttonAction:Ue.CommandFollowMe,shortcut:"C",name:"Follow Me",toggleKey:"followLeader",condition:()=>o.isAdult===!0},{playerAction:we.CallToAttack,buttonAction:Ue.CommandCallToAttack,shortcut:"V",name:"Call to Attack",condition:()=>o.isAdult===!0},{playerAction:we.TribeSplit,buttonAction:Ue.CommandTribeSplit,shortcut:"K",name:"Split Tribe",condition:()=>o.leaderId!==void 0&&o.leaderId!==o.id&&o.isAdult===!0}];y=y.filter(L=>L.condition?L.condition():!0);const S=1,E=y.length,P=E*qi+(E-1)*Ja,_=S*qi+(S-1)*Ja,T=(r-P)/2,U=e.canvas.height-_-20;y.forEach((L,D)=>{const x=D%E,W=Math.floor(D/E),F=T+x*(qi+Ja),Y=U+W*(qi+Ja),ue=!!L.toggleKey,Ee=ue&&n.autopilotControls.behaviors[L.toggleKey],_e=!m.has(L.playerAction),xe=!n.hasPlayerEnabledAutopilot||n.hasPlayerEnabledAutopilot<3?" (Press Shift to toggle Auto)":"",De=ue?`${L.name}${xe}`:L.name,Te=Ee?Vc:qa,le={id:`commandButton_${L.name}`,action:L.buttonAction,rect:{x:F,y:Y,width:qi,height:qi},icon:zl[L.playerAction],text:L.shortcut,backgroundColor:Te,textColor:jr,currentWidth:qi,tooltip:De,isDisabled:_e,activated:Ee};n.uiButtons.push(le)})}let a=r-Yt;l.forEach(p=>{const m=Yt,y=a-p.currentWidth;p.rect={x:y,y:m,width:p.currentWidth,height:gI},Im(e,p,n.hoveredButtonId===p.id),a-=p.currentWidth+pI});let c=null;n.uiButtons.filter(p=>p.id.startsWith("commandButton_")).forEach(p=>{c||(c={x:p.rect.x,y:p.rect.y,width:p.rect.width,height:p.rect.height}),c.x=Math.min(c.x,p.rect.x),c.y=Math.min(c.y,p.rect.y),c.width=Math.max(c.width,p.rect.x+p.rect.width-c.x),c.height=Math.max(c.height,p.rect.y+p.rect.height-c.y),Im(e,p,n.hoveredButtonId===p.id)});const h=n.hoveredButtonId?n.uiButtons.find(p=>p.id===n.hoveredButtonId):void 0;return h&&h.tooltip&&n.mousePosition&&W1(e,h.rect,h.tooltip,n.mousePosition),e.restore(),{commandButtonsRect:c}}function j1(e){e.save(),e.fillStyle=FI,e.fillRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle=UI,e.font=`${LI}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("PAUSED",e.canvas.width/2,e.canvas.height/2),e.restore()}function wm(e,n,r,o){const l=n.x-r.width/2,a=n.y-r.height/2,c=l+e.x,d=a+e.y,h=(c%o.width+o.width)%o.width,p=(d%o.height+o.height)%o.height;return{x:h,y:p}}function Tf(e,n,r,o){let l=e.x-n.x,a=e.y-n.y;return Math.abs(l)>o.width/2&&(l=l-Math.sign(l)*o.width),Math.abs(a)>o.height/2&&(a=a-Math.sign(a)*o.height),{x:l+r.width/2,y:a+r.height/2}}function An(e,n,r,o,l,...a){const c={...l.position};for(let d=-r;d<=r;d+=r)for(let h=-n;h<=n;h+=n)l.position.x=c.x+h,l.position.y=c.y+d,o(e,l,...a);l.position=c}const V1=25,X1=0,Em=28;function lv(e,n,r,o,l,a,c,d,h,p){e.save();const{x:m,y}=Tf(n,c,{width:d,height:h},p);e.strokeStyle=o,e.lineWidth=a,e.setLineDash(l),e.beginPath(),e.arc(m,y,r+bl,0,2*Math.PI),e.stroke(),e.restore()}function K1(e,n,r,o,l,a,c){if(n=n.filter(y=>y.type!==we.FollowMe),n.length===0)return;e.save(),n.forEach(y=>{y.targetEntity&&lv(e,y.targetEntity.position,y.targetEntity.radius,Xd,Kd,2,o,l,a,c)}),e.font=`${eo}px "Press Start 2P", Arial`,e.fillStyle="white",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=5;const{x:d,y:h}=Tf(r.position,o,{width:l,height:a},c);let p=0,m={};n.forEach(y=>{const S=zl[y.type];if(y.targetEntity){m[y.targetEntity.id]=(m[y.targetEntity.id]||0)+1;const E=y.targetEntity.position.x-o.x+l/2,P=y.targetEntity.position.y-o.y+a/2,_=`${S}${y.key.toUpperCase()}`,T=P-y.targetEntity.radius-bl-eo/2-(m[y.targetEntity.id]-1)*Em;e.fillText(_,E,T)}else{e.textAlign="left";const E=`${S}${y.key.toUpperCase()}`,P=d+V1,T=h+X1+p*Em;e.fillText(E,P,T),p++,e.textAlign="center"}}),e.restore()}const ge=(e,n,r,o,l,a,c)=>{a==="transparent"||o<=0||l<=0||(e.fillStyle=a,e.fillRect(Math.floor(n*c),Math.floor(r*c),Math.ceil(o*c),Math.ceil(l*c)))},_m=10,Cm=10,Hn=6,Zn=4,cl=2,Q1=5,dn=4,q1=2,Pt=4,Z1=2,qe=3,Br=2,Ni=0,ms=Ni+Zn-1,Mt=ms,st=ms+dn-1,J1="rgba(0, 0, 0, 0.4)",eC=4,tC=1,If={name:"tribe-human-2d",referenceImage:"swos.png",description:`A 2D human character asset for the Tribe game. This includes ensuring that the unique animations for stances like 'eat' and 'procreate' do not erroneously appear in other stances, such as 'walk', which was observed in the provided rendered media. The 'idle' animation was updated to a leg sway to better match the provided video for that stance, replacing a simpler body bob.

# Visual style

Human characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like people from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the character to give it a sense of depth.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 1 and 60, with 20 being the average age.
- gender: 
  - The male characters should have only pants, while female cover their breasts with a top. The clothing should be simple and muted, reflecting a stone-age style.
  - Female characters should have long hair, while male should have short hair and beard.
  - Male characters should have a more robust, muscular build
  - Female characters should have thinner arms and legs, with a more pronounced waist and hips.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'gathering': The character is gathering food from berry bushes, with arms reaching out and a slight bend at the knees.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or dust particles to indicate movement.
- 'attacking': The character performs an attack animation, with arms raised and a forward motion.
- 'defending': The character takes a defensive stance, with arms raised and a slight bend at the knees.
- 'stunned': The character is stunned and laying on the ground, with limbs relaxed and a neutral expression.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a skeleton over time.

`,stances:["idle","walk","gathering","eat","procreate","dead","attacking","defending","stunned"],render(e,n,r,o,l,a,c,d="male",h=20,p=[1,0],m=!1,y=0){const S=["dead","stunned"].includes(c),E=S?Cm+4:_m,P=S?_m+4:Cm+qe,_=.15,T=Math.min(o*(1-2*_)/E,l*(1-2*_)/P),U=E*T,L=P*T,D=n+(o-U)/2,x=r+(l-L)/2;e.save(),p[0]<0&&!S?(e.translate(D+U,x),e.scale(-1,1)):e.translate(D,x);const F="#D09A5A",Y=h>50?"#BDBDBD":"#281808",ue="#7F5C4A",Ee="#6B4F3A",_e="#E0D8C0",xe="#A0522D",De=1-Math.max(0,Math.min(100,y))/100*.2,Te=d==="male"?1.1:.9,le=.8+(Math.max(1,Math.min(h,60))-1)/59*.2;let Fe=Q1*De*Te*le,ve=q1*De*Te*le,J=Z1*De*le;m&&d==="female"&&(Fe*=1.5);const b=Math.round((E-Fe)/2),j=Math.round((E-Hn)/2),$=b-ve,C=b+Fe,O=1,V=b+(Fe/2-O/2)-J,ee=b+(Fe/2+O/2),he=p[1]<-.2&&Math.abs(p[0])<.7,re=K=>{e.fillStyle=J1,e.beginPath();const te=E/2,ke=K;e.ellipse(Math.floor(te*T),Math.floor(ke*T),Math.max(1,Math.floor(eC*T)),Math.max(1,Math.floor(tC*T)),0,0,2*Math.PI),e.fill()},ye=(K,te)=>{d==="male"?(ge(e,b,ms+K,Fe,dn-Br,te,T),ge(e,b,ms+dn-Br+K,Fe,Br,ue,T)):ge(e,b,ms+K,Fe,dn,Ee,T)},me=(K,te)=>{he?ge(e,j,Ni+K,Hn,Zn,Y,T):(ge(e,j,Ni+K,Hn,Zn,te,T),ge(e,j,Ni+K,Hn,cl,Y,T),d==="female"?(ge(e,j-1,Ni+cl+K,1,Zn,Y,T),ge(e,j+Hn,Ni+cl+K,1,Zn,Y,T)):ge(e,j+1,Ni+2+K,Hn-2,Zn-2,Y,T))};switch(c){case"idle":{const K=a*Math.PI*2,te=Math.sin(K)*.5,ce=(Math.cos(K*2)+1)*.25;re(st+qe+1),ge(e,V+te,st+ce,J,qe,F,T),ge(e,ee-te,st+ce,J,qe,F,T),ye(ce,F),ge(e,$,Mt+ce,ve,Pt,F,T),ge(e,C,Mt+ce,ve,Pt,F,T),me(ce,F);break}case"walk":{const K=a*Math.PI*2,te=Math.sin(K)*2,ce=Math.abs(Math.cos(K))*1;re(st+qe+1),ge(e,V+te,st+ce,J,qe,F,T),ge(e,ee-te,st+ce,J,qe,F,T),ye(ce,F),ge(e,$-te,Mt+ce,ve,Pt,F,T),ge(e,C+te,Mt+ce,ve,Pt,F,T),me(ce,F);break}case"gathering":{const K=a*Math.PI*2,te=1,ke=(Math.sin(K)+1)/2*2,ce=te+Math.abs(Math.cos(K))*.5;re(st+qe+1),ge(e,V,st+ce,J,qe-te,F,T),ge(e,ee,st+ce,J,qe-te,F,T),ye(ce,F),ge(e,$+1,Mt+ce-ke,ve,Pt,F,T),ge(e,C-1,Mt+ce-ke,ve,Pt,F,T),me(ce,F);break}case"eat":{re(st+qe+1),ge(e,V,st+1,J,qe-1,F,T),ge(e,ee,st+1,J,qe-1,F,T),ye(1,F);const ke=(Math.sin(a*Math.PI*4)+1)/2,ce=j+Hn/2,Cn=Ni+Zn/2,Ke=C+(ce-C)*ke,Ye=Mt+1+(Cn-(Mt+1))*ke;ge(e,$,Mt+1,ve,Pt,F,T),ge(e,Ke,Ye,ve,Pt,F,T),ge(e,Ke,Ye-1,1,1,xe,T),me(1,F);break}case"procreate":{const K=(Math.sin(a*Math.PI*8)+1)/4,te=(Math.sin(a*Math.PI*6)+1)*.5,ke=1.5,ce=ke-te;re(st+qe+1),ge(e,V,st+ce,J,qe-ke,F,T),ge(e,ee,st+ce,J,qe-ke,F,T),ye(ce,F),ge(e,$,Mt+ce,ve,Pt,F,T),ge(e,C,Mt+ce,ve,Pt,F,T),me(ce,F),e.globalAlpha=K,ye(ce,"white"),e.globalAlpha=1;break}case"attacking":{const K=Math.sin(a*Math.PI)*1.5,te=Math.abs(Math.sin(a*Math.PI));re(st+qe+1),ge(e,V-K,st+te,J,qe,F,T),ge(e,ee+K*.5,st+te,J,qe,F,T),ye(te,F),ge(e,$,Mt+te-2,ve,Pt,F,T),ge(e,C,Mt+te-2.5,ve,Pt,F,T),me(te,F);break}case"defending":{re(st+qe+1),ge(e,V,st+1,J,qe-1,F,T),ge(e,ee,st+1,J,qe-1,F,T),ye(1,F),ge(e,$-1,Mt+1-1,ve,Pt,F,T),ge(e,C+1,Mt+1-1,ve,Pt,F,T),me(1,F);break}case"stunned":case"dead":{const K=c==="dead",te=K?Math.min(1,a):0,ke=te>.5?_e:F,ce=d==="male"?ue:Ee,Cn=te>.8?"transparent":Y,Ke=E/2,Ye=P/2,Rn=2;re(P-1),ge(e,Ke-J-Rn,Ye,J,qe,ke,T),ge(e,Ke+Rn,Ye,J,qe,ke,T),ge(e,Ke-ve-Rn,Ye-dn+1,ve,Pt,ke,T),ge(e,Ke+Rn,Ye-dn+1,ve,Pt,ke,T);const Bt=Ke-Fe/2,nn=Ye-dn/2;d==="male"?(te<.7&&ge(e,Bt,nn+dn-Br,Fe,Br,ce,T),ge(e,Bt,nn,Fe,dn-Br,ke,T)):te<.7?ge(e,Bt,nn,Fe,dn,ce,T):ge(e,Bt,nn,Fe,dn,ke,T);const Pn=Ke-Hn/2,Nn=Ye-dn/2-Zn+1;if(ge(e,Pn,Nn,Hn,Zn,ke,T),Cn!=="transparent"&&ge(e,Pn,Nn,Hn,cl,Cn,T),K&&te>.6){const ii="#B0A890";for(let Li=0;Li<3;Li++)ge(e,Bt+1,nn+Li*1+1,Fe-2,.5,ii,T)}break}default:ge(e,0,0,E,P,"magenta",T);break}e.restore()}};function nC(e,n,r,o,l){const a=n.x,c=n.y-r-o/2;e.save(),e.fillStyle=l,e.strokeStyle=l,e.lineWidth=1.5,e.beginPath(),e.rect(a-o/2,c,o,o/2),e.fill(),e.beginPath(),e.moveTo(a-o/2,c),e.lineTo(a-o/4,c-o/3),e.lineTo(a-o/6,c),e.moveTo(a-o/6,c),e.lineTo(a,c-o/2),e.lineTo(a+o/6,c),e.moveTo(a+o/6,c),e.lineTo(a+o/4,c-o/3),e.lineTo(a+o/2,c),e.stroke(),e.restore()}function ks(e,n,r,o,l,a=!1,c=!1,d=!1,h=!1){o<bd&&(r=r*.75),If.render(e,n.x-r/2,n.y-r/2,r,r,0,"idle",l,o,[0,0],!1,0);let p,m;a?(p=oI,m=Vd):c?(p=sI,m=P0):d?(p=aI,m=R0):h&&(p=lI,m=C0),p&&m&&nC(e,n,r/2,p,m)}function iC(e,n,r,o,l,a){if(e.save(),o.length===0){e.restore();return}const c=o.length*l,d=4;let h;const p=c+(o.length-1)*d;o.length>1&&p>a?h=(a-c)/(o.length-1):h=d,o.length<=1&&(h=0);for(let m=0;m<o.length;m++){const{member:y,isPlayer:S,isHeir:E,isPartner:P,isParent:_}=o[m],T=n+m*(l+h)+l/2,U=r+l/4;ks(e,{x:T,y:U},l,y.age,y.gender,S,E,P,_)}e.restore()}function rC(e,n,r,o,l){if(r.length===0)return;e.save();const a=Un,c=" 00",d=" 00";e.font=`${Yc}px "Press Start 2P", Arial`;const h=e.measureText(c).width,p=e.measureText(d).width,m=Un+cn+Un+cn+Un+Ei+h+Un/2+Ei+p,y=r.length*Qa+(r.length-1)*Vp,S=l-y-Un;e.fillStyle=cI,e.fillRect(a,S,m,y);for(let E=0;E<r.length;E++){const P=r[E],_=S+E*(Qa+Vp),T=_+Qa/2;P.isPlayerTribe&&(e.fillStyle=uI,e.fillRect(a,_,m,Qa));let U=a+Un;if(e.font=`${cn}px "Press Start 2P", Arial`,e.textBaseline="middle",e.textAlign="left",e.fillText(P.tribeBadge,U,T-cn/4),U+=cn+Un,!P.isPlayerTribe){const L=P.diplomacyStatus===Lt.Friendly?"":"",D=`diplomacyButton_${P.leaderId}`,x={x:U,y:T-cn/2,width:cn,height:cn},W={id:D,action:Ue.ToggleDiplomacy,rect:x,text:"",icon:L,backgroundColor:"transparent",textColor:"white",currentWidth:cn,tooltip:`Toggle diplomacy with this tribe (Currently: ${P.diplomacyStatus})`,targetTribeId:P.leaderId};n.uiButtons.push(W),n.hoveredButtonId===D&&(e.fillStyle=D0,e.globalAlpha=.5,e.fillRect(x.x,x.y,x.width,x.height),e.globalAlpha=1),e.font=`${cn*.8}px "Press Start 2P", Arial`,e.textBaseline="middle",e.textAlign="center",e.fillText(L,U+cn/2,T)}U+=cn+Un,P.adultCount>0&&(ks(e,{x:U+Ei/2,y:T},Ei,25,"male"),U+=Ei/2,e.font=`${Yc}px "Press Start 2P", Arial`,e.fillStyle="white",e.textBaseline="middle",e.textAlign="left",e.fillText(` ${P.adultCount}`,U,T),U+=e.measureText(` ${P.adultCount}`).width+Un/2),P.childCount>0&&(ks(e,{x:U+Ei/2,y:T},Ei,1,"female"),U+=Ei/2,e.font=`${Yc}px "Press Start 2P", Arial`,e.fillStyle="white",e.textBaseline="middle",e.textAlign="left",e.fillText(` ${P.childCount}`,U,T))}e.restore()}function oC(e,n,r,o,l){const a=F0,c=U0,d=n+o-a-c,h=r+c;e.save(),e.lineWidth=2,e.strokeStyle=l?jI:YI,e.beginPath();const p=5;e.moveTo(d+p,h+p),e.lineTo(d+a-p,h+a-p),e.moveTo(d+a-p,h+p),e.lineTo(d+p,h+a-p),e.stroke(),e.restore()}function sC(e,n,r,o){const{tutorialState:l,tutorial:a}=n;if(l.transitionState===Ft.INACTIVE)return;const c=a.steps[l.currentStepIndex];if(!c)return;e.save(),e.globalAlpha=l.transitionAlpha;const d=HI,h=BI,p=GI,m=`${Kc}px "Press Start 2P", Arial`,y=`${nm}px "Press Start 2P", Arial`,S=bI,E=nm*1.5;e.font=y;const P=c.text.split(" ");let _="";const T=[];for(let _e=0;_e<P.length;_e++){const xe=_+P[_e]+" ";e.measureText(xe).width>d-h*2&&_e>0?(T.push(_),_=P[_e]+" "):_=xe}T.push(_);const U=h*2+Kc+h/2+T.length*E,L=(r-d)/2,D=o-U-160;e.fillStyle=xI,e.beginPath(),e.moveTo(L+p,D),e.lineTo(L+d-p,D),e.quadraticCurveTo(L+d,D,L+d,D+p),e.lineTo(L+d,D+U-p),e.quadraticCurveTo(L+d,D+U,L+d-p,D+U),e.lineTo(L+p,D+U),e.quadraticCurveTo(L,D+U,L,D+U-p),e.lineTo(L,D+p),e.quadraticCurveTo(L,D,L+p,D),e.closePath(),e.fill(),e.fillStyle=S,e.textAlign="center",e.textBaseline="top",e.font=m,e.fillText(c.title,L+d/2,D+h),e.font=y;let x=D+h+Kc+h/2;for(const _e of T)e.fillText(_e,L+d/2,x),x+=E;const W=n.hoveredButtonId==="tutorial-dismiss";oC(e,L,D,d,W),e.restore();const F=F0,Y=U0,ue=L+d-F-Y,Ee=D+Y;return{x:ue,y:Ee,width:F,height:F}}function fd(e,n,r){e.save();const o=WI,l={x:n.x-o,y:n.y-o,width:n.width+o*2,height:n.height+o*2};e.strokeStyle=M0,e.lineWidth=O0+Math.sin(r*Qd)*1.5,e.setLineDash([8,8]),e.strokeRect(l.x,l.y,l.width,l.height),e.restore()}function aC(e,n){e.fillStyle="white",e.font='30px "Press Start 2P", Arial',e.textAlign="center",e.fillText("Game Over!",e.canvas.width/2,e.canvas.height/2-60),e.font='20px "Press Start 2P", Arial',e.fillText("Lineage Extinct.",e.canvas.width/2,e.canvas.height/2-20),e.fillText(`Cause: ${n.causeOfGameOver||"Unknown"}`,e.canvas.width/2,e.canvas.height/2+20)}const Md=10,lC=3,Rm=Md*.7;function uC(e,n,r,o,l){const{position:a,food:c,maxFood:d,ownerId:h,claimedUntil:p}=n;if(e.beginPath(),e.arc(a.x,a.y,Md,0,Math.PI*2),e.fillStyle="#228B22",e.fill(),e.strokeStyle="#006400",e.lineWidth=1,e.stroke(),h&&p&&p>l&&o){const m=r.entities.entities.get(h);if(m){let y;m.id===o.id?y=Vd:V0(o,m,r)?y=YT:y=N0,y&&(e.strokeStyle=y,e.lineWidth=1+Math.sin(l*2)*.5,e.beginPath(),e.arc(a.x,a.y,Md+2,0,Math.PI*2),e.stroke())}}if(c.length>0){const m=Math.PI*2/Math.min(c.length,d);for(let y=0;y<c.length;y++){const S=y*m,E=a.x+Rm*Math.cos(S),P=a.y+Rm*Math.sin(S);e.beginPath(),e.arc(E,P,lC,0,Math.PI*2),e.fillStyle="#FF0000",e.fill()}}}const Pm=(e,n,r=70,o=50)=>{const l=e>>n&255;return`hsl(${Math.floor(l/255*360)}, ${r}%, ${o}%)`},cC=(e,n)=>{const r=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(!r)return e;const[o,l,a]=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])];return`hsl(${o}, ${l}%, ${Math.max(0,a-n)}%)`},dl=(e,n,r,o,l,a,c,d=!1)=>{e.save(),e.translate(n,r),e.rotate(a),e.fillStyle=d?cC(c,15):c,e.beginPath(),e.roundRect(-o/2,0,o,l,o/2),e.fill(),e.restore()},hd=(e,n)=>{const r=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/),o=75;if(!r)return`hsl(0, 0%, ${o}%)`;const[,l,a,c]=r.map(Number),d=a*(1-n),h=c+(o-c)*n;return`hsl(${l}, ${d}%, ${h}%)`},uv={name:"tribe-prey-2d",referenceImage:"swos.png",description:`A 2D prey asset for the Tribe game, featuring various stances and animations.

Prey is an animal which can be hunted by predators or humans in the Tribe game.

Preys look like small 4 leg mammals, with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Visual style

Prey characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like creatures from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in away that conveys their actions clearly.

Prey walks on all fours, unlike human (two legs).

Each prey is described by a unique gene code, which is a number that defines its appearance, size, and other characteristics. The gene code is used to generate the character's appearance, including body proportions, color, and other visual features. The gene code is a 32-bit integer, with each bit representing a specific characteristic of the character.

Prey should have should have visible body parts, such as head, torso, arms, and legs. The body parts should be connected and should not overlap. The character's body parts should be simple shapes, such as circles and rectangles, with solid colors and no gradients or patterns.

Preys are supposed to be sympathetic and friendly, so the character's face should have a friendly expression, with a smile and bright eyes. The character's eyes should be large and expressive, with a simple design.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the a character to give it a sense of depth.

IMPORTANT: The character is visible from the side, just like in Sensible Soccer.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 0 and 12, with 2 being the average age.
- gender:
  - 'male': Male prey are larger and more robust, with a more pronounced musculature.
  - 'female': Female prey are smaller and more agile, with a leaner build.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or a dust particles to indicate movement.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a grey skeleton over time. The character pose and body parts should not be animated in this stance, as the character is dead so it should not move.`,stances:["idle","walk","eat","dead","procreate"],render(e,n,r,o,l,a,c,d={gender:"male",age:2,direction:[1,0],isPregnant:!1,hungryLevel:0,geneCode:8405024}){e.save(),e.imageSmoothingEnabled=!1;const h=o*.15,p=n+o/2,m=r+l/2,y=o-h*2,S=l-h*2,{gender:E,age:P,direction:_,isPregnant:T,hungryLevel:U,geneCode:L}=d,D=.8+Math.min(P,10)/10*.4,x=E==="male"?1.05:.95,W=1-U/100*.3,F=y*.5*W*D*x;let Y=S*.3*D*x;const ue=y*.15*D*x,Ee=F*.2,_e=S*.3,xe=Pm(L,0,30,50);let De=Pm(L,8,50,40);if(P>45){const re=Math.min(1,(P-45)/15);De=hd(De,re)}e.translate(p,m),_[0]<0&&e.scale(-1,1);const Te=Math.sin(a*Math.PI*2),le=Math.cos(a*Math.PI*2),Fe=_e+Y*.2;if(c==="dead"){const re=Math.min(a,1);e.translate(0,S*.2),e.rotate(Math.PI/2);const ye=hd(De,re),me=hd(xe,re);e.globalAlpha=.5+re*.5,e.strokeStyle=ye,e.lineWidth=Ee*.5,e.beginPath(),e.moveTo(-F*.4,0),e.lineTo(F*.4,0),e.stroke();for(let K=-1;K<=1;K+=1)e.beginPath(),e.arc(0,0,Y*.4,Math.PI*.4*K-Math.PI*.2,Math.PI*.4*K+Math.PI*.2),e.stroke();e.fillStyle=me,e.beginPath(),e.arc(F*.5,0,ue,0,Math.PI*2),e.fill(),e.fillStyle="black",e.beginPath(),e.arc(F*.55,0,ue*.3,0,Math.PI*2),e.fill(),e.restore();return}e.fillStyle="rgba(0, 0, 0, 0.1)",e.beginPath(),e.ellipse(0,Fe,F*.7,F*.25,0,0,2*Math.PI),e.fill();let ve=0,J=0,b=0,j=0,$=0,C=0;switch(c){case"idle":J=Te*(S*.02),b=Te*.05,j=-Te*.05,$=-Te*.05,C=Te*.05;break;case"walk":J=Math.abs(le)*(S*-.04),b=Te*.7,j=-Te*.7,$=-Te*.7,C=Te*.7;break;case"eat":ve=S*.1,J=S*.05,ve+=Te*(S*.02);break;case"procreate":J=S*.05;const re=(1-le)*-y*.05;e.translate(re,0),e.shadowColor="rgba(255, 182, 193, 0.9)",e.shadowBlur=10;break}T&&E==="female"&&(Y*=1.6);const O=J,V=O-Y*.2;dl(e,F*-.35,V,Ee,_e,$,De,!0),dl(e,F*.35,V,Ee,_e,C,De,!0),e.fillStyle=De,e.beginPath(),e.ellipse(0,O,F/2,Y/2,0,0,2*Math.PI),e.fill();const ee=F*.45,he=V+ve;e.fillStyle=xe,e.beginPath(),e.arc(ee,he,ue,0,Math.PI*2),e.fill(),_[1]>=0&&(e.fillStyle="black",e.beginPath(),e.arc(ee+ue*.3,he-ue*.2,ue*.15,0,Math.PI*2),e.fill()),dl(e,F*-.35,V,Ee,_e,b,De),dl(e,F*.35,V,Ee,_e,j,De),e.restore()}};function dC(e,n){let[r,o,l]=e.match(/\d+/g).map(Number);return r=Math.max(0,r-n),o=Math.max(0,o-n),l=Math.max(0,l-n),`rgb(${r}, ${o}, ${l})`}function fC(e){const n=(e&16711680)>>16,r=(e&65280)>>8,o=e&255,l=`rgb(${n}, ${r}, ${o})`,a=dC(l,40),c=(e&255)%100+50,d=(e>>8&255)%100,h=(e>>16&255)%100,p=`rgb(${c}, ${d}, ${h})`,m=(e&8388608)!==0?"#00aaff":"#ffaa00";return{furColor:l,darkerFurColor:a,skinColor:p,eyeColor:m}}const cv={name:"tribe-predator-2d",referenceImage:"swos.png",description:`A 2D predator asset for the Tribe game, featuring various stances and animations.

Predator is an animal which can hunt and attack humans in the Tribe game. It is designed to be a threat to the player, adding an element of danger and challenge to the game world.

Predator look like bears or wolves, with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

# Visual style

Predator characters in the Tribe game are inspired by classic 2D pixel art, they look like Sensible Soccer players(Sensible Soccer game visual style is IMPORTANT), with a simple and recognizable design. The characters are designed to be easily distinguishable and animated in a way that conveys their actions clearly.

Character in Tribe game look like creatures from stone age, they have simple clothing, no shoes, and no modern accessories. The characters are designed to be easily distinguishable and animated in away that conveys their actions clearly.

Predator walks on arms and legs, unlike human (two legs).

Each predator is described by a unique gene code, which is a number that defines its appearance, size, and other characteristics. The gene code is used to generate the character's appearance, including body proportions, color, and other visual features. The gene code is a 32-bit integer, with each bit representing a specific characteristic of the character.

Predator should have visible ears, eyes, and mouth with teeth. It must have a tail. Front legs should be shorter than back legs, and they should be positioned closer to the body. The character's body should be wider at the top and narrower at the bottom, with a slight curve to the back. The character's head should be larger than the body, with a pronounced jaw and sharp teeth.

# Technical details

The asset is rendered on a canvas using the CanvasRenderingContext2D API. The rendering function takes parameters for position, size, progress, stance, direction, gender, and age. The character can face left or right, and the rendering adapts based on the stance (e.g., idle, walk, eat, procreate).
The rendering function must be simple and efficient, it should not use complex patterns or gradients, and should focus on solid colors and basic shapes to maintain the pixel art aesthetic.

15% padding from all edges of the rendering box is required to ensure the character is not cut off during rendering.

Subtle shadow should be drawn under the a character to give it a sense of depth.

IMPORTANT: The character is visible from the side, just like in Sensible Soccer.

# Rendering parameters

- age: The age of the character, which affects the size and proportions of the body parts. Age is a number between 1 and 20, with 3 being the average age.
- gender:
  - 'male': Male predators are larger and more robust, with a more pronounced musculature.
  - 'female': Female predators are smaller and more agile, with a leaner build.
- isPregnant: (applicable only for females) Indicates if the character is pregnant, like very large belly. Pregnant characters should have a larger torso.
- direction: A vector indicating the character's facing direction. There should be at least 8 directions (like in Sensible Soccer): top left, top, top right, left, right, bottom left, bottom, bottom right. The character should be flipped horizontally if the direction vector's X component is negative.
             When moving up(top, top left, top right), the character back of the head should be visible, when moving down(Y > 0), the character face should be visible.
- hungryLevel: A number between 0 and 100 indicating how hungry the character is, hunger level 100 means the character is starving, 0 means the character is not hungry at all. So hungry characters should be thinner, with less body fat, and more pronounced muscles. The character's hunger level affects the size and proportions of the body parts, with hungrier characters being smaller and more gaunt.

# Rendering details

- All parts of the body must be connected
- Rendering must take into account direction vector (X and Y) to flip the character horizontally if needed
- The character's age affects the size and proportions of the body parts, with older characters being larger and more robust. Hair color should become gray for older characters.

# Stances

- 'idle': The character stands still, with a slight leg sway to indicate life.
- 'walk': The character moves forward, with legs and arms in motion.
- 'eat': The character holds food and brings it to their mouth, with a slight bend at the knees.
- 'procreate': The character performs a mating animation, with a specific pose and movement. There should be some additional visual effects to indicate this action, such as a slight glow or aura around the characters, or a dust particles to indicate movement.
- 'attacking': The character performs an attack animation, with arms raised and a forward motion.
- 'dead': The character lies on the ground, with limbs relaxed and a neutral expression, slowly turns into a grey skeleton over time. The character pose and body parts should not be animated in this stance, as the character is dead so it should not move.`,stances:["idle","walk","eat","dead","attacking","procreate"],render(e,n,r,o,l,a,c,d={gender:"male",age:20,direction:[1,0],isPregnant:!1,hungryLevel:0,geneCode:8405024}){const{gender:h,age:p,direction:m,isPregnant:y,hungryLevel:S,geneCode:E}=d;e.save();const P=o*.15,_=Math.max(1,Math.floor((o-P*2)/10)),T=m[0]<0;e.translate(n+o/2,r+l/2),T&&e.scale(-1,1);const U=fC(E),L=.8+Math.min(p,20)/20*.4,D=h==="male"?1.05:.95,x=1-S/100*.25,W=L*D*x,F=Math.max(0,Math.min(1,(p-15)/5));e.filter=`grayscale(${F})`;const Y=U.furColor,ue=U.darkerFurColor,Ee=U.eyeColor,_e="#FFFFFF",xe="#c75c5c",De="#E0E0E0",Te="#A0A0A0",le=l/2-2*_,Fe=Math.sin(a*Math.PI*2),ve=Math.abs(Fe);if(e.fillStyle="rgba(0,0,0,0.15)",e.beginPath(),e.ellipse(0,le,_*4,_,0,0,2*Math.PI),e.fill(),e.filter="none",c==="dead"){const Ke=Math.min(1,a*2);e.save(),e.translate(0,le-_*3),e.rotate(-Math.PI/2);const Ye=(Rn,Bt,nn,Pn,Nn=!1)=>{e.fillStyle=Nn?Te:De,e.fillRect(Rn*_,Bt*_,nn*_,Pn*_)};Ke<1&&(e.globalAlpha=1-Ke,e.fillStyle=Y,e.beginPath(),e.ellipse(0,0,_*3,_*5,0,0,Math.PI*2),e.fill(),e.globalAlpha=1),Ke>0&&(e.globalAlpha=Ke,Ye(-1,-4,2,2),Ye(1,-3.5,1,1,!0),Ye(-.5,-2,1,5,!0),Ye(-2.5,-1,5,.5),Ye(-2.5,0,5,.5),Ye(-2.5,1,5,.5),Ye(-3,-2,-1,2,!0),Ye(3,-2,1,2),Ye(-3,2,-1,2,!0),Ye(3,2,1,2),e.globalAlpha=1),e.restore(),e.restore();return}e.fillStyle=Y;let J=0,b=0,j=0,$=[0,0,0,0];switch(c){case"idle":J=Fe*_*.1;break;case"walk":const Ke=Math.sin(a*Math.PI*4);J=Math.abs(Ke)*-_*.5,$=[Ke*_,-Ke*_,-Ke*_,Ke*_];break;case"attacking":const Ye=Math.sin(a*Math.PI*4);b=_*2+Ye*_,j=_*2,J=_;break;case"eat":j=_*3+ve*_,J=_*1.5,e.fillStyle=xe,e.fillRect(-_,le-_,_*2,_);break;case"procreate":J=Math.sin(a*Math.PI*8)*_*.3,e.fillStyle="rgba(139, 69, 19, 0.5)";for(let Bt=0;Bt<5;Bt++){const nn=(Math.random()-.5)*_*8,Pn=le+(Math.random()-.5)*_*2;ve>.5&&e.fillRect(nn,Pn,_*.5,_*.5)}break}const C=_*3*W*(y?1.3:1),O=_*5*W,V=-O/1.5,ee=le-C-_*2.5+J;e.fillStyle=Y,e.beginPath(),e.moveTo(V-_*.5,ee+C*.5),e.quadraticCurveTo(V-_*3,ee-_,V-_*2+Fe*_,ee+C+_),e.fill();const he=_*1.2*W,re=_*3*W,ye=_*2.5*W,me=V+O*.8,K=V+O*.2;e.fillStyle=ue,e.fillRect(K,le-ye,he,ye+$[2]),e.fillRect(me,le-re,he,re+$[0]),e.fillStyle=Y,e.beginPath(),e.moveTo(V,ee+C),e.lineTo(V,ee+_),e.quadraticCurveTo(V+O/2,ee,V+O,ee+_),e.lineTo(V+O,ee+C),e.fill(),e.fillStyle=Y,e.fillRect(K+_/2,le-ye,he,ye+$[3]),e.fillRect(me+_/2,le-re,he,re+$[1]);const te=_*3.5*W,ke=V+O-te*.3+b,ce=ee-te*.3+j;e.fillStyle=Y,e.beginPath(),e.arc(ke,ce,te/2,0,Math.PI*2),e.fill(),e.beginPath(),e.ellipse(ke+te*.4,ce+te*.2,_*1.5,_,0,0,Math.PI*2),e.fill(),m[1]>=0&&(e.fillStyle=Ee,e.fillRect(ke+_*.5,ce-_*.5,_*.5,_*.5),c==="attacking"&&(e.fillStyle=_e,e.fillRect(ke+te*.5,ce+te*.4,_,_*.4))),e.fillStyle=ue,e.beginPath(),e.moveTo(ke-te*.4,ce-te*.3),e.lineTo(ke,ce-te*.7),e.lineTo(ke,ce-te*.2),e.fill(),e.restore()}};function hC(e,n){const{position:r,gender:o,age:l,decayProgress:a,food:c,radius:d,originalEntityType:h,geneCode:p}=n;if(e.save(),e.globalAlpha=1-a,h==="human"?If.render(e,r.x-d,r.y-d,d*2,d*2,a,"dead",o,l,[0,0],!1,0):h==="prey"?uv.render(e,r.x-d,r.y-d,d*2,d*2,a,"dead",{gender:o,age:l,direction:[0,0],isPregnant:!1,hungryLevel:0,geneCode:p||8405024}):h==="predator"&&cv.render(e,r.x-d,r.y-d,d*2,d*2,a,"dead",{gender:o,age:l,direction:[0,0],isPregnant:!1,hungryLevel:0,geneCode:p||8405024}),e.restore(),c.length>0){e.save(),e.font=`${rI}px Arial`,e.textAlign="center",e.textBaseline="middle";const m=vt*.9,y=Math.PI/g0*3;c.forEach((S,E)=>{const P=E*y,_=r.x+m*Math.cos(P)*Math.atan2(E,E),T=r.y+m*Math.sin(P)*Math.atan2(E,E),U=Y0[S.type];e.fillText(U,_,T)}),e.restore()}}function Vr(e,n,r,o,l,a,c,d){e.save(),e.fillStyle=c,e.fillRect(n,r,o,l),e.fillStyle=d,e.fillRect(n,r,o*Math.max(0,a),l),e.restore()}function gC(e,n,r,o,l,a){if(e.save(),o.length===0){e.restore();return}const c=o.length*l;let d;c>a||c+(o.length-1)*4>a?d=(a-c)/(o.length-1):d=4,o.length===1&&(d=0);for(let h=0;h<o.length;h++){const p=Y0[o[h].type];e.fillText(p,n+h*(l+d),r)}e.restore()}function pC(e,n,r,o,l){const a=n.autopilotControls.hoveredAutopilotAction;if(!a)return;let c,d=vt/2;const h=zl[a.action],p=Z0[a.action],m=`${h} ${p}`;if("targetEntityId"in a){const y=n.entities.entities.get(a.targetEntityId);y&&(c=y.position,d=y.radius)}else"position"in a&&(c=a.position);if(c){lv(e,c,d,Xd,Kd,2,r,o,l,n.mapDimensions),e.save(),e.font=`${eo}px "Press Start 2P", Arial`,e.fillStyle="white",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=5;const{x:y,y:S}=Tf(c,r,{width:o,height:l},n.mapDimensions),E=S-d-bl-eo/2;e.fillText(m,y,E),e.restore()}}function mC(e,n,r,o,l){e.save();const a=(Math.sin(l*Qd)+1)/2,c=r+bl+a*5;e.strokeStyle=Xd,e.lineWidth=2,e.setLineDash(Kd),e.beginPath(),e.arc(n.x,n.y,c,0,Math.PI*2),e.stroke(),e.setLineDash([]);const d=zl[o],h=Z0[o];if(d){e.font=`${eo*1.5}px "Press Start 2P", Arial`,e.textAlign="center",e.textBaseline="middle";const p=n.y-c-25;e.fillText(d,n.x,p),e.font=`${eo*.8}px "Press Start 2P", Arial`,e.fillText(h,n.x,p+25)}e.restore()}function vC(e,n,r){e.save();const o=30,l=70,a=3,c=l/a;for(let d=0;d<a;d++){const h=d*c,p=(r*o+h)%l,m=1-p/l;e.strokeStyle=`rgba(255, 215, 0, ${m*.7})`,e.lineWidth=1+(1-m)*2,e.beginPath(),e.arc(n.x,n.y,p,0,Math.PI*2),e.stroke()}e.restore()}function yC(e,n){const{activeAutopilotAction:r,behaviors:o}=n.autopilotControls,l=wt(n);if(!l)return;const a=(c,d)=>{vC(c,d.position,n.time)};if(l.isCallingToFollow&&An(e,n.mapDimensions.width,n.mapDimensions.height,a,{position:l.position}),o.followLeader&&!r&&An(e,n.mapDimensions.width,n.mapDimensions.height,a,{position:l.position},70),r){let c,d=15;if("position"in r)c=r.position;else if("targetEntityId"in r){const h=n.entities.entities.get(r.targetEntityId);h&&(c=h.position,d=h.radius||30)}if(c&&r.action!==we.AutopilotFollowMe&&!l.isCallingToFollow){const h=(p,m)=>{mC(p,m.position,d,r.action,n.time)};An(e,n.mapDimensions.width,n.mapDimensions.height,h,{position:{...c}},c,d+30)}}}function Nm(e,n,r,o,l,a,c=!0){const d=n.split(" ");let h="";const p=[];for(let m=0;m<d.length;m++){const y=h+d[m]+" ";e.measureText(y).width>l&&m>0?(p.push(h),h=d[m]+" "):h=y}if(p.push(h),c)for(let m=0;m<p.length;m++)e.fillText(p[m],r,o+m*a);return p.length*a}function SC(e){return 1-Math.pow(1-e,3)}function AC(e,n,r,o){n.notificationButtonRects={dismiss:new Map,view:new Map};const l=n.notifications.filter(c=>!c.isDismissed);if(l.length===0)return;e.save();let a=o-uw;for(const c of l){const d=r-el-Zi;e.font=`${Qc}px "Press Start 2P", Arial`;const h=d+Zi,p=el-Zi*2,m=Nm(e,c.message,-9999,-9999,p,Qc*1.2,!1),y=Zi*2+m+Ln,S=a-y,E=Date.now()-c.creationTime,P=Math.min(E/lw,1),_=SC(P),T=o,U=T+(S-T)*_;e.fillStyle=nw,e.beginPath(),e.roundRect(d,U,el,y,tw),e.fill(),e.fillStyle=iw,e.textBaseline="top",Nm(e,c.message,h,U+Zi,p,Qc*1.2,!0);const L=U+y-Ln-Zi/2,D=d+el-Ln-Zi/2,x={x:D,y:L,width:Ln,height:Ln};n.notificationButtonRects.dismiss.set(c.id,x);const W=n.hoveredButtonId===`notification-dismiss-${c.id}`;if(e.fillStyle=W?sm:rw,e.font=`${Ln}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("",x.x+x.width/2,x.y+x.height/2),c.targetEntityIds||c.targetPosition||c.targetArea||c.targetRadius){const ue={x:D-Ln-om,y:L,width:Ln,height:Ln};n.notificationButtonRects.view.set(c.id,ue);const Ee=n.hoveredButtonId===`notification-view-${c.id}`;e.fillStyle=Ee?sm:ow,e.font=`${Ln*(Ee?1.5:1.2)}px Arial`,e.fillText("",ue.x+ue.width/2,ue.y+ue.height/2)}a-=y+om}e.restore()}function wf(e,n,r){if(!n.aiBehaviorTree||!n.aiBlackboard)return;const o=n.aiBlackboard.getNodeExecutionData(),l=n.aiBehaviorTree;e.save(),e.font=`${CI}px Arial`,e.textAlign="left",e.textBaseline="top";const a=S=>{switch(S){case I.SUCCESS:return PI;case I.FAILURE:return NI;case I.RUNNING:return DI;case I.NOT_EVALUATED:case null:default:return kI}},c=S=>{if(!S.name||!o.has(S.name))return{width:0,height:0};let E=0,P=0;const _=o.get(S.name),T=` ${S.name}`+(_!=null&&_.debugInfo?`: ${_.debugInfo}`:""),U=e.measureText(T).width,L=(S.depth??0)*Jp+8+U+tm+Qo+20;if(E=Math.max(E,L),P+=Xc,S.children)for(const D of S.children){const x=c(D);E=Math.max(E,x.width),P+=x.height}else if(S.child){const D=c(S.child);E=Math.max(E,D.width),P+=D.height}return{width:E,height:P}},d=(S,E,P,_)=>{if(!S.name||!o.has(S.name))return E;let T=E;const U=o.get(S.name),L=P+2+(S.depth??0)*Jp;let D=I.NOT_EVALUATED,x=em,W="";if(U){D=U.status,W=U.debugInfo;const ue=OI/Xt*Vt,Ee=r-U.lastExecuted,_e=Math.max(0,1-Ee/ue);x=Fw(em,MI,_e),Ee>Is&&(D=I.NOT_EVALUATED)}const F=a(D);e.fillStyle=F,e.fillText("",L,T),e.fillStyle=x;const Y=` ${S.name}`+(W?`: ${W}`:"");if(e.fillText(Y,L+8,T),U&&U.executionHistory.length>0){const{executionHistory:ue}=U,Ee=k0/Xt*Vt,_e=r,xe=_e-Ee,De=P+_-Qo-tm;let Te=De;const le=T+(Xc-Za)/2,Fe=ue.filter(V=>V.time<xe);let ve=Fe.length>0?Fe[Fe.length-1].status:null,J=xe;const b=ue.filter(V=>V.time>=xe&&V.time<=_e),j=Qo/Ee;e.fillStyle="rgba(255, 255, 255, 0.1)",e.fillRect(De,le,Qo,Za);for(const V of b){const he=(V.time-J)*j;he>0&&(e.fillStyle=a(ve),e.fillRect(Te,le,he,Za),Te+=he),ve=V.status,J=V.time}r-J>Is&&(ve=I.NOT_EVALUATED);const C=(_e-J)*j;e.fillStyle=a(ve);const O=De+Qo-Te;e.fillRect(Te,le,Math.min(C,O),Za)}if(T+=Xc,S.children)for(const ue of S.children)T=d(ue,T,P,_);else S.child&&(T=d(S.child,T,P,_));return T},{width:h,height:p}=c(l);if(p===0){e.restore();return}const m=n.position.x+EI,y=n.position.y+_I-p/2;e.fillStyle=RI,e.fillRect(m,y,h,p+4),d(l,y+2,m,h),e.restore()}const TC={moving:"walk",gathering:"gathering",eating:"eat",feeding:"eat",procreating:"procreate",idle:"idle",attacking:"attacking",planting:"gathering"};function IC(e,n){var d;const{radius:r,position:o,activeAction:l="idle"}=n,a=((d=n.stateMachine)==null?void 0:d[0])||"N/A",c=n.isAdult?vt+20:vt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${l}`,o.x,o.y-c),e.fillText(`State: ${a}`,o.x,o.y-c+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-c+20),e.fillText(`Cooldown: ${n.attackCooldown||"N/A"}`,o.x,o.y-c+30),e.fillText(`Tribe: ${n.leaderId||"N/A"}`,o.x,o.y-c+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(255, 0, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function wC(e,n,r,o,l){e.save(),e.font=`${Rd}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(r,n.x,n.y-(o?vt:so)-Rd-l),e.restore()}function EC(e,n,r,o,l){const a=n.x,c=n.y-r-o/2;e.save(),e.fillStyle=l,e.strokeStyle=l,e.lineWidth=1.5,e.beginPath(),e.rect(a-o/2,c,o,o/2),e.fill(),e.beginPath(),e.moveTo(a-o/2,c),e.lineTo(a-o/4,c-o/3),e.lineTo(a-o/6,c),e.moveTo(a-o/6,c),e.lineTo(a,c-o/2),e.lineTo(a+o/6,c),e.moveTo(a+o/6,c),e.lineTo(a+o/4,c-o/3),e.lineTo(a+o/2,c),e.stroke(),e.restore()}function _C(e,n,r){var d;const{position:o,radius:l}=n,a=o.x-jc/2,c=o.y-l-dI;if(((d=n.stateMachine)==null?void 0:d[0])===Ui){const h=n.stateMachine[1],p=r-h.attackStartTime,m=Math.min(p/S0,1);Vr(e,a,c,jc,Xp,m,Wr,fI)}else if(n.attackCooldown&&n.attackCooldown>0){const h=1-n.attackCooldown/Gl;Vr(e,a,c,jc,Xp,h,Wr,hI)}}function CC(e,n,r){const l="";e.save(),e.font="15px Arial",e.textAlign="center",e.textBaseline="bottom",e.shadowColor="black",e.shadowBlur=3,e.fillText(l,n.x,n.y-r),e.restore()}function RC(e,n,r=!1,o=!1,l=!1,a=!1,c=!1,d=!1,h=!1,p=!1,m,y){const{position:S,activeAction:E="idle"}=n,P=n.isAdult?vt:vt*.6,_=TC[E]||"idle";If.render(e,S.x-P,S.y-P,P*2,P*2,n.animationProgress||0,_,n.gender,n.age,[n.direction.x,n.direction.y],n.isPregnant??!1,n.hunger),d&&(e.save(),e.strokeStyle=N0,e.lineWidth=2,e.beginPath(),e.arc(S.x,S.y,P+3,0,2*Math.PI),e.stroke(),e.restore());let T,U;if(c?(T=VT,U=P0):r?(T=jT,U=Vd):l?(T=XT,U=WT):o?(T=KT,U=C0):a&&(T=QT,U=R0),T&&U&&EC(e,S,P,T,U),n.tribeBadge&&wC(e,S,n.tribeBadge,n.isAdult??!1,T??0),h){let D=(n.isAdult?vt:so)+5;T&&(D+=T),n.tribeBadge&&(D+=Rd),CC(e,S,D)}const L=p&&(y===void 0||n.id===y);L&&n.aiBlackboard&&wf(e,n,m),_C(e,n,m),L&&IC(e,n)}const PC={grazing:"eat",moving:"walk",procreating:"procreate",feeding:"eat",idle:"idle"};function NC(e,n){var d;const{radius:r,position:o,activeAction:l="idle"}=n,a=((d=n.stateMachine)==null?void 0:d[0])||"N/A",c=n.isAdult?vt+20:vt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${l}`,o.x,o.y-c),e.fillText(`State: ${a}`,o.x,o.y-c+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-c+20),e.fillText(`Hunger: ${Math.round(n.hunger)}`,o.x,o.y-c+30),e.fillText(`Age: ${Math.round(n.age)}`,o.x,o.y-c+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(0, 255, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function DC(e,n,r=!1,o=0,l){var m,y;const{position:a,activeAction:c="idle"}=n,d=n.isAdult?n.radius:n.radius*.6,h=PC[c]||"idle";if(uv.render(e,a.x-d,a.y-d,d*2,d*2,n.animationProgress||0,h,{gender:n.gender,age:n.age,direction:[((m=n.direction)==null?void 0:m.x)||1,((y=n.direction)==null?void 0:y.y)||0],isPregnant:n.isPregnant??!1,hungryLevel:n.hunger,geneCode:n.geneCode}),n.hitpoints<n.maxHitpoints){const S=d*1.5,E=3,P=a.x-S/2,_=a.y-d-8;e.fillStyle="#555",e.fillRect(P,_,S,E);const T=n.hitpoints/n.maxHitpoints;e.fillStyle=T>.5?"#4CAF50":T>.25?"#FFC107":"#F44336",e.fillRect(P,_,S*T,E)}const p=r&&(l===void 0||n.id===l);p&&n.aiBlackboard&&wf(e,n,o),p&&NC(e,n)}const kC={attacking:"attacking",eating:"eat",moving:"walk",procreating:"procreate",feeding:"eat",idle:"idle"};function MC(e,n){var d;const{radius:r,position:o,activeAction:l="idle"}=n,a=((d=n.stateMachine)==null?void 0:d[0])||"N/A",c=n.isAdult?vt+20:vt*.6+20;e.save(),e.fillStyle="white",e.font="10px Arial",e.textAlign="center",e.fillText(`Action: ${l}`,o.x,o.y-c),e.fillText(`State: ${a}`,o.x,o.y-c+10),e.fillText(`HP: ${n.hitpoints}`,o.x,o.y-c+20),e.fillText(`Hunger: ${Math.round(n.hunger)}`,o.x,o.y-c+30),e.fillText(`Age: ${Math.round(n.age)}`,o.x,o.y-c+40),e.restore(),e.beginPath(),e.arc(o.x,o.y,r,0,Math.PI*2),e.strokeStyle="rgba(255, 0, 0, 0.5)",e.lineWidth=1,e.stroke(),e.closePath()}function OC(e,n,r=!1,o=0,l){var m,y;const{position:a,activeAction:c="idle"}=n,d=n.isAdult?n.radius:n.radius*.6,h=kC[c]||"idle";if(cv.render(e,a.x-d,a.y-d,d*2,d*2,n.animationProgress||0,h,{gender:n.gender,age:n.age,direction:[((m=n.direction)==null?void 0:m.x)||1,((y=n.direction)==null?void 0:y.y)||0],isPregnant:n.isPregnant??!1,hungryLevel:n.hunger,geneCode:n.geneCode}),n.hitpoints<n.maxHitpoints){const S=d*1.5,E=3,P=a.x-S/2,_=a.y-d-8;e.fillStyle="#555",e.fillRect(P,_,S,E);const T=n.hitpoints/n.maxHitpoints;e.fillStyle=T>.5?"#4CAF50":T>.25?"#FFC107":"#F44336",e.fillRect(P,_,S*T,E)}(n.attackCooldown&&n.attackCooldown>0||n.huntCooldown&&n.huntCooldown>0)&&(e.strokeStyle="#FF8C00",e.lineWidth=3,e.beginPath(),e.arc(a.x,a.y,d+3,0,2*Math.PI),e.stroke());const p=r&&(l===void 0||n.id===l);p&&n.aiBlackboard&&wf(e,n,o),p&&MC(e,n)}const dv=15;function Dm(e,n,r,o,l=1.5){const a=r-n.startTime,c=Math.min(a/n.duration,1),d=1-c,p=1+Math.sin(c*Math.PI*2)*(l-1),m=dv*p;e.save(),e.globalAlpha=d,e.beginPath(),e.arc(n.position.x,n.position.y,Math.max(0,m),0,Math.PI*2),e.fillStyle=o,e.fill(),e.restore()}function Gr(e,n,r,o,l=2){const a=r-n.startTime,c=Math.min(a/n.duration,1),d=1-c,h=dv*2*c;e.save(),e.globalAlpha=d,e.beginPath(),e.arc(n.position.x,n.position.y,h,0,Math.PI*2),e.strokeStyle=o,e.lineWidth=l,e.stroke(),e.restore()}function _i(e,n,r,o){const l=r-n.startTime,a=Math.min(l/n.duration,1),c=1-a,d=-20*a;e.save(),e.globalAlpha=c,e.font="20px Arial",e.textAlign="center",e.fillText(o,n.position.x,n.position.y+d),e.restore()}function FC(e,n,r){switch(n.type){case se.Hunger:Dm(e,n,r,"rgba(255, 165, 0, 0.7)",1);break;case se.Procreation:_i(e,n,r,"");break;case se.Pregnant:Dm(e,n,r,"rgba(255, 105, 180, 0.7)",1.2);break;case se.TargetAcquired:Gr(e,n,r,"rgba(255, 0, 0, 0.8)",3);break;case se.Attack:_i(e,n,r,"");break;case se.Partnered:_i(e,n,r,"");break;case se.BushClaimed:Gr(e,n,r,"rgba(0, 255, 0, 0.7)",2);break;case se.BushClaimLost:Gr(e,n,r,"rgba(128, 128, 128, 0.7)",2);break;case se.Eating:_i(e,n,r,"");break;case se.ChildFed:_i(e,n,r,"");break;case se.AttackDeflected:_i(e,n,r,"");break;case se.AttackResisted:_i(e,n,r,"");break;case se.Hit:_i(e,n,r,"");break;case se.SeizeBuildup:Gr(e,n,r,"rgba(255, 215, 0, 0.8)",4);break;case se.Seize:Gr(e,n,r,"rgba(148, 0, 211, 0.8)",4);break;case se.CallToAttack:Gr(e,n,r,"rgba(255, 255, 0, 0.8)",4);break}}function km(e,n,r,o,l,a,c){e.save();const{position:d}=n;e.strokeStyle=o,e.lineWidth=l+Math.sin(c*a)*(l/2),e.setLineDash([8,8]),e.beginPath(),e.arc(d.x,d.y,r,0,2*Math.PI),e.stroke(),e.restore()}function UC(e,n,r){const o=wt(n),l=o?It(n,o):[],a=ni(l),{width:c,height:d}=n.mapDimensions;Array.from(n.entities.entities.values()).sort((m,y)=>m.position.y-y.position.y||m.id-y.id).forEach(m=>{var y,S;if(m.type==="berryBush")An(e,c,d,uC,m,n,o,n.time);else if(m.type==="human"){const E=m,P=E.id===(o==null?void 0:o.id),_=l.some(F=>F.id===E.id),T=E.id===(a==null?void 0:a.id),U=o&&(E.id===o.motherId||E.id===o.fatherId),L=o&&(((y=E.partnerIds)==null?void 0:y.includes(o.id))||((S=o.partnerIds)==null?void 0:S.includes(E.id))),D=(o==null?void 0:o.attackTargetId)===E.id,x=E.leaderId?n.entities.entities.get(E.leaderId):void 0,W=o?E.leaderId===o.id&&E.activeAction==="moving"&&E.target===E.leaderId&&(x==null?void 0:x.isCallingToFollow):!1;An(e,c,d,RC,E,P,U,_,L,T,D,W,r,n.time,n.debugCharacterId)}else m.type==="corpse"?An(e,c,d,hC,m):m.type==="prey"?An(e,c,d,DC,m,r,n.time,n.debugCharacterId):m.type==="predator"&&An(e,c,d,OC,m,r,n.time,n.debugCharacterId)}),n.visualEffects.forEach(m=>{An(e,c,d,FC,m,n.time)});const p=n.notifications.filter(m=>!m.isDismissed);for(const m of p)if(m.highlightedEntityIds&&m.renderHighlights)for(const y of m.highlightedEntityIds){const S=n.entities.entities.get(y);S&&An(e,c,d,km,S,cw,dw,hw,fw,n.time)}if(n.tutorialState.isActive&&n.tutorialState.highlightedEntityIds.size>0)for(const m of n.tutorialState.highlightedEntityIds){const y=n.entities.entities.get(m);y&&An(e,c,d,km,y,zI,M0,O0,Qd,n.time)}}function LC(e,n,r,o,l,a){let c=null,d=null;e.textAlign="left";let h=Yt+Ri;const m=n.time/(Vt/Xt)/Bl%1,y=qo[br.Time],S=25,E=Yt+S;e.fillText(y,Yt,h+Jt/2+Ri/3),Vr(e,E,h,wi,Jt,m,Wr,iI),h+=Jt+qn;const P=h+Qi/2,_=h+(Qi-Jt)/2,T=5;ks(e,{x:Yt*2,y:P},Qi,5,r.gender,!1,!1,!1);const U=Yt+Qi+T,L=wi+S-(Qi+T)*2;Vr(e,U,_,L,Jt,Math.floor(r.age)/As,Wr,nI),ks(e,{x:U+L+T+Qi/2,y:P},Qi,As,r.gender,!1,!1,!1),h+=Jt+qn*2;const D=[],x=new Set;if(D.push({member:r,isPlayer:!0,isHeir:!1,isPartner:!1,isParent:!1}),x.add(r.id),o&&!x.has(o.id)&&(D.push({member:o,isPlayer:!1,isHeir:!0,isPartner:!1,isParent:!1}),x.add(o.id)),l.forEach(le=>{x.has(le.id)||(D.push({member:le,isPlayer:!1,isHeir:!1,isPartner:!0,isParent:!1}),x.add(le.id))}),a.forEach(le=>{x.has(le.id)||(D.push({member:le,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!1}),x.add(le.id))}),r.motherId&&!x.has(r.motherId)){const le=n.entities.entities.get(r.motherId);le&&(D.push({member:le,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!0}),x.add(le.id))}if(r.fatherId&&!x.has(r.fatherId)){const le=n.entities.entities.get(r.fatherId);le&&(D.push({member:le,isPlayer:!1,isHeir:!1,isPartner:!1,isParent:!0}),x.add(le.id))}const W=qo[br.Family],F=10,Y=Yt+Ri+F,ue=wi+S-(Ri+F),Ee=h+Ka/2;e.font=`${Ri}px "Press Start 2P", Arial`,e.textBaseline="middle",e.fillText(W,Yt,Ee);const _e=h+Ka/2;iC(e,Y,_e,D,Ka,ue),h+=Ka+qn,e.textBaseline="alphabetic";const xe=qo[br.Hitpoints];e.fillText(xe,Yt,h+Jt/2+Ri/3),Vr(e,E,h,wi,Jt,r.hitpoints/r.maxHitpoints,Wr,tI),h+=Jt+qn;const De=qo[br.Hunger];e.fillText(De,Yt,h+Jt/2+Ri/3),Vr(e,E,h,wi,Jt,(tn-r.hunger)/tn,Wr,eI),c={x:Yt,y:h-qn/2,width:wi+S,height:Jt+qn},h+=Jt+qn,e.textBaseline="middle";const Te=qo[br.Food];return e.fillText(Te,Yt,h+Xa/2),gC(e,E,h+Xa/2,r.food,Xa,wi),d={x:Yt,y:h-qn/5,width:wi+S,height:Xa+qn},e.textBaseline="alphabetic",{hungerBarRect:c,foodBarRect:d}}let ns=[],Mm=0;const HC=36,BC=200;function GC(e,n,r,o){const l=n.search.prey.count(),a=n.search.predator.count(),c=n.search.berryBush.count();n.time-Mm>=HC&&(ns.push({time:n.time,prey:l,predators:a,bushes:c}),ns.length>BC&&(ns=ns.slice(-200)),Mm=n.time);const d=Ze*Je,h=l/d*1e6,p=a/d*1e6,m=c/d*1e6,y=x1(),S=Math.floor(n.time/(24*365)),E=Math.floor(n.time%(24*365)/24),P=Math.floor(n.time%24),_=400,T=Math.min(o*.8,600),U=r-_-10,L=10;e.save(),e.fillStyle="rgba(0, 0, 0, 0.9)",e.fillRect(U,L,_,T),e.strokeStyle="#444",e.lineWidth=2,e.strokeRect(U,L,_,T),e.fillStyle="white",e.font="12px monospace",e.textAlign="left";let D=L+20;const x=14,W=U+15;e.fillStyle="#66ccff",e.font="bold 14px monospace",e.fillText(" Ecosystem Debugger",W,D),D+=25,e.fillStyle="white",e.font="12px monospace",e.fillText(`Game Time: Year ${S}, Day ${E}, Hour ${P}`,W,D),D+=x,e.fillText(`Map Size: ${Ze}  ${Je} pixels`,W,D),D+=20,e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Q-Learning Status",W,D),D+=18,y&&(e.fillText(`Q-Table Size: ${y.qTableSize} entries`,W,D),D+=x,e.fillText(`Exploration Rate: ${(y.explorationRate*100).toFixed(1)}%`,W,D),D+=x);const F=ns.slice(-20);F.length>1&&(e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Population Trends (Last 20 Points)",W,D),D+=30,xC(e,W,D,F),D+=50),e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Density (per 1000 px)",W,D),D+=18,e.fillStyle="white",e.font="12px monospace";const Y=(ds/d*1e6).toFixed(2),ue=(fs/d*1e6).toFixed(2),Ee=(hs/d*1e6).toFixed(2);e.fillText(`Prey: ${h.toFixed(2)} (target: ${Y})`,W,D),D+=x,e.fillText(`Predators: ${p.toFixed(2)} (target: ${ue})`,W,D),D+=x,e.fillText(`Bushes: ${m.toFixed(2)} (target: ${Ee})`,W,D),D+=20,e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Current Population Status",W,D),D+=18,e.fillStyle="white",e.font="12px monospace";const _e=Math.round(l/ds*100),xe=Math.round(a/fs*100),De=Math.round(c/hs*100),Te=le=>le<50?"#ff4444":le<80?"#ffaa44":le>120?"#44aaff":"#44ff44";e.fillStyle=Te(_e),e.fillText(`Prey: ${l}/${ds} (${_e}%)`,W,D),D+=x,e.fillStyle=Te(xe),e.fillText(`Predators: ${a}/${fs} (${xe}%)`,W,D),D+=x,e.fillStyle=Te(De),e.fillText(`Bushes: ${c}/${hs} (${De}%)`,W,D),D+=20,e.fillStyle="#66ccff",e.font="bold 13px monospace",e.fillText(" Current Parameters",W,D),D+=18,e.fillStyle="white",e.font="10px monospace",e.fillText("Prey:",W,D),D+=13,e.fillText(` Gestation: ${n.ecosystem.preyGestationPeriod.toFixed(1)}h`,W,D),D+=11,e.fillText(` Procreation: ${n.ecosystem.preyProcreationCooldown.toFixed(1)}h`,W,D),D+=11,e.fillText(` Hunger: ${n.ecosystem.preyHungerIncreasePerHour.toFixed(1)}/h`,W,D),D+=13,e.fillText("Predators:",W,D),D+=13,e.fillText(` Gestation: ${n.ecosystem.predatorGestationPeriod.toFixed(1)}h`,W,D),D+=11,e.fillText(` Procreation: ${n.ecosystem.predatorProcreationCooldown.toFixed(1)}h`,W,D),D+=11,e.fillText(` Hunger: ${n.ecosystem.predatorHungerIncreasePerHour.toFixed(1)}/h`,W,D),D+=13,e.fillText("Bushes:",W,D),D+=13,e.fillText(` Spread Chance: ${(n.ecosystem.berryBushSpreadChance*100).toFixed(1)}%`,W,D),D+=15,e.fillStyle="#888",e.font="10px monospace",e.textAlign="center",e.fillText("Press '1' to toggle this debugger",U+_/2,L+T-10),e.restore()}function xC(e,n,r,o){if(o.length<2)return;const d={prey:Math.max(...o.map(p=>p.prey),ds),predators:Math.max(...o.map(p=>p.predators),fs),bushes:Math.max(...o.map(p=>p.bushes),hs)};[{data:o.map(p=>p.prey),color:"#44ff44",label:"Prey",target:ds,max:d.prey},{data:o.map(p=>p.predators),color:"#ff4444",label:"Predators",target:fs,max:d.predators},{data:o.map(p=>p.bushes),color:"#ffaa44",label:"Bushes",target:hs,max:d.bushes}].forEach((p,m)=>{const y=n+m*115,S=r;e.fillStyle=p.color,e.font="10px monospace",e.fillText(p.label,y,S-5),e.strokeStyle="#333",e.lineWidth=1,e.strokeRect(y,S,100,30),e.beginPath(),e.strokeStyle=p.color;for(let P=0;P<p.data.length;P++){const _=y+P/(p.data.length-1)*100,T=S+30-p.data[P]/p.max*30;P===0?e.moveTo(_,T):e.lineTo(_,T)}e.stroke(),e.beginPath(),e.strokeStyle="#888",e.setLineDash([2,2]);const E=S+30-p.target/p.max*30;e.moveTo(y,E),e.lineTo(y+100,E),e.stroke(),e.setLineDash([])})}function Dl(e,n,r,o,l,a=!1,c=!1){var h;if(e.save(),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="#2c5234",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.translate(e.canvas.width/2-o.x,e.canvas.height/2-o.y),!a&&n.gameOver){e.restore(),aC(e,n);return}UC(e,n,r);const d=n.notifications.filter(p=>!p.isDismissed);for(const p of d){const m=(Math.sin(n.time*aw)+1)/2;e.globalAlpha=m*.5+.25,e.fillStyle=sw,p.targetArea&&e.fillRect(p.targetArea.x,p.targetArea.y,p.targetArea.width,p.targetArea.height),p.targetRadius&&(e.beginPath(),e.arc(p.targetRadius.x,p.targetRadius.y,p.targetRadius.radius,0,Math.PI*2),e.fill())}if(e.globalAlpha=1,yC(e,n),e.restore(),!a){e.fillStyle=qT,e.font=`${Ri}px "Press Start 2P", Arial`,e.shadowColor=ZT,e.shadowBlur=JT,n.uiButtons=[];const p=wt(n);let m=null,y=null;if(p){const P=It(n,p),_=ni(P),T=((h=p.partnerIds)==null?void 0:h.map(L=>n.entities.entities.get(L)).filter(L=>L!==void 0))||[],U=LC(e,n,p,_,T,P);m=U.hungerBarRect,y=U.foodBarRect}const S=K0(n,p==null?void 0:p.leaderId);rC(e,n,S,e.canvas.width,e.canvas.height);const{commandButtonsRect:E}=Y1(e,n,e.canvas.width);if(e.shadowColor="transparent",e.shadowBlur=0,p&&(pC(e,n,o,e.canvas.width,e.canvas.height),l.length>0&&K1(e,l,p,o,e.canvas.width,e.canvas.height,n.mapDimensions)),n.tutorialState.activeUIHighlights.size>0){const{activeUIHighlights:P}=n.tutorialState;P.has(ar.HUNGER_BAR)&&m&&fd(e,m,n.time),P.has(ar.FOOD_BAR)&&y&&fd(e,y,n.time),P.has(ar.COMMAND_BUTTONS)&&E&&fd(e,E,n.time)}if(n.tutorialState.isActive){const P=sC(e,n,e.canvas.width,e.canvas.height);P&&n.uiButtons.push({id:"tutorial-dismiss",action:Ue.DismissTutorial,rect:P,text:"",currentWidth:P.width,backgroundColor:"transparent",textColor:"transparent"})}AC(e,n,e.canvas.width,e.canvas.height),c&&GC(e,n,e.canvas.width,e.canvas.height),n.isPaused&&j1(e)}}const bC=$n.div`
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
`,$C=$n.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #2c5234;
`,zC=$n.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  z-index: 1;
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0.7) 100%);
`,WC=$n.h1`
  font-family: 'Press Start 2P', cursive;
  font-size: 4rem;
  color: #fff;
  text-shadow: 4px 4px 0px #ff0000;
  margin-bottom: 2rem;
`,YC=$n.button`
  font-family: 'Press Start 2P', cursive;
  font-size: 1.5rem;
  padding: 1rem 2rem;
  color: #fff;
  background-color: #ff0000;
  border: 2px solid #fff;
  box-shadow: 4px 4px 0px #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;

  &:hover {
    background-color: #fff;
    color: #ff0000;
    box-shadow: 4px 4px 0px #ff0000;
  }
`,gd="intro-soundtrack",Om=()=>{const{setAppState:e}=kl(),n=Pe.useRef(null),r=Pe.useRef(null),o=Pe.useRef(r1()),l=Pe.useRef(),a=Pe.useRef(o.current.viewportCenter),c=Pe.useRef();Pe.useEffect(()=>(ff(Ae.SoundTrack1,{loop:!0,trackId:gd}),()=>{gm(gd,2)}),[]),Pe.useEffect(()=>{const m=n.current;if(!m)return;r.current=m.getContext("2d");const y=()=>{m&&r.current&&(m.width=window.innerWidth,m.height=window.innerHeight,Dl(r.current,o.current,!1,a.current,[],!0,!1))};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),Pe.useEffect(()=>{const m=()=>{const S=Gw(o.current);if(S.length>0){const E=Math.floor(Math.random()*S.length);c.current=S[E].id}};m();const y=setInterval(m,QI);return()=>clearInterval(y)},[]);const[d,h]=c0(m=>{if(!r.current)return;if(l.current===void 0){l.current=m;return}const y=Math.min((m-l.current)/1e3,1);o.current=Yl(o.current,y);const S=c.current?o.current.entities.entities.get(c.current):void 0;if(S){const{mapDimensions:E}=o.current,{width:P,height:_}=E;let T={...S.position};const U=T.x-a.current.x;Math.abs(U)>P/2&&(U>0?T.x-=P:T.x+=P);const L=T.y-a.current.y;Math.abs(L)>_/2&&(L>0?T.y-=_:T.y+=_);let D=sf(a.current,T,xd*y);D={x:(D.x%P+P)%P,y:(D.y%_+_)%_},a.current=D}Dl(r.current,o.current,!1,a.current,[],!0,!1),l.current=m});Pe.useEffect(()=>(h(),d),[h,d]);const p=()=>{gm(gd,2),e("game")};return Le.jsxs(bC,{children:[Le.jsx($C,{ref:n}),Le.jsxs(zC,{children:[Le.jsx(WC,{children:"Tribe"}),Le.jsx(YC,{onClick:p,children:"Start Game"})]})]})};function jC(){console.log("Tribe game initialized with detailed 2D world state.");const e=i1();return e.ecosystem={preyGestationPeriod:Zd,preyProcreationCooldown:Jd,predatorGestationPeriod:ef,predatorProcreationCooldown:tf,preyHungerIncreasePerHour:nf,predatorHungerIncreasePerHour:rf,berryBushSpreadChance:of},e}const VC=({canvasRef:e,ctxRef:n,gameStateRef:r,isDebugOnRef:o,viewportCenterRef:l,playerActionHintsRef:a})=>(Pe.useEffect(()=>{const c=e.current;if(!c)return;n.current=c.getContext("2d");const d=()=>{c&&n.current&&r.current&&(c.width=window.innerWidth,c.height=window.innerHeight,Dl(n.current,r.current,o.current===!0,l.current,a.current,!1,!1))};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),Le.jsx("canvas",{ref:e,style:{display:"block",background:"#2c5234"}})),XC=(e,n,r)=>{let o;const l=xw(e,r);if(l)if(n.isAdult&&l.type==="berryBush"&&l.food.length>0)o={action:we.AutopilotGather,targetEntityId:l.id};else if(n.isAdult&&l.type==="corpse"&&l.food.length>0)o={action:we.AutopilotGather,targetEntityId:l.id};else if(l.type==="human"){const a=l;n.isAdult&&lo(n,a,r)?o={action:we.AutopilotAttack,targetEntityId:a.id}:cr(n,a,r)?o={action:we.AutopilotProcreate,targetEntityId:a.id}:n.food.length>0&&!a.isAdult&&(a.motherId===n.id||a.fatherId===n.id)&&(o={action:we.AutopilotFeedChild,targetEntityId:a.id})}else l.type==="prey"?o={action:we.AutopilotAttack,targetEntityId:l.id}:l.type==="predator"&&(o={action:we.AutopilotAttack,targetEntityId:l.id});else r.autopilotControls.isManuallyPlanting&&n.food.filter(a=>a.type===ti.Berry).length>=Ts&&uf(e,r,1,xl,n.id)?o={action:we.AutopilotPlant,position:e}:o={action:we.AutopilotMove,position:e};return o},KC=(e,n)=>{if(e.isPaused||!wt(e))return;const o=e.autopilotControls.hoveredAutopilotAction;e.autopilotControls.activeAutopilotAction=void 0,o?(e.autopilotControls.activeAutopilotAction=o,(o.action===we.AutopilotMove||o.action===we.AutopilotGather)&&(e.hasPlayerMovedEver=!0),o.action===we.AutopilotPlant&&(e.hasPlayerPlantedBush=!0)):e.autopilotControls.activeAutopilotAction={action:we.AutopilotMove,position:n},e.autopilotControls.isManuallyMoving=!1,e.autopilotControls.isManuallyPlanting=!1},QC=(e,n,r,o)=>{var c,d;let l=!0,a=n;switch(e){case"m":n.isMuted=!n.isMuted,gs(n.masterVolume,n.isMuted);break;case"=":case"+":const h=Math.min(1,n.masterVolume+.1);n.masterVolume=parseFloat(h.toFixed(1)),gs(n.masterVolume,n.isMuted);break;case"-":const p=Math.max(0,n.masterVolume-.1);n.masterVolume=parseFloat(p.toFixed(1)),gs(n.masterVolume,n.isMuted);break;case"t":a=Yl(n,w0);break;case" ":case"p":n.isPaused=!n.isPaused;break;case"":case"`":r.current=!r.current,r.current?a.debugCharacterId=((c=wt(a))==null?void 0:c.id)??((d=Array.from(a.entities.entities.values()).find(y=>y.type==="human"||y.type==="prey"||y.type==="predator"))==null?void 0:d.id):a.debugCharacterId=void 0;break;case"1":o&&(o.current=!o.current);break;case"tab":r.current=!0;const m=Array.from(a.entities.entities.values()).filter(y=>y.type==="human"||y.type==="prey"||y.type==="predator");if(m.length>0){const y=m.sort((_,T)=>{if(_.type==="human"&&_.isPlayer)return-1;if(T.type==="human"&&T.isPlayer)return 1;if(_.type!==T.type){const U={human:0,prey:1,predator:2},L=U[_.type]??999,D=U[T.type]??999;return L-D}return _.id-T.id}),S=a.debugCharacterId,P=((S?y.findIndex(_=>_.id===S):-1)+1)%y.length;a.debugCharacterId=y[P].id}else a.debugCharacterId=void 0;break;default:l=!1;break}return{newState:a,handled:l}},qC=(e,n,r,o,l)=>{const a={gameState:r};if(n&&["e","b","r","h"].includes(e)&&r.hasPlayerEnabledAutopilot++,e==="e"){if(n){r.autopilotControls.behaviors.gathering=!r.autopilotControls.behaviors.gathering;return}const c=Ne(o,r,"berryBush",mt,p=>p.food.length>0&&o.food.length<o.maxFood),d=Ne(o,r,"corpse",mt,p=>p.food.length>0&&o.food.length<o.maxFood);let h=null;c&&d?h=X(o.position,c.position,r.mapDimensions.width,r.mapDimensions.height)<=X(o.position,d.position,r.mapDimensions.width,r.mapDimensions.height)?c:d:h=c||d,h&&(o.activeAction="gathering",Me(a,Ae.Gather,o.position))}else if(e==="r"){if(n){r.autopilotControls.behaviors.procreation=!r.autopilotControls.behaviors.procreation;return}Ne(o,r,"human",mt,d=>cr(o,d,r))&&(o.activeAction="procreating",Me(a,Ae.Procreate,o.position))}else if(e==="f")o.food.length>0&&(o.activeAction="eating",Me(a,Ae.Eat,o.position));else if(e==="h"){if(n){r.autopilotControls.behaviors.feedChildren=!r.autopilotControls.behaviors.feedChildren;return}const c=l.find(d=>d.type===we.FeedChild);c&&c.targetEntity&&(o.activeAction="feeding",o.target=c.targetEntity.id)}else if(e==="arrowup"||e==="w")o.direction.y=-1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowdown"||e==="s")o.direction.y=1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowleft"||e==="a")o.direction.x=-1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="arrowright"||e==="d")o.direction.x=1,o.activeAction="moving",o.target=void 0,r.hasPlayerMovedEver=!0,r.autopilotControls.isManuallyMoving=!0,r.autopilotControls.activeAutopilotAction=void 0;else if(e==="q"){if(n){r.autopilotControls.behaviors.attack=!r.autopilotControls.behaviors.attack;return}const c=Ne(o,r,"human",xn,d=>lo(o,d,r))??Ne(o,r,"predator",xn)??Ne(o,r,"prey",xn);c&&(o.activeAction="attacking",o.attackTargetId=c.id)}else if(e==="b"){if(n){r.autopilotControls.behaviors.planting=!r.autopilotControls.behaviors.planting;return}if(l.find(d=>d.type===we.Plant)){const d=uf(o.position,r,50,Ed);d&&(o.activeAction="planting",o.target=d,r.hasPlayerPlantedBush=!0)}}else e==="v"?(o.isCallingToAttack=!0,o.callToAttackEndTime=r.time+Jr,Ce(r,se.CallToAttack,o.position,Jr),Me(a,Ae.CallToAttack,o.position)):e==="c"?(o.isCallingToFollow=!0,o.callToFollowEndTime=r.time+ws,Ce(r,se.CallToFollow,o.position,ws),Me(a,Ae.CallToFollow,o.position)):e==="k"&&gf(o,r)},ZC=(e,n,r,o)=>{e==="arrowup"||e==="w"||e==="arrowdown"||e==="s"?n.direction.y=0:(e==="arrowleft"||e==="a"||e==="arrowright"||e==="d")&&(n.direction.x=0),!o.current.has("arrowup")&&!o.current.has("arrowdown")&&!o.current.has("arrowleft")&&!o.current.has("arrowright")&&!o.current.has("w")&&!o.current.has("a")&&!o.current.has("s")&&!o.current.has("d")&&(n.activeAction==="moving"&&(n.activeAction="idle"),r.autopilotControls.isManuallyMoving=!1),!o.current.has("e")&&n.activeAction==="gathering"&&(n.activeAction="idle"),!o.current.has("f")&&n.activeAction==="eating"&&(n.activeAction="idle"),!o.current.has("r")&&n.activeAction==="procreating"&&(n.activeAction="idle"),!o.current.has("h")&&n.activeAction==="feeding"&&(n.activeAction="idle")},JC=(e,n,r)=>{let l=wt(e);if(e.debugCharacterId){const a=e.entities.entities.get(e.debugCharacterId);a&&"position"in a&&(l=a)}if(l){const{mapDimensions:a}=e,{width:c,height:d}=a;let h={...l.position};const p=h.x-n.x;Math.abs(p)>c/2&&(p>0?h.x-=c:h.x+=c);const m=h.y-n.y;Math.abs(m)>d/2&&(m>0?h.y-=d:h.y+=d);let y=sf(n,h,xd*r);return y={x:(y.x%c+c)%c,y:(y.y%d+d)%d},y}return e.viewportCenter};function eR(e,n){const{width:r,height:o}=e.mapDimensions;e.viewportCenter={x:(n.x%r+r)%r,y:(n.y%o+o)%o}}const tR=(e,n,r)=>{const o={gameState:r},l=wt(r);l&&Me(o,Ae.ButtonClick,l.position);const a=r.uiButtons.find(d=>d.id===e.id);a&&(a.lastActivated=Date.now()),n&&[Ue.CommandGather,Ue.CommandPlant,Ue.ToggleProcreationBehavior].includes(e.action)&&r.hasPlayerEnabledAutopilot++;const{behaviors:c}=r.autopilotControls;switch(e.action){case Ue.ToggleMute:r.isMuted=!r.isMuted,gs(r.masterVolume,r.isMuted);break;case Ue.TogglePause:r.isPaused=!r.isPaused;break;case Ue.FastForward:return Yl(r,w0);case Ue.DismissTutorial:r.tutorialState.isActive=!1;break;case Ue.CommandEat:l&&l.food.length>0&&(l.activeAction="eating");break;case Ue.CommandGather:n?c.gathering=!c.gathering:l&&(l.activeAction="gathering");break;case Ue.CommandPlant:n?c.planting=!c.planting:l&&(r.autopilotControls.isManuallyPlanting=!0);break;case Ue.ToggleProcreationBehavior:c.procreation=!c.procreation;break;case Ue.ToggleAttackBehavior:c.attack=!c.attack;break;case Ue.ToggleFeedChildBehavior:c.feedChildren=!c.feedChildren;break;case Ue.ToggleAutopilotFollowLeaderBehavior:c.followLeader=!c.followLeader;break;case Ue.CommandCallToAttack:l&&l.leaderId===l.id&&(l.isCallingToAttack=!0,l.callToAttackEndTime=r.time+Jr,Ce(r,se.CallToAttack,l.position,Jr),Me(o,Ae.CallToAttack,l.position));break;case Ue.CommandFollowMe:n?c.followLeader=!c.followLeader:l&&l.leaderId===l.id&&(l.isCallingToFollow=!0,l.callToFollowEndTime=r.time+ws,Ce(r,se.CallToFollow,l.position,ws),Me(o,Ae.CallToFollow,l.position));break;case Ue.CommandTribeSplit:l&&gf(l,r);break;case Ue.ToggleDiplomacy:if(l&&l.leaderId&&e.targetTribeId){const d=l.leaderId,h=e.targetTribeId,p=r.entities.entities.get(h),m=l.diplomacy,y=p==null?void 0:p.diplomacy;if(m&&y){const E=(m.get(h)||Lt.Friendly)===Lt.Friendly?Lt.Hostile:Lt.Friendly;m.set(h,E),y.set(d,E)}}break}return r};function nR(e,n,r){if(!e.notificationButtonRects)return!1;const o=wt(e);for(const[l,a]of e.notificationButtonRects.dismiss.entries())if(n>=a.x&&n<=a.x+a.width&&r>=a.y&&r<=a.y+a.height)return Qw(e,l),o&&Me({gameState:e},Ae.ButtonClick,o.position),!0;for(const[l,a]of e.notificationButtonRects.view.entries())if(n>=a.x&&n<=a.x+a.width&&r>=a.y&&r<=a.y+a.height){const c=e.notifications.find(d=>d.id===l);if(c){let d=c.targetPosition;if(!d&&c.targetEntityIds&&c.targetEntityIds.length>0){const h=e.entities.entities.get(c.targetEntityIds[0]);h&&(d=h.position)}return d&&eR(e,d),o&&Me({gameState:e},Ae.ButtonClick,o.position),c.highlightedEntityIds&&(c.renderHighlights=!c.renderHighlights),!0}}return!1}const iR=({isActive:e,gameStateRef:n,canvasRef:r,viewportCenterRef:o,playerActionHintsRef:l,isDebugOnRef:a,isEcosystemDebugOnRef:c,keysPressed:d})=>(Pe.useEffect(()=>{const h=p=>{if(!e()||n.current.gameOver||!r.current||!p.target||p.target!==r.current)return;const m=r.current.getBoundingClientRect(),y=p.clientX-m.left,S=p.clientY-m.top;if(nR(n.current,y,S))return;const P=n.current.uiButtons.find(T=>y>=T.rect.x&&y<=T.rect.x+T.rect.width&&S>=T.rect.y&&S<=T.rect.y+T.rect.height);if(P){n.current=tR(P,p.shiftKey,n.current);return}const _=wm({x:y,y:S},o.current,{width:r.current.width,height:r.current.height},n.current.mapDimensions);KC(n.current,_)};return window.addEventListener("mousedown",h),()=>{window.removeEventListener("mousedown",h)}},[e,r,n,o]),Pe.useEffect(()=>{const h=p=>{if(!e()||!r.current)return;const m=r.current.getBoundingClientRect(),y=p.clientX-m.left,S=p.clientY-m.top;n.current.mousePosition={x:y,y:S};let E;if(n.current.notificationButtonRects){for(const[_,T]of n.current.notificationButtonRects.dismiss.entries())if(y>=T.x&&y<=T.x+T.width&&S>=T.y&&S<=T.y+T.height){E=`notification-dismiss-${_}`;break}if(!E){for(const[_,T]of n.current.notificationButtonRects.view.entries())if(y>=T.x&&y<=T.x+T.width&&S>=T.y&&S<=T.y+T.height){E=`notification-view-${_}`;break}}}if(!E)for(let _=n.current.uiButtons.length-1;_>=0;_--){const T=n.current.uiButtons[_];if(y>=T.rect.x&&y<=T.rect.x+T.rect.width&&S>=T.rect.y&&S<=T.rect.y+T.rect.height){E=T.id;break}}if(n.current.hoveredButtonId=E,E){n.current.autopilotControls.hoveredAutopilotAction=void 0;return}const P=wt(n.current);if(P){const _=wm({x:y,y:S},o.current,{width:r.current.width,height:r.current.height},n.current.mapDimensions);n.current.autopilotControls.hoveredAutopilotAction=XC(_,P,n.current)}else n.current.autopilotControls.hoveredAutopilotAction=void 0};return window.addEventListener("mousemove",h),()=>{window.removeEventListener("mousemove",h)}},[e,r,n,o]),Pe.useEffect(()=>{const h=m=>{if(!e()||n.current.gameOver)return;const y=m.key.toLowerCase();if((y===" "||y==="p"||y==="tab")&&m.preventDefault(),y==="escape"){n.current.autopilotControls.activeAutopilotAction=void 0;return}const S=QC(y,n.current,a,c);if(n.current=S.newState,S.handled)return;const E=wt(n.current);E&&(d.current.add(y),qC(y,m.shiftKey,n.current,E,l.current))},p=m=>{if(!e()||n.current.gameOver)return;const y=m.key.toLowerCase();d.current.delete(y);const S=wt(n.current);S&&ZC(y,S,n.current,d)};return window.addEventListener("keydown",h),window.addEventListener("keyup",p),()=>{window.removeEventListener("keydown",h),window.removeEventListener("keyup",p)}},[e,n,l,a,d]),null),rR=({gameStateRef:e,ctxRef:n,isDebugOnRef:r,isEcosystemDebugOnRef:o,viewportCenterRef:l,playerActionHintsRef:a,keysPressed:c,canvasRef:d,setAppState:h,appState:p})=>{const m=Pe.useRef(),[y,S,E]=c0(P=>{if(!n.current||!m.current){m.current=P;return}const _=Math.min(P-m.current,1e3)/1e3;e.current=Yl(e.current,_);const T=wt(e.current);T?a.current=pf(e.current,T):a.current=[],l.current=JC(e.current,l.current,_),Dl(n.current,e.current,r.current,l.current,a.current,!1,o.current),m.current=P,e.current.gameOver&&p!=="gameOver"&&(ff(Ae.GameOver,{masterVolume:e.current.masterVolume,isMuted:e.current.isMuted}),h("gameOver",{generations:e.current.generationCount,cause:e.current.causeOfGameOver||"Unknown"}))});return Pe.useEffect(()=>(S(),y),[S,y]),Le.jsx(iR,{isActive:E,gameStateRef:e,canvasRef:d,viewportCenterRef:l,playerActionHintsRef:a,isDebugOnRef:r,isEcosystemDebugOnRef:o,keysPressed:c})},Fm=()=>{const[e]=Pe.useState(()=>jC());return Le.jsx(oR,{initialState:e})},oR=({initialState:e})=>{const n=Pe.useRef(null),r=Pe.useRef(null),o=Pe.useRef(e),l=Pe.useRef(new Set),a=Pe.useRef(!1),c=Pe.useRef(!1),d=Pe.useRef(e.viewportCenter),h=Pe.useRef([]),{appState:p,setAppState:m}=kl();return Le.jsxs(Le.Fragment,{children:[Le.jsx(VC,{canvasRef:n,ctxRef:r,gameStateRef:o,isDebugOnRef:a,viewportCenterRef:d,playerActionHintsRef:h}),Le.jsx(rR,{gameStateRef:o,ctxRef:r,isDebugOnRef:a,isEcosystemDebugOnRef:c,viewportCenterRef:d,playerActionHintsRef:h,keysPressed:l,canvasRef:n,setAppState:m,appState:p})]})},sR=$n.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  background-color: rgba(0, 0, 0, 0.75); // Semi-transparent overlay
  color: #fff;
  padding: 20px;
  z-index: 10; // Ensure it's on top
`,aR=$n.h1`
  font-family: 'Press Start 2P', cursive;
  font-size: 4rem;
  color: #ff4136; // Red for emphasis
  text-shadow: 4px 4px 0px #000;
  margin-bottom: 1.5rem;
`,fl=$n.p`
  font-family: 'Press Start 2P', cursive;
  font-size: 1.2rem;
  margin: 0.5em 0;
  color: #fff;
  text-shadow: 2px 2px 0px #000;
`,lR=$n.button`
  font-family: 'Press Start 2P', cursive;
  font-size: 1rem;
  padding: 1rem 2rem;
  margin-top: 2em;
  color: #fff;
  background-color: #ff4136; // Red button
  border: 2px solid #fff;
  box-shadow: 4px 4px 0px #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  text-transform: uppercase;

  &:hover {
    background-color: #fff;
    color: #ff4136;
    box-shadow: 4px 4px 0px #ff4136;
  }
`,uR=()=>{const{setAppState:e,gameOverDetails:n}=kl(),r=()=>{e("intro")};return Le.jsxs(sR,{children:[Le.jsx(aR,{children:"Game Over"}),Le.jsx(fl,{children:"Your tribe's lineage has ended."}),n&&Le.jsxs(Le.Fragment,{children:[Le.jsxs(fl,{children:["Generations Survived: ",n.generations]}),Le.jsxs(fl,{children:["Cause of Extinction: ",n.cause]})]}),!n&&Le.jsx(fl,{children:"Game details are unavailable."}),Le.jsx(lR,{onClick:r,children:"Return to Menu"})]})},cR=TA`
  /* CSS Reset */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    padding: 0;
    font-family: 'Press Start 2P', 'Arial', sans-serif;
    background-color: #121212;
    color: #f0f0f0;
    line-height: 1.6;
  }

  /* Additional global styles */
  h1, h2, h3, h4, h5, h6 {
    margin-top: 0;
  }

  button {
    cursor: pointer;
    font-family: inherit;
  }

  /* Prevent overflow issues */
  html, body {
    height: 100%;
    overflow-x: hidden;
  }

  /* Root element for React app */
  #root {
    height: 100%;
  }
`;function dR(e,n){Pe.useEffect(()=>{const r=()=>{const o=document.location.hash==="#game"?"game":"intro";n(o)};return window.addEventListener("hashchange",r),r(),()=>{window.removeEventListener("hashchange",r)}},[]),Pe.useEffect(()=>{e==="game"?document.location.hash="#game":e==="intro"&&(document.location.hash="")},[e])}const fR=()=>{const{appState:e,setAppState:n}=kl();dR(e,n);const r=()=>{switch(e){case"intro":return Le.jsx(Om,{});case"game":return Le.jsx(Fm,{});case"gameOver":return Le.jsxs(Le.Fragment,{children:[Le.jsx(Fm,{}),Le.jsx(uR,{})]});default:return Le.jsx(Om,{})}};return Le.jsxs(Le.Fragment,{children:[Le.jsx(cR,{}),r()]})},Um=document.getElementById("root");Um?lE().then(()=>{SS.createRoot(Um).render(Le.jsx(Gn.StrictMode,{children:Le.jsx(AS,{initialAppState:document.location.hash==="#game"?"game":"intro",children:Le.jsx(fR,{})})}))}):console.error("Failed to find the root element");
